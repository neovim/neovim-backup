{
    "_links": {
        "comments": {
            "href": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3900/comments"
        },
        "commits": {
            "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/3900/commits"
        },
        "html": {
            "href": "https://github.com/neovim/nvim-lspconfig/pull/3900"
        },
        "issue": {
            "href": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3900"
        },
        "review_comment": {
            "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments{/number}"
        },
        "review_comments": {
            "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/3900/comments"
        },
        "self": {
            "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/3900"
        },
        "statuses": {
            "href": "https://api.github.com/repos/neovim/nvim-lspconfig/statuses/c86804a3d197274fad9a75bbf2ec4297a3a5a879"
        }
    },
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "auto_merge": null,
    "base": {
        "label": "neovim:master",
        "ref": "master",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/neovim/nvim-lspconfig/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/neovim/nvim-lspconfig/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/neovim/nvim-lspconfig/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/neovim/nvim-lspconfig/branches{/branch}",
            "clone_url": "https://github.com/neovim/nvim-lspconfig.git",
            "collaborators_url": "https://api.github.com/repos/neovim/nvim-lspconfig/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/neovim/nvim-lspconfig/comments{/number}",
            "commits_url": "https://api.github.com/repos/neovim/nvim-lspconfig/commits{/sha}",
            "compare_url": "https://api.github.com/repos/neovim/nvim-lspconfig/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/neovim/nvim-lspconfig/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/neovim/nvim-lspconfig/contributors",
            "created_at": "2019-11-13T17:12:28Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/neovim/nvim-lspconfig/deployments",
            "description": "Quickstart configs for Nvim LSP",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/neovim/nvim-lspconfig/downloads",
            "events_url": "https://api.github.com/repos/neovim/nvim-lspconfig/events",
            "fork": false,
            "forks": 2282,
            "forks_count": 2282,
            "forks_url": "https://api.github.com/repos/neovim/nvim-lspconfig/forks",
            "full_name": "neovim/nvim-lspconfig",
            "git_commits_url": "https://api.github.com/repos/neovim/nvim-lspconfig/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/neovim/nvim-lspconfig/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/neovim/nvim-lspconfig/git/tags{/sha}",
            "git_url": "git://github.com/neovim/nvim-lspconfig.git",
            "has_discussions": false,
            "has_downloads": true,
            "has_issues": true,
            "has_pages": false,
            "has_projects": false,
            "has_wiki": true,
            "homepage": "",
            "hooks_url": "https://api.github.com/repos/neovim/nvim-lspconfig/hooks",
            "html_url": "https://github.com/neovim/nvim-lspconfig",
            "id": 221512407,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues{/number}",
            "keys_url": "https://api.github.com/repos/neovim/nvim-lspconfig/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/neovim/nvim-lspconfig/labels{/name}",
            "language": "Lua",
            "languages_url": "https://api.github.com/repos/neovim/nvim-lspconfig/languages",
            "license": {
                "key": "apache-2.0",
                "name": "Apache License 2.0",
                "node_id": "MDc6TGljZW5zZTI=",
                "spdx_id": "Apache-2.0",
                "url": "https://api.github.com/licenses/apache-2.0"
            },
            "merges_url": "https://api.github.com/repos/neovim/nvim-lspconfig/merges",
            "milestones_url": "https://api.github.com/repos/neovim/nvim-lspconfig/milestones{/number}",
            "mirror_url": null,
            "name": "nvim-lspconfig",
            "node_id": "MDEwOlJlcG9zaXRvcnkyMjE1MTI0MDc=",
            "notifications_url": "https://api.github.com/repos/neovim/nvim-lspconfig/notifications{?since,all,participating}",
            "open_issues": 36,
            "open_issues_count": 36,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
                "events_url": "https://api.github.com/users/neovim/events{/privacy}",
                "followers_url": "https://api.github.com/users/neovim/followers",
                "following_url": "https://api.github.com/users/neovim/following{/other_user}",
                "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/neovim",
                "id": 6471485,
                "login": "neovim",
                "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
                "organizations_url": "https://api.github.com/users/neovim/orgs",
                "received_events_url": "https://api.github.com/users/neovim/received_events",
                "repos_url": "https://api.github.com/users/neovim/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
                "type": "Organization",
                "url": "https://api.github.com/users/neovim",
                "user_view_type": "public"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls{/number}",
            "pushed_at": "2025-08-03T18:32:49Z",
            "releases_url": "https://api.github.com/repos/neovim/nvim-lspconfig/releases{/id}",
            "size": 6334,
            "ssh_url": "git@github.com:neovim/nvim-lspconfig.git",
            "stargazers_count": 12438,
            "stargazers_url": "https://api.github.com/repos/neovim/nvim-lspconfig/stargazers",
            "statuses_url": "https://api.github.com/repos/neovim/nvim-lspconfig/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/neovim/nvim-lspconfig/subscribers",
            "subscription_url": "https://api.github.com/repos/neovim/nvim-lspconfig/subscription",
            "svn_url": "https://github.com/neovim/nvim-lspconfig",
            "tags_url": "https://api.github.com/repos/neovim/nvim-lspconfig/tags",
            "teams_url": "https://api.github.com/repos/neovim/nvim-lspconfig/teams",
            "topics": [
                "language-server",
                "language-server-protocol",
                "lsp",
                "neovim",
                "nvim",
                "plugin",
                "vim"
            ],
            "trees_url": "https://api.github.com/repos/neovim/nvim-lspconfig/git/trees{/sha}",
            "updated_at": "2025-08-04T20:56:17Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig",
            "visibility": "public",
            "watchers": 12438,
            "watchers_count": 12438,
            "web_commit_signoff_required": false
        },
        "sha": "77d3fdfb3554632c7a3b101ded643d422de7626f",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
            "events_url": "https://api.github.com/users/neovim/events{/privacy}",
            "followers_url": "https://api.github.com/users/neovim/followers",
            "following_url": "https://api.github.com/users/neovim/following{/other_user}",
            "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/neovim",
            "id": 6471485,
            "login": "neovim",
            "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
            "organizations_url": "https://api.github.com/users/neovim/orgs",
            "received_events_url": "https://api.github.com/users/neovim/received_events",
            "repos_url": "https://api.github.com/users/neovim/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
            "type": "Organization",
            "url": "https://api.github.com/users/neovim",
            "user_view_type": "public"
        }
    },
    "body": "---\r\nname: Pull Request\r\nabout: Submit a pull request\r\ntitle: fix(eslint): detect Yarn PnP in function form cmd\r\n---\r\n<!-- === GH HISTORY FORMAT FENCE === --> <!--\r\n### [`%h`]({{.url}}/commits/%H) %s%n%n%b%n\r\n--> <!-- === GH HISTORY FORMAT FENCE === -->\r\n<!-- === GH HISTORY FENCE === -->\r\n### [`c86804a3`](https://github.com/neovim/nvim-lspconfig/pull/3900/commits/c86804a3d197274fad9a75bbf2ec4297a3a5a879) fix(eslint): detect Yarn PnP in function form cmd\r\n\r\nProblem:\r\nIn the new lsp/eslint.lua, the PnP detection in before_init did not work\r\nat all as before_init cannot modify config.cmd [1].\r\n\r\nSolution:\r\nThe code is moved to the new cmd function, which detects PnP by checking\r\n.pnp.[c]js and prepends cmd with 'yarn exec' so that Node.js can load a\r\nPnP project's ESLint library zip file for ESLint LS.\r\n\r\nIn the old lua/lspconfig/configs/eslint.lua, on_new_config still works,\r\nthough since [2] the new :Lsp* commands no longer utilise the old files.\r\n\r\nNote since the cmd function does not have access to either bufnr or the\r\nresolved root_dir [3], it only looks for .pnp.[c]js in current working\r\ndirectory.\r\n\r\n[1] https://github.com/neovim/neovim/blob/93925fe0/runtime/lua/vim/lsp/client.lua#L456-L466\r\n[2] https://github.com/neovim/nvim-lspconfig/commit/e4d1c8bf9077ecf617ce18f27738658a7d76ac95\r\n[3] https://github.com/neovim/neovim/blob/93925fe0/runtime/lua/vim/lsp.lua#L558\r\n\r\n\r\n<!-- === GH HISTORY FENCE === -->\r\n---\r\nCloses #3858\r\n\r\nCloses #3889\r\n",
    "closed_at": "2025-08-04T07:30:07Z",
    "comment_data": [],
    "comment_regular_data": [
        {
            "author_association": "MEMBER",
            "body": "> Note since the cmd function does not have access to either bufnr or the  resolved root_dir [3], it only looks for .pnp.[c]js in current working directory.\r\n\r\nThat is a confusing thing to mention. Even if `cmd` had access to bufnr/root-dir, it is starting the LS. Obviously, you wouldn't want to start a new LS for every buffer, so what good would it do for `cmd` to know the bufnr?\r\n\r\nI still would like to confirm my question from https://github.com/neovim/nvim-lspconfig/issues/3889#issuecomment-2959410872 : is this decision required as a CLI arg? Then if so, it makes sense to define `cmd` as you have done here. Please mention that in a one-line comment. And that also means there is no reason to mention that \"cmd does not know bufnr\", because that's irrelevant.",
            "created_at": "2025-06-11T10:18:02Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/3900#issuecomment-2962087461",
            "id": 2962087461,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3900",
            "node_id": "IC_kwDODTQC186wjd4l",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2962087461/reactions"
            },
            "updated_at": "2025-06-11T10:18:02Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2962087461",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> Obviously, you wouldn't want to start a new LS for every buffer, so what good would it do for `cmd` to know the bufnr?\r\n\r\nI think you may want to define a `reuse_client` function. Then `cmd` can use `nvim_get_current_buf()` instead of CWD ?",
            "created_at": "2025-06-11T10:19:42Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/3900#issuecomment-2962092373",
            "id": 2962092373,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3900",
            "node_id": "IC_kwDODTQC186wjfFV",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2962092373/reactions"
            },
            "updated_at": "2025-06-11T10:20:09Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2962092373",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "> That is a confusing thing to mention. Even if `cmd` had access to bufnr/root-dir, it is starting the LS. Obviously, you wouldn't want to start a new LS for every buffer, so what good would it do for `cmd` to know the bufnr?\r\n\r\nI agree it's not quite intuitive. Basically having bufnr/root_dir allows it to check if `root_dir/.pnp.[c]js` exists, so that users can e.g. open a file from any sub-directory in a project.\r\n\r\nIf you take my playground project in #3889, with this PR + the new `vim.lsp.enable('eslint')`, `nvim -u repro.lua packages/shared/src/index.ts` works while `cd packages/shared/src; nvim -u ../../../repro.lua ./index.ts` still has the 'Unable to find ESLint library' issue. (On the other hand with the old `require('lspconfig').eslint.setup({})`, both can work.)\r\n\r\n> I still would like to confirm my question from [#3889 (comment)](https://github.com/neovim/nvim-lspconfig/issues/3889#issuecomment-2959410872) : is this decision required as a CLI arg?\r\n\r\nYes, somewhat. It's not an arg of the eslint LS itself but some args of `node` that `yarn exec` adds.\r\n\r\n```sh\r\n# still in my playground project\r\n$ node\r\nWelcome to Node.js v24.2.0.\r\nType \".help\" for more information.\r\n> process.env.NODE_OPTIONS\r\nundefined\r\n\r\n$ yarn exec node\r\nWelcome to Node.js v24.2.0.\r\nType \".help\" for more information.\r\n> process.env.NODE_OPTIONS\r\n'--require /home/frederick/Programming/Others/playground/.pnp.cjs --experimental-loader file:///home/frederick/Programming/Others/playground/.pnp.loader.mjs'\r\n```\r\n\r\nAFAIU `yarn exec` instructs `node` to load the `.pnp.[c]js` file upon start, which monkey patches `require`/`import` to allow loading dependency zip files, which replaces `node_modules/` in Yarn PnP. So eslint LS itself probably just always calls `const eslintLib = require('eslint')` or something, but without these additional node args, node only looks for `node_modules/`, which is nowhere to be found in a Yarn PnP project.\r\n\r\n> I think you may want to define a `reuse_client` function. Then `cmd` can use `nvim_get_current_buf()` instead of CWD ?\r\n\r\nI'm not familiar with this function but after having a glace at the docs, I assume it's something that gets called every time a new buffer of a related filetype (.js / .ts) is opened. So I assume you were talking about that in this `fun(client: vim.lsp.Client, config: vim.lsp.ClientConfig): boolean`, I can modify `config: vim.lsp.ClientConfig` and return `false` ~~once (be careful of >1 existing eslint LS client)~~, and here `config.cmd` modifications are actually effective since it happens before `Client.create(config)`?\r\n\r\nIf I'm not mistaken, unless `reuse_client` gets called when starting the first client too with `(nil, config)`, it only helps when opening new files? Plus if a user does something like `nvim package.json packages/shared/src/index.ts` then `:tab all`, `nvim_get_current_buf()` may not return the buffer we want?",
            "created_at": "2025-06-11T12:48:39Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/3900#issuecomment-2962559776",
            "id": 2962559776,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3900",
            "node_id": "IC_kwDODTQC186wlRMg",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2962559776/reactions"
            },
            "updated_at": "2025-06-11T13:26:53Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2962559776",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/4507647?v=4",
                "events_url": "https://api.github.com/users/Frederick888/events{/privacy}",
                "followers_url": "https://api.github.com/users/Frederick888/followers",
                "following_url": "https://api.github.com/users/Frederick888/following{/other_user}",
                "gists_url": "https://api.github.com/users/Frederick888/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Frederick888",
                "id": 4507647,
                "login": "Frederick888",
                "node_id": "MDQ6VXNlcjQ1MDc2NDc=",
                "organizations_url": "https://api.github.com/users/Frederick888/orgs",
                "received_events_url": "https://api.github.com/users/Frederick888/received_events",
                "repos_url": "https://api.github.com/users/Frederick888/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Frederick888/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Frederick888/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Frederick888",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> > I still would like to confirm my question from [#3889 (comment)](https://github.com/neovim/nvim-lspconfig/issues/3889#issuecomment-2959410872) : is this decision required as a CLI arg?\r\n> \r\n> Yes, somewhat. It's not an arg of the eslint LS itself but some args of `node` that `yarn exec` adds.\r\n\r\nNevertheless, a one-line comment should mention that.\r\n\r\n\r\n> unless `reuse_client` gets called when starting the first client too with `(nil, config)`, it only helps when opening new files?\r\n\r\n`reuse_client` is not used for the first client because `cmd` of course will always be invoked for the first client. Thereafter, `reuse_client` decides whether to re-invoke `cmd`.",
            "created_at": "2025-06-11T14:10:49Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/3900#issuecomment-2962998290",
            "id": 2962998290,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3900",
            "node_id": "IC_kwDODTQC186wm8QS",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2962998290/reactions"
            },
            "updated_at": "2025-06-11T14:10:49Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2962998290",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "> Nevertheless, a one-line comment should mention that.\r\n\r\nDone.\r\n\r\n> > unless `reuse_client` gets called when starting the first client too with `(nil, config)`, it only helps when opening new files?\r\n> \r\n> `reuse_client` is not used for the first client because `cmd` of course will always be invoked for the first client. Thereafter, `reuse_client` decides whether to re-invoke `cmd`.\r\n\r\nThen I think really it'd be nice if something simpler can come out of https://github.com/neovim/neovim/issues/32287 that allows constructing cmd according to root_dir. Then the default behaviour of reuse_client, i.e. reuse if root_dir is the same, should just work nicely too.",
            "created_at": "2025-06-11T14:47:29Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/3900#issuecomment-2963133101",
            "id": 2963133101,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3900",
            "node_id": "IC_kwDODTQC186wndKt",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2963133101/reactions"
            },
            "updated_at": "2025-06-11T14:47:29Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2963133101",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/4507647?v=4",
                "events_url": "https://api.github.com/users/Frederick888/events{/privacy}",
                "followers_url": "https://api.github.com/users/Frederick888/followers",
                "following_url": "https://api.github.com/users/Frederick888/following{/other_user}",
                "gists_url": "https://api.github.com/users/Frederick888/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Frederick888",
                "id": 4507647,
                "login": "Frederick888",
                "node_id": "MDQ6VXNlcjQ1MDc2NDc=",
                "organizations_url": "https://api.github.com/users/Frederick888/orgs",
                "received_events_url": "https://api.github.com/users/Frederick888/received_events",
                "repos_url": "https://api.github.com/users/Frederick888/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Frederick888/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Frederick888/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Frederick888",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> it'd be nice if something simpler can come out of [neovim/neovim#32287](https://github.com/neovim/neovim/issues/32287) that allows constructing cmd according to root_dir. Then the default behaviour of reuse_client, i.e. reuse if root_dir is the same, should just work nicely too.\r\n\r\ncan you show a concrete example\r\n\r\nmeanwhile, why not use `reuse_client` in this config? Otherwise the CWD gets saved in `cmd` for all future buffers.",
            "created_at": "2025-06-11T18:32:23Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/3900#issuecomment-2963795921",
            "id": 2963795921,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3900",
            "node_id": "IC_kwDODTQC186wp-_R",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2963795921/reactions"
            },
            "updated_at": "2025-06-11T18:33:38Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2963795921",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "FWIW, I tried this in my `init.lua` and am getting this error:\r\n\r\n`LSP[eslint]: Error BEFORE_INIT_CALLBACK_ERROR: \"vim/shared.lua:0: src: expected table, got function\"`\r\n\r\n```lua\r\nvim.lsp.config(\"eslint\", {\r\n  cmd = function(dispatchers)\r\n    local eslint_cmd = { 'vscode-eslint-language-server', '--stdio' }\r\n    -- No bufnr or root_dir here. Always use cwd() for now.\r\n    local root_dir = vim.uv.cwd()\r\n\r\n    -- Support Yarn2 (PnP) projects\r\n    local pnp_cjs = root_dir .. '/.pnp.cjs'\r\n    local pnp_js = root_dir .. '/.pnp.js'\r\n    if vim.uv.fs_stat(pnp_cjs) or vim.uv.fs_stat(pnp_js) then\r\n      eslint_cmd = { 'yarn', 'exec', unpack(eslint_cmd) }\r\n    end\r\n\r\n    return vim.lsp.rpc.start(eslint_cmd, dispatchers)\r\n  end,\r\n})\r\n```",
            "created_at": "2025-07-30T19:12:30Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/3900#issuecomment-3137532043",
            "id": 3137532043,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3900",
            "node_id": "IC_kwDODTQC1867AvCL",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/3137532043/reactions"
            },
            "updated_at": "2025-07-30T19:12:30Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/3137532043",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/643417?v=4",
                "events_url": "https://api.github.com/users/jsit/events{/privacy}",
                "followers_url": "https://api.github.com/users/jsit/followers",
                "following_url": "https://api.github.com/users/jsit/following{/other_user}",
                "gists_url": "https://api.github.com/users/jsit/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/jsit",
                "id": 643417,
                "login": "jsit",
                "node_id": "MDQ6VXNlcjY0MzQxNw==",
                "organizations_url": "https://api.github.com/users/jsit/orgs",
                "received_events_url": "https://api.github.com/users/jsit/received_events",
                "repos_url": "https://api.github.com/users/jsit/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/jsit/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jsit/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/jsit",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> `LSP[eslint]: Error BEFORE_INIT_CALLBACK_ERROR: \"vim/shared.lua:0: src: expected table, got function\"`\r\n\r\nHmm, this pr removes some part of `before_init` so may need to figure that out before merging this.",
            "created_at": "2025-08-03T15:59:47Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/3900#issuecomment-3148513353",
            "id": 3148513353,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3900",
            "node_id": "IC_kwDODTQC1867qoBJ",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/3148513353/reactions"
            },
            "updated_at": "2025-08-03T15:59:47Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/3148513353",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "Sorry for the delay. I gave `reuse_client` a shot but wasn't able to get it working. And after encountering [yet another annoying PnP quirk](https://github.com/yarnpkg/berry/issues/6823), I now plan to just disable PnP and stop investing more time in it (not only this PR but also a few TODOs in my project). In theory it's a novel idea, in practice it's just of too much friction...\r\n\r\nI'm afraid I'm gonna close this PR. Anyone else who's still willing to wrestle with the PnP dragon, feel free to take any of the code here :)",
            "created_at": "2025-08-04T07:30:08Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/3900#issuecomment-3149448356",
            "id": 3149448356,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3900",
            "node_id": "IC_kwDODTQC1867uMSk",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/3149448356/reactions"
            },
            "updated_at": "2025-08-04T07:30:08Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/3149448356",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/4507647?v=4",
                "events_url": "https://api.github.com/users/Frederick888/events{/privacy}",
                "followers_url": "https://api.github.com/users/Frederick888/followers",
                "following_url": "https://api.github.com/users/Frederick888/following{/other_user}",
                "gists_url": "https://api.github.com/users/Frederick888/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Frederick888",
                "id": 4507647,
                "login": "Frederick888",
                "node_id": "MDQ6VXNlcjQ1MDc2NDc=",
                "organizations_url": "https://api.github.com/users/Frederick888/orgs",
                "received_events_url": "https://api.github.com/users/Frederick888/received_events",
                "repos_url": "https://api.github.com/users/Frederick888/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Frederick888/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Frederick888/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Frederick888",
                "user_view_type": "public"
            }
        }
    ],
    "comments_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3900/comments",
    "commits_url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/3900/commits",
    "created_at": "2025-06-11T09:31:28Z",
    "diff_url": "https://github.com/neovim/nvim-lspconfig/pull/3900.diff",
    "draft": false,
    "head": {
        "label": "Frederick888:fix-eslint-yarn-pnp",
        "ref": "fix-eslint-yarn-pnp",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/Frederick888/nvim-lspconfig/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/Frederick888/nvim-lspconfig/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/Frederick888/nvim-lspconfig/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/Frederick888/nvim-lspconfig/branches{/branch}",
            "clone_url": "https://github.com/Frederick888/nvim-lspconfig.git",
            "collaborators_url": "https://api.github.com/repos/Frederick888/nvim-lspconfig/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/Frederick888/nvim-lspconfig/comments{/number}",
            "commits_url": "https://api.github.com/repos/Frederick888/nvim-lspconfig/commits{/sha}",
            "compare_url": "https://api.github.com/repos/Frederick888/nvim-lspconfig/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/Frederick888/nvim-lspconfig/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/Frederick888/nvim-lspconfig/contributors",
            "created_at": "2025-06-11T08:36:55Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/Frederick888/nvim-lspconfig/deployments",
            "description": "Quickstart configs for Nvim LSP",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/Frederick888/nvim-lspconfig/downloads",
            "events_url": "https://api.github.com/repos/Frederick888/nvim-lspconfig/events",
            "fork": true,
            "forks": 0,
            "forks_count": 0,
            "forks_url": "https://api.github.com/repos/Frederick888/nvim-lspconfig/forks",
            "full_name": "Frederick888/nvim-lspconfig",
            "git_commits_url": "https://api.github.com/repos/Frederick888/nvim-lspconfig/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/Frederick888/nvim-lspconfig/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/Frederick888/nvim-lspconfig/git/tags{/sha}",
            "git_url": "git://github.com/Frederick888/nvim-lspconfig.git",
            "has_discussions": false,
            "has_downloads": true,
            "has_issues": false,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "",
            "hooks_url": "https://api.github.com/repos/Frederick888/nvim-lspconfig/hooks",
            "html_url": "https://github.com/Frederick888/nvim-lspconfig",
            "id": 1000083367,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/Frederick888/nvim-lspconfig/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/Frederick888/nvim-lspconfig/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/Frederick888/nvim-lspconfig/issues{/number}",
            "keys_url": "https://api.github.com/repos/Frederick888/nvim-lspconfig/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/Frederick888/nvim-lspconfig/labels{/name}",
            "language": null,
            "languages_url": "https://api.github.com/repos/Frederick888/nvim-lspconfig/languages",
            "license": {
                "key": "apache-2.0",
                "name": "Apache License 2.0",
                "node_id": "MDc6TGljZW5zZTI=",
                "spdx_id": "Apache-2.0",
                "url": "https://api.github.com/licenses/apache-2.0"
            },
            "merges_url": "https://api.github.com/repos/Frederick888/nvim-lspconfig/merges",
            "milestones_url": "https://api.github.com/repos/Frederick888/nvim-lspconfig/milestones{/number}",
            "mirror_url": null,
            "name": "nvim-lspconfig",
            "node_id": "R_kgDOO5wPpw",
            "notifications_url": "https://api.github.com/repos/Frederick888/nvim-lspconfig/notifications{?since,all,participating}",
            "open_issues": 0,
            "open_issues_count": 0,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/4507647?v=4",
                "events_url": "https://api.github.com/users/Frederick888/events{/privacy}",
                "followers_url": "https://api.github.com/users/Frederick888/followers",
                "following_url": "https://api.github.com/users/Frederick888/following{/other_user}",
                "gists_url": "https://api.github.com/users/Frederick888/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Frederick888",
                "id": 4507647,
                "login": "Frederick888",
                "node_id": "MDQ6VXNlcjQ1MDc2NDc=",
                "organizations_url": "https://api.github.com/users/Frederick888/orgs",
                "received_events_url": "https://api.github.com/users/Frederick888/received_events",
                "repos_url": "https://api.github.com/users/Frederick888/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Frederick888/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Frederick888/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Frederick888",
                "user_view_type": "public"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/Frederick888/nvim-lspconfig/pulls{/number}",
            "pushed_at": "2025-08-04T07:30:13Z",
            "releases_url": "https://api.github.com/repos/Frederick888/nvim-lspconfig/releases{/id}",
            "size": 5920,
            "ssh_url": "git@github.com:Frederick888/nvim-lspconfig.git",
            "stargazers_count": 0,
            "stargazers_url": "https://api.github.com/repos/Frederick888/nvim-lspconfig/stargazers",
            "statuses_url": "https://api.github.com/repos/Frederick888/nvim-lspconfig/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/Frederick888/nvim-lspconfig/subscribers",
            "subscription_url": "https://api.github.com/repos/Frederick888/nvim-lspconfig/subscription",
            "svn_url": "https://github.com/Frederick888/nvim-lspconfig",
            "tags_url": "https://api.github.com/repos/Frederick888/nvim-lspconfig/tags",
            "teams_url": "https://api.github.com/repos/Frederick888/nvim-lspconfig/teams",
            "topics": [],
            "trees_url": "https://api.github.com/repos/Frederick888/nvim-lspconfig/git/trees{/sha}",
            "updated_at": "2025-06-11T08:36:55Z",
            "url": "https://api.github.com/repos/Frederick888/nvim-lspconfig",
            "visibility": "public",
            "watchers": 0,
            "watchers_count": 0,
            "web_commit_signoff_required": false
        },
        "sha": "c86804a3d197274fad9a75bbf2ec4297a3a5a879",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/4507647?v=4",
            "events_url": "https://api.github.com/users/Frederick888/events{/privacy}",
            "followers_url": "https://api.github.com/users/Frederick888/followers",
            "following_url": "https://api.github.com/users/Frederick888/following{/other_user}",
            "gists_url": "https://api.github.com/users/Frederick888/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/Frederick888",
            "id": 4507647,
            "login": "Frederick888",
            "node_id": "MDQ6VXNlcjQ1MDc2NDc=",
            "organizations_url": "https://api.github.com/users/Frederick888/orgs",
            "received_events_url": "https://api.github.com/users/Frederick888/received_events",
            "repos_url": "https://api.github.com/users/Frederick888/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/Frederick888/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Frederick888/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/Frederick888",
            "user_view_type": "public"
        }
    },
    "html_url": "https://github.com/neovim/nvim-lspconfig/pull/3900",
    "id": 2583633515,
    "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3900",
    "labels": [],
    "locked": false,
    "merge_commit_sha": "252d3845c0f900417273f5e77ef2ef54d590db9b",
    "merged_at": null,
    "milestone": null,
    "node_id": "PR_kwDODTQC186Z_x5r",
    "number": 3900,
    "patch_url": "https://github.com/neovim/nvim-lspconfig/pull/3900.patch",
    "requested_reviewers": [],
    "requested_teams": [],
    "review_comment_url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments{/number}",
    "review_comments_url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/3900/comments",
    "state": "closed",
    "statuses_url": "https://api.github.com/repos/neovim/nvim-lspconfig/statuses/c86804a3d197274fad9a75bbf2ec4297a3a5a879",
    "title": "fix(eslint): detect Yarn PnP in function form cmd",
    "updated_at": "2025-08-04T07:30:13Z",
    "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/3900",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/4507647?v=4",
        "events_url": "https://api.github.com/users/Frederick888/events{/privacy}",
        "followers_url": "https://api.github.com/users/Frederick888/followers",
        "following_url": "https://api.github.com/users/Frederick888/following{/other_user}",
        "gists_url": "https://api.github.com/users/Frederick888/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/Frederick888",
        "id": 4507647,
        "login": "Frederick888",
        "node_id": "MDQ6VXNlcjQ1MDc2NDc=",
        "organizations_url": "https://api.github.com/users/Frederick888/orgs",
        "received_events_url": "https://api.github.com/users/Frederick888/received_events",
        "repos_url": "https://api.github.com/users/Frederick888/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/Frederick888/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Frederick888/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/Frederick888",
        "user_view_type": "public"
    }
}