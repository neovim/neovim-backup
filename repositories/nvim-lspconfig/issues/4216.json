{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Description\n\nNeovim version: v0.11.5\n\nNoticed in downstream @ https://github.com/LazyVim/LazyVim/issues/6816\n\nIt is common, for example in a Tauri project running Deno, to have a Deno project with a `package.json` and a `deno.lock` without a `deno.json`. See https://docs.deno.com/runtime/fundamentals/node/#first-class-package.json-support. However, after [this change,](https://github.com/neovim/nvim-lspconfig/commit/2d4ece4add76ea4fc3792e9425c62b3e66852d99) a Deno project set up this way will no longer have LSP support.\n\nReproduction script using lazy.nvim repro tools. This creates a typical LazyVim setup that has vtsls and denols enabled:\n\n```lua\nvim.env.LAZY_STDPATH = \".repro\"\nload(vim.fn.system(\"curl -s https://raw.githubusercontent.com/folke/lazy.nvim/main/bootstrap.lua\"))()\n\nrequire(\"lazy.minit\").repro({\n  spec = {\n    { \"LazyVim/LazyVim\", import = \"lazyvim.plugins\" },\n    { \"LazyVim/LazyVim\", import = \"lazyvim.plugins.extras.lang.typescript\" },\n    {\n      \"neovim/nvim-lspconfig\",\n      commit = \"b34fbdf\",\n      opts = {\n        servers = {\n          -- as an example, this is also applicable for other non-Deno LSPs that technically work.\n          vtsls = {\n            enabled = true,\n          },\n          denols = {\n            enabled = true,\n          },\n        },\n      },\n    },\n  },\n})\n\n```\nRunning this and trying to edit Typescript or Javascript in a repo with `package.json` and `deno.lock`, without a `deno.json`, will result in no LSPs being triggered.\n\nAn open question here to address this regression is which LSP *should* be activated in this situation?",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "cc @xbwwj \n\n> after [this change,](https://github.com/neovim/nvim-lspconfig/commit/2d4ece4add76ea4fc3792e9425c62b3e66852d99) a Deno project set up this way will no longer have LSP support.\n\ngood lord we are going in circles. \n\n\n\n> to address this regression is which LSP _should_ be activated in this situation?\n\nthe general answer is that the config should target the common case, and document how to change things for the uncommon case.\n\nNvim can't magically do the right thing for every weird project.\n\ni have no idea what the most common setup is, that is up to users who actually use this stuff.",
            "created_at": "2025-11-26T00:24:13Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/4216#issuecomment-3578185748",
            "id": 3578185748,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/4216",
            "node_id": "IC_kwDODTQC187VRsgU",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/3578185748/reactions"
            },
            "updated_at": "2025-11-26T00:24:36Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/3578185748",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Just merged https://github.com/neovim/nvim-lspconfig/pull/4207 , does it help at all? ",
            "created_at": "2025-11-26T00:32:07Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/4216#issuecomment-3578207537",
            "id": 3578207537,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/4216",
            "node_id": "IC_kwDODTQC187VRx0x",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/3578207537/reactions"
            },
            "updated_at": "2025-11-26T00:32:07Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/3578207537",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I am the author of #4207, and I don't think this PR resolves this issue.\nMy implementation treats projects as non-Deno if a package.json file exists.\n\nI'll try to create a fix.\nTheoretically, we should start by treating it as a Deno project without question only if deno.lock exists, and then differentiate its priority from other root markers; this should be possible.\n\n@VioletWoodETL It would be very helpful if you could provide a sample of a Tauri project running on Deno in a public repository or something similar!",
            "created_at": "2025-11-26T02:37:58Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/4216#issuecomment-3578645897",
            "id": 3578645897,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/4216",
            "node_id": "IC_kwDODTQC187VTc2J",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 3,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 3,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/3578645897/reactions"
            },
            "updated_at": "2025-11-26T02:40:07Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/3578645897",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/84216737?v=4",
                "events_url": "https://api.github.com/users/AsPulse/events{/privacy}",
                "followers_url": "https://api.github.com/users/AsPulse/followers",
                "following_url": "https://api.github.com/users/AsPulse/following{/other_user}",
                "gists_url": "https://api.github.com/users/AsPulse/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/AsPulse",
                "id": 84216737,
                "login": "AsPulse",
                "node_id": "MDQ6VXNlcjg0MjE2NzM3",
                "organizations_url": "https://api.github.com/users/AsPulse/orgs",
                "received_events_url": "https://api.github.com/users/AsPulse/received_events",
                "repos_url": "https://api.github.com/users/AsPulse/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/AsPulse/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/AsPulse/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/AsPulse",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "@justinmk I believe the following PR will resolve this issue. (I apologize for it being a bit large change.)\n- #4217\n\nSince implementations that separate Deno and non-Deno projects exist in various places, I've consolidated them into one location and introduced more robust judgment than the previous codebase.\n\nI'd appreciate it if you could review it!\n\n<br />\n\n@VioletWoodETL \nYou can try the fixes I'm proposing on your end by doing the following.\nIf you have time, it would be very helpful if you could let me know whether it worked or not.\n\n```lua\n  {\n    'AsPulse/nvim-lspconfig',\n    branch = 'feat(lsp)/smarter-typescript-project-detection',\n    ...\n```",
            "created_at": "2025-11-26T07:24:41Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/4216#issuecomment-3579799825",
            "id": 3579799825,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/4216",
            "node_id": "IC_kwDODTQC187VX2kR",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/3579799825/reactions"
            },
            "updated_at": "2025-11-26T07:24:41Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/3579799825",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/84216737?v=4",
                "events_url": "https://api.github.com/users/AsPulse/events{/privacy}",
                "followers_url": "https://api.github.com/users/AsPulse/followers",
                "following_url": "https://api.github.com/users/AsPulse/following{/other_user}",
                "gists_url": "https://api.github.com/users/AsPulse/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/AsPulse",
                "id": 84216737,
                "login": "AsPulse",
                "node_id": "MDQ6VXNlcjg0MjE2NzM3",
                "organizations_url": "https://api.github.com/users/AsPulse/orgs",
                "received_events_url": "https://api.github.com/users/AsPulse/received_events",
                "repos_url": "https://api.github.com/users/AsPulse/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/AsPulse/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/AsPulse/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/AsPulse",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "@AsPulse Here's the example repo you asked for: https://github.com/VioletWoodETL/example-deno-tauri\n\nI tried changing the repro script to this and feeding it to `nvim -u`:\n```lua\nvim.env.LAZY_STDPATH = \".repro\"\nload(vim.fn.system(\"curl -s https://raw.githubusercontent.com/folke/lazy.nvim/main/bootstrap.lua\"))()\n\nrequire(\"lazy.minit\").repro({\n  spec = {\n    { \"LazyVim/LazyVim\", import = \"lazyvim.plugins\" },\n    { \"LazyVim/LazyVim\", import = \"lazyvim.plugins.extras.lang.typescript\" },\n    {\n      \"AsPulse/nvim-lspconfig\",\n      branch = \"feat(lsp)/smarter-typescript-project-detection\",\n      opts = {\n        servers = {\n          -- as an example, this is also applicable for other non-Deno LSPs that technically work.\n          vtsls = {\n            enabled = true,\n          },\n          denols = {\n            enabled = true,\n          },\n        },\n      },\n    },\n  },\n})\n```\n\nHowever, I did not get any results with the example repo, `:LspInfo` is still dry on active clients. That being said, that's probably LazyVim's fault, the config is highly complex. You may have more luck accurately reproducing results on your end with that Tauri sample.\n",
            "created_at": "2025-11-26T16:43:56Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/4216#issuecomment-3582203679",
            "id": 3582203679,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/4216",
            "node_id": "IC_kwDODTQC187VhBcf",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/3582203679/reactions"
            },
            "updated_at": "2025-11-26T16:43:56Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/3582203679",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/195377642?v=4",
                "events_url": "https://api.github.com/users/VioletWoodETL/events{/privacy}",
                "followers_url": "https://api.github.com/users/VioletWoodETL/followers",
                "following_url": "https://api.github.com/users/VioletWoodETL/following{/other_user}",
                "gists_url": "https://api.github.com/users/VioletWoodETL/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/VioletWoodETL",
                "id": 195377642,
                "login": "VioletWoodETL",
                "node_id": "U_kgDOC6U56g",
                "organizations_url": "https://api.github.com/users/VioletWoodETL/orgs",
                "received_events_url": "https://api.github.com/users/VioletWoodETL/received_events",
                "repos_url": "https://api.github.com/users/VioletWoodETL/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/VioletWoodETL/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/VioletWoodETL/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/VioletWoodETL",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "I get the feeling that it's _too generic_ to detect Deno/non-Deno for a buffer by only checking for `package.json`, `deno.json`, `deno.lock` files etc. being present.\n\nWould it not be better to try to make use of the [Deno LSP server's settings](https://docs.deno.com/runtime/reference/lsp_integration/#settings) `deno.enablePaths` (or `deno.enable`) setting? That allows for enabling/disabling denols per-path, or disabling it completely using `deno.enable`.",
            "created_at": "2025-11-26T22:34:22Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/4216#issuecomment-3583437673",
            "id": 3583437673,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/4216",
            "node_id": "IC_kwDODTQC187Vlutp",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/3583437673/reactions"
            },
            "updated_at": "2025-12-01T08:15:03Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/3583437673",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/181568?v=4",
                "events_url": "https://api.github.com/users/eriklindebratt/events{/privacy}",
                "followers_url": "https://api.github.com/users/eriklindebratt/followers",
                "following_url": "https://api.github.com/users/eriklindebratt/following{/other_user}",
                "gists_url": "https://api.github.com/users/eriklindebratt/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/eriklindebratt",
                "id": 181568,
                "login": "eriklindebratt",
                "node_id": "MDQ6VXNlcjE4MTU2OA==",
                "organizations_url": "https://api.github.com/users/eriklindebratt/orgs",
                "received_events_url": "https://api.github.com/users/eriklindebratt/received_events",
                "repos_url": "https://api.github.com/users/eriklindebratt/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/eriklindebratt/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/eriklindebratt/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/eriklindebratt",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "@VioletWoodETL Thank you for the repository.\nIn my environment, upon opening src/main.ts from that repository, I confirmed that denols was activated (and no other LSP was activated).\n\nThe reason it's not working in your environment is likely because you are using a [deprecated](https://github.com/neovim/nvim-lspconfig?tab=readme-ov-file#important-%EF%B8%8F) configuration method (specifying something in `lazy.nvim`'s `opts` passes it to the `require('lspconfig').setup` function, which is an old method).\n\nWhile we might need to introduce the same changes in the old config method, I'm unsure if it's the repository's policy to actively support old configurations.\n\nbut for now, using the supported method below should work:\n\n```lua\nvim.env.LAZY_STDPATH = \".repro\"\nload(vim.fn.system(\"curl -s https://raw.githubusercontent.com/folke/lazy.nvim/main/bootstrap.lua\"))()\n\nrequire(\"lazy.minit\").repro({\n  spec = {\n    { \"LazyVim/LazyVim\", import = \"lazyvim.plugins\" },\n    { \"LazyVim/LazyVim\", import = \"lazyvim.plugins.extras.lang.typescript\" },\n    {\n      \"AsPulse/nvim-lspconfig\",\n      branch = \"feat(lsp)/smarter-typescript-project-detection\",\n      init = function() \n        vim.lsp.enable('denols')\n        vim.lsp.enable('vtsls')\n      end,\n    },\n  },\n})\n\n```",
            "created_at": "2025-11-27T03:13:31Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/4216#issuecomment-3584040486",
            "id": 3584040486,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/4216",
            "node_id": "IC_kwDODTQC187VoB4m",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/3584040486/reactions"
            },
            "updated_at": "2025-11-27T03:22:08Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/3584040486",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/84216737?v=4",
                "events_url": "https://api.github.com/users/AsPulse/events{/privacy}",
                "followers_url": "https://api.github.com/users/AsPulse/followers",
                "following_url": "https://api.github.com/users/AsPulse/following{/other_user}",
                "gists_url": "https://api.github.com/users/AsPulse/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/AsPulse",
                "id": 84216737,
                "login": "AsPulse",
                "node_id": "MDQ6VXNlcjg0MjE2NzM3",
                "organizations_url": "https://api.github.com/users/AsPulse/orgs",
                "received_events_url": "https://api.github.com/users/AsPulse/received_events",
                "repos_url": "https://api.github.com/users/AsPulse/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/AsPulse/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/AsPulse/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/AsPulse",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "> The reason it's not working in your environment is likely because you are using a [deprecated](https://github.com/neovim/nvim-lspconfig?tab=readme-ov-file&rgh-link-date=2025-11-27T03%3A13%3A31.000Z#important-%EF%B8%8F) configuration method (specifying something in lazy.nvim's opts passes it to the require('lspconfig').setup function, which is an old method).\n\nThat is not accurate. `opts` being present does not necessarily mean that `require(\"lspconfig\").setup()` will be called. That's because later on in the plugin spec there's a `config` function that overwrites the default function that would have been called under normal circumstances. No `require(\"lspconfig\").setup()` is being called. Instead `mason-lspconfig` is being used to set up automatically the servers, which has transitioned to the new `vim.lsp.config`/`vim.lsp.enable` features. `nvim-lspconfig` is just used as a placeholder to load `mason-lspconfig` among other things.\n\nAccording to OP from the LazyVim [issue](https://github.com/LazyVim/LazyVim/issues/6816#issuecomment-3577293341)\n> I don't expect denols to get attached, per se. I expect vtsls to get attached, as that LSP was triggering before for my deno/node projects and worked perfectly fine.\n\nThe new branch from \n```lua\n\"AsPulse/nvim-lspconfig\",\nbranch = \"feat(lsp)/smarter-typescript-project-detection\",\n```\nseems to not solve this issue. `vtsls` should have been attached when opening `src/main.ts` file according to OP past comments, not `denols`. `commit = \"b34fbdf\"` correctly attaches `vtsls` server in that project when opening `src/main.ts` file. According to OP deno is only used as a package manager in that project\n>  such as a fresh Tauri project with deno selected as a package manager, and deno can function perfectly fine as the package manager without deno.json if there exists a package.json and a deno.lock\n\nand `vtsls` should be the LSP server attached in `src/main.ts` file.\n\nI don't know what the correct solution should be and I agree that `nvim-lspconfig` should only cover a general case and users should change `root_dir` according to their project's requirements. Maybe they could also use `:h exrc` for local project  configurations? \n\nPS: I don't know which LSP server should attach in this case, as I'm not familiar at all with Deno projects. If `vtsls` should attach, then I think the logic is still wrong (according to what OP said at least). If `denols` should attach in that Tauri project, then indeed a change is needed in LazyVim and then it will work properly (I tested with `branch = \"feat(lsp)/smarter-typescript-project-detection\"` and it works correctly if `denols` should attach). I just said about `vtsls` attaching because that is what OP mentioned himself and assumed that is what he wants, but I don't know what the correct answer is with regards to which LSP server should attach in a project like [VioletWoodETL/example-deno-tauri](https://github.com/VioletWoodETL/example-deno-tauri?rgh-link-date=2025-11-26T16%3A43%3A56.000Z). ",
            "created_at": "2025-11-28T11:44:45Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/4216#issuecomment-3589014850",
            "id": 3589014850,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/4216",
            "node_id": "IC_kwDODTQC187V7AVC",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/3589014850/reactions"
            },
            "updated_at": "2025-11-28T18:15:52Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/3589014850",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/12776461?v=4",
                "events_url": "https://api.github.com/users/dpetka2001/events{/privacy}",
                "followers_url": "https://api.github.com/users/dpetka2001/followers",
                "following_url": "https://api.github.com/users/dpetka2001/following{/other_user}",
                "gists_url": "https://api.github.com/users/dpetka2001/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/dpetka2001",
                "id": 12776461,
                "login": "dpetka2001",
                "node_id": "MDQ6VXNlcjEyNzc2NDYx",
                "organizations_url": "https://api.github.com/users/dpetka2001/orgs",
                "received_events_url": "https://api.github.com/users/dpetka2001/received_events",
                "repos_url": "https://api.github.com/users/dpetka2001/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/dpetka2001/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/dpetka2001/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/dpetka2001",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I made the assumption that denols should be attached when both `package.json` and `deno.lock` exist (my apologies), but since it seems debatable, I've reverted the PR to Draft.\nThank you for your feedback.\n\nBut attaching denols in that situation was an explicit configuration, so, it's very easy to change the logic to attach non-Deno LSPs like vtsls or ts_ls in such situations.\n\nI agree with the opinion that users should individually handle configurations not covered by `nvim-lspconfig`. However, given the widespread use of `nvim-lspconfig`, I also believe it's good for user to cover as many cases as we can.",
            "created_at": "2025-11-29T02:42:50Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/4216#issuecomment-3590924939",
            "id": 3590924939,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/4216",
            "node_id": "IC_kwDODTQC187WCSqL",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/3590924939/reactions"
            },
            "updated_at": "2025-11-29T02:42:50Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/3590924939",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/84216737?v=4",
                "events_url": "https://api.github.com/users/AsPulse/events{/privacy}",
                "followers_url": "https://api.github.com/users/AsPulse/followers",
                "following_url": "https://api.github.com/users/AsPulse/following{/other_user}",
                "gists_url": "https://api.github.com/users/AsPulse/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/AsPulse",
                "id": 84216737,
                "login": "AsPulse",
                "node_id": "MDQ6VXNlcjg0MjE2NzM3",
                "organizations_url": "https://api.github.com/users/AsPulse/orgs",
                "received_events_url": "https://api.github.com/users/AsPulse/received_events",
                "repos_url": "https://api.github.com/users/AsPulse/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/AsPulse/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/AsPulse/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/AsPulse",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I have prepared two branches for verification purposes or as a workaround for those currently facing this issue.\n\nIn the situation that both `package.json` and `deno.lock` exist,\n- Attach denols\n  ```lua\n    \"AsPulse/nvim-lspconfig\",\n    branch = \"feat(lsp)/smarter-typescript-project-detection-deno\",\n  ```\n- Attach non-Deno LSP (vtsls, ts_ls, tsgo...)\n  ```lua\n    \"AsPulse/nvim-lspconfig\",\n    branch = \"feat(lsp)/smarter-typescript-project-detection-node\",\n  ```\n\nI hope they are useful.",
            "created_at": "2025-11-29T03:12:10Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/4216#issuecomment-3590940835",
            "id": 3590940835,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/4216",
            "node_id": "IC_kwDODTQC187WCWij",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/3590940835/reactions"
            },
            "updated_at": "2025-11-29T03:12:48Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/3590940835",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/84216737?v=4",
                "events_url": "https://api.github.com/users/AsPulse/events{/privacy}",
                "followers_url": "https://api.github.com/users/AsPulse/followers",
                "following_url": "https://api.github.com/users/AsPulse/following{/other_user}",
                "gists_url": "https://api.github.com/users/AsPulse/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/AsPulse",
                "id": 84216737,
                "login": "AsPulse",
                "node_id": "MDQ6VXNlcjg0MjE2NzM3",
                "organizations_url": "https://api.github.com/users/AsPulse/orgs",
                "received_events_url": "https://api.github.com/users/AsPulse/received_events",
                "repos_url": "https://api.github.com/users/AsPulse/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/AsPulse/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/AsPulse/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/AsPulse",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 10,
    "comments_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/4216/comments",
    "created_at": "2025-11-25T23:50:07Z",
    "events_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/4216/events",
    "html_url": "https://github.com/neovim/nvim-lspconfig/issues/4216",
    "id": 3665008534,
    "issue_dependencies_summary": {
        "blocked_by": 0,
        "blocking": 0,
        "total_blocked_by": 0,
        "total_blocking": 0
    },
    "labels": [
        {
            "color": "f9d0c4",
            "default": true,
            "description": "Something isn't working",
            "id": 1674892761,
            "name": "bug",
            "node_id": "MDU6TGFiZWwxNjc0ODkyNzYx",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/labels/bug"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/4216/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDODTQC187ac5eW",
    "number": 4216,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/4216/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/nvim-lspconfig",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/4216/timeline",
    "title": "LSP not activating in Deno Node Compatible projects",
    "type": null,
    "updated_at": "2025-12-01T08:15:03Z",
    "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/4216",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/195377642?v=4",
        "events_url": "https://api.github.com/users/VioletWoodETL/events{/privacy}",
        "followers_url": "https://api.github.com/users/VioletWoodETL/followers",
        "following_url": "https://api.github.com/users/VioletWoodETL/following{/other_user}",
        "gists_url": "https://api.github.com/users/VioletWoodETL/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/VioletWoodETL",
        "id": 195377642,
        "login": "VioletWoodETL",
        "node_id": "U_kgDOC6U56g",
        "organizations_url": "https://api.github.com/users/VioletWoodETL/orgs",
        "received_events_url": "https://api.github.com/users/VioletWoodETL/received_events",
        "repos_url": "https://api.github.com/users/VioletWoodETL/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/VioletWoodETL/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/VioletWoodETL/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/VioletWoodETL",
        "user_view_type": "public"
    }
}