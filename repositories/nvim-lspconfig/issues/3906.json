{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "cross posted here: https://github.com/mason-org/mason.nvim/issues/1974\n\n### Description\n\nAfter a machine failure I am reinstalling NeoVim, LazyVim.\n\nI added omnisharp via Mason.\n\nWhen I open a cs file I get this warning:\n\n```\n   Warn  12:36:17 notify.warn ...m/3834/usr/share/nvim/runtime/lua/vim/lsp/_transport.lua:68: Spawning language server with cmd: `{ \"omnisharp\", \"-z\", \"--hostPID\", \"60960\", \"DotNet:enablePackageRestore=false\", \"--encoding\", \"utf-8\", \"--languageserver\", \"FormattingOptions:EnableEditorConfigSupport=true\", \"Sdk:IncludePrereleases=true\" }` failed. The language server is either not installed, missing from PATH, or not executable.\n```\n\nThe language server is installed in `~/.local/share/nvim/mason/packages/omnisharp` and I do not have any further config related to omnisharp.\n\nI have pinned mason at version 1.*.\n\nI can start the language server manually and that works without any problem or message.\n\n`LspStart omnisharp`\n\n### Expected behavior\n\nlanguage server starts without warnings, errors\n\n### Steps to reproduce\n\nInstall NeoVim\nInstall LazyVim\nInstall omnisharp via Mason\nOpen a c# project\n\n### Affected packages\n\nomnisharp\n\n### Neovim version (>= 0.10.0)\n\nNVIM v0.11.2\nBuild type: RelWithDebInfo\nLuaJIT 2.1.1741730670\n\n\n### Operating system/version\n\nLinux UN5CD50511M5 6.6.87.1-microsoft-standard-WSL2 #1 SMP PREEMPT_DYNAMIC Mon Apr 21 17:08:54 UTC 2025 x86_64 x86_64 x86_64 GNU/Linux\n\n### Healthcheck\n\n```Text\n==============================================================================\nmason:                                                                    8 ⚠️\n\nmason.nvim ~\n- ⚠️ WARNING mason.nvim version v1.11.0\n  - ADVICE:\n    - The latest version of mason.nvim is: v2.0.0\n- ✅ OK PATH: prepend\n- ✅ OK Providers: \n    mason.providers.registry-api\n    mason.providers.client\n- ✅ OK neovim version >= 0.7.0\n\nmason.nvim [Registries] ~\n- ✅ OK Registry `github.com/mason-org/mason-registry version: 2025-06-10-known-cymbal` is installed.\n\nmason.nvim [Core utils] ~\n- ✅ OK unzip: `UnZip 6.00 of 20 April 2009, by Debian. Original by Info-ZIP.`\n- ✅ OK wget: `GNU Wget 1.21.4 built on linux-gnu.`\n- ✅ OK curl: `curl 8.5.0 (x86_64-pc-linux-gnu) libcurl/8.5.0 OpenSSL/3.0.13 zlib/1.3 brotli/1.1.0 zstd/1.5.5 libidn2/2.3.7 libpsl/0.21.2 (+libidn2/2.3.7) libssh/0.10.6/openssl/zlib nghttp2/1.59.0 librtmp/2.3 OpenLDAP/2.6.7`\n- ✅ OK gzip: `gzip 1.12`\n- ✅ OK tar: `tar (GNU tar) 1.35`\n- ✅ OK bash: `GNU bash, version 5.2.21(1)-release (x86_64-pc-linux-gnu)`\n- ✅ OK sh: `Ok`\n\nmason.nvim [Languages] ~\n- ⚠️ WARNING Go: not available\n  - ADVICE:\n    - spawn: go failed with exit code - and signal -. go is not executable\n- ⚠️ WARNING Composer: not available\n  - ADVICE:\n    - spawn: composer failed with exit code - and signal -. composer is not executable\n- ⚠️ WARNING PHP: not available\n  - ADVICE:\n    - spawn: php failed with exit code - and signal -. php is not executable\n- ⚠️ WARNING Ruby: not available\n  - ADVICE:\n    - spawn: ruby failed with exit code - and signal -. ruby is not executable\n- ⚠️ WARNING RubyGem: not available\n  - ADVICE:\n    - spawn: gem failed with exit code - and signal -. gem is not executable\n- ✅ OK node: `v22.16.0`\n- ✅ OK luarocks: `/usr/local/bin/luarocks 3.12.0`\n- ⚠️ WARNING julia: not available\n  - ADVICE:\n    - spawn: julia failed with exit code - and signal -. julia is not executable\n- ✅ OK python: `Python 3.12.3`\n- ✅ OK java: `openjdk version \"21.0.7\" 2025-04-15`\n- ✅ OK cargo: `cargo 1.87.0 (99624be96 2025-05-06)`\n- ✅ OK npm: `11.4.1`\n- ⚠️ WARNING pip: not available\n  - ADVICE:\n    - spawn: python3 failed with exit code 1 and signal 0. /usr/bin/python3: No module named pip\n\n- ✅ OK python venv: `Ok`\n- ✅ OK javac: `javac 21.0.7`\n\nmason.nvim [GitHub] ~\n- ✅ OK GitHub API rate limit. Used: 0. Remaining: 60. Limit: 60. Reset: Tue Jun 10 14:23:33 2025.\n  Install and authenticate via gh-cli to increase rate limit.\n```\n\n### Screenshots or recordings\n\n![Image](https://github.com/user-attachments/assets/352bacec-79c8-4a91-9340-25907f766beb)\n\nonce started I get this message\n\n![Image](https://github.com/user-attachments/assets/d18983c0-cb55-4d8d-b0d5-5216168236c5)\n\nLSP is not working when searching using `gr`\n\n![Image](https://github.com/user-attachments/assets/58da6871-30a0-4ba7-9c85-eef09b5b567f)\n\nStarting lsp manually\n\n![Image](https://github.com/user-attachments/assets/37976346-9c34-4789-8561-10c8b591f0d9)\n\nand for example searching via `gr` starts working.\n\n![Image](https://github.com/user-attachments/assets/f092d325-1595-4e23-b53c-7b353525e342)\n\nHere are a few other screenshots that show healthcheck for vim.lsp before and after I run `LspStart omnisharp`.\n\n![Image](https://github.com/user-attachments/assets/4e010e61-6600-40f6-815d-7823ec0d4e2f)\n![Image](https://github.com/user-attachments/assets/b3b07ee9-5be3-43f2-9ae1-e438fd7f0f7a)\n![Image](https://github.com/user-attachments/assets/075d4492-0f0a-4692-a414-b022745938c6)\n![Image](https://github.com/user-attachments/assets/92d035e7-3b2e-42fd-8630-3f615d7e4cd0)\n![Image](https://github.com/user-attachments/assets/ebb0bad2-2023-494b-9abe-7dffdd77b09b)\n![Image](https://github.com/user-attachments/assets/077a54f4-4c37-4e46-ba2d-89775b70b5d8)",
    "closed_at": "2025-06-12T13:25:50Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
        "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
        "followers_url": "https://api.github.com/users/justinmk/followers",
        "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
        "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/justinmk",
        "id": 1359421,
        "login": "justinmk",
        "node_id": "MDQ6VXNlcjEzNTk0MjE=",
        "organizations_url": "https://api.github.com/users/justinmk/orgs",
        "received_events_url": "https://api.github.com/users/justinmk/received_events",
        "repos_url": "https://api.github.com/users/justinmk/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/justinmk",
        "user_view_type": "public"
    },
    "comment_data": [
        {
            "author_association": "COLLABORATOR",
            "body": "Are you lazy loading mason? I don't use mason myself, but if I just had to guess is that it manipulates the `$PATH` or something so that `nvim-lspconfig` can find it. But `vim.lsp.enable(...)` is running before mason has done its thing which means it doesn't find the binary.\n\nThen `:LspStart` works because at that point mason has loaded.",
            "created_at": "2025-06-12T13:25:10Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3906#issuecomment-2966706266",
            "id": 2966706266,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3906",
            "node_id": "IC_kwDODTQC186w1Fha",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2966706266/reactions"
            },
            "updated_at": "2025-06-12T13:25:30Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2966706266",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/177685?v=4",
                "events_url": "https://api.github.com/users/lithammer/events{/privacy}",
                "followers_url": "https://api.github.com/users/lithammer/followers",
                "following_url": "https://api.github.com/users/lithammer/following{/other_user}",
                "gists_url": "https://api.github.com/users/lithammer/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/lithammer",
                "id": 177685,
                "login": "lithammer",
                "node_id": "MDQ6VXNlcjE3NzY4NQ==",
                "organizations_url": "https://api.github.com/users/lithammer/orgs",
                "received_events_url": "https://api.github.com/users/lithammer/received_events",
                "repos_url": "https://api.github.com/users/lithammer/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/lithammer/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lithammer/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/lithammer",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "The configs in this repo are provided as a starting point. We depend on users (like you) to troubleshoot issues with their specific LSP setups and [send improvements](https://github.com/neovim/nvim-lspconfig/blob/master/CONTRIBUTING.md#adding-a-server-to-lspconfig).\n",
            "created_at": "2025-06-12T13:25:51Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3906#issuecomment-2966708535",
            "id": 2966708535,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3906",
            "node_id": "IC_kwDODTQC186w1GE3",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2966708535/reactions"
            },
            "updated_at": "2025-06-12T13:25:51Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2966708535",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 2,
    "comments_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3906/comments",
    "created_at": "2025-06-12T12:41:57Z",
    "events_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3906/events",
    "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3906",
    "id": 3140145572,
    "labels": [
        {
            "color": "f9d0c4",
            "default": true,
            "description": "Something isn't working",
            "id": 1674892761,
            "name": "bug",
            "node_id": "MDU6TGFiZWwxNjc0ODkyNzYx",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/labels/bug"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3906/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDODTQC1867KtGk",
    "number": 3906,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3906/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/nvim-lspconfig",
    "state": "closed",
    "state_reason": "not_planned",
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3906/timeline",
    "title": "OmniSharp fails on load but can be started via LspStart",
    "type": null,
    "updated_at": "2025-06-12T13:25:51Z",
    "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3906",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/161961?v=4",
        "events_url": "https://api.github.com/users/mrt181/events{/privacy}",
        "followers_url": "https://api.github.com/users/mrt181/followers",
        "following_url": "https://api.github.com/users/mrt181/following{/other_user}",
        "gists_url": "https://api.github.com/users/mrt181/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/mrt181",
        "id": 161961,
        "login": "mrt181",
        "node_id": "MDQ6VXNlcjE2MTk2MQ==",
        "organizations_url": "https://api.github.com/users/mrt181/orgs",
        "received_events_url": "https://api.github.com/users/mrt181/received_events",
        "repos_url": "https://api.github.com/users/mrt181/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/mrt181/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/mrt181/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/mrt181",
        "user_view_type": "public"
    }
}