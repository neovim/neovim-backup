{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Description\n\nHi there,\n\nMy bashls wasn't running, so I ran `:LspInfo` inside of Neovim with a shell file open, and got this back as part of the info:\n\n```\nversion:           `?` (Failed to get version) Tried:\n  `â€¦/mason/bin/bash-language-server --version`\n  `â€¦/mason/bin/bash-language-server -version`\n  `â€¦/mason/bin/bash-language-server version`\n  `â€¦/mason/bin/bash-language-server --help`\n```\n\nI found it's because the recipient is reading STDERR output too, and if there's anything coming through on STDERR then it chokes:\n\n```\n$ ./mason/bin/bash-language-server --version\n5.4.2\n(node:51440) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.\n(Use `node --trace-deprecation ...` to show where the warning was created)\n```\n\n[This line](https://github.com/neovim/nvim-lspconfig/blob/dafd61d6533bd90ecf6e2a3a972298fdddc74d82/lua/lspconfig/configs/bashls.lua#L5) is where the server is started:\n\nI replaced:\n\n`    cmd = { 'bash-language-server', 'start' },`\n\nwith:\n\n`    cmd = { 'sh', '-c', 'bash-language-server start 2>/dev/null' },`\n\nand it's fixed.\n\nI'd put in a pull request but this is just a workaround and it'd probably be better if STDERR wasn't read (or was handled),  but I've no idea about this codebase and any further effects this may have, so this is an FYI.\n\nRegards,\niain\n",
    "closed_at": "2025-03-26T19:13:09Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
        "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
        "followers_url": "https://api.github.com/users/justinmk/followers",
        "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
        "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/justinmk",
        "id": 1359421,
        "login": "justinmk",
        "node_id": "MDQ6VXNlcjEzNTk0MjE=",
        "organizations_url": "https://api.github.com/users/justinmk/orgs",
        "received_events_url": "https://api.github.com/users/justinmk/received_events",
        "repos_url": "https://api.github.com/users/justinmk/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/justinmk",
        "user_view_type": "public"
    },
    "comment_data": [
        {
            "author_association": "COLLABORATOR",
            "body": "This seems like a pretty safe change to me. To my knowledge, no command-line tool should output the version to stderr. It just doesn't make sense.\n\n```diff\ndiff --git a/lua/lspconfig/health.lua b/lua/lspconfig/health.lua\nindex 5f40b1a..826d530 100644\n--- a/lua/lspconfig/health.lua\n+++ b/lua/lspconfig/health.lua\n@@ -48,9 +48,7 @@ local function try_get_cmd_output(cmd)\n   local chanid = vim.fn.jobstart(cmd, {\n     -- cwd = ?,\n     stdout_buffered = true,\n-    stderr_buffered = true,\n     on_stdout = on_data,\n-    on_stderr = on_data,\n   })\n   local rv = vim.fn.jobwait({ chanid }, 300)\n   vim.fn.jobstop(chanid)\n```",
            "created_at": "2024-11-25T09:51:56Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3453#issuecomment-2497458812",
            "id": 2497458812,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3453",
            "node_id": "IC_kwDODTQC186U3DJ8",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2497458812/reactions"
            },
            "updated_at": "2024-11-25T09:51:56Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2497458812",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/177685?v=4",
                "events_url": "https://api.github.com/users/lithammer/events{/privacy}",
                "followers_url": "https://api.github.com/users/lithammer/followers",
                "following_url": "https://api.github.com/users/lithammer/following{/other_user}",
                "gists_url": "https://api.github.com/users/lithammer/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/lithammer",
                "id": 177685,
                "login": "lithammer",
                "node_id": "MDQ6VXNlcjE3NzY4NQ==",
                "organizations_url": "https://api.github.com/users/lithammer/orgs",
                "received_events_url": "https://api.github.com/users/lithammer/received_events",
                "repos_url": "https://api.github.com/users/lithammer/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/lithammer/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lithammer/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/lithammer",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> This seems like a pretty safe change to me. To my knowledge, no command-line tool should output the version to stderr.\n\nCapture stderr is mostly to have something to show on failure. It shouldn't cause the logic to fail. If `5.4.2` is printed, this logic should see it and treat it as \"success\": https://github.com/neovim/nvim-lspconfig/blob/dafd61d6533bd90ecf6e2a3a972298fdddc74d82/lua/lspconfig/health.lua#L75-L78\n\nCan someone using bash-language-server troubleshoot that logic and find out why it's not captured `5.4.2` ?",
            "created_at": "2024-11-25T11:47:53Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3453#issuecomment-2497793321",
            "id": 2497793321,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3453",
            "node_id": "IC_kwDODTQC186U4U0p",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2497793321/reactions"
            },
            "updated_at": "2024-11-25T11:47:53Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2497793321",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "COLLABORATOR",
            "body": "Hmm, it seems to work just fine for me ðŸ¤” Maybe related to a specific version of Neovim?\n\n```console\n$ nvim --version\nNVIM v0.11.0-dev-1228+g9e7b0bcf51-Homebrew\nBuild type: Release\nLuaJIT 2.1.1731601260\nRun \"nvim -V1 -v\" for more info\n```\n\n```console\n$ bash-language-server --version\n5.4.2\n(node:97079) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.\n(Use `node --trace-deprecation ...` to show where the warning was created)\n```\n\n(copied the relevant code to its own script)\n\n```console\n$ cat bug.lua\nlocal function try_get_cmd_output(cmd)\n  local out = nil\n  local function on_data(_, data, _)\n    out = (out or '') .. table.concat(data, '\\n')\n  end\n  local chanid = vim.fn.jobstart(cmd, {\n    -- cwd = ?,\n    stdout_buffered = true,\n    stderr_buffered = true,\n    on_stdout = on_data,\n    on_stderr = on_data,\n  })\n  local rv = vim.fn.jobwait({ chanid }, 300)\n  vim.fn.jobstop(chanid)\n  return rv[1] == 0 and out or nil\nend\n\nlocal function try_fmt_version(prog)\n  local all = nil --- Collected output from all attempts.\n  local tried = '' --- Attempted commands.\n  for _, v_arg in ipairs { '--version', '-version', 'version', '--help' } do\n    local cmd = { prog, v_arg }\n    local out = try_get_cmd_output(cmd)\n    all = out and ('%s\\n%s'):format(all or '', out) or all\n    local v_line = out and out:match('[^\\r\\n]*%d+%.[0-9.]+[^\\r\\n]*') or nil\n    if v_line then\n      return ('`%s`'):format(vim.trim(v_line))\n    end\n    tried = tried .. ('`%s %s`\\n'):format(prog, v_arg)\n  end\n\n  all = all and vim.trim(all:sub(1, 80):gsub('[\\r\\n]', ' ')) .. 'â€¦' or '?'\n  return ('`%s` (Failed to get version) Tried:\\n%s'):format(all, tried)\nend\n\nprint(try_fmt_version('bash-language-server'))\n```\n\n```console\n$ nvim -l bug.lua\n`5.4.2`\n```",
            "created_at": "2024-11-25T12:45:21Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3453#issuecomment-2497926004",
            "id": 2497926004,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3453",
            "node_id": "IC_kwDODTQC186U41N0",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 1,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2497926004/reactions"
            },
            "updated_at": "2024-11-25T13:02:53Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2497926004",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/177685?v=4",
                "events_url": "https://api.github.com/users/lithammer/events{/privacy}",
                "followers_url": "https://api.github.com/users/lithammer/followers",
                "following_url": "https://api.github.com/users/lithammer/following{/other_user}",
                "gists_url": "https://api.github.com/users/lithammer/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/lithammer",
                "id": 177685,
                "login": "lithammer",
                "node_id": "MDQ6VXNlcjE3NzY4NQ==",
                "organizations_url": "https://api.github.com/users/lithammer/orgs",
                "received_events_url": "https://api.github.com/users/lithammer/received_events",
                "repos_url": "https://api.github.com/users/lithammer/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/lithammer/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lithammer/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/lithammer",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "@yb66 what `nvim -v` are you using? And can you try the above script",
            "created_at": "2024-11-25T13:57:08Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3453#issuecomment-2498092105",
            "id": 2498092105,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3453",
            "node_id": "IC_kwDODTQC186U5dxJ",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2498092105/reactions"
            },
            "updated_at": "2024-11-25T13:57:08Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2498092105",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "Thanks for the replies.\n\n```\n$ nvim -v\nNVIM v0.10.1\nBuild type: Release\nLuaJIT 2.1.1713484068\n```\n\n```\n$ nvim -l bug.lua\n`?` (Failed to get version) Tried:\n`bash-language-server --version`\n`bash-language-server -version`\n`bash-language-server version`\n`bash-language-server --help`\n```\n\nI've been playing with the code, is there a reason why `vim.system` isn't used? I narrowed down the problem to `vim.fn.jobstart` (though not what the problem with it actually is) and so I changed the methods in bug.lua to the below and it fixed the issue:\n\n```lua\n--- This avoids hangs if a command waits for input (especially LSP servers).\n---\n--- @param cmd string[]\n--- @return table|nil # A table with `stdout` and `stderr` keys, or `nil` on timeout or nonzero exit.\nlocal function try_get_cmd_output(cmd)\n  -- Use vim.system to execute the command.\n  local result = vim.system(cmd, { text = true }):wait()\n\n  -- Return stdout and stderr as a table.\n  return { stdout = result.stdout, stderr = result.stderr }\nend\n\n--- Finds a \"x.y.z\" version string from the output of `prog` after attempting to invoke it with `--version`, `-v`,\n--- `--help`, etc.\n---\n--- Returns the whole line.\n---\n--- If a version string is not found, returns the concatenated output.\n---\n--- @param prog string\n--- @return string\nlocal function try_fmt_version(prog)\n  local all_stdout, all_stderr = nil, nil --- Collected output from all attempts.\n  local tried = '' --- Attempted commands.\n\n  for _, v_arg in ipairs { '--version', '-version', 'version', '--help' } do\n    local cmd = { prog, v_arg }\n    local output = try_get_cmd_output(cmd)\n\n    if output then\n      all_stdout = output.stdout and ('%s\\n%s'):format(all_stdout or '', output.stdout) or all_stdout\n      all_stderr = output.stderr and ('%s\\n%s'):format(all_stderr or '', output.stderr) or all_stderr\n\n      local v_line = output.stdout and output.stdout:match('[^\\r\\n]*%d+%.[0-9.]+[^\\r\\n]*') or nil\n      if v_line then\n        return ('`%s`'):format(vim.trim(v_line))\n      end\n    end\n\n    tried = tried .. ('`%s %s`\\n'):format(prog, v_arg)\n  end\n\n  all_stdout = all_stdout and vim.trim(all_stdout:sub(1, 80):gsub('[\\r\\n]', ' ')) .. 'â€¦' or '?'\n  all_stderr = all_stderr and vim.trim(all_stderr:sub(1, 80):gsub('[\\r\\n]', ' ')) .. 'â€¦' or '?'\n\n  return ('`%s` (Failed to get version) Tried:\\n%s\\nStderr: `%s`'):format(all_stdout, tried, all_stderr)\nend\n\nprint(try_fmt_version('bash-language-server'))\n```\n\nI'm running Neovim now with that code and it seems okay to me, so far, but I'm new to Vim and Lua so again, I'm not the best judge of the ramifications of such a change.\n\nRegards,\niain \n",
            "created_at": "2024-11-26T08:42:54Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3453#issuecomment-2500007607",
            "id": 2500007607,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3453",
            "node_id": "IC_kwDODTQC186VAxa3",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2500007607/reactions"
            },
            "updated_at": "2024-11-26T14:29:58Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2500007607",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/326444?v=4",
                "events_url": "https://api.github.com/users/yb66/events{/privacy}",
                "followers_url": "https://api.github.com/users/yb66/followers",
                "following_url": "https://api.github.com/users/yb66/following{/other_user}",
                "gists_url": "https://api.github.com/users/yb66/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/yb66",
                "id": 326444,
                "login": "yb66",
                "node_id": "MDQ6VXNlcjMyNjQ0NA==",
                "organizations_url": "https://api.github.com/users/yb66/orgs",
                "received_events_url": "https://api.github.com/users/yb66/received_events",
                "repos_url": "https://api.github.com/users/yb66/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/yb66/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/yb66/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/yb66",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "Ah, I just noticed the bit about not hanging. Perhaps that could be emulated with a timer? I'll give that a go if you think there's any merit in this approach.\n\nRegards,\niain",
            "created_at": "2024-11-26T08:56:07Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3453#issuecomment-2500032753",
            "id": 2500032753,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3453",
            "node_id": "IC_kwDODTQC186VA3jx",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2500032753/reactions"
            },
            "updated_at": "2024-11-26T08:56:07Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2500032753",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/326444?v=4",
                "events_url": "https://api.github.com/users/yb66/events{/privacy}",
                "followers_url": "https://api.github.com/users/yb66/followers",
                "following_url": "https://api.github.com/users/yb66/following{/other_user}",
                "gists_url": "https://api.github.com/users/yb66/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/yb66",
                "id": 326444,
                "login": "yb66",
                "node_id": "MDQ6VXNlcjMyNjQ0NA==",
                "organizations_url": "https://api.github.com/users/yb66/orgs",
                "received_events_url": "https://api.github.com/users/yb66/received_events",
                "repos_url": "https://api.github.com/users/yb66/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/yb66/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/yb66/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/yb66",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> NVIM v0.10.1\n\nThe latest stable version is 0.10.2\n\n> is there a reason why `vim.system` isn't used?\n\nBecause nvim-lspconfig still supports Nvim 0.9\n\n\n> Ah, I just noticed the bit about not hanging. Perhaps that could be emulated with a timer?\n\nCan you instead try Nvim 0.11 https://github.com/neovim/neovim/releases/tag/nightly to see if the issue is fixed there? ",
            "created_at": "2024-11-26T14:30:47Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3453#issuecomment-2500954771",
            "id": 2500954771,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3453",
            "node_id": "IC_kwDODTQC186VEYqT",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2500954771/reactions"
            },
            "updated_at": "2024-11-26T14:31:50Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2500954771",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "I seem to be having the same exact issue, but with arduino_language_server. It at all doesn't have a version flag (there's a PR for it arduino/arduino-language-server/issues/196), which results in this in LspInfo (I've replaced full paths with \"...\").\n```\nLSP configs active in this buffer (bufnr: 1)\n- Language client log: ~/.local/state/nvim/lsp.log\n- Detected filetype: arduino\n- 0 client(s) attached to this buffer\n- Other clients that match the \"arduino\" filetype:\n- Config: arduino_language_server\n  filetypes:         arduino\n  cmd:               ~/.local/share/nvim/mason/bin/arduino-language-server\n  version:           Usage of .../.local/share/nvim/mason/bin/arduino-language-seâ€¦ (Failed to get version) Tried:\n  .../arduino-language-server --version\n  .../arduino-language-server -version\n  .../arduino-language-server version\n  .../arduino-language-server --help\n\n  executable:        true\n  autostart:         true\n  root directory:    [Path to project]\n```\n\nAnd this odd log, it was written to stderr, but looks like a \"normal level\" log to me.\n```\n[ERROR][2024-11-26 21:32:27] .../vim/lsp/rpc.lua:770\t\"rpc\"\t\".../arduino-language-server\"\t\"stderr\"\t\"21:32:26.990967 ArduinoCLI config file found at .../.arduino15/arduino-cli.yaml\\n21:32:26.990995 arduino-cli found at /usr/bin/arduino-cli\\n21:32:26.991002 clangd found at .../.local/share/nvim/mason/bin/clangd\\n21:32:26.991045 \\27[97mLS: : Initial board configuration: \\27[0m\\n21:32:26.991049 \\27[97mLS: : arduino-language-server Version: 0.7.6 Commit: 9c2f44d Date: 2024-02-06T14:12:58Z\\27[0m\\n21:32:26.991055 \\27[97mLS: : Language server temp directory: /tmp/arduino-language-server2355612588\\27[0m\\n21:32:26.991057 \\27[97mLS: : Language server build path: /tmp/arduino-language-server2355612588/build\\27[0m\\n21:32:26.991058 \\27[97mLS: : Language server build sketch root: /tmp/arduino-language-server2355612588/build/sketch\\27[0m\\n21:32:26.991060 \\27[97mLS: : Language server FULL build path: /tmp/arduino-language-server2355612588/fullbuild\\27[0m\\n21:32:26.991740 IN Elapsed: 596.601Âµs\\n21:32:26.991817 \\27[92mIDE --> LS REQU initialize 1\\27[0m\\n\"\n```\n\nI'm using the latest stable version of everything (meaning, mason, lsp stuff, nvim, this LSP). For Nvim this means 0.10.2 (I also tried the nightly build which I compiled locally today from ([neovim/neovim/commit/66bb1e5](https://github.com/neovim/neovim/commit/66bb1e5)), but the same exact thing has happened).\n\nThis has never worked for me, as I'm just getting started with arduino, and just today tried to set everything up. I am also not sure which side is at fault here, but I've found this issue, which seems related.\n\nAs a side note, all other LSPs I'm using (roslyn, svelte-language-server, and lua_language_server) work as expected.",
            "created_at": "2024-11-26T20:49:23Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3453#issuecomment-2501908489",
            "id": 2501908489,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3453",
            "node_id": "IC_kwDODTQC186VIBgJ",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2501908489/reactions"
            },
            "updated_at": "2024-11-26T20:54:51Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2501908489",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/76978057?v=4",
                "events_url": "https://api.github.com/users/TSmigielski/events{/privacy}",
                "followers_url": "https://api.github.com/users/TSmigielski/followers",
                "following_url": "https://api.github.com/users/TSmigielski/following{/other_user}",
                "gists_url": "https://api.github.com/users/TSmigielski/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/TSmigielski",
                "id": 76978057,
                "login": "TSmigielski",
                "node_id": "MDQ6VXNlcjc2OTc4MDU3",
                "organizations_url": "https://api.github.com/users/TSmigielski/orgs",
                "received_events_url": "https://api.github.com/users/TSmigielski/received_events",
                "repos_url": "https://api.github.com/users/TSmigielski/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/TSmigielski/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/TSmigielski/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/TSmigielski",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "> Can you instead try Nvim 0.11 https://github.com/neovim/neovim/releases/tag/nightly to see if the issue is fixed there?\n\n```\n$ nvim -v\nNVIM v0.11.0-dev-1238+g66bb1e577c\nBuild type: RelWithDebInfo\nLuaJIT 2.1.1731601260\nRun \"nvim -V1 -v\" for more info\n\n$ nvim -l bug.lua\n`?` (Failed to get version) Tried:\n`bash-language-server --version`\n`bash-language-server -version`\n`bash-language-server version`\n`bash-language-server --help`\n\n$ nvim -l fix.lua\n`5.4.2`\n```\n\nI had the same result with v0.10.2. I've also added a line in `bug.lua` to add Mason's bin where `bash-language-server` is installed to the `PATH` Neovim is using, and run it without that line, both ways produce the same result so it's not a path issue.\n\nRegards,\niain",
            "created_at": "2024-11-27T02:03:10Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3453#issuecomment-2502495798",
            "id": 2502495798,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3453",
            "node_id": "IC_kwDODTQC186VKQ42",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2502495798/reactions"
            },
            "updated_at": "2024-11-27T02:03:10Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2502495798",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/326444?v=4",
                "events_url": "https://api.github.com/users/yb66/events{/privacy}",
                "followers_url": "https://api.github.com/users/yb66/followers",
                "following_url": "https://api.github.com/users/yb66/following{/other_user}",
                "gists_url": "https://api.github.com/users/yb66/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/yb66",
                "id": 326444,
                "login": "yb66",
                "node_id": "MDQ6VXNlcjMyNjQ0NA==",
                "organizations_url": "https://api.github.com/users/yb66/orgs",
                "received_events_url": "https://api.github.com/users/yb66/received_events",
                "repos_url": "https://api.github.com/users/yb66/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/yb66/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/yb66/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/yb66",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "Hello! exactly the same issue with elixir-ls: can't get version from :LspInfo (I get error \", but I can running the command `<path>/elixir-ls --version`.\nAnd in the last weeks I get a lot of crashes of elixir-ls, but maybe is not related to lspconfig.\n\n![Image](https://github.com/user-attachments/assets/49f0cd45-76c9-444a-97d3-f94f2be65af2)\n![Image](https://github.com/user-attachments/assets/624d65a8-15d5-40d0-978c-8c5226972385)\n\nIf you need more info just ask",
            "created_at": "2024-12-05T23:55:29Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3453#issuecomment-2521750624",
            "id": 2521750624,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3453",
            "node_id": "IC_kwDODTQC186WTtxg",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2521750624/reactions"
            },
            "updated_at": "2024-12-06T00:09:03Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2521750624",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1547072?v=4",
                "events_url": "https://api.github.com/users/cescobaz/events{/privacy}",
                "followers_url": "https://api.github.com/users/cescobaz/followers",
                "following_url": "https://api.github.com/users/cescobaz/following{/other_user}",
                "gists_url": "https://api.github.com/users/cescobaz/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/cescobaz",
                "id": 1547072,
                "login": "cescobaz",
                "node_id": "MDQ6VXNlcjE1NDcwNzI=",
                "organizations_url": "https://api.github.com/users/cescobaz/orgs",
                "received_events_url": "https://api.github.com/users/cescobaz/received_events",
                "repos_url": "https://api.github.com/users/cescobaz/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/cescobaz/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/cescobaz/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/cescobaz",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "with Nvim 0.11, `:checkhealth vim.lsp` gets version info by the `serverInfo.version` server response. So that will avoid this issue. Probably should switch to that here, too.",
            "created_at": "2025-01-08T12:31:54Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3453#issuecomment-2577563012",
            "id": 2577563012,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3453",
            "node_id": "IC_kwDODTQC186Zon2E",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2577563012/reactions"
            },
            "updated_at": "2025-01-08T12:31:54Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2577563012",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 11,
    "comments_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3453/comments",
    "created_at": "2024-11-25T08:25:16Z",
    "events_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3453/events",
    "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3453",
    "id": 2689728306,
    "labels": [
        {
            "color": "f9d0c4",
            "default": true,
            "description": "Something isn't working",
            "id": 1674892761,
            "name": "bug",
            "node_id": "MDU6TGFiZWwxNjc0ODkyNzYx",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/labels/bug"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3453/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDODTQC186gUf8y",
    "number": 3453,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 1,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 1,
        "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3453/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/nvim-lspconfig",
    "state": "closed",
    "state_reason": "completed",
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3453/timeline",
    "title": "LspInfo: \"Failed to get version\" with bash-language-server",
    "type": null,
    "updated_at": "2025-03-26T19:13:09Z",
    "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3453",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/326444?v=4",
        "events_url": "https://api.github.com/users/yb66/events{/privacy}",
        "followers_url": "https://api.github.com/users/yb66/followers",
        "following_url": "https://api.github.com/users/yb66/following{/other_user}",
        "gists_url": "https://api.github.com/users/yb66/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/yb66",
        "id": 326444,
        "login": "yb66",
        "node_id": "MDQ6VXNlcjMyNjQ0NA==",
        "organizations_url": "https://api.github.com/users/yb66/orgs",
        "received_events_url": "https://api.github.com/users/yb66/received_events",
        "repos_url": "https://api.github.com/users/yb66/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/yb66/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/yb66/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/yb66",
        "user_view_type": "public"
    }
}