{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\n\n`:LspInfo` fails with \"Vim:E729: Using a Funcref as a String\".\n\nThe language server still partially functions but only in a seemingly default state. For example, it started using its default formatter rather than the one in my settings.\n\nMy config was working fine until I updated my system earlier this week. I thought I might just need to update my LSP config to the new 11.0 `lsp.config` format, but the issue still persists. Due to the type of error I'm assuming this is something internal and not specifically to do with HLS itself, apologies if I'm mistaken.\n\n\n\n### Steps to reproduce using \"nvim -u minimal_init.lua\"\n\nminimal_init.lua:\n```lua\nlocal pattern = 'hs'\nlocal cmd = {'haskell-language-server-wrapper', '--lsp'}\n-- Add files/folders here that indicate the root of a project\nlocal root_markers = {'.git', '.editorconfig'}\n-- Change to table with settings if required\nlocal settings = vim.empty_dict()\n\nvim.api.nvim_create_autocmd('FileType', {\n  pattern = pattern,\n  callback = function(args)\n    local match = vim.fs.find(root_markers, { path = args.file, upward = true })[1]\n    local root_dir = match and vim.fn.fnamemodify(match, ':p:h') or nil\n    vim.lsp.start({\n      name = 'bugged-ls',\n      cmd = cmd,\n      root_dir = root_dir,\n      settings = settings\n    })\n  end\n})\n\nvim.lsp.set_log_level(\"debug\")\n```\n\n1) Open any Haskell file, can be empty e.g. `nvim -u minimal_init.lua empty.hs`.\n2) Run `:LspInfo`.\n\n### Expected behavior\n\nNo errors.\n\n### Nvim version (nvim -v)\n\n0.11.1\n\n### Language server name/version\n\nHLS 2.9.0.0\n\n### Operating system/version\n\nNixOS 25.05\n\n### Log file\n\nhttps://gist.github.com/Burtannia/48b66534ce50e7dd8305b4fddc19ba52",
    "closed_at": "2025-04-30T16:31:44Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/16714341?v=4",
        "events_url": "https://api.github.com/users/Burtannia/events{/privacy}",
        "followers_url": "https://api.github.com/users/Burtannia/followers",
        "following_url": "https://api.github.com/users/Burtannia/following{/other_user}",
        "gists_url": "https://api.github.com/users/Burtannia/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/Burtannia",
        "id": 16714341,
        "login": "Burtannia",
        "node_id": "MDQ6VXNlcjE2NzE0MzQx",
        "organizations_url": "https://api.github.com/users/Burtannia/orgs",
        "received_events_url": "https://api.github.com/users/Burtannia/received_events",
        "repos_url": "https://api.github.com/users/Burtannia/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/Burtannia/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Burtannia/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/Burtannia",
        "user_view_type": "public"
    },
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "> My config was working fine until I updated my system earlier this week.\n\nTry deleting your `$VIMRUNTIME`, then reinstall. `LspInfo` in Nvim is just an alias to `:che vim.lsp`. Does `:che vim.lsp` work?",
            "created_at": "2025-04-30T10:55:25Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3809#issuecomment-2841596146",
            "id": 2841596146,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3809",
            "node_id": "IC_kwDODTQC186pX1Dy",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2841596146/reactions"
            },
            "updated_at": "2025-04-30T10:55:25Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2841596146",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "> $VIMRUNTIME\n\nWhat does that refer to? As in uninstall neovim and reinstall it?\n\n`:che vim.lsp` produces the same error.",
            "created_at": "2025-04-30T11:00:08Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3809#issuecomment-2841606129",
            "id": 2841606129,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3809",
            "node_id": "IC_kwDODTQC186pX3fx",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2841606129/reactions"
            },
            "updated_at": "2025-04-30T11:00:08Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2841606129",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/16714341?v=4",
                "events_url": "https://api.github.com/users/Burtannia/events{/privacy}",
                "followers_url": "https://api.github.com/users/Burtannia/followers",
                "following_url": "https://api.github.com/users/Burtannia/following{/other_user}",
                "gists_url": "https://api.github.com/users/Burtannia/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Burtannia",
                "id": 16714341,
                "login": "Burtannia",
                "node_id": "MDQ6VXNlcjE2NzE0MzQx",
                "organizations_url": "https://api.github.com/users/Burtannia/orgs",
                "received_events_url": "https://api.github.com/users/Burtannia/received_events",
                "repos_url": "https://api.github.com/users/Burtannia/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Burtannia/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Burtannia/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Burtannia",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> As in uninstall neovim and reinstall it?\n\nYou will need to manually delete the installed runtime files located at `:echo $VIMRUNTIME`. Reinstalling Nvim doesn't do that.\n\nIf that doesn't help, then it's likely something in your config/plugins. \n\nIf you find the root cause, we can see if it makes sense to guard against this in the healthcheck code.",
            "created_at": "2025-04-30T11:26:56Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3809#issuecomment-2841675511",
            "id": 2841675511,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3809",
            "node_id": "IC_kwDODTQC186pYIb3",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2841675511/reactions"
            },
            "updated_at": "2025-04-30T11:27:11Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2841675511",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "@justinmk I'm running Nix so `$VIMRUNTIME` points to a path in `/nix/store/`. Since I've updated `neovim` while debugging this, it's a completely new isolated runtime so I doubt deleting it would fix anything.\n\nWould the `minimal_init.lua` above not rule out any issues with my config?",
            "created_at": "2025-04-30T11:43:38Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3809#issuecomment-2841712196",
            "id": 2841712196,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3809",
            "node_id": "IC_kwDODTQC186pYRZE",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2841712196/reactions"
            },
            "updated_at": "2025-04-30T11:43:38Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2841712196",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/16714341?v=4",
                "events_url": "https://api.github.com/users/Burtannia/events{/privacy}",
                "followers_url": "https://api.github.com/users/Burtannia/followers",
                "following_url": "https://api.github.com/users/Burtannia/following{/other_user}",
                "gists_url": "https://api.github.com/users/Burtannia/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Burtannia",
                "id": 16714341,
                "login": "Burtannia",
                "node_id": "MDQ6VXNlcjE2NzE0MzQx",
                "organizations_url": "https://api.github.com/users/Burtannia/orgs",
                "received_events_url": "https://api.github.com/users/Burtannia/received_events",
                "repos_url": "https://api.github.com/users/Burtannia/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Burtannia/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Burtannia/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Burtannia",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Thanks for providing a minimal repro. But it doesn't repro for me (Nvim `v0.12.0-dev-244+g52a4bc45488c`). `:LspInfo` works.\n\nNote that `-u foo` still will load plugins on 'packpath'. `nvim --clean` avoids that, but then won't load nvim-lspconfig.\n\nI added this to your minimal repro:\n\n```\nvim.cmd[[\n  set runtimepath+=$HOME/.local/share/nvim/site/pack/paqs/start/nvim-lspconfig\n]]\n```\n\nand then tried:\n\n```\nnvim --clean -u minimal_init.lua empty.hs\n:LspInfo\n```\n\nit works (thus the repro doesn't repro for me)",
            "created_at": "2025-04-30T11:56:40Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3809#issuecomment-2841741208",
            "id": 2841741208,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3809",
            "node_id": "IC_kwDODTQC186pYYeY",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2841741208/reactions"
            },
            "updated_at": "2025-04-30T11:57:11Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2841741208",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "Ah thanks for the head's up, I'd lazily assumed the `-u minimal_init.lua` was all that was needed to rule out issues on my end.\n\nI can confirm it works with only `nvim-lspconfig` installed and the minimal init. Will start bisecting other plugins / config and report back.",
            "created_at": "2025-04-30T11:58:39Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3809#issuecomment-2841745795",
            "id": 2841745795,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3809",
            "node_id": "IC_kwDODTQC186pYZmD",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2841745795/reactions"
            },
            "updated_at": "2025-04-30T11:58:39Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2841745795",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/16714341?v=4",
                "events_url": "https://api.github.com/users/Burtannia/events{/privacy}",
                "followers_url": "https://api.github.com/users/Burtannia/followers",
                "following_url": "https://api.github.com/users/Burtannia/following{/other_user}",
                "gists_url": "https://api.github.com/users/Burtannia/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Burtannia",
                "id": 16714341,
                "login": "Burtannia",
                "node_id": "MDQ6VXNlcjE2NzE0MzQx",
                "organizations_url": "https://api.github.com/users/Burtannia/orgs",
                "received_events_url": "https://api.github.com/users/Burtannia/received_events",
                "repos_url": "https://api.github.com/users/Burtannia/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Burtannia/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Burtannia/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Burtannia",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "I have narrowed things down to an interaction between `nvim-lspconfig` and `haskell-tools.nvim`.\n\nI originally thought the issue arose in `haskell-tools` https://github.com/mrcjkb/haskell-tools.nvim/issues/465 but it seems to be a lot more subtle.\n\n`haskell-tools` does not depend on `lspconfig` and explicitly states to not manually configure the LSP via `lspconfig` while also using `haskell-tools` since doing so would cause a conflict. My config (when the issue started) relied on `haskell-tools` and did not manually configure the Haskell LSP via `lspconfig`. Both plugins were never-the-less active.\n\nAfter the recent changes to the `0.11` style, it now appears that having both plugins installed at once causes the error with `:LspInfo`, even without any manual config at all.\n\nThis conflict not only causes the error but seems to also cause the error with the LSP using the wrong formatter since both of the following scenarios work fine:\n1) Just install `nvim-lspconfig` and configure HLS using the new style config.\n```lua\nlocal util = require 'lspconfig.util'\n\nvim.lsp.enable(\"hls\")\n\nvim.lsp.config(\"hls\", {\n\t-- on_attach = on_attach,\n\tcmd = {'haskell-language-server-wrapper', '--lsp'},\n\tfiletypes = { \"haskell\", \"lhaskell\" },\n\troot_dir = function(bufnr, on_dir)\n\t\tlocal fname = vim.api.nvim_buf_get_name(bufnr)\n\t\ton_dir(util.root_pattern(\"hie.yaml\", \"stack.yaml\", \"cabal.project\", \"*.cabal\", \"package.yaml\")(fname))\n\tend,\n\tsettings = {\n\t\thaskell = {\n\t\t\tformattingProvider = \"fourmolu\",\n\t\t},\n\t},\n})\n```\n2) Just install `haskell-tools.nvim` and pass it the following:\n```lua\nvim.g.haskell_tools = {\n\thls = {\n\t\tsettings = {\n\t\t\thaskell = {\n\t\t\t\tformattingProvider = \"fourmolu\",\n\t\t\t},\n\t\t},\n\t},\n}\n```\n\nI'm not sure which plugin is \"to blame\" for the conflict but they used to happily co-exist, providing one did not manually configure HLS via lspconfig. It would be quite nice to resolve this since I want `lspconfig` installed for non-Haskell LSPs.",
            "created_at": "2025-04-30T12:49:23Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3809#issuecomment-2841870658",
            "id": 2841870658,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3809",
            "node_id": "IC_kwDODTQC186pY4FC",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2841870658/reactions"
            },
            "updated_at": "2025-04-30T12:50:09Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2841870658",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/16714341?v=4",
                "events_url": "https://api.github.com/users/Burtannia/events{/privacy}",
                "followers_url": "https://api.github.com/users/Burtannia/followers",
                "following_url": "https://api.github.com/users/Burtannia/following{/other_user}",
                "gists_url": "https://api.github.com/users/Burtannia/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Burtannia",
                "id": 16714341,
                "login": "Burtannia",
                "node_id": "MDQ6VXNlcjE2NzE0MzQx",
                "organizations_url": "https://api.github.com/users/Burtannia/orgs",
                "received_events_url": "https://api.github.com/users/Burtannia/received_events",
                "repos_url": "https://api.github.com/users/Burtannia/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Burtannia/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Burtannia/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Burtannia",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> It would be quite nice to resolve this since I want `lspconfig` installed for non-Haskell LSPs.\n\nsure. though :LspInfo is not exactly critical. but we can try to fix it. the first step is to get a stacktrace, I have no idea where the `E729` error is coming from.",
            "created_at": "2025-04-30T12:52:12Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3809#issuecomment-2841877765",
            "id": 2841877765,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3809",
            "node_id": "IC_kwDODTQC186pY50F",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2841877765/reactions"
            },
            "updated_at": "2025-04-30T12:52:12Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2841877765",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "> though :LspInfo is not exactly critical\n\nI would be happy to ignore the `:LspInfo` if it weren't also causing strange knock on effects with the LSP choosing the wrong formatter. I can only guess that the same error is causing my config to be ignored.\n\n\n\n> the first step is to get a stacktrace\n\nHow can I help with this? I don't see a stacktrace in the `lsp.log` file.",
            "created_at": "2025-04-30T12:54:52Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3809#issuecomment-2841884381",
            "id": 2841884381,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3809",
            "node_id": "IC_kwDODTQC186pY7bd",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2841884381/reactions"
            },
            "updated_at": "2025-04-30T12:54:52Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2841884381",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/16714341?v=4",
                "events_url": "https://api.github.com/users/Burtannia/events{/privacy}",
                "followers_url": "https://api.github.com/users/Burtannia/followers",
                "following_url": "https://api.github.com/users/Burtannia/following{/other_user}",
                "gists_url": "https://api.github.com/users/Burtannia/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Burtannia",
                "id": 16714341,
                "login": "Burtannia",
                "node_id": "MDQ6VXNlcjE2NzE0MzQx",
                "organizations_url": "https://api.github.com/users/Burtannia/orgs",
                "received_events_url": "https://api.github.com/users/Burtannia/received_events",
                "repos_url": "https://api.github.com/users/Burtannia/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Burtannia/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Burtannia/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Burtannia",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "it would have been useful to know that only a specific section of checkhealth is failing, which i see after reviewing https://github.com/mrcjkb/haskell-tools.nvim/issues/465\n\ngiven that, I am skeptical that Nvim can do anything more to avoid this.\n\nthat plugin defines a healthcheck:\nhttps://github.com/mrcjkb/haskell-tools.nvim/blob/master/lua/haskell-tools/health.lua\n\nso one approach is to remove parts of that healthcheck code, to narrow down the root cause.",
            "created_at": "2025-04-30T14:05:41Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3809#issuecomment-2842105109",
            "id": 2842105109,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3809",
            "node_id": "IC_kwDODTQC186pZxUV",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2842105109/reactions"
            },
            "updated_at": "2025-04-30T14:06:20Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2842105109",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "After further discussion on the `haskell-tools` side it seems to be a side effect of `lsp/hls.lua` being automatically sourced and overriding options passed to `haskell-tools`. I guess at some point something expected a differently formatted config and caused the error. Either way this has now been fixed by `haskell-tools` changing to use a different config key.",
            "created_at": "2025-04-30T16:31:45Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3809#issuecomment-2842580958",
            "id": 2842580958,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3809",
            "node_id": "IC_kwDODTQC186pblfe",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2842580958/reactions"
            },
            "updated_at": "2025-04-30T16:31:45Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2842580958",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/16714341?v=4",
                "events_url": "https://api.github.com/users/Burtannia/events{/privacy}",
                "followers_url": "https://api.github.com/users/Burtannia/followers",
                "following_url": "https://api.github.com/users/Burtannia/following{/other_user}",
                "gists_url": "https://api.github.com/users/Burtannia/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Burtannia",
                "id": 16714341,
                "login": "Burtannia",
                "node_id": "MDQ6VXNlcjE2NzE0MzQx",
                "organizations_url": "https://api.github.com/users/Burtannia/orgs",
                "received_events_url": "https://api.github.com/users/Burtannia/received_events",
                "repos_url": "https://api.github.com/users/Burtannia/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Burtannia/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Burtannia/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Burtannia",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "@justinmk to add to this: haskell-tools queried `vim.lsp.config[\"hls\"]` to allow users to configure the LSP client via `vim.lsp.config`. \nI've changed that to `vim.lsp.config[\"haskell-tools\"]` to avoid nvim-lspconfig's `lsp/hls.lua` causing unwanted overrides.\nHowever, I have no idea where he `Vim:E729` error in the health check comes from. Apparently, my change fixed that too, which could mean that it's caused by the config in `lsp/hls.lua`?\nThat might need some looking into.",
            "created_at": "2025-04-30T16:48:11Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3809#issuecomment-2842622475",
            "id": 2842622475,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3809",
            "node_id": "IC_kwDODTQC186pbvoL",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 1,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2842622475/reactions"
            },
            "updated_at": "2025-04-30T16:48:11Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2842622475",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/12857160?v=4",
                "events_url": "https://api.github.com/users/mrcjkb/events{/privacy}",
                "followers_url": "https://api.github.com/users/mrcjkb/followers",
                "following_url": "https://api.github.com/users/mrcjkb/following{/other_user}",
                "gists_url": "https://api.github.com/users/mrcjkb/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mrcjkb",
                "id": 12857160,
                "login": "mrcjkb",
                "node_id": "MDQ6VXNlcjEyODU3MTYw",
                "organizations_url": "https://api.github.com/users/mrcjkb/orgs",
                "received_events_url": "https://api.github.com/users/mrcjkb/received_events",
                "repos_url": "https://api.github.com/users/mrcjkb/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mrcjkb/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mrcjkb/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mrcjkb",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 12,
    "comments_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3809/comments",
    "created_at": "2025-04-30T10:31:53Z",
    "events_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3809/events",
    "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3809",
    "id": 3030871573,
    "labels": [],
    "labels_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3809/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDODTQC1860p24V",
    "number": 3809,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3809/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/nvim-lspconfig",
    "state": "closed",
    "state_reason": "completed",
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3809/timeline",
    "title": "\":LspInfo\" fails with \"Vim:E729: Using a Funcref as a String\"",
    "type": {
        "color": "red",
        "created_at": "2024-01-25T10:10:19Z",
        "description": "An unexpected problem or behavior",
        "id": 597163,
        "is_enabled": true,
        "name": "Bug",
        "node_id": "IT_kwDOAGK_Pc4ACRyr",
        "updated_at": "2024-07-26T10:12:30Z"
    },
    "updated_at": "2025-04-30T16:48:12Z",
    "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3809",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/16714341?v=4",
        "events_url": "https://api.github.com/users/Burtannia/events{/privacy}",
        "followers_url": "https://api.github.com/users/Burtannia/followers",
        "following_url": "https://api.github.com/users/Burtannia/following{/other_user}",
        "gists_url": "https://api.github.com/users/Burtannia/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/Burtannia",
        "id": 16714341,
        "login": "Burtannia",
        "node_id": "MDQ6VXNlcjE2NzE0MzQx",
        "organizations_url": "https://api.github.com/users/Burtannia/orgs",
        "received_events_url": "https://api.github.com/users/Burtannia/received_events",
        "repos_url": "https://api.github.com/users/Burtannia/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/Burtannia/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Burtannia/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/Burtannia",
        "user_view_type": "public"
    }
}