{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "body": "### Description\n\nBasically, I have biome attaching to a file in a project that has no biome installed and where `root_dir` yields nil.\nI don't see if there's any support for only attaching to a buffer if root pattern matches, please, correct me if I'm wrong.\n\nTo reproduce you can run `vim.lsp.config(\"biome\", {})` and open up any ts/tsx file in a project that has no biome installed. Configuring settings didn't help in my case.\n\nBelow is an extract from my config with some of my observations explaining the issue deeper:\n```lua\nbiome = {\n  -- This returns nil, but biome still attaches to a buffer\n  root_dir = function(bufnr, on_dir)\n    local util = require(\"lspconfig.util\")\n    local fname = vim.api.nvim_buf_get_name(bufnr)\n    local root_files = { \"biome.json\", \"biome.jsonc\" }\n    root_files = util.insert_package_json(root_files, \"biome\", fname)\n    local root_dir = vim.fs.dirname(vim.fs.find(root_files, { path = fname, upward = true })[1])\n    on_dir(root_dir)\n    -- Replacing above line with this helps, currently using this workaround\n    -- return root_dir and on_dir(root_dir)\n  end,\n  -- Recommended by docs, but this doesn't really help\n  workspace_required = false,\n}\n```\n\nI have tried on a dry folder with a TypeScript file that has no `.git` directory, because of there being an open issue removing it from `root_markers`, but it didn't help.",
    "closed_at": "2025-04-21T15:00:05Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
        "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
        "followers_url": "https://api.github.com/users/justinmk/followers",
        "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
        "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/justinmk",
        "id": 1359421,
        "login": "justinmk",
        "node_id": "MDQ6VXNlcjEzNTk0MjE=",
        "organizations_url": "https://api.github.com/users/justinmk/orgs",
        "received_events_url": "https://api.github.com/users/justinmk/received_events",
        "repos_url": "https://api.github.com/users/justinmk/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/justinmk",
        "user_view_type": "public"
    },
    "comment_data": [
        {
            "author_association": "NONE",
            "body": "My understanding is that `workspace_required = true` is what makes it require the `root_markers` (and maybe `root_dir`?) to match before it attaches an LSP, so I think setting that to false would be going the opposite direction from where you want to be. I'm trying to replicate your issue using the biome config that's included in this repo with no modifications but its working correctly for me, biome is only attaching to buffers if I create a `biome.json` file at the root of my project, else biome is not attaching.\n\nEdit: yeah the only thing that breaks my config and makes it behave like yours is setting `workspace_required = false`\n\nEdit Edit: Also are you using nvim nightly? `workspace_required` is going to be included in nvim 0.11.1 but that's not quite here yet, so afaik you'd need to use nightly to fix this behavior",
            "created_at": "2025-04-19T00:32:35Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3748#issuecomment-2816402481",
            "id": 2816402481,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3748",
            "node_id": "IC_kwDODTQC186n3uQx",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2816402481/reactions"
            },
            "updated_at": "2025-04-19T00:40:15Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2816402481",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/4987637?v=4",
                "events_url": "https://api.github.com/users/cbackas/events{/privacy}",
                "followers_url": "https://api.github.com/users/cbackas/followers",
                "following_url": "https://api.github.com/users/cbackas/following{/other_user}",
                "gists_url": "https://api.github.com/users/cbackas/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/cbackas",
                "id": 4987637,
                "login": "cbackas",
                "node_id": "MDQ6VXNlcjQ5ODc2Mzc=",
                "organizations_url": "https://api.github.com/users/cbackas/orgs",
                "received_events_url": "https://api.github.com/users/cbackas/received_events",
                "repos_url": "https://api.github.com/users/cbackas/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/cbackas/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/cbackas/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/cbackas",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "> Edit: Also are you using nvim nightly? workspace_required is going to be included in nvim 0.11.1 but that's not quite here yet, so afaik you'd need to use nightly to fix this behavior\n\nUsing nightly resolves the issue. Is there a note or a warning that I have missed in the docs? If not, I wonder if it's worth to mention that somewhere, so that users know that some of the 0.11 configs might require nightly.\n\nSince `workspace_required` is true by default and its name implies that it would only start the LSP client if a workspace was found (akin to `single_file_support = false`), I was expecting it to work out of the box, but instead I had to upgrade to nightly first.\n\nSo, a final takeaway would be that probably there should be a mention in the docs that some features might still not be available in v0.11, hence if using v0.11 configuration and something is off, maybe upgrading to nightly is the answer (or playing with stable options, like i do with `root_dir` might also help)",
            "created_at": "2025-04-19T06:44:12Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3748#issuecomment-2816573731",
            "id": 2816573731,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3748",
            "node_id": "IC_kwDODTQC186n4YEj",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2816573731/reactions"
            },
            "updated_at": "2025-04-19T12:57:45Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2816573731",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/44036750?v=4",
                "events_url": "https://api.github.com/users/r4zendev/events{/privacy}",
                "followers_url": "https://api.github.com/users/r4zendev/followers",
                "following_url": "https://api.github.com/users/r4zendev/following{/other_user}",
                "gists_url": "https://api.github.com/users/r4zendev/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/r4zendev",
                "id": 44036750,
                "login": "r4zendev",
                "node_id": "MDQ6VXNlcjQ0MDM2NzUw",
                "organizations_url": "https://api.github.com/users/r4zendev/orgs",
                "received_events_url": "https://api.github.com/users/r4zendev/received_events",
                "repos_url": "https://api.github.com/users/r4zendev/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/r4zendev/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/r4zendev/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/r4zendev",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "`workspace_required` will be included in Nvim 0.11.1, it didn't get merged in time for 0.11.0",
            "created_at": "2025-04-21T15:00:03Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3748#issuecomment-2818683637",
            "id": 2818683637,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3748",
            "node_id": "IC_kwDODTQC186oAbL1",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2818683637/reactions"
            },
            "updated_at": "2025-04-21T15:00:03Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2818683637",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "Took me forever to find this issue, but upgrading from 0.11.0 to 0.11.1 fixed the problem.",
            "created_at": "2025-05-11T15:40:08Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3748#issuecomment-2869945682",
            "id": 2869945682,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3748",
            "node_id": "IC_kwDODTQC186rD-VS",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2869945682/reactions"
            },
            "updated_at": "2025-05-11T15:40:08Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2869945682",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/52645?v=4",
                "events_url": "https://api.github.com/users/filmaj/events{/privacy}",
                "followers_url": "https://api.github.com/users/filmaj/followers",
                "following_url": "https://api.github.com/users/filmaj/following{/other_user}",
                "gists_url": "https://api.github.com/users/filmaj/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/filmaj",
                "id": 52645,
                "login": "filmaj",
                "node_id": "MDQ6VXNlcjUyNjQ1",
                "organizations_url": "https://api.github.com/users/filmaj/orgs",
                "received_events_url": "https://api.github.com/users/filmaj/received_events",
                "repos_url": "https://api.github.com/users/filmaj/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/filmaj/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/filmaj/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/filmaj",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 4,
    "comments_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3748/comments",
    "created_at": "2025-04-18T16:14:17Z",
    "events_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3748/events",
    "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3748",
    "id": 3005273856,
    "labels": [
        {
            "color": "f9d0c4",
            "default": true,
            "description": "Something isn't working",
            "id": 1674892761,
            "name": "bug",
            "node_id": "MDU6TGFiZWwxNjc0ODkyNzYx",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/labels/bug"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3748/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDODTQC186zINcA",
    "number": 3748,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3748/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/nvim-lspconfig",
    "state": "closed",
    "state_reason": "completed",
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3748/timeline",
    "title": "Biome: cannot disable `single_file_support`",
    "type": null,
    "updated_at": "2025-05-11T15:40:09Z",
    "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3748",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/44036750?v=4",
        "events_url": "https://api.github.com/users/r4zendev/events{/privacy}",
        "followers_url": "https://api.github.com/users/r4zendev/followers",
        "following_url": "https://api.github.com/users/r4zendev/following{/other_user}",
        "gists_url": "https://api.github.com/users/r4zendev/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/r4zendev",
        "id": 44036750,
        "login": "r4zendev",
        "node_id": "MDQ6VXNlcjQ0MDM2NzUw",
        "organizations_url": "https://api.github.com/users/r4zendev/orgs",
        "received_events_url": "https://api.github.com/users/r4zendev/received_events",
        "repos_url": "https://api.github.com/users/r4zendev/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/r4zendev/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/r4zendev/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/r4zendev",
        "user_view_type": "public"
    }
}