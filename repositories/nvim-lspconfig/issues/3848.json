{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Description\n\nOn a new machine today, I added my neovim config, and updated all the plugins.  I ended up with nvim-lspconfig commit 61e5109.  \n\n```\n nvim-lspconfig 2.76ms î«“ start\n        dir    /Users/noname/.local/share/nvim/lazy/nvim-lspconfig\n        url    https://github.com/neovim/nvim-lspconfig\n        branch master\n        commit 61e5109\n        readme README.md\n        help   |lspconfig-all|\n        help   |lspconfig.txt|\n```\n\nOn this commit, I seem to be getting multiple lua_ls clients attached when i open lua files:\n\n```\nvim.lsp: Active Clients ~\n- lua_ls (id: 1)\n  - Version: 3.14.0\n  - Root directory: nil\n  - Command: { \"lua-language-server\" }\n  - Settings: {}\n  - Attached buffers: 3\n- lua_ls (id: 2)\n  - Version: 3.14.0\n  - Root directory: nil\n  - Command: { \"lua-language-server\" }\n  - Settings: {\n      Lua = {\n        diagnostics = {\n          globals = { \"vim\" }\n        },\n        workspace = {\n          checkThirdParty = false,\n          library = { \"/opt/homebrew/Cellar/neovim/0.11.1/share/nvim/runtime\", \"${3rd}/luv/library\" }\n        }\n      }\n    }\n  - Attached buffers: 3\n```\n\nWhen I open my first file, I seem to be using the globals defined in the client with `id: 2`. But when i open a second file it appears i use the config in `id: 1` which does not load my settings.  Rolling back to commit fb733ac solves this issue for me.\n",
    "closed_at": "2025-05-22T09:35:46Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
        "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
        "followers_url": "https://api.github.com/users/justinmk/followers",
        "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
        "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/justinmk",
        "id": 1359421,
        "login": "justinmk",
        "node_id": "MDQ6VXNlcjEzNTk0MjE=",
        "organizations_url": "https://api.github.com/users/justinmk/orgs",
        "received_events_url": "https://api.github.com/users/justinmk/received_events",
        "repos_url": "https://api.github.com/users/justinmk/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/justinmk",
        "user_view_type": "public"
    },
    "comment_data": [
        {
            "author_association": "COLLABORATOR",
            "body": "Probably because it doesn't find any root markers, seeing as \"Root directory\" is `nil`.\n\nhttps://github.com/neovim/nvim-lspconfig/blob/61e5109c8cf24807e4ae29813a3a82b31821dd45/lsp/lua_ls.lua#L73-L82",
            "created_at": "2025-05-13T06:45:11Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3848#issuecomment-2875241753",
            "id": 2875241753,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3848",
            "node_id": "IC_kwDODTQC186rYLUZ",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2875241753/reactions"
            },
            "updated_at": "2025-05-13T06:45:33Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2875241753",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/177685?v=4",
                "events_url": "https://api.github.com/users/lithammer/events{/privacy}",
                "followers_url": "https://api.github.com/users/lithammer/followers",
                "following_url": "https://api.github.com/users/lithammer/following{/other_user}",
                "gists_url": "https://api.github.com/users/lithammer/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/lithammer",
                "id": 177685,
                "login": "lithammer",
                "node_id": "MDQ6VXNlcjE3NzY4NQ==",
                "organizations_url": "https://api.github.com/users/lithammer/orgs",
                "received_events_url": "https://api.github.com/users/lithammer/received_events",
                "repos_url": "https://api.github.com/users/lithammer/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/lithammer/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lithammer/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/lithammer",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "Same issue here. Not only lua_ls, but also gopls and pylsp does encounter this problem.\n\nRollback to https://github.com/neovim/nvim-lspconfig/commit/fb733ac734249ccf293e5c8018981d4d8f59fa8f does really solve it.",
            "created_at": "2025-05-14T02:01:50Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3848#issuecomment-2878413392",
            "id": 2878413392,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3848",
            "node_id": "IC_kwDODTQC186rkRpQ",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 3,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 3,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2878413392/reactions"
            },
            "updated_at": "2025-05-14T02:05:43Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2878413392",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/25029451?v=4",
                "events_url": "https://api.github.com/users/yuchanns/events{/privacy}",
                "followers_url": "https://api.github.com/users/yuchanns/followers",
                "following_url": "https://api.github.com/users/yuchanns/following{/other_user}",
                "gists_url": "https://api.github.com/users/yuchanns/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/yuchanns",
                "id": 25029451,
                "login": "yuchanns",
                "node_id": "MDQ6VXNlcjI1MDI5NDUx",
                "organizations_url": "https://api.github.com/users/yuchanns/orgs",
                "received_events_url": "https://api.github.com/users/yuchanns/received_events",
                "repos_url": "https://api.github.com/users/yuchanns/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/yuchanns/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/yuchanns/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/yuchanns",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "Same issue here! I have observed it for ts_ls and gopls. Request someone to look into fixing this.\n\nThank you\n",
            "created_at": "2025-05-14T06:04:11Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3848#issuecomment-2878777765",
            "id": 2878777765,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3848",
            "node_id": "IC_kwDODTQC186rlqml",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2878777765/reactions"
            },
            "updated_at": "2025-05-14T06:04:11Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2878777765",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/7163332?v=4",
                "events_url": "https://api.github.com/users/vishnukg/events{/privacy}",
                "followers_url": "https://api.github.com/users/vishnukg/followers",
                "following_url": "https://api.github.com/users/vishnukg/following{/other_user}",
                "gists_url": "https://api.github.com/users/vishnukg/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/vishnukg",
                "id": 7163332,
                "login": "vishnukg",
                "node_id": "MDQ6VXNlcjcxNjMzMzI=",
                "organizations_url": "https://api.github.com/users/vishnukg/orgs",
                "received_events_url": "https://api.github.com/users/vishnukg/received_events",
                "repos_url": "https://api.github.com/users/vishnukg/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/vishnukg/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/vishnukg/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/vishnukg",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "@pingpong71 @lithammer @yuchanns \n\nOk I found a fix which worked for me! I had to add the following line to mason lspconfig automatic_enable = false\nso the new mason lspconfig setup looks like this\nrequire(\"mason-lspconfig\").setup({\n     ...( old config),\n    automatic_enable = false,\n})\n\nThis is because of the changes in nvim v0.11 and the new mason update [Mason](https://github.com/mason-org/mason-lspconfig.nvim?tab=readme-ov-file#automatically-enable-installed-servers)\n\nautomatic_enable = false tells mason-lspconfig to only do the installation part, leaving the setup part entirely to your manual setup, thus avoiding the duplication. ( I was also setting up the lsp manually on my own like  lspconfig[server].setup(opts)). Hope this helps.\n\n\n",
            "created_at": "2025-05-17T09:26:37Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3848#issuecomment-2888249003",
            "id": 2888249003,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3848",
            "node_id": "IC_kwDODTQC186sJy6r",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 7,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 3,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 10,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2888249003/reactions"
            },
            "updated_at": "2025-05-17T09:27:18Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2888249003",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/7163332?v=4",
                "events_url": "https://api.github.com/users/vishnukg/events{/privacy}",
                "followers_url": "https://api.github.com/users/vishnukg/followers",
                "following_url": "https://api.github.com/users/vishnukg/following{/other_user}",
                "gists_url": "https://api.github.com/users/vishnukg/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/vishnukg",
                "id": 7163332,
                "login": "vishnukg",
                "node_id": "MDQ6VXNlcjcxNjMzMzI=",
                "organizations_url": "https://api.github.com/users/vishnukg/orgs",
                "received_events_url": "https://api.github.com/users/vishnukg/received_events",
                "repos_url": "https://api.github.com/users/vishnukg/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/vishnukg/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/vishnukg/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/vishnukg",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 4,
    "comments_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3848/comments",
    "created_at": "2025-05-13T06:39:33Z",
    "events_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3848/events",
    "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3848",
    "id": 3058928642,
    "labels": [
        {
            "color": "e6e6e6",
            "default": true,
            "description": "Further information is requested",
            "id": 1674892775,
            "name": "question",
            "node_id": "MDU6TGFiZWwxNjc0ODkyNzc1",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/labels/question"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3848/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDODTQC1862U4wC",
    "number": 3848,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 4,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 4,
        "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3848/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/nvim-lspconfig",
    "state": "closed",
    "state_reason": "not_planned",
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3848/timeline",
    "title": "Multiple lua_ls clients are attaching when opening files (RESOLVED: mason issue)",
    "type": null,
    "updated_at": "2025-05-22T09:35:46Z",
    "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3848",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/141460872?v=4",
        "events_url": "https://api.github.com/users/pingpong71/events{/privacy}",
        "followers_url": "https://api.github.com/users/pingpong71/followers",
        "following_url": "https://api.github.com/users/pingpong71/following{/other_user}",
        "gists_url": "https://api.github.com/users/pingpong71/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/pingpong71",
        "id": 141460872,
        "login": "pingpong71",
        "node_id": "U_kgDOCG6FiA",
        "organizations_url": "https://api.github.com/users/pingpong71/orgs",
        "received_events_url": "https://api.github.com/users/pingpong71/received_events",
        "repos_url": "https://api.github.com/users/pingpong71/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/pingpong71/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/pingpong71/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/pingpong71",
        "user_view_type": "public"
    }
}