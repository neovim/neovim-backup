{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Description\n\nI recently finished configuring my neovim environment, mainly for working with python/c/cpp projects, I even managed to configure a dap setup which \"kind of\" works I guess. My problem is when it comes to syntax highlighting/general usage of the lsp client for cmake, nothing seems to work even though I configured it exactly the same way as other lsps I'm currently using.\r\n\r\nI created a project with multiple folders including a .git and build folders, which should be triggered as the root dir so the lsp should be attached to the CMakelists.txt file or Makefile file, or at least that's what I understood in the https://github.com/regen100/cmake-language-server description.\r\n\r\nMy lsp configuration is the same as this one: https://github.com/LunarVim/nvim-basic-ide/blob/master/lua/user/lsp/mason.lua adding to the servers the cmake one. I can provide some more screenshots showing other lsp clients working fine out of the box with their buffers but the cmake being active and not attaching to any cmake file I create.\r\n\r\nDo you guys have any idea why am I having this issue? Needless to say I'm a total beginner when it comes to vim/neovim stuff, and I recently managed to put together kind of a semi-decent configuration copying plenty of the options Chris and other delevopers from lunarvim shared in their repos.\r\n\r\nThank you for taking time to read my question, this might be a duplicate but I've been aimlessly searching trying to find someone with a similar issue than mine with no results.\r\n\r\nI tried creating multiple cmake and make style files. Plus adding more folders so that the root directory would be detected and the lsp client could be attached to the buffer successfully.\n\n### Neovim version\n\nNVIM v0.8.1\r\nBuild type: Release\r\nLuaJIT 2.1.0-beta3\r\n\n\n### Nvim-lspconfig version\n\n a59ba78f164f586d47a2f315dc3d021a630768d0\n\n### Operating system and version\n\nUbuntu 22.04.1 LTS \n\n### Affected language servers\n\ncmake\n\n### Steps to reproduce\n\n1. Create  sample project directory structure including a .git, src, include, libs, build and bin folders.\r\n2. Add a Makefile in the project's root and a CMakelists.txt\r\n3. Open either one of these files in a buffer with nvim\n\n### Actual behavior\n\nThe cmake client is not attached to any of the buffers even though the on attach premise condition has theoretically been met\r\n![image](https://user-images.githubusercontent.com/80027196/213144370-ec0f19b5-d974-499d-a75d-3b9dcd211d48.png)\r\n\n\n### Expected behavior\n\nThe client should be attached to the buffer providing auto-completion and other features from lsps\n\n### Minimal config\n\n```Lua\nMy configuration is mostly the same as this github repo provided by the Chris colleagues from Lunarvim, with the exception of the cmake server being added into the servers list, plus installing it using the Mason plugin.\r\nhttps://github.com/LunarVim/nvim-basic-ide/blob/master/lua/user/lsp/mason.lua\n```\n\n\n### LSP log\n\nhttps://gist.github.com/josedev9/57f0eb2bc35ce681035cb529f2de62ab#file-lsp-log",
    "closed_at": "2023-01-18T10:29:56Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
        "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
        "followers_url": "https://api.github.com/users/glepnir/followers",
        "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
        "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/glepnir",
        "id": 41671631,
        "login": "glepnir",
        "node_id": "MDQ6VXNlcjQxNjcxNjMx",
        "organizations_url": "https://api.github.com/users/glepnir/orgs",
        "received_events_url": "https://api.github.com/users/glepnir/received_events",
        "repos_url": "https://api.github.com/users/glepnir/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/glepnir",
        "user_view_type": "public"
    },
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "your filetype is `txt` . changed it to `cmake`",
            "created_at": "2023-01-18T10:29:56Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/2406#issuecomment-1386827576",
            "id": 1386827576,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2406",
            "node_id": "IC_kwDODTQC185SqU84",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 5,
                "confused": 3,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 9,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1386827576/reactions"
            },
            "updated_at": "2023-01-18T10:29:56Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1386827576",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "I'm so stupid, I thought that by default the standard was to use a CMakelists ending in a .txt format instead of cmake. Didn't think of changing that, my bad, thanks for the answer. =)",
            "created_at": "2023-01-18T11:12:30Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/2406#issuecomment-1386883252",
            "id": 1386883252,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2406",
            "node_id": "IC_kwDODTQC185Sqii0",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 1,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1386883252/reactions"
            },
            "updated_at": "2023-01-18T11:12:30Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1386883252",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/80027196?v=4",
                "events_url": "https://api.github.com/users/josedev9/events{/privacy}",
                "followers_url": "https://api.github.com/users/josedev9/followers",
                "following_url": "https://api.github.com/users/josedev9/following{/other_user}",
                "gists_url": "https://api.github.com/users/josedev9/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/josedev9",
                "id": 80027196,
                "login": "josedev9",
                "node_id": "MDQ6VXNlcjgwMDI3MTk2",
                "organizations_url": "https://api.github.com/users/josedev9/orgs",
                "received_events_url": "https://api.github.com/users/josedev9/received_events",
                "repos_url": "https://api.github.com/users/josedev9/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/josedev9/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/josedev9/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/josedev9",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "The filename CmakeLists.txt has a special meaning in CMake.\r\n\r\nYou **have** to have at least one such file in any CMake project (the root CMake config file for the project). When you run CMake to configure a buildsystem, you pass it the path to a _directory containing_ a CMakeLists.txt file- not the path to a CMake file. See [the CMake docs on invoking the configuration process](https://cmake.org/cmake/help/latest/manual/cmake.1.html#generate-a-project-buildsystem).\r\n\r\nAnd when you call [`add_subdirectory()`](https://cmake.org/cmake/help/latest/command/add_subdirectory.html), the subdirectory is expected to contain a file named \"CMakeLists.txt\".\r\n\r\nIt's not a valid workaround for the root config file or config files added via `add_subdirectory` to change the file extension from `.txt` to `.cmake`.\r\n\r\nThis issue should really be re-opened and \"CMakeLists.txt\" added as a special case to be supported.",
            "created_at": "2023-01-19T21:21:35Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/2406#issuecomment-1397625261",
            "id": 1397625261,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2406",
            "node_id": "IC_kwDODTQC185TThGt",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1397625261/reactions"
            },
            "updated_at": "2023-01-19T21:23:12Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1397625261",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/119012845?v=4",
                "events_url": "https://api.github.com/users/starball5/events{/privacy}",
                "followers_url": "https://api.github.com/users/starball5/followers",
                "following_url": "https://api.github.com/users/starball5/following{/other_user}",
                "gists_url": "https://api.github.com/users/starball5/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/starball5",
                "id": 119012845,
                "login": "starball5",
                "node_id": "U_kgDOBxf97Q",
                "organizations_url": "https://api.github.com/users/starball5/orgs",
                "received_events_url": "https://api.github.com/users/starball5/received_events",
                "repos_url": "https://api.github.com/users/starball5/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/starball5/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/starball5/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/starball5",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "> The filename CmakeLists.txt has a special meaning in CMake.\r\n> \r\n> You **have** to have at least one such file in any CMake project (the root CMake config file for the project). When you run CMake to configure a buildsystem, you pass it the path to a _directory containing_ a CMakeLists.txt file- not the path to a CMake file. See [the CMake docs on invoking the configuration process](https://cmake.org/cmake/help/latest/manual/cmake.1.html#generate-a-project-buildsystem).\r\n> \r\n> And when you call [`add_subdirectory()`](https://cmake.org/cmake/help/latest/command/add_subdirectory.html), the subdirectory is expected to contain a file named \"CMakeLists.txt\".\r\n> \r\n> It's not a valid workaround for the root config file or config files added via `add_subdirectory` to change the file extension from `.txt` to `.cmake`.\r\n> \r\n> This issue should really be re-opened and \"CMakeLists.txt\" added as a special case to be supported.\r\n\r\nThis is true. These files are supposed to have .txt, not .cmake. Many libraries are written this way and are not supported by default with the current filetype support. I try to change the filetypes in my lspconfig table for the cmake server, but unfortunately the lsp does not attach in neovim.",
            "created_at": "2024-08-04T13:16:35Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/2406#issuecomment-2267540049",
            "id": 2267540049,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2406",
            "node_id": "IC_kwDODTQC186HJ-pR",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2267540049/reactions"
            },
            "updated_at": "2024-08-04T13:17:36Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2267540049",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9097796?v=4",
                "events_url": "https://api.github.com/users/thomaskvnze/events{/privacy}",
                "followers_url": "https://api.github.com/users/thomaskvnze/followers",
                "following_url": "https://api.github.com/users/thomaskvnze/following{/other_user}",
                "gists_url": "https://api.github.com/users/thomaskvnze/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/thomaskvnze",
                "id": 9097796,
                "login": "thomaskvnze",
                "node_id": "MDQ6VXNlcjkwOTc3OTY=",
                "organizations_url": "https://api.github.com/users/thomaskvnze/orgs",
                "received_events_url": "https://api.github.com/users/thomaskvnze/received_events",
                "repos_url": "https://api.github.com/users/thomaskvnze/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/thomaskvnze/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/thomaskvnze/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/thomaskvnze",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "> your filetype is `txt` . changed it to `cmake`\n\nNeovim source code itself has nine CMakeLists.txt files. Would you please consider allowing a PR for CMakeLists.txt files to be picked up by this LSP? This is inconveniencing me at my job and it would be kind of embarrassing if I changed 30 CMake files because my IDE is the only one that can't handle them. I think this change would directly benefit the neovim project and many C developers who benefit from this LSP",
            "created_at": "2025-05-19T04:25:49Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/2406#issuecomment-2889572684",
            "id": 2889572684,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2406",
            "node_id": "IC_kwDODTQC186sO2FM",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2889572684/reactions"
            },
            "updated_at": "2025-05-19T04:26:56Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2889572684",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/26929874?v=4",
                "events_url": "https://api.github.com/users/AlphaNumericPencil/events{/privacy}",
                "followers_url": "https://api.github.com/users/AlphaNumericPencil/followers",
                "following_url": "https://api.github.com/users/AlphaNumericPencil/following{/other_user}",
                "gists_url": "https://api.github.com/users/AlphaNumericPencil/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/AlphaNumericPencil",
                "id": 26929874,
                "login": "AlphaNumericPencil",
                "node_id": "MDQ6VXNlcjI2OTI5ODc0",
                "organizations_url": "https://api.github.com/users/AlphaNumericPencil/orgs",
                "received_events_url": "https://api.github.com/users/AlphaNumericPencil/received_events",
                "repos_url": "https://api.github.com/users/AlphaNumericPencil/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/AlphaNumericPencil/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/AlphaNumericPencil/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/AlphaNumericPencil",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 5,
    "comments_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2406/comments",
    "created_at": "2023-01-18T10:22:19Z",
    "events_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2406/events",
    "html_url": "https://github.com/neovim/nvim-lspconfig/issues/2406",
    "id": 1537748616,
    "labels": [
        {
            "color": "f9d0c4",
            "default": true,
            "description": "Something isn't working",
            "id": 1674892761,
            "name": "bug",
            "node_id": "MDU6TGFiZWwxNjc0ODkyNzYx",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/labels/bug"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2406/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDODTQC185bqC6I",
    "number": 2406,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 1,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 1,
        "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2406/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/nvim-lspconfig",
    "state": "closed",
    "state_reason": "completed",
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2406/timeline",
    "title": "Issue with cmake-language-server lsp when working with cmake files",
    "type": null,
    "updated_at": "2025-05-19T04:26:56Z",
    "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2406",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/80027196?v=4",
        "events_url": "https://api.github.com/users/josedev9/events{/privacy}",
        "followers_url": "https://api.github.com/users/josedev9/followers",
        "following_url": "https://api.github.com/users/josedev9/following{/other_user}",
        "gists_url": "https://api.github.com/users/josedev9/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/josedev9",
        "id": 80027196,
        "login": "josedev9",
        "node_id": "MDQ6VXNlcjgwMDI3MTk2",
        "organizations_url": "https://api.github.com/users/josedev9/orgs",
        "received_events_url": "https://api.github.com/users/josedev9/received_events",
        "repos_url": "https://api.github.com/users/josedev9/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/josedev9/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/josedev9/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/josedev9",
        "user_view_type": "public"
    }
}