{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Description\n\nHey, \n\nAt the moment the angular language server in my project starts with an empty string as parameter for --angularCoreVersion\nThis leads to features not being enabled in the angular language server. \n\nThe reason is in my opinion this line:\n``` lua\nlocal node_modules_dir = vim.fs.find('node_modules', { path = root_dir, upward = true })[1]\n```\nin the angularls.lua file. \nThe upward = true setting seems to be wrong. The node_modules folder should be a subfolder of the root directory.\nLocally changing it to \n``` lua\nlocal node_modules_dir = vim.fs.find('node_modules', { path = root_dir })[1]\n```\nfixed the issue of a missing version number.\n\nAlso in cases where the version can not be determined, the `--angularCoreVersion` parameter should not be added to the program arguments. right now the parameter just exists with an empty value, which prevents the default handling of the Language server.\n\nI suggest changing the return statement like this: \n``` lua\n    local tbl = {\n        cmd = {\n            'ngserver',\n            '--stdio',\n            '--tsProbeLocations',\n            ts_probe_dirs,\n            '--ngProbeLocations',\n            ng_probe_dirs,\n        },\n        filetypes = { 'typescript', 'html', 'typescriptreact', 'typescript.tsx', 'htmlangular' },\n        root_markers = { 'angular.json', 'nx.json' },\n    }\n    if default_angular_core_version ~= \"\" then\n        table.insert(tbl[\"cmd\"], '--angularCoreVersion')\n        table.insert(tbl[\"cmd\"], default_angular_core_version)\n    end\n    return tbl\n```\n\nBest regards",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [],
    "comments": 0,
    "comments_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3859/comments",
    "created_at": "2025-05-20T14:52:05Z",
    "events_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3859/events",
    "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3859",
    "id": 3077312276,
    "labels": [
        {
            "color": "f9d0c4",
            "default": true,
            "description": "Something isn't working",
            "id": 1674892761,
            "name": "bug",
            "node_id": "MDU6TGFiZWwxNjc0ODkyNzYx",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/labels/bug"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3859/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDODTQC1863bA8U",
    "number": 3859,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3859/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/nvim-lspconfig",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3859/timeline",
    "title": "AngularLs does not properly detect current @angular/core version",
    "type": null,
    "updated_at": "2025-05-20T14:52:05Z",
    "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3859",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/9798513?v=4",
        "events_url": "https://api.github.com/users/beneeng/events{/privacy}",
        "followers_url": "https://api.github.com/users/beneeng/followers",
        "following_url": "https://api.github.com/users/beneeng/following{/other_user}",
        "gists_url": "https://api.github.com/users/beneeng/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/beneeng",
        "id": 9798513,
        "login": "beneeng",
        "node_id": "MDQ6VXNlcjk3OTg1MTM=",
        "organizations_url": "https://api.github.com/users/beneeng/orgs",
        "received_events_url": "https://api.github.com/users/beneeng/received_events",
        "repos_url": "https://api.github.com/users/beneeng/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/beneeng/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/beneeng/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/beneeng",
        "user_view_type": "public"
    }
}