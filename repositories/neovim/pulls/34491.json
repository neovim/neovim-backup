{
    "_links": {
        "comments": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/34491/comments"
        },
        "commits": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/34491/commits"
        },
        "html": {
            "href": "https://github.com/neovim/neovim/pull/34491"
        },
        "issue": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/34491"
        },
        "review_comment": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}"
        },
        "review_comments": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/34491/comments"
        },
        "self": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/34491"
        },
        "statuses": {
            "href": "https://api.github.com/repos/neovim/neovim/statuses/2a3e4fbfe7637df40872dde58692e9cc4a3188b7"
        }
    },
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "auto_merge": null,
    "base": {
        "label": "neovim:master",
        "ref": "master",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/neovim/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/neovim/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/neovim/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/neovim/neovim/branches{/branch}",
            "clone_url": "https://github.com/neovim/neovim.git",
            "collaborators_url": "https://api.github.com/repos/neovim/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/neovim/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/neovim/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/neovim/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/neovim/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/neovim/neovim/contributors",
            "created_at": "2014-01-31T13:39:22Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/neovim/neovim/deployments",
            "description": "Vim-fork focused on extensibility and usability",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/neovim/neovim/downloads",
            "events_url": "https://api.github.com/repos/neovim/neovim/events",
            "fork": false,
            "forks": 6140,
            "forks_count": 6140,
            "forks_url": "https://api.github.com/repos/neovim/neovim/forks",
            "full_name": "neovim/neovim",
            "git_commits_url": "https://api.github.com/repos/neovim/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/neovim/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/neovim/neovim/git/tags{/sha}",
            "git_url": "git://github.com/neovim/neovim.git",
            "has_discussions": true,
            "has_downloads": true,
            "has_issues": true,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://neovim.io",
            "hooks_url": "https://api.github.com/repos/neovim/neovim/hooks",
            "html_url": "https://github.com/neovim/neovim",
            "id": 16408992,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/neovim/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/neovim/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/neovim/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/neovim/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/neovim/neovim/labels{/name}",
            "language": "Vim Script",
            "languages_url": "https://api.github.com/repos/neovim/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/neovim/neovim/merges",
            "milestones_url": "https://api.github.com/repos/neovim/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "MDEwOlJlcG9zaXRvcnkxNjQwODk5Mg==",
            "notifications_url": "https://api.github.com/repos/neovim/neovim/notifications{?since,all,participating}",
            "open_issues": 1958,
            "open_issues_count": 1958,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
                "events_url": "https://api.github.com/users/neovim/events{/privacy}",
                "followers_url": "https://api.github.com/users/neovim/followers",
                "following_url": "https://api.github.com/users/neovim/following{/other_user}",
                "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/neovim",
                "id": 6471485,
                "login": "neovim",
                "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
                "organizations_url": "https://api.github.com/users/neovim/orgs",
                "received_events_url": "https://api.github.com/users/neovim/received_events",
                "repos_url": "https://api.github.com/users/neovim/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
                "type": "Organization",
                "url": "https://api.github.com/users/neovim",
                "user_view_type": "public"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/neovim/neovim/pulls{/number}",
            "pushed_at": "2025-06-23T23:51:21Z",
            "releases_url": "https://api.github.com/repos/neovim/neovim/releases{/id}",
            "size": 329345,
            "ssh_url": "git@github.com:neovim/neovim.git",
            "stargazers_count": 90542,
            "stargazers_url": "https://api.github.com/repos/neovim/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/neovim/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/neovim/neovim/subscription",
            "svn_url": "https://github.com/neovim/neovim",
            "tags_url": "https://api.github.com/repos/neovim/neovim/tags",
            "teams_url": "https://api.github.com/repos/neovim/neovim/teams",
            "topics": [
                "api",
                "c",
                "lua",
                "neovim",
                "nvim",
                "text-editor",
                "vim"
            ],
            "trees_url": "https://api.github.com/repos/neovim/neovim/git/trees{/sha}",
            "updated_at": "2025-06-24T01:55:09Z",
            "url": "https://api.github.com/repos/neovim/neovim",
            "visibility": "public",
            "watchers": 90542,
            "watchers_count": 90542,
            "web_commit_signoff_required": false
        },
        "sha": "fb5a51e77570ce2b548d22d250d503102aeac2fe",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
            "events_url": "https://api.github.com/users/neovim/events{/privacy}",
            "followers_url": "https://api.github.com/users/neovim/followers",
            "following_url": "https://api.github.com/users/neovim/following{/other_user}",
            "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/neovim",
            "id": 6471485,
            "login": "neovim",
            "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
            "organizations_url": "https://api.github.com/users/neovim/orgs",
            "received_events_url": "https://api.github.com/users/neovim/received_events",
            "repos_url": "https://api.github.com/users/neovim/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
            "type": "Organization",
            "url": "https://api.github.com/users/neovim",
            "user_view_type": "public"
        }
    },
    "body": "**Problem**:\r\nCurrently, there is no easy way to get user-input in prompt-buffer before\r\nthe user submits the input. Under the current system user/plugin needs to read\r\nthe buffer contents, figure out where the prompt is then extract the test\r\nif they want to. With the addition of multiline support, it becomes more\r\ncomplicated.\r\n\r\n**Solution**:\r\nAdd a new vim-function prompt_getinput({buf}) that gets the user-input\r\nwithout invoking the prompt-callback\r\n\r\n**Additional**:\r\n- refactor: Extract prompt text extraction logic to a separate function\r\n\r\n**Signature**:\r\n```\r\nprompt_getinput(bufnr) -> str\r\n```\r\n\r\nfollowup to #33371",
    "closed_at": null,
    "comment_data": [
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34491#discussion_r2146483502"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34491"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2146483502"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Who clears this memory? Does it get auto-cleared when the API return value goes out of scope? ASAN doesn't mind, I'm guessing it's auto-tracked somewhere.",
            "commit_id": "2a3e4fbfe7637df40872dde58692e9cc4a3188b7",
            "created_at": "2025-06-14T05:52:49Z",
            "diff_hunk": "@@ -1427,3 +1428,30 @@ void buf_collect_lines(buf_T *buf, size_t n, linenr_T start, int start_idx, bool\n     push_linestr(lstate, l, bufstr, bufstrlen, start_idx + (int)i, replace_nl, arena);\n   }\n }\n+\n+/// Gets current user input to prompt without invoking prompt_callback\n+///\n+/// @param buffer           Buffer id, or 0 for current buffer\n+/// @param opts      Optional parameters\n+///                  (reserved for future updates)\n+/// @param[out] err         Error details, if any\n+/// @return string of current prompt, or empty string for unloaded buffer / non pormpt buffer.\n+String nvim_buf_get_prompt_text(Buffer buffer, Dict(option) *opts, Error *err)\n+  FUNC_API_SINCE(14)\n+{\n+  String rv = STRING_INIT;\n+  buf_T *buf = find_buffer_by_handle(buffer, err);\n+\n+  // return sentinel value if the buffer isn't loaded\n+  if (!buf || buf->b_ml.ml_mfp == NULL) {\n+    return rv;\n+  }\n+\n+  // check if the given buffer is prompt buffer\n+  VALIDATE(bt_prompt(buf), \"%s\", \"Not a prompt buffer\", {\n+    return rv;\n+  });\n+\n+  char *current_prompt = get_current_prompt(buf);",
            "html_url": "https://github.com/neovim/neovim/pull/34491#discussion_r2146483502",
            "id": 2146483502,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5_8L0u",
            "original_commit_id": "bc3e84d05ead11c448782c5d6255ae37a81c1271",
            "original_line": 1455,
            "original_position": 36,
            "original_start_line": null,
            "path": "src/nvim/api/buffer.c",
            "position": null,
            "pull_request_review_id": 2927259764,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34491",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2146483502/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-06-14T05:52:49Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2146483502",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/13149513?v=4",
                "events_url": "https://api.github.com/users/shadmansaleh/events{/privacy}",
                "followers_url": "https://api.github.com/users/shadmansaleh/followers",
                "following_url": "https://api.github.com/users/shadmansaleh/following{/other_user}",
                "gists_url": "https://api.github.com/users/shadmansaleh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/shadmansaleh",
                "id": 13149513,
                "login": "shadmansaleh",
                "node_id": "MDQ6VXNlcjEzMTQ5NTEz",
                "organizations_url": "https://api.github.com/users/shadmansaleh/orgs",
                "received_events_url": "https://api.github.com/users/shadmansaleh/received_events",
                "repos_url": "https://api.github.com/users/shadmansaleh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/shadmansaleh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/shadmansaleh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/shadmansaleh",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34491#discussion_r2146513665"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34491"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2146513665"
                }
            },
            "author_association": "MEMBER",
            "body": "You may need to add `FUNC_API_RET_ALLOC`",
            "commit_id": "2a3e4fbfe7637df40872dde58692e9cc4a3188b7",
            "created_at": "2025-06-14T06:13:46Z",
            "diff_hunk": "@@ -1427,3 +1428,30 @@ void buf_collect_lines(buf_T *buf, size_t n, linenr_T start, int start_idx, bool\n     push_linestr(lstate, l, bufstr, bufstrlen, start_idx + (int)i, replace_nl, arena);\n   }\n }\n+\n+/// Gets current user input to prompt without invoking prompt_callback\n+///\n+/// @param buffer           Buffer id, or 0 for current buffer\n+/// @param opts      Optional parameters\n+///                  (reserved for future updates)\n+/// @param[out] err         Error details, if any\n+/// @return string of current prompt, or empty string for unloaded buffer / non pormpt buffer.\n+String nvim_buf_get_prompt_text(Buffer buffer, Dict(option) *opts, Error *err)\n+  FUNC_API_SINCE(14)\n+{\n+  String rv = STRING_INIT;\n+  buf_T *buf = find_buffer_by_handle(buffer, err);\n+\n+  // return sentinel value if the buffer isn't loaded\n+  if (!buf || buf->b_ml.ml_mfp == NULL) {\n+    return rv;\n+  }\n+\n+  // check if the given buffer is prompt buffer\n+  VALIDATE(bt_prompt(buf), \"%s\", \"Not a prompt buffer\", {\n+    return rv;\n+  });\n+\n+  char *current_prompt = get_current_prompt(buf);",
            "html_url": "https://github.com/neovim/neovim/pull/34491#discussion_r2146513665",
            "id": 2146513665,
            "in_reply_to_id": 2146483502,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5_8TMB",
            "original_commit_id": "bc3e84d05ead11c448782c5d6255ae37a81c1271",
            "original_line": 1455,
            "original_position": 36,
            "original_start_line": null,
            "path": "src/nvim/api/buffer.c",
            "position": null,
            "pull_request_review_id": 2927301595,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34491",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2146513665/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-06-14T06:13:54Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2146513665",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34491#discussion_r2153367689"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34491"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2153367689"
                }
            },
            "author_association": "MEMBER",
            "body": "This function name is a bit vague. It's not immediately clear that it gets the user input.",
            "commit_id": "2a3e4fbfe7637df40872dde58692e9cc4a3188b7",
            "created_at": "2025-06-18T00:10:16Z",
            "diff_hunk": "@@ -8660,24 +8660,12 @@ void eval_fmt_source_name_line(char *buf, size_t bufsize)\n   }\n }\n \n-void invoke_prompt_callback(void)\n+char *get_current_prompt(buf_T *buf)",
            "html_url": "https://github.com/neovim/neovim/pull/34491#discussion_r2153367689",
            "id": 2153367689,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6AWciJ",
            "original_commit_id": "bd4a0c10baca8d876d5c9ebc0650fcc28b0fd6e2",
            "original_line": 8663,
            "original_position": 5,
            "original_start_line": null,
            "path": "src/nvim/eval.c",
            "position": null,
            "pull_request_review_id": 2937369882,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34491",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2153367689/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-06-18T00:10:16Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2153367689",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34491#discussion_r2153479665"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34491"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2153479665"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Any suggestions?",
            "commit_id": "2a3e4fbfe7637df40872dde58692e9cc4a3188b7",
            "created_at": "2025-06-18T02:07:22Z",
            "diff_hunk": "@@ -8660,24 +8660,12 @@ void eval_fmt_source_name_line(char *buf, size_t bufsize)\n   }\n }\n \n-void invoke_prompt_callback(void)\n+char *get_current_prompt(buf_T *buf)",
            "html_url": "https://github.com/neovim/neovim/pull/34491#discussion_r2153479665",
            "id": 2153479665,
            "in_reply_to_id": 2153367689,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6AW33x",
            "original_commit_id": "bd4a0c10baca8d876d5c9ebc0650fcc28b0fd6e2",
            "original_line": 8663,
            "original_position": 5,
            "original_start_line": null,
            "path": "src/nvim/eval.c",
            "position": null,
            "pull_request_review_id": 2937512629,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34491",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2153479665/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-06-18T02:07:22Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2153479665",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/13149513?v=4",
                "events_url": "https://api.github.com/users/shadmansaleh/events{/privacy}",
                "followers_url": "https://api.github.com/users/shadmansaleh/followers",
                "following_url": "https://api.github.com/users/shadmansaleh/following{/other_user}",
                "gists_url": "https://api.github.com/users/shadmansaleh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/shadmansaleh",
                "id": 13149513,
                "login": "shadmansaleh",
                "node_id": "MDQ6VXNlcjEzMTQ5NTEz",
                "organizations_url": "https://api.github.com/users/shadmansaleh/orgs",
                "received_events_url": "https://api.github.com/users/shadmansaleh/received_events",
                "repos_url": "https://api.github.com/users/shadmansaleh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/shadmansaleh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/shadmansaleh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/shadmansaleh",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34491#discussion_r2154514077"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34491"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2154514077"
                }
            },
            "author_association": "MEMBER",
            "body": "`prompt_cur_input` ?\r\n\r\nalso a brief docstring helps when there is ambiguity. ",
            "commit_id": "2a3e4fbfe7637df40872dde58692e9cc4a3188b7",
            "created_at": "2025-06-18T12:48:31Z",
            "diff_hunk": "@@ -8660,24 +8660,12 @@ void eval_fmt_source_name_line(char *buf, size_t bufsize)\n   }\n }\n \n-void invoke_prompt_callback(void)\n+char *get_current_prompt(buf_T *buf)",
            "html_url": "https://github.com/neovim/neovim/pull/34491#discussion_r2154514077",
            "id": 2154514077,
            "in_reply_to_id": 2153367689,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6Aa0ad",
            "original_commit_id": "bd4a0c10baca8d876d5c9ebc0650fcc28b0fd6e2",
            "original_line": 8663,
            "original_position": 5,
            "original_start_line": null,
            "path": "src/nvim/eval.c",
            "position": null,
            "pull_request_review_id": 2939071543,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34491",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2154514077/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-06-18T12:48:31Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2154514077",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34491#discussion_r2154774180"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34491"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2154774180"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Yeah, docstring would help. And probably prefixing it with `prompt_` is will make it distinct enough for an internal function. Any suggestions on `prompt_gettext()` ? Should I make it `prompt_getinput(bufnr)`?",
            "commit_id": "2a3e4fbfe7637df40872dde58692e9cc4a3188b7",
            "created_at": "2025-06-18T14:33:17Z",
            "diff_hunk": "@@ -8660,24 +8660,12 @@ void eval_fmt_source_name_line(char *buf, size_t bufsize)\n   }\n }\n \n-void invoke_prompt_callback(void)\n+char *get_current_prompt(buf_T *buf)",
            "html_url": "https://github.com/neovim/neovim/pull/34491#discussion_r2154774180",
            "id": 2154774180,
            "in_reply_to_id": 2153367689,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6Abz6k",
            "original_commit_id": "bd4a0c10baca8d876d5c9ebc0650fcc28b0fd6e2",
            "original_line": 8663,
            "original_position": 5,
            "original_start_line": null,
            "path": "src/nvim/eval.c",
            "position": null,
            "pull_request_review_id": 2939499687,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34491",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2154774180/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-06-18T14:33:18Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2154774180",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/13149513?v=4",
                "events_url": "https://api.github.com/users/shadmansaleh/events{/privacy}",
                "followers_url": "https://api.github.com/users/shadmansaleh/followers",
                "following_url": "https://api.github.com/users/shadmansaleh/following{/other_user}",
                "gists_url": "https://api.github.com/users/shadmansaleh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/shadmansaleh",
                "id": 13149513,
                "login": "shadmansaleh",
                "node_id": "MDQ6VXNlcjEzMTQ5NTEz",
                "organizations_url": "https://api.github.com/users/shadmansaleh/orgs",
                "received_events_url": "https://api.github.com/users/shadmansaleh/received_events",
                "repos_url": "https://api.github.com/users/shadmansaleh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/shadmansaleh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/shadmansaleh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/shadmansaleh",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34491#discussion_r2154792541"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34491"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2154792541"
                }
            },
            "author_association": "MEMBER",
            "body": "either SGTM, slightly in favor of `prompt_gettext` since it aligns with `getcmdline()` (whereas `input*()` family of functions usually involves starting a prompt, not getting the current input?)",
            "commit_id": "2a3e4fbfe7637df40872dde58692e9cc4a3188b7",
            "created_at": "2025-06-18T14:40:43Z",
            "diff_hunk": "@@ -8660,24 +8660,12 @@ void eval_fmt_source_name_line(char *buf, size_t bufsize)\n   }\n }\n \n-void invoke_prompt_callback(void)\n+char *get_current_prompt(buf_T *buf)",
            "html_url": "https://github.com/neovim/neovim/pull/34491#discussion_r2154792541",
            "id": 2154792541,
            "in_reply_to_id": 2153367689,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6Ab4Zd",
            "original_commit_id": "bd4a0c10baca8d876d5c9ebc0650fcc28b0fd6e2",
            "original_line": 8663,
            "original_position": 5,
            "original_start_line": null,
            "path": "src/nvim/eval.c",
            "position": null,
            "pull_request_review_id": 2939528778,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34491",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2154792541/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-06-18T14:40:43Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2154792541",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34491#discussion_r2158264441"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34491"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2158264441"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "I think this should go to above the line above `- |stdpath()|`. Because as you can see, lines from `|system()|, |systemlist|` to `|searchcount()|` just document new feature for API that _already exists_ in Vim, not new API. And lines from `|dictwatcheradd()|` to `|stdpath()|` seem to follow alphabetical order",
            "commit_id": "2a3e4fbfe7637df40872dde58692e9cc4a3188b7",
            "created_at": "2025-06-20T07:42:24Z",
            "diff_hunk": "@@ -329,6 +329,7 @@ Functions:\n - |tempname()| tries to recover if the Nvim |tempdir| disappears.\n - |writefile()| with \"p\" flag creates parent directories.\n - |searchcount()|'s maximal value is raised from 99 to 999.\n+- |prompt_gettext()|  gets current user-input in prompt-buffer",
            "html_url": "https://github.com/neovim/neovim/pull/34491#discussion_r2158264441",
            "id": 2158264441,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6ApIB5",
            "original_commit_id": "a14b87c3907d3d8d926d75088f3758170b159da8",
            "original_line": 332,
            "original_position": 4,
            "original_start_line": null,
            "path": "runtime/doc/vim_diff.txt",
            "position": null,
            "pull_request_review_id": 2944890590,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34491",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2158264441/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-06-20T07:42:30Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2158264441",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/111893501?v=4",
                "events_url": "https://api.github.com/users/brianhuster/events{/privacy}",
                "followers_url": "https://api.github.com/users/brianhuster/followers",
                "following_url": "https://api.github.com/users/brianhuster/following{/other_user}",
                "gists_url": "https://api.github.com/users/brianhuster/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/brianhuster",
                "id": 111893501,
                "login": "brianhuster",
                "node_id": "U_kgDOBqtb_Q",
                "organizations_url": "https://api.github.com/users/brianhuster/orgs",
                "received_events_url": "https://api.github.com/users/brianhuster/received_events",
                "repos_url": "https://api.github.com/users/brianhuster/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/brianhuster/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/brianhuster/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/brianhuster",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34491#discussion_r2159102191"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34491"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2159102191"
                }
            },
            "author_association": "MEMBER",
            "body": "Reviewing `prompt_getprompt`, I think that `prompt_getinput` is a better name after all. Because `prompt_getprompt` vs `prompt_gettext` is very ambiguous. \r\n\r\nI will also update the docs for `prompt_getprompt` since \"prompt text\" is very ambiguous.\r\n\r\np.s. I don't really get why `prompt_getprompt` is needed at all. Especially if `':` works properly, `prompt_getprompt` just serves no purpose.",
            "commit_id": "2a3e4fbfe7637df40872dde58692e9cc4a3188b7",
            "created_at": "2025-06-20T14:20:24Z",
            "diff_hunk": "@@ -7561,6 +7561,19 @@ prompt_getprompt({buf})                                     *prompt_getprompt()*\n                 Return: ~\n                   (`any`)\n \n+prompt_gettext({buf})                                         *prompt_gettext()*",
            "html_url": "https://github.com/neovim/neovim/pull/34491#discussion_r2159102191",
            "id": 2159102191,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6AsUjv",
            "original_commit_id": "a14b87c3907d3d8d926d75088f3758170b159da8",
            "original_line": 7564,
            "original_position": 4,
            "original_start_line": null,
            "path": "runtime/doc/vimfn.txt",
            "position": null,
            "pull_request_review_id": 2946350725,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34491",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2159102191/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-06-20T14:20:25Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2159102191",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34491#discussion_r2159104686"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34491"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2159104686"
                }
            },
            "author_association": "MEMBER",
            "body": "this could be 1 or 2 lines in the above test :)",
            "commit_id": "2a3e4fbfe7637df40872dde58692e9cc4a3188b7",
            "created_at": "2025-06-20T14:21:24Z",
            "diff_hunk": "@@ -522,4 +522,30 @@ describe('prompt buffer', function()\n     source('set buftype=')\n     eq(false, pcall(api.nvim_buf_get_mark, 0, ':'))\n   end)\n+\n+  describe('prompt_gettext', function()\n+    it('returns current prompts text', function()\n+      command('new')\n+      local bufnr = fn('bufnr')\n+      api.nvim_set_option_value('buftype', 'prompt', { buf = 0 })\n+      eq('', fn('prompt_gettext', bufnr))\n+      api.nvim_input('iasdf')\n+      eq('asdf', fn('prompt_gettext', bufnr))\n+      api.nvim_input('<esc>dd')\n+      eq('', fn('prompt_gettext', bufnr))\n+      api.nvim_input('iasdf2')\n+      eq('asdf2', fn('prompt_gettext', bufnr))\n+    end)\n+\n+    it('returns empty string when called from non prompt buffer', function()",
            "html_url": "https://github.com/neovim/neovim/pull/34491#discussion_r2159104686",
            "id": 2159104686,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6AsVKu",
            "original_commit_id": "a14b87c3907d3d8d926d75088f3758170b159da8",
            "original_line": 540,
            "original_position": 19,
            "original_start_line": null,
            "path": "test/functional/legacy/prompt_buffer_spec.lua",
            "position": null,
            "pull_request_review_id": 2946356831,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34491",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2159104686/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-06-20T14:21:25Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2159104686",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34491#discussion_r2159292879"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34491"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2159292879"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "let's go with `prompt_getinput`. \r\n\r\n> p.s. I don't really get why prompt_getprompt is needed at all. Especially if ': works properly, prompt_getprompt just serves no purpose.\r\n\r\nI think `prompt_getprompt` is basically a pair of `prompt_setprompt` as getter/setter. Currently, ': gives the start of the prompt not the end of it. Even if we are marking the end of the prompt, it'd require test manipulation where this function directly returns it. Since it's already in for quite a while, I don't see much reason to break it \\_()_/",
            "commit_id": "2a3e4fbfe7637df40872dde58692e9cc4a3188b7",
            "created_at": "2025-06-20T15:53:22Z",
            "diff_hunk": "@@ -7561,6 +7561,19 @@ prompt_getprompt({buf})                                     *prompt_getprompt()*\n                 Return: ~\n                   (`any`)\n \n+prompt_gettext({buf})                                         *prompt_gettext()*",
            "html_url": "https://github.com/neovim/neovim/pull/34491#discussion_r2159292879",
            "id": 2159292879,
            "in_reply_to_id": 2159102191,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6AtDHP",
            "original_commit_id": "a14b87c3907d3d8d926d75088f3758170b159da8",
            "original_line": 7564,
            "original_position": 4,
            "original_start_line": null,
            "path": "runtime/doc/vimfn.txt",
            "position": null,
            "pull_request_review_id": 2946679277,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34491",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2159292879/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-06-20T15:53:22Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2159292879",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/13149513?v=4",
                "events_url": "https://api.github.com/users/shadmansaleh/events{/privacy}",
                "followers_url": "https://api.github.com/users/shadmansaleh/followers",
                "following_url": "https://api.github.com/users/shadmansaleh/following{/other_user}",
                "gists_url": "https://api.github.com/users/shadmansaleh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/shadmansaleh",
                "id": 13149513,
                "login": "shadmansaleh",
                "node_id": "MDQ6VXNlcjEzMTQ5NTEz",
                "organizations_url": "https://api.github.com/users/shadmansaleh/orgs",
                "received_events_url": "https://api.github.com/users/shadmansaleh/received_events",
                "repos_url": "https://api.github.com/users/shadmansaleh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/shadmansaleh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/shadmansaleh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/shadmansaleh",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34491#discussion_r2159756492"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34491"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2159756492"
                }
            },
            "author_association": "MEMBER",
            "body": "These functions are sorted alphabetically, which means this should come between `printf()` and `prompt_getprompt()`.",
            "commit_id": "2a3e4fbfe7637df40872dde58692e9cc4a3188b7",
            "created_at": "2025-06-20T23:21:59Z",
            "diff_hunk": "@@ -8419,6 +8419,21 @@ M.funcs = {\n     params = { { 'buf', 'integer|string' }, { 'text', 'string' } },\n     signature = 'prompt_setprompt({buf}, {text})',\n   },\n+  prompt_getinput = {",
            "html_url": "https://github.com/neovim/neovim/pull/34491#discussion_r2159756492",
            "id": 2159756492,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6Au0TM",
            "original_commit_id": "0162cc8b6392d0a623ebd73e43e363af3f9f02eb",
            "original_line": 8422,
            "original_position": 4,
            "original_start_line": null,
            "path": "src/nvim/eval.lua",
            "position": null,
            "pull_request_review_id": 2947412665,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34491",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2159756492/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-06-20T23:22:34Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2159756492",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34491#discussion_r2161572367"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34491"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2161572367"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n |prompt-buffer| supports multiline input/paste, undo/redo, and o/O normal\r\n  commands.\r\n```",
            "commit_id": "2a3e4fbfe7637df40872dde58692e9cc4a3188b7",
            "created_at": "2025-06-23T13:00:29Z",
            "diff_hunk": "@@ -146,6 +146,11 @@ EDITOR\n  |omnicompletion| in `help` buffer. |ft-help-omni|\n  Setting \"'0\" in 'shada' prevents storing the jumplist in the shada file.\n  'shada' now correctly respects \"/0\" and \"f0\".\n+ Prompt-Buffer:\n+   supports multiline inputs.\n+   supports multiline paste.\n+   supports undo/redo on current prompt.\n+   supports normal o/O operations.",
            "html_url": "https://github.com/neovim/neovim/pull/34491#discussion_r2161572367",
            "id": 2161572367,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6A1voP",
            "original_commit_id": "f3a0b7b12b322dcfacf3d9bbe91248012b0b0ec9",
            "original_line": 153,
            "original_position": 8,
            "original_start_line": 149,
            "path": "runtime/doc/news.txt",
            "position": null,
            "pull_request_review_id": 2950017583,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34491",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2161572367/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-06-23T13:00:30Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2161572367",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34491#discussion_r2161605247"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34491"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2161605247"
                }
            },
            "author_association": "MEMBER",
            "body": "\r\n\r\n```suggestion\r\n- |prompt_getinput()|\r\n```\r\n\r\n",
            "commit_id": "2a3e4fbfe7637df40872dde58692e9cc4a3188b7",
            "created_at": "2025-06-23T13:11:44Z",
            "diff_hunk": "@@ -329,6 +329,7 @@ Functions:\n - |tempname()| tries to recover if the Nvim |tempdir| disappears.\n - |writefile()| with \"p\" flag creates parent directories.\n - |searchcount()|'s maximal value is raised from 99 to 999.\n+- |prompt_getinput()|  gets current user-input in prompt-buffer",
            "html_url": "https://github.com/neovim/neovim/pull/34491#discussion_r2161605247",
            "id": 2161605247,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6A13p_",
            "original_commit_id": "f3a0b7b12b322dcfacf3d9bbe91248012b0b0ec9",
            "original_line": 332,
            "original_position": 4,
            "original_start_line": null,
            "path": "runtime/doc/vim_diff.txt",
            "position": null,
            "pull_request_review_id": 2950081522,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34491",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2161605247/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-06-23T13:11:44Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2161605247",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34491#discussion_r2161610433"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34491"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2161610433"
                }
            },
            "author_association": "MEMBER",
            "body": "single-quotes usually mean \"option\". avoid single quotes. These days backticks are usually used for symbols.\r\n\r\n```suggestion\r\n/// Gets the current user-input in prompt buffer `buf`, or NULL if buffer is not a prompt buffer.\r\n```",
            "commit_id": "2a3e4fbfe7637df40872dde58692e9cc4a3188b7",
            "created_at": "2025-06-23T13:14:17Z",
            "diff_hunk": "@@ -8660,24 +8660,17 @@ void eval_fmt_source_name_line(char *buf, size_t bufsize)\n   }\n }\n \n-void invoke_prompt_callback(void)\n+/// Returns the current user input to the prompt in prompt buffer 'buf'\n+///         if 'buf' is not a prompt buffer then returns NULL.",
            "html_url": "https://github.com/neovim/neovim/pull/34491#discussion_r2161610433",
            "id": 2161610433,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6A147B",
            "original_commit_id": "f3a0b7b12b322dcfacf3d9bbe91248012b0b0ec9",
            "original_line": 8664,
            "original_position": 6,
            "original_start_line": 8663,
            "path": "src/nvim/eval.c",
            "position": null,
            "pull_request_review_id": 2950089914,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34491",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2161610433/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-06-23T13:14:17Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2161610433",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34491#discussion_r2161613200"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34491"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2161613200"
                }
            },
            "author_association": "MEMBER",
            "body": "let's try to use a consistent prefix. also this could be static ?\r\n\r\n```suggestion\r\n/// Invokes the user-defined callback defined for the current prompt-buffer.\r\nvoid prompt_invoke_callback(void)\r\n```",
            "commit_id": "2a3e4fbfe7637df40872dde58692e9cc4a3188b7",
            "created_at": "2025-06-23T13:15:38Z",
            "diff_hunk": "@@ -8687,11 +8680,37 @@ void invoke_prompt_callback(void)\n   for (linenr_T i = lnum_start + 1; i <= lnum_last; i++) {\n     char *half_text = concat_str(full_text, \"\\n\");\n     xfree(full_text);\n-    full_text = concat_str(half_text, ml_get(i));\n+    full_text = concat_str(half_text, ml_get_buf(buf, i));\n     xfree(half_text);\n   }\n+  return full_text;\n+}\n+\n+void invoke_prompt_callback(void)",
            "html_url": "https://github.com/neovim/neovim/pull/34491#discussion_r2161613200",
            "id": 2161613200,
            "line": 8689,
            "node_id": "PRRC_kwDOAPphoM6A15mQ",
            "original_commit_id": "f3a0b7b12b322dcfacf3d9bbe91248012b0b0ec9",
            "original_line": 8689,
            "original_position": 45,
            "original_start_line": null,
            "path": "src/nvim/eval.c",
            "position": 45,
            "pull_request_review_id": 2950094307,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34491",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2161613200/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-06-23T13:15:38Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2161613200",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34491#discussion_r2161615338"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34491"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2161615338"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n      Gets the current user-input in |prompt-buffer| {buf} without invoking\r\n      prompt_callback. {buf} can be a buffer name or number.\r\n```",
            "commit_id": "2a3e4fbfe7637df40872dde58692e9cc4a3188b7",
            "created_at": "2025-06-23T13:16:43Z",
            "diff_hunk": "@@ -8332,6 +8332,21 @@ M.funcs = {\n     signature = 'printf({fmt}, {expr1} ...)',\n     returns = 'string',\n   },\n+  prompt_getinput = {\n+    args = 1,\n+    base = 1,\n+    desc = [=[\n+      Returns the current user input to prompt for buffer {buf} without invoking\n+      prompt_callback. {buf} can be a buffer name or number.  See |prompt-buffer|.",
            "html_url": "https://github.com/neovim/neovim/pull/34491#discussion_r2161615338",
            "id": 2161615338,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6A16Hq",
            "original_commit_id": "f3a0b7b12b322dcfacf3d9bbe91248012b0b0ec9",
            "original_line": 8340,
            "original_position": 9,
            "original_start_line": 8339,
            "path": "src/nvim/eval.lua",
            "position": null,
            "pull_request_review_id": 2950097826,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34491",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2161615338/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-06-23T13:16:44Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2161615338",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34491#discussion_r2161620250"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34491"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2161620250"
                }
            },
            "author_association": "MEMBER",
            "body": "can we add `prompt_getinput` assertions in some of the above tests, e.g. for multiline input",
            "commit_id": "2a3e4fbfe7637df40872dde58692e9cc4a3188b7",
            "created_at": "2025-06-23T13:19:01Z",
            "diff_hunk": "@@ -522,4 +522,23 @@ describe('prompt buffer', function()\n     source('set buftype=')\n     eq(false, pcall(api.nvim_buf_get_mark, 0, ':'))\n   end)\n+\n+  describe('prompt_getinput', function()\n+    it('returns current prompts text', function()\n+      command('new')\n+      local bufnr = fn('bufnr')\n+      api.nvim_set_option_value('buftype', 'prompt', { buf = 0 })\n+      eq('', fn('prompt_getinput', bufnr))\n+      api.nvim_input('iasdf')\n+      eq('asdf', fn('prompt_getinput', bufnr))\n+      api.nvim_input('<esc>dd')\n+      eq('', fn('prompt_getinput', bufnr))\n+      api.nvim_input('iasdf2')\n+      eq('asdf2', fn('prompt_getinput', bufnr))",
            "html_url": "https://github.com/neovim/neovim/pull/34491#discussion_r2161620250",
            "id": 2161620250,
            "line": 577,
            "node_id": "PRRC_kwDOAPphoM6A17Ua",
            "original_commit_id": "f3a0b7b12b322dcfacf3d9bbe91248012b0b0ec9",
            "original_line": 551,
            "original_position": 16,
            "original_start_line": null,
            "path": "test/functional/legacy/prompt_buffer_spec.lua",
            "position": 102,
            "pull_request_review_id": 2950106116,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34491",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2161620250/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-06-23T13:19:01Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2161620250",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34491#discussion_r2161622214"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34491"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2161622214"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\nchar *prompt_get_input(buf_T *buf)\r\n```",
            "commit_id": "2a3e4fbfe7637df40872dde58692e9cc4a3188b7",
            "created_at": "2025-06-23T13:19:56Z",
            "diff_hunk": "@@ -8660,24 +8660,17 @@ void eval_fmt_source_name_line(char *buf, size_t bufsize)\n   }\n }\n \n-void invoke_prompt_callback(void)\n+/// Returns the current user input to the prompt in prompt buffer 'buf'\n+///         if 'buf' is not a prompt buffer then returns NULL.\n+char *prompt_current_input(buf_T *buf)",
            "html_url": "https://github.com/neovim/neovim/pull/34491#discussion_r2161622214",
            "id": 2161622214,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6A17zG",
            "original_commit_id": "f3a0b7b12b322dcfacf3d9bbe91248012b0b0ec9",
            "original_line": 8665,
            "original_position": 7,
            "original_start_line": null,
            "path": "src/nvim/eval.c",
            "position": null,
            "pull_request_review_id": 2950109166,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34491",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2161622214/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-06-23T13:19:57Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2161622214",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34491#discussion_r2161623184"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34491"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2161623184"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n  char *user_input = prompt_current_input(curbuf);\r\n```",
            "commit_id": "2a3e4fbfe7637df40872dde58692e9cc4a3188b7",
            "created_at": "2025-06-23T13:20:23Z",
            "diff_hunk": "@@ -8687,11 +8680,37 @@ void invoke_prompt_callback(void)\n   for (linenr_T i = lnum_start + 1; i <= lnum_last; i++) {\n     char *half_text = concat_str(full_text, \"\\n\");\n     xfree(full_text);\n-    full_text = concat_str(half_text, ml_get(i));\n+    full_text = concat_str(half_text, ml_get_buf(buf, i));\n     xfree(half_text);\n   }\n+  return full_text;\n+}\n+\n+void invoke_prompt_callback(void)\n+{\n+  typval_T rettv;\n+  typval_T argv[2];\n+  linenr_T lnum = curbuf->b_ml.ml_line_count;\n+\n+  char *current_prompt_text = prompt_current_input(curbuf);",
            "html_url": "https://github.com/neovim/neovim/pull/34491#discussion_r2161623184",
            "id": 2161623184,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6A18CQ",
            "original_commit_id": "f3a0b7b12b322dcfacf3d9bbe91248012b0b0ec9",
            "original_line": 8695,
            "original_position": 51,
            "original_start_line": null,
            "path": "src/nvim/eval.c",
            "position": null,
            "pull_request_review_id": 2950110652,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34491",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2161623184/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-06-23T13:20:24Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2161623184",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34491#discussion_r2161807296"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34491"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2161807296"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Do you want me to use prompt_getinput in other tests? or add more scenarios like multiline input in this test-case?",
            "commit_id": "2a3e4fbfe7637df40872dde58692e9cc4a3188b7",
            "created_at": "2025-06-23T14:43:45Z",
            "diff_hunk": "@@ -522,4 +522,23 @@ describe('prompt buffer', function()\n     source('set buftype=')\n     eq(false, pcall(api.nvim_buf_get_mark, 0, ':'))\n   end)\n+\n+  describe('prompt_getinput', function()\n+    it('returns current prompts text', function()\n+      command('new')\n+      local bufnr = fn('bufnr')\n+      api.nvim_set_option_value('buftype', 'prompt', { buf = 0 })\n+      eq('', fn('prompt_getinput', bufnr))\n+      api.nvim_input('iasdf')\n+      eq('asdf', fn('prompt_getinput', bufnr))\n+      api.nvim_input('<esc>dd')\n+      eq('', fn('prompt_getinput', bufnr))\n+      api.nvim_input('iasdf2')\n+      eq('asdf2', fn('prompt_getinput', bufnr))",
            "html_url": "https://github.com/neovim/neovim/pull/34491#discussion_r2161807296",
            "id": 2161807296,
            "in_reply_to_id": 2161620250,
            "line": 577,
            "node_id": "PRRC_kwDOAPphoM6A2o_A",
            "original_commit_id": "f3a0b7b12b322dcfacf3d9bbe91248012b0b0ec9",
            "original_line": 551,
            "original_position": 16,
            "original_start_line": null,
            "path": "test/functional/legacy/prompt_buffer_spec.lua",
            "position": 102,
            "pull_request_review_id": 2950406521,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34491",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2161807296/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-06-23T14:43:45Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2161807296",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/13149513?v=4",
                "events_url": "https://api.github.com/users/shadmansaleh/events{/privacy}",
                "followers_url": "https://api.github.com/users/shadmansaleh/followers",
                "following_url": "https://api.github.com/users/shadmansaleh/following{/other_user}",
                "gists_url": "https://api.github.com/users/shadmansaleh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/shadmansaleh",
                "id": 13149513,
                "login": "shadmansaleh",
                "node_id": "MDQ6VXNlcjEzMTQ5NTEz",
                "organizations_url": "https://api.github.com/users/shadmansaleh/orgs",
                "received_events_url": "https://api.github.com/users/shadmansaleh/received_events",
                "repos_url": "https://api.github.com/users/shadmansaleh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/shadmansaleh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/shadmansaleh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/shadmansaleh",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34491#discussion_r2162000303"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34491"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2162000303"
                }
            },
            "author_association": "MEMBER",
            "body": "> use prompt_getinput in other tests?\r\n\r\nyes\r\n\r\n\r\n\r\n> or add more scenarios like multiline input in this test-case?\r\n\r\nno, otherwise we are repeating every test-case over and over in many places",
            "commit_id": "2a3e4fbfe7637df40872dde58692e9cc4a3188b7",
            "created_at": "2025-06-23T16:18:00Z",
            "diff_hunk": "@@ -522,4 +522,23 @@ describe('prompt buffer', function()\n     source('set buftype=')\n     eq(false, pcall(api.nvim_buf_get_mark, 0, ':'))\n   end)\n+\n+  describe('prompt_getinput', function()\n+    it('returns current prompts text', function()\n+      command('new')\n+      local bufnr = fn('bufnr')\n+      api.nvim_set_option_value('buftype', 'prompt', { buf = 0 })\n+      eq('', fn('prompt_getinput', bufnr))\n+      api.nvim_input('iasdf')\n+      eq('asdf', fn('prompt_getinput', bufnr))\n+      api.nvim_input('<esc>dd')\n+      eq('', fn('prompt_getinput', bufnr))\n+      api.nvim_input('iasdf2')\n+      eq('asdf2', fn('prompt_getinput', bufnr))",
            "html_url": "https://github.com/neovim/neovim/pull/34491#discussion_r2162000303",
            "id": 2162000303,
            "in_reply_to_id": 2161620250,
            "line": 577,
            "node_id": "PRRC_kwDOAPphoM6A3YGv",
            "original_commit_id": "f3a0b7b12b322dcfacf3d9bbe91248012b0b0ec9",
            "original_line": 551,
            "original_position": 16,
            "original_start_line": null,
            "path": "test/functional/legacy/prompt_buffer_spec.lua",
            "position": 102,
            "pull_request_review_id": 2950706206,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34491",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2162000303/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-06-23T16:18:00Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2162000303",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        }
    ],
    "comment_regular_data": [
        {
            "author_association": "MEMBER",
            "body": "Let's keep any new prompt functions in the existing `prompt_xx` \"namespace\", not the Nvim api. I don't think we should spread the \"prompt\" concept into the Nvim api.\r\n\r\nInstead, if we get around to [generalizing](https://github.com/neovim/neovim/issues/30463) \"readonly sections\" in a buffer, then that kind of thing may be relevant in the Nvim api, but not prompt buffers specifically.\r\n\r\nMeanwhile, should we introduce a new `':` mark that tracks the prompt start? That could also be useful in :terminal bufs.",
            "created_at": "2025-06-15T00:10:36Z",
            "html_url": "https://github.com/neovim/neovim/pull/34491#issuecomment-2973384428",
            "id": 2973384428,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34491",
            "node_id": "IC_kwDOAPphoM6xOj7s",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2973384428/reactions"
            },
            "updated_at": "2025-06-15T00:25:53Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2973384428",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "> Let's keep any new prompt functions in the existing prompt_xx \"namespace\", not the Nvim api. I don't think we should spread the \"prompt\" concept into the Nvim api.\r\n\r\nShould I expose it as api just as `prompt_get_prompt_text` ? Or expose it as vim/lua function?\r\n\r\n> Meanwhile, should we introduce a new ': mark that tracks the prompt start? That could also be useful in :terminal bufs.\r\n\r\nSo ': is unsed till now? We can expose the mark that won't be an issue. Originally, I was thinking if we should expose the mark yo user or not\r\n\r\nI think we work out the api plan after #33371 get's finalized.\r\n\r\n",
            "created_at": "2025-06-15T02:18:15Z",
            "html_url": "https://github.com/neovim/neovim/pull/34491#issuecomment-2973435637",
            "id": 2973435637,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34491",
            "node_id": "IC_kwDOAPphoM6xOwb1",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2973435637/reactions"
            },
            "updated_at": "2025-06-15T02:18:15Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2973435637",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/13149513?v=4",
                "events_url": "https://api.github.com/users/shadmansaleh/events{/privacy}",
                "followers_url": "https://api.github.com/users/shadmansaleh/followers",
                "following_url": "https://api.github.com/users/shadmansaleh/following{/other_user}",
                "gists_url": "https://api.github.com/users/shadmansaleh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/shadmansaleh",
                "id": 13149513,
                "login": "shadmansaleh",
                "node_id": "MDQ6VXNlcjEzMTQ5NTEz",
                "organizations_url": "https://api.github.com/users/shadmansaleh/orgs",
                "received_events_url": "https://api.github.com/users/shadmansaleh/received_events",
                "repos_url": "https://api.github.com/users/shadmansaleh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/shadmansaleh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/shadmansaleh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/shadmansaleh",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> Should I expose it as api just as `prompt_get_prompt_text`\r\n\r\nSame as the existing `prompt_` functions, a \"Vimscript\" function. It will be available to Lua via `vim.fn`. This keeps the family of functions in one \"namespace\".\r\n\r\n> So ': is unsed till now?\r\n\r\nYeah. We have several things to choose from , but `':` seems like the best mnemonic.",
            "created_at": "2025-06-16T14:40:54Z",
            "html_url": "https://github.com/neovim/neovim/pull/34491#issuecomment-2976930644",
            "id": 2976930644,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34491",
            "node_id": "IC_kwDOAPphoM6xcFtU",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2976930644/reactions"
            },
            "updated_at": "2025-06-16T14:43:44Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2976930644",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Actually the `prompt_gettext()` name is a bit vague too.",
            "created_at": "2025-06-18T00:11:09Z",
            "html_url": "https://github.com/neovim/neovim/pull/34491#issuecomment-2982178681",
            "id": 2982178681,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34491",
            "node_id": "IC_kwDOAPphoM6xwG95",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2982178681/reactions"
            },
            "updated_at": "2025-06-18T00:11:20Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2982178681",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Please update `vim_diff.txt` as well",
            "created_at": "2025-06-20T00:46:28Z",
            "html_url": "https://github.com/neovim/neovim/pull/34491#issuecomment-2989496902",
            "id": 2989496902,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34491",
            "node_id": "IC_kwDOAPphoM6yMBpG",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2989496902/reactions"
            },
            "updated_at": "2025-06-20T00:46:28Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2989496902",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/111893501?v=4",
                "events_url": "https://api.github.com/users/brianhuster/events{/privacy}",
                "followers_url": "https://api.github.com/users/brianhuster/followers",
                "following_url": "https://api.github.com/users/brianhuster/following{/other_user}",
                "gists_url": "https://api.github.com/users/brianhuster/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/brianhuster",
                "id": 111893501,
                "login": "brianhuster",
                "node_id": "U_kgDOBqtb_Q",
                "organizations_url": "https://api.github.com/users/brianhuster/orgs",
                "received_events_url": "https://api.github.com/users/brianhuster/received_events",
                "repos_url": "https://api.github.com/users/brianhuster/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/brianhuster/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/brianhuster/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/brianhuster",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "> Please update `vim_diff.txt` as well\r\n\r\nif neovim adds a new vim function, does it get added to `vim_diff`?",
            "created_at": "2025-06-20T04:26:53Z",
            "html_url": "https://github.com/neovim/neovim/pull/34491#issuecomment-2989758022",
            "id": 2989758022,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34491",
            "node_id": "IC_kwDOAPphoM6yNBZG",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2989758022/reactions"
            },
            "updated_at": "2025-06-20T04:26:53Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2989758022",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/13149513?v=4",
                "events_url": "https://api.github.com/users/shadmansaleh/events{/privacy}",
                "followers_url": "https://api.github.com/users/shadmansaleh/followers",
                "following_url": "https://api.github.com/users/shadmansaleh/following{/other_user}",
                "gists_url": "https://api.github.com/users/shadmansaleh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/shadmansaleh",
                "id": 13149513,
                "login": "shadmansaleh",
                "node_id": "MDQ6VXNlcjEzMTQ5NTEz",
                "organizations_url": "https://api.github.com/users/shadmansaleh/orgs",
                "received_events_url": "https://api.github.com/users/shadmansaleh/received_events",
                "repos_url": "https://api.github.com/users/shadmansaleh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/shadmansaleh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/shadmansaleh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/shadmansaleh",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "> if neovim adds a new vim function, does it get added to vim_diff?\n\nYes\n\nhttps://github.com/neovim/neovim/blob/927dc3c2c49faeb8be94097d5faa0322928059b1/runtime/doc/vim_diff.txt#L325",
            "created_at": "2025-06-20T04:37:54Z",
            "html_url": "https://github.com/neovim/neovim/pull/34491#issuecomment-2989771466",
            "id": 2989771466,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34491",
            "node_id": "IC_kwDOAPphoM6yNErK",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2989771466/reactions"
            },
            "updated_at": "2025-06-20T04:38:12Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2989771466",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/111893501?v=4",
                "events_url": "https://api.github.com/users/brianhuster/events{/privacy}",
                "followers_url": "https://api.github.com/users/brianhuster/followers",
                "following_url": "https://api.github.com/users/brianhuster/following{/other_user}",
                "gists_url": "https://api.github.com/users/brianhuster/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/brianhuster",
                "id": 111893501,
                "login": "brianhuster",
                "node_id": "U_kgDOBqtb_Q",
                "organizations_url": "https://api.github.com/users/brianhuster/orgs",
                "received_events_url": "https://api.github.com/users/brianhuster/received_events",
                "repos_url": "https://api.github.com/users/brianhuster/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/brianhuster/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/brianhuster/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/brianhuster",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "```\r\nRUN      T3247 lua: nvim_buf_attach on_bytes (with verify) handles test_lockmarks (baseline) %delete _: 1.00 ms OK\r\n==================== File /home/runner/work/neovim/neovim/build/log/asan.17043 ====================\r\n= \r\n= =================================================================\r\n= ==17043==ERROR: LeakSanitizer: detected memory leaks\r\n= \r\n= Direct leak of 2 byte(s) in 2 object(s) allocated from:\r\n=     #0 0x55dd99abbd93 in malloc (/home/runner/work/neovim/neovim/build/bin/nvim+0xd12d93) (BuildId: da35654521ccbf0de43aeadd3cad7d842c265059)\r\n=     #1 0x55dd9a72a184 in try_malloc /home/runner/work/neovim/neovim/src/nvim/memory.c:115:15\r\n=     #2 0x55dd9a72a3e4 in xmalloc /home/runner/work/neovim/neovim/src/nvim/memory.c:149:15\r\n=     #3 0x55dd9a72a7fa in xmallocz /home/runner/work/neovim/neovim/src/nvim/memory.c:221:15\r\n=     #4 0x55dd9a72a933 in xmemdupz /home/runner/work/neovim/neovim/src/nvim/memory.c:239:17\r\n=     #5 0x55dd9a72bcef in xstrdup /home/runner/work/neovim/neovim/src/nvim/memory.c:486:10\r\n=     #6 0x55dd99fe115e in prompt_get_input /home/runner/work/neovim/neovim/src/nvim/eval.c:8678:21\r\n=     #7 0x55dd99fe1523 in invoke_prompt_callback /home/runner/work/neovim/neovim/src/nvim/eval.c:8695:22\r\n=     #8 0x55dd99f633ba in insert_handle_key /home/runner/work/neovim/neovim/src/nvim/edit.c:1081:7\r\n=     #9 0x55dd99f3fbaf in insert_execute /home/runner/work/neovim/neovim/src/nvim/edit.c:707:10\r\n=     #10 0x55dd9ad6271b in state_enter /home/runner/work/neovim/neovim/src/nvim/state.c:102:26\r\n=     #11 0x55dd99f46780 in insert_enter /home/runner/work/neovim/neovim/src/nvim/edit.c:342:5\r\n=     #12 0x55dd99f3c613 in edit /home/runner/work/neovim/neovim/src/nvim/edit.c:1314:3\r\n=     #13 0x55dd9a861d43 in invoke_edit /home/runner/work/neovim/neovim/src/nvim/normal.c:6276:7\r\n=     #14 0x55dd9a83ba20 in nv_edit /home/runner/work/neovim/neovim/src/nvim/normal.c:6248:5\r\n=     #15 0x55dd9a8268dc in normal_execute /home/runner/work/neovim/neovim/src/nvim/normal.c:1246:3\r\n=     #16 0x55dd9ad6271b in state_enter /home/runner/work/neovim/neovim/src/nvim/state.c:102:26\r\n=     #17 0x55dd9a8090f3 in normal_enter /home/runner/work/neovim/neovim/src/nvim/normal.c:523:3\r\n=     #18 0x55dd9a585615 in main /home/runner/work/neovim/neovim/src/nvim/main.c:655:3\r\n=     #19 0x7f6bcc82a1c9 in __libc_start_call_main csu/../sysdeps/nptl/libc_start_call_main.h:58:16\r\n=     #20 0x7f6bcc82a28a in __libc_start_main csu/../csu/libc-start.c:360:3\r\n=     #21 0x55dd99a1bf64 in _start (/home/runner/work/neovim/neovim/build/bin/nvim+0xc72f64) (BuildId: da35654521ccbf0de43aeadd3cad7d842c265059)\r\n= \r\n= SUMMARY: AddressSanitizer: 2 byte(s) leaked in 2 allocation(s).\r\n===================================================================================================\r\nnan ms test/testutil.lua:363: Found runtime errors in logfile(s): /home/runner/work/neovim/neovim/build/log/asan.17043\r\n\r\nstack traceback:\r\n\ttest/testutil.lua:363: in function 'check_logs'\r\n\ttest/functional/testnvim.lua:1015: in function <test/functional/testnvim.lua:1014\r\n```",
            "created_at": "2025-06-23T23:10:37Z",
            "html_url": "https://github.com/neovim/neovim/pull/34491#issuecomment-2998245750",
            "id": 2998245750,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34491",
            "node_id": "IC_kwDOAPphoM6ytZl2",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 1,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2998245750/reactions"
            },
            "updated_at": "2025-06-23T23:10:37Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2998245750",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        }
    ],
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/34491/comments",
    "commits_url": "https://api.github.com/repos/neovim/neovim/pulls/34491/commits",
    "created_at": "2025-06-14T05:32:05Z",
    "diff_url": "https://github.com/neovim/neovim/pull/34491.diff",
    "draft": false,
    "head": {
        "label": "shadmansaleh:feat/nvim_buf_get_prompt_text",
        "ref": "feat/nvim_buf_get_prompt_text",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/shadmansaleh/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/shadmansaleh/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/shadmansaleh/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/shadmansaleh/neovim/branches{/branch}",
            "clone_url": "https://github.com/shadmansaleh/neovim.git",
            "collaborators_url": "https://api.github.com/repos/shadmansaleh/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/shadmansaleh/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/shadmansaleh/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/shadmansaleh/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/shadmansaleh/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/shadmansaleh/neovim/contributors",
            "created_at": "2021-03-16T15:07:33Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/shadmansaleh/neovim/deployments",
            "description": "Vim-fork focused on extensibility and usability",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/shadmansaleh/neovim/downloads",
            "events_url": "https://api.github.com/repos/shadmansaleh/neovim/events",
            "fork": true,
            "forks": 0,
            "forks_count": 0,
            "forks_url": "https://api.github.com/repos/shadmansaleh/neovim/forks",
            "full_name": "shadmansaleh/neovim",
            "git_commits_url": "https://api.github.com/repos/shadmansaleh/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/shadmansaleh/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/shadmansaleh/neovim/git/tags{/sha}",
            "git_url": "git://github.com/shadmansaleh/neovim.git",
            "has_discussions": false,
            "has_downloads": true,
            "has_issues": false,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://neovim.io",
            "hooks_url": "https://api.github.com/repos/shadmansaleh/neovim/hooks",
            "html_url": "https://github.com/shadmansaleh/neovim",
            "id": 348391941,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/shadmansaleh/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/shadmansaleh/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/shadmansaleh/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/shadmansaleh/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/shadmansaleh/neovim/labels{/name}",
            "language": "Vim Script",
            "languages_url": "https://api.github.com/repos/shadmansaleh/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/shadmansaleh/neovim/merges",
            "milestones_url": "https://api.github.com/repos/shadmansaleh/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "MDEwOlJlcG9zaXRvcnkzNDgzOTE5NDE=",
            "notifications_url": "https://api.github.com/repos/shadmansaleh/neovim/notifications{?since,all,participating}",
            "open_issues": 0,
            "open_issues_count": 0,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/13149513?v=4",
                "events_url": "https://api.github.com/users/shadmansaleh/events{/privacy}",
                "followers_url": "https://api.github.com/users/shadmansaleh/followers",
                "following_url": "https://api.github.com/users/shadmansaleh/following{/other_user}",
                "gists_url": "https://api.github.com/users/shadmansaleh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/shadmansaleh",
                "id": 13149513,
                "login": "shadmansaleh",
                "node_id": "MDQ6VXNlcjEzMTQ5NTEz",
                "organizations_url": "https://api.github.com/users/shadmansaleh/orgs",
                "received_events_url": "https://api.github.com/users/shadmansaleh/received_events",
                "repos_url": "https://api.github.com/users/shadmansaleh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/shadmansaleh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/shadmansaleh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/shadmansaleh",
                "user_view_type": "public"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/shadmansaleh/neovim/pulls{/number}",
            "pushed_at": "2025-06-24T01:01:45Z",
            "releases_url": "https://api.github.com/repos/shadmansaleh/neovim/releases{/id}",
            "size": 321605,
            "ssh_url": "git@github.com:shadmansaleh/neovim.git",
            "stargazers_count": 0,
            "stargazers_url": "https://api.github.com/repos/shadmansaleh/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/shadmansaleh/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/shadmansaleh/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/shadmansaleh/neovim/subscription",
            "svn_url": "https://github.com/shadmansaleh/neovim",
            "tags_url": "https://api.github.com/repos/shadmansaleh/neovim/tags",
            "teams_url": "https://api.github.com/repos/shadmansaleh/neovim/teams",
            "topics": [],
            "trees_url": "https://api.github.com/repos/shadmansaleh/neovim/git/trees{/sha}",
            "updated_at": "2025-06-23T14:28:00Z",
            "url": "https://api.github.com/repos/shadmansaleh/neovim",
            "visibility": "public",
            "watchers": 0,
            "watchers_count": 0,
            "web_commit_signoff_required": false
        },
        "sha": "2a3e4fbfe7637df40872dde58692e9cc4a3188b7",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/13149513?v=4",
            "events_url": "https://api.github.com/users/shadmansaleh/events{/privacy}",
            "followers_url": "https://api.github.com/users/shadmansaleh/followers",
            "following_url": "https://api.github.com/users/shadmansaleh/following{/other_user}",
            "gists_url": "https://api.github.com/users/shadmansaleh/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/shadmansaleh",
            "id": 13149513,
            "login": "shadmansaleh",
            "node_id": "MDQ6VXNlcjEzMTQ5NTEz",
            "organizations_url": "https://api.github.com/users/shadmansaleh/orgs",
            "received_events_url": "https://api.github.com/users/shadmansaleh/received_events",
            "repos_url": "https://api.github.com/users/shadmansaleh/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/shadmansaleh/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/shadmansaleh/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/shadmansaleh",
            "user_view_type": "public"
        }
    },
    "html_url": "https://github.com/neovim/neovim/pull/34491",
    "id": 2591948434,
    "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34491",
    "labels": [
        {
            "color": "F3A62E",
            "default": false,
            "description": "community: Google Summer of Code project",
            "id": 834483397,
            "name": "gsoc",
            "node_id": "MDU6TGFiZWw4MzQ0ODMzOTc=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/gsoc"
        }
    ],
    "locked": false,
    "merge_commit_sha": "636680b60c2d15cc3d1338628c92864a9c51be6d",
    "merged_at": null,
    "milestone": null,
    "node_id": "PR_kwDOAPphoM6aff6S",
    "number": 34491,
    "patch_url": "https://github.com/neovim/neovim/pull/34491.patch",
    "requested_reviewers": [],
    "requested_teams": [],
    "review_comment_url": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}",
    "review_comments_url": "https://api.github.com/repos/neovim/neovim/pulls/34491/comments",
    "state": "open",
    "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/2a3e4fbfe7637df40872dde58692e9cc4a3188b7",
    "title": "feat(prompt): prompt_getinput() gets current input",
    "updated_at": "2025-06-24T01:01:47Z",
    "url": "https://api.github.com/repos/neovim/neovim/pulls/34491",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/13149513?v=4",
        "events_url": "https://api.github.com/users/shadmansaleh/events{/privacy}",
        "followers_url": "https://api.github.com/users/shadmansaleh/followers",
        "following_url": "https://api.github.com/users/shadmansaleh/following{/other_user}",
        "gists_url": "https://api.github.com/users/shadmansaleh/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/shadmansaleh",
        "id": 13149513,
        "login": "shadmansaleh",
        "node_id": "MDQ6VXNlcjEzMTQ5NTEz",
        "organizations_url": "https://api.github.com/users/shadmansaleh/orgs",
        "received_events_url": "https://api.github.com/users/shadmansaleh/received_events",
        "repos_url": "https://api.github.com/users/shadmansaleh/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/shadmansaleh/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/shadmansaleh/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/shadmansaleh",
        "user_view_type": "public"
    }
}