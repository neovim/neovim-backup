{
    "_links": {
        "comments": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/35729/comments"
        },
        "commits": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/35729/commits"
        },
        "html": {
            "href": "https://github.com/neovim/neovim/pull/35729"
        },
        "issue": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/35729"
        },
        "review_comment": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}"
        },
        "review_comments": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/35729/comments"
        },
        "self": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/35729"
        },
        "statuses": {
            "href": "https://api.github.com/repos/neovim/neovim/statuses/562d28f9855df4a600da911ab497c37ed0e715c7"
        }
    },
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "MEMBER",
    "auto_merge": null,
    "base": {
        "label": "neovim:master",
        "ref": "master",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/neovim/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/neovim/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/neovim/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/neovim/neovim/branches{/branch}",
            "clone_url": "https://github.com/neovim/neovim.git",
            "collaborators_url": "https://api.github.com/repos/neovim/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/neovim/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/neovim/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/neovim/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/neovim/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/neovim/neovim/contributors",
            "created_at": "2014-01-31T13:39:22Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/neovim/neovim/deployments",
            "description": "Vim-fork focused on extensibility and usability",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/neovim/neovim/downloads",
            "events_url": "https://api.github.com/repos/neovim/neovim/events",
            "fork": false,
            "forks": 6358,
            "forks_count": 6358,
            "forks_url": "https://api.github.com/repos/neovim/neovim/forks",
            "full_name": "neovim/neovim",
            "git_commits_url": "https://api.github.com/repos/neovim/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/neovim/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/neovim/neovim/git/tags{/sha}",
            "git_url": "git://github.com/neovim/neovim.git",
            "has_discussions": true,
            "has_downloads": true,
            "has_issues": true,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://neovim.io",
            "hooks_url": "https://api.github.com/repos/neovim/neovim/hooks",
            "html_url": "https://github.com/neovim/neovim",
            "id": 16408992,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/neovim/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/neovim/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/neovim/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/neovim/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/neovim/neovim/labels{/name}",
            "language": "Vim Script",
            "languages_url": "https://api.github.com/repos/neovim/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/neovim/neovim/merges",
            "milestones_url": "https://api.github.com/repos/neovim/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "MDEwOlJlcG9zaXRvcnkxNjQwODk5Mg==",
            "notifications_url": "https://api.github.com/repos/neovim/neovim/notifications{?since,all,participating}",
            "open_issues": 2001,
            "open_issues_count": 2001,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
                "events_url": "https://api.github.com/users/neovim/events{/privacy}",
                "followers_url": "https://api.github.com/users/neovim/followers",
                "following_url": "https://api.github.com/users/neovim/following{/other_user}",
                "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/neovim",
                "id": 6471485,
                "login": "neovim",
                "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
                "organizations_url": "https://api.github.com/users/neovim/orgs",
                "received_events_url": "https://api.github.com/users/neovim/received_events",
                "repos_url": "https://api.github.com/users/neovim/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
                "type": "Organization",
                "url": "https://api.github.com/users/neovim",
                "user_view_type": "public"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/neovim/neovim/pulls{/number}",
            "pushed_at": "2025-10-14T02:23:27Z",
            "releases_url": "https://api.github.com/repos/neovim/neovim/releases{/id}",
            "size": 347842,
            "ssh_url": "git@github.com:neovim/neovim.git",
            "stargazers_count": 93440,
            "stargazers_url": "https://api.github.com/repos/neovim/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/neovim/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/neovim/neovim/subscription",
            "svn_url": "https://github.com/neovim/neovim",
            "tags_url": "https://api.github.com/repos/neovim/neovim/tags",
            "teams_url": "https://api.github.com/repos/neovim/neovim/teams",
            "topics": [
                "api",
                "c",
                "lua",
                "neovim",
                "nvim",
                "text-editor",
                "vim"
            ],
            "trees_url": "https://api.github.com/repos/neovim/neovim/git/trees{/sha}",
            "updated_at": "2025-10-14T02:23:32Z",
            "url": "https://api.github.com/repos/neovim/neovim",
            "visibility": "public",
            "watchers": 93440,
            "watchers_count": 93440,
            "web_commit_signoff_required": false
        },
        "sha": "bc2fe135d11865b8ac33214e351312f5f454c4e8",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
            "events_url": "https://api.github.com/users/neovim/events{/privacy}",
            "followers_url": "https://api.github.com/users/neovim/followers",
            "following_url": "https://api.github.com/users/neovim/following{/other_user}",
            "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/neovim",
            "id": 6471485,
            "login": "neovim",
            "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
            "organizations_url": "https://api.github.com/users/neovim/orgs",
            "received_events_url": "https://api.github.com/users/neovim/received_events",
            "repos_url": "https://api.github.com/users/neovim/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
            "type": "Organization",
            "url": "https://api.github.com/users/neovim",
            "user_view_type": "public"
        }
    },
    "body": "Problem: The window is missing a scrollbar.\r\n\r\nSolution: Implement a scrollbar for the window and\r\nadd a window-local scrollbar option to control it\r\n\r\n\r\n![test4](https://github.com/user-attachments/assets/a9c7f7df-425c-4fc1-a14d-ddb542a84010)\r\n\r\n<img width=\"598\" height=\"556\" alt=\"image\" src=\"https://github.com/user-attachments/assets/4e3c8bdd-c80e-49f8-88bb-43977b4447d3\" />\r\n\r\n<img width=\"1158\" height=\"998\" alt=\"image\" src=\"https://github.com/user-attachments/assets/3df3529b-c039-4b8a-b39d-aa4c00619b33\" />\r\n",
    "closed_at": null,
    "comment_data": [
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/35729#discussion_r2344988404"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/35729"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2344988404"
                }
            },
            "author_association": "MEMBER",
            "body": "There is no reason for this hl group to be float-specific. Obviously we want scrollbars for all windows, eventually.",
            "commit_id": "972623e19bdfd22678135ec11a868257af5736dc",
            "created_at": "2025-09-12T17:23:56Z",
            "diff_hunk": "@@ -3898,6 +3898,10 @@ nvim_open_win({buffer}, {enter}, {config})                   *nvim_open_win()*\n                   • _cmdline_offset: (EXPERIMENTAL) When provided, anchor the\n                     |cmdline-completion| popupmenu to this window, with an\n                     offset in screen cell width.\n+                  • scrollbar: If true then display scrollbar on the right\n+                    border. |hl-FloatSbarThumb| highlight is used. Requires",
            "html_url": "https://github.com/neovim/neovim/pull/35729#discussion_r2344988404",
            "id": 2344988404,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6Lxa70",
            "original_commit_id": "330fc87d563777b4cf36ba392346b1af0250c0a1",
            "original_line": 3902,
            "original_position": 5,
            "original_start_line": null,
            "path": "runtime/doc/api.txt",
            "position": 1,
            "pull_request_review_id": 3218007480,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/35729",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2344988404/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-09-12T17:23:57Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2344988404",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/35729#discussion_r2345919012"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/35729"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2345919012"
                }
            },
            "author_association": "MEMBER",
            "body": "`ScrollbarThumb` or `SbarThumb` or something you would recommend",
            "commit_id": "972623e19bdfd22678135ec11a868257af5736dc",
            "created_at": "2025-09-13T05:42:16Z",
            "diff_hunk": "@@ -3898,6 +3898,10 @@ nvim_open_win({buffer}, {enter}, {config})                   *nvim_open_win()*\n                   • _cmdline_offset: (EXPERIMENTAL) When provided, anchor the\n                     |cmdline-completion| popupmenu to this window, with an\n                     offset in screen cell width.\n+                  • scrollbar: If true then display scrollbar on the right\n+                    border. |hl-FloatSbarThumb| highlight is used. Requires",
            "html_url": "https://github.com/neovim/neovim/pull/35729#discussion_r2345919012",
            "id": 2345919012,
            "in_reply_to_id": 2344988404,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6L0-Ik",
            "original_commit_id": "330fc87d563777b4cf36ba392346b1af0250c0a1",
            "original_line": 3902,
            "original_position": 5,
            "original_start_line": null,
            "path": "runtime/doc/api.txt",
            "position": 1,
            "pull_request_review_id": 3219600986,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/35729",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2345919012/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-09-13T05:42:16Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2345919012",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/35729#discussion_r2346925408"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/35729"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2346925408"
                }
            },
            "author_association": "MEMBER",
            "body": "since `hl-PmenuThumb` and `hl-Scrollbar` already exist, I guess if we need a more generalized \"thumb\" hl, it should be called `ScrollbarThumb`.",
            "commit_id": "972623e19bdfd22678135ec11a868257af5736dc",
            "created_at": "2025-09-13T20:00:11Z",
            "diff_hunk": "@@ -3898,6 +3898,10 @@ nvim_open_win({buffer}, {enter}, {config})                   *nvim_open_win()*\n                   • _cmdline_offset: (EXPERIMENTAL) When provided, anchor the\n                     |cmdline-completion| popupmenu to this window, with an\n                     offset in screen cell width.\n+                  • scrollbar: If true then display scrollbar on the right\n+                    border. |hl-FloatSbarThumb| highlight is used. Requires",
            "html_url": "https://github.com/neovim/neovim/pull/35729#discussion_r2346925408",
            "id": 2346925408,
            "in_reply_to_id": 2344988404,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6L4z1g",
            "original_commit_id": "330fc87d563777b4cf36ba392346b1af0250c0a1",
            "original_line": 3902,
            "original_position": 5,
            "original_start_line": null,
            "path": "runtime/doc/api.txt",
            "position": 1,
            "pull_request_review_id": 3221313998,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/35729",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2346925408/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-09-13T20:00:11Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2346925408",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/35729#discussion_r2347177565"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/35729"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2347177565"
                }
            },
            "author_association": "MEMBER",
            "body": "since we want any window to be able to have a scrollbar in future, so add these two fields used later to determine whether a window has a scrollbar and whether it should be displayed.",
            "commit_id": "972623e19bdfd22678135ec11a868257af5736dc",
            "created_at": "2025-09-14T07:56:40Z",
            "diff_hunk": "@@ -1373,4 +1374,7 @@ struct window_S {\n   size_t w_winbar_click_defs_size;              // Size of the w_winbar_click_defs array\n   StlClickDefinition *w_statuscol_click_defs;   // Status column click definitions\n   size_t w_statuscol_click_defs_size;           // Size of the w_statuscol_click_defs array\n+                                                //\n+  bool w_want_scrollbar;                // when false don't use a scrollbar",
            "html_url": "https://github.com/neovim/neovim/pull/35729#discussion_r2347177565",
            "id": 2347177565,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6L5xZd",
            "original_commit_id": "efa816ae41bdfb757588698b0a0d7248aa500dd3",
            "original_line": 1378,
            "original_position": 13,
            "original_start_line": null,
            "path": "src/nvim/buffer_defs.h",
            "position": 1,
            "pull_request_review_id": 3221887385,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/35729",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2347177565/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-09-14T08:27:55Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2347177565",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/35729#discussion_r2347181444"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/35729"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2347181444"
                }
            },
            "author_association": "MEMBER",
            "body": "add the scrollbar information into the dict of this win in `v:event`, print it in callback of `WinScrolled` \r\n```\r\n  [\"1001\"] = {\r\n    height = 0,\r\n    leftcol = 0,\r\n    scrollbar = true,\r\n    scrollbar_info = {\r\n      screen_col = 23,\r\n      screen_row = 2,\r\n      thumb_pos = 0,\r\n      thumb_size = 1\r\n    },\r\n    skipcol = 0,\r\n    topfill = 0,\r\n    topline = 8,\r\n    width = 0\r\n  },\r\n```",
            "commit_id": "972623e19bdfd22678135ec11a868257af5736dc",
            "created_at": "2025-09-14T08:07:47Z",
            "diff_hunk": "@@ -5780,11 +5801,17 @@ void may_trigger_win_scrolled_resized(void)\n \n     // Move the entries from scroll_dict to v_event.\n     tv_dict_extend(v_event, scroll_dict, \"move\");\n-    tv_dict_set_keys_readonly(v_event);\n-    tv_dict_unref(scroll_dict);\n-\n     char winid[NUMBUFLEN];\n     vim_snprintf(winid, sizeof(winid), \"%d\", first_scroll_win->handle);\n+    if (first_scroll_win->w_want_scrollbar) {\n+      dictitem_T *di = tv_dict_find(v_event, winid, -1);\n+      if (di != NULL && di->di_tv.v_type == VAR_DICT) {\n+        dict_T *win_dict = di->di_tv.vval.v_dict;\n+        set_event_scrollbar_info(first_scroll_win, win_dict);",
            "html_url": "https://github.com/neovim/neovim/pull/35729#discussion_r2347181444",
            "id": 2347181444,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6L5yWE",
            "original_commit_id": "266dad52a470d005ce1c0f37854eb2754e622a4f",
            "original_line": 5810,
            "original_position": 41,
            "original_start_line": null,
            "path": "src/nvim/window.c",
            "position": 1,
            "pull_request_review_id": 3221895935,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/35729",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2347181444/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-09-14T10:48:51Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2347181444",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/35729#discussion_r2347526311"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/35729"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2347526311"
                }
            },
            "author_association": "MEMBER",
            "body": "what is the minimum info needed for plugins to (easily) draw a correct scrollbar? anything that is easy to calculate or available via other APIs, we may not want to include. cc @lewis6991 @dstein64 @petertriho",
            "commit_id": "972623e19bdfd22678135ec11a868257af5736dc",
            "created_at": "2025-09-14T19:33:24Z",
            "diff_hunk": "@@ -5780,11 +5801,17 @@ void may_trigger_win_scrolled_resized(void)\n \n     // Move the entries from scroll_dict to v_event.\n     tv_dict_extend(v_event, scroll_dict, \"move\");\n-    tv_dict_set_keys_readonly(v_event);\n-    tv_dict_unref(scroll_dict);\n-\n     char winid[NUMBUFLEN];\n     vim_snprintf(winid, sizeof(winid), \"%d\", first_scroll_win->handle);\n+    if (first_scroll_win->w_want_scrollbar) {\n+      dictitem_T *di = tv_dict_find(v_event, winid, -1);\n+      if (di != NULL && di->di_tv.v_type == VAR_DICT) {\n+        dict_T *win_dict = di->di_tv.vval.v_dict;\n+        set_event_scrollbar_info(first_scroll_win, win_dict);",
            "html_url": "https://github.com/neovim/neovim/pull/35729#discussion_r2347526311",
            "id": 2347526311,
            "in_reply_to_id": 2347181444,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6L7Gin",
            "original_commit_id": "266dad52a470d005ce1c0f37854eb2754e622a4f",
            "original_line": 5810,
            "original_position": 41,
            "original_start_line": null,
            "path": "src/nvim/window.c",
            "position": 1,
            "pull_request_review_id": 3222375909,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/35729",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2347526311/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-09-14T19:33:55Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2347526311",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/35729#discussion_r2348151747"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/35729"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2348151747"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "the information I used in the past was: visible lines in the window (basically height), top line visible, total lines",
            "commit_id": "972623e19bdfd22678135ec11a868257af5736dc",
            "created_at": "2025-09-15T07:51:25Z",
            "diff_hunk": "@@ -5780,11 +5801,17 @@ void may_trigger_win_scrolled_resized(void)\n \n     // Move the entries from scroll_dict to v_event.\n     tv_dict_extend(v_event, scroll_dict, \"move\");\n-    tv_dict_set_keys_readonly(v_event);\n-    tv_dict_unref(scroll_dict);\n-\n     char winid[NUMBUFLEN];\n     vim_snprintf(winid, sizeof(winid), \"%d\", first_scroll_win->handle);\n+    if (first_scroll_win->w_want_scrollbar) {\n+      dictitem_T *di = tv_dict_find(v_event, winid, -1);\n+      if (di != NULL && di->di_tv.v_type == VAR_DICT) {\n+        dict_T *win_dict = di->di_tv.vval.v_dict;\n+        set_event_scrollbar_info(first_scroll_win, win_dict);",
            "html_url": "https://github.com/neovim/neovim/pull/35729#discussion_r2348151747",
            "id": 2348151747,
            "in_reply_to_id": 2347181444,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6L9fPD",
            "original_commit_id": "266dad52a470d005ce1c0f37854eb2754e622a4f",
            "original_line": 5810,
            "original_position": 41,
            "original_start_line": null,
            "path": "src/nvim/window.c",
            "position": 1,
            "pull_request_review_id": 3223316853,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/35729",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2348151747/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-09-15T07:51:25Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2348151747",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/81827001?v=4",
                "events_url": "https://api.github.com/users/max397574/events{/privacy}",
                "followers_url": "https://api.github.com/users/max397574/followers",
                "following_url": "https://api.github.com/users/max397574/following{/other_user}",
                "gists_url": "https://api.github.com/users/max397574/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/max397574",
                "id": 81827001,
                "login": "max397574",
                "node_id": "MDQ6VXNlcjgxODI3MDAx",
                "organizations_url": "https://api.github.com/users/max397574/orgs",
                "received_events_url": "https://api.github.com/users/max397574/received_events",
                "repos_url": "https://api.github.com/users/max397574/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/max397574/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/max397574/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/max397574",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/35729#discussion_r2348255178"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/35729"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2348255178"
                }
            },
            "author_association": "MEMBER",
            "body": "I'd want to know the relative size of the scrollbar and its position. Not absolute co-ordinates. I'd also want a function that takes a line number and gives me the relative scrollbar position (as a %).\n\nDoes this information take folding into account? The logic I had to implement for this was quite complex and needed to be cached for acceptable performance, and even calculated this over several event loop iterations if needed.",
            "commit_id": "972623e19bdfd22678135ec11a868257af5736dc",
            "created_at": "2025-09-15T08:33:47Z",
            "diff_hunk": "@@ -5780,11 +5801,17 @@ void may_trigger_win_scrolled_resized(void)\n \n     // Move the entries from scroll_dict to v_event.\n     tv_dict_extend(v_event, scroll_dict, \"move\");\n-    tv_dict_set_keys_readonly(v_event);\n-    tv_dict_unref(scroll_dict);\n-\n     char winid[NUMBUFLEN];\n     vim_snprintf(winid, sizeof(winid), \"%d\", first_scroll_win->handle);\n+    if (first_scroll_win->w_want_scrollbar) {\n+      dictitem_T *di = tv_dict_find(v_event, winid, -1);\n+      if (di != NULL && di->di_tv.v_type == VAR_DICT) {\n+        dict_T *win_dict = di->di_tv.vval.v_dict;\n+        set_event_scrollbar_info(first_scroll_win, win_dict);",
            "html_url": "https://github.com/neovim/neovim/pull/35729#discussion_r2348255178",
            "id": 2348255178,
            "in_reply_to_id": 2347181444,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6L94fK",
            "original_commit_id": "266dad52a470d005ce1c0f37854eb2754e622a4f",
            "original_line": 5810,
            "original_position": 41,
            "original_start_line": null,
            "path": "src/nvim/window.c",
            "position": 1,
            "pull_request_review_id": 3223470866,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/35729",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2348255178/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-09-15T08:33:47Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2348255178",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/7904185?v=4",
                "events_url": "https://api.github.com/users/lewis6991/events{/privacy}",
                "followers_url": "https://api.github.com/users/lewis6991/followers",
                "following_url": "https://api.github.com/users/lewis6991/following{/other_user}",
                "gists_url": "https://api.github.com/users/lewis6991/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/lewis6991",
                "id": 7904185,
                "login": "lewis6991",
                "node_id": "MDQ6VXNlcjc5MDQxODU=",
                "organizations_url": "https://api.github.com/users/lewis6991/orgs",
                "received_events_url": "https://api.github.com/users/lewis6991/received_events",
                "repos_url": "https://api.github.com/users/lewis6991/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/lewis6991/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lewis6991/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/lewis6991",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/35729#discussion_r2348334275"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/35729"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2348334275"
                }
            },
            "author_association": "MEMBER",
            "body": " plines_m_win to calculate the number of content lines for the scrollbar slider. folding has already been handled in it.",
            "commit_id": "972623e19bdfd22678135ec11a868257af5736dc",
            "created_at": "2025-09-15T09:03:42Z",
            "diff_hunk": "@@ -5780,11 +5801,17 @@ void may_trigger_win_scrolled_resized(void)\n \n     // Move the entries from scroll_dict to v_event.\n     tv_dict_extend(v_event, scroll_dict, \"move\");\n-    tv_dict_set_keys_readonly(v_event);\n-    tv_dict_unref(scroll_dict);\n-\n     char winid[NUMBUFLEN];\n     vim_snprintf(winid, sizeof(winid), \"%d\", first_scroll_win->handle);\n+    if (first_scroll_win->w_want_scrollbar) {\n+      dictitem_T *di = tv_dict_find(v_event, winid, -1);\n+      if (di != NULL && di->di_tv.v_type == VAR_DICT) {\n+        dict_T *win_dict = di->di_tv.vval.v_dict;\n+        set_event_scrollbar_info(first_scroll_win, win_dict);",
            "html_url": "https://github.com/neovim/neovim/pull/35729#discussion_r2348334275",
            "id": 2348334275,
            "in_reply_to_id": 2347181444,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6L-LzD",
            "original_commit_id": "266dad52a470d005ce1c0f37854eb2754e622a4f",
            "original_line": 5810,
            "original_position": 41,
            "original_start_line": null,
            "path": "src/nvim/window.c",
            "position": 1,
            "pull_request_review_id": 3223591696,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/35729",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2348334275/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-09-15T09:03:43Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2348334275",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/35729#discussion_r2348414470"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/35729"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2348414470"
                }
            },
            "author_association": "MEMBER",
            "body": "`plines_m_win` is just for the entire buffer though right? You still need another plines calculation for the scrollbar position and size (or start and end), but also you'd need to do it for:\r\n\r\n> I'd also want a function that takes a line number and gives me the relative scrollbar position (as a %).",
            "commit_id": "972623e19bdfd22678135ec11a868257af5736dc",
            "created_at": "2025-09-15T09:35:16Z",
            "diff_hunk": "@@ -5780,11 +5801,17 @@ void may_trigger_win_scrolled_resized(void)\n \n     // Move the entries from scroll_dict to v_event.\n     tv_dict_extend(v_event, scroll_dict, \"move\");\n-    tv_dict_set_keys_readonly(v_event);\n-    tv_dict_unref(scroll_dict);\n-\n     char winid[NUMBUFLEN];\n     vim_snprintf(winid, sizeof(winid), \"%d\", first_scroll_win->handle);\n+    if (first_scroll_win->w_want_scrollbar) {\n+      dictitem_T *di = tv_dict_find(v_event, winid, -1);\n+      if (di != NULL && di->di_tv.v_type == VAR_DICT) {\n+        dict_T *win_dict = di->di_tv.vval.v_dict;\n+        set_event_scrollbar_info(first_scroll_win, win_dict);",
            "html_url": "https://github.com/neovim/neovim/pull/35729#discussion_r2348414470",
            "id": 2348414470,
            "in_reply_to_id": 2347181444,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6L-fYG",
            "original_commit_id": "266dad52a470d005ce1c0f37854eb2754e622a4f",
            "original_line": 5810,
            "original_position": 41,
            "original_start_line": null,
            "path": "src/nvim/window.c",
            "position": 1,
            "pull_request_review_id": 3223711849,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/35729",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2348414470/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-09-15T09:35:43Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2348414470",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/7904185?v=4",
                "events_url": "https://api.github.com/users/lewis6991/events{/privacy}",
                "followers_url": "https://api.github.com/users/lewis6991/followers",
                "following_url": "https://api.github.com/users/lewis6991/following{/other_user}",
                "gists_url": "https://api.github.com/users/lewis6991/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/lewis6991",
                "id": 7904185,
                "login": "lewis6991",
                "node_id": "MDQ6VXNlcjc5MDQxODU=",
                "organizations_url": "https://api.github.com/users/lewis6991/orgs",
                "received_events_url": "https://api.github.com/users/lewis6991/received_events",
                "repos_url": "https://api.github.com/users/lewis6991/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/lewis6991/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lewis6991/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/lewis6991",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/35729#discussion_r2348434217"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/35729"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2348434217"
                }
            },
            "author_association": "MEMBER",
            "body": " win_update_scrollbar_state already do it \r\n```\r\n    int scroll_offset = wp->w_p_wrap\r\n                        ? plines_m_win(wp, 1, wp->w_topline - 1, INT_MAX) : (wp->w_topline - 1);\r\n```\r\n\r\n> I'd also want a function that takes a line number and gives me the relative scrollbar position (as a %).\r\n\r\nseems like need export an api function ",
            "commit_id": "972623e19bdfd22678135ec11a868257af5736dc",
            "created_at": "2025-09-15T09:42:51Z",
            "diff_hunk": "@@ -5780,11 +5801,17 @@ void may_trigger_win_scrolled_resized(void)\n \n     // Move the entries from scroll_dict to v_event.\n     tv_dict_extend(v_event, scroll_dict, \"move\");\n-    tv_dict_set_keys_readonly(v_event);\n-    tv_dict_unref(scroll_dict);\n-\n     char winid[NUMBUFLEN];\n     vim_snprintf(winid, sizeof(winid), \"%d\", first_scroll_win->handle);\n+    if (first_scroll_win->w_want_scrollbar) {\n+      dictitem_T *di = tv_dict_find(v_event, winid, -1);\n+      if (di != NULL && di->di_tv.v_type == VAR_DICT) {\n+        dict_T *win_dict = di->di_tv.vval.v_dict;\n+        set_event_scrollbar_info(first_scroll_win, win_dict);",
            "html_url": "https://github.com/neovim/neovim/pull/35729#discussion_r2348434217",
            "id": 2348434217,
            "in_reply_to_id": 2347181444,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6L-kMp",
            "original_commit_id": "266dad52a470d005ce1c0f37854eb2754e622a4f",
            "original_line": 5810,
            "original_position": 41,
            "original_start_line": null,
            "path": "src/nvim/window.c",
            "position": 1,
            "pull_request_review_id": 3223744296,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/35729",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2348434217/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-09-15T09:46:14Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2348434217",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/35729#discussion_r2348469058"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/35729"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2348469058"
                }
            },
            "author_association": "MEMBER",
            "body": "There is already `nvim_win_text_height()`, but to use it for my purposes this needs to be cached.",
            "commit_id": "972623e19bdfd22678135ec11a868257af5736dc",
            "created_at": "2025-09-15T09:55:32Z",
            "diff_hunk": "@@ -5780,11 +5801,17 @@ void may_trigger_win_scrolled_resized(void)\n \n     // Move the entries from scroll_dict to v_event.\n     tv_dict_extend(v_event, scroll_dict, \"move\");\n-    tv_dict_set_keys_readonly(v_event);\n-    tv_dict_unref(scroll_dict);\n-\n     char winid[NUMBUFLEN];\n     vim_snprintf(winid, sizeof(winid), \"%d\", first_scroll_win->handle);\n+    if (first_scroll_win->w_want_scrollbar) {\n+      dictitem_T *di = tv_dict_find(v_event, winid, -1);\n+      if (di != NULL && di->di_tv.v_type == VAR_DICT) {\n+        dict_T *win_dict = di->di_tv.vval.v_dict;\n+        set_event_scrollbar_info(first_scroll_win, win_dict);",
            "html_url": "https://github.com/neovim/neovim/pull/35729#discussion_r2348469058",
            "id": 2348469058,
            "in_reply_to_id": 2347181444,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6L-stC",
            "original_commit_id": "266dad52a470d005ce1c0f37854eb2754e622a4f",
            "original_line": 5810,
            "original_position": 41,
            "original_start_line": null,
            "path": "src/nvim/window.c",
            "position": 1,
            "pull_request_review_id": 3223805054,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/35729",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2348469058/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-09-15T09:55:32Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2348469058",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/7904185?v=4",
                "events_url": "https://api.github.com/users/lewis6991/events{/privacy}",
                "followers_url": "https://api.github.com/users/lewis6991/followers",
                "following_url": "https://api.github.com/users/lewis6991/following{/other_user}",
                "gists_url": "https://api.github.com/users/lewis6991/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/lewis6991",
                "id": 7904185,
                "login": "lewis6991",
                "node_id": "MDQ6VXNlcjc5MDQxODU=",
                "organizations_url": "https://api.github.com/users/lewis6991/orgs",
                "received_events_url": "https://api.github.com/users/lewis6991/received_events",
                "repos_url": "https://api.github.com/users/lewis6991/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/lewis6991/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lewis6991/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/lewis6991",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/35729#discussion_r2348592894"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/35729"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2348592894"
                }
            },
            "author_association": "MEMBER",
            "body": "you mean add a filed in opts of `nvim_win_text_height` which get the relative percentage of scrollbar by given line number 🤔",
            "commit_id": "972623e19bdfd22678135ec11a868257af5736dc",
            "created_at": "2025-09-15T10:46:21Z",
            "diff_hunk": "@@ -5780,11 +5801,17 @@ void may_trigger_win_scrolled_resized(void)\n \n     // Move the entries from scroll_dict to v_event.\n     tv_dict_extend(v_event, scroll_dict, \"move\");\n-    tv_dict_set_keys_readonly(v_event);\n-    tv_dict_unref(scroll_dict);\n-\n     char winid[NUMBUFLEN];\n     vim_snprintf(winid, sizeof(winid), \"%d\", first_scroll_win->handle);\n+    if (first_scroll_win->w_want_scrollbar) {\n+      dictitem_T *di = tv_dict_find(v_event, winid, -1);\n+      if (di != NULL && di->di_tv.v_type == VAR_DICT) {\n+        dict_T *win_dict = di->di_tv.vval.v_dict;\n+        set_event_scrollbar_info(first_scroll_win, win_dict);",
            "html_url": "https://github.com/neovim/neovim/pull/35729#discussion_r2348592894",
            "id": 2348592894,
            "in_reply_to_id": 2347181444,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6L_K7-",
            "original_commit_id": "266dad52a470d005ce1c0f37854eb2754e622a4f",
            "original_line": 5810,
            "original_position": 41,
            "original_start_line": null,
            "path": "src/nvim/window.c",
            "position": 1,
            "pull_request_review_id": 3223995625,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/35729",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2348592894/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-09-15T10:51:05Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2348592894",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/35729#discussion_r2348830492"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/35729"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2348830492"
                }
            },
            "author_association": "MEMBER",
            "body": "No I'm not suggesting we need to add anything to it. Just saying there is already an appropriate API, but to use it practically I need to add caching on top.\n\nAlso looking at the code, I also need a way of getting the virtual topline of a window, which I've implemented with some complex functions with loops around `vim.fn.foldclosedend`. Something might have been added to `vim.fn.getwininfo` since I implemented that.\n\nMy requests are out of scope of what this PR implements, but  good APIs for a scrollbar are just as (or more) valuable than a hardcoded implementation.",
            "commit_id": "972623e19bdfd22678135ec11a868257af5736dc",
            "created_at": "2025-09-15T12:26:12Z",
            "diff_hunk": "@@ -5780,11 +5801,17 @@ void may_trigger_win_scrolled_resized(void)\n \n     // Move the entries from scroll_dict to v_event.\n     tv_dict_extend(v_event, scroll_dict, \"move\");\n-    tv_dict_set_keys_readonly(v_event);\n-    tv_dict_unref(scroll_dict);\n-\n     char winid[NUMBUFLEN];\n     vim_snprintf(winid, sizeof(winid), \"%d\", first_scroll_win->handle);\n+    if (first_scroll_win->w_want_scrollbar) {\n+      dictitem_T *di = tv_dict_find(v_event, winid, -1);\n+      if (di != NULL && di->di_tv.v_type == VAR_DICT) {\n+        dict_T *win_dict = di->di_tv.vval.v_dict;\n+        set_event_scrollbar_info(first_scroll_win, win_dict);",
            "html_url": "https://github.com/neovim/neovim/pull/35729#discussion_r2348830492",
            "id": 2348830492,
            "in_reply_to_id": 2347181444,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6MAE8c",
            "original_commit_id": "266dad52a470d005ce1c0f37854eb2754e622a4f",
            "original_line": 5810,
            "original_position": 41,
            "original_start_line": null,
            "path": "src/nvim/window.c",
            "position": 1,
            "pull_request_review_id": 3224360687,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/35729",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2348830492/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-09-15T12:28:25Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2348830492",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/7904185?v=4",
                "events_url": "https://api.github.com/users/lewis6991/events{/privacy}",
                "followers_url": "https://api.github.com/users/lewis6991/followers",
                "following_url": "https://api.github.com/users/lewis6991/following{/other_user}",
                "gists_url": "https://api.github.com/users/lewis6991/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/lewis6991",
                "id": 7904185,
                "login": "lewis6991",
                "node_id": "MDQ6VXNlcjc5MDQxODU=",
                "organizations_url": "https://api.github.com/users/lewis6991/orgs",
                "received_events_url": "https://api.github.com/users/lewis6991/received_events",
                "repos_url": "https://api.github.com/users/lewis6991/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/lewis6991/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lewis6991/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/lewis6991",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/35729#discussion_r2350454696"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/35729"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2350454696"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "> what is the minimum info needed for plugins to (easily) draw a correct scrollbar? anything that is easy to calculate or available via other APIs, we may not want to include. cc @lewis6991 @dstein64 @petertriho\r\n\r\nI think a function that maps a buffer's line number to a _display line number_ (including a way to get the total number of display lines) would provide some of the info needed for plugins to draw a correct scrollbar and scrollbar signs (e.g., for LSP diagnostics). I'm using _display line number_ to correspond to the line number when only considering lines that could be displayed (including virtual lines and accounting for wrapping and folding). `nvim_win_text_height` can be used to calculate a display line number, but experiments I conducted when it was implemented suggested that it slowed down as a function of the buffer line count (which would be problematic with many lines and many scrollbar signs).\r\n\r\nWhen implementing [nvim-scrollview](https://github.com/dstein64/nvim-scrollview), I found that there were [scenarios](https://github.com/dstein64/nvim-scrollview/blob/8cc50e5e9af861c15778947677aba87cdded66cc/lua/scrollview.lua#L2698-L2708) where the scrollbar should be updated in the absence of a `WinScrolled` event. I mention that since I see that the scrollbar info is being coupled with `WinScrolled` in this PR (the updating of scrollbar signs also wouldn't correspond to the `WinScrolled` event).",
            "commit_id": "972623e19bdfd22678135ec11a868257af5736dc",
            "created_at": "2025-09-16T01:37:30Z",
            "diff_hunk": "@@ -5780,11 +5801,17 @@ void may_trigger_win_scrolled_resized(void)\n \n     // Move the entries from scroll_dict to v_event.\n     tv_dict_extend(v_event, scroll_dict, \"move\");\n-    tv_dict_set_keys_readonly(v_event);\n-    tv_dict_unref(scroll_dict);\n-\n     char winid[NUMBUFLEN];\n     vim_snprintf(winid, sizeof(winid), \"%d\", first_scroll_win->handle);\n+    if (first_scroll_win->w_want_scrollbar) {\n+      dictitem_T *di = tv_dict_find(v_event, winid, -1);\n+      if (di != NULL && di->di_tv.v_type == VAR_DICT) {\n+        dict_T *win_dict = di->di_tv.vval.v_dict;\n+        set_event_scrollbar_info(first_scroll_win, win_dict);",
            "html_url": "https://github.com/neovim/neovim/pull/35729#discussion_r2350454696",
            "id": 2350454696,
            "in_reply_to_id": 2347181444,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6MGReo",
            "original_commit_id": "266dad52a470d005ce1c0f37854eb2754e622a4f",
            "original_line": 5810,
            "original_position": 41,
            "original_start_line": null,
            "path": "src/nvim/window.c",
            "position": 1,
            "pull_request_review_id": 3226781808,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/35729",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2350454696/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-09-16T12:08:47Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2350454696",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/541289?v=4",
                "events_url": "https://api.github.com/users/dstein64/events{/privacy}",
                "followers_url": "https://api.github.com/users/dstein64/followers",
                "following_url": "https://api.github.com/users/dstein64/following{/other_user}",
                "gists_url": "https://api.github.com/users/dstein64/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/dstein64",
                "id": 541289,
                "login": "dstein64",
                "node_id": "MDQ6VXNlcjU0MTI4OQ==",
                "organizations_url": "https://api.github.com/users/dstein64/orgs",
                "received_events_url": "https://api.github.com/users/dstein64/received_events",
                "repos_url": "https://api.github.com/users/dstein64/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/dstein64/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/dstein64/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/dstein64",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/35729#discussion_r2351157394"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/35729"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2351157394"
                }
            },
            "author_association": "MEMBER",
            "body": "> I mention that since I see that the scrollbar info is being coupled with WinScrolled in this PR\r\n\r\nhave you tried the PR with your scenarios ? if still happen could you provide a minimal reproduce step",
            "commit_id": "972623e19bdfd22678135ec11a868257af5736dc",
            "created_at": "2025-09-16T07:12:23Z",
            "diff_hunk": "@@ -5780,11 +5801,17 @@ void may_trigger_win_scrolled_resized(void)\n \n     // Move the entries from scroll_dict to v_event.\n     tv_dict_extend(v_event, scroll_dict, \"move\");\n-    tv_dict_set_keys_readonly(v_event);\n-    tv_dict_unref(scroll_dict);\n-\n     char winid[NUMBUFLEN];\n     vim_snprintf(winid, sizeof(winid), \"%d\", first_scroll_win->handle);\n+    if (first_scroll_win->w_want_scrollbar) {\n+      dictitem_T *di = tv_dict_find(v_event, winid, -1);\n+      if (di != NULL && di->di_tv.v_type == VAR_DICT) {\n+        dict_T *win_dict = di->di_tv.vval.v_dict;\n+        set_event_scrollbar_info(first_scroll_win, win_dict);",
            "html_url": "https://github.com/neovim/neovim/pull/35729#discussion_r2351157394",
            "id": 2351157394,
            "in_reply_to_id": 2347181444,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6MI9CS",
            "original_commit_id": "266dad52a470d005ce1c0f37854eb2754e622a4f",
            "original_line": 5810,
            "original_position": 41,
            "original_start_line": null,
            "path": "src/nvim/window.c",
            "position": 1,
            "pull_request_review_id": 3227954436,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/35729",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2351157394/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-09-16T07:12:23Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2351157394",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/35729#discussion_r2357379561"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/35729"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2357379561"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "I had not tried it when I left my comment. I just tried it now on your branch, and the floating window scrollbar was properly displayed/resized after pasting text.\r\n\r\nMy intent was to convey that for plugins (the context of @justinmk's [question](https://github.com/neovim/neovim/pull/35729#discussion_r2347526311)), there may be scenarios where the scrollbar needs updating, but a `WinScrolled` event doesn't fire. For example, if you launch Neovim, then type `yy500P`, the buffer will expand to have 501 lines. Assuming this is more than the window height, a scrollbar will have to be drawn/resized. But the `WinScrolled` event doesn't fire in this scenario (which can be confirmed with `:autocmd WinScrolled * :echom 'WinScrolled'`), so a scrollbar plugin couldn't correctly update/draw the scrollbar in this scenario if relying on the `WinScrolled` event and the corresponding data in `v:event`.",
            "commit_id": "972623e19bdfd22678135ec11a868257af5736dc",
            "created_at": "2025-09-18T02:51:31Z",
            "diff_hunk": "@@ -5780,11 +5801,17 @@ void may_trigger_win_scrolled_resized(void)\n \n     // Move the entries from scroll_dict to v_event.\n     tv_dict_extend(v_event, scroll_dict, \"move\");\n-    tv_dict_set_keys_readonly(v_event);\n-    tv_dict_unref(scroll_dict);\n-\n     char winid[NUMBUFLEN];\n     vim_snprintf(winid, sizeof(winid), \"%d\", first_scroll_win->handle);\n+    if (first_scroll_win->w_want_scrollbar) {\n+      dictitem_T *di = tv_dict_find(v_event, winid, -1);\n+      if (di != NULL && di->di_tv.v_type == VAR_DICT) {\n+        dict_T *win_dict = di->di_tv.vval.v_dict;\n+        set_event_scrollbar_info(first_scroll_win, win_dict);",
            "html_url": "https://github.com/neovim/neovim/pull/35729#discussion_r2357379561",
            "id": 2357379561,
            "in_reply_to_id": 2347181444,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6MgsHp",
            "original_commit_id": "266dad52a470d005ce1c0f37854eb2754e622a4f",
            "original_line": 5810,
            "original_position": 41,
            "original_start_line": null,
            "path": "src/nvim/window.c",
            "position": 1,
            "pull_request_review_id": 3237083195,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/35729",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2357379561/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-09-18T02:56:24Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2357379561",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/541289?v=4",
                "events_url": "https://api.github.com/users/dstein64/events{/privacy}",
                "followers_url": "https://api.github.com/users/dstein64/followers",
                "following_url": "https://api.github.com/users/dstein64/following{/other_user}",
                "gists_url": "https://api.github.com/users/dstein64/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/dstein64",
                "id": 541289,
                "login": "dstein64",
                "node_id": "MDQ6VXNlcjU0MTI4OQ==",
                "organizations_url": "https://api.github.com/users/dstein64/orgs",
                "received_events_url": "https://api.github.com/users/dstein64/received_events",
                "repos_url": "https://api.github.com/users/dstein64/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/dstein64/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/dstein64/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/dstein64",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/35729#discussion_r2357387192"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/35729"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2357387192"
                }
            },
            "author_association": "MEMBER",
            "body": "> But the `WinScrolled` event doesn't fire in this scenario ... so a scrollbar plugin couldn't correctly update/draw the scrollbar\r\n\r\nWhich values does the plugin need? Let's decide that, then can expose it in more ways than just WinScrolled, later.",
            "commit_id": "972623e19bdfd22678135ec11a868257af5736dc",
            "created_at": "2025-09-18T02:57:26Z",
            "diff_hunk": "@@ -5780,11 +5801,17 @@ void may_trigger_win_scrolled_resized(void)\n \n     // Move the entries from scroll_dict to v_event.\n     tv_dict_extend(v_event, scroll_dict, \"move\");\n-    tv_dict_set_keys_readonly(v_event);\n-    tv_dict_unref(scroll_dict);\n-\n     char winid[NUMBUFLEN];\n     vim_snprintf(winid, sizeof(winid), \"%d\", first_scroll_win->handle);\n+    if (first_scroll_win->w_want_scrollbar) {\n+      dictitem_T *di = tv_dict_find(v_event, winid, -1);\n+      if (di != NULL && di->di_tv.v_type == VAR_DICT) {\n+        dict_T *win_dict = di->di_tv.vval.v_dict;\n+        set_event_scrollbar_info(first_scroll_win, win_dict);",
            "html_url": "https://github.com/neovim/neovim/pull/35729#discussion_r2357387192",
            "id": 2357387192,
            "in_reply_to_id": 2347181444,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6Mgt-4",
            "original_commit_id": "266dad52a470d005ce1c0f37854eb2754e622a4f",
            "original_line": 5810,
            "original_position": 41,
            "original_start_line": null,
            "path": "src/nvim/window.c",
            "position": 1,
            "pull_request_review_id": 3237096719,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/35729",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2357387192/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-09-18T02:57:43Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2357387192",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/35729#discussion_r2357516947"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/35729"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2357516947"
                }
            },
            "author_association": "MEMBER",
            "body": "The implementation here does not rely on the WinScrolled event. The scrollbar is updated when the window is update rendered. It simply follows justinmk’s suggestion to place the scrollbar data into this v:event, so when WinScrolled is triggered you can access that data. Rendering itself is unrelated to it.",
            "commit_id": "972623e19bdfd22678135ec11a868257af5736dc",
            "created_at": "2025-09-18T04:57:16Z",
            "diff_hunk": "@@ -5780,11 +5801,17 @@ void may_trigger_win_scrolled_resized(void)\n \n     // Move the entries from scroll_dict to v_event.\n     tv_dict_extend(v_event, scroll_dict, \"move\");\n-    tv_dict_set_keys_readonly(v_event);\n-    tv_dict_unref(scroll_dict);\n-\n     char winid[NUMBUFLEN];\n     vim_snprintf(winid, sizeof(winid), \"%d\", first_scroll_win->handle);\n+    if (first_scroll_win->w_want_scrollbar) {\n+      dictitem_T *di = tv_dict_find(v_event, winid, -1);\n+      if (di != NULL && di->di_tv.v_type == VAR_DICT) {\n+        dict_T *win_dict = di->di_tv.vval.v_dict;\n+        set_event_scrollbar_info(first_scroll_win, win_dict);",
            "html_url": "https://github.com/neovim/neovim/pull/35729#discussion_r2357516947",
            "id": 2357516947,
            "in_reply_to_id": 2347181444,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6MhNqT",
            "original_commit_id": "266dad52a470d005ce1c0f37854eb2754e622a4f",
            "original_line": 5810,
            "original_position": 41,
            "original_start_line": null,
            "path": "src/nvim/window.c",
            "position": 1,
            "pull_request_review_id": 3237284602,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/35729",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2357516947/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-09-18T04:57:37Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2357516947",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/35729#discussion_r2391150027"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/35729"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2391150027"
                }
            },
            "author_association": "MEMBER",
            "body": "Please read the comment above `plines_m_win()`:\n```c\n/// XXX: Because of topfill, this only makes sense when first >= wp->w_topline.\n```",
            "commit_id": "71c26fe50f817367f05c9e5522c2de1c0d57f00b",
            "created_at": "2025-09-30T12:08:12Z",
            "diff_hunk": "@@ -437,3 +444,49 @@ win_T *win_float_create(bool enter, bool new_buf)\n   }\n   return wp;\n }\n+\n+void win_update_scrollbar_state(win_T *wp, int *thumb_pos, int *thumb_size)\n+{\n+  if (bt_terminal(wp->w_buffer) || bt_quickfix(wp->w_buffer) || bt_prompt(wp->w_buffer)) {\n+    return;\n+  }\n+\n+  bool before_has = wp->w_has_scrollbar;\n+  int height = wp->w_view_height;\n+  linenr_T line_count = wp->w_buffer->b_ml.ml_line_count;\n+  linenr_T visible_start = wp->w_topline;\n+  linenr_T visible_end = visible_start + height - 1;\n+  bool content_fits = (visible_start == 1) && (visible_end >= line_count);\n+  if (wp->w_p_wrap && !content_fits) {\n+    int lines_shown = plines_m_win(wp, visible_start, MIN(visible_end, line_count), height);\n+    content_fits = (visible_start == 1) && (lines_shown >= line_count);\n+  }\n+\n+  wp->w_has_scrollbar = wp->w_p_scrollbar\n+                        && !wp->w_buffer->terminal\n+                        && (wp->w_topline > 1 || !content_fits);\n+\n+  if (before_has != wp->w_has_scrollbar) {\n+    if (wp->w_has_scrollbar) {\n+      wp->w_width_request = wp->w_width - 1;\n+    } else {\n+      wp->w_width_request = wp->w_width;\n+    }\n+    win_set_inner_size(wp, false);\n+    wp->w_width_request = 0;\n+  }\n+\n+  if (wp->w_has_scrollbar) {\n+    int total_content_lines = wp->w_p_wrap\n+                              ? plines_m_win(wp, 1, line_count, INT_MAX) : line_count;\n+\n+    double visible_ratio = (double)height / total_content_lines;\n+    int min_thumb = MAX(1, height / 10);\n+    *thumb_size = MAX(min_thumb, (int)(visible_ratio * height));\n+    int scrollable_area = height - *thumb_size;\n+    int scroll_offset = wp->w_p_wrap\n+                        ? plines_m_win(wp, 1, wp->w_topline - 1, INT_MAX) : (wp->w_topline - 1);",
            "html_url": "https://github.com/neovim/neovim/pull/35729#discussion_r2391150027",
            "id": 2391150027,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6Ohg3L",
            "original_commit_id": "71c26fe50f817367f05c9e5522c2de1c0d57f00b",
            "original_line": 488,
            "original_position": 82,
            "original_start_line": 481,
            "path": "src/nvim/winfloat.c",
            "position": 1,
            "pull_request_review_id": 3284346311,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/35729",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2391150027/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-09-30T12:08:12Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2391150027",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/35729#discussion_r2391156107"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/35729"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2391156107"
                }
            },
            "author_association": "MEMBER",
            "body": "Okay... There is still a resize issue 🤔. I will fix it together with this.",
            "commit_id": "71c26fe50f817367f05c9e5522c2de1c0d57f00b",
            "created_at": "2025-09-30T12:10:39Z",
            "diff_hunk": "@@ -437,3 +444,49 @@ win_T *win_float_create(bool enter, bool new_buf)\n   }\n   return wp;\n }\n+\n+void win_update_scrollbar_state(win_T *wp, int *thumb_pos, int *thumb_size)\n+{\n+  if (bt_terminal(wp->w_buffer) || bt_quickfix(wp->w_buffer) || bt_prompt(wp->w_buffer)) {\n+    return;\n+  }\n+\n+  bool before_has = wp->w_has_scrollbar;\n+  int height = wp->w_view_height;\n+  linenr_T line_count = wp->w_buffer->b_ml.ml_line_count;\n+  linenr_T visible_start = wp->w_topline;\n+  linenr_T visible_end = visible_start + height - 1;\n+  bool content_fits = (visible_start == 1) && (visible_end >= line_count);\n+  if (wp->w_p_wrap && !content_fits) {\n+    int lines_shown = plines_m_win(wp, visible_start, MIN(visible_end, line_count), height);\n+    content_fits = (visible_start == 1) && (lines_shown >= line_count);\n+  }\n+\n+  wp->w_has_scrollbar = wp->w_p_scrollbar\n+                        && !wp->w_buffer->terminal\n+                        && (wp->w_topline > 1 || !content_fits);\n+\n+  if (before_has != wp->w_has_scrollbar) {\n+    if (wp->w_has_scrollbar) {\n+      wp->w_width_request = wp->w_width - 1;\n+    } else {\n+      wp->w_width_request = wp->w_width;\n+    }\n+    win_set_inner_size(wp, false);\n+    wp->w_width_request = 0;\n+  }\n+\n+  if (wp->w_has_scrollbar) {\n+    int total_content_lines = wp->w_p_wrap\n+                              ? plines_m_win(wp, 1, line_count, INT_MAX) : line_count;\n+\n+    double visible_ratio = (double)height / total_content_lines;\n+    int min_thumb = MAX(1, height / 10);\n+    *thumb_size = MAX(min_thumb, (int)(visible_ratio * height));\n+    int scrollable_area = height - *thumb_size;\n+    int scroll_offset = wp->w_p_wrap\n+                        ? plines_m_win(wp, 1, wp->w_topline - 1, INT_MAX) : (wp->w_topline - 1);",
            "html_url": "https://github.com/neovim/neovim/pull/35729#discussion_r2391156107",
            "id": 2391156107,
            "in_reply_to_id": 2391150027,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6OhiWL",
            "original_commit_id": "71c26fe50f817367f05c9e5522c2de1c0d57f00b",
            "original_line": 488,
            "original_position": 82,
            "original_start_line": 481,
            "path": "src/nvim/winfloat.c",
            "position": 1,
            "pull_request_review_id": 3284355519,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/35729",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2391156107/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-09-30T12:10:39Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2391156107",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/35729#discussion_r2391174554"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/35729"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2391174554"
                }
            },
            "author_association": "MEMBER",
            "body": "There is another `plines_m_win()` call above that also starts with line 1.",
            "commit_id": "71c26fe50f817367f05c9e5522c2de1c0d57f00b",
            "created_at": "2025-09-30T12:17:07Z",
            "diff_hunk": "@@ -437,3 +444,49 @@ win_T *win_float_create(bool enter, bool new_buf)\n   }\n   return wp;\n }\n+\n+void win_update_scrollbar_state(win_T *wp, int *thumb_pos, int *thumb_size)\n+{\n+  if (bt_terminal(wp->w_buffer) || bt_quickfix(wp->w_buffer) || bt_prompt(wp->w_buffer)) {\n+    return;\n+  }\n+\n+  bool before_has = wp->w_has_scrollbar;\n+  int height = wp->w_view_height;\n+  linenr_T line_count = wp->w_buffer->b_ml.ml_line_count;\n+  linenr_T visible_start = wp->w_topline;\n+  linenr_T visible_end = visible_start + height - 1;\n+  bool content_fits = (visible_start == 1) && (visible_end >= line_count);\n+  if (wp->w_p_wrap && !content_fits) {\n+    int lines_shown = plines_m_win(wp, visible_start, MIN(visible_end, line_count), height);\n+    content_fits = (visible_start == 1) && (lines_shown >= line_count);\n+  }\n+\n+  wp->w_has_scrollbar = wp->w_p_scrollbar\n+                        && !wp->w_buffer->terminal\n+                        && (wp->w_topline > 1 || !content_fits);\n+\n+  if (before_has != wp->w_has_scrollbar) {\n+    if (wp->w_has_scrollbar) {\n+      wp->w_width_request = wp->w_width - 1;\n+    } else {\n+      wp->w_width_request = wp->w_width;\n+    }\n+    win_set_inner_size(wp, false);\n+    wp->w_width_request = 0;\n+  }\n+\n+  if (wp->w_has_scrollbar) {\n+    int total_content_lines = wp->w_p_wrap\n+                              ? plines_m_win(wp, 1, line_count, INT_MAX) : line_count;\n+\n+    double visible_ratio = (double)height / total_content_lines;\n+    int min_thumb = MAX(1, height / 10);\n+    *thumb_size = MAX(min_thumb, (int)(visible_ratio * height));\n+    int scrollable_area = height - *thumb_size;\n+    int scroll_offset = wp->w_p_wrap\n+                        ? plines_m_win(wp, 1, wp->w_topline - 1, INT_MAX) : (wp->w_topline - 1);",
            "html_url": "https://github.com/neovim/neovim/pull/35729#discussion_r2391174554",
            "id": 2391174554,
            "in_reply_to_id": 2391150027,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6Ohm2a",
            "original_commit_id": "71c26fe50f817367f05c9e5522c2de1c0d57f00b",
            "original_line": 488,
            "original_position": 82,
            "original_start_line": 481,
            "path": "src/nvim/winfloat.c",
            "position": 1,
            "pull_request_review_id": 3284383172,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/35729",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2391174554/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-09-30T12:17:20Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2391174554",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/35729#discussion_r2391555938"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/35729"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2391555938"
                }
            },
            "author_association": "MEMBER",
            "body": "Hmm,\r\n1. There is still another `plines_m_win()` call above that starts with line 1.\r\n2. I'm not sure if using `plines_m_win_fill()` is correct at all. `plines_m_win_fill()` does not handle wrapping or skip over folds, unlike `plines_m_win()`. Consider using `win_text_height()` instead.",
            "commit_id": "71c26fe50f817367f05c9e5522c2de1c0d57f00b",
            "created_at": "2025-09-30T13:46:53Z",
            "diff_hunk": "@@ -437,3 +444,49 @@ win_T *win_float_create(bool enter, bool new_buf)\n   }\n   return wp;\n }\n+\n+void win_update_scrollbar_state(win_T *wp, int *thumb_pos, int *thumb_size)\n+{\n+  if (bt_terminal(wp->w_buffer) || bt_quickfix(wp->w_buffer) || bt_prompt(wp->w_buffer)) {\n+    return;\n+  }\n+\n+  bool before_has = wp->w_has_scrollbar;\n+  int height = wp->w_view_height;\n+  linenr_T line_count = wp->w_buffer->b_ml.ml_line_count;\n+  linenr_T visible_start = wp->w_topline;\n+  linenr_T visible_end = visible_start + height - 1;\n+  bool content_fits = (visible_start == 1) && (visible_end >= line_count);\n+  if (wp->w_p_wrap && !content_fits) {\n+    int lines_shown = plines_m_win(wp, visible_start, MIN(visible_end, line_count), height);\n+    content_fits = (visible_start == 1) && (lines_shown >= line_count);\n+  }\n+\n+  wp->w_has_scrollbar = wp->w_p_scrollbar\n+                        && !wp->w_buffer->terminal\n+                        && (wp->w_topline > 1 || !content_fits);\n+\n+  if (before_has != wp->w_has_scrollbar) {\n+    if (wp->w_has_scrollbar) {\n+      wp->w_width_request = wp->w_width - 1;\n+    } else {\n+      wp->w_width_request = wp->w_width;\n+    }\n+    win_set_inner_size(wp, false);\n+    wp->w_width_request = 0;\n+  }\n+\n+  if (wp->w_has_scrollbar) {\n+    int total_content_lines = wp->w_p_wrap\n+                              ? plines_m_win(wp, 1, line_count, INT_MAX) : line_count;\n+\n+    double visible_ratio = (double)height / total_content_lines;\n+    int min_thumb = MAX(1, height / 10);\n+    *thumb_size = MAX(min_thumb, (int)(visible_ratio * height));\n+    int scrollable_area = height - *thumb_size;\n+    int scroll_offset = wp->w_p_wrap\n+                        ? plines_m_win(wp, 1, wp->w_topline - 1, INT_MAX) : (wp->w_topline - 1);",
            "html_url": "https://github.com/neovim/neovim/pull/35729#discussion_r2391555938",
            "id": 2391555938,
            "in_reply_to_id": 2391150027,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6OjD9i",
            "original_commit_id": "71c26fe50f817367f05c9e5522c2de1c0d57f00b",
            "original_line": 488,
            "original_position": 82,
            "original_start_line": 481,
            "path": "src/nvim/winfloat.c",
            "position": 1,
            "pull_request_review_id": 3284941885,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/35729",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2391555938/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-09-30T13:52:13Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2391555938",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/35729#discussion_r2393619923"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/35729"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2393619923"
                }
            },
            "author_association": "MEMBER",
            "body": "make sense..i used `win_text_height` instead of `plines_m_win`  thanks ",
            "commit_id": "71c26fe50f817367f05c9e5522c2de1c0d57f00b",
            "created_at": "2025-10-01T06:53:17Z",
            "diff_hunk": "@@ -437,3 +444,49 @@ win_T *win_float_create(bool enter, bool new_buf)\n   }\n   return wp;\n }\n+\n+void win_update_scrollbar_state(win_T *wp, int *thumb_pos, int *thumb_size)\n+{\n+  if (bt_terminal(wp->w_buffer) || bt_quickfix(wp->w_buffer) || bt_prompt(wp->w_buffer)) {\n+    return;\n+  }\n+\n+  bool before_has = wp->w_has_scrollbar;\n+  int height = wp->w_view_height;\n+  linenr_T line_count = wp->w_buffer->b_ml.ml_line_count;\n+  linenr_T visible_start = wp->w_topline;\n+  linenr_T visible_end = visible_start + height - 1;\n+  bool content_fits = (visible_start == 1) && (visible_end >= line_count);\n+  if (wp->w_p_wrap && !content_fits) {\n+    int lines_shown = plines_m_win(wp, visible_start, MIN(visible_end, line_count), height);\n+    content_fits = (visible_start == 1) && (lines_shown >= line_count);\n+  }\n+\n+  wp->w_has_scrollbar = wp->w_p_scrollbar\n+                        && !wp->w_buffer->terminal\n+                        && (wp->w_topline > 1 || !content_fits);\n+\n+  if (before_has != wp->w_has_scrollbar) {\n+    if (wp->w_has_scrollbar) {\n+      wp->w_width_request = wp->w_width - 1;\n+    } else {\n+      wp->w_width_request = wp->w_width;\n+    }\n+    win_set_inner_size(wp, false);\n+    wp->w_width_request = 0;\n+  }\n+\n+  if (wp->w_has_scrollbar) {\n+    int total_content_lines = wp->w_p_wrap\n+                              ? plines_m_win(wp, 1, line_count, INT_MAX) : line_count;\n+\n+    double visible_ratio = (double)height / total_content_lines;\n+    int min_thumb = MAX(1, height / 10);\n+    *thumb_size = MAX(min_thumb, (int)(visible_ratio * height));\n+    int scrollable_area = height - *thumb_size;\n+    int scroll_offset = wp->w_p_wrap\n+                        ? plines_m_win(wp, 1, wp->w_topline - 1, INT_MAX) : (wp->w_topline - 1);",
            "html_url": "https://github.com/neovim/neovim/pull/35729#discussion_r2393619923",
            "id": 2393619923,
            "in_reply_to_id": 2391150027,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6Oq73T",
            "original_commit_id": "71c26fe50f817367f05c9e5522c2de1c0d57f00b",
            "original_line": 488,
            "original_position": 82,
            "original_start_line": 481,
            "path": "src/nvim/winfloat.c",
            "position": 1,
            "pull_request_review_id": 3287787003,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/35729",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2393619923/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-10-01T06:53:17Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2393619923",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/35729#discussion_r2413580143"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/35729"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2413580143"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\n      int line_height = plines_win(wp, target_topline, false);\n```",
            "commit_id": "ec8c5c55d391648a5736a520f05883154092428b",
            "created_at": "2025-10-08T11:43:19Z",
            "diff_hunk": "@@ -328,6 +328,43 @@ static int do_popup(int which_button, int m_pos_flag, pos_T m_pos)\n   return jump_flags;\n }\n \n+/// Handle scrollbar click or drag by calculating the target file position\n+/// based on mouse position and scrolling to that location.\n+static void mouse_handle_scrollbar(win_T *wp)\n+{\n+  int height = wp->w_view_height;\n+  linenr_T line_count = wp->w_buffer->b_ml.ml_line_count;\n+  linenr_T end_lnum = line_count;\n+  int64_t end_vcol = -1;\n+  int total_lines = wp->w_buffer->b_ml.ml_vline_count;\n+\n+  if (total_lines > height) {\n+    int thumb_size = MAX(1, (height * height) / total_lines);\n+    int scrollable_area = height - thumb_size;\n+    int click_row = mouse_row - (wp->w_winrow + wp->w_border_adj[0]);\n+    click_row = MAX(0, MIN(click_row, scrollable_area));\n+    int target_screen_offset = (click_row * (total_lines - height)) / scrollable_area;\n+    linenr_T target_topline = 1;\n+    int accumulated = 0;\n+\n+    while (target_topline < line_count && accumulated < target_screen_offset) {\n+      end_lnum = target_topline;\n+      end_vcol = -1;\n+      int line_height = (int)win_text_height(wp, target_topline, -1, &end_lnum, &end_vcol, NULL, 1);",
            "html_url": "https://github.com/neovim/neovim/pull/35729#discussion_r2413580143",
            "id": 2413580143,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6P3E9v",
            "original_commit_id": "ec8c5c55d391648a5736a520f05883154092428b",
            "original_line": 353,
            "original_position": 26,
            "original_start_line": 351,
            "path": "src/nvim/mouse.c",
            "position": 1,
            "pull_request_review_id": 3314428770,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/35729",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2413580143/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-10-08T11:43:19Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2413580143",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/35729#discussion_r2413633343"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/35729"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2413633343"
                }
            },
            "author_association": "MEMBER",
            "body": "If replace `win_text_height` with `plines_win`, the loop would incorrectly count folded lines. For example, if lines 10-50 are folded (41 lines), the loop would add 41 screen lines instead of 1.  so need a manualy fold handling  like this ...🤔\r\n\r\n```c\r\nwhile (target_topline < line_count && accumulated < target_screen_offset) {\r\n  linenr_T fold_end = target_topline;\r\n  if (hasFolding(wp, target_topline, NULL, &fold_end)) {\r\n    accumulated += 1;\r\n    target_topline = fold_end + 1;\r\n  } else {\r\n    accumulated += plines_win(wp, target_topline, false);\r\n    target_topline++;\r\n  }\r\n}\r\n````",
            "commit_id": "ec8c5c55d391648a5736a520f05883154092428b",
            "created_at": "2025-10-08T12:05:16Z",
            "diff_hunk": "@@ -328,6 +328,43 @@ static int do_popup(int which_button, int m_pos_flag, pos_T m_pos)\n   return jump_flags;\n }\n \n+/// Handle scrollbar click or drag by calculating the target file position\n+/// based on mouse position and scrolling to that location.\n+static void mouse_handle_scrollbar(win_T *wp)\n+{\n+  int height = wp->w_view_height;\n+  linenr_T line_count = wp->w_buffer->b_ml.ml_line_count;\n+  linenr_T end_lnum = line_count;\n+  int64_t end_vcol = -1;\n+  int total_lines = wp->w_buffer->b_ml.ml_vline_count;\n+\n+  if (total_lines > height) {\n+    int thumb_size = MAX(1, (height * height) / total_lines);\n+    int scrollable_area = height - thumb_size;\n+    int click_row = mouse_row - (wp->w_winrow + wp->w_border_adj[0]);\n+    click_row = MAX(0, MIN(click_row, scrollable_area));\n+    int target_screen_offset = (click_row * (total_lines - height)) / scrollable_area;\n+    linenr_T target_topline = 1;\n+    int accumulated = 0;\n+\n+    while (target_topline < line_count && accumulated < target_screen_offset) {\n+      end_lnum = target_topline;\n+      end_vcol = -1;\n+      int line_height = (int)win_text_height(wp, target_topline, -1, &end_lnum, &end_vcol, NULL, 1);",
            "html_url": "https://github.com/neovim/neovim/pull/35729#discussion_r2413633343",
            "id": 2413633343,
            "in_reply_to_id": 2413580143,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6P3R8_",
            "original_commit_id": "ec8c5c55d391648a5736a520f05883154092428b",
            "original_line": 353,
            "original_position": 26,
            "original_start_line": 351,
            "path": "src/nvim/mouse.c",
            "position": 1,
            "pull_request_review_id": 3314499689,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/35729",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2413633343/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-10-08T12:05:16Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2413633343",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/35729#discussion_r2413680980"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/35729"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2413680980"
                }
            },
            "author_association": "MEMBER",
            "body": "Hmm, does `win_text_height` allow you to avoid that? If `start_lnum == *end_lnum`, `*end_lnum` is set to the start of the fold, not the end.",
            "commit_id": "ec8c5c55d391648a5736a520f05883154092428b",
            "created_at": "2025-10-08T12:23:25Z",
            "diff_hunk": "@@ -328,6 +328,43 @@ static int do_popup(int which_button, int m_pos_flag, pos_T m_pos)\n   return jump_flags;\n }\n \n+/// Handle scrollbar click or drag by calculating the target file position\n+/// based on mouse position and scrolling to that location.\n+static void mouse_handle_scrollbar(win_T *wp)\n+{\n+  int height = wp->w_view_height;\n+  linenr_T line_count = wp->w_buffer->b_ml.ml_line_count;\n+  linenr_T end_lnum = line_count;\n+  int64_t end_vcol = -1;\n+  int total_lines = wp->w_buffer->b_ml.ml_vline_count;\n+\n+  if (total_lines > height) {\n+    int thumb_size = MAX(1, (height * height) / total_lines);\n+    int scrollable_area = height - thumb_size;\n+    int click_row = mouse_row - (wp->w_winrow + wp->w_border_adj[0]);\n+    click_row = MAX(0, MIN(click_row, scrollable_area));\n+    int target_screen_offset = (click_row * (total_lines - height)) / scrollable_area;\n+    linenr_T target_topline = 1;\n+    int accumulated = 0;\n+\n+    while (target_topline < line_count && accumulated < target_screen_offset) {\n+      end_lnum = target_topline;\n+      end_vcol = -1;\n+      int line_height = (int)win_text_height(wp, target_topline, -1, &end_lnum, &end_vcol, NULL, 1);",
            "html_url": "https://github.com/neovim/neovim/pull/35729#discussion_r2413680980",
            "id": 2413680980,
            "in_reply_to_id": 2413580143,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6P3dlU",
            "original_commit_id": "ec8c5c55d391648a5736a520f05883154092428b",
            "original_line": 353,
            "original_position": 26,
            "original_start_line": 351,
            "path": "src/nvim/mouse.c",
            "position": 1,
            "pull_request_review_id": 3314568564,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/35729",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2413680980/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-10-08T13:45:18Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2413680980",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/35729#discussion_r2415576662"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/35729"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2415576662"
                }
            },
            "author_association": "MEMBER",
            "body": "You're right. I missed that `win_text_height` sets `*end_lnum` to the fold start, not end. This would cause the loop to jump backwards.",
            "commit_id": "ec8c5c55d391648a5736a520f05883154092428b",
            "created_at": "2025-10-09T05:03:31Z",
            "diff_hunk": "@@ -328,6 +328,43 @@ static int do_popup(int which_button, int m_pos_flag, pos_T m_pos)\n   return jump_flags;\n }\n \n+/// Handle scrollbar click or drag by calculating the target file position\n+/// based on mouse position and scrolling to that location.\n+static void mouse_handle_scrollbar(win_T *wp)\n+{\n+  int height = wp->w_view_height;\n+  linenr_T line_count = wp->w_buffer->b_ml.ml_line_count;\n+  linenr_T end_lnum = line_count;\n+  int64_t end_vcol = -1;\n+  int total_lines = wp->w_buffer->b_ml.ml_vline_count;\n+\n+  if (total_lines > height) {\n+    int thumb_size = MAX(1, (height * height) / total_lines);\n+    int scrollable_area = height - thumb_size;\n+    int click_row = mouse_row - (wp->w_winrow + wp->w_border_adj[0]);\n+    click_row = MAX(0, MIN(click_row, scrollable_area));\n+    int target_screen_offset = (click_row * (total_lines - height)) / scrollable_area;\n+    linenr_T target_topline = 1;\n+    int accumulated = 0;\n+\n+    while (target_topline < line_count && accumulated < target_screen_offset) {\n+      end_lnum = target_topline;\n+      end_vcol = -1;\n+      int line_height = (int)win_text_height(wp, target_topline, -1, &end_lnum, &end_vcol, NULL, 1);",
            "html_url": "https://github.com/neovim/neovim/pull/35729#discussion_r2415576662",
            "id": 2415576662,
            "in_reply_to_id": 2413580143,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6P-sZW",
            "original_commit_id": "ec8c5c55d391648a5736a520f05883154092428b",
            "original_line": 353,
            "original_position": 26,
            "original_start_line": 351,
            "path": "src/nvim/mouse.c",
            "position": 1,
            "pull_request_review_id": 3317230676,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/35729",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2415576662/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-10-09T05:03:31Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2415576662",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/35729#discussion_r2423135833"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/35729"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423135833"
                }
            },
            "author_association": "MEMBER",
            "body": "Scroll info will be [useful for plugins](https://github.com/neovim/neovim/pull/35729#issuecomment-3286259373) even if a scrollbar is not shown. How expensive is it to always provide this info?",
            "commit_id": "562d28f9855df4a600da911ab497c37ed0e715c7",
            "created_at": "2025-10-11T21:18:11Z",
            "diff_hunk": "@@ -4492,6 +4492,33 @@ getwininfo([{winid}])                                             *getwininfo()*\n \t\t\twinnr\t\twindow number\n \t\t\twinrow\t\ttopmost screen line of the window;\n \t\t\t\t\t\"row\" from |win_screenpos()|\n+\t\t  scrollbar\tDictionary with scrollbar information. Only\n+\t\t\t\t\tpresent when the window has a scrollbar.",
            "html_url": "https://github.com/neovim/neovim/pull/35729#discussion_r2423135833",
            "id": 2423135833,
            "line": 4496,
            "node_id": "PRRC_kwDOAPphoM6Qbh5Z",
            "original_commit_id": "d55a743f540eb2e74d387a82ec5c66b5866cdd96",
            "original_line": 4496,
            "original_position": 5,
            "original_start_line": 4495,
            "path": "runtime/doc/vimfn.txt",
            "position": 5,
            "pull_request_review_id": 3327589659,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/35729",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423135833/reactions"
            },
            "side": "RIGHT",
            "start_line": 4495,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-10-11T21:18:12Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423135833",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/35729#discussion_r2423136652"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/35729"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423136652"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\n  bool w_has_scrollbar;                         // 'scrollbar' enabled\n```",
            "commit_id": "d55a743f540eb2e74d387a82ec5c66b5866cdd96",
            "created_at": "2025-10-11T21:21:09Z",
            "diff_hunk": "@@ -1382,4 +1385,5 @@ struct window_S {\n   size_t w_winbar_click_defs_size;              // Size of the w_winbar_click_defs array\n   StlClickDefinition *w_statuscol_click_defs;   // Status column click definitions\n   size_t w_statuscol_click_defs_size;           // Size of the w_statuscol_click_defs array\n+  bool w_has_scrollbar;                         // true if scrollbar displayed otherwise false",
            "html_url": "https://github.com/neovim/neovim/pull/35729#discussion_r2423136652",
            "id": 2423136652,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6QbiGM",
            "original_commit_id": "d55a743f540eb2e74d387a82ec5c66b5866cdd96",
            "original_line": 1388,
            "original_position": 21,
            "original_start_line": null,
            "path": "src/nvim/buffer_defs.h",
            "position": 1,
            "pull_request_review_id": 3327590250,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/35729",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423136652/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-10-11T21:21:09Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423136652",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/35729#discussion_r2423137235"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/35729"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423137235"
                }
            },
            "author_association": "MEMBER",
            "body": "are these float-specific?",
            "commit_id": "d55a743f540eb2e74d387a82ec5c66b5866cdd96",
            "created_at": "2025-10-11T21:23:02Z",
            "diff_hunk": "@@ -135,6 +135,8 @@ typedef enum {\n   HLF_SO,         ///< stdout messages (from shell)\n   HLF_OK,         ///< OK message\n   HLF_PRE,        ///< \"preinsert\" in 'completeopt'\n+  HLF_SBT,        ///< Float Scrollbar thumb\n+  HLF_SBR,        ///< Float Scrollbar",
            "html_url": "https://github.com/neovim/neovim/pull/35729#discussion_r2423137235",
            "id": 2423137235,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6QbiPT",
            "original_commit_id": "d55a743f540eb2e74d387a82ec5c66b5866cdd96",
            "original_line": 139,
            "original_position": 5,
            "original_start_line": 138,
            "path": "src/nvim/highlight_defs.h",
            "position": 1,
            "pull_request_review_id": 3327590762,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/35729",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423137235/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-10-11T21:23:02Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423137235",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/35729#discussion_r2423137710"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/35729"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423137710"
                }
            },
            "author_association": "MEMBER",
            "body": "notice how the rest of the blocks above are grouped. these items do not fit here. it looks like line 180 is the right place for them.",
            "commit_id": "d55a743f540eb2e74d387a82ec5c66b5866cdd96",
            "created_at": "2025-10-11T21:24:20Z",
            "diff_hunk": "@@ -348,6 +348,8 @@ static const char *highlight_init_both[] = {\n   \"default link @lsp.type.variable      @variable\",\n \n   \"default link @lsp.mod.deprecated DiagnosticDeprecated\",\n+  \"default link ScrollbarThumb PmenuThumb\",\n+  \"default link Scrollbar PmenuSbar\",",
            "html_url": "https://github.com/neovim/neovim/pull/35729#discussion_r2423137710",
            "id": 2423137710,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6QbiWu",
            "original_commit_id": "d55a743f540eb2e74d387a82ec5c66b5866cdd96",
            "original_line": 352,
            "original_position": 5,
            "original_start_line": null,
            "path": "src/nvim/highlight_group.c",
            "position": 1,
            "pull_request_review_id": 3327591541,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/35729",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423137710/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-10-11T21:24:20Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423137710",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/35729#discussion_r2423138666"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/35729"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423138666"
                }
            },
            "author_association": "MEMBER",
            "body": "line 114?",
            "commit_id": "d55a743f540eb2e74d387a82ec5c66b5866cdd96",
            "created_at": "2025-10-11T21:26:47Z",
            "diff_hunk": "@@ -14,6 +14,7 @@\n // - Add documentation! \"desc\" in options.lua, and any other related places.\n // - Add an entry in runtime/optwin.vim.\n \n+#include \"nvim/winfloat.h\"",
            "html_url": "https://github.com/neovim/neovim/pull/35729#discussion_r2423138666",
            "id": 2423138666,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6Qbilq",
            "original_commit_id": "d55a743f540eb2e74d387a82ec5c66b5866cdd96",
            "original_line": 17,
            "original_position": 4,
            "original_start_line": null,
            "path": "src/nvim/option.c",
            "position": 1,
            "pull_request_review_id": 3327592641,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/35729",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423138666/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-10-11T21:26:47Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423138666",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/35729#discussion_r2423139528"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/35729"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423139528"
                }
            },
            "author_association": "MEMBER",
            "body": "?",
            "commit_id": "d55a743f540eb2e74d387a82ec5c66b5866cdd96",
            "created_at": "2025-10-11T21:27:12Z",
            "diff_hunk": "@@ -462,6 +462,7 @@ EXTERN char *p_pp;              ///< 'packpath'\n EXTERN char *p_qftf;            ///< 'quickfixtextfunc'\n EXTERN char *p_rtp;             ///< 'runtimepath'\n EXTERN OptInt p_scbk;           ///< 'scrollback'\n+// EXTERN OptInt p_scrollbar;      ///< 'scrollbar'",
            "html_url": "https://github.com/neovim/neovim/pull/35729#discussion_r2423139528",
            "id": 2423139528,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6QbizI",
            "original_commit_id": "d55a743f540eb2e74d387a82ec5c66b5866cdd96",
            "original_line": 465,
            "original_position": 4,
            "original_start_line": null,
            "path": "src/nvim/option_vars.h",
            "position": 1,
            "pull_request_review_id": 3327593919,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/35729",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423139528/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-10-11T21:27:12Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423139528",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/35729#discussion_r2423140671"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/35729"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423140671"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\n  it('getwininfo() returns scrollbar info', function()\n```",
            "commit_id": "d55a743f540eb2e74d387a82ec5c66b5866cdd96",
            "created_at": "2025-10-11T21:29:19Z",
            "diff_hunk": "@@ -0,0 +1,340 @@\n+local t = require('test.testutil')\n+local n = require('test.functional.testnvim')()\n+local Screen = require('test.functional.ui.screen')\n+\n+local api, clear, feed, fn = n.api, n.clear, n.feed, n.fn\n+local exec_lua = n.exec_lua\n+local command = n.command\n+local eq = t.eq\n+\n+describe(\"'scrollbar'\", function()\n+  local screen\n+  before_each(function()\n+    clear()\n+    screen = Screen.new(30, 10)\n+    command('set scrollbar')\n+    command('hi Scrollbar guibg=blue')\n+    command('hi ScrollbarThumb guibg=red')\n+    screen:add_extra_attr_ids({\n+      [101] = { background = Screen.colors.Blue },\n+      [102] = { foreground = Screen.colors.Blue },\n+      [103] = { foreground = Screen.colors.Yellow },\n+    })\n+  end)\n+\n+  it('toggle scrollbar in the window with page scrolling', function()\n+    exec_lua([[\n+      local buf = vim.api.nvim_create_buf(true, true)\n+      vim.api.nvim_open_win(buf, true, {\n+        relative = \"editor\",\n+        row = 1,\n+        col = 1,\n+        width = 10,\n+        height = 5,\n+      })\n+      vim.cmd.edit(vim.fs.joinpath(vim.uv.cwd(), 'README.md'))\n+    ]])\n+\n+    screen:expect([[\n+                                    |\n+      {1:~}{4:^<h1 align}{30: }{1:                   }|\n+      {1:~}{4:=\"center\"}{101: }{1:                   }|\n+      {1:~}{4:>        }{101: }{1:                   }|\n+      {1:~}{4:  <img sr}{101: }{1:                   }|\n+      {1:~}{4:c=\"htt}{11:@@@}{101: }{1:                   }|\n+      {1:~                             }|*3\n+                                    |\n+    ]])\n+    feed(('<C-f>'):rep(30))\n+    screen:expect([[\n+                                    |\n+      {1:~}{4:^         }{101: }{1:                   }|\n+      {1:~}{4:See [`:he}{30: }{1:                   }|\n+      {1:~}{4:lp nvim-f}{101: }{1:                   }|\n+      {1:~}{4:eatures`]}{101: }{1:                   }|\n+      {1:~}{4:[nvim-}{11:@@@}{101: }{1:                   }|\n+      {1:~                             }|*3\n+                                    |\n+    ]])\n+\n+    command('setlocal noscrollbar')\n+    screen:expect([[\n+                                    |\n+      {1:~}{4:^          }{1:                   }|\n+      {1:~}{4:See [`:hel}{1:                   }|\n+      {1:~}{4:p nvim-fea}{1:                   }|\n+      {1:~}{4:tures`][nv}{1:                   }|\n+      {1:~}{4:im-feat}{11:@@@}{1:                   }|\n+      {1:~                             }|*3\n+                                    |\n+    ]])\n+\n+    command('fclose | bnext')\n+    feed(('<C-b>'):rep(15))\n+    screen:expect([[\n+      <h1 align=\"center\">          {30: }|\n+        <img src=\"https://raw.githu{101: }|\n+      busercontent.com/neovim/neovi{101: }|\n+      m.github.io/master/logos/neov{101: }|\n+      im-logo-300x87.png\" alt=\"Neov{101: }|\n+      im\">                         {101: }|\n+                                   {101: }|\n+        ^<a href=\"https://neovim.io/{101: }|\n+      doc/\">Documentation</a> |    {101: }|\n+                                    |\n+    ]])\n+\n+    command('set noscrollbar')\n+    screen:expect([[\n+      <h1 align=\"center\">           |\n+        <img src=\"https://raw.github|\n+      usercontent.com/neovim/neovim.|\n+      github.io/master/logos/neovim-|\n+      logo-300x87.png\" alt=\"Neovim\">|\n+                                    |\n+        ^<a href=\"https://neovim.io/d|\n+      oc/\">Documentation</a> |      |\n+        <a href=\"https://app.elem{1:@@@}|\n+                                    |\n+    ]])\n+  end)\n+\n+  it('works after resize', function()\n+    exec_lua([[\n+      vim.opt.laststatus = 0\n+      vim.cmd.vsplit('another')\n+      vim.cmd.edit(vim.fs.joinpath(vim.uv.cwd(), 'README.md'))\n+    ]])\n+    screen:expect([[\n+      ^<h1 align=\"center\">{30: }│         |\n+        <img src=\"https:/{101: }│{1:~        }|\n+      /raw.githubusercont{101: }│{1:~        }|\n+      ent.com/neovim/neov{101: }│{1:~        }|\n+      im.github.io/master{101: }│{1:~        }|\n+      /logos/neovim-logo-{101: }│{1:~        }|\n+      300x87.png\" alt=\"Ne{101: }│{1:~        }|\n+      ovim\">             {101: }│{1:~        }|\n+                         {101: }│{1:~        }|\n+                                    |\n+    ]])\n+    command('vertical resize +5')\n+    screen:expect([[\n+      ^<h1 align=\"center\">     {30: }     |\n+        <img src=\"https://raw.{101: }{1:~    }|\n+      githubusercontent.com/ne{101: }{1:~    }|\n+      ovim/neovim.github.io/ma{101: }{1:~    }|\n+      ster/logos/neovim-logo-3{101: }{1:~    }|\n+      00x87.png\" alt=\"Neovim\">{101: }{1:~    }|\n+                              {101: }{1:~    }|\n+        <a href=\"https://neovi{101: }{1:~    }|\n+      m.io/doc/\">Documentat{1:@@@}{101: }{1:~    }|\n+                                    |\n+    ]])\n+  end)\n+\n+  it('mouse click and drag on scrollbar', function()\n+    local buf = api.nvim_create_buf(true, true)\n+    local content = {}\n+    for i = 1, 50 do\n+      content[#content + 1] = ('line %d'):format(i)\n+    end\n+    api.nvim_buf_set_lines(buf, 0, -1, false, content)\n+    api.nvim_open_win(buf, true, { relative = 'editor', row = 2, col = 2, width = 10, height = 5 })\n+\n+    screen:expect([[\n+                                    |\n+      {1:~                             }|\n+      {1:~ }{4:^line 1   }{30: }{1:                  }|\n+      {1:~ }{4:line 2   }{101: }{1:                  }|\n+      {1:~ }{4:line 3   }{101: }{1:                  }|\n+      {1:~ }{4:line 4   }{101: }{1:                  }|\n+      {1:~ }{4:line 5   }{101: }{1:                  }|\n+      {1:~                             }|*2\n+                                    |\n+    ]])\n+\n+    feed('<LeftMouse><11,4>')\n+    feed('<LeftDrag><11,6>')\n+    screen:expect([[\n+                                    |\n+      {1:~                             }|\n+      {1:~ }{4:^line 46  }{101: }{1:                  }|\n+      {1:~ }{4:line 47  }{101: }{1:                  }|\n+      {1:~ }{4:line 48  }{101: }{1:                  }|\n+      {1:~ }{4:line 49  }{101: }{1:                  }|\n+      {1:~ }{4:line 50  }{30: }{1:                  }|\n+      {1:~                             }|*2\n+                                    |\n+    ]])\n+    feed('<LeftRelease><0,0>')\n+\n+    command('fclose | bnext')\n+    feed('<LeftMouse><29,4>')\n+    screen:expect([[\n+      ^line 21                      {101: }|\n+      line 22                      {101: }|\n+      line 23                      {101: }|\n+      line 24                      {30: }|\n+      line 25                      {101: }|\n+      line 26                      {101: }|\n+      line 27                      {101: }|\n+      line 28                      {101: }|\n+      line 29                      {101: }|\n+                                    |\n+    ]])\n+    feed('<LeftMouse><29,7>')\n+    screen:expect([[\n+      ^line 36                      {101: }|\n+      line 37                      {101: }|\n+      line 38                      {101: }|\n+      line 39                      {101: }|\n+      line 40                      {101: }|\n+      line 41                      {101: }|\n+      line 42                      {30: }|\n+      line 43                      {101: }|\n+      line 44                      {101: }|\n+                                    |\n+    ]])\n+  end)\n+\n+  it('getwininfo returns correct scrollbar information', function()",
            "html_url": "https://github.com/neovim/neovim/pull/35729#discussion_r2423140671",
            "id": 2423140671,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6QbjE_",
            "original_commit_id": "d55a743f540eb2e74d387a82ec5c66b5866cdd96",
            "original_line": 200,
            "original_position": 200,
            "original_start_line": null,
            "path": "test/functional/ui/scrollbar_spec.lua",
            "position": 1,
            "pull_request_review_id": 3327595358,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/35729",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423140671/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-10-11T21:29:19Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423140671",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/35729#discussion_r2423140768"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/35729"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423140768"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\n  it('handles folds and operations', function()\n```",
            "commit_id": "d55a743f540eb2e74d387a82ec5c66b5866cdd96",
            "created_at": "2025-10-11T21:29:47Z",
            "diff_hunk": "@@ -0,0 +1,340 @@\n+local t = require('test.testutil')\n+local n = require('test.functional.testnvim')()\n+local Screen = require('test.functional.ui.screen')\n+\n+local api, clear, feed, fn = n.api, n.clear, n.feed, n.fn\n+local exec_lua = n.exec_lua\n+local command = n.command\n+local eq = t.eq\n+\n+describe(\"'scrollbar'\", function()\n+  local screen\n+  before_each(function()\n+    clear()\n+    screen = Screen.new(30, 10)\n+    command('set scrollbar')\n+    command('hi Scrollbar guibg=blue')\n+    command('hi ScrollbarThumb guibg=red')\n+    screen:add_extra_attr_ids({\n+      [101] = { background = Screen.colors.Blue },\n+      [102] = { foreground = Screen.colors.Blue },\n+      [103] = { foreground = Screen.colors.Yellow },\n+    })\n+  end)\n+\n+  it('toggle scrollbar in the window with page scrolling', function()\n+    exec_lua([[\n+      local buf = vim.api.nvim_create_buf(true, true)\n+      vim.api.nvim_open_win(buf, true, {\n+        relative = \"editor\",\n+        row = 1,\n+        col = 1,\n+        width = 10,\n+        height = 5,\n+      })\n+      vim.cmd.edit(vim.fs.joinpath(vim.uv.cwd(), 'README.md'))\n+    ]])\n+\n+    screen:expect([[\n+                                    |\n+      {1:~}{4:^<h1 align}{30: }{1:                   }|\n+      {1:~}{4:=\"center\"}{101: }{1:                   }|\n+      {1:~}{4:>        }{101: }{1:                   }|\n+      {1:~}{4:  <img sr}{101: }{1:                   }|\n+      {1:~}{4:c=\"htt}{11:@@@}{101: }{1:                   }|\n+      {1:~                             }|*3\n+                                    |\n+    ]])\n+    feed(('<C-f>'):rep(30))\n+    screen:expect([[\n+                                    |\n+      {1:~}{4:^         }{101: }{1:                   }|\n+      {1:~}{4:See [`:he}{30: }{1:                   }|\n+      {1:~}{4:lp nvim-f}{101: }{1:                   }|\n+      {1:~}{4:eatures`]}{101: }{1:                   }|\n+      {1:~}{4:[nvim-}{11:@@@}{101: }{1:                   }|\n+      {1:~                             }|*3\n+                                    |\n+    ]])\n+\n+    command('setlocal noscrollbar')\n+    screen:expect([[\n+                                    |\n+      {1:~}{4:^          }{1:                   }|\n+      {1:~}{4:See [`:hel}{1:                   }|\n+      {1:~}{4:p nvim-fea}{1:                   }|\n+      {1:~}{4:tures`][nv}{1:                   }|\n+      {1:~}{4:im-feat}{11:@@@}{1:                   }|\n+      {1:~                             }|*3\n+                                    |\n+    ]])\n+\n+    command('fclose | bnext')\n+    feed(('<C-b>'):rep(15))\n+    screen:expect([[\n+      <h1 align=\"center\">          {30: }|\n+        <img src=\"https://raw.githu{101: }|\n+      busercontent.com/neovim/neovi{101: }|\n+      m.github.io/master/logos/neov{101: }|\n+      im-logo-300x87.png\" alt=\"Neov{101: }|\n+      im\">                         {101: }|\n+                                   {101: }|\n+        ^<a href=\"https://neovim.io/{101: }|\n+      doc/\">Documentation</a> |    {101: }|\n+                                    |\n+    ]])\n+\n+    command('set noscrollbar')\n+    screen:expect([[\n+      <h1 align=\"center\">           |\n+        <img src=\"https://raw.github|\n+      usercontent.com/neovim/neovim.|\n+      github.io/master/logos/neovim-|\n+      logo-300x87.png\" alt=\"Neovim\">|\n+                                    |\n+        ^<a href=\"https://neovim.io/d|\n+      oc/\">Documentation</a> |      |\n+        <a href=\"https://app.elem{1:@@@}|\n+                                    |\n+    ]])\n+  end)\n+\n+  it('works after resize', function()\n+    exec_lua([[\n+      vim.opt.laststatus = 0\n+      vim.cmd.vsplit('another')\n+      vim.cmd.edit(vim.fs.joinpath(vim.uv.cwd(), 'README.md'))\n+    ]])\n+    screen:expect([[\n+      ^<h1 align=\"center\">{30: }│         |\n+        <img src=\"https:/{101: }│{1:~        }|\n+      /raw.githubusercont{101: }│{1:~        }|\n+      ent.com/neovim/neov{101: }│{1:~        }|\n+      im.github.io/master{101: }│{1:~        }|\n+      /logos/neovim-logo-{101: }│{1:~        }|\n+      300x87.png\" alt=\"Ne{101: }│{1:~        }|\n+      ovim\">             {101: }│{1:~        }|\n+                         {101: }│{1:~        }|\n+                                    |\n+    ]])\n+    command('vertical resize +5')\n+    screen:expect([[\n+      ^<h1 align=\"center\">     {30: }     |\n+        <img src=\"https://raw.{101: }{1:~    }|\n+      githubusercontent.com/ne{101: }{1:~    }|\n+      ovim/neovim.github.io/ma{101: }{1:~    }|\n+      ster/logos/neovim-logo-3{101: }{1:~    }|\n+      00x87.png\" alt=\"Neovim\">{101: }{1:~    }|\n+                              {101: }{1:~    }|\n+        <a href=\"https://neovi{101: }{1:~    }|\n+      m.io/doc/\">Documentat{1:@@@}{101: }{1:~    }|\n+                                    |\n+    ]])\n+  end)\n+\n+  it('mouse click and drag on scrollbar', function()\n+    local buf = api.nvim_create_buf(true, true)\n+    local content = {}\n+    for i = 1, 50 do\n+      content[#content + 1] = ('line %d'):format(i)\n+    end\n+    api.nvim_buf_set_lines(buf, 0, -1, false, content)\n+    api.nvim_open_win(buf, true, { relative = 'editor', row = 2, col = 2, width = 10, height = 5 })\n+\n+    screen:expect([[\n+                                    |\n+      {1:~                             }|\n+      {1:~ }{4:^line 1   }{30: }{1:                  }|\n+      {1:~ }{4:line 2   }{101: }{1:                  }|\n+      {1:~ }{4:line 3   }{101: }{1:                  }|\n+      {1:~ }{4:line 4   }{101: }{1:                  }|\n+      {1:~ }{4:line 5   }{101: }{1:                  }|\n+      {1:~                             }|*2\n+                                    |\n+    ]])\n+\n+    feed('<LeftMouse><11,4>')\n+    feed('<LeftDrag><11,6>')\n+    screen:expect([[\n+                                    |\n+      {1:~                             }|\n+      {1:~ }{4:^line 46  }{101: }{1:                  }|\n+      {1:~ }{4:line 47  }{101: }{1:                  }|\n+      {1:~ }{4:line 48  }{101: }{1:                  }|\n+      {1:~ }{4:line 49  }{101: }{1:                  }|\n+      {1:~ }{4:line 50  }{30: }{1:                  }|\n+      {1:~                             }|*2\n+                                    |\n+    ]])\n+    feed('<LeftRelease><0,0>')\n+\n+    command('fclose | bnext')\n+    feed('<LeftMouse><29,4>')\n+    screen:expect([[\n+      ^line 21                      {101: }|\n+      line 22                      {101: }|\n+      line 23                      {101: }|\n+      line 24                      {30: }|\n+      line 25                      {101: }|\n+      line 26                      {101: }|\n+      line 27                      {101: }|\n+      line 28                      {101: }|\n+      line 29                      {101: }|\n+                                    |\n+    ]])\n+    feed('<LeftMouse><29,7>')\n+    screen:expect([[\n+      ^line 36                      {101: }|\n+      line 37                      {101: }|\n+      line 38                      {101: }|\n+      line 39                      {101: }|\n+      line 40                      {101: }|\n+      line 41                      {101: }|\n+      line 42                      {30: }|\n+      line 43                      {101: }|\n+      line 44                      {101: }|\n+                                    |\n+    ]])\n+  end)\n+\n+  it('getwininfo returns correct scrollbar information', function()\n+    local buf = api.nvim_create_buf(true, true)\n+    local lines = {}\n+    for i = 1, 100 do\n+      lines[i] = string.format('L%d', i)\n+    end\n+    api.nvim_buf_set_lines(buf, 0, -1, false, lines)\n+    api.nvim_open_win(buf, true, { relative = 'editor', row = 1, col = 1, width = 20, height = 10 })\n+    local curwin = api.nvim_get_current_win()\n+\n+    -- topline = 1\n+    local info = fn.getwininfo(curwin)[1]\n+    eq(1, info.scrollbar.visible)\n+    eq(10, info.scrollbar.visible_lines)\n+    eq(100, info.scrollbar.total_lines)\n+    eq(0, info.scrollbar.scroll_offset)\n+    eq(0.0, info.scrollbar.scroll_ratio)\n+\n+    -- validate visible_ratio\n+    local expected_visible_ratio = 10 / 100\n+    eq(true, math.abs(info.scrollbar.visible_ratio - expected_visible_ratio) < 0.001)\n+\n+    -- scroll to middle\n+    command('normal! 50G')\n+    info = fn.getwininfo(curwin)[1]\n+    local scroll_offset = info.scrollbar.scroll_offset\n+    local total_lines = info.scrollbar.total_lines\n+\n+    -- validate scroll_ratio\n+    local expected_ratio = scroll_offset / (total_lines - 10)\n+    assert(math.abs(info.scrollbar.scroll_ratio - expected_ratio) < 0.001)\n+    assert(info.scrollbar.scroll_ratio > 0.4 and info.scrollbar.scroll_ratio < 0.6)\n+\n+    -- move to bottom\n+    command('normal! G')\n+    info = fn.getwininfo(curwin)[1]\n+    eq(true, info.scrollbar.scroll_ratio > 0.99)\n+\n+    command('set wrap')\n+    api.nvim_buf_set_lines(0, 0, 1, false, { string.rep('a', 100) })\n+    command('normal! gg')\n+\n+    local info_wrap = fn.getwininfo(curwin)[1]\n+    eq(true, info_wrap.scrollbar.total_lines > 100)\n+\n+    command('setlocal nowrap')\n+    local info_nowrap = fn.getwininfo(curwin)[1]\n+    eq(100, info_nowrap.scrollbar.total_lines)\n+  end)\n+\n+  it('scrollbar handles folds and operations correctly', function()",
            "html_url": "https://github.com/neovim/neovim/pull/35729#discussion_r2423140768",
            "id": 2423140768,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6QbjGg",
            "original_commit_id": "d55a743f540eb2e74d387a82ec5c66b5866cdd96",
            "original_line": 250,
            "original_position": 250,
            "original_start_line": null,
            "path": "test/functional/ui/scrollbar_spec.lua",
            "position": 1,
            "pull_request_review_id": 3327595480,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/35729",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423140768/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-10-11T21:29:47Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423140768",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/35729#discussion_r2423204293"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/35729"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423204293"
                }
            },
            "author_association": "MEMBER",
            "body": "I think it's O(n) with regards to the buffer's total line count, which is quite expensive, and computing this using `winsaveview()` and `nvim_win_text_height` doesn't seem hard.\r\n\r\nLook at how the scrollbar position is computed. It's just some `win_text_height()` calls.",
            "commit_id": "562d28f9855df4a600da911ab497c37ed0e715c7",
            "created_at": "2025-10-11T23:16:53Z",
            "diff_hunk": "@@ -4492,6 +4492,33 @@ getwininfo([{winid}])                                             *getwininfo()*\n \t\t\twinnr\t\twindow number\n \t\t\twinrow\t\ttopmost screen line of the window;\n \t\t\t\t\t\"row\" from |win_screenpos()|\n+\t\t  scrollbar\tDictionary with scrollbar information. Only\n+\t\t\t\t\tpresent when the window has a scrollbar.",
            "html_url": "https://github.com/neovim/neovim/pull/35729#discussion_r2423204293",
            "id": 2423204293,
            "in_reply_to_id": 2423135833,
            "line": 4496,
            "node_id": "PRRC_kwDOAPphoM6QbynF",
            "original_commit_id": "d55a743f540eb2e74d387a82ec5c66b5866cdd96",
            "original_line": 4496,
            "original_position": 5,
            "original_start_line": 4495,
            "path": "runtime/doc/vimfn.txt",
            "position": 5,
            "pull_request_review_id": 3327677946,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/35729",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423204293/reactions"
            },
            "side": "RIGHT",
            "start_line": 4495,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-10-11T23:21:43Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423204293",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/35729#discussion_r2423205903"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/35729"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423205903"
                }
            },
            "author_association": "MEMBER",
            "body": "Storing this here does not make sense. The number of screen lines depends on the window width and window options.",
            "commit_id": "5886bec27390c3170536b514e66a463cab1ad984",
            "created_at": "2025-10-11T23:20:46Z",
            "diff_hunk": "@@ -42,6 +42,7 @@ typedef struct {\n ///\n typedef struct {\n   linenr_T ml_line_count;       // number of lines in the buffer\n+  linenr_T ml_vline_count;      // visible lines count",
            "html_url": "https://github.com/neovim/neovim/pull/35729#discussion_r2423205903",
            "id": 2423205903,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6QbzAP",
            "original_commit_id": "d55a743f540eb2e74d387a82ec5c66b5866cdd96",
            "original_line": 45,
            "original_position": 4,
            "original_start_line": null,
            "path": "src/nvim/memline_defs.h",
            "position": 1,
            "pull_request_review_id": 3327681361,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/35729",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423205903/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-10-11T23:23:03Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423205903",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/35729#discussion_r2423207586"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/35729"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423207586"
                }
            },
            "author_association": "MEMBER",
            "body": "If it's not hard then we shouldn't be doing this in core. \r\n\r\nAlternatively, perhaps what we need is a way for plugins to tell Nvim where the scroll position is. So,\r\n\r\n- in the C core we only *draw* the scrollbar, not compute it.\r\n- in Lua core, we compute the scrollbars in an async/debounced fashion, so that it never is a performance issue. \r\n\r\nI am not in favor of adding a 'scrollbar' that requires users to decide if they want bad performance. That just shouldn't be a thing. Same for 'ruler'.",
            "commit_id": "562d28f9855df4a600da911ab497c37ed0e715c7",
            "created_at": "2025-10-11T23:27:03Z",
            "diff_hunk": "@@ -4492,6 +4492,33 @@ getwininfo([{winid}])                                             *getwininfo()*\n \t\t\twinnr\t\twindow number\n \t\t\twinrow\t\ttopmost screen line of the window;\n \t\t\t\t\t\"row\" from |win_screenpos()|\n+\t\t  scrollbar\tDictionary with scrollbar information. Only\n+\t\t\t\t\tpresent when the window has a scrollbar.",
            "html_url": "https://github.com/neovim/neovim/pull/35729#discussion_r2423207586",
            "id": 2423207586,
            "in_reply_to_id": 2423135833,
            "line": 4496,
            "node_id": "PRRC_kwDOAPphoM6Qbzai",
            "original_commit_id": "d55a743f540eb2e74d387a82ec5c66b5866cdd96",
            "original_line": 4496,
            "original_position": 5,
            "original_start_line": 4495,
            "path": "runtime/doc/vimfn.txt",
            "position": 5,
            "pull_request_review_id": 3327683198,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/35729",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423207586/reactions"
            },
            "side": "RIGHT",
            "start_line": 4495,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-10-12T01:25:22Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423207586",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/35729#discussion_r2423261829"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/35729"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423261829"
                }
            },
            "author_association": "MEMBER",
            "body": "auto import by clangd 😮‍💨",
            "commit_id": "d55a743f540eb2e74d387a82ec5c66b5866cdd96",
            "created_at": "2025-10-12T01:38:59Z",
            "diff_hunk": "@@ -14,6 +14,7 @@\n // - Add documentation! \"desc\" in options.lua, and any other related places.\n // - Add an entry in runtime/optwin.vim.\n \n+#include \"nvim/winfloat.h\"",
            "html_url": "https://github.com/neovim/neovim/pull/35729#discussion_r2423261829",
            "id": 2423261829,
            "in_reply_to_id": 2423138666,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6QcAqF",
            "original_commit_id": "d55a743f540eb2e74d387a82ec5c66b5866cdd96",
            "original_line": 17,
            "original_position": 4,
            "original_start_line": null,
            "path": "src/nvim/option.c",
            "position": 1,
            "pull_request_review_id": 3327772868,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/35729",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423261829/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-10-12T01:38:59Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423261829",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/35729#discussion_r2423263380"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/35729"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423263380"
                }
            },
            "author_association": "MEMBER",
            "body": "oh right, the initial idea was to avoid unnecessary calls to win_text_height.",
            "commit_id": "5886bec27390c3170536b514e66a463cab1ad984",
            "created_at": "2025-10-12T01:40:19Z",
            "diff_hunk": "@@ -42,6 +42,7 @@ typedef struct {\n ///\n typedef struct {\n   linenr_T ml_line_count;       // number of lines in the buffer\n+  linenr_T ml_vline_count;      // visible lines count",
            "html_url": "https://github.com/neovim/neovim/pull/35729#discussion_r2423263380",
            "id": 2423263380,
            "in_reply_to_id": 2423205903,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6QcBCU",
            "original_commit_id": "d55a743f540eb2e74d387a82ec5c66b5866cdd96",
            "original_line": 45,
            "original_position": 4,
            "original_start_line": null,
            "path": "src/nvim/memline_defs.h",
            "position": 1,
            "pull_request_review_id": 3327775380,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/35729",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423263380/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-10-12T01:54:04Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423263380",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir",
                "user_view_type": "public"
            }
        }
    ],
    "comment_regular_data": [
        {
            "author_association": "MEMBER",
            "body": "The presentation of scrollbar in a floating window is somewhat \"easy\" since they already support borders (unlike regular windows: https://github.com/neovim/neovim/issues/35694 ) .\r\n\r\nHowever, the more valuable thing would be to expose the \"scroll position\" to plugins. That is complex to calculate, as https://github.com/lewis6991/satellite.nvim demonstrates. It requires consideration of folds, virtual text, etc. Seems like it would be useful to add it as event-data to the `WinScrolled` event?",
            "created_at": "2025-09-12T17:26:28Z",
            "html_url": "https://github.com/neovim/neovim/pull/35729#issuecomment-3286259373",
            "id": 3286259373,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/35729",
            "node_id": "IC_kwDOAPphoM7D4Fat",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3286259373/reactions"
            },
            "updated_at": "2025-09-12T17:26:28Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3286259373",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "original idea was to implement  vim's `popup-scrollbar`. Vim renders the scrollbar on the left side of the right border, PR rendering it on the right border for better  behavior.\r\n\r\n> However, the more valuable thing would be to expose the \"scroll position\" to plugins. That is complex to calculate, as https://github.com/lewis6991/satellite.nvim demonstrates. It requires consideration of folds, virtual text, etc. Seems like it would be useful to add it as event-data to the WinScrolled event?\r\n\r\nadd the screen position and size of the scrollbar slider into event-data ? ",
            "created_at": "2025-09-13T05:40:16Z",
            "html_url": "https://github.com/neovim/neovim/pull/35729#issuecomment-3287618428",
            "id": 3287618428,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/35729",
            "node_id": "IC_kwDOAPphoM7D9RN8",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3287618428/reactions"
            },
            "updated_at": "2025-09-13T09:02:59Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3287618428",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> original idea was to implement vim's `popup-scrollbar`.\r\n\r\nSure, it will be nice to have this. But don't think we need to name the highlight groups, and other things, in a way that restricts it to \"floating windows\" only.\r\n\r\n> add the screen position and size of the scrollbar slider into event-data ?\r\n\r\nyes, any useful info we can provide as event data is worth considering.",
            "created_at": "2025-09-13T19:55:49Z",
            "html_url": "https://github.com/neovim/neovim/pull/35729#issuecomment-3288782307",
            "id": 3288782307,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/35729",
            "node_id": "IC_kwDOAPphoM7EBtXj",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3288782307/reactions"
            },
            "updated_at": "2025-09-13T19:57:04Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3288782307",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "added mouse click and drag support",
            "created_at": "2025-09-15T07:43:54Z",
            "html_url": "https://github.com/neovim/neovim/pull/35729#issuecomment-3290874153",
            "id": 3290874153,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/35729",
            "node_id": "IC_kwDOAPphoM7EJsEp",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3290874153/reactions"
            },
            "updated_at": "2025-09-15T07:43:54Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3290874153",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "With the update in this PR, can the following line be removed?\r\n\r\nhttps://github.com/neovim/neovim/blob/fb2d736481eea591be1b956c379f28bf830e3cb7/runtime/doc/api.txt#L447\r\n\r\n(I noticed it when testing prior to leaving my [comment](https://github.com/neovim/neovim/pull/35729#discussion_r2357379561))",
            "created_at": "2025-09-18T03:01:23Z",
            "html_url": "https://github.com/neovim/neovim/pull/35729#issuecomment-3305244604",
            "id": 3305244604,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/35729",
            "node_id": "IC_kwDOAPphoM7FAge8",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 1,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3305244604/reactions"
            },
            "updated_at": "2025-09-18T03:01:23Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3305244604",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/541289?v=4",
                "events_url": "https://api.github.com/users/dstein64/events{/privacy}",
                "followers_url": "https://api.github.com/users/dstein64/followers",
                "following_url": "https://api.github.com/users/dstein64/following{/other_user}",
                "gists_url": "https://api.github.com/users/dstein64/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/dstein64",
                "id": 541289,
                "login": "dstein64",
                "node_id": "MDQ6VXNlcjU0MTI4OQ==",
                "organizations_url": "https://api.github.com/users/dstein64/orgs",
                "received_events_url": "https://api.github.com/users/dstein64/received_events",
                "repos_url": "https://api.github.com/users/dstein64/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/dstein64/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/dstein64/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/dstein64",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> If it's not hard then we shouldn't be doing this in core.\r\n> \r\n> Alternatively, perhaps what we need is a way for plugins to tell Nvim where the scroll position is. So,\r\n> \r\n>     * in the C core we draw the scrollbar, but don't compute it.\r\n> \r\n>     * in Lua core, we compute the scrollbars in an async/debounced fashion, so that it never is a performance issue.\r\n> \r\n> \r\n> I am not in favor of adding a 'scrollbar' that requires users to decide if the want bad performance. That just shouldn't be a thing. Same for 'ruler'.\r\n\r\nI though about this. 'scrollbar' can instead be a number option that specifies the scroll percentage (or `-1` to mean no scrollbar). However, one may want to control the size of the scrollbar knob as well, in which case it needs to be two numbers specifying the starting and ending scroll percentages (corresponding to the start and the end of the viewport) instead.\r\n\r\nAdditionally, regarding how to compute the scroll position, there is a trade-off between accuracy and performance:\r\n- Using only physical line counts and numbers (like the `p` or `P` statusline items) may be inaccurate when there are long wrapped lines, diff filler lines, virtual lines, etc., but is O(1).\r\n- Using screen line counts and numbers (from e.g. `nvim_win_text_height`) is somewhat more accurate, but is O(n).",
            "created_at": "2025-10-12T00:27:45Z",
            "html_url": "https://github.com/neovim/neovim/pull/35729#issuecomment-3393766904",
            "id": 3393766904,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/35729",
            "node_id": "IC_kwDOAPphoM7KSMX4",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3393766904/reactions"
            },
            "updated_at": "2025-10-12T00:30:04Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3393766904",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> 'scrollbar' can instead be a number option that specifies the scroll percentage ...\r\n\r\nSure, or even an API like `nvim_win_set_scroll` may be appropriate. 👍 \r\n\r\n> Using only physical line counts and numbers (like the `p` or `P` statusline items) may be inaccurate when there are long wrapped lines, diff filler lines, virtual lines, etc., but is O(1).\r\n\r\nYes, and based on my experience--without considering those details, scrollbars are basically useless.\r\n\r\nSo as a starting point, I think:\r\n\r\n- the `getwininfo()` enhancement here helps a lot. \r\n    - Plugins can decide how *often* to request that info. \r\n    - We can (later) try to *optimize* it internally somehow.\r\n- either in this PR or a followup, we can consider providing a default Lua impl that sets the scroll info.",
            "created_at": "2025-10-12T01:34:14Z",
            "html_url": "https://github.com/neovim/neovim/pull/35729#issuecomment-3393811358",
            "id": 3393811358,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/35729",
            "node_id": "IC_kwDOAPphoM7KSXOe",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3393811358/reactions"
            },
            "updated_at": "2025-10-12T01:34:28Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3393811358",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Thanks for the suggestions ..mark this as a draft. I’ll reorganize it :)",
            "created_at": "2025-10-12T01:49:12Z",
            "html_url": "https://github.com/neovim/neovim/pull/35729#issuecomment-3393823567",
            "id": 3393823567,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/35729",
            "node_id": "IC_kwDOAPphoM7KSaNP",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3393823567/reactions"
            },
            "updated_at": "2025-10-12T01:49:12Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3393823567",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> * the `getwininfo()` enhancement here helps a lot.    \r\n>   * Plugins can decide how _often_ to request that info.\r\n\r\nHmm, `getwininfo()` doesn't support specifying how much info to return, so if scroll position information need to be provided directly by `getwininfo()`, it'll add a large cost to every `getwininfo()` call. (Possibly related: #24232) On the other hand, `topline` and `botline` from `getwininfo()` are already sufficient for computing scroll position (usually; skipcol may be needed too, but only `winsaveview()` provides it for now).",
            "created_at": "2025-10-12T01:53:33Z",
            "html_url": "https://github.com/neovim/neovim/pull/35729#issuecomment-3393826132",
            "id": 3393826132,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/35729",
            "node_id": "IC_kwDOAPphoM7KSa1U",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3393826132/reactions"
            },
            "updated_at": "2025-10-12T02:05:00Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3393826132",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        }
    ],
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/35729/comments",
    "commits_url": "https://api.github.com/repos/neovim/neovim/pulls/35729/commits",
    "created_at": "2025-09-12T08:26:49Z",
    "diff_url": "https://github.com/neovim/neovim/pull/35729.diff",
    "draft": true,
    "head": {
        "label": "glepnir:float_scrollbar",
        "ref": "float_scrollbar",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/glepnir/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/glepnir/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/glepnir/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/glepnir/neovim/branches{/branch}",
            "clone_url": "https://github.com/glepnir/neovim.git",
            "collaborators_url": "https://api.github.com/repos/glepnir/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/glepnir/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/glepnir/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/glepnir/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/glepnir/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/glepnir/neovim/contributors",
            "created_at": "2022-07-17T05:15:58Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/glepnir/neovim/deployments",
            "description": "Vim-fork focused on extensibility and usability",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/glepnir/neovim/downloads",
            "events_url": "https://api.github.com/repos/glepnir/neovim/events",
            "fork": true,
            "forks": 1,
            "forks_count": 1,
            "forks_url": "https://api.github.com/repos/glepnir/neovim/forks",
            "full_name": "glepnir/neovim",
            "git_commits_url": "https://api.github.com/repos/glepnir/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/glepnir/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/glepnir/neovim/git/tags{/sha}",
            "git_url": "git://github.com/glepnir/neovim.git",
            "has_discussions": false,
            "has_downloads": true,
            "has_issues": false,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://neovim.io",
            "hooks_url": "https://api.github.com/repos/glepnir/neovim/hooks",
            "html_url": "https://github.com/glepnir/neovim",
            "id": 514752985,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/glepnir/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/glepnir/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/glepnir/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/glepnir/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/glepnir/neovim/labels{/name}",
            "language": "Vim Script",
            "languages_url": "https://api.github.com/repos/glepnir/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/glepnir/neovim/merges",
            "milestones_url": "https://api.github.com/repos/glepnir/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "R_kgDOHq6B2Q",
            "notifications_url": "https://api.github.com/repos/glepnir/neovim/notifications{?since,all,participating}",
            "open_issues": 0,
            "open_issues_count": 0,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir",
                "user_view_type": "public"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/glepnir/neovim/pulls{/number}",
            "pushed_at": "2025-10-13T06:57:34Z",
            "releases_url": "https://api.github.com/repos/glepnir/neovim/releases{/id}",
            "size": 340748,
            "ssh_url": "git@github.com:glepnir/neovim.git",
            "stargazers_count": 2,
            "stargazers_url": "https://api.github.com/repos/glepnir/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/glepnir/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/glepnir/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/glepnir/neovim/subscription",
            "svn_url": "https://github.com/glepnir/neovim",
            "tags_url": "https://api.github.com/repos/glepnir/neovim/tags",
            "teams_url": "https://api.github.com/repos/glepnir/neovim/teams",
            "topics": [],
            "trees_url": "https://api.github.com/repos/glepnir/neovim/git/trees{/sha}",
            "updated_at": "2025-10-13T05:54:48Z",
            "url": "https://api.github.com/repos/glepnir/neovim",
            "visibility": "public",
            "watchers": 2,
            "watchers_count": 2,
            "web_commit_signoff_required": false
        },
        "sha": "562d28f9855df4a600da911ab497c37ed0e715c7",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
            "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
            "followers_url": "https://api.github.com/users/glepnir/followers",
            "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
            "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/glepnir",
            "id": 41671631,
            "login": "glepnir",
            "node_id": "MDQ6VXNlcjQxNjcxNjMx",
            "organizations_url": "https://api.github.com/users/glepnir/orgs",
            "received_events_url": "https://api.github.com/users/glepnir/received_events",
            "repos_url": "https://api.github.com/users/glepnir/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/glepnir",
            "user_view_type": "public"
        }
    },
    "html_url": "https://github.com/neovim/neovim/pull/35729",
    "id": 2821754757,
    "issue_url": "https://api.github.com/repos/neovim/neovim/issues/35729",
    "labels": [],
    "locked": false,
    "merge_commit_sha": "3b91206f51c81ef11c35c8cb0729620454ad2c52",
    "merged_at": null,
    "milestone": null,
    "node_id": "PR_kwDOAPphoM6oMI-F",
    "number": 35729,
    "patch_url": "https://github.com/neovim/neovim/pull/35729.patch",
    "requested_reviewers": [],
    "requested_teams": [],
    "review_comment_url": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}",
    "review_comments_url": "https://api.github.com/repos/neovim/neovim/pulls/35729/comments",
    "state": "open",
    "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/562d28f9855df4a600da911ab497c37ed0e715c7",
    "title": "feat(ui): supports render scrollbar on window",
    "updated_at": "2025-10-12T02:05:00Z",
    "url": "https://api.github.com/repos/neovim/neovim/pulls/35729",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
        "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
        "followers_url": "https://api.github.com/users/glepnir/followers",
        "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
        "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/glepnir",
        "id": 41671631,
        "login": "glepnir",
        "node_id": "MDQ6VXNlcjQxNjcxNjMx",
        "organizations_url": "https://api.github.com/users/glepnir/orgs",
        "received_events_url": "https://api.github.com/users/glepnir/received_events",
        "repos_url": "https://api.github.com/users/glepnir/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/glepnir",
        "user_view_type": "public"
    }
}