{
    "_links": {
        "comments": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/34788/comments"
        },
        "commits": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/34788/commits"
        },
        "html": {
            "href": "https://github.com/neovim/neovim/pull/34788"
        },
        "issue": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/34788"
        },
        "review_comment": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}"
        },
        "review_comments": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/34788/comments"
        },
        "self": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/34788"
        },
        "statuses": {
            "href": "https://api.github.com/repos/neovim/neovim/statuses/7940ff19040585be134feb020b2692f56d037e96"
        }
    },
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "auto_merge": null,
    "base": {
        "label": "neovim:master",
        "ref": "master",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/neovim/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/neovim/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/neovim/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/neovim/neovim/branches{/branch}",
            "clone_url": "https://github.com/neovim/neovim.git",
            "collaborators_url": "https://api.github.com/repos/neovim/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/neovim/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/neovim/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/neovim/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/neovim/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/neovim/neovim/contributors",
            "created_at": "2014-01-31T13:39:22Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/neovim/neovim/deployments",
            "description": "Vim-fork focused on extensibility and usability",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/neovim/neovim/downloads",
            "events_url": "https://api.github.com/repos/neovim/neovim/events",
            "fork": false,
            "forks": 6410,
            "forks_count": 6410,
            "forks_url": "https://api.github.com/repos/neovim/neovim/forks",
            "full_name": "neovim/neovim",
            "git_commits_url": "https://api.github.com/repos/neovim/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/neovim/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/neovim/neovim/git/tags{/sha}",
            "git_url": "git://github.com/neovim/neovim.git",
            "has_discussions": true,
            "has_downloads": true,
            "has_issues": true,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://neovim.io",
            "hooks_url": "https://api.github.com/repos/neovim/neovim/hooks",
            "html_url": "https://github.com/neovim/neovim",
            "id": 16408992,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/neovim/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/neovim/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/neovim/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/neovim/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/neovim/neovim/labels{/name}",
            "language": "Vim Script",
            "languages_url": "https://api.github.com/repos/neovim/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/neovim/neovim/merges",
            "milestones_url": "https://api.github.com/repos/neovim/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "MDEwOlJlcG9zaXRvcnkxNjQwODk5Mg==",
            "notifications_url": "https://api.github.com/repos/neovim/neovim/notifications{?since,all,participating}",
            "open_issues": 2075,
            "open_issues_count": 2075,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
                "events_url": "https://api.github.com/users/neovim/events{/privacy}",
                "followers_url": "https://api.github.com/users/neovim/followers",
                "following_url": "https://api.github.com/users/neovim/following{/other_user}",
                "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/neovim",
                "id": 6471485,
                "login": "neovim",
                "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
                "organizations_url": "https://api.github.com/users/neovim/orgs",
                "received_events_url": "https://api.github.com/users/neovim/received_events",
                "repos_url": "https://api.github.com/users/neovim/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
                "type": "Organization",
                "url": "https://api.github.com/users/neovim",
                "user_view_type": "public"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/neovim/neovim/pulls{/number}",
            "pushed_at": "2025-11-11T02:27:13Z",
            "releases_url": "https://api.github.com/repos/neovim/neovim/releases{/id}",
            "size": 351567,
            "ssh_url": "git@github.com:neovim/neovim.git",
            "stargazers_count": 94158,
            "stargazers_url": "https://api.github.com/repos/neovim/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/neovim/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/neovim/neovim/subscription",
            "svn_url": "https://github.com/neovim/neovim",
            "tags_url": "https://api.github.com/repos/neovim/neovim/tags",
            "teams_url": "https://api.github.com/repos/neovim/neovim/teams",
            "topics": [
                "api",
                "c",
                "lua",
                "neovim",
                "nvim",
                "text-editor",
                "vim"
            ],
            "trees_url": "https://api.github.com/repos/neovim/neovim/git/trees{/sha}",
            "updated_at": "2025-11-11T02:27:18Z",
            "url": "https://api.github.com/repos/neovim/neovim",
            "visibility": "public",
            "watchers": 94158,
            "watchers_count": 94158,
            "web_commit_signoff_required": false
        },
        "sha": "9fc985bc986868aa1b66c8fc6357e2f076325df0",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
            "events_url": "https://api.github.com/users/neovim/events{/privacy}",
            "followers_url": "https://api.github.com/users/neovim/followers",
            "following_url": "https://api.github.com/users/neovim/following{/other_user}",
            "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/neovim",
            "id": 6471485,
            "login": "neovim",
            "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
            "organizations_url": "https://api.github.com/users/neovim/orgs",
            "received_events_url": "https://api.github.com/users/neovim/received_events",
            "repos_url": "https://api.github.com/users/neovim/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
            "type": "Organization",
            "url": "https://api.github.com/users/neovim",
            "user_view_type": "public"
        }
    },
    "body": "### Problem:\r\n\":restart\" always executes \":qall\" on the server in order to exit it. \r\nhttps://github.com/neovim/neovim/pull/33953#discussion_r2119590367\r\n\r\n### Solution:\r\nAdd an arg to \":restart\" as \":restart +cmd\" to control how the server exits.\r\n",
    "closed_at": "2025-07-24T02:45:31Z",
    "comment_data": [
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34788#discussion_r2186078752"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34788"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2186078752"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "TODO: revert this change",
            "commit_id": "7940ff19040585be134feb020b2692f56d037e96",
            "created_at": "2025-07-04T20:26:15Z",
            "diff_hunk": "@@ -3873,7 +3873,7 @@ describe('TUI client', function()\n     feed_data(':restart!\\n')\n     screen_client:expect([[\n       ^                                                  |\n-      {4:~                                                 }|*4\n+      {3:~}                                                 |*4",
            "html_url": "https://github.com/neovim/neovim/pull/34788#discussion_r2186078752",
            "id": 2186078752,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6CTOog",
            "original_commit_id": "75c670101f76cb62f44c6f560b9f3e14eaa38787",
            "original_line": 3876,
            "original_position": 5,
            "original_start_line": null,
            "path": "test/functional/terminal/tui_spec.lua",
            "position": 1,
            "pull_request_review_id": 2988286947,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34788",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2186078752/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-07-05T07:18:56Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2186078752",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/94102031?v=4",
                "events_url": "https://api.github.com/users/sathya-pramodh/events{/privacy}",
                "followers_url": "https://api.github.com/users/sathya-pramodh/followers",
                "following_url": "https://api.github.com/users/sathya-pramodh/following{/other_user}",
                "gists_url": "https://api.github.com/users/sathya-pramodh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/sathya-pramodh",
                "id": 94102031,
                "login": "sathya-pramodh",
                "node_id": "U_kgDOBZviDw",
                "organizations_url": "https://api.github.com/users/sathya-pramodh/orgs",
                "received_events_url": "https://api.github.com/users/sathya-pramodh/received_events",
                "repos_url": "https://api.github.com/users/sathya-pramodh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/sathya-pramodh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/sathya-pramodh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/sathya-pramodh",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34788#discussion_r2188742153"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34788"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2188742153"
                }
            },
            "author_association": "MEMBER",
            "body": "also need to handle the case where the +cmd didnt cause an exit nor an error ?",
            "commit_id": "7940ff19040585be134feb020b2692f56d037e96",
            "created_at": "2025-07-06T23:50:56Z",
            "diff_hunk": "@@ -4839,7 +4840,17 @@ static void ex_quitall_or_restart(exarg_T *eap)\n   Error err = ERROR_INIT;\n   if ((eap->forceit || !check_changed_any(false, false))\n       && (eap->cmdidx != CMD_restart || remote_ui_restart(current_ui, &err))) {\n-    getout(0);\n+    if (eap->cmdidx == CMD_restart) {\n+      char *quit_cmd = (eap->do_ecmd_cmd) ? eap->do_ecmd_cmd : (eap->forceit) ? \"qall!\" : \"qall\";\n+      nvim_command(cstr_as_string(quit_cmd), &err);\n+      if (ERROR_SET(&err)) {\n+        emsg(err.msg);  // Could not exit\n+        api_clear_error(&err);",
            "html_url": "https://github.com/neovim/neovim/pull/34788#discussion_r2188742153",
            "id": 2188742153,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6CdY4J",
            "original_commit_id": "1a4d370212da4619c08024678c854b5609f2ccc5",
            "original_line": 4848,
            "original_position": 18,
            "original_start_line": 4846,
            "path": "src/nvim/ex_docmd.c",
            "position": 1,
            "pull_request_review_id": 2991841271,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34788",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2188742153/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-07-06T23:50:56Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2188742153",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34788#discussion_r2188837508"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34788"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2188837508"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "If +cmd doesn't error and doesn't quit the server we are at a state where the UI has attached to the newly created server and the \"dangling\" server is at the end of the if-else block. We could just call `getout(0)` if we get there by logging an error message (would just need to remove the else, the log can go after this error check).",
            "commit_id": "7940ff19040585be134feb020b2692f56d037e96",
            "created_at": "2025-07-07T02:16:51Z",
            "diff_hunk": "@@ -4839,7 +4840,17 @@ static void ex_quitall_or_restart(exarg_T *eap)\n   Error err = ERROR_INIT;\n   if ((eap->forceit || !check_changed_any(false, false))\n       && (eap->cmdidx != CMD_restart || remote_ui_restart(current_ui, &err))) {\n-    getout(0);\n+    if (eap->cmdidx == CMD_restart) {\n+      char *quit_cmd = (eap->do_ecmd_cmd) ? eap->do_ecmd_cmd : (eap->forceit) ? \"qall!\" : \"qall\";\n+      nvim_command(cstr_as_string(quit_cmd), &err);\n+      if (ERROR_SET(&err)) {\n+        emsg(err.msg);  // Could not exit\n+        api_clear_error(&err);",
            "html_url": "https://github.com/neovim/neovim/pull/34788#discussion_r2188837508",
            "id": 2188837508,
            "in_reply_to_id": 2188742153,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6CdwKE",
            "original_commit_id": "1a4d370212da4619c08024678c854b5609f2ccc5",
            "original_line": 4848,
            "original_position": 18,
            "original_start_line": 4846,
            "path": "src/nvim/ex_docmd.c",
            "position": 1,
            "pull_request_review_id": 2991976579,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34788",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2188837508/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-07-07T02:16:51Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2188837508",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/94102031?v=4",
                "events_url": "https://api.github.com/users/sathya-pramodh/events{/privacy}",
                "followers_url": "https://api.github.com/users/sathya-pramodh/followers",
                "following_url": "https://api.github.com/users/sathya-pramodh/following{/other_user}",
                "gists_url": "https://api.github.com/users/sathya-pramodh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/sathya-pramodh",
                "id": 94102031,
                "login": "sathya-pramodh",
                "node_id": "U_kgDOBZviDw",
                "organizations_url": "https://api.github.com/users/sathya-pramodh/orgs",
                "received_events_url": "https://api.github.com/users/sathya-pramodh/received_events",
                "repos_url": "https://api.github.com/users/sathya-pramodh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/sathya-pramodh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/sathya-pramodh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/sathya-pramodh",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34788#discussion_r2188847534"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34788"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2188847534"
                }
            },
            "author_association": "MEMBER",
            "body": "> We could just call `getout(0)` if we get there by logging an error message\r\n\r\nlogging *and* then call `getout` makes sense ðŸ‘ ",
            "commit_id": "7940ff19040585be134feb020b2692f56d037e96",
            "created_at": "2025-07-07T02:30:26Z",
            "diff_hunk": "@@ -4839,7 +4840,17 @@ static void ex_quitall_or_restart(exarg_T *eap)\n   Error err = ERROR_INIT;\n   if ((eap->forceit || !check_changed_any(false, false))\n       && (eap->cmdidx != CMD_restart || remote_ui_restart(current_ui, &err))) {\n-    getout(0);\n+    if (eap->cmdidx == CMD_restart) {\n+      char *quit_cmd = (eap->do_ecmd_cmd) ? eap->do_ecmd_cmd : (eap->forceit) ? \"qall!\" : \"qall\";\n+      nvim_command(cstr_as_string(quit_cmd), &err);\n+      if (ERROR_SET(&err)) {\n+        emsg(err.msg);  // Could not exit\n+        api_clear_error(&err);",
            "html_url": "https://github.com/neovim/neovim/pull/34788#discussion_r2188847534",
            "id": 2188847534,
            "in_reply_to_id": 2188742153,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6Cdymu",
            "original_commit_id": "1a4d370212da4619c08024678c854b5609f2ccc5",
            "original_line": 4848,
            "original_position": 18,
            "original_start_line": 4846,
            "path": "src/nvim/ex_docmd.c",
            "position": 1,
            "pull_request_review_id": 2991989803,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34788",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2188847534/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-07-07T02:30:27Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2188847534",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34788#discussion_r2189263423"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34788"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2189263423"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "~A small problem with this: \":restart +qall\" still triggers `getout(0)` from within `ex_quitall_or_restart` (renamed to `ex_restart` as per https://github.com/neovim/neovim/pull/34788#issuecomment-3043318938 ). I check for the `exiting` global being `false` before triggering it and it doesn't seem to be set quick enough.~\r\n\r\n~ref: https://github.com/neovim/neovim/pull/34788/files#diff-e8cf5e56e29738d0c1605f75d1b158ea0fae543b45c55e3b721f91dd10ac9b49R4869~\r\n\r\n\r\nIm just stupid......",
            "commit_id": "7940ff19040585be134feb020b2692f56d037e96",
            "created_at": "2025-07-07T07:50:54Z",
            "diff_hunk": "@@ -4839,7 +4840,17 @@ static void ex_quitall_or_restart(exarg_T *eap)\n   Error err = ERROR_INIT;\n   if ((eap->forceit || !check_changed_any(false, false))\n       && (eap->cmdidx != CMD_restart || remote_ui_restart(current_ui, &err))) {\n-    getout(0);\n+    if (eap->cmdidx == CMD_restart) {\n+      char *quit_cmd = (eap->do_ecmd_cmd) ? eap->do_ecmd_cmd : (eap->forceit) ? \"qall!\" : \"qall\";\n+      nvim_command(cstr_as_string(quit_cmd), &err);\n+      if (ERROR_SET(&err)) {\n+        emsg(err.msg);  // Could not exit\n+        api_clear_error(&err);",
            "html_url": "https://github.com/neovim/neovim/pull/34788#discussion_r2189263423",
            "id": 2189263423,
            "in_reply_to_id": 2188742153,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6CfYI_",
            "original_commit_id": "1a4d370212da4619c08024678c854b5609f2ccc5",
            "original_line": 4848,
            "original_position": 18,
            "original_start_line": 4846,
            "path": "src/nvim/ex_docmd.c",
            "position": 1,
            "pull_request_review_id": 2992605021,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34788",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2189263423/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-07-07T09:20:57Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2189263423",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/94102031?v=4",
                "events_url": "https://api.github.com/users/sathya-pramodh/events{/privacy}",
                "followers_url": "https://api.github.com/users/sathya-pramodh/followers",
                "following_url": "https://api.github.com/users/sathya-pramodh/following{/other_user}",
                "gists_url": "https://api.github.com/users/sathya-pramodh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/sathya-pramodh",
                "id": 94102031,
                "login": "sathya-pramodh",
                "node_id": "U_kgDOBZviDw",
                "organizations_url": "https://api.github.com/users/sathya-pramodh/orgs",
                "received_events_url": "https://api.github.com/users/sathya-pramodh/received_events",
                "repos_url": "https://api.github.com/users/sathya-pramodh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/sathya-pramodh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/sathya-pramodh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/sathya-pramodh",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34788#discussion_r2189474715"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34788"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2189474715"
                }
            },
            "author_association": "MEMBER",
            "body": "Don't add this. Remove `EX_BANG` instead.",
            "commit_id": "7940ff19040585be134feb020b2692f56d037e96",
            "created_at": "2025-07-07T09:22:44Z",
            "diff_hunk": "@@ -4829,22 +4830,45 @@ int before_quit_all(exarg_T *eap)\n }\n \n /// \":qall\": try to quit all windows\n-/// \":restart\": restart the Nvim server\n-static void ex_quitall_or_restart(exarg_T *eap)\n+static void ex_quitall(exarg_T *eap)\n {\n   if (before_quit_all(eap) == FAIL) {\n     return;\n   }\n   exiting = true;\n+  if (!eap->forceit && check_changed_any(false, false)) {\n+    not_exiting();\n+    return;\n+  }\n+  getout(0);\n+}\n+\n+/// \":restart\": restart the Nvim server (using \":qall\").\n+/// \":restart +cmd\": restart the Nvim server using \":cmd\".\n+static void ex_restart(exarg_T *eap)\n+{\n+  if (eap->forceit) {\n+    emsg(\"bang (!) not supported\");\n+    return;\n+  }",
            "html_url": "https://github.com/neovim/neovim/pull/34788#discussion_r2189474715",
            "id": 2189474715,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6CgLub",
            "original_commit_id": "0856ee4d700a96e67f80ff0e740c4316c45a9c16",
            "original_line": 4866,
            "original_position": 34,
            "original_start_line": 4850,
            "path": "src/nvim/ex_docmd.c",
            "position": 1,
            "pull_request_review_id": 2992926999,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34788",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2189474715/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-07-07T09:22:44Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2189474715",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34788#discussion_r2189484703"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34788"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2189484703"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Resolved: https://github.com/neovim/neovim/pull/34788/commits/0856ee4d700a96e67f80ff0e740c4316c45a9c16",
            "commit_id": "7940ff19040585be134feb020b2692f56d037e96",
            "created_at": "2025-07-07T09:27:30Z",
            "diff_hunk": "@@ -4839,7 +4840,17 @@ static void ex_quitall_or_restart(exarg_T *eap)\n   Error err = ERROR_INIT;\n   if ((eap->forceit || !check_changed_any(false, false))\n       && (eap->cmdidx != CMD_restart || remote_ui_restart(current_ui, &err))) {\n-    getout(0);\n+    if (eap->cmdidx == CMD_restart) {\n+      char *quit_cmd = (eap->do_ecmd_cmd) ? eap->do_ecmd_cmd : (eap->forceit) ? \"qall!\" : \"qall\";\n+      nvim_command(cstr_as_string(quit_cmd), &err);\n+      if (ERROR_SET(&err)) {\n+        emsg(err.msg);  // Could not exit\n+        api_clear_error(&err);",
            "html_url": "https://github.com/neovim/neovim/pull/34788#discussion_r2189484703",
            "id": 2189484703,
            "in_reply_to_id": 2188742153,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6CgOKf",
            "original_commit_id": "1a4d370212da4619c08024678c854b5609f2ccc5",
            "original_line": 4848,
            "original_position": 18,
            "original_start_line": 4846,
            "path": "src/nvim/ex_docmd.c",
            "position": 1,
            "pull_request_review_id": 2992942412,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34788",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2189484703/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-07-07T09:27:30Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2189484703",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/94102031?v=4",
                "events_url": "https://api.github.com/users/sathya-pramodh/events{/privacy}",
                "followers_url": "https://api.github.com/users/sathya-pramodh/followers",
                "following_url": "https://api.github.com/users/sathya-pramodh/following{/other_user}",
                "gists_url": "https://api.github.com/users/sathya-pramodh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/sathya-pramodh",
                "id": 94102031,
                "login": "sathya-pramodh",
                "node_id": "U_kgDOBZviDw",
                "organizations_url": "https://api.github.com/users/sathya-pramodh/orgs",
                "received_events_url": "https://api.github.com/users/sathya-pramodh/received_events",
                "repos_url": "https://api.github.com/users/sathya-pramodh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/sathya-pramodh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/sathya-pramodh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/sathya-pramodh",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34788#discussion_r2189507086"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34788"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2189507086"
                }
            },
            "author_association": "MEMBER",
            "body": "If you have this check here, doesn't this essentially make it pointless to support `:restart +qall!`?\r\n\r\nOn the other hand, if you remove this check, even `:restart +echo` will quit the server without confirmation, as you still call `getout(0)` anyway.",
            "commit_id": "7940ff19040585be134feb020b2692f56d037e96",
            "created_at": "2025-07-07T09:38:03Z",
            "diff_hunk": "@@ -4829,22 +4830,45 @@ int before_quit_all(exarg_T *eap)\n }\n \n /// \":qall\": try to quit all windows\n-/// \":restart\": restart the Nvim server\n-static void ex_quitall_or_restart(exarg_T *eap)\n+static void ex_quitall(exarg_T *eap)\n {\n   if (before_quit_all(eap) == FAIL) {\n     return;\n   }\n   exiting = true;\n+  if (!eap->forceit && check_changed_any(false, false)) {\n+    not_exiting();\n+    return;\n+  }\n+  getout(0);\n+}\n+\n+/// \":restart\": restart the Nvim server (using \":qall\").\n+/// \":restart +cmd\": restart the Nvim server using \":cmd\".\n+static void ex_restart(exarg_T *eap)\n+{\n+  if (eap->forceit) {\n+    emsg(\"bang (!) not supported\");\n+    return;\n+  }\n   Error err = ERROR_INIT;\n-  if ((eap->forceit || !check_changed_any(false, false))\n-      && (eap->cmdidx != CMD_restart || remote_ui_restart(current_ui, &err))) {\n-    getout(0);\n+  if (check_changed_any(false, false) || !remote_ui_restart(current_ui, &err)) {",
            "html_url": "https://github.com/neovim/neovim/pull/34788#discussion_r2189507086",
            "id": 2189507086,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6CgToO",
            "original_commit_id": "0856ee4d700a96e67f80ff0e740c4316c45a9c16",
            "original_line": 4855,
            "original_position": 39,
            "original_start_line": null,
            "path": "src/nvim/ex_docmd.c",
            "position": 1,
            "pull_request_review_id": 2992975680,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34788",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2189507086/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-07-07T09:58:02Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2189507086",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34788#discussion_r2189544582"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34788"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2189544582"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "> On the other hand, if you remave this check, even `:restart +echo` will quit the server without confirmation, as you still call `getout(0)` anyway.\r\n\r\nThis is true. We would need to somehow check if \":cmd\" would quit the server and only then call `remote_ui_restart` (because we don't need to attach to the new server unless we know the old server will exit). If it doesn't quit the server, we could maybe just `emsg` the log and bail on restarting altogether..\r\n\r\nThe first part of this is what I'd need to figure out. Any suggestions? I was initially thinking to just match against a list of possible \"quit\" commands (and combinations) and then checking against that. But that's probably not efficient.",
            "commit_id": "7940ff19040585be134feb020b2692f56d037e96",
            "created_at": "2025-07-07T09:53:08Z",
            "diff_hunk": "@@ -4829,22 +4830,45 @@ int before_quit_all(exarg_T *eap)\n }\n \n /// \":qall\": try to quit all windows\n-/// \":restart\": restart the Nvim server\n-static void ex_quitall_or_restart(exarg_T *eap)\n+static void ex_quitall(exarg_T *eap)\n {\n   if (before_quit_all(eap) == FAIL) {\n     return;\n   }\n   exiting = true;\n+  if (!eap->forceit && check_changed_any(false, false)) {\n+    not_exiting();\n+    return;\n+  }\n+  getout(0);\n+}\n+\n+/// \":restart\": restart the Nvim server (using \":qall\").\n+/// \":restart +cmd\": restart the Nvim server using \":cmd\".\n+static void ex_restart(exarg_T *eap)\n+{\n+  if (eap->forceit) {\n+    emsg(\"bang (!) not supported\");\n+    return;\n+  }\n   Error err = ERROR_INIT;\n-  if ((eap->forceit || !check_changed_any(false, false))\n-      && (eap->cmdidx != CMD_restart || remote_ui_restart(current_ui, &err))) {\n-    getout(0);\n+  if (check_changed_any(false, false) || !remote_ui_restart(current_ui, &err)) {",
            "html_url": "https://github.com/neovim/neovim/pull/34788#discussion_r2189544582",
            "id": 2189544582,
            "in_reply_to_id": 2189507086,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6CgcyG",
            "original_commit_id": "0856ee4d700a96e67f80ff0e740c4316c45a9c16",
            "original_line": 4855,
            "original_position": 39,
            "original_start_line": null,
            "path": "src/nvim/ex_docmd.c",
            "position": 1,
            "pull_request_review_id": 2993034976,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34788",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2189544582/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-07-07T09:53:08Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2189544582",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/94102031?v=4",
                "events_url": "https://api.github.com/users/sathya-pramodh/events{/privacy}",
                "followers_url": "https://api.github.com/users/sathya-pramodh/followers",
                "following_url": "https://api.github.com/users/sathya-pramodh/following{/other_user}",
                "gists_url": "https://api.github.com/users/sathya-pramodh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/sathya-pramodh",
                "id": 94102031,
                "login": "sathya-pramodh",
                "node_id": "U_kgDOBZviDw",
                "organizations_url": "https://api.github.com/users/sathya-pramodh/orgs",
                "received_events_url": "https://api.github.com/users/sathya-pramodh/received_events",
                "repos_url": "https://api.github.com/users/sathya-pramodh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/sathya-pramodh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/sathya-pramodh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/sathya-pramodh",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34788#discussion_r2189549222"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34788"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2189549222"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Resolved: https://github.com/neovim/neovim/pull/34788/commits/60eeaa92afbd09c4fbe428b822edff22e0aedd9e",
            "commit_id": "7940ff19040585be134feb020b2692f56d037e96",
            "created_at": "2025-07-07T09:54:58Z",
            "diff_hunk": "@@ -4829,22 +4830,45 @@ int before_quit_all(exarg_T *eap)\n }\n \n /// \":qall\": try to quit all windows\n-/// \":restart\": restart the Nvim server\n-static void ex_quitall_or_restart(exarg_T *eap)\n+static void ex_quitall(exarg_T *eap)\n {\n   if (before_quit_all(eap) == FAIL) {\n     return;\n   }\n   exiting = true;\n+  if (!eap->forceit && check_changed_any(false, false)) {\n+    not_exiting();\n+    return;\n+  }\n+  getout(0);\n+}\n+\n+/// \":restart\": restart the Nvim server (using \":qall\").\n+/// \":restart +cmd\": restart the Nvim server using \":cmd\".\n+static void ex_restart(exarg_T *eap)\n+{\n+  if (eap->forceit) {\n+    emsg(\"bang (!) not supported\");\n+    return;\n+  }",
            "html_url": "https://github.com/neovim/neovim/pull/34788#discussion_r2189549222",
            "id": 2189549222,
            "in_reply_to_id": 2189474715,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6Cgd6m",
            "original_commit_id": "0856ee4d700a96e67f80ff0e740c4316c45a9c16",
            "original_line": 4866,
            "original_position": 34,
            "original_start_line": 4850,
            "path": "src/nvim/ex_docmd.c",
            "position": 1,
            "pull_request_review_id": 2993043488,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34788",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2189549222/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-07-07T09:54:58Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2189549222",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/94102031?v=4",
                "events_url": "https://api.github.com/users/sathya-pramodh/events{/privacy}",
                "followers_url": "https://api.github.com/users/sathya-pramodh/followers",
                "following_url": "https://api.github.com/users/sathya-pramodh/following{/other_user}",
                "gists_url": "https://api.github.com/users/sathya-pramodh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/sathya-pramodh",
                "id": 94102031,
                "login": "sathya-pramodh",
                "node_id": "U_kgDOBZviDw",
                "organizations_url": "https://api.github.com/users/sathya-pramodh/orgs",
                "received_events_url": "https://api.github.com/users/sathya-pramodh/received_events",
                "repos_url": "https://api.github.com/users/sathya-pramodh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/sathya-pramodh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/sathya-pramodh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/sathya-pramodh",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34788#discussion_r2189788703"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34788"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2189788703"
                }
            },
            "author_association": "MEMBER",
            "body": "> I was initially thinking to just match against a list of possible \"quit\" commands (and combinations) and then checking against that\n\nThat's probably good enough for now.\n\nThe \"right\" way to do things is probably to setup some sort of `on_exiting` callback which performs `remote_ui_restart` only when Nvim is about to exit, wherever the `VimLeavePre` logic is.",
            "commit_id": "7940ff19040585be134feb020b2692f56d037e96",
            "created_at": "2025-07-07T11:31:58Z",
            "diff_hunk": "@@ -4829,22 +4830,45 @@ int before_quit_all(exarg_T *eap)\n }\n \n /// \":qall\": try to quit all windows\n-/// \":restart\": restart the Nvim server\n-static void ex_quitall_or_restart(exarg_T *eap)\n+static void ex_quitall(exarg_T *eap)\n {\n   if (before_quit_all(eap) == FAIL) {\n     return;\n   }\n   exiting = true;\n+  if (!eap->forceit && check_changed_any(false, false)) {\n+    not_exiting();\n+    return;\n+  }\n+  getout(0);\n+}\n+\n+/// \":restart\": restart the Nvim server (using \":qall\").\n+/// \":restart +cmd\": restart the Nvim server using \":cmd\".\n+static void ex_restart(exarg_T *eap)\n+{\n+  if (eap->forceit) {\n+    emsg(\"bang (!) not supported\");\n+    return;\n+  }\n   Error err = ERROR_INIT;\n-  if ((eap->forceit || !check_changed_any(false, false))\n-      && (eap->cmdidx != CMD_restart || remote_ui_restart(current_ui, &err))) {\n-    getout(0);\n+  if (check_changed_any(false, false) || !remote_ui_restart(current_ui, &err)) {",
            "html_url": "https://github.com/neovim/neovim/pull/34788#discussion_r2189788703",
            "id": 2189788703,
            "in_reply_to_id": 2189507086,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6ChYYf",
            "original_commit_id": "0856ee4d700a96e67f80ff0e740c4316c45a9c16",
            "original_line": 4855,
            "original_position": 39,
            "original_start_line": null,
            "path": "src/nvim/ex_docmd.c",
            "position": 1,
            "pull_request_review_id": 2993400050,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34788",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2189788703/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-07-07T11:32:43Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2189788703",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34788#discussion_r2189790455"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34788"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2189790455"
                }
            },
            "author_association": "MEMBER",
            "body": "does the `This fails when changes have been made` note need to be updated? Also should mention `:confirm restart` as a hint.",
            "commit_id": "7940ff19040585be134feb020b2692f56d037e96",
            "created_at": "2025-07-07T11:32:37Z",
            "diff_hunk": "@@ -82,9 +82,6 @@ Restart Nvim\n                 event, this command is equivalent to `:qall`.\n                 Note: Only works if the UI and server are on the same system.\n \n-:restart!",
            "html_url": "https://github.com/neovim/neovim/pull/34788#discussion_r2189790455",
            "id": 2189790455,
            "line": 85,
            "node_id": "PRRC_kwDOAPphoM6ChYz3",
            "original_commit_id": "41eb6866e60a31fac631ce7b6d8b28f5eb8cabc4",
            "original_line": 85,
            "original_position": 4,
            "original_start_line": null,
            "path": "runtime/doc/gui.txt",
            "position": 21,
            "pull_request_review_id": 2993400050,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34788",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2189790455/reactions"
            },
            "side": "LEFT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-07-07T11:32:43Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2189790455",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34788#discussion_r2189851363"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34788"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2189851363"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Alright. Checking against `{\"qall\",  \"qa\", \"q\", \"q!\", \"qa!\", \"qall!\"}` for now should do...",
            "commit_id": "7940ff19040585be134feb020b2692f56d037e96",
            "created_at": "2025-07-07T11:58:30Z",
            "diff_hunk": "@@ -4829,22 +4830,45 @@ int before_quit_all(exarg_T *eap)\n }\n \n /// \":qall\": try to quit all windows\n-/// \":restart\": restart the Nvim server\n-static void ex_quitall_or_restart(exarg_T *eap)\n+static void ex_quitall(exarg_T *eap)\n {\n   if (before_quit_all(eap) == FAIL) {\n     return;\n   }\n   exiting = true;\n+  if (!eap->forceit && check_changed_any(false, false)) {\n+    not_exiting();\n+    return;\n+  }\n+  getout(0);\n+}\n+\n+/// \":restart\": restart the Nvim server (using \":qall\").\n+/// \":restart +cmd\": restart the Nvim server using \":cmd\".\n+static void ex_restart(exarg_T *eap)\n+{\n+  if (eap->forceit) {\n+    emsg(\"bang (!) not supported\");\n+    return;\n+  }\n   Error err = ERROR_INIT;\n-  if ((eap->forceit || !check_changed_any(false, false))\n-      && (eap->cmdidx != CMD_restart || remote_ui_restart(current_ui, &err))) {\n-    getout(0);\n+  if (check_changed_any(false, false) || !remote_ui_restart(current_ui, &err)) {",
            "html_url": "https://github.com/neovim/neovim/pull/34788#discussion_r2189851363",
            "id": 2189851363,
            "in_reply_to_id": 2189507086,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6Chnrj",
            "original_commit_id": "0856ee4d700a96e67f80ff0e740c4316c45a9c16",
            "original_line": 4855,
            "original_position": 39,
            "original_start_line": null,
            "path": "src/nvim/ex_docmd.c",
            "position": 1,
            "pull_request_review_id": 2993506677,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34788",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2189851363/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-07-07T11:58:31Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2189851363",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/94102031?v=4",
                "events_url": "https://api.github.com/users/sathya-pramodh/events{/privacy}",
                "followers_url": "https://api.github.com/users/sathya-pramodh/followers",
                "following_url": "https://api.github.com/users/sathya-pramodh/following{/other_user}",
                "gists_url": "https://api.github.com/users/sathya-pramodh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/sathya-pramodh",
                "id": 94102031,
                "login": "sathya-pramodh",
                "node_id": "U_kgDOBZviDw",
                "organizations_url": "https://api.github.com/users/sathya-pramodh/orgs",
                "received_events_url": "https://api.github.com/users/sathya-pramodh/received_events",
                "repos_url": "https://api.github.com/users/sathya-pramodh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/sathya-pramodh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/sathya-pramodh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/sathya-pramodh",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34788#discussion_r2189866443"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34788"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2189866443"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "The last part `and Vim refuses to |abandon| the current buffer` should be removed i think. It does fail if changes are made. I could just rewrite the line as: `This fails when changes have been made. Use :confirm restart to override.`",
            "commit_id": "7940ff19040585be134feb020b2692f56d037e96",
            "created_at": "2025-07-07T12:07:22Z",
            "diff_hunk": "@@ -82,9 +82,6 @@ Restart Nvim\n                 event, this command is equivalent to `:qall`.\n                 Note: Only works if the UI and server are on the same system.\n \n-:restart!",
            "html_url": "https://github.com/neovim/neovim/pull/34788#discussion_r2189866443",
            "id": 2189866443,
            "in_reply_to_id": 2189790455,
            "line": 85,
            "node_id": "PRRC_kwDOAPphoM6ChrXL",
            "original_commit_id": "41eb6866e60a31fac631ce7b6d8b28f5eb8cabc4",
            "original_line": 85,
            "original_position": 4,
            "original_start_line": null,
            "path": "runtime/doc/gui.txt",
            "position": 21,
            "pull_request_review_id": 2993531424,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34788",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2189866443/reactions"
            },
            "side": "LEFT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-07-07T12:07:22Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2189866443",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/94102031?v=4",
                "events_url": "https://api.github.com/users/sathya-pramodh/events{/privacy}",
                "followers_url": "https://api.github.com/users/sathya-pramodh/followers",
                "following_url": "https://api.github.com/users/sathya-pramodh/following{/other_user}",
                "gists_url": "https://api.github.com/users/sathya-pramodh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/sathya-pramodh",
                "id": 94102031,
                "login": "sathya-pramodh",
                "node_id": "U_kgDOBZviDw",
                "organizations_url": "https://api.github.com/users/sathya-pramodh/orgs",
                "received_events_url": "https://api.github.com/users/sathya-pramodh/received_events",
                "repos_url": "https://api.github.com/users/sathya-pramodh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/sathya-pramodh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/sathya-pramodh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/sathya-pramodh",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34788#discussion_r2189943484"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34788"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2189943484"
                }
            },
            "author_association": "MEMBER",
            "body": "If it checks changes by default then :confirm is never needed? It probably makes sense to *not* check changes by default, then user can opt-in to checking changes via :confirm.",
            "commit_id": "7940ff19040585be134feb020b2692f56d037e96",
            "created_at": "2025-07-07T12:33:59Z",
            "diff_hunk": "@@ -82,9 +82,6 @@ Restart Nvim\n                 event, this command is equivalent to `:qall`.\n                 Note: Only works if the UI and server are on the same system.\n \n-:restart!",
            "html_url": "https://github.com/neovim/neovim/pull/34788#discussion_r2189943484",
            "id": 2189943484,
            "in_reply_to_id": 2189790455,
            "line": 85,
            "node_id": "PRRC_kwDOAPphoM6Ch-K8",
            "original_commit_id": "41eb6866e60a31fac631ce7b6d8b28f5eb8cabc4",
            "original_line": 85,
            "original_position": 4,
            "original_start_line": null,
            "path": "runtime/doc/gui.txt",
            "position": 21,
            "pull_request_review_id": 2993642709,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34788",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2189943484/reactions"
            },
            "side": "LEFT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-07-07T12:33:59Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2189943484",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34788#discussion_r2189953519"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34788"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2189953519"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\n    ELOG(\"restart: \\\"%s\\\" did not quit the server, quitting manually\", quit_cmd);\n```",
            "commit_id": "7940ff19040585be134feb020b2692f56d037e96",
            "created_at": "2025-07-07T12:37:00Z",
            "diff_hunk": "@@ -4829,22 +4830,41 @@ int before_quit_all(exarg_T *eap)\n }\n \n /// \":qall\": try to quit all windows\n-/// \":restart\": restart the Nvim server\n-static void ex_quitall_or_restart(exarg_T *eap)\n+static void ex_quitall(exarg_T *eap)\n {\n   if (before_quit_all(eap) == FAIL) {\n     return;\n   }\n   exiting = true;\n+  if (!eap->forceit && check_changed_any(false, false)) {\n+    not_exiting();\n+    return;\n+  }\n+  getout(0);\n+}\n+\n+/// \":restart\": restart the Nvim server (using \":qall\").\n+/// \":restart +cmd\": restart the Nvim server using \":cmd\".\n+static void ex_restart(exarg_T *eap)\n+{\n   Error err = ERROR_INIT;\n-  if ((eap->forceit || !check_changed_any(false, false))\n-      && (eap->cmdidx != CMD_restart || remote_ui_restart(current_ui, &err))) {\n-    getout(0);\n+  if (check_changed_any(false, false) || !remote_ui_restart(current_ui, &err)) {\n+    if (ERROR_SET(&err)) {\n+      emsg(err.msg);  // UI disappeared already?\n+      api_clear_error(&err);\n+    }\n+    return;\n   }\n-  not_exiting();\n+  char *quit_cmd = (eap->do_ecmd_cmd) ? eap->do_ecmd_cmd : \"qall\";\n+  nvim_command(cstr_as_string(quit_cmd), &err);\n   if (ERROR_SET(&err)) {\n-    emsg(err.msg);  // UI disappeared already?\n+    emsg(err.msg);  // Could not exit\n     api_clear_error(&err);\n+    return;\n+  }\n+  if (!exiting) {\n+    ELOG(\"':%s' did not quit the server, quitting manually\", quit_cmd);",
            "html_url": "https://github.com/neovim/neovim/pull/34788#discussion_r2189953519",
            "id": 2189953519,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6CiAnv",
            "original_commit_id": "41eb6866e60a31fac631ce7b6d8b28f5eb8cabc4",
            "original_line": 4884,
            "original_position": 52,
            "original_start_line": null,
            "path": "src/nvim/ex_docmd.c",
            "position": 1,
            "pull_request_review_id": 2993650926,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34788",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2189953519/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-07-08T01:03:40Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2189953519",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34788#discussion_r2189976783"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34788"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2189976783"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Also added a check to see if the \"+cmd\" itself ends with a bang (!). If so, \":restart +qall!\" also supports force restart as well as \":confirm restart\" as we still do the `check_changed_any` check.",
            "commit_id": "7940ff19040585be134feb020b2692f56d037e96",
            "created_at": "2025-07-07T12:46:14Z",
            "diff_hunk": "@@ -4829,22 +4830,45 @@ int before_quit_all(exarg_T *eap)\n }\n \n /// \":qall\": try to quit all windows\n-/// \":restart\": restart the Nvim server\n-static void ex_quitall_or_restart(exarg_T *eap)\n+static void ex_quitall(exarg_T *eap)\n {\n   if (before_quit_all(eap) == FAIL) {\n     return;\n   }\n   exiting = true;\n+  if (!eap->forceit && check_changed_any(false, false)) {\n+    not_exiting();\n+    return;\n+  }\n+  getout(0);\n+}\n+\n+/// \":restart\": restart the Nvim server (using \":qall\").\n+/// \":restart +cmd\": restart the Nvim server using \":cmd\".\n+static void ex_restart(exarg_T *eap)\n+{\n+  if (eap->forceit) {\n+    emsg(\"bang (!) not supported\");\n+    return;\n+  }\n   Error err = ERROR_INIT;\n-  if ((eap->forceit || !check_changed_any(false, false))\n-      && (eap->cmdidx != CMD_restart || remote_ui_restart(current_ui, &err))) {\n-    getout(0);\n+  if (check_changed_any(false, false) || !remote_ui_restart(current_ui, &err)) {",
            "html_url": "https://github.com/neovim/neovim/pull/34788#discussion_r2189976783",
            "id": 2189976783,
            "in_reply_to_id": 2189507086,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6CiGTP",
            "original_commit_id": "0856ee4d700a96e67f80ff0e740c4316c45a9c16",
            "original_line": 4855,
            "original_position": 39,
            "original_start_line": null,
            "path": "src/nvim/ex_docmd.c",
            "position": 1,
            "pull_request_review_id": 2993694920,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34788",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2189976783/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-07-07T13:14:46Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2189976783",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/94102031?v=4",
                "events_url": "https://api.github.com/users/sathya-pramodh/events{/privacy}",
                "followers_url": "https://api.github.com/users/sathya-pramodh/followers",
                "following_url": "https://api.github.com/users/sathya-pramodh/following{/other_user}",
                "gists_url": "https://api.github.com/users/sathya-pramodh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/sathya-pramodh",
                "id": 94102031,
                "login": "sathya-pramodh",
                "node_id": "U_kgDOBZviDw",
                "organizations_url": "https://api.github.com/users/sathya-pramodh/orgs",
                "received_events_url": "https://api.github.com/users/sathya-pramodh/received_events",
                "repos_url": "https://api.github.com/users/sathya-pramodh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/sathya-pramodh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/sathya-pramodh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/sathya-pramodh",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34788#discussion_r2190023264"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34788"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2190023264"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Running \":confirm restart\" when not checking for changes by default in `ex_restart` runs \":qall\" on the old server. This would still check for changes and the old server would never exit because of that.",
            "commit_id": "7940ff19040585be134feb020b2692f56d037e96",
            "created_at": "2025-07-07T13:05:39Z",
            "diff_hunk": "@@ -82,9 +82,6 @@ Restart Nvim\n                 event, this command is equivalent to `:qall`.\n                 Note: Only works if the UI and server are on the same system.\n \n-:restart!",
            "html_url": "https://github.com/neovim/neovim/pull/34788#discussion_r2190023264",
            "id": 2190023264,
            "in_reply_to_id": 2189790455,
            "line": 85,
            "node_id": "PRRC_kwDOAPphoM6CiRpg",
            "original_commit_id": "41eb6866e60a31fac631ce7b6d8b28f5eb8cabc4",
            "original_line": 85,
            "original_position": 4,
            "original_start_line": null,
            "path": "runtime/doc/gui.txt",
            "position": 21,
            "pull_request_review_id": 2993769985,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34788",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2190023264/reactions"
            },
            "side": "LEFT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-07-07T13:05:39Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2190023264",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/94102031?v=4",
                "events_url": "https://api.github.com/users/sathya-pramodh/events{/privacy}",
                "followers_url": "https://api.github.com/users/sathya-pramodh/followers",
                "following_url": "https://api.github.com/users/sathya-pramodh/following{/other_user}",
                "gists_url": "https://api.github.com/users/sathya-pramodh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/sathya-pramodh",
                "id": 94102031,
                "login": "sathya-pramodh",
                "node_id": "U_kgDOBZviDw",
                "organizations_url": "https://api.github.com/users/sathya-pramodh/orgs",
                "received_events_url": "https://api.github.com/users/sathya-pramodh/received_events",
                "repos_url": "https://api.github.com/users/sathya-pramodh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/sathya-pramodh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/sathya-pramodh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/sathya-pramodh",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34788#discussion_r2190114761"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34788"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2190114761"
                }
            },
            "author_association": "MEMBER",
            "body": "Also add `wqall` etc.? And `:q` doesn't quit server if there is more than one window.",
            "commit_id": "7940ff19040585be134feb020b2692f56d037e96",
            "created_at": "2025-07-07T13:26:58Z",
            "diff_hunk": "@@ -178,6 +179,8 @@ struct dbg_stuff {\n \n static char dollar_command[2] = { '$', 0 };\n \n+static char *quit_commands[6] = { \"qall\",  \"qa\", \"q\", \"q!\", \"qa!\", \"qall!\" };",
            "html_url": "https://github.com/neovim/neovim/pull/34788#discussion_r2190114761",
            "id": 2190114761,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6Cin_J",
            "original_commit_id": "a93670b1fb1319e107079b41401276b0828d2f66",
            "original_line": 182,
            "original_position": 12,
            "original_start_line": null,
            "path": "src/nvim/ex_docmd.c",
            "position": 1,
            "pull_request_review_id": 2993894984,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34788",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2190114761/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-07-07T13:26:59Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2190114761",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34788#discussion_r2190130840"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34788"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2190130840"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "> Also add `wqall` etc.? \r\n\r\nWill do!\r\n\r\n> And `:q` doesn't quit server if there is more than one window.\r\n\r\nIf they run \":restart +q\" it would still trigger the branch that auto exits if quit fails without error. But that doesn't feel natural yeah...\r\n\r\n",
            "commit_id": "7940ff19040585be134feb020b2692f56d037e96",
            "created_at": "2025-07-07T13:34:06Z",
            "diff_hunk": "@@ -178,6 +179,8 @@ struct dbg_stuff {\n \n static char dollar_command[2] = { '$', 0 };\n \n+static char *quit_commands[6] = { \"qall\",  \"qa\", \"q\", \"q!\", \"qa!\", \"qall!\" };",
            "html_url": "https://github.com/neovim/neovim/pull/34788#discussion_r2190130840",
            "id": 2190130840,
            "in_reply_to_id": 2190114761,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6Cir6Y",
            "original_commit_id": "a93670b1fb1319e107079b41401276b0828d2f66",
            "original_line": 182,
            "original_position": 12,
            "original_start_line": null,
            "path": "src/nvim/ex_docmd.c",
            "position": 1,
            "pull_request_review_id": 2993921859,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34788",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2190130840/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-07-07T13:43:31Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2190130840",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/94102031?v=4",
                "events_url": "https://api.github.com/users/sathya-pramodh/events{/privacy}",
                "followers_url": "https://api.github.com/users/sathya-pramodh/followers",
                "following_url": "https://api.github.com/users/sathya-pramodh/following{/other_user}",
                "gists_url": "https://api.github.com/users/sathya-pramodh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/sathya-pramodh",
                "id": 94102031,
                "login": "sathya-pramodh",
                "node_id": "U_kgDOBZviDw",
                "organizations_url": "https://api.github.com/users/sathya-pramodh/orgs",
                "received_events_url": "https://api.github.com/users/sathya-pramodh/received_events",
                "repos_url": "https://api.github.com/users/sathya-pramodh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/sathya-pramodh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/sathya-pramodh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/sathya-pramodh",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34788#discussion_r2191255663"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34788"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2191255663"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n  if (quit_cmd[strlen(quit_cmd) - 1] != '!' && check_changed_any(false,\r\n```",
            "commit_id": "7940ff19040585be134feb020b2692f56d037e96",
            "created_at": "2025-07-08T00:45:06Z",
            "diff_hunk": "@@ -4829,22 +4837,40 @@ int before_quit_all(exarg_T *eap)\n }\n \n /// \":qall\": try to quit all windows\n-/// \":restart\": restart the Nvim server\n-static void ex_quitall_or_restart(exarg_T *eap)\n+static void ex_quitall(exarg_T *eap)\n {\n   if (before_quit_all(eap) == FAIL) {\n     return;\n   }\n   exiting = true;\n+  if (!eap->forceit && check_changed_any(false, false)) {\n+    not_exiting();\n+    return;\n+  }\n+  getout(0);\n+}\n+\n+/// \":restart\": restart the Nvim server (using \":qall\").\n+/// \":restart +cmd\": restart the Nvim server using \":cmd\".\n+static void ex_restart(exarg_T *eap)\n+{\n+  char *quit_cmd = (eap->do_ecmd_cmd) ? eap->do_ecmd_cmd : \"qall\";\n   Error err = ERROR_INIT;\n-  if ((eap->forceit || !check_changed_any(false, false))\n-      && (eap->cmdidx != CMD_restart || remote_ui_restart(current_ui, &err))) {\n-    getout(0);\n+  if (quit_cmd[vim_strsize(quit_cmd) - 1] != '!' && check_changed_any(false,",
            "html_url": "https://github.com/neovim/neovim/pull/34788#discussion_r2191255663",
            "id": 2191255663,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6Cm-hv",
            "original_commit_id": "a0f3cdd664f5e0b035f9ba2df5eba322ca81a923",
            "original_line": 4859,
            "original_position": 50,
            "original_start_line": null,
            "path": "src/nvim/ex_docmd.c",
            "position": 1,
            "pull_request_review_id": 2995650043,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34788",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2191255663/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-07-08T00:45:06Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2191255663",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34788#discussion_r2191257303"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34788"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2191257303"
                }
            },
            "author_association": "MEMBER",
            "body": "Change to `:restart +qall!`?",
            "commit_id": "7940ff19040585be134feb020b2692f56d037e96",
            "created_at": "2025-07-08T00:47:19Z",
            "diff_hunk": "@@ -3791,9 +3804,12 @@ describe('TUI client', function()\n     screen_client:expect(s1)\n     screen_server:expect(s1)\n \n-    -- Run :restart! on the remote client.\n+    -- Run :confirm restart on the remote client.\n     -- The remote client should start a new server while the original one should exit.\n-    feed_data(':restart!\\n')\n+    feed_data(':confirm restart\\n')\n+    screen_client:expect({ any = vim.pesc('Save changes to \"Untitled\"?') })\n+\n+    tt.feed_data('N\\013')",
            "html_url": "https://github.com/neovim/neovim/pull/34788#discussion_r2191257303",
            "id": 2191257303,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6Cm-7X",
            "original_commit_id": "a0f3cdd664f5e0b035f9ba2df5eba322ca81a923",
            "original_line": 3812,
            "original_position": 42,
            "original_start_line": 3794,
            "path": "test/functional/terminal/tui_spec.lua",
            "position": 1,
            "pull_request_review_id": 2995652313,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34788",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2191257303/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "LEFT",
            "subject_type": "line",
            "updated_at": "2025-07-08T00:47:19Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2191257303",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34788#discussion_r2191270288"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34788"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2191270288"
                }
            },
            "author_association": "MEMBER",
            "body": "docs should also show a +cmd example",
            "commit_id": "7940ff19040585be134feb020b2692f56d037e96",
            "created_at": "2025-07-08T01:03:12Z",
            "diff_hunk": "@@ -82,9 +82,6 @@ Restart Nvim\n                 event, this command is equivalent to `:qall`.\n                 Note: Only works if the UI and server are on the same system.\n \n-:restart!",
            "html_url": "https://github.com/neovim/neovim/pull/34788#discussion_r2191270288",
            "id": 2191270288,
            "in_reply_to_id": 2189790455,
            "line": 85,
            "node_id": "PRRC_kwDOAPphoM6CnCGQ",
            "original_commit_id": "41eb6866e60a31fac631ce7b6d8b28f5eb8cabc4",
            "original_line": 85,
            "original_position": 4,
            "original_start_line": null,
            "path": "runtime/doc/gui.txt",
            "position": 21,
            "pull_request_review_id": 2993650926,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34788",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2191270288/reactions"
            },
            "side": "LEFT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-07-08T01:03:40Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2191270288",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34788#discussion_r2191609155"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34788"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2191609155"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "This was moved to a `emsg`. I'll make it display a similar thing though..",
            "commit_id": "7940ff19040585be134feb020b2692f56d037e96",
            "created_at": "2025-07-08T06:39:11Z",
            "diff_hunk": "@@ -4829,22 +4830,41 @@ int before_quit_all(exarg_T *eap)\n }\n \n /// \":qall\": try to quit all windows\n-/// \":restart\": restart the Nvim server\n-static void ex_quitall_or_restart(exarg_T *eap)\n+static void ex_quitall(exarg_T *eap)\n {\n   if (before_quit_all(eap) == FAIL) {\n     return;\n   }\n   exiting = true;\n+  if (!eap->forceit && check_changed_any(false, false)) {\n+    not_exiting();\n+    return;\n+  }\n+  getout(0);\n+}\n+\n+/// \":restart\": restart the Nvim server (using \":qall\").\n+/// \":restart +cmd\": restart the Nvim server using \":cmd\".\n+static void ex_restart(exarg_T *eap)\n+{\n   Error err = ERROR_INIT;\n-  if ((eap->forceit || !check_changed_any(false, false))\n-      && (eap->cmdidx != CMD_restart || remote_ui_restart(current_ui, &err))) {\n-    getout(0);\n+  if (check_changed_any(false, false) || !remote_ui_restart(current_ui, &err)) {\n+    if (ERROR_SET(&err)) {\n+      emsg(err.msg);  // UI disappeared already?\n+      api_clear_error(&err);\n+    }\n+    return;\n   }\n-  not_exiting();\n+  char *quit_cmd = (eap->do_ecmd_cmd) ? eap->do_ecmd_cmd : \"qall\";\n+  nvim_command(cstr_as_string(quit_cmd), &err);\n   if (ERROR_SET(&err)) {\n-    emsg(err.msg);  // UI disappeared already?\n+    emsg(err.msg);  // Could not exit\n     api_clear_error(&err);\n+    return;\n+  }\n+  if (!exiting) {\n+    ELOG(\"':%s' did not quit the server, quitting manually\", quit_cmd);",
            "html_url": "https://github.com/neovim/neovim/pull/34788#discussion_r2191609155",
            "id": 2191609155,
            "in_reply_to_id": 2189953519,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6CoU1D",
            "original_commit_id": "41eb6866e60a31fac631ce7b6d8b28f5eb8cabc4",
            "original_line": 4884,
            "original_position": 52,
            "original_start_line": null,
            "path": "src/nvim/ex_docmd.c",
            "position": 1,
            "pull_request_review_id": 2996180842,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34788",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2191609155/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-07-08T06:39:12Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2191609155",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/94102031?v=4",
                "events_url": "https://api.github.com/users/sathya-pramodh/events{/privacy}",
                "followers_url": "https://api.github.com/users/sathya-pramodh/followers",
                "following_url": "https://api.github.com/users/sathya-pramodh/following{/other_user}",
                "gists_url": "https://api.github.com/users/sathya-pramodh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/sathya-pramodh",
                "id": 94102031,
                "login": "sathya-pramodh",
                "node_id": "U_kgDOBZviDw",
                "organizations_url": "https://api.github.com/users/sathya-pramodh/orgs",
                "received_events_url": "https://api.github.com/users/sathya-pramodh/received_events",
                "repos_url": "https://api.github.com/users/sathya-pramodh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/sathya-pramodh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/sathya-pramodh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/sathya-pramodh",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34788#discussion_r2191609920"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34788"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2191609920"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Because I moved the call to `remote_ui_restart` to `os_exit` and added a `restarting` global",
            "commit_id": "7940ff19040585be134feb020b2692f56d037e96",
            "created_at": "2025-07-08T06:39:41Z",
            "diff_hunk": "@@ -4829,22 +4830,41 @@ int before_quit_all(exarg_T *eap)\n }\n \n /// \":qall\": try to quit all windows\n-/// \":restart\": restart the Nvim server\n-static void ex_quitall_or_restart(exarg_T *eap)\n+static void ex_quitall(exarg_T *eap)\n {\n   if (before_quit_all(eap) == FAIL) {\n     return;\n   }\n   exiting = true;\n+  if (!eap->forceit && check_changed_any(false, false)) {\n+    not_exiting();\n+    return;\n+  }\n+  getout(0);\n+}\n+\n+/// \":restart\": restart the Nvim server (using \":qall\").\n+/// \":restart +cmd\": restart the Nvim server using \":cmd\".\n+static void ex_restart(exarg_T *eap)\n+{\n   Error err = ERROR_INIT;\n-  if ((eap->forceit || !check_changed_any(false, false))\n-      && (eap->cmdidx != CMD_restart || remote_ui_restart(current_ui, &err))) {\n-    getout(0);\n+  if (check_changed_any(false, false) || !remote_ui_restart(current_ui, &err)) {\n+    if (ERROR_SET(&err)) {\n+      emsg(err.msg);  // UI disappeared already?\n+      api_clear_error(&err);\n+    }\n+    return;\n   }\n-  not_exiting();\n+  char *quit_cmd = (eap->do_ecmd_cmd) ? eap->do_ecmd_cmd : \"qall\";\n+  nvim_command(cstr_as_string(quit_cmd), &err);\n   if (ERROR_SET(&err)) {\n-    emsg(err.msg);  // UI disappeared already?\n+    emsg(err.msg);  // Could not exit\n     api_clear_error(&err);\n+    return;\n+  }\n+  if (!exiting) {\n+    ELOG(\"':%s' did not quit the server, quitting manually\", quit_cmd);",
            "html_url": "https://github.com/neovim/neovim/pull/34788#discussion_r2191609920",
            "id": 2191609920,
            "in_reply_to_id": 2189953519,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6CoVBA",
            "original_commit_id": "41eb6866e60a31fac631ce7b6d8b28f5eb8cabc4",
            "original_line": 4884,
            "original_position": 52,
            "original_start_line": null,
            "path": "src/nvim/ex_docmd.c",
            "position": 1,
            "pull_request_review_id": 2996182001,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34788",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2191609920/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-07-08T06:39:41Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2191609920",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/94102031?v=4",
                "events_url": "https://api.github.com/users/sathya-pramodh/events{/privacy}",
                "followers_url": "https://api.github.com/users/sathya-pramodh/followers",
                "following_url": "https://api.github.com/users/sathya-pramodh/following{/other_user}",
                "gists_url": "https://api.github.com/users/sathya-pramodh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/sathya-pramodh",
                "id": 94102031,
                "login": "sathya-pramodh",
                "node_id": "U_kgDOBZviDw",
                "organizations_url": "https://api.github.com/users/sathya-pramodh/orgs",
                "received_events_url": "https://api.github.com/users/sathya-pramodh/received_events",
                "repos_url": "https://api.github.com/users/sathya-pramodh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/sathya-pramodh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/sathya-pramodh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/sathya-pramodh",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34788#discussion_r2191693978"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34788"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2191693978"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "```diff\r\n@@ -4869,7 +4869,8 @@ static void ex_restart(exarg_T *eap)\r\n     return;\r\n   }\r\n   if (!exiting) {\r\n-    emsg(\"':cmd' did not quit the server, abandoning restart\");\r\n+    emsg(\"server did not quit, abandoning restart\");\r\n+    ELOG(\"restart: \\\"%s\\\" did not quit the server\", quit_cmd);\r\n     not_restarting();\r\n   }\r\n }\r\n```\r\n\r\nWould this be good?",
            "commit_id": "7940ff19040585be134feb020b2692f56d037e96",
            "created_at": "2025-07-08T07:22:54Z",
            "diff_hunk": "@@ -4829,22 +4830,41 @@ int before_quit_all(exarg_T *eap)\n }\n \n /// \":qall\": try to quit all windows\n-/// \":restart\": restart the Nvim server\n-static void ex_quitall_or_restart(exarg_T *eap)\n+static void ex_quitall(exarg_T *eap)\n {\n   if (before_quit_all(eap) == FAIL) {\n     return;\n   }\n   exiting = true;\n+  if (!eap->forceit && check_changed_any(false, false)) {\n+    not_exiting();\n+    return;\n+  }\n+  getout(0);\n+}\n+\n+/// \":restart\": restart the Nvim server (using \":qall\").\n+/// \":restart +cmd\": restart the Nvim server using \":cmd\".\n+static void ex_restart(exarg_T *eap)\n+{\n   Error err = ERROR_INIT;\n-  if ((eap->forceit || !check_changed_any(false, false))\n-      && (eap->cmdidx != CMD_restart || remote_ui_restart(current_ui, &err))) {\n-    getout(0);\n+  if (check_changed_any(false, false) || !remote_ui_restart(current_ui, &err)) {\n+    if (ERROR_SET(&err)) {\n+      emsg(err.msg);  // UI disappeared already?\n+      api_clear_error(&err);\n+    }\n+    return;\n   }\n-  not_exiting();\n+  char *quit_cmd = (eap->do_ecmd_cmd) ? eap->do_ecmd_cmd : \"qall\";\n+  nvim_command(cstr_as_string(quit_cmd), &err);\n   if (ERROR_SET(&err)) {\n-    emsg(err.msg);  // UI disappeared already?\n+    emsg(err.msg);  // Could not exit\n     api_clear_error(&err);\n+    return;\n+  }\n+  if (!exiting) {\n+    ELOG(\"':%s' did not quit the server, quitting manually\", quit_cmd);",
            "html_url": "https://github.com/neovim/neovim/pull/34788#discussion_r2191693978",
            "id": 2191693978,
            "in_reply_to_id": 2189953519,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6Copia",
            "original_commit_id": "41eb6866e60a31fac631ce7b6d8b28f5eb8cabc4",
            "original_line": 4884,
            "original_position": 52,
            "original_start_line": null,
            "path": "src/nvim/ex_docmd.c",
            "position": 1,
            "pull_request_review_id": 2996319990,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34788",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2191693978/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-07-08T07:22:54Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2191693978",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/94102031?v=4",
                "events_url": "https://api.github.com/users/sathya-pramodh/events{/privacy}",
                "followers_url": "https://api.github.com/users/sathya-pramodh/followers",
                "following_url": "https://api.github.com/users/sathya-pramodh/following{/other_user}",
                "gists_url": "https://api.github.com/users/sathya-pramodh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/sathya-pramodh",
                "id": 94102031,
                "login": "sathya-pramodh",
                "node_id": "U_kgDOBZviDw",
                "organizations_url": "https://api.github.com/users/sathya-pramodh/orgs",
                "received_events_url": "https://api.github.com/users/sathya-pramodh/received_events",
                "repos_url": "https://api.github.com/users/sathya-pramodh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/sathya-pramodh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/sathya-pramodh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/sathya-pramodh",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34788#discussion_r2191700490"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34788"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2191700490"
                }
            },
            "author_association": "MEMBER",
            "body": "I think it's better to keep it as-is.",
            "commit_id": "7940ff19040585be134feb020b2692f56d037e96",
            "created_at": "2025-07-08T07:25:56Z",
            "diff_hunk": "@@ -4829,22 +4830,41 @@ int before_quit_all(exarg_T *eap)\n }\n \n /// \":qall\": try to quit all windows\n-/// \":restart\": restart the Nvim server\n-static void ex_quitall_or_restart(exarg_T *eap)\n+static void ex_quitall(exarg_T *eap)\n {\n   if (before_quit_all(eap) == FAIL) {\n     return;\n   }\n   exiting = true;\n+  if (!eap->forceit && check_changed_any(false, false)) {\n+    not_exiting();\n+    return;\n+  }\n+  getout(0);\n+}\n+\n+/// \":restart\": restart the Nvim server (using \":qall\").\n+/// \":restart +cmd\": restart the Nvim server using \":cmd\".\n+static void ex_restart(exarg_T *eap)\n+{\n   Error err = ERROR_INIT;\n-  if ((eap->forceit || !check_changed_any(false, false))\n-      && (eap->cmdidx != CMD_restart || remote_ui_restart(current_ui, &err))) {\n-    getout(0);\n+  if (check_changed_any(false, false) || !remote_ui_restart(current_ui, &err)) {\n+    if (ERROR_SET(&err)) {\n+      emsg(err.msg);  // UI disappeared already?\n+      api_clear_error(&err);\n+    }\n+    return;\n   }\n-  not_exiting();\n+  char *quit_cmd = (eap->do_ecmd_cmd) ? eap->do_ecmd_cmd : \"qall\";\n+  nvim_command(cstr_as_string(quit_cmd), &err);\n   if (ERROR_SET(&err)) {\n-    emsg(err.msg);  // UI disappeared already?\n+    emsg(err.msg);  // Could not exit\n     api_clear_error(&err);\n+    return;\n+  }\n+  if (!exiting) {\n+    ELOG(\"':%s' did not quit the server, quitting manually\", quit_cmd);",
            "html_url": "https://github.com/neovim/neovim/pull/34788#discussion_r2191700490",
            "id": 2191700490,
            "in_reply_to_id": 2189953519,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6CorIK",
            "original_commit_id": "41eb6866e60a31fac631ce7b6d8b28f5eb8cabc4",
            "original_line": 4884,
            "original_position": 52,
            "original_start_line": null,
            "path": "src/nvim/ex_docmd.c",
            "position": 1,
            "pull_request_review_id": 2996331285,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34788",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2191700490/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-07-08T07:25:56Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2191700490",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34788#discussion_r2203163967"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34788"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2203163967"
                }
            },
            "author_association": "MEMBER",
            "body": "By default, it should not fail. `:confirm` is how users can opt-in to the \"check for unsaved changes\" behavior.",
            "commit_id": "7940ff19040585be134feb020b2692f56d037e96",
            "created_at": "2025-07-13T05:28:31Z",
            "diff_hunk": "@@ -70,21 +70,21 @@ Stop or detach the current UI\n Restart Nvim\n \n                                                 *:restart*\n-:restart\n+:restart [+cmd]\n                 Restarts the Nvim server with the same startup arguments\n                 |v:argv| and reattaches the current UI to the new server.\n                 All other UIs will detach.\n \n-                This fails when changes have been made and Vim refuses to\n-                |abandon| the current buffer.\n+                This fails when changes have been made.\n+                Use `:confirm restart` to override.",
            "html_url": "https://github.com/neovim/neovim/pull/34788#discussion_r2203163967",
            "id": 2203163967,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6DUZ0_",
            "original_commit_id": "ee7c2ffae5ae1bcaead3eede3650b310f4f80ea5",
            "original_line": 79,
            "original_position": 13,
            "original_start_line": 78,
            "path": "runtime/doc/gui.txt",
            "position": 1,
            "pull_request_review_id": 3013881030,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34788",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2203163967/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-07-13T05:28:31Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2203163967",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34788#discussion_r2203174602"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34788"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2203174602"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "This would imply that `:restart` (without any ecmd arg) would quit the server with `:qall!` instead of `:qall`. Because `:qall` would trigger the same check when used without `:confirm` and then it would abandon restart when we probably shouldn't.",
            "commit_id": "7940ff19040585be134feb020b2692f56d037e96",
            "created_at": "2025-07-13T06:22:48Z",
            "diff_hunk": "@@ -70,21 +70,21 @@ Stop or detach the current UI\n Restart Nvim\n \n                                                 *:restart*\n-:restart\n+:restart [+cmd]\n                 Restarts the Nvim server with the same startup arguments\n                 |v:argv| and reattaches the current UI to the new server.\n                 All other UIs will detach.\n \n-                This fails when changes have been made and Vim refuses to\n-                |abandon| the current buffer.\n+                This fails when changes have been made.\n+                Use `:confirm restart` to override.",
            "html_url": "https://github.com/neovim/neovim/pull/34788#discussion_r2203174602",
            "id": 2203174602,
            "in_reply_to_id": 2203163967,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6DUcbK",
            "original_commit_id": "ee7c2ffae5ae1bcaead3eede3650b310f4f80ea5",
            "original_line": 79,
            "original_position": 13,
            "original_start_line": 78,
            "path": "runtime/doc/gui.txt",
            "position": 1,
            "pull_request_review_id": 3013898072,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34788",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2203174602/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-07-13T06:33:12Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2203174602",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/94102031?v=4",
                "events_url": "https://api.github.com/users/sathya-pramodh/events{/privacy}",
                "followers_url": "https://api.github.com/users/sathya-pramodh/followers",
                "following_url": "https://api.github.com/users/sathya-pramodh/following{/other_user}",
                "gists_url": "https://api.github.com/users/sathya-pramodh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/sathya-pramodh",
                "id": 94102031,
                "login": "sathya-pramodh",
                "node_id": "U_kgDOBZviDw",
                "organizations_url": "https://api.github.com/users/sathya-pramodh/orgs",
                "received_events_url": "https://api.github.com/users/sathya-pramodh/received_events",
                "repos_url": "https://api.github.com/users/sathya-pramodh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/sathya-pramodh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/sathya-pramodh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/sathya-pramodh",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34788#discussion_r2203178758"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34788"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2203178758"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Resolved: 106d1c26bff7782f2218e7b892997702cd6a94ff",
            "commit_id": "7940ff19040585be134feb020b2692f56d037e96",
            "created_at": "2025-07-13T06:41:53Z",
            "diff_hunk": "@@ -70,21 +70,21 @@ Stop or detach the current UI\n Restart Nvim\n \n                                                 *:restart*\n-:restart\n+:restart [+cmd]\n                 Restarts the Nvim server with the same startup arguments\n                 |v:argv| and reattaches the current UI to the new server.\n                 All other UIs will detach.\n \n-                This fails when changes have been made and Vim refuses to\n-                |abandon| the current buffer.\n+                This fails when changes have been made.\n+                Use `:confirm restart` to override.",
            "html_url": "https://github.com/neovim/neovim/pull/34788#discussion_r2203178758",
            "id": 2203178758,
            "in_reply_to_id": 2203163967,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6DUdcG",
            "original_commit_id": "ee7c2ffae5ae1bcaead3eede3650b310f4f80ea5",
            "original_line": 79,
            "original_position": 13,
            "original_start_line": 78,
            "path": "runtime/doc/gui.txt",
            "position": 1,
            "pull_request_review_id": 3013902071,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34788",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2203178758/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-07-13T06:41:53Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2203178758",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/94102031?v=4",
                "events_url": "https://api.github.com/users/sathya-pramodh/events{/privacy}",
                "followers_url": "https://api.github.com/users/sathya-pramodh/followers",
                "following_url": "https://api.github.com/users/sathya-pramodh/following{/other_user}",
                "gists_url": "https://api.github.com/users/sathya-pramodh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/sathya-pramodh",
                "id": 94102031,
                "login": "sathya-pramodh",
                "node_id": "U_kgDOBZviDw",
                "organizations_url": "https://api.github.com/users/sathya-pramodh/orgs",
                "received_events_url": "https://api.github.com/users/sathya-pramodh/received_events",
                "repos_url": "https://api.github.com/users/sathya-pramodh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/sathya-pramodh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/sathya-pramodh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/sathya-pramodh",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34788#discussion_r2222838590"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34788"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2222838590"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\n    emsg(\"restart failed: +cmd did not quit the server\");\n```",
            "commit_id": "7940ff19040585be134feb020b2692f56d037e96",
            "created_at": "2025-07-22T15:01:39Z",
            "diff_hunk": "@@ -4829,22 +4837,39 @@ int before_quit_all(exarg_T *eap)\n }\n \n /// \":qall\": try to quit all windows\n-/// \":restart\": restart the Nvim server\n-static void ex_quitall_or_restart(exarg_T *eap)\n+static void ex_quitall(exarg_T *eap)\n {\n   if (before_quit_all(eap) == FAIL) {\n     return;\n   }\n   exiting = true;\n+  if (!eap->forceit && check_changed_any(false, false)) {\n+    not_exiting();\n+    return;\n+  }\n+  getout(0);\n+}\n+\n+/// \":restart\": restart the Nvim server (using \":qall!\").\n+/// \":restart +cmd\": restart the Nvim server using \":cmd\".\n+static void ex_restart(exarg_T *eap)\n+{\n+  char *quit_cmd = (eap->do_ecmd_cmd) ? eap->do_ecmd_cmd : \"qall!\";\n   Error err = ERROR_INIT;\n-  if ((eap->forceit || !check_changed_any(false, false))\n-      && (eap->cmdidx != CMD_restart || remote_ui_restart(current_ui, &err))) {\n-    getout(0);\n+  if ((cmdmod.cmod_flags & CMOD_CONFIRM) && check_changed_any(false, false)) {\n+    return;\n   }\n-  not_exiting();\n+  restarting = true;\n+  nvim_command(cstr_as_string(quit_cmd), &err);\n   if (ERROR_SET(&err)) {\n-    emsg(err.msg);  // UI disappeared already?\n+    emsg(err.msg);  // Could not exit\n     api_clear_error(&err);\n+    not_restarting();\n+    return;\n+  }\n+  if (!exiting) {\n+    emsg(\"':cmd' did not quit the server, abandoning restart\");",
            "html_url": "https://github.com/neovim/neovim/pull/34788#discussion_r2222838590",
            "id": 2222838590,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6EfdM-",
            "original_commit_id": "8b152e909a553a8633a233ff91e51ff157b0485c",
            "original_line": 4871,
            "original_position": 64,
            "original_start_line": null,
            "path": "src/nvim/ex_docmd.c",
            "position": 1,
            "pull_request_review_id": 3043440337,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34788",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2222838590/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-07-22T15:02:01Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2222838590",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34788#discussion_r2222885113"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34788"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2222885113"
                }
            },
            "author_association": "MEMBER",
            "body": "isn't `getout` a more appropriate place for this logic? `os_exit` is lower-level. perhaps just after here: https://github.com/neovim/neovim/blob/ea2d226df6f344451306274f3f99911d459fb9dd/src/nvim/main.c#L808-L810",
            "commit_id": "7940ff19040585be134feb020b2692f56d037e96",
            "created_at": "2025-07-22T15:15:48Z",
            "diff_hunk": "@@ -664,6 +664,16 @@ void os_exit(int r)\n   FUNC_ATTR_NORETURN\n {\n   exiting = true;\n+  if (restarting) {",
            "html_url": "https://github.com/neovim/neovim/pull/34788#discussion_r2222885113",
            "id": 2222885113,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6Efoj5",
            "original_commit_id": "8b152e909a553a8633a233ff91e51ff157b0485c",
            "original_line": 667,
            "original_position": 4,
            "original_start_line": null,
            "path": "src/nvim/main.c",
            "position": 1,
            "pull_request_review_id": 3043509137,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34788",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2222885113/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-07-22T15:15:48Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2222885113",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34788#discussion_r2223126219"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34788"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2223126219"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Resolved: https://github.com/neovim/neovim/pull/34788/commits/32c53ca50f910953446892a4172d257ddf20fcfe",
            "commit_id": "7940ff19040585be134feb020b2692f56d037e96",
            "created_at": "2025-07-22T16:29:53Z",
            "diff_hunk": "@@ -664,6 +664,16 @@ void os_exit(int r)\n   FUNC_ATTR_NORETURN\n {\n   exiting = true;\n+  if (restarting) {",
            "html_url": "https://github.com/neovim/neovim/pull/34788#discussion_r2223126219",
            "id": 2223126219,
            "in_reply_to_id": 2222885113,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6EgjbL",
            "original_commit_id": "8b152e909a553a8633a233ff91e51ff157b0485c",
            "original_line": 667,
            "original_position": 4,
            "original_start_line": null,
            "path": "src/nvim/main.c",
            "position": 1,
            "pull_request_review_id": 3043852800,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34788",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2223126219/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-07-22T16:29:53Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2223126219",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/94102031?v=4",
                "events_url": "https://api.github.com/users/sathya-pramodh/events{/privacy}",
                "followers_url": "https://api.github.com/users/sathya-pramodh/followers",
                "following_url": "https://api.github.com/users/sathya-pramodh/following{/other_user}",
                "gists_url": "https://api.github.com/users/sathya-pramodh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/sathya-pramodh",
                "id": 94102031,
                "login": "sathya-pramodh",
                "node_id": "U_kgDOBZviDw",
                "organizations_url": "https://api.github.com/users/sathya-pramodh/orgs",
                "received_events_url": "https://api.github.com/users/sathya-pramodh/received_events",
                "repos_url": "https://api.github.com/users/sathya-pramodh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/sathya-pramodh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/sathya-pramodh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/sathya-pramodh",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34788#discussion_r2223127011"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34788"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2223127011"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Resolved: https://github.com/neovim/neovim/pull/34788/commits/32c53ca50f910953446892a4172d257ddf20fcfe",
            "commit_id": "7940ff19040585be134feb020b2692f56d037e96",
            "created_at": "2025-07-22T16:30:06Z",
            "diff_hunk": "@@ -4829,22 +4837,39 @@ int before_quit_all(exarg_T *eap)\n }\n \n /// \":qall\": try to quit all windows\n-/// \":restart\": restart the Nvim server\n-static void ex_quitall_or_restart(exarg_T *eap)\n+static void ex_quitall(exarg_T *eap)\n {\n   if (before_quit_all(eap) == FAIL) {\n     return;\n   }\n   exiting = true;\n+  if (!eap->forceit && check_changed_any(false, false)) {\n+    not_exiting();\n+    return;\n+  }\n+  getout(0);\n+}\n+\n+/// \":restart\": restart the Nvim server (using \":qall!\").\n+/// \":restart +cmd\": restart the Nvim server using \":cmd\".\n+static void ex_restart(exarg_T *eap)\n+{\n+  char *quit_cmd = (eap->do_ecmd_cmd) ? eap->do_ecmd_cmd : \"qall!\";\n   Error err = ERROR_INIT;\n-  if ((eap->forceit || !check_changed_any(false, false))\n-      && (eap->cmdidx != CMD_restart || remote_ui_restart(current_ui, &err))) {\n-    getout(0);\n+  if ((cmdmod.cmod_flags & CMOD_CONFIRM) && check_changed_any(false, false)) {\n+    return;\n   }\n-  not_exiting();\n+  restarting = true;\n+  nvim_command(cstr_as_string(quit_cmd), &err);\n   if (ERROR_SET(&err)) {\n-    emsg(err.msg);  // UI disappeared already?\n+    emsg(err.msg);  // Could not exit\n     api_clear_error(&err);\n+    not_restarting();\n+    return;\n+  }\n+  if (!exiting) {\n+    emsg(\"':cmd' did not quit the server, abandoning restart\");",
            "html_url": "https://github.com/neovim/neovim/pull/34788#discussion_r2223127011",
            "id": 2223127011,
            "in_reply_to_id": 2222838590,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6Egjnj",
            "original_commit_id": "8b152e909a553a8633a233ff91e51ff157b0485c",
            "original_line": 4871,
            "original_position": 64,
            "original_start_line": null,
            "path": "src/nvim/ex_docmd.c",
            "position": 1,
            "pull_request_review_id": 3043853767,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34788",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2223127011/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-07-22T16:30:06Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2223127011",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/94102031?v=4",
                "events_url": "https://api.github.com/users/sathya-pramodh/events{/privacy}",
                "followers_url": "https://api.github.com/users/sathya-pramodh/followers",
                "following_url": "https://api.github.com/users/sathya-pramodh/following{/other_user}",
                "gists_url": "https://api.github.com/users/sathya-pramodh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/sathya-pramodh",
                "id": 94102031,
                "login": "sathya-pramodh",
                "node_id": "U_kgDOBZviDw",
                "organizations_url": "https://api.github.com/users/sathya-pramodh/orgs",
                "received_events_url": "https://api.github.com/users/sathya-pramodh/received_events",
                "repos_url": "https://api.github.com/users/sathya-pramodh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/sathya-pramodh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/sathya-pramodh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/sathya-pramodh",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34788#discussion_r2223282264"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34788"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2223282264"
                }
            },
            "author_association": "MEMBER",
            "body": "this is redundant\n\n```suggestion\n    emsg(\"restart failed: +cmd did not quit the server\");\n```",
            "commit_id": "7940ff19040585be134feb020b2692f56d037e96",
            "created_at": "2025-07-22T17:16:33Z",
            "diff_hunk": "@@ -4829,22 +4837,39 @@ int before_quit_all(exarg_T *eap)\n }\n \n /// \":qall\": try to quit all windows\n-/// \":restart\": restart the Nvim server\n-static void ex_quitall_or_restart(exarg_T *eap)\n+static void ex_quitall(exarg_T *eap)\n {\n   if (before_quit_all(eap) == FAIL) {\n     return;\n   }\n   exiting = true;\n+  if (!eap->forceit && check_changed_any(false, false)) {\n+    not_exiting();\n+    return;\n+  }\n+  getout(0);\n+}\n+\n+/// \":restart\": restart the Nvim server (using \":qall!\").\n+/// \":restart +cmd\": restart the Nvim server using \":cmd\".\n+static void ex_restart(exarg_T *eap)\n+{\n+  char *quit_cmd = (eap->do_ecmd_cmd) ? eap->do_ecmd_cmd : \"qall!\";\n   Error err = ERROR_INIT;\n-  if ((eap->forceit || !check_changed_any(false, false))\n-      && (eap->cmdidx != CMD_restart || remote_ui_restart(current_ui, &err))) {\n-    getout(0);\n+  if ((cmdmod.cmod_flags & CMOD_CONFIRM) && check_changed_any(false, false)) {\n+    return;\n   }\n-  not_exiting();\n+  restarting = true;\n+  nvim_command(cstr_as_string(quit_cmd), &err);\n   if (ERROR_SET(&err)) {\n-    emsg(err.msg);  // UI disappeared already?\n+    emsg(err.msg);  // Could not exit\n     api_clear_error(&err);\n+    not_restarting();\n+    return;\n+  }\n+  if (!exiting) {\n+    emsg(\"restart failed: +cmd did not quit the server, abandoning restart\");",
            "html_url": "https://github.com/neovim/neovim/pull/34788#discussion_r2223282264",
            "id": 2223282264,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6EhJhY",
            "original_commit_id": "32c53ca50f910953446892a4172d257ddf20fcfe",
            "original_line": 4871,
            "original_position": 64,
            "original_start_line": null,
            "path": "src/nvim/ex_docmd.c",
            "position": 1,
            "pull_request_review_id": 3044053436,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34788",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2223282264/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-07-22T17:16:46Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2223282264",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34788#discussion_r2224032834"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34788"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2224032834"
                }
            },
            "author_association": "MEMBER",
            "body": "`?` has special meaning in a Lua pattern\r\n```suggestion\r\n    screen:expect({ any = vim.pesc('Save changes to \"Untitled\"?') })\r\n```",
            "commit_id": "7940ff19040585be134feb020b2692f56d037e96",
            "created_at": "2025-07-22T23:55:06Z",
            "diff_hunk": "@@ -273,20 +283,15 @@ describe('TUI :restart', function()\n       {5:-- TERMINAL --}                                    |\n     ]])\n \n-    -- Check \":restart\" on a modified buffer.\n-    tt.feed_data(':restart\\013')\n-    screen_expect([[\n-      this will be removed                              |\n-      {3:                                                  }|\n-      {101:E37: No write since last change}                   |\n-      {101:E162: No write since last change for buffer \"[No N}|\n-      {101:ame]\"}                                             |\n-      {102:Press ENTER or type command to continue}^           |\n-      {5:-- TERMINAL --}                                    |\n-    ]])\n+    -- Check \":confirm restart\" on a modified buffer.\n+    tt.feed_data(':confirm restart\\013')\n+    screen:expect({ any = 'Save changes to \"Untitled\"?' })",
            "html_url": "https://github.com/neovim/neovim/pull/34788#discussion_r2224032834",
            "id": 2224032834,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6EkAxC",
            "original_commit_id": "82cc31703f7c6a5e933e20a102ad59510827d190",
            "original_line": 288,
            "original_position": 34,
            "original_start_line": null,
            "path": "test/functional/terminal/tui_spec.lua",
            "position": 1,
            "pull_request_review_id": 3045170830,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34788",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2224032834/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-07-22T23:55:47Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2224032834",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34788#discussion_r2224033489"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34788"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2224033489"
                }
            },
            "author_association": "MEMBER",
            "body": "`+` has special meaning in a Lua pattern\r\n```suggestion\r\n    screen:expect({ any = vim.pesc('+cmd did not quit the server') })\r\n```",
            "commit_id": "7940ff19040585be134feb020b2692f56d037e96",
            "created_at": "2025-07-22T23:55:23Z",
            "diff_hunk": "@@ -264,6 +264,16 @@ describe('TUI :restart', function()\n     restart_pid_check()\n     gui_running_check()\n \n+    -- Check \":restart +qall\" on an unmodified buffer.\n+    tt.feed_data(':restart +qall\\013')\n+    screen_expect(s0)\n+    restart_pid_check()\n+    gui_running_check()\n+\n+    -- Check \":restart +echo\" cannot restart server.\n+    tt.feed_data(':restart +echo\\013')\n+    screen:expect({ any = '+cmd did not quit the server' })",
            "html_url": "https://github.com/neovim/neovim/pull/34788#discussion_r2224033489",
            "id": 2224033489,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6EkA7R",
            "original_commit_id": "82cc31703f7c6a5e933e20a102ad59510827d190",
            "original_line": 275,
            "original_position": 12,
            "original_start_line": null,
            "path": "test/functional/terminal/tui_spec.lua",
            "position": 1,
            "pull_request_review_id": 3045172081,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34788",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2224033489/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-07-22T23:55:59Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2224033489",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        }
    ],
    "comment_regular_data": [
        {
            "author_association": "CONTRIBUTOR",
            "body": "~I would need to look at these failing tests a little bit more...~\r\n\r\nOnly needed a rebase :D",
            "created_at": "2025-07-05T07:39:33Z",
            "html_url": "https://github.com/neovim/neovim/pull/34788#issuecomment-3038364792",
            "id": 3038364792,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34788",
            "node_id": "IC_kwDOAPphoM61GcR4",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3038364792/reactions"
            },
            "updated_at": "2025-07-05T18:58:58Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3038364792",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/94102031?v=4",
                "events_url": "https://api.github.com/users/sathya-pramodh/events{/privacy}",
                "followers_url": "https://api.github.com/users/sathya-pramodh/followers",
                "following_url": "https://api.github.com/users/sathya-pramodh/following{/other_user}",
                "gists_url": "https://api.github.com/users/sathya-pramodh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/sathya-pramodh",
                "id": 94102031,
                "login": "sathya-pramodh",
                "node_id": "U_kgDOBZviDw",
                "organizations_url": "https://api.github.com/users/sathya-pramodh/orgs",
                "received_events_url": "https://api.github.com/users/sathya-pramodh/received_events",
                "repos_url": "https://api.github.com/users/sathya-pramodh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/sathya-pramodh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/sathya-pramodh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/sathya-pramodh",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Thanks @sathya-pramodh ! This also means the current \"!\" behavior can be removed (we can decide what \"!\" means later). Do you plan to add a test? \r\n\r\nMaybe as a followup, I think it's clear now that we also need to support arbitrary commands, like `:restart lua vim.pack.update()` #34822 .\r\n",
            "created_at": "2025-07-06T23:40:47Z",
            "html_url": "https://github.com/neovim/neovim/pull/34788#issuecomment-3043144219",
            "id": 3043144219,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34788",
            "node_id": "IC_kwDOAPphoM61YrIb",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3043144219/reactions"
            },
            "updated_at": "2025-07-06T23:48:53Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3043144219",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "The current implementation of this PR calls `getout(0)` even if the `+cmd` doesn't exit the server. To remove `!`, this behavior needs to be removed.\r\n\r\nAlso, is be a problem that `ExitPre` may be triggered multiple times due to `+cmd`.",
            "created_at": "2025-07-06T23:51:40Z",
            "html_url": "https://github.com/neovim/neovim/pull/34788#issuecomment-3043149921",
            "id": 3043149921,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34788",
            "node_id": "IC_kwDOAPphoM61Yshh",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3043149921/reactions"
            },
            "updated_at": "2025-07-06T23:54:05Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3043149921",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "> This also means the current \"!\" behavior can be removed (we can decide what \"!\" means later). \n\nYes! That should be easy :)\n\n> Do you plan to add a test? \n\nYeah. I could just make two test cases: one where +cmd exits the server and one where +cmd doesn't. Shouldn't be an issue, and if \":restart!\" is removed then I'd need to call \":confirm restart\" or \":restart +qall!\" instead (former preferably).\n",
            "created_at": "2025-07-07T02:11:56Z",
            "html_url": "https://github.com/neovim/neovim/pull/34788#issuecomment-3043281197",
            "id": 3043281197,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34788",
            "node_id": "IC_kwDOAPphoM61ZMkt",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3043281197/reactions"
            },
            "updated_at": "2025-07-07T02:32:30Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3043281197",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/94102031?v=4",
                "events_url": "https://api.github.com/users/sathya-pramodh/events{/privacy}",
                "followers_url": "https://api.github.com/users/sathya-pramodh/followers",
                "following_url": "https://api.github.com/users/sathya-pramodh/following{/other_user}",
                "gists_url": "https://api.github.com/users/sathya-pramodh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/sathya-pramodh",
                "id": 94102031,
                "login": "sathya-pramodh",
                "node_id": "U_kgDOBZviDw",
                "organizations_url": "https://api.github.com/users/sathya-pramodh/orgs",
                "received_events_url": "https://api.github.com/users/sathya-pramodh/received_events",
                "repos_url": "https://api.github.com/users/sathya-pramodh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/sathya-pramodh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/sathya-pramodh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/sathya-pramodh",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "> The current implementation of this PR calls `getout(0)` even if the `+cmd` doesn't exit the server. To remove `!`, this behavior needs to be removed.\n\nWait isn't it only executed if the command's cmdidx is not `CMD_restart`?\n\n> Also, is be a problem that `ExitPre` may be triggered multiple times due to `+cmd`.\n\nI didn't think of that, that's a good catch. I'll have to look into this. Maybe a global state for all commands to see if the caller wants hooks to trigger? Or we could just move `before_quit_all()` into the branch that triggers the `getout(0)` for \":qall\"....\n",
            "created_at": "2025-07-07T02:30:24Z",
            "html_url": "https://github.com/neovim/neovim/pull/34788#issuecomment-3043304796",
            "id": 3043304796,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34788",
            "node_id": "IC_kwDOAPphoM61ZSVc",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3043304796/reactions"
            },
            "updated_at": "2025-07-07T02:33:51Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3043304796",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/94102031?v=4",
                "events_url": "https://api.github.com/users/sathya-pramodh/events{/privacy}",
                "followers_url": "https://api.github.com/users/sathya-pramodh/followers",
                "following_url": "https://api.github.com/users/sathya-pramodh/following{/other_user}",
                "gists_url": "https://api.github.com/users/sathya-pramodh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/sathya-pramodh",
                "id": 94102031,
                "login": "sathya-pramodh",
                "node_id": "U_kgDOBZviDw",
                "organizations_url": "https://api.github.com/users/sathya-pramodh/orgs",
                "received_events_url": "https://api.github.com/users/sathya-pramodh/received_events",
                "repos_url": "https://api.github.com/users/sathya-pramodh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/sathya-pramodh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/sathya-pramodh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/sathya-pramodh",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> Wait isn't it only executed if the command's cmdidx is not `CMD_restart`?\r\n\r\nOops, I misread the code.",
            "created_at": "2025-07-07T02:32:49Z",
            "html_url": "https://github.com/neovim/neovim/pull/34788#issuecomment-3043307663",
            "id": 3043307663,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34788",
            "node_id": "IC_kwDOAPphoM61ZTCP",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3043307663/reactions"
            },
            "updated_at": "2025-07-07T02:33:06Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3043307663",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "> Or we could just move `before_quit_all()` into the branch that triggers the `getout(0)` for \":qall\"....\n\nHonestly think this is a much better option.\n\n",
            "created_at": "2025-07-07T02:37:44Z",
            "html_url": "https://github.com/neovim/neovim/pull/34788#issuecomment-3043313282",
            "id": 3043313282,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34788",
            "node_id": "IC_kwDOAPphoM61ZUaC",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3043313282/reactions"
            },
            "updated_at": "2025-07-07T02:37:44Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3043313282",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/94102031?v=4",
                "events_url": "https://api.github.com/users/sathya-pramodh/events{/privacy}",
                "followers_url": "https://api.github.com/users/sathya-pramodh/followers",
                "following_url": "https://api.github.com/users/sathya-pramodh/following{/other_user}",
                "gists_url": "https://api.github.com/users/sathya-pramodh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/sathya-pramodh",
                "id": 94102031,
                "login": "sathya-pramodh",
                "node_id": "U_kgDOBZviDw",
                "organizations_url": "https://api.github.com/users/sathya-pramodh/orgs",
                "received_events_url": "https://api.github.com/users/sathya-pramodh/received_events",
                "repos_url": "https://api.github.com/users/sathya-pramodh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/sathya-pramodh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/sathya-pramodh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/sathya-pramodh",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Then it's better to move `:restart` and `:qall` to two separate functions.",
            "created_at": "2025-07-07T02:42:17Z",
            "html_url": "https://github.com/neovim/neovim/pull/34788#issuecomment-3043318938",
            "id": 3043318938,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34788",
            "node_id": "IC_kwDOAPphoM61ZVya",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3043318938/reactions"
            },
            "updated_at": "2025-07-07T02:42:17Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3043318938",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Yep. That'd be a very easy change as well :)",
            "created_at": "2025-07-07T02:45:14Z",
            "html_url": "https://github.com/neovim/neovim/pull/34788#issuecomment-3043322262",
            "id": 3043322262,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34788",
            "node_id": "IC_kwDOAPphoM61ZWmW",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3043322262/reactions"
            },
            "updated_at": "2025-07-07T02:45:14Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3043322262",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/94102031?v=4",
                "events_url": "https://api.github.com/users/sathya-pramodh/events{/privacy}",
                "followers_url": "https://api.github.com/users/sathya-pramodh/followers",
                "following_url": "https://api.github.com/users/sathya-pramodh/following{/other_user}",
                "gists_url": "https://api.github.com/users/sathya-pramodh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/sathya-pramodh",
                "id": 94102031,
                "login": "sathya-pramodh",
                "node_id": "U_kgDOBZviDw",
                "organizations_url": "https://api.github.com/users/sathya-pramodh/orgs",
                "received_events_url": "https://api.github.com/users/sathya-pramodh/received_events",
                "repos_url": "https://api.github.com/users/sathya-pramodh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/sathya-pramodh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/sathya-pramodh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/sathya-pramodh",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I don't think the current state of this PR is useful. It is quite limited and confusing due to this:\r\n> just match against a list of possible \"quit\" commands (and combinations) and then checking against that\r\n\r\nTo be useful, it's better to achieve this:\r\n> setup some sort of on_exiting callback which performs `remote_ui_restart` only when Nvim is about to exit",
            "created_at": "2025-07-07T13:29:17Z",
            "html_url": "https://github.com/neovim/neovim/pull/34788#issuecomment-3045154584",
            "id": 3045154584,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34788",
            "node_id": "IC_kwDOAPphoM61gV8Y",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3045154584/reactions"
            },
            "updated_at": "2025-07-07T13:29:35Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3045154584",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "> To be useful, it's better to achieve this:\r\n> \r\n> > setup some sort of on_exiting callback which performs `remote_ui_restart` only when Nvim is about to exit\r\n\r\nWould it make sense if we add a new global `restarting` which is set by calls to `ex_restart` and then we check that to call `remote_ui_restart` before running the VimExitPre hooks?\r\n",
            "created_at": "2025-07-07T14:03:33Z",
            "html_url": "https://github.com/neovim/neovim/pull/34788#issuecomment-3045330591",
            "id": 3045330591,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34788",
            "node_id": "IC_kwDOAPphoM61hA6f",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3045330591/reactions"
            },
            "updated_at": "2025-07-07T14:03:33Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3045330591",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/94102031?v=4",
                "events_url": "https://api.github.com/users/sathya-pramodh/events{/privacy}",
                "followers_url": "https://api.github.com/users/sathya-pramodh/followers",
                "following_url": "https://api.github.com/users/sathya-pramodh/following{/other_user}",
                "gists_url": "https://api.github.com/users/sathya-pramodh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/sathya-pramodh",
                "id": 94102031,
                "login": "sathya-pramodh",
                "node_id": "U_kgDOBZviDw",
                "organizations_url": "https://api.github.com/users/sathya-pramodh/orgs",
                "received_events_url": "https://api.github.com/users/sathya-pramodh/received_events",
                "repos_url": "https://api.github.com/users/sathya-pramodh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/sathya-pramodh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/sathya-pramodh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/sathya-pramodh",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "What are \"VimExitPre hooks\"?",
            "created_at": "2025-07-07T14:20:29Z",
            "html_url": "https://github.com/neovim/neovim/pull/34788#issuecomment-3045396982",
            "id": 3045396982,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34788",
            "node_id": "IC_kwDOAPphoM61hRH2",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3045396982/reactions"
            },
            "updated_at": "2025-07-07T14:21:33Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3045396982",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Oops. I meant VimLeavePre sorry.. `EVENT_EXITPRE` in the `auto_event` enum to be specific. Triggered here: https://github.com/neovim/neovim/blob/master/src/nvim/ex_docmd.c#L4718",
            "created_at": "2025-07-07T14:24:27Z",
            "html_url": "https://github.com/neovim/neovim/pull/34788#issuecomment-3045410869",
            "id": 3045410869,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34788",
            "node_id": "IC_kwDOAPphoM61hUg1",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3045410869/reactions"
            },
            "updated_at": "2025-07-07T14:24:27Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3045410869",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/94102031?v=4",
                "events_url": "https://api.github.com/users/sathya-pramodh/events{/privacy}",
                "followers_url": "https://api.github.com/users/sathya-pramodh/followers",
                "following_url": "https://api.github.com/users/sathya-pramodh/following{/other_user}",
                "gists_url": "https://api.github.com/users/sathya-pramodh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/sathya-pramodh",
                "id": 94102031,
                "login": "sathya-pramodh",
                "node_id": "U_kgDOBZviDw",
                "organizations_url": "https://api.github.com/users/sathya-pramodh/orgs",
                "received_events_url": "https://api.github.com/users/sathya-pramodh/received_events",
                "repos_url": "https://api.github.com/users/sathya-pramodh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/sathya-pramodh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/sathya-pramodh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/sathya-pramodh",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "It should definitely not be sent before `ExitPre`, as `ExitPre` autocommands may prevent exiting. I wonder if it should be sent after all autocommands, e.g. in `os_exit()`, which is the common exit path.",
            "created_at": "2025-07-07T14:34:56Z",
            "html_url": "https://github.com/neovim/neovim/pull/34788#issuecomment-3045447850",
            "id": 3045447850,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34788",
            "node_id": "IC_kwDOAPphoM61hdiq",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3045447850/reactions"
            },
            "updated_at": "2025-07-07T14:34:56Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3045447850",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Should I add to `news.txt` as well?",
            "created_at": "2025-07-22T16:20:45Z",
            "html_url": "https://github.com/neovim/neovim/pull/34788#issuecomment-3103642100",
            "id": 3103642100,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34788",
            "node_id": "IC_kwDOAPphoM64_dH0",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3103642100/reactions"
            },
            "updated_at": "2025-07-22T16:20:45Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3103642100",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/94102031?v=4",
                "events_url": "https://api.github.com/users/sathya-pramodh/events{/privacy}",
                "followers_url": "https://api.github.com/users/sathya-pramodh/followers",
                "following_url": "https://api.github.com/users/sathya-pramodh/following{/other_user}",
                "gists_url": "https://api.github.com/users/sathya-pramodh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/sathya-pramodh",
                "id": 94102031,
                "login": "sathya-pramodh",
                "node_id": "U_kgDOBZviDw",
                "organizations_url": "https://api.github.com/users/sathya-pramodh/orgs",
                "received_events_url": "https://api.github.com/users/sathya-pramodh/received_events",
                "repos_url": "https://api.github.com/users/sathya-pramodh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/sathya-pramodh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/sathya-pramodh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/sathya-pramodh",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> Should I add to `news.txt` as well?\r\n\r\nno, this is an unreleased feature and it was already mentioned in news.txt",
            "created_at": "2025-07-22T17:16:11Z",
            "html_url": "https://github.com/neovim/neovim/pull/34788#issuecomment-3103938343",
            "id": 3103938343,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34788",
            "node_id": "IC_kwDOAPphoM65Alcn",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3103938343/reactions"
            },
            "updated_at": "2025-07-22T17:16:11Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3103938343",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Since `:confirm restart` is working, now I'm wondering if we actually need the `+cmd` feature. The \"arbitrary args\" features https://github.com/neovim/neovim/issues/34822 is definitely needed, but I can't think of a use-case for `+cmd`, except I guess it could call a user-defined command (`:restart +MyQuitall`) that does some sort of cleanup/preparation...",
            "created_at": "2025-07-23T00:14:37Z",
            "html_url": "https://github.com/neovim/neovim/pull/34788#issuecomment-3105212263",
            "id": 3105212263,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34788",
            "node_id": "IC_kwDOAPphoM65Fcdn",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3105212263/reactions"
            },
            "updated_at": "2025-07-23T00:15:19Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3105212263",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Yes! I have the changes for #34822 ready on top of the changes from this PR locally and use it by having a user-defined `PreRestart` and `PostRestart` and just calling `:restart +PreRestart PostRestart` for some session restoration.\n\nOf course I still need to work on the specifics of that still but the general structure is ready :)",
            "created_at": "2025-07-23T03:07:21Z",
            "html_url": "https://github.com/neovim/neovim/pull/34788#issuecomment-3105510608",
            "id": 3105510608,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34788",
            "node_id": "IC_kwDOAPphoM65GlTQ",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 1,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3105510608/reactions"
            },
            "updated_at": "2025-07-23T03:07:34Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3105510608",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/94102031?v=4",
                "events_url": "https://api.github.com/users/sathya-pramodh/events{/privacy}",
                "followers_url": "https://api.github.com/users/sathya-pramodh/followers",
                "following_url": "https://api.github.com/users/sathya-pramodh/following{/other_user}",
                "gists_url": "https://api.github.com/users/sathya-pramodh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/sathya-pramodh",
                "id": 94102031,
                "login": "sathya-pramodh",
                "node_id": "U_kgDOBZviDw",
                "organizations_url": "https://api.github.com/users/sathya-pramodh/orgs",
                "received_events_url": "https://api.github.com/users/sathya-pramodh/received_events",
                "repos_url": "https://api.github.com/users/sathya-pramodh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/sathya-pramodh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/sathya-pramodh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/sathya-pramodh",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "It seems `:confirm` applies to `:restart` a bit differently from other commands. Other commands like `:quit` fail on unmodified buffer without `:confirm`, while `:restart` succeeds unless `:confirm` is used.",
            "created_at": "2025-11-10T00:51:53Z",
            "html_url": "https://github.com/neovim/neovim/pull/34788#issuecomment-3509043691",
            "id": 3509043691,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34788",
            "node_id": "IC_kwDOAPphoM7RJ8Hr",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3509043691/reactions"
            },
            "updated_at": "2025-11-10T00:53:01Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3509043691",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Yes, it's a diversion. I'm not sure I like it, but `:help :confirm` already notes a few different special-cases so I thought another special could work here. ",
            "created_at": "2025-11-10T05:53:53Z",
            "html_url": "https://github.com/neovim/neovim/pull/34788#issuecomment-3509538735",
            "id": 3509538735,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34788",
            "node_id": "IC_kwDOAPphoM7RL0-v",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3509538735/reactions"
            },
            "updated_at": "2025-11-10T05:53:53Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3509538735",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        }
    ],
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/34788/comments",
    "commits_url": "https://api.github.com/repos/neovim/neovim/pulls/34788/commits",
    "created_at": "2025-07-04T19:34:20Z",
    "diff_url": "https://github.com/neovim/neovim/pull/34788.diff",
    "draft": false,
    "head": {
        "label": "sathya-pramodh:feat/+cmd",
        "ref": "feat/+cmd",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/sathya-pramodh/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/sathya-pramodh/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/sathya-pramodh/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/sathya-pramodh/neovim/branches{/branch}",
            "clone_url": "https://github.com/sathya-pramodh/neovim.git",
            "collaborators_url": "https://api.github.com/repos/sathya-pramodh/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/sathya-pramodh/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/sathya-pramodh/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/sathya-pramodh/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/sathya-pramodh/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/sathya-pramodh/neovim/contributors",
            "created_at": "2025-03-02T11:19:38Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/sathya-pramodh/neovim/deployments",
            "description": "Vim-fork focused on extensibility and usability",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/sathya-pramodh/neovim/downloads",
            "events_url": "https://api.github.com/repos/sathya-pramodh/neovim/events",
            "fork": true,
            "forks": 0,
            "forks_count": 0,
            "forks_url": "https://api.github.com/repos/sathya-pramodh/neovim/forks",
            "full_name": "sathya-pramodh/neovim",
            "git_commits_url": "https://api.github.com/repos/sathya-pramodh/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/sathya-pramodh/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/sathya-pramodh/neovim/git/tags{/sha}",
            "git_url": "git://github.com/sathya-pramodh/neovim.git",
            "has_discussions": false,
            "has_downloads": true,
            "has_issues": false,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://neovim.io",
            "hooks_url": "https://api.github.com/repos/sathya-pramodh/neovim/hooks",
            "html_url": "https://github.com/sathya-pramodh/neovim",
            "id": 941469487,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/sathya-pramodh/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/sathya-pramodh/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/sathya-pramodh/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/sathya-pramodh/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/sathya-pramodh/neovim/labels{/name}",
            "language": "Vim Script",
            "languages_url": "https://api.github.com/repos/sathya-pramodh/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/sathya-pramodh/neovim/merges",
            "milestones_url": "https://api.github.com/repos/sathya-pramodh/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "R_kgDOOB2vLw",
            "notifications_url": "https://api.github.com/repos/sathya-pramodh/neovim/notifications{?since,all,participating}",
            "open_issues": 0,
            "open_issues_count": 0,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/94102031?v=4",
                "events_url": "https://api.github.com/users/sathya-pramodh/events{/privacy}",
                "followers_url": "https://api.github.com/users/sathya-pramodh/followers",
                "following_url": "https://api.github.com/users/sathya-pramodh/following{/other_user}",
                "gists_url": "https://api.github.com/users/sathya-pramodh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/sathya-pramodh",
                "id": 94102031,
                "login": "sathya-pramodh",
                "node_id": "U_kgDOBZviDw",
                "organizations_url": "https://api.github.com/users/sathya-pramodh/orgs",
                "received_events_url": "https://api.github.com/users/sathya-pramodh/received_events",
                "repos_url": "https://api.github.com/users/sathya-pramodh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/sathya-pramodh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/sathya-pramodh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/sathya-pramodh",
                "user_view_type": "public"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/sathya-pramodh/neovim/pulls{/number}",
            "pushed_at": "2025-09-06T07:36:52Z",
            "releases_url": "https://api.github.com/repos/sathya-pramodh/neovim/releases{/id}",
            "size": 330327,
            "ssh_url": "git@github.com:sathya-pramodh/neovim.git",
            "stargazers_count": 1,
            "stargazers_url": "https://api.github.com/repos/sathya-pramodh/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/sathya-pramodh/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/sathya-pramodh/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/sathya-pramodh/neovim/subscription",
            "svn_url": "https://github.com/sathya-pramodh/neovim",
            "tags_url": "https://api.github.com/repos/sathya-pramodh/neovim/tags",
            "teams_url": "https://api.github.com/repos/sathya-pramodh/neovim/teams",
            "topics": [],
            "trees_url": "https://api.github.com/repos/sathya-pramodh/neovim/git/trees{/sha}",
            "updated_at": "2025-09-06T06:51:03Z",
            "url": "https://api.github.com/repos/sathya-pramodh/neovim",
            "visibility": "public",
            "watchers": 1,
            "watchers_count": 1,
            "web_commit_signoff_required": false
        },
        "sha": "7940ff19040585be134feb020b2692f56d037e96",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/94102031?v=4",
            "events_url": "https://api.github.com/users/sathya-pramodh/events{/privacy}",
            "followers_url": "https://api.github.com/users/sathya-pramodh/followers",
            "following_url": "https://api.github.com/users/sathya-pramodh/following{/other_user}",
            "gists_url": "https://api.github.com/users/sathya-pramodh/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/sathya-pramodh",
            "id": 94102031,
            "login": "sathya-pramodh",
            "node_id": "U_kgDOBZviDw",
            "organizations_url": "https://api.github.com/users/sathya-pramodh/orgs",
            "received_events_url": "https://api.github.com/users/sathya-pramodh/received_events",
            "repos_url": "https://api.github.com/users/sathya-pramodh/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/sathya-pramodh/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/sathya-pramodh/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/sathya-pramodh",
            "user_view_type": "public"
        }
    },
    "html_url": "https://github.com/neovim/neovim/pull/34788",
    "id": 2642216437,
    "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34788",
    "labels": [
        {
            "color": "0052CC",
            "default": false,
            "description": "",
            "id": 6664957181,
            "name": "ci:skip-news",
            "node_id": "LA_kwDOAPphoM8AAAABjUMs_Q",
            "url": "https://api.github.com/repos/neovim/neovim/labels/ci:skip-news"
        }
    ],
    "locked": false,
    "merge_commit_sha": "54b8c99e51bb124d03e21a5d268d60125ef9cc01",
    "merged_at": "2025-07-24T02:45:31Z",
    "milestone": null,
    "node_id": "PR_kwDOAPphoM6dfQX1",
    "number": 34788,
    "patch_url": "https://github.com/neovim/neovim/pull/34788.patch",
    "requested_reviewers": [],
    "requested_teams": [],
    "review_comment_url": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}",
    "review_comments_url": "https://api.github.com/repos/neovim/neovim/pulls/34788/comments",
    "state": "closed",
    "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/7940ff19040585be134feb020b2692f56d037e96",
    "title": "feat: \":restart +cmd\"",
    "updated_at": "2025-11-10T05:53:53Z",
    "url": "https://api.github.com/repos/neovim/neovim/pulls/34788",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/94102031?v=4",
        "events_url": "https://api.github.com/users/sathya-pramodh/events{/privacy}",
        "followers_url": "https://api.github.com/users/sathya-pramodh/followers",
        "following_url": "https://api.github.com/users/sathya-pramodh/following{/other_user}",
        "gists_url": "https://api.github.com/users/sathya-pramodh/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/sathya-pramodh",
        "id": 94102031,
        "login": "sathya-pramodh",
        "node_id": "U_kgDOBZviDw",
        "organizations_url": "https://api.github.com/users/sathya-pramodh/orgs",
        "received_events_url": "https://api.github.com/users/sathya-pramodh/received_events",
        "repos_url": "https://api.github.com/users/sathya-pramodh/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/sathya-pramodh/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/sathya-pramodh/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/sathya-pramodh",
        "user_view_type": "public"
    }
}