{
    "_links": {
        "comments": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/32535/comments"
        },
        "commits": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/32535/commits"
        },
        "html": {
            "href": "https://github.com/neovim/neovim/pull/32535"
        },
        "issue": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/32535"
        },
        "review_comment": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}"
        },
        "review_comments": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/32535/comments"
        },
        "self": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
        },
        "statuses": {
            "href": "https://api.github.com/repos/neovim/neovim/statuses/18a0bbf07c6abab3685a072eae0789916283bc35"
        }
    },
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "auto_merge": null,
    "base": {
        "label": "neovim:master",
        "ref": "master",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/neovim/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/neovim/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/neovim/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/neovim/neovim/branches{/branch}",
            "clone_url": "https://github.com/neovim/neovim.git",
            "collaborators_url": "https://api.github.com/repos/neovim/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/neovim/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/neovim/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/neovim/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/neovim/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/neovim/neovim/contributors",
            "created_at": "2014-01-31T13:39:22Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/neovim/neovim/deployments",
            "description": "Vim-fork focused on extensibility and usability",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/neovim/neovim/downloads",
            "events_url": "https://api.github.com/repos/neovim/neovim/events",
            "fork": false,
            "forks": 6050,
            "forks_count": 6050,
            "forks_url": "https://api.github.com/repos/neovim/neovim/forks",
            "full_name": "neovim/neovim",
            "git_commits_url": "https://api.github.com/repos/neovim/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/neovim/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/neovim/neovim/git/tags{/sha}",
            "git_url": "git://github.com/neovim/neovim.git",
            "has_discussions": true,
            "has_downloads": true,
            "has_issues": true,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://neovim.io",
            "hooks_url": "https://api.github.com/repos/neovim/neovim/hooks",
            "html_url": "https://github.com/neovim/neovim",
            "id": 16408992,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/neovim/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/neovim/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/neovim/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/neovim/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/neovim/neovim/labels{/name}",
            "language": "Vim Script",
            "languages_url": "https://api.github.com/repos/neovim/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/neovim/neovim/merges",
            "milestones_url": "https://api.github.com/repos/neovim/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "MDEwOlJlcG9zaXRvcnkxNjQwODk5Mg==",
            "notifications_url": "https://api.github.com/repos/neovim/neovim/notifications{?since,all,participating}",
            "open_issues": 1919,
            "open_issues_count": 1919,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
                "events_url": "https://api.github.com/users/neovim/events{/privacy}",
                "followers_url": "https://api.github.com/users/neovim/followers",
                "following_url": "https://api.github.com/users/neovim/following{/other_user}",
                "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/neovim",
                "id": 6471485,
                "login": "neovim",
                "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
                "organizations_url": "https://api.github.com/users/neovim/orgs",
                "received_events_url": "https://api.github.com/users/neovim/received_events",
                "repos_url": "https://api.github.com/users/neovim/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
                "type": "Organization",
                "url": "https://api.github.com/users/neovim",
                "user_view_type": "public"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/neovim/neovim/pulls{/number}",
            "pushed_at": "2025-04-29T02:05:46Z",
            "releases_url": "https://api.github.com/repos/neovim/neovim/releases{/id}",
            "size": 319440,
            "ssh_url": "git@github.com:neovim/neovim.git",
            "stargazers_count": 89035,
            "stargazers_url": "https://api.github.com/repos/neovim/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/neovim/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/neovim/neovim/subscription",
            "svn_url": "https://github.com/neovim/neovim",
            "tags_url": "https://api.github.com/repos/neovim/neovim/tags",
            "teams_url": "https://api.github.com/repos/neovim/neovim/teams",
            "topics": [
                "api",
                "c",
                "lua",
                "neovim",
                "nvim",
                "text-editor",
                "vim"
            ],
            "trees_url": "https://api.github.com/repos/neovim/neovim/git/trees{/sha}",
            "updated_at": "2025-04-29T02:12:25Z",
            "url": "https://api.github.com/repos/neovim/neovim",
            "visibility": "public",
            "watchers": 89035,
            "watchers_count": 89035,
            "web_commit_signoff_required": false
        },
        "sha": "43f3c4a48f6cc3a4c4173591a59b8e3fcdb96759",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
            "events_url": "https://api.github.com/users/neovim/events{/privacy}",
            "followers_url": "https://api.github.com/users/neovim/followers",
            "following_url": "https://api.github.com/users/neovim/following{/other_user}",
            "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/neovim",
            "id": 6471485,
            "login": "neovim",
            "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
            "organizations_url": "https://api.github.com/users/neovim/orgs",
            "received_events_url": "https://api.github.com/users/neovim/received_events",
            "repos_url": "https://api.github.com/users/neovim/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
            "type": "Organization",
            "url": "https://api.github.com/users/neovim",
            "user_view_type": "public"
        }
    },
    "body": "This will let you pass 0 as the grid number to `nvim_input_mouse`. In that case Neovim will determine the grid automatically. The behaviour is undefined if the UI manually re-positions or re-order the windows, but as long as `compindex`, `screen_row` and `screen_col` is used from the `win_float_pos` UI event, it will work correctly.\r\n\r\n* fixes https://github.com/neovim/neovim/issues/27181",
    "closed_at": null,
    "comment_data": [
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2051313099"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2051313099"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n///             windows else 0. If you are using multigrid and let nvim determine the positioning\r\n```",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-19T01:25:07Z",
            "diff_hunk": "@@ -385,7 +385,10 @@ Integer nvim_input(uint64_t channel_id, String keys)\n ///                 The same specifiers are used as for a key press, except\n ///                 that the \"-\" separator is optional, so \"C-A-\", \"c-a\"\n ///                 and \"CA\" can all be used to specify Ctrl+Alt+click.\n-/// @param grid Grid number if the client uses |ui-multigrid|, else 0.\n+/// @param grid Grid number if the client uses |ui-multigrid|, with manual positioning of the\n+///             windows else 0. If you  are using multigrid and let nvim determine the positioning",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2051313099",
            "id": 2051313099,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM56RI3L",
            "original_commit_id": "9556fc515fe58e4b1bfcd65ee7a95dd826ee1a03",
            "original_line": 389,
            "original_position": 6,
            "original_start_line": null,
            "path": "src/nvim/api/vim.c",
            "position": null,
            "pull_request_review_id": 2779729046,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2051313099/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-19T01:25:07Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2051313099",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2051314992"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2051314992"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n• Multigrid UIs can optionally pass 0 as the mouse grid to let Nvim\r\n```",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-19T01:25:29Z",
            "diff_hunk": "@@ -189,6 +189,8 @@ These existing features changed their behavior.\n • 'spellfile' location defaults to `stdpath(\"data\")..\"/site/spell/\"` instead of the\n   first writable directoy in 'runtimepath'.\n • |vim.version.range()| doesn't exclude `to` if it is equal to `from`.\n+• Multigrid UIs can optionally pass 0 as the mouse grid to let Neovim",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2051314992",
            "id": 2051314992,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM56RJUw",
            "original_commit_id": "9556fc515fe58e4b1bfcd65ee7a95dd826ee1a03",
            "original_line": 192,
            "original_position": 4,
            "original_start_line": null,
            "path": "runtime/doc/news.txt",
            "position": null,
            "pull_request_review_id": 2779730960,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2051314992/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-19T01:25:29Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2051314992",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2051477684"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2051477684"
                }
            },
            "author_association": "MEMBER",
            "body": "Should these lines be added to `pum_select_mouse_pos()` as well?",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-19T13:26:18Z",
            "diff_hunk": "@@ -1319,6 +1320,14 @@ static void pum_position_at_mouse(int min_width)\n   int col = mouse_col;\n   pum_win_row_offset = 0;\n   pum_win_col_offset = 0;\n+\n+  if (ui_has(kUIMultigrid) && (grid == 0 || grid == 1)) {\n+    win_T *wp = mouse_find_win(&grid, &row, &col);\n+    // mouse_find_win compensates for the offset due to winbar for example\n+    // but we don't want that here\n+    row += wp->w_winrow_off;\n+    col += wp->w_wincol_off;",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2051477684",
            "id": 2051477684,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM56RxC0",
            "original_commit_id": "8e07536050493f7f8a8e16c0f6771fd8438a1eb5",
            "original_line": 1332,
            "original_position": 18,
            "original_start_line": 1326,
            "path": "src/nvim/popupmenu.c",
            "position": null,
            "pull_request_review_id": 2779969891,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2051477684/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-04-19T13:26:18Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2051477684",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2056780159"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2056780159"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "No, I don't think so, in `pum_select_mouse_pos`, the result is used to calculate grid relative coordinates, while here the row and col are absolute ones.\r\n\r\nI also tested with this to make sure, and tests started to fail\r\n```c\r\nif (grid == 0) {\r\n  win_T *wp = mouse_find_win(&grid, &row, &col);\r\n  if (ui_has(kUIMultigrid)) {\r\n    // mouse_find_win compensates for the offset due to winbar for example\r\n    // but we don't want that here\r\n    row += wp->w_winrow_off;\r\n    col += wp->w_wincol_off;\r\n  }\r\n}\r\n```",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-23T19:48:41Z",
            "diff_hunk": "@@ -1319,6 +1320,14 @@ static void pum_position_at_mouse(int min_width)\n   int col = mouse_col;\n   pum_win_row_offset = 0;\n   pum_win_col_offset = 0;\n+\n+  if (ui_has(kUIMultigrid) && (grid == 0 || grid == 1)) {\n+    win_T *wp = mouse_find_win(&grid, &row, &col);\n+    // mouse_find_win compensates for the offset due to winbar for example\n+    // but we don't want that here\n+    row += wp->w_winrow_off;\n+    col += wp->w_wincol_off;",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2056780159",
            "id": 2056780159,
            "in_reply_to_id": 2051477684,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM56l_l_",
            "original_commit_id": "8e07536050493f7f8a8e16c0f6771fd8438a1eb5",
            "original_line": 1332,
            "original_position": 18,
            "original_start_line": 1326,
            "path": "src/nvim/popupmenu.c",
            "position": null,
            "pull_request_review_id": 2788537997,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2056780159/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-04-23T19:48:41Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2056780159",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2057133515"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2057133515"
                }
            },
            "author_association": "MEMBER",
            "body": "Hmm wait. See below.",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-24T01:00:55Z",
            "diff_hunk": "@@ -1319,6 +1320,14 @@ static void pum_position_at_mouse(int min_width)\n   int col = mouse_col;\n   pum_win_row_offset = 0;\n   pum_win_col_offset = 0;\n+\n+  if (ui_has(kUIMultigrid) && (grid == 0 || grid == 1)) {\n+    win_T *wp = mouse_find_win(&grid, &row, &col);\n+    // mouse_find_win compensates for the offset due to winbar for example\n+    // but we don't want that here\n+    row += wp->w_winrow_off;\n+    col += wp->w_wincol_off;",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2057133515",
            "id": 2057133515,
            "in_reply_to_id": 2051477684,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM56nV3L",
            "original_commit_id": "8e07536050493f7f8a8e16c0f6771fd8438a1eb5",
            "original_line": 1332,
            "original_position": 18,
            "original_start_line": 1326,
            "path": "src/nvim/popupmenu.c",
            "position": null,
            "pull_request_review_id": 2789049970,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2057133515/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-04-24T01:00:55Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2057133515",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2057135719"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2057135719"
                }
            },
            "author_association": "MEMBER",
            "body": "This doesn't look right. `row` is relative to `grid`, but `pum_grid.comp_row` is relative to the compositor.",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-24T01:03:38Z",
            "diff_hunk": "@@ -1389,16 +1398,24 @@ static void pum_position_at_mouse(int min_width)\n /// Select the pum entry at the mouse position.\n static void pum_select_mouse_pos(void)\n {\n-  if (mouse_grid == pum_grid.handle) {\n-    pum_selected = mouse_row;\n+  int grid = mouse_grid;\n+  int row = mouse_row;\n+  int col = mouse_col;\n+\n+  if (grid == 0) {\n+    mouse_find_win(&grid, &row, &col);\n+  }\n+\n+  if (grid == pum_grid.handle) {\n+    pum_selected = row;\n     return;\n-  } else if (mouse_grid != pum_anchor_grid || mouse_col < pum_grid.comp_col\n-             || mouse_col >= pum_grid.comp_col + pum_grid.comp_width) {\n+  } else if (grid != pum_anchor_grid || col < pum_grid.comp_col\n+             || col >= pum_grid.comp_col + pum_grid.comp_width) {\n     pum_selected = -1;\n     return;\n   }\n \n-  int idx = mouse_row - pum_grid.comp_row;\n+  int idx = row - pum_grid.comp_row;",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2057135719",
            "id": 2057135719,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM56nWZn",
            "original_commit_id": "8e07536050493f7f8a8e16c0f6771fd8438a1eb5",
            "original_line": 1418,
            "original_position": 49,
            "original_start_line": null,
            "path": "src/nvim/popupmenu.c",
            "position": null,
            "pull_request_review_id": 2789052711,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2057135719/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-24T01:03:49Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2057135719",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2057135810"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2057135810"
                }
            },
            "author_association": "MEMBER",
            "body": "Same here",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-24T01:03:43Z",
            "diff_hunk": "@@ -1389,16 +1398,24 @@ static void pum_position_at_mouse(int min_width)\n /// Select the pum entry at the mouse position.\n static void pum_select_mouse_pos(void)\n {\n-  if (mouse_grid == pum_grid.handle) {\n-    pum_selected = mouse_row;\n+  int grid = mouse_grid;\n+  int row = mouse_row;\n+  int col = mouse_col;\n+\n+  if (grid == 0) {\n+    mouse_find_win(&grid, &row, &col);\n+  }\n+\n+  if (grid == pum_grid.handle) {\n+    pum_selected = row;\n     return;\n-  } else if (mouse_grid != pum_anchor_grid || mouse_col < pum_grid.comp_col\n-             || mouse_col >= pum_grid.comp_col + pum_grid.comp_width) {\n+  } else if (grid != pum_anchor_grid || col < pum_grid.comp_col\n+             || col >= pum_grid.comp_col + pum_grid.comp_width) {",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2057135810",
            "id": 2057135810,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM56nWbC",
            "original_commit_id": "8e07536050493f7f8a8e16c0f6771fd8438a1eb5",
            "original_line": 1413,
            "original_position": 43,
            "original_start_line": 1412,
            "path": "src/nvim/popupmenu.c",
            "position": null,
            "pull_request_review_id": 2789052711,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2057135810/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-04-24T01:03:49Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2057135810",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2057963990"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2057963990"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Indeed, it looks wrong. There seem to be some lack of testing around this case. Since even with my extended test suite that runs everything in multigrid mode, nothing fails. \r\n\r\nIt also looks like it was wrong before my changes, `row`/`mouse_row` was relative when using multigrid. I will see if I can add some tests and fix this separately. It was a bit changed here https://github.com/neovim/neovim/commit/d24fb72c335be905d0b7f2c67f9b988f07703d1f, but that does not change the coordinates used. I'm not entirely sure what the difference between `pum_row` and `pum_grid.com_row` is at the moment.\r\n\r\nAt the moment, I'm not even sure what's the practical use case for this branch other than not selecting anything, at least with the default option the TUI with Neovim 0.11 does not let you select any item with the mouse outside the popupmneu. But I will try to figure it out when I have more time.",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-24T09:30:25Z",
            "diff_hunk": "@@ -1389,16 +1398,24 @@ static void pum_position_at_mouse(int min_width)\n /// Select the pum entry at the mouse position.\n static void pum_select_mouse_pos(void)\n {\n-  if (mouse_grid == pum_grid.handle) {\n-    pum_selected = mouse_row;\n+  int grid = mouse_grid;\n+  int row = mouse_row;\n+  int col = mouse_col;\n+\n+  if (grid == 0) {\n+    mouse_find_win(&grid, &row, &col);\n+  }\n+\n+  if (grid == pum_grid.handle) {\n+    pum_selected = row;\n     return;\n-  } else if (mouse_grid != pum_anchor_grid || mouse_col < pum_grid.comp_col\n-             || mouse_col >= pum_grid.comp_col + pum_grid.comp_width) {\n+  } else if (grid != pum_anchor_grid || col < pum_grid.comp_col\n+             || col >= pum_grid.comp_col + pum_grid.comp_width) {\n     pum_selected = -1;\n     return;\n   }\n \n-  int idx = mouse_row - pum_grid.comp_row;\n+  int idx = row - pum_grid.comp_row;",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2057963990",
            "id": 2057963990,
            "in_reply_to_id": 2057135719,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM56qgnW",
            "original_commit_id": "8e07536050493f7f8a8e16c0f6771fd8438a1eb5",
            "original_line": 1418,
            "original_position": 49,
            "original_start_line": null,
            "path": "src/nvim/popupmenu.c",
            "position": null,
            "pull_request_review_id": 2790418420,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2057963990/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-24T09:41:14Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2057963990",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2057981933"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2057981933"
                }
            },
            "author_association": "MEMBER",
            "body": "Oh, it seems that when passing grid 0:\r\n- `ui_comp_mouse_focus()` finds `pum_grid` when clicking in pum area;\r\n- `mouse_find_grid_win()` sets `grid` to `DEFAULT_GRID_HANDLE` because there is no window for the popupmenu;\r\n- `row - pum_grid.comp_row` is still correct when `grid` is `DEFAULT_GRID_HANDLE`.\r\n\r\nSo the \"passing grid 0\" case is actually not affected by this problem. What's affected is passing the pum anchor grid as mouse grid.",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-24T09:39:51Z",
            "diff_hunk": "@@ -1389,16 +1398,24 @@ static void pum_position_at_mouse(int min_width)\n /// Select the pum entry at the mouse position.\n static void pum_select_mouse_pos(void)\n {\n-  if (mouse_grid == pum_grid.handle) {\n-    pum_selected = mouse_row;\n+  int grid = mouse_grid;\n+  int row = mouse_row;\n+  int col = mouse_col;\n+\n+  if (grid == 0) {\n+    mouse_find_win(&grid, &row, &col);\n+  }\n+\n+  if (grid == pum_grid.handle) {\n+    pum_selected = row;\n     return;\n-  } else if (mouse_grid != pum_anchor_grid || mouse_col < pum_grid.comp_col\n-             || mouse_col >= pum_grid.comp_col + pum_grid.comp_width) {\n+  } else if (grid != pum_anchor_grid || col < pum_grid.comp_col\n+             || col >= pum_grid.comp_col + pum_grid.comp_width) {\n     pum_selected = -1;\n     return;\n   }\n \n-  int idx = mouse_row - pum_grid.comp_row;\n+  int idx = row - pum_grid.comp_row;",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2057981933",
            "id": 2057981933,
            "in_reply_to_id": 2057135719,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM56qk_t",
            "original_commit_id": "8e07536050493f7f8a8e16c0f6771fd8438a1eb5",
            "original_line": 1418,
            "original_position": 49,
            "original_start_line": null,
            "path": "src/nvim/popupmenu.c",
            "position": null,
            "pull_request_review_id": 2790447264,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2057981933/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-24T09:39:57Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2057981933",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2057993676"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2057993676"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Yes, It's a problem in multigrid with indices other than 0. I think that this is what happened:\r\n1. Before https://github.com/neovim/neovim/commit/d24fb72c335be905d0b7f2c67f9b988f07703d1f and https://github.com/neovim/neovim/pull/31837 the comparison was correct, `pum_row` was actually relative.\r\n2. There's some lack of multigrid specific tests with a grid other than 1 for this this, so the problem was never detected.\r\n\r\n",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-24T09:46:29Z",
            "diff_hunk": "@@ -1389,16 +1398,24 @@ static void pum_position_at_mouse(int min_width)\n /// Select the pum entry at the mouse position.\n static void pum_select_mouse_pos(void)\n {\n-  if (mouse_grid == pum_grid.handle) {\n-    pum_selected = mouse_row;\n+  int grid = mouse_grid;\n+  int row = mouse_row;\n+  int col = mouse_col;\n+\n+  if (grid == 0) {\n+    mouse_find_win(&grid, &row, &col);\n+  }\n+\n+  if (grid == pum_grid.handle) {\n+    pum_selected = row;\n     return;\n-  } else if (mouse_grid != pum_anchor_grid || mouse_col < pum_grid.comp_col\n-             || mouse_col >= pum_grid.comp_col + pum_grid.comp_width) {\n+  } else if (grid != pum_anchor_grid || col < pum_grid.comp_col\n+             || col >= pum_grid.comp_col + pum_grid.comp_width) {\n     pum_selected = -1;\n     return;\n   }\n \n-  int idx = mouse_row - pum_grid.comp_row;\n+  int idx = row - pum_grid.comp_row;",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2057993676",
            "id": 2057993676,
            "in_reply_to_id": 2057135719,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM56qn3M",
            "original_commit_id": "8e07536050493f7f8a8e16c0f6771fd8438a1eb5",
            "original_line": 1418,
            "original_position": 49,
            "original_start_line": null,
            "path": "src/nvim/popupmenu.c",
            "position": null,
            "pull_request_review_id": 2790466193,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2057993676/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-24T09:46:29Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2057993676",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2058091311"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2058091311"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "It looks like the only case where the code matters is when passing the wrong grid id like this test\r\n```c\r\n      if send_mouse_grid then\r\n        api.nvim_input_mouse('right', 'drag', '', 2, 3, 6)\r\n      else\r\n        feed('<RightDrag><6,3>')\r\n      end\r\n      if multigrid then\r\n        screen:expect({\r\n          grid = [[\r\n        ## grid 1\r\n          [2:--------------------------------]|*5\r\n          [3:--------------------------------]|\r\n        ## grid 2\r\n          ^popup menu test                 |\r\n          {1:~                               }|*4\r\n        ## grid 3\r\n          :let g:menustr = 'baz'          |\r\n        ## grid 4\r\n          {n: foo }|\r\n          {n: bar }|\r\n          {s: baz }|\r\n        ]],\r\n          float_pos = { [4] = { -1, 'NW', 2, 1, 3, false, 250, 2, 1, 3 } },\r\n        })\r\n      else\r\n        screen:expect([[\r\n          ^popup menu test                 |\r\n          {1:~  }{n: foo }{1:                        }|\r\n          {1:~  }{n: bar }{1:                        }|\r\n          {1:~  }{s: baz }{1:                        }|\r\n          {1:~                               }|\r\n          :let g:menustr = 'baz'          |\r\n        ]])\r\n      end\r\n```\r\n\r\nThe grid should actually be 4 here IMO. \r\n\r\nEverything else passes when changing the code to this\r\n```c\r\nstatic void pum_select_mouse_pos(void)\r\n{\r\n  int grid = mouse_grid;\r\n  int row = mouse_row;\r\n  int col = mouse_col;\r\n\r\n  if (grid == 0) {\r\n    mouse_find_win(&grid, &row, &col);\r\n  }\r\n\r\n  if (grid == pum_grid.handle) {\r\n    pum_selected = row;\r\n    return;\r\n  }\r\n  pum_selected = -1;\r\n}\r\n```\r\n\r\nSo, perhaps the code should be simplified to that and the test fixed?\r\n\r\nRight now, the test still passes, since it's only testing against one global grid, with no splits or floats, so even if the code is wrong, the calculation turns out the same.",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-24T10:45:49Z",
            "diff_hunk": "@@ -1389,16 +1398,24 @@ static void pum_position_at_mouse(int min_width)\n /// Select the pum entry at the mouse position.\n static void pum_select_mouse_pos(void)\n {\n-  if (mouse_grid == pum_grid.handle) {\n-    pum_selected = mouse_row;\n+  int grid = mouse_grid;\n+  int row = mouse_row;\n+  int col = mouse_col;\n+\n+  if (grid == 0) {\n+    mouse_find_win(&grid, &row, &col);\n+  }\n+\n+  if (grid == pum_grid.handle) {\n+    pum_selected = row;\n     return;\n-  } else if (mouse_grid != pum_anchor_grid || mouse_col < pum_grid.comp_col\n-             || mouse_col >= pum_grid.comp_col + pum_grid.comp_width) {\n+  } else if (grid != pum_anchor_grid || col < pum_grid.comp_col\n+             || col >= pum_grid.comp_col + pum_grid.comp_width) {\n     pum_selected = -1;\n     return;\n   }\n \n-  int idx = mouse_row - pum_grid.comp_row;\n+  int idx = row - pum_grid.comp_row;",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2058091311",
            "id": 2058091311,
            "in_reply_to_id": 2057135719,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM56q_sv",
            "original_commit_id": "8e07536050493f7f8a8e16c0f6771fd8438a1eb5",
            "original_line": 1418,
            "original_position": 49,
            "original_start_line": null,
            "path": "src/nvim/popupmenu.c",
            "position": null,
            "pull_request_review_id": 2790626653,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2058091311/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-24T10:45:49Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2058091311",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2058098220"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2058098220"
                }
            },
            "author_association": "MEMBER",
            "body": "IIRC the grid 6 was intentional, as I noticed that matches the behavior of a certain multigrid GUI when writing that test. However I don't remember which multigrid GUI it was.",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-24T10:50:34Z",
            "diff_hunk": "@@ -1389,16 +1398,24 @@ static void pum_position_at_mouse(int min_width)\n /// Select the pum entry at the mouse position.\n static void pum_select_mouse_pos(void)\n {\n-  if (mouse_grid == pum_grid.handle) {\n-    pum_selected = mouse_row;\n+  int grid = mouse_grid;\n+  int row = mouse_row;\n+  int col = mouse_col;\n+\n+  if (grid == 0) {\n+    mouse_find_win(&grid, &row, &col);\n+  }\n+\n+  if (grid == pum_grid.handle) {\n+    pum_selected = row;\n     return;\n-  } else if (mouse_grid != pum_anchor_grid || mouse_col < pum_grid.comp_col\n-             || mouse_col >= pum_grid.comp_col + pum_grid.comp_width) {\n+  } else if (grid != pum_anchor_grid || col < pum_grid.comp_col\n+             || col >= pum_grid.comp_col + pum_grid.comp_width) {\n     pum_selected = -1;\n     return;\n   }\n \n-  int idx = mouse_row - pum_grid.comp_row;\n+  int idx = row - pum_grid.comp_row;",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2058098220",
            "id": 2058098220,
            "in_reply_to_id": 2057135719,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM56rBYs",
            "original_commit_id": "8e07536050493f7f8a8e16c0f6771fd8438a1eb5",
            "original_line": 1418,
            "original_position": 49,
            "original_start_line": null,
            "path": "src/nvim/popupmenu.c",
            "position": null,
            "pull_request_review_id": 2790638047,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2058098220/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-24T10:50:34Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2058098220",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2058113666"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2058113666"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "I assume you mean grid 2. I guess it makes sense to consider that valid since the drag started from that grid. It's possible that it's actually required in other places, I will check that. \r\n\r\nIf it's not, I will add a test that passes 2 as the id too. \r\n\r\nAnd fix the code to deal with both cases.",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-24T10:57:32Z",
            "diff_hunk": "@@ -1389,16 +1398,24 @@ static void pum_position_at_mouse(int min_width)\n /// Select the pum entry at the mouse position.\n static void pum_select_mouse_pos(void)\n {\n-  if (mouse_grid == pum_grid.handle) {\n-    pum_selected = mouse_row;\n+  int grid = mouse_grid;\n+  int row = mouse_row;\n+  int col = mouse_col;\n+\n+  if (grid == 0) {\n+    mouse_find_win(&grid, &row, &col);\n+  }\n+\n+  if (grid == pum_grid.handle) {\n+    pum_selected = row;\n     return;\n-  } else if (mouse_grid != pum_anchor_grid || mouse_col < pum_grid.comp_col\n-             || mouse_col >= pum_grid.comp_col + pum_grid.comp_width) {\n+  } else if (grid != pum_anchor_grid || col < pum_grid.comp_col\n+             || col >= pum_grid.comp_col + pum_grid.comp_width) {\n     pum_selected = -1;\n     return;\n   }\n \n-  int idx = mouse_row - pum_grid.comp_row;\n+  int idx = row - pum_grid.comp_row;",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2058113666",
            "id": 2058113666,
            "in_reply_to_id": 2057135719,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM56rFKC",
            "original_commit_id": "8e07536050493f7f8a8e16c0f6771fd8438a1eb5",
            "original_line": 1418,
            "original_position": 49,
            "original_start_line": null,
            "path": "src/nvim/popupmenu.c",
            "position": null,
            "pull_request_review_id": 2790663365,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2058113666/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-24T10:57:32Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2058113666",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2058230437"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2058230437"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Neovide and all the tests I can see in the code always calls drag with the same id as the grid that was clicked, so I think it's safe to say that we should support the case, and that it might even be required. It most likely is required, since I don't think Neovide would have added code for the additional tracking otherwise.\r\n\r\n~I can also confirm that right click drag and release to select a menu item does not work properly with Neovide and Nvim 0.11, so it was already a bit broken before. I will probably add some tests and create a separate PR.~  ~(I'm not sure about this, I might have tested something else)~ It was actually exposing a Neovide bug, it sends the id of the popupmenu with the grid coordinates of the parent.",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-24T12:04:53Z",
            "diff_hunk": "@@ -1389,16 +1398,24 @@ static void pum_position_at_mouse(int min_width)\n /// Select the pum entry at the mouse position.\n static void pum_select_mouse_pos(void)\n {\n-  if (mouse_grid == pum_grid.handle) {\n-    pum_selected = mouse_row;\n+  int grid = mouse_grid;\n+  int row = mouse_row;\n+  int col = mouse_col;\n+\n+  if (grid == 0) {\n+    mouse_find_win(&grid, &row, &col);\n+  }\n+\n+  if (grid == pum_grid.handle) {\n+    pum_selected = row;\n     return;\n-  } else if (mouse_grid != pum_anchor_grid || mouse_col < pum_grid.comp_col\n-             || mouse_col >= pum_grid.comp_col + pum_grid.comp_width) {\n+  } else if (grid != pum_anchor_grid || col < pum_grid.comp_col\n+             || col >= pum_grid.comp_col + pum_grid.comp_width) {\n     pum_selected = -1;\n     return;\n   }\n \n-  int idx = mouse_row - pum_grid.comp_row;\n+  int idx = row - pum_grid.comp_row;",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2058230437",
            "id": 2058230437,
            "in_reply_to_id": 2057135719,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM56rhql",
            "original_commit_id": "8e07536050493f7f8a8e16c0f6771fd8438a1eb5",
            "original_line": 1418,
            "original_position": 49,
            "original_start_line": null,
            "path": "src/nvim/popupmenu.c",
            "position": null,
            "pull_request_review_id": 2790850477,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2058230437/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-24T19:28:15Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2058230437",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2058333388"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2058333388"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "@zeertzjq\r\n\r\nI guess I should change this comment to:\r\n\"The popup menu doesn't have a window\"",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-24T12:41:50Z",
            "diff_hunk": "@@ -1756,18 +1756,25 @@ static win_T *mouse_find_grid_win(int *gridp, int *rowp, int *colp)\n     }\n   } else if (*gridp == 0) {\n     ScreenGrid *grid = ui_comp_mouse_focus(*rowp, *colp);\n-    FOR_ALL_WINDOWS_IN_TAB(wp, curtab) {\n-      if (&wp->w_grid_alloc != grid) {\n-        continue;\n-      }\n+    if (grid == &pum_grid) {\n       *gridp = grid->handle;\n-      *rowp -= grid->comp_row + wp->w_grid.row_offset;\n-      *colp -= grid->comp_col + wp->w_grid.col_offset;\n-      return wp;\n+      *rowp -= grid->comp_row + grid->row_offset;\n+      *colp -= grid->comp_col + grid->col_offset;\n+      // TODO(fredizzimo): Does the popup have a window?",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2058333388",
            "id": 2058333388,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM56r6zM",
            "original_commit_id": "8e07536050493f7f8a8e16c0f6771fd8438a1eb5",
            "original_line": 1763,
            "original_position": 15,
            "original_start_line": null,
            "path": "src/nvim/mouse.c",
            "position": null,
            "pull_request_review_id": 2791013499,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2058333388/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-24T12:41:50Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2058333388",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2059629280"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2059629280"
                }
            },
            "author_association": "MEMBER",
            "body": "I'll fix it in #33626",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-25T06:21:11Z",
            "diff_hunk": "@@ -1389,16 +1398,24 @@ static void pum_position_at_mouse(int min_width)\n /// Select the pum entry at the mouse position.\n static void pum_select_mouse_pos(void)\n {\n-  if (mouse_grid == pum_grid.handle) {\n-    pum_selected = mouse_row;\n+  int grid = mouse_grid;\n+  int row = mouse_row;\n+  int col = mouse_col;\n+\n+  if (grid == 0) {\n+    mouse_find_win(&grid, &row, &col);\n+  }\n+\n+  if (grid == pum_grid.handle) {\n+    pum_selected = row;\n     return;\n-  } else if (mouse_grid != pum_anchor_grid || mouse_col < pum_grid.comp_col\n-             || mouse_col >= pum_grid.comp_col + pum_grid.comp_width) {\n+  } else if (grid != pum_anchor_grid || col < pum_grid.comp_col\n+             || col >= pum_grid.comp_col + pum_grid.comp_width) {\n     pum_selected = -1;\n     return;\n   }\n \n-  int idx = mouse_row - pum_grid.comp_row;\n+  int idx = row - pum_grid.comp_row;",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2059629280",
            "id": 2059629280,
            "in_reply_to_id": 2057135719,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM56w3Lg",
            "original_commit_id": "8e07536050493f7f8a8e16c0f6771fd8438a1eb5",
            "original_line": 1418,
            "original_position": 49,
            "original_start_line": null,
            "path": "src/nvim/popupmenu.c",
            "position": null,
            "pull_request_review_id": 2793103572,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2059629280/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-25T06:21:12Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2059629280",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2060297800"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2060297800"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Thanks, I rebased this on top of that",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-25T13:56:42Z",
            "diff_hunk": "@@ -1389,16 +1398,24 @@ static void pum_position_at_mouse(int min_width)\n /// Select the pum entry at the mouse position.\n static void pum_select_mouse_pos(void)\n {\n-  if (mouse_grid == pum_grid.handle) {\n-    pum_selected = mouse_row;\n+  int grid = mouse_grid;\n+  int row = mouse_row;\n+  int col = mouse_col;\n+\n+  if (grid == 0) {\n+    mouse_find_win(&grid, &row, &col);\n+  }\n+\n+  if (grid == pum_grid.handle) {\n+    pum_selected = row;\n     return;\n-  } else if (mouse_grid != pum_anchor_grid || mouse_col < pum_grid.comp_col\n-             || mouse_col >= pum_grid.comp_col + pum_grid.comp_width) {\n+  } else if (grid != pum_anchor_grid || col < pum_grid.comp_col\n+             || col >= pum_grid.comp_col + pum_grid.comp_width) {\n     pum_selected = -1;\n     return;\n   }\n \n-  int idx = mouse_row - pum_grid.comp_row;\n+  int idx = row - pum_grid.comp_row;",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2060297800",
            "id": 2060297800,
            "in_reply_to_id": 2057135719,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM56zaZI",
            "original_commit_id": "8e07536050493f7f8a8e16c0f6771fd8438a1eb5",
            "original_line": 1418,
            "original_position": 49,
            "original_start_line": null,
            "path": "src/nvim/popupmenu.c",
            "position": null,
            "pull_request_review_id": 2794221650,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2060297800/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-25T13:56:42Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2060297800",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2060305976"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2060305976"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "I changed the comment",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-25T14:01:48Z",
            "diff_hunk": "@@ -1756,18 +1756,25 @@ static win_T *mouse_find_grid_win(int *gridp, int *rowp, int *colp)\n     }\n   } else if (*gridp == 0) {\n     ScreenGrid *grid = ui_comp_mouse_focus(*rowp, *colp);\n-    FOR_ALL_WINDOWS_IN_TAB(wp, curtab) {\n-      if (&wp->w_grid_alloc != grid) {\n-        continue;\n-      }\n+    if (grid == &pum_grid) {\n       *gridp = grid->handle;\n-      *rowp -= grid->comp_row + wp->w_grid.row_offset;\n-      *colp -= grid->comp_col + wp->w_grid.col_offset;\n-      return wp;\n+      *rowp -= grid->comp_row + grid->row_offset;\n+      *colp -= grid->comp_col + grid->col_offset;\n+      // TODO(fredizzimo): Does the popup have a window?",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2060305976",
            "id": 2060305976,
            "in_reply_to_id": 2058333388,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM56zcY4",
            "original_commit_id": "8e07536050493f7f8a8e16c0f6771fd8438a1eb5",
            "original_line": 1763,
            "original_position": 15,
            "original_start_line": null,
            "path": "src/nvim/mouse.c",
            "position": null,
            "pull_request_review_id": 2794235870,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2060305976/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-25T14:01:48Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2060305976",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2061589870"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2061589870"
                }
            },
            "author_association": "MEMBER",
            "body": "should this doc call out : \r\n\r\n> but as long as `compindex`, `screen_row` and `screen_col` is used from the `win_float_pos` UI event, it will work correctly.\r\n\r\nAnd perhaps also add that callout to `:help dev-ui`. \r\n\r\n(We need a more complete \"UI dev guide\", but until we have that, collecting these notes somewhere is a good starting point.)",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-26T20:15:10Z",
            "diff_hunk": "@@ -1082,7 +1082,12 @@ nvim_input_mouse({button}, {action}, {modifier}, {grid}, {row}, {col})\n                     same specifiers are used as for a key press, except that\n                     the \"-\" separator is optional, so \"C-A-\", \"c-a\" and \"CA\"\n                     can all be used to specify Ctrl+Alt+click.\n-      • {grid}      Grid number if the client uses |ui-multigrid|, else 0.\n+      • {grid}      Grid number if the client uses |ui-multigrid|, with manual\n+                    positioning of the windows else 0. If you are using\n+                    multigrid and let nvim determine the positioning of the\n+                    windows when using multigrid, you can pass 0 and nvim will\n+                    find the window grid for you. You can combine both",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2061589870",
            "id": 2061589870,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM564V1u",
            "original_commit_id": "f7571b540502440b731f1e55d99a0a9a23367fc2",
            "original_line": 1089,
            "original_position": 9,
            "original_start_line": null,
            "path": "runtime/doc/api.txt",
            "position": null,
            "pull_request_review_id": 2796408351,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2061589870/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-26T20:15:10Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2061589870",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2061591640"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2061591640"
                }
            },
            "author_association": "MEMBER",
            "body": "Let's move this up to news-features, either in UI or API section.",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-26T20:16:25Z",
            "diff_hunk": "@@ -192,6 +192,8 @@ These existing features changed their behavior.\n • 'spellfile' location defaults to `stdpath(\"data\")..\"/site/spell/\"` instead of\n   the first writable directory in 'runtimepath'.\n • |vim.version.range()| doesn't exclude `to` if it is equal to `from`.\n+• Multigrid UIs can optionally pass 0 as the mouse grid to let Nvim automatically",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2061591640",
            "id": 2061591640,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM564WRY",
            "original_commit_id": "f7571b540502440b731f1e55d99a0a9a23367fc2",
            "original_line": 195,
            "original_position": 4,
            "original_start_line": null,
            "path": "runtime/doc/news.txt",
            "position": null,
            "pull_request_review_id": 2796410268,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2061591640/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-26T20:16:26Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2061591640",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2061595208"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2061595208"
                }
            },
            "author_association": "MEMBER",
            "body": "Does this need to check `grid->mouse_enabled` like the for-loop just above?",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-26T20:20:07Z",
            "diff_hunk": "@@ -320,6 +320,15 @@ ScreenGrid *ui_comp_mouse_focus(int row, int col)\n       return grid;\n     }\n   }\n+  if (ui_has(kUIMultigrid)) {\n+    FOR_ALL_WINDOWS_IN_TAB(wp, curtab) {\n+      ScreenGrid *grid = &wp->w_grid_alloc;\n+      if (row >= wp->w_winrow && row < wp->w_winrow + grid->rows\n+          && col >= wp->w_wincol && col < wp->w_wincol + grid->cols) {",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2061595208",
            "id": 2061595208,
            "line": 327,
            "node_id": "PRRC_kwDOAPphoM564XJI",
            "original_commit_id": "f7571b540502440b731f1e55d99a0a9a23367fc2",
            "original_line": 327,
            "original_position": 8,
            "original_start_line": null,
            "path": "src/nvim/ui_compositor.c",
            "position": 8,
            "pull_request_review_id": 2796415049,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2061595208/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-26T20:20:08Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2061595208",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2061595603"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2061595603"
                }
            },
            "author_association": "MEMBER",
            "body": "Is that decided by `grid->mouse_enabled` ? Why can't we programmatically handle this?",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-26T20:21:44Z",
            "diff_hunk": "@@ -5807,24 +5813,46 @@ describe('float window', function()\n       local function test_float_mouse_no_focus()\n         api.nvim_buf_set_lines(0, -1, -1, true, {\"a\"})\n         expected_pos[4][6] = false\n-        if multigrid then\n+        if send_mouse_grid then\n           api.nvim_input_mouse('left', 'press', '', 4, 0, 0)\n-          screen:expect{grid=[[\n-          ## grid 1\n-            [2:----------------------------------------]|*6\n-            [3:----------------------------------------]|\n-          ## grid 2\n-            ^x                                       |\n-            a                                       |\n-            {0:~                                       }|*4\n-          ## grid 3\n-                                                    |\n-          ## grid 4\n-            {1:y                   }|\n-            {2:~                   }|\n-          ]], float_pos=expected_pos}\n         else\n           api.nvim_input_mouse('left', 'press', '', 0, 2, 5)\n+        end\n+        if multigrid then\n+          if send_mouse_grid then\n+            screen:expect{grid=[[\n+            ## grid 1\n+              [2:----------------------------------------]|*6\n+              [3:----------------------------------------]|\n+            ## grid 2\n+              ^x                                       |\n+              a                                       |\n+              {0:~                                       }|*4\n+            ## grid 3\n+                                                      |\n+            ## grid 4\n+              {1:y                   }|\n+              {2:~                   }|\n+            ]], float_pos=expected_pos}\n+          else\n+            -- This is testing an user error, so the end result does not make much sense\n+            -- The user is not supposed to pass a grid id that isn't focusable",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2061595603",
            "id": 2061595603,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM564XPT",
            "original_commit_id": "f7571b540502440b731f1e55d99a0a9a23367fc2",
            "original_line": 5839,
            "original_position": 95,
            "original_start_line": null,
            "path": "test/functional/ui/float_spec.lua",
            "position": null,
            "pull_request_review_id": 2796415304,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2061595603/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-26T20:21:44Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2061595603",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2061595793"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2061595793"
                }
            },
            "author_association": "MEMBER",
            "body": ":eyes: ",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-26T20:22:36Z",
            "diff_hunk": "@@ -6673,7 +6685,7 @@ describe('builtin popupmenu', function()\n       feed('<C-E>')\n     end)\n \n-    it('supports mousemodel=popup', function()\n+    it('testme supports mousemodel=popup', function()",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2061595793",
            "id": 2061595793,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM564XSR",
            "original_commit_id": "f7571b540502440b731f1e55d99a0a9a23367fc2",
            "original_line": 6688,
            "original_position": 102,
            "original_start_line": null,
            "path": "test/functional/ui/popupmenu_spec.lua",
            "position": null,
            "pull_request_review_id": 2796415419,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2061595793/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-26T20:22:36Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2061595793",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2061612396"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2061612396"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Good that you commented here, my comment is in the wrong if branch. It belongs to the `send_mouse_grid` branch.\r\n\r\nWe do when 0 is passed as grid id. But when the UI passes an id, we have to assume that it knows what it's doing. The UI could have been moving the window, so Neovim had no way to know what's underneath and select that window instead. That behaviour remains unchanged with this PR and the mouse input is not forwarded through to grid 2.",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-26T21:06:39Z",
            "diff_hunk": "@@ -5807,24 +5813,46 @@ describe('float window', function()\n       local function test_float_mouse_no_focus()\n         api.nvim_buf_set_lines(0, -1, -1, true, {\"a\"})\n         expected_pos[4][6] = false\n-        if multigrid then\n+        if send_mouse_grid then\n           api.nvim_input_mouse('left', 'press', '', 4, 0, 0)\n-          screen:expect{grid=[[\n-          ## grid 1\n-            [2:----------------------------------------]|*6\n-            [3:----------------------------------------]|\n-          ## grid 2\n-            ^x                                       |\n-            a                                       |\n-            {0:~                                       }|*4\n-          ## grid 3\n-                                                    |\n-          ## grid 4\n-            {1:y                   }|\n-            {2:~                   }|\n-          ]], float_pos=expected_pos}\n         else\n           api.nvim_input_mouse('left', 'press', '', 0, 2, 5)\n+        end\n+        if multigrid then\n+          if send_mouse_grid then\n+            screen:expect{grid=[[\n+            ## grid 1\n+              [2:----------------------------------------]|*6\n+              [3:----------------------------------------]|\n+            ## grid 2\n+              ^x                                       |\n+              a                                       |\n+              {0:~                                       }|*4\n+            ## grid 3\n+                                                      |\n+            ## grid 4\n+              {1:y                   }|\n+              {2:~                   }|\n+            ]], float_pos=expected_pos}\n+          else\n+            -- This is testing an user error, so the end result does not make much sense\n+            -- The user is not supposed to pass a grid id that isn't focusable",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2061612396",
            "id": 2061612396,
            "in_reply_to_id": 2061595603,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM564bVs",
            "original_commit_id": "f7571b540502440b731f1e55d99a0a9a23367fc2",
            "original_line": 5839,
            "original_position": 95,
            "original_start_line": null,
            "path": "test/functional/ui/float_spec.lua",
            "position": null,
            "pull_request_review_id": 2796436157,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2061612396/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-26T21:06:39Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2061612396",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2061612566"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2061612566"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Oops, that must have remained, when I debugged some issues yesterday or the day before",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-26T21:07:38Z",
            "diff_hunk": "@@ -6673,7 +6685,7 @@ describe('builtin popupmenu', function()\n       feed('<C-E>')\n     end)\n \n-    it('supports mousemodel=popup', function()\n+    it('testme supports mousemodel=popup', function()",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2061612566",
            "id": 2061612566,
            "in_reply_to_id": 2061595793,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM564bYW",
            "original_commit_id": "f7571b540502440b731f1e55d99a0a9a23367fc2",
            "original_line": 6688,
            "original_position": 102,
            "original_start_line": null,
            "path": "test/functional/ui/popupmenu_spec.lua",
            "position": null,
            "pull_request_review_id": 2796436321,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2061612566/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-26T21:07:38Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2061612566",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2061659198"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2061659198"
                }
            },
            "author_association": "MEMBER",
            "body": "> mouse input is not forwarded through to grid 2.\r\n\r\nThat would be a useful extra info in the comment",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-26T22:27:35Z",
            "diff_hunk": "@@ -5807,24 +5813,46 @@ describe('float window', function()\n       local function test_float_mouse_no_focus()\n         api.nvim_buf_set_lines(0, -1, -1, true, {\"a\"})\n         expected_pos[4][6] = false\n-        if multigrid then\n+        if send_mouse_grid then\n           api.nvim_input_mouse('left', 'press', '', 4, 0, 0)\n-          screen:expect{grid=[[\n-          ## grid 1\n-            [2:----------------------------------------]|*6\n-            [3:----------------------------------------]|\n-          ## grid 2\n-            ^x                                       |\n-            a                                       |\n-            {0:~                                       }|*4\n-          ## grid 3\n-                                                    |\n-          ## grid 4\n-            {1:y                   }|\n-            {2:~                   }|\n-          ]], float_pos=expected_pos}\n         else\n           api.nvim_input_mouse('left', 'press', '', 0, 2, 5)\n+        end\n+        if multigrid then\n+          if send_mouse_grid then\n+            screen:expect{grid=[[\n+            ## grid 1\n+              [2:----------------------------------------]|*6\n+              [3:----------------------------------------]|\n+            ## grid 2\n+              ^x                                       |\n+              a                                       |\n+              {0:~                                       }|*4\n+            ## grid 3\n+                                                      |\n+            ## grid 4\n+              {1:y                   }|\n+              {2:~                   }|\n+            ]], float_pos=expected_pos}\n+          else\n+            -- This is testing an user error, so the end result does not make much sense\n+            -- The user is not supposed to pass a grid id that isn't focusable",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2061659198",
            "id": 2061659198,
            "in_reply_to_id": 2061595603,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM564mw-",
            "original_commit_id": "f7571b540502440b731f1e55d99a0a9a23367fc2",
            "original_line": 5839,
            "original_position": 95,
            "original_start_line": null,
            "path": "test/functional/ui/float_spec.lua",
            "position": null,
            "pull_request_review_id": 2796496740,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2061659198/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-26T22:27:35Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2061659198",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2061675815"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2061675815"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "It probably should, but it does not work currently, some tests are failing. The loop is only run for top level windows, like splits and they don't currently correctly set the `mouse_enabled` status. So, I decided to skip the test.\r\n\r\nBut now when thinking more about it, I think there might be some cases where it does the wrong thing, if the check is not present. So, I think I will enable it, and ensure that `mouse_enabled` is properly set everywhere it's needed.",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-26T22:34:54Z",
            "diff_hunk": "@@ -320,6 +320,15 @@ ScreenGrid *ui_comp_mouse_focus(int row, int col)\n       return grid;\n     }\n   }\n+  if (ui_has(kUIMultigrid)) {\n+    FOR_ALL_WINDOWS_IN_TAB(wp, curtab) {\n+      ScreenGrid *grid = &wp->w_grid_alloc;\n+      if (row >= wp->w_winrow && row < wp->w_winrow + grid->rows\n+          && col >= wp->w_wincol && col < wp->w_wincol + grid->cols) {",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2061675815",
            "id": 2061675815,
            "in_reply_to_id": 2061595208,
            "line": 327,
            "node_id": "PRRC_kwDOAPphoM564q0n",
            "original_commit_id": "f7571b540502440b731f1e55d99a0a9a23367fc2",
            "original_line": 327,
            "original_position": 8,
            "original_start_line": null,
            "path": "src/nvim/ui_compositor.c",
            "position": 8,
            "pull_request_review_id": 2796512125,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2061675815/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-26T22:34:54Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2061675815",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2061952649"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2061952649"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Moved to UI",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-27T02:20:54Z",
            "diff_hunk": "@@ -192,6 +192,8 @@ These existing features changed their behavior.\n • 'spellfile' location defaults to `stdpath(\"data\")..\"/site/spell/\"` instead of\n   the first writable directory in 'runtimepath'.\n • |vim.version.range()| doesn't exclude `to` if it is equal to `from`.\n+• Multigrid UIs can optionally pass 0 as the mouse grid to let Nvim automatically",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2061952649",
            "id": 2061952649,
            "in_reply_to_id": 2061591640,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM565uaJ",
            "original_commit_id": "f7571b540502440b731f1e55d99a0a9a23367fc2",
            "original_line": 195,
            "original_position": 4,
            "original_start_line": null,
            "path": "runtime/doc/news.txt",
            "position": null,
            "pull_request_review_id": 2796863776,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2061952649/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-27T02:20:55Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2061952649",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2061953477"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2061953477"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Fixed, `mouse_enabled` is now set for new `w_grid_alloc` of new windows and for the popupmenu grid to allow this.",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-27T02:25:00Z",
            "diff_hunk": "@@ -320,6 +320,15 @@ ScreenGrid *ui_comp_mouse_focus(int row, int col)\n       return grid;\n     }\n   }\n+  if (ui_has(kUIMultigrid)) {\n+    FOR_ALL_WINDOWS_IN_TAB(wp, curtab) {\n+      ScreenGrid *grid = &wp->w_grid_alloc;\n+      if (row >= wp->w_winrow && row < wp->w_winrow + grid->rows\n+          && col >= wp->w_wincol && col < wp->w_wincol + grid->cols) {",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2061953477",
            "id": 2061953477,
            "in_reply_to_id": 2061595208,
            "line": 327,
            "node_id": "PRRC_kwDOAPphoM565unF",
            "original_commit_id": "f7571b540502440b731f1e55d99a0a9a23367fc2",
            "original_line": 327,
            "original_position": 8,
            "original_start_line": null,
            "path": "src/nvim/ui_compositor.c",
            "position": 8,
            "pull_request_review_id": 2796864425,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 1,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2061953477/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-27T02:25:01Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2061953477",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2061953508"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2061953508"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "fixed",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-27T02:25:11Z",
            "diff_hunk": "@@ -5807,24 +5813,46 @@ describe('float window', function()\n       local function test_float_mouse_no_focus()\n         api.nvim_buf_set_lines(0, -1, -1, true, {\"a\"})\n         expected_pos[4][6] = false\n-        if multigrid then\n+        if send_mouse_grid then\n           api.nvim_input_mouse('left', 'press', '', 4, 0, 0)\n-          screen:expect{grid=[[\n-          ## grid 1\n-            [2:----------------------------------------]|*6\n-            [3:----------------------------------------]|\n-          ## grid 2\n-            ^x                                       |\n-            a                                       |\n-            {0:~                                       }|*4\n-          ## grid 3\n-                                                    |\n-          ## grid 4\n-            {1:y                   }|\n-            {2:~                   }|\n-          ]], float_pos=expected_pos}\n         else\n           api.nvim_input_mouse('left', 'press', '', 0, 2, 5)\n+        end\n+        if multigrid then\n+          if send_mouse_grid then\n+            screen:expect{grid=[[\n+            ## grid 1\n+              [2:----------------------------------------]|*6\n+              [3:----------------------------------------]|\n+            ## grid 2\n+              ^x                                       |\n+              a                                       |\n+              {0:~                                       }|*4\n+            ## grid 3\n+                                                      |\n+            ## grid 4\n+              {1:y                   }|\n+              {2:~                   }|\n+            ]], float_pos=expected_pos}\n+          else\n+            -- This is testing an user error, so the end result does not make much sense\n+            -- The user is not supposed to pass a grid id that isn't focusable",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2061953508",
            "id": 2061953508,
            "in_reply_to_id": 2061595603,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM565unk",
            "original_commit_id": "f7571b540502440b731f1e55d99a0a9a23367fc2",
            "original_line": 5839,
            "original_position": 95,
            "original_start_line": null,
            "path": "test/functional/ui/float_spec.lua",
            "position": null,
            "pull_request_review_id": 2796864449,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2061953508/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-27T02:25:11Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2061953508",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2061953527"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2061953527"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "fixed",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-27T02:25:24Z",
            "diff_hunk": "@@ -6673,7 +6685,7 @@ describe('builtin popupmenu', function()\n       feed('<C-E>')\n     end)\n \n-    it('supports mousemodel=popup', function()\n+    it('testme supports mousemodel=popup', function()",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2061953527",
            "id": 2061953527,
            "in_reply_to_id": 2061595793,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM565un3",
            "original_commit_id": "f7571b540502440b731f1e55d99a0a9a23367fc2",
            "original_line": 6688,
            "original_position": 102,
            "original_start_line": null,
            "path": "test/functional/ui/popupmenu_spec.lua",
            "position": null,
            "pull_request_review_id": 2796864476,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2061953527/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-27T02:25:24Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2061953527",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2061954526"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2061954526"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "I will look into this tomorrow",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-27T02:31:18Z",
            "diff_hunk": "@@ -1082,7 +1082,12 @@ nvim_input_mouse({button}, {action}, {modifier}, {grid}, {row}, {col})\n                     same specifiers are used as for a key press, except that\n                     the \"-\" separator is optional, so \"C-A-\", \"c-a\" and \"CA\"\n                     can all be used to specify Ctrl+Alt+click.\n-      • {grid}      Grid number if the client uses |ui-multigrid|, else 0.\n+      • {grid}      Grid number if the client uses |ui-multigrid|, with manual\n+                    positioning of the windows else 0. If you are using\n+                    multigrid and let nvim determine the positioning of the\n+                    windows when using multigrid, you can pass 0 and nvim will\n+                    find the window grid for you. You can combine both",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2061954526",
            "id": 2061954526,
            "in_reply_to_id": 2061589870,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM565u3e",
            "original_commit_id": "f7571b540502440b731f1e55d99a0a9a23367fc2",
            "original_line": 1089,
            "original_position": 9,
            "original_start_line": null,
            "path": "runtime/doc/api.txt",
            "position": null,
            "pull_request_review_id": 2796865927,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2061954526/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-27T02:31:18Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2061954526",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2062616431"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062616431"
                }
            },
            "author_association": "MEMBER",
            "body": "\"no float found\" may be no longer accurate here.",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-27T12:32:48Z",
            "diff_hunk": "@@ -1756,18 +1756,25 @@ static win_T *mouse_find_grid_win(int *gridp, int *rowp, int *colp)\n     }\n   } else if (*gridp == 0) {\n     ScreenGrid *grid = ui_comp_mouse_focus(*rowp, *colp);\n-    FOR_ALL_WINDOWS_IN_TAB(wp, curtab) {\n-      if (&wp->w_grid_alloc != grid) {\n-        continue;\n-      }\n+    if (grid == &pum_grid) {\n       *gridp = grid->handle;\n-      *rowp -= grid->comp_row + wp->w_grid.row_offset;\n-      *colp -= grid->comp_col + wp->w_grid.col_offset;\n-      return wp;\n+      *rowp -= grid->comp_row + grid->row_offset;\n+      *colp -= grid->comp_col + grid->col_offset;\n+      // The popup menu doesn't have a window, so return NULL\n+      return NULL;\n+    } else {\n+      FOR_ALL_WINDOWS_IN_TAB(wp, curtab) {\n+        if (&wp->w_grid_alloc != grid) {\n+          continue;\n+        }\n+        *gridp = grid->handle;\n+        *rowp -= wp->w_winrow + wp->w_grid.row_offset;\n+        *colp -= wp->w_wincol + wp->w_grid.col_offset;\n+        return wp;\n+      }\n     }\n \n     // no float found, click on the default grid",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2062616431",
            "id": 2062616431,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM568Qdv",
            "original_commit_id": "e6d3a74b7c9549b0d894052fa02a29785fbbdd4e",
            "original_line": 1777,
            "original_position": 29,
            "original_start_line": null,
            "path": "src/nvim/mouse.c",
            "position": null,
            "pull_request_review_id": 2797626781,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062616431/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-27T12:32:48Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062616431",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2062616919"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062616919"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n```",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-27T12:35:09Z",
            "diff_hunk": "@@ -7847,8 +7911,13 @@ describe('float window', function()\n         ]]}\n       end\n \n-      if multigrid then\n+      if send_mouse_grid then\n         api.nvim_input_mouse('left', 'press', '', 4, 2, 1)\n+      else\n+        api.nvim_input_mouse('left', 'press', '', 0, 2, 6)\n+      end\n+",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2062616919",
            "id": 2062616919,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM568QlX",
            "original_commit_id": "e6d3a74b7c9549b0d894052fa02a29785fbbdd4e",
            "original_line": 7919,
            "original_position": 277,
            "original_start_line": null,
            "path": "test/functional/ui/float_spec.lua",
            "position": null,
            "pull_request_review_id": 2797627446,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062616919/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-27T12:37:40Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062616919",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2062624701"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062624701"
                }
            },
            "author_association": "MEMBER",
            "body": "this is jumbled. don't need to over-explain. 0 = \"nvim decides\".\r\n\r\n```suggestion\r\n/// @param grid Grid number (used by |ui-multigrid| client), or 0 to let Nvim decide positioning of windows.\r\n```",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-27T13:08:59Z",
            "diff_hunk": "@@ -385,7 +385,10 @@ Integer nvim_input(uint64_t channel_id, String keys)\n ///                 The same specifiers are used as for a key press, except\n ///                 that the \"-\" separator is optional, so \"C-A-\", \"c-a\"\n ///                 and \"CA\" can all be used to specify Ctrl+Alt+click.\n-/// @param grid Grid number if the client uses |ui-multigrid|, else 0.\n+/// @param grid Grid number if the client uses |ui-multigrid|, with manual positioning of the\n+///             windows else 0. If you are using multigrid and let nvim determine the positioning\n+///             of the windows when using multigrid, you can pass 0 and nvim will find the window\n+///             grid for you. You can combine both approaches.",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2062624701",
            "id": 2062624701,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM568Se9",
            "original_commit_id": "e6d3a74b7c9549b0d894052fa02a29785fbbdd4e",
            "original_line": 391,
            "original_position": 8,
            "original_start_line": 388,
            "path": "src/nvim/api/vim.c",
            "position": null,
            "pull_request_review_id": 2797636387,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062624701/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-04-27T13:09:20Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062624701",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2062625174"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062625174"
                }
            },
            "author_association": "MEMBER",
            "body": "punctuation is a cheap way to avoid ambiguity in comments. line-length max is 100.\r\n```suggestion\r\n    // mouse_find_win compensates for offsets (e.g. 'winbar'), but we don't want that here.\r\n```",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-27T13:10:45Z",
            "diff_hunk": "@@ -1321,6 +1324,14 @@ static void pum_position_at_mouse(int min_width)\n   int col = mouse_col;\n   pum_win_row_offset = 0;\n   pum_win_col_offset = 0;\n+\n+  if (ui_has(kUIMultigrid) && (grid == 0 || grid == 1)) {\n+    win_T *wp = mouse_find_win(&grid, &row, &col);\n+    // mouse_find_win compensates for the offset due to winbar for example\n+    // but we don't want that here",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2062625174",
            "id": 2062625174,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM568SmW",
            "original_commit_id": "e6d3a74b7c9549b0d894052fa02a29785fbbdd4e",
            "original_line": 1331,
            "original_position": 25,
            "original_start_line": 1330,
            "path": "src/nvim/popupmenu.c",
            "position": null,
            "pull_request_review_id": 2797636826,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062625174/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-04-27T13:11:31Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062625174",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2062625494"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062625494"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n    // mouse_find_win compensates for offsets (e.g. 'winbar'), but we don't want that here.\r\n```",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-27T13:12:19Z",
            "diff_hunk": "@@ -1391,17 +1402,34 @@ static void pum_position_at_mouse(int min_width)\n /// Select the pum entry at the mouse position.\n static void pum_select_mouse_pos(void)\n {\n-  if (mouse_grid == pum_grid.handle) {\n-    pum_selected = mouse_row;\n+  int grid = mouse_grid;\n+  int row = mouse_row;\n+  int col = mouse_col;\n+  win_T *wp = NULL;\n+\n+  if (grid == 0) {\n+    wp = mouse_find_win(&grid, &row, &col);\n+    // mouse_find_win compensates for the offset due to winbar for example\n+    // but we don't want that here",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2062625494",
            "id": 2062625494,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM568SrW",
            "original_commit_id": "e6d3a74b7c9549b0d894052fa02a29785fbbdd4e",
            "original_line": 1413,
            "original_position": 46,
            "original_start_line": 1412,
            "path": "src/nvim/popupmenu.c",
            "position": null,
            "pull_request_review_id": 2797637190,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062625494/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-04-27T13:12:20Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062625494",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2062625721"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062625721"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n      if (grid->mouse_enabled\r\n          && row >= wp->w_winrow && row < wp->w_winrow + grid->rows\r\n          && col >= wp->w_wincol && col < wp->w_wincol + grid->cols) {\r\n```",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-27T13:13:31Z",
            "diff_hunk": "@@ -320,6 +320,17 @@ ScreenGrid *ui_comp_mouse_focus(int row, int col)\n       return grid;\n     }\n   }\n+  if (ui_has(kUIMultigrid)) {\n+    FOR_ALL_WINDOWS_IN_TAB(wp, curtab) {\n+      ScreenGrid *grid = &wp->w_grid_alloc;\n+      if (grid->mouse_enabled) {\n+        if (row >= wp->w_winrow && row < wp->w_winrow + grid->rows\n+            && col >= wp->w_wincol && col < wp->w_wincol + grid->cols) {",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2062625721",
            "id": 2062625721,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM568Su5",
            "original_commit_id": "e6d3a74b7c9549b0d894052fa02a29785fbbdd4e",
            "original_line": 328,
            "original_position": 9,
            "original_start_line": 326,
            "path": "src/nvim/ui_compositor.c",
            "position": null,
            "pull_request_review_id": 2797637463,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062625721/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-04-27T13:13:31Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062625721",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2062627088"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062627088"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "I'm going to move the more detailed explanation to `:help dev-ui`, and link it from here. I think it needs to be clear that it's not OK to pass 0, when the UI takes over the window positioning and don't respect `compindex`, `screen_row` and `screen_col` (like all current UIs out there, except the development version of Neovide), as was noted by your previous comment on the same help text.",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-27T13:19:30Z",
            "diff_hunk": "@@ -385,7 +385,10 @@ Integer nvim_input(uint64_t channel_id, String keys)\n ///                 The same specifiers are used as for a key press, except\n ///                 that the \"-\" separator is optional, so \"C-A-\", \"c-a\"\n ///                 and \"CA\" can all be used to specify Ctrl+Alt+click.\n-/// @param grid Grid number if the client uses |ui-multigrid|, else 0.\n+/// @param grid Grid number if the client uses |ui-multigrid|, with manual positioning of the\n+///             windows else 0. If you are using multigrid and let nvim determine the positioning\n+///             of the windows when using multigrid, you can pass 0 and nvim will find the window\n+///             grid for you. You can combine both approaches.",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2062627088",
            "id": 2062627088,
            "in_reply_to_id": 2062624701,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM568TEQ",
            "original_commit_id": "e6d3a74b7c9549b0d894052fa02a29785fbbdd4e",
            "original_line": 391,
            "original_position": 8,
            "original_start_line": 388,
            "path": "src/nvim/api/vim.c",
            "position": null,
            "pull_request_review_id": 2797638912,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062627088/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-04-27T13:19:31Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062627088",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2062733368"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062733368"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "fixed",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-27T22:10:42Z",
            "diff_hunk": "@@ -320,6 +320,17 @@ ScreenGrid *ui_comp_mouse_focus(int row, int col)\n       return grid;\n     }\n   }\n+  if (ui_has(kUIMultigrid)) {\n+    FOR_ALL_WINDOWS_IN_TAB(wp, curtab) {\n+      ScreenGrid *grid = &wp->w_grid_alloc;\n+      if (grid->mouse_enabled) {\n+        if (row >= wp->w_winrow && row < wp->w_winrow + grid->rows\n+            && col >= wp->w_wincol && col < wp->w_wincol + grid->cols) {",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2062733368",
            "id": 2062733368,
            "in_reply_to_id": 2062625721,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM568tA4",
            "original_commit_id": "e6d3a74b7c9549b0d894052fa02a29785fbbdd4e",
            "original_line": 328,
            "original_position": 9,
            "original_start_line": 326,
            "path": "src/nvim/ui_compositor.c",
            "position": null,
            "pull_request_review_id": 2797752029,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062733368/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-04-27T22:10:42Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062733368",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2062733378"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062733378"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "fixed",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-27T22:10:45Z",
            "diff_hunk": "@@ -1391,17 +1402,34 @@ static void pum_position_at_mouse(int min_width)\n /// Select the pum entry at the mouse position.\n static void pum_select_mouse_pos(void)\n {\n-  if (mouse_grid == pum_grid.handle) {\n-    pum_selected = mouse_row;\n+  int grid = mouse_grid;\n+  int row = mouse_row;\n+  int col = mouse_col;\n+  win_T *wp = NULL;\n+\n+  if (grid == 0) {\n+    wp = mouse_find_win(&grid, &row, &col);\n+    // mouse_find_win compensates for the offset due to winbar for example\n+    // but we don't want that here",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2062733378",
            "id": 2062733378,
            "in_reply_to_id": 2062625494,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM568tBC",
            "original_commit_id": "e6d3a74b7c9549b0d894052fa02a29785fbbdd4e",
            "original_line": 1413,
            "original_position": 46,
            "original_start_line": 1412,
            "path": "src/nvim/popupmenu.c",
            "position": null,
            "pull_request_review_id": 2797752045,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062733378/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-04-27T22:10:45Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062733378",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2062733388"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062733388"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "fixed",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-27T22:10:51Z",
            "diff_hunk": "@@ -1321,6 +1324,14 @@ static void pum_position_at_mouse(int min_width)\n   int col = mouse_col;\n   pum_win_row_offset = 0;\n   pum_win_col_offset = 0;\n+\n+  if (ui_has(kUIMultigrid) && (grid == 0 || grid == 1)) {\n+    win_T *wp = mouse_find_win(&grid, &row, &col);\n+    // mouse_find_win compensates for the offset due to winbar for example\n+    // but we don't want that here",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2062733388",
            "id": 2062733388,
            "in_reply_to_id": 2062625174,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM568tBM",
            "original_commit_id": "e6d3a74b7c9549b0d894052fa02a29785fbbdd4e",
            "original_line": 1331,
            "original_position": 25,
            "original_start_line": 1330,
            "path": "src/nvim/popupmenu.c",
            "position": null,
            "pull_request_review_id": 2797752066,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062733388/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-04-27T22:10:51Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062733388",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2062733393"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062733393"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "More detailed documentation has been added to `develop.txt`. And this documentation simplified.",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-27T22:10:54Z",
            "diff_hunk": "@@ -385,7 +385,10 @@ Integer nvim_input(uint64_t channel_id, String keys)\n ///                 The same specifiers are used as for a key press, except\n ///                 that the \"-\" separator is optional, so \"C-A-\", \"c-a\"\n ///                 and \"CA\" can all be used to specify Ctrl+Alt+click.\n-/// @param grid Grid number if the client uses |ui-multigrid|, else 0.\n+/// @param grid Grid number if the client uses |ui-multigrid|, with manual positioning of the\n+///             windows else 0. If you are using multigrid and let nvim determine the positioning\n+///             of the windows when using multigrid, you can pass 0 and nvim will find the window\n+///             grid for you. You can combine both approaches.",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2062733393",
            "id": 2062733393,
            "in_reply_to_id": 2062624701,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM568tBR",
            "original_commit_id": "e6d3a74b7c9549b0d894052fa02a29785fbbdd4e",
            "original_line": 391,
            "original_position": 8,
            "original_start_line": 388,
            "path": "src/nvim/api/vim.c",
            "position": null,
            "pull_request_review_id": 2797752075,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062733393/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-04-27T22:10:54Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062733393",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2062733404"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062733404"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "fixed",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-27T22:11:00Z",
            "diff_hunk": "@@ -7847,8 +7911,13 @@ describe('float window', function()\n         ]]}\n       end\n \n-      if multigrid then\n+      if send_mouse_grid then\n         api.nvim_input_mouse('left', 'press', '', 4, 2, 1)\n+      else\n+        api.nvim_input_mouse('left', 'press', '', 0, 2, 6)\n+      end\n+",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2062733404",
            "id": 2062733404,
            "in_reply_to_id": 2062616919,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM568tBc",
            "original_commit_id": "e6d3a74b7c9549b0d894052fa02a29785fbbdd4e",
            "original_line": 7919,
            "original_position": 277,
            "original_start_line": null,
            "path": "test/functional/ui/float_spec.lua",
            "position": null,
            "pull_request_review_id": 2797752094,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062733404/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-27T22:11:00Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062733404",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2062733411"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062733411"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "I have updated the comment",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-27T22:11:04Z",
            "diff_hunk": "@@ -1756,18 +1756,25 @@ static win_T *mouse_find_grid_win(int *gridp, int *rowp, int *colp)\n     }\n   } else if (*gridp == 0) {\n     ScreenGrid *grid = ui_comp_mouse_focus(*rowp, *colp);\n-    FOR_ALL_WINDOWS_IN_TAB(wp, curtab) {\n-      if (&wp->w_grid_alloc != grid) {\n-        continue;\n-      }\n+    if (grid == &pum_grid) {\n       *gridp = grid->handle;\n-      *rowp -= grid->comp_row + wp->w_grid.row_offset;\n-      *colp -= grid->comp_col + wp->w_grid.col_offset;\n-      return wp;\n+      *rowp -= grid->comp_row + grid->row_offset;\n+      *colp -= grid->comp_col + grid->col_offset;\n+      // The popup menu doesn't have a window, so return NULL\n+      return NULL;\n+    } else {\n+      FOR_ALL_WINDOWS_IN_TAB(wp, curtab) {\n+        if (&wp->w_grid_alloc != grid) {\n+          continue;\n+        }\n+        *gridp = grid->handle;\n+        *rowp -= wp->w_winrow + wp->w_grid.row_offset;\n+        *colp -= wp->w_wincol + wp->w_grid.col_offset;\n+        return wp;\n+      }\n     }\n \n     // no float found, click on the default grid",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2062733411",
            "id": 2062733411,
            "in_reply_to_id": 2062616431,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM568tBj",
            "original_commit_id": "e6d3a74b7c9549b0d894052fa02a29785fbbdd4e",
            "original_line": 1777,
            "original_position": 29,
            "original_start_line": null,
            "path": "src/nvim/mouse.c",
            "position": null,
            "pull_request_review_id": 2797752111,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062733411/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-27T22:11:04Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062733411",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2062733438"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062733438"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "More detailed documentation has been added to `develop.txt`",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-27T22:11:15Z",
            "diff_hunk": "@@ -1082,7 +1082,12 @@ nvim_input_mouse({button}, {action}, {modifier}, {grid}, {row}, {col})\n                     same specifiers are used as for a key press, except that\n                     the \"-\" separator is optional, so \"C-A-\", \"c-a\" and \"CA\"\n                     can all be used to specify Ctrl+Alt+click.\n-      • {grid}      Grid number if the client uses |ui-multigrid|, else 0.\n+      • {grid}      Grid number if the client uses |ui-multigrid|, with manual\n+                    positioning of the windows else 0. If you are using\n+                    multigrid and let nvim determine the positioning of the\n+                    windows when using multigrid, you can pass 0 and nvim will\n+                    find the window grid for you. You can combine both",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2062733438",
            "id": 2062733438,
            "in_reply_to_id": 2061589870,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM568tB-",
            "original_commit_id": "f7571b540502440b731f1e55d99a0a9a23367fc2",
            "original_line": 1089,
            "original_position": 9,
            "original_start_line": null,
            "path": "runtime/doc/api.txt",
            "position": null,
            "pull_request_review_id": 2797752164,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062733438/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-27T22:11:15Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062733438",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2062742969"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062742969"
                }
            },
            "author_association": "MEMBER",
            "body": "Why add \"when using multigrid\"? This happens without multigrid as well.",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-27T23:02:26Z",
            "diff_hunk": "@@ -1756,18 +1756,26 @@ static win_T *mouse_find_grid_win(int *gridp, int *rowp, int *colp)\n     }\n   } else if (*gridp == 0) {\n     ScreenGrid *grid = ui_comp_mouse_focus(*rowp, *colp);\n-    FOR_ALL_WINDOWS_IN_TAB(wp, curtab) {\n-      if (&wp->w_grid_alloc != grid) {\n-        continue;\n-      }\n+    if (grid == &pum_grid) {\n       *gridp = grid->handle;\n-      *rowp -= grid->comp_row + wp->w_grid.row_offset;\n-      *colp -= grid->comp_col + wp->w_grid.col_offset;\n-      return wp;\n+      *rowp -= grid->comp_row + grid->row_offset;\n+      *colp -= grid->comp_col + grid->col_offset;\n+      // The popup menu doesn't have a window, so return NULL\n+      return NULL;\n+    } else {\n+      FOR_ALL_WINDOWS_IN_TAB(wp, curtab) {\n+        if (&wp->w_grid_alloc != grid) {\n+          continue;\n+        }\n+        *gridp = grid->handle;\n+        *rowp -= wp->w_winrow + wp->w_grid.row_offset;\n+        *colp -= wp->w_wincol + wp->w_grid.col_offset;\n+        return wp;\n+      }\n     }\n \n-    // no float found, click on the default grid\n-    // TODO(bfredl): grid can be &pum_grid, allow select pum items by mouse?\n+    // No grid found, return the default grid, when using multigrid. With multigrid this happens for",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2062742969",
            "id": 2062742969,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM568vW5",
            "original_commit_id": "56bb8bfeb4e90d4faa5d221326fa0795a3bb930a",
            "original_line": 1777,
            "original_position": 31,
            "original_start_line": null,
            "path": "src/nvim/mouse.c",
            "position": null,
            "pull_request_review_id": 2797763103,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062742969/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-27T23:02:27Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062742969",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2062747807"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062747807"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Because that's the non-obvious case, for non-multigrid it happens for everything that isn't a float. It's probably best to remove the comment altogether.",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-27T23:27:52Z",
            "diff_hunk": "@@ -1756,18 +1756,26 @@ static win_T *mouse_find_grid_win(int *gridp, int *rowp, int *colp)\n     }\n   } else if (*gridp == 0) {\n     ScreenGrid *grid = ui_comp_mouse_focus(*rowp, *colp);\n-    FOR_ALL_WINDOWS_IN_TAB(wp, curtab) {\n-      if (&wp->w_grid_alloc != grid) {\n-        continue;\n-      }\n+    if (grid == &pum_grid) {\n       *gridp = grid->handle;\n-      *rowp -= grid->comp_row + wp->w_grid.row_offset;\n-      *colp -= grid->comp_col + wp->w_grid.col_offset;\n-      return wp;\n+      *rowp -= grid->comp_row + grid->row_offset;\n+      *colp -= grid->comp_col + grid->col_offset;\n+      // The popup menu doesn't have a window, so return NULL\n+      return NULL;\n+    } else {\n+      FOR_ALL_WINDOWS_IN_TAB(wp, curtab) {\n+        if (&wp->w_grid_alloc != grid) {\n+          continue;\n+        }\n+        *gridp = grid->handle;\n+        *rowp -= wp->w_winrow + wp->w_grid.row_offset;\n+        *colp -= wp->w_wincol + wp->w_grid.col_offset;\n+        return wp;\n+      }\n     }\n \n-    // no float found, click on the default grid\n-    // TODO(bfredl): grid can be &pum_grid, allow select pum items by mouse?\n+    // No grid found, return the default grid, when using multigrid. With multigrid this happens for",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2062747807",
            "id": 2062747807,
            "in_reply_to_id": 2062742969,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM568wif",
            "original_commit_id": "56bb8bfeb4e90d4faa5d221326fa0795a3bb930a",
            "original_line": 1777,
            "original_position": 31,
            "original_start_line": null,
            "path": "src/nvim/mouse.c",
            "position": null,
            "pull_request_review_id": 2797769621,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062747807/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-27T23:27:52Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062747807",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2062748481"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062748481"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Ah sorry, you are referring to the extra \"when using multigrid\". That's not supposed to be there. \r\n\r\nThe comment is supposed to be the following\r\n\"No grid found, return the default grid. With multigrid this happens for split separators for example.\"\r\n",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-27T23:31:14Z",
            "diff_hunk": "@@ -1756,18 +1756,26 @@ static win_T *mouse_find_grid_win(int *gridp, int *rowp, int *colp)\n     }\n   } else if (*gridp == 0) {\n     ScreenGrid *grid = ui_comp_mouse_focus(*rowp, *colp);\n-    FOR_ALL_WINDOWS_IN_TAB(wp, curtab) {\n-      if (&wp->w_grid_alloc != grid) {\n-        continue;\n-      }\n+    if (grid == &pum_grid) {\n       *gridp = grid->handle;\n-      *rowp -= grid->comp_row + wp->w_grid.row_offset;\n-      *colp -= grid->comp_col + wp->w_grid.col_offset;\n-      return wp;\n+      *rowp -= grid->comp_row + grid->row_offset;\n+      *colp -= grid->comp_col + grid->col_offset;\n+      // The popup menu doesn't have a window, so return NULL\n+      return NULL;\n+    } else {\n+      FOR_ALL_WINDOWS_IN_TAB(wp, curtab) {\n+        if (&wp->w_grid_alloc != grid) {\n+          continue;\n+        }\n+        *gridp = grid->handle;\n+        *rowp -= wp->w_winrow + wp->w_grid.row_offset;\n+        *colp -= wp->w_wincol + wp->w_grid.col_offset;\n+        return wp;\n+      }\n     }\n \n-    // no float found, click on the default grid\n-    // TODO(bfredl): grid can be &pum_grid, allow select pum items by mouse?\n+    // No grid found, return the default grid, when using multigrid. With multigrid this happens for",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2062748481",
            "id": 2062748481,
            "in_reply_to_id": 2062742969,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM568wtB",
            "original_commit_id": "56bb8bfeb4e90d4faa5d221326fa0795a3bb930a",
            "original_line": 1777,
            "original_position": 31,
            "original_start_line": null,
            "path": "src/nvim/mouse.c",
            "position": null,
            "pull_request_review_id": 2797770571,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062748481/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-27T23:31:14Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062748481",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2062748571"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062748571"
                }
            },
            "author_association": "MEMBER",
            "body": "Yes, but the next sentence already starts with \"With multigrid\".",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-27T23:31:51Z",
            "diff_hunk": "@@ -1756,18 +1756,26 @@ static win_T *mouse_find_grid_win(int *gridp, int *rowp, int *colp)\n     }\n   } else if (*gridp == 0) {\n     ScreenGrid *grid = ui_comp_mouse_focus(*rowp, *colp);\n-    FOR_ALL_WINDOWS_IN_TAB(wp, curtab) {\n-      if (&wp->w_grid_alloc != grid) {\n-        continue;\n-      }\n+    if (grid == &pum_grid) {\n       *gridp = grid->handle;\n-      *rowp -= grid->comp_row + wp->w_grid.row_offset;\n-      *colp -= grid->comp_col + wp->w_grid.col_offset;\n-      return wp;\n+      *rowp -= grid->comp_row + grid->row_offset;\n+      *colp -= grid->comp_col + grid->col_offset;\n+      // The popup menu doesn't have a window, so return NULL\n+      return NULL;\n+    } else {\n+      FOR_ALL_WINDOWS_IN_TAB(wp, curtab) {\n+        if (&wp->w_grid_alloc != grid) {\n+          continue;\n+        }\n+        *gridp = grid->handle;\n+        *rowp -= wp->w_winrow + wp->w_grid.row_offset;\n+        *colp -= wp->w_wincol + wp->w_grid.col_offset;\n+        return wp;\n+      }\n     }\n \n-    // no float found, click on the default grid\n-    // TODO(bfredl): grid can be &pum_grid, allow select pum items by mouse?\n+    // No grid found, return the default grid, when using multigrid. With multigrid this happens for",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2062748571",
            "id": 2062748571,
            "in_reply_to_id": 2062742969,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM568wub",
            "original_commit_id": "56bb8bfeb4e90d4faa5d221326fa0795a3bb930a",
            "original_line": 1777,
            "original_position": 31,
            "original_start_line": null,
            "path": "src/nvim/mouse.c",
            "position": null,
            "pull_request_review_id": 2797770735,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062748571/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-27T23:31:51Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062748571",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2062750588"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062750588"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "I think you missed my previous comment. Is the comment OK if I change it to?:\r\n\"No grid found, return the default grid. With multigrid this happens for split separators for example.\"",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-27T23:41:53Z",
            "diff_hunk": "@@ -1756,18 +1756,26 @@ static win_T *mouse_find_grid_win(int *gridp, int *rowp, int *colp)\n     }\n   } else if (*gridp == 0) {\n     ScreenGrid *grid = ui_comp_mouse_focus(*rowp, *colp);\n-    FOR_ALL_WINDOWS_IN_TAB(wp, curtab) {\n-      if (&wp->w_grid_alloc != grid) {\n-        continue;\n-      }\n+    if (grid == &pum_grid) {\n       *gridp = grid->handle;\n-      *rowp -= grid->comp_row + wp->w_grid.row_offset;\n-      *colp -= grid->comp_col + wp->w_grid.col_offset;\n-      return wp;\n+      *rowp -= grid->comp_row + grid->row_offset;\n+      *colp -= grid->comp_col + grid->col_offset;\n+      // The popup menu doesn't have a window, so return NULL\n+      return NULL;\n+    } else {\n+      FOR_ALL_WINDOWS_IN_TAB(wp, curtab) {\n+        if (&wp->w_grid_alloc != grid) {\n+          continue;\n+        }\n+        *gridp = grid->handle;\n+        *rowp -= wp->w_winrow + wp->w_grid.row_offset;\n+        *colp -= wp->w_wincol + wp->w_grid.col_offset;\n+        return wp;\n+      }\n     }\n \n-    // no float found, click on the default grid\n-    // TODO(bfredl): grid can be &pum_grid, allow select pum items by mouse?\n+    // No grid found, return the default grid, when using multigrid. With multigrid this happens for",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2062750588",
            "id": 2062750588,
            "in_reply_to_id": 2062742969,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM568xN8",
            "original_commit_id": "56bb8bfeb4e90d4faa5d221326fa0795a3bb930a",
            "original_line": 1777,
            "original_position": 31,
            "original_start_line": null,
            "path": "src/nvim/mouse.c",
            "position": null,
            "pull_request_review_id": 2797773610,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062750588/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-27T23:53:31Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062750588",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2062753638"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062753638"
                }
            },
            "author_association": "MEMBER",
            "body": "Yes.",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-27T23:54:51Z",
            "diff_hunk": "@@ -1756,18 +1756,26 @@ static win_T *mouse_find_grid_win(int *gridp, int *rowp, int *colp)\n     }\n   } else if (*gridp == 0) {\n     ScreenGrid *grid = ui_comp_mouse_focus(*rowp, *colp);\n-    FOR_ALL_WINDOWS_IN_TAB(wp, curtab) {\n-      if (&wp->w_grid_alloc != grid) {\n-        continue;\n-      }\n+    if (grid == &pum_grid) {\n       *gridp = grid->handle;\n-      *rowp -= grid->comp_row + wp->w_grid.row_offset;\n-      *colp -= grid->comp_col + wp->w_grid.col_offset;\n-      return wp;\n+      *rowp -= grid->comp_row + grid->row_offset;\n+      *colp -= grid->comp_col + grid->col_offset;\n+      // The popup menu doesn't have a window, so return NULL\n+      return NULL;\n+    } else {\n+      FOR_ALL_WINDOWS_IN_TAB(wp, curtab) {\n+        if (&wp->w_grid_alloc != grid) {\n+          continue;\n+        }\n+        *gridp = grid->handle;\n+        *rowp -= wp->w_winrow + wp->w_grid.row_offset;\n+        *colp -= wp->w_wincol + wp->w_grid.col_offset;\n+        return wp;\n+      }\n     }\n \n-    // no float found, click on the default grid\n-    // TODO(bfredl): grid can be &pum_grid, allow select pum items by mouse?\n+    // No grid found, return the default grid, when using multigrid. With multigrid this happens for",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2062753638",
            "id": 2062753638,
            "in_reply_to_id": 2062742969,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM568x9m",
            "original_commit_id": "56bb8bfeb4e90d4faa5d221326fa0795a3bb930a",
            "original_line": 1777,
            "original_position": 31,
            "original_start_line": null,
            "path": "src/nvim/mouse.c",
            "position": null,
            "pull_request_review_id": 2797777358,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062753638/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-27T23:54:52Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2062753638",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2063011797"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2063011797"
                }
            },
            "author_association": "MEMBER",
            "body": "could reference this section from `win_float_pos` or just the intro of `ui-multigrid` in ui.txt",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-28T07:01:09Z",
            "diff_hunk": "@@ -667,5 +667,22 @@ External UIs are expected to implement these common features:\n - Support the text decorations/attributes given by |ui-event-hl_attr_define|.\n   The \"url\" attr should be presented as a clickable hyperlink.\n \n+Multigrid UI ~\n+                                                        *dev-ui-multigrid*\n+- A multigrid UI should display floating windows using one of the following",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2063011797",
            "id": 2063011797,
            "line": 672,
            "node_id": "PRRC_kwDOAPphoM569w_V",
            "original_commit_id": "ff6b0f6c67d8313c174366600f8fb0fe3fa6cf74",
            "original_line": 672,
            "original_position": 6,
            "original_start_line": null,
            "path": "runtime/doc/develop.txt",
            "position": 6,
            "pull_request_review_id": 2798180939,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2063011797/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-28T07:01:10Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2063011797",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
                "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
                "followers_url": "https://api.github.com/users/bfredl/followers",
                "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
                "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bfredl",
                "id": 1363104,
                "login": "bfredl",
                "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
                "organizations_url": "https://api.github.com/users/bfredl/orgs",
                "received_events_url": "https://api.github.com/users/bfredl/received_events",
                "repos_url": "https://api.github.com/users/bfredl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bfredl",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32535#discussion_r2063503992"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32535"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2063503992"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "I added the reference",
            "commit_id": "18a0bbf07c6abab3685a072eae0789916283bc35",
            "created_at": "2025-04-28T11:53:50Z",
            "diff_hunk": "@@ -667,5 +667,22 @@ External UIs are expected to implement these common features:\n - Support the text decorations/attributes given by |ui-event-hl_attr_define|.\n   The \"url\" attr should be presented as a clickable hyperlink.\n \n+Multigrid UI ~\n+                                                        *dev-ui-multigrid*\n+- A multigrid UI should display floating windows using one of the following",
            "html_url": "https://github.com/neovim/neovim/pull/32535#discussion_r2063503992",
            "id": 2063503992,
            "in_reply_to_id": 2063011797,
            "line": 672,
            "node_id": "PRRC_kwDOAPphoM56_pJ4",
            "original_commit_id": "ff6b0f6c67d8313c174366600f8fb0fe3fa6cf74",
            "original_line": 672,
            "original_position": 6,
            "original_start_line": null,
            "path": "runtime/doc/develop.txt",
            "position": 6,
            "pull_request_review_id": 2799039571,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2063503992/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-28T11:53:50Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2063503992",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo",
                "user_view_type": "public"
            }
        }
    ],
    "comment_regular_data": [
        {
            "author_association": "CONTRIBUTOR",
            "body": "The doc linter seems to complain about both `Multigrid` and UIs. But multigrid is used elsewhere without problems, and UIs is correct as far as I know.",
            "created_at": "2025-04-18T22:48:35Z",
            "html_url": "https://github.com/neovim/neovim/pull/32535#issuecomment-2816316005",
            "id": 2816316005,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32535",
            "node_id": "IC_kwDOAPphoM6n3ZJl",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2816316005/reactions"
            },
            "updated_at": "2025-04-18T22:48:35Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2816316005",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "No, it's complaining about `Neovim`",
            "created_at": "2025-04-19T01:24:27Z",
            "html_url": "https://github.com/neovim/neovim/pull/32535#issuecomment-2816433328",
            "id": 2816433328,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32535",
            "node_id": "IC_kwDOAPphoM6n31yw",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2816433328/reactions"
            },
            "updated_at": "2025-04-19T01:24:27Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2816433328",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Oh, I just noticed that I was using the wrong grid in the test. After #33635 you can make this change:\r\n```diff\r\ndiff --git a/test/functional/ui/popupmenu_spec.lua b/test/functional/ui/popupmenu_spec.lua\r\nindex a114f2618d..b580b90667 100644\r\n--- a/test/functional/ui/popupmenu_spec.lua\r\n+++ b/test/functional/ui/popupmenu_spec.lua\r\n@@ -7317,7 +7317,7 @@ describe('builtin popupmenu', function()\r\n         { 0, 5, 19 },\r\n         { 0, 5, 18 },\r\n       }\r\n-      if multigrid then\r\n+      if send_mouse_grid then\r\n         for i = 1, 7 do\r\n           local _, row, col = unpack(pos[i])\r\n           pos[i] = { 2, row - 2, col - 5 }\r\n@@ -7342,7 +7342,7 @@ describe('builtin popupmenu', function()\r\n       screen:expect(no_menu_screen)\r\n       eq('', api.nvim_get_var('menustr'))\r\n \r\n-      if multigrid then\r\n+      if send_mouse_grid then\r\n         for i = 2, 6, 2 do\r\n           local _, row, col = unpack(pos[i])\r\n           pos[i] = { 4, row - 1, col - 14 }\r\n@@ -7467,7 +7467,7 @@ describe('builtin popupmenu', function()\r\n         { 0, 5, 21 },\r\n         { 0, 5, 22 },\r\n       }\r\n-      if multigrid then\r\n+      if send_mouse_grid then\r\n         for i = 1, 7 do\r\n           local _, row, col = unpack(pos[i])\r\n           pos[i] = { 2, row - 2, col - 5 }\r\n@@ -7490,7 +7490,7 @@ describe('builtin popupmenu', function()\r\n       screen:expect(no_menu_screen)\r\n       eq('', api.nvim_get_var('menustr'))\r\n \r\n-      if multigrid then\r\n+      if send_mouse_grid then\r\n         for i = 2, 6, 2 do\r\n           local _, row, col = unpack(pos[i])\r\n           pos[i] = { 4, row - 1, col - 12 }\r\n```",
            "created_at": "2025-04-25T14:12:15Z",
            "html_url": "https://github.com/neovim/neovim/pull/32535#issuecomment-2830550491",
            "id": 2830550491,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32535",
            "node_id": "IC_kwDOAPphoM6otsXb",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2830550491/reactions"
            },
            "updated_at": "2025-04-25T14:12:15Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2830550491",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "> After https://github.com/neovim/neovim/pull/33635 you can make this change\r\n\r\nDone",
            "created_at": "2025-04-25T15:06:26Z",
            "html_url": "https://github.com/neovim/neovim/pull/32535#issuecomment-2830691308",
            "id": 2830691308,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32535",
            "node_id": "IC_kwDOAPphoM6ouOvs",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2830691308/reactions"
            },
            "updated_at": "2025-04-25T15:06:26Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2830691308",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "The lua lint failure looks strange. `runtime/lua/vim/treesitter/_fold.lua` has nothing to do with these changes. And the luals version also appears to be the same as succeeding PRs.\r\n\r\nOr maybe it's because I'm changing `runtime/lua/vim/_meta/api.lua`, and therefore making it check the runtime folder?\r\n",
            "created_at": "2025-04-25T15:39:45Z",
            "html_url": "https://github.com/neovim/neovim/pull/32535#issuecomment-2830770215",
            "id": 2830770215,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32535",
            "node_id": "IC_kwDOAPphoM6ouiAn",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2830770215/reactions"
            },
            "updated_at": "2025-04-25T15:40:03Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2830770215",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Yes, that's a known flake. Sometimes goes away when rebasing on master. In any case, don't worry about it until the PR is done.",
            "created_at": "2025-04-25T15:43:00Z",
            "html_url": "https://github.com/neovim/neovim/pull/32535#issuecomment-2830777067",
            "id": 2830777067,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32535",
            "node_id": "IC_kwDOAPphoM6oujrr",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2830777067/reactions"
            },
            "updated_at": "2025-04-25T15:43:00Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2830777067",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "It turns out that the test cases I previously added didn't fully cover the \"`pum_select_mouse_pos()` with winbar\" case, because the mouse movement was limited to the popupmenu area, in which case `ui_comp_mouse_focus()` finds `pum_grid`, and `mouse_find_grid_win()` handles that case specially. However I've found a case where winbar does matter in #33640. If you change the `multigrid` condition to `send_mouse_grid` it will fail on this PR.\r\n\r\nAdditionally, maybe it's better to just use `ui_comp_mouse_focus()` and subtract `comp_row` and `comp_col` in popupmenu code instead? That'll avoid subtracting and re-adding winbar height entirely.",
            "created_at": "2025-04-26T01:36:26Z",
            "html_url": "https://github.com/neovim/neovim/pull/32535#issuecomment-2831719608",
            "id": 2831719608,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32535",
            "node_id": "IC_kwDOAPphoM6oyJy4",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2831719608/reactions"
            },
            "updated_at": "2025-04-26T01:38:21Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2831719608",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "This looks fairly low-risk, except the changes to `test/functional/ui/mouse_spec.lua`. Is there no way to avoid some of the churn there, and/or make the new tests less verbose? Note that `screen:expect()` can test conditions/flags, it doesn't need to test the entire screen (depending on the nature of the test).",
            "created_at": "2025-04-26T20:26:18Z",
            "html_url": "https://github.com/neovim/neovim/pull/32535#issuecomment-2832595882",
            "id": 2832595882,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32535",
            "node_id": "IC_kwDOAPphoM6o1fuq",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2832595882/reactions"
            },
            "updated_at": "2025-04-26T20:26:18Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2832595882",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "> s there no way to avoid some of the churn there, and/or make the new tests less verbose? Note that `screen:expect()` can test conditions/flags, it doesn't need to test the entire screen (depending on the nature of the test).\r\n\r\nI think most of the tests need to test the screen state. But I guess some simplification, like @zeertzjq did here https://github.com/neovim/neovim/pull/33626 could be done. But that's a lot of work to go through each test manually.\r\n\r\nPersonally, I like the approach I'm taking here https://github.com/neovim/neovim/compare/master...fredizzimo:neovim:multigrid-composition-test (the last two commits). It makes almost the complete test suite run with multigrid, with the code is `screen.lua` building an output that is compatible with the non-multigrid tests. That's how I have tested that these features myself. It's also much less sensitive to implementation changes. But @bfredl didn't like it, so I'm keeping it to myself for now.",
            "created_at": "2025-04-26T21:35:17Z",
            "html_url": "https://github.com/neovim/neovim/pull/32535#issuecomment-2832634237",
            "id": 2832634237,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32535",
            "node_id": "IC_kwDOAPphoM6o1pF9",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 1,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2832634237/reactions"
            },
            "updated_at": "2025-04-26T21:35:17Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2832634237",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "> It turns out that the test cases I previously added didn't fully cover the \"`pum_select_mouse_pos()` with winbar\" case, because the mouse movement was limited to the popupmenu area, in which case `ui_comp_mouse_focus()` finds `pum_grid`, and `mouse_find_grid_win()` handles that case specially. However I've found a case where winbar does matter in #33640. If you change the `multigrid` condition to `send_mouse_grid` it will fail on this PR.\r\n> \r\n> Additionally, maybe it's better to just use `ui_comp_mouse_focus()` and subtract `comp_row` and `comp_col` in popupmenu code instead? That'll avoid subtracting and re-adding winbar height entirely.\r\n\r\nFixed, \r\n\r\nI decided to not use `ui_comp_mouse_focus`, since the special handling for popup menus is still needed. But I think it's worth doing a more global refactor of this functionality in a follow up PR. Perhaps to move the grid detection to a much earlier stage, so that the rest of the code always can handle `mouse_row/mouse_col` the same way. Perhaps even set ` the absolute values as well. ",
            "created_at": "2025-04-27T02:30:22Z",
            "html_url": "https://github.com/neovim/neovim/pull/32535#issuecomment-2832907854",
            "id": 2832907854,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32535",
            "node_id": "IC_kwDOAPphoM6o2r5O",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2832907854/reactions"
            },
            "updated_at": "2025-04-27T02:30:22Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2832907854",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "As for tests, the point is that not every single single-grid test needs to be duplicated/extended to a corresponding multigrid test, in the first place. The important metric is coverage* of all new logic in the added/adjusted code in the PR. And for those specific tests that all address a useful common/edge case individually, actually seeing the multigrid traffic spelled out in the test is very useful.\r\n\r\n(* we don't care about formal coverage tools, they all suck when integrated into soul-sucking github web UI:s. the point is just that the intention of added branches in the code is matched by tests).",
            "created_at": "2025-04-28T07:16:37Z",
            "html_url": "https://github.com/neovim/neovim/pull/32535#issuecomment-2834208614",
            "id": 2834208614,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32535",
            "node_id": "IC_kwDOAPphoM6o7pdm",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2834208614/reactions"
            },
            "updated_at": "2025-04-28T07:16:37Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2834208614",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
                "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
                "followers_url": "https://api.github.com/users/bfredl/followers",
                "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
                "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bfredl",
                "id": 1363104,
                "login": "bfredl",
                "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
                "organizations_url": "https://api.github.com/users/bfredl/orgs",
                "received_events_url": "https://api.github.com/users/bfredl/received_events",
                "repos_url": "https://api.github.com/users/bfredl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bfredl",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I removed the special handling for `grid 1`, which I never fully understood. It was needed before, but I think the actual problem was fixed with the `grid 1` compensation or something. I probably understood what the problem was a bit wrong at some point.",
            "created_at": "2025-04-28T12:24:51Z",
            "html_url": "https://github.com/neovim/neovim/pull/32535#issuecomment-2835073777",
            "id": 2835073777,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32535",
            "node_id": "IC_kwDOAPphoM6o-8rx",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2835073777/reactions"
            },
            "updated_at": "2025-04-28T12:24:51Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2835073777",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "> As for tests, the point is that not every single single-grid test needs to be duplicated/extended to a corresponding multigrid test, in the first place. The important metric is coverage* of all new logic in the added/adjusted code in the PR. And for those specific tests that all address a useful common/edge case individually, actually seeing the multigrid traffic spelled out in the test is very useful.\r\n> \r\n> (* we don't care about formal coverage tools, they all suck when integrated into soul-sucking github web UI:s. the point is just that the intention of added branches in the code is matched by tests).\r\n\r\nRetrospectively, that might be possible, now that I know what changes were required. But even then, I don't think anyone without a very deep knowledge of the codebase can guess that the only ones of the enabled `mouse_spec` tests that are failing without the code changes here, are related to concealed and virtual lines. For example, it's somehow selecting the right split windows without any changes. Also note that the `level 1` tests are passing, so it's even harder to make the connection.\r\n\r\n```\r\nFAILED   test/functional/ui/mouse_spec.lua @ 3012: ui/mouse/input with ext_multigrid on concealed text (syntax) (level 2) click on non-wrapped lines\r\nFAILED   test/functional/ui/mouse_spec.lua @ 3172: ui/mouse/input with ext_multigrid on concealed text (syntax) (level 2) click on non-wrapped lines (insert mode)\r\nFAILED   test/functional/ui/mouse_spec.lua @ 3332: ui/mouse/input with ext_multigrid on concealed text (syntax) (level 2) click on wrapped lines\r\nFAILED   test/functional/ui/mouse_spec.lua @ 3585: ui/mouse/input with ext_multigrid on concealed text (syntax) (level 3) click on non-wrapped lines\r\nFAILED   test/functional/ui/mouse_spec.lua @ 3694: ui/mouse/input with ext_multigrid on concealed text (syntax) (level 3) click on wrapped lines\r\nFAILED   test/functional/ui/mouse_spec.lua @ 3012: ui/mouse/input with ext_multigrid on concealed text (matchadd()) (level 2) click on non-wrapped lines\r\nFAILED   test/functional/ui/mouse_spec.lua @ 3172: ui/mouse/input with ext_multigrid on concealed text (matchadd()) (level 2) click on non-wrapped lines (insert mode)\r\nFAILED   test/functional/ui/mouse_spec.lua @ 3332: ui/mouse/input with ext_multigrid on concealed text (matchadd()) (level 2) click on wrapped lines\r\nFAILED   test/functional/ui/mouse_spec.lua @ 3585: ui/mouse/input with ext_multigrid on concealed text (matchadd()) (level 3) click on non-wrapped lines\r\nFAILED   test/functional/ui/mouse_spec.lua @ 3694: ui/mouse/input with ext_multigrid on concealed text (matchadd()) (level 3) click on wrapped lines\r\nFAILED   test/functional/ui/mouse_spec.lua @ 3012: ui/mouse/input with ext_multigrid on concealed text (extmarks) (level 2) click on non-wrapped lines\r\nFAILED   test/functional/ui/mouse_spec.lua @ 3172: ui/mouse/input with ext_multigrid on concealed text (extmarks) (level 2) click on non-wrapped lines (insert mode)\r\nFAILED   test/functional/ui/mouse_spec.lua @ 3332: ui/mouse/input with ext_multigrid on concealed text (extmarks) (level 2) click on wrapped lines\r\nFAILED   test/functional/ui/mouse_spec.lua @ 3585: ui/mouse/input with ext_multigrid on concealed text (extmarks) (level 3) click on non-wrapped lines\r\nFAILED   test/functional/ui/mouse_spec.lua @ 3694: ui/mouse/input with ext_multigrid on concealed text (extmarks) (level 3) click on wrapped lines\r\nFAILED   test/functional/ui/mouse_spec.lua @ 3977: ui/mouse/input with ext_multigrid virtual text does not change cursor placement on concealed line\r\n```\r\n\r\nThe code is obviously hitting much more related functionality than that, but those parts didn't need any changes. I'm not sure if those cases are covered by some other test or not. But if they are, then technically it might be possible to revert all changes to `mouse_spec` here, which to me feels very counter-intuitive, since the PR adjusts the mouse functionality. The bigger issue is that there's no way I would have had the confidence to send a PR without enabling those tests. If not for the full test suite in my branch, I still wouldn't do it.  Although, I have also been daily driving these changes in Neovide since the start of the year, which me more confident.\r\n\r\nAnd this was the easy case. With my previous PR that added composition info, I really needed the full test suite to verify that the output was correct. I was able to rely on that, and make sure that we can produce identical results to single grid, and only after that, I was able to lock down the test expectations to the coordinates and `compindex` that the code was producing, with some manual verification of course.\r\n\r\nFinally, more tests makes it robust to future changes. If I add only a subset of the failing tests right now, it doesn't guard against refactors that breaks multigrid in the future, something that is very valuable IMO.\r\n\r\nI agree with one thing though, not *every* test *need* to be run in multigrid. Things that test vim motions, LSP and so on don't. But where do you draw the line? For example, the only tests that finds the difference between multigrid and non-multigrid, that the cursor doesn't move when tabline is enabled in single-grid is a test in `test/functional/api/vim_spec.lua` https://github.com/fredizzimo/neovim/commit/63f15fa71302b8fd03c84370e5dcf1de1f3ab2b7#diff-b3050cebeebf29a6d8a19462b695a7d01105f05a1dec3b596396b2e645041b95R5354.  And the only tests that finds problems with the command mode `C-c` is `test/functional/editor/completion_spec.lua`. And the test for this https://github.com/neovim/neovim/pull/32494, is in `test/functional/vimscript/screenchar_spec.lua` \r\n\r\nIn the end it's your choice, I will personally keep running the full test suite for all my future contributions, and probably regularly otherwise as well to find regressions that can be reported as bugs. For this PR, I'm not able to select a subset of tests to run. But if you can provide a list, I will implement it. I can also try to reduce the boilerplate, although as mentioned it's a lot of work, depending on how the final testing approach is selected.\r\n",
            "created_at": "2025-04-28T13:04:41Z",
            "html_url": "https://github.com/neovim/neovim/pull/32535#issuecomment-2835177857",
            "id": 2835177857,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32535",
            "node_id": "IC_kwDOAPphoM6o_WGB",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2835177857/reactions"
            },
            "updated_at": "2025-04-28T13:04:41Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2835177857",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "One relatively easy way to make the mouse tests less verbose, is to change almost all screen expectations to functions that greps for suitable parts of the screen. That way they can most likely share the same tests in most cases.",
            "created_at": "2025-04-28T13:35:06Z",
            "html_url": "https://github.com/neovim/neovim/pull/32535#issuecomment-2835269658",
            "id": 2835269658,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32535",
            "node_id": "IC_kwDOAPphoM6o_sga",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2835269658/reactions"
            },
            "updated_at": "2025-04-28T13:35:06Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2835269658",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo",
                "user_view_type": "public"
            }
        }
    ],
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/32535/comments",
    "commits_url": "https://api.github.com/repos/neovim/neovim/pulls/32535/commits",
    "created_at": "2025-02-20T16:43:32Z",
    "diff_url": "https://github.com/neovim/neovim/pull/32535.diff",
    "draft": false,
    "head": {
        "label": "fredizzimo:multigrid-mouse-pos",
        "ref": "multigrid-mouse-pos",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/fredizzimo/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/fredizzimo/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/fredizzimo/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/fredizzimo/neovim/branches{/branch}",
            "clone_url": "https://github.com/fredizzimo/neovim.git",
            "collaborators_url": "https://api.github.com/repos/fredizzimo/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/fredizzimo/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/fredizzimo/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/fredizzimo/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/fredizzimo/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/fredizzimo/neovim/contributors",
            "created_at": "2021-07-09T10:07:26Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/fredizzimo/neovim/deployments",
            "description": "Vim-fork focused on extensibility and usability",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/fredizzimo/neovim/downloads",
            "events_url": "https://api.github.com/repos/fredizzimo/neovim/events",
            "fork": true,
            "forks": 0,
            "forks_count": 0,
            "forks_url": "https://api.github.com/repos/fredizzimo/neovim/forks",
            "full_name": "fredizzimo/neovim",
            "git_commits_url": "https://api.github.com/repos/fredizzimo/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/fredizzimo/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/fredizzimo/neovim/git/tags{/sha}",
            "git_url": "git://github.com/fredizzimo/neovim.git",
            "has_discussions": false,
            "has_downloads": true,
            "has_issues": false,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://neovim.io",
            "hooks_url": "https://api.github.com/repos/fredizzimo/neovim/hooks",
            "html_url": "https://github.com/fredizzimo/neovim",
            "id": 384397538,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/fredizzimo/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/fredizzimo/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/fredizzimo/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/fredizzimo/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/fredizzimo/neovim/labels{/name}",
            "language": null,
            "languages_url": "https://api.github.com/repos/fredizzimo/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/fredizzimo/neovim/merges",
            "milestones_url": "https://api.github.com/repos/fredizzimo/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "MDEwOlJlcG9zaXRvcnkzODQzOTc1Mzg=",
            "notifications_url": "https://api.github.com/repos/fredizzimo/neovim/notifications{?since,all,participating}",
            "open_issues": 0,
            "open_issues_count": 0,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo",
                "user_view_type": "public"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/fredizzimo/neovim/pulls{/number}",
            "pushed_at": "2025-04-28T12:20:49Z",
            "releases_url": "https://api.github.com/repos/fredizzimo/neovim/releases{/id}",
            "size": 312974,
            "ssh_url": "git@github.com:fredizzimo/neovim.git",
            "stargazers_count": 0,
            "stargazers_url": "https://api.github.com/repos/fredizzimo/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/fredizzimo/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/fredizzimo/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/fredizzimo/neovim/subscription",
            "svn_url": "https://github.com/fredizzimo/neovim",
            "tags_url": "https://api.github.com/repos/fredizzimo/neovim/tags",
            "teams_url": "https://api.github.com/repos/fredizzimo/neovim/teams",
            "topics": [],
            "trees_url": "https://api.github.com/repos/fredizzimo/neovim/git/trees{/sha}",
            "updated_at": "2021-07-09T10:07:27Z",
            "url": "https://api.github.com/repos/fredizzimo/neovim",
            "visibility": "public",
            "watchers": 0,
            "watchers_count": 0,
            "web_commit_signoff_required": false
        },
        "sha": "18a0bbf07c6abab3685a072eae0789916283bc35",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
            "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
            "followers_url": "https://api.github.com/users/fredizzimo/followers",
            "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
            "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/fredizzimo",
            "id": 9946255,
            "login": "fredizzimo",
            "node_id": "MDQ6VXNlcjk5NDYyNTU=",
            "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
            "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
            "repos_url": "https://api.github.com/users/fredizzimo/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/fredizzimo",
            "user_view_type": "public"
        }
    },
    "html_url": "https://github.com/neovim/neovim/pull/32535",
    "id": 2347616718,
    "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32535",
    "labels": [
        {
            "color": "c5def5",
            "default": false,
            "description": "",
            "id": 113026979,
            "name": "ui",
            "node_id": "MDU6TGFiZWwxMTMwMjY5Nzk=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/ui"
        }
    ],
    "locked": false,
    "merge_commit_sha": "b30a5c333ff8a7cf4d71166e9479c8c4fa673042",
    "merged_at": null,
    "milestone": null,
    "node_id": "PR_kwDOAPphoM6L7cnO",
    "number": 32535,
    "patch_url": "https://github.com/neovim/neovim/pull/32535.patch",
    "requested_reviewers": [],
    "requested_teams": [],
    "review_comment_url": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}",
    "review_comments_url": "https://api.github.com/repos/neovim/neovim/pulls/32535/comments",
    "state": "open",
    "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/18a0bbf07c6abab3685a072eae0789916283bc35",
    "title": "feat(ui): allow passing grid 0 as multigrid mouse input",
    "updated_at": "2025-04-28T13:35:07Z",
    "url": "https://api.github.com/repos/neovim/neovim/pulls/32535",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
        "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
        "followers_url": "https://api.github.com/users/fredizzimo/followers",
        "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
        "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/fredizzimo",
        "id": 9946255,
        "login": "fredizzimo",
        "node_id": "MDQ6VXNlcjk5NDYyNTU=",
        "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
        "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
        "repos_url": "https://api.github.com/users/fredizzimo/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/fredizzimo",
        "user_view_type": "public"
    }
}