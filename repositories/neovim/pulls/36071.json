{
    "_links": {
        "comments": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/36071/comments"
        },
        "commits": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/36071/commits"
        },
        "html": {
            "href": "https://github.com/neovim/neovim/pull/36071"
        },
        "issue": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/36071"
        },
        "review_comment": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}"
        },
        "review_comments": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/36071/comments"
        },
        "self": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/36071"
        },
        "statuses": {
            "href": "https://api.github.com/repos/neovim/neovim/statuses/ff121a240d60141fc3d8126c7907da46bf906f39"
        }
    },
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "auto_merge": null,
    "base": {
        "label": "neovim:master",
        "ref": "master",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/neovim/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/neovim/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/neovim/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/neovim/neovim/branches{/branch}",
            "clone_url": "https://github.com/neovim/neovim.git",
            "collaborators_url": "https://api.github.com/repos/neovim/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/neovim/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/neovim/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/neovim/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/neovim/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/neovim/neovim/contributors",
            "created_at": "2014-01-31T13:39:22Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/neovim/neovim/deployments",
            "description": "Vim-fork focused on extensibility and usability",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/neovim/neovim/downloads",
            "events_url": "https://api.github.com/repos/neovim/neovim/events",
            "fork": false,
            "forks": 6362,
            "forks_count": 6362,
            "forks_url": "https://api.github.com/repos/neovim/neovim/forks",
            "full_name": "neovim/neovim",
            "git_commits_url": "https://api.github.com/repos/neovim/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/neovim/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/neovim/neovim/git/tags{/sha}",
            "git_url": "git://github.com/neovim/neovim.git",
            "has_discussions": true,
            "has_downloads": true,
            "has_issues": true,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://neovim.io",
            "hooks_url": "https://api.github.com/repos/neovim/neovim/hooks",
            "html_url": "https://github.com/neovim/neovim",
            "id": 16408992,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/neovim/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/neovim/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/neovim/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/neovim/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/neovim/neovim/labels{/name}",
            "language": "Vim Script",
            "languages_url": "https://api.github.com/repos/neovim/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/neovim/neovim/merges",
            "milestones_url": "https://api.github.com/repos/neovim/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "MDEwOlJlcG9zaXRvcnkxNjQwODk5Mg==",
            "notifications_url": "https://api.github.com/repos/neovim/neovim/notifications{?since,all,participating}",
            "open_issues": 2032,
            "open_issues_count": 2032,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
                "events_url": "https://api.github.com/users/neovim/events{/privacy}",
                "followers_url": "https://api.github.com/users/neovim/followers",
                "following_url": "https://api.github.com/users/neovim/following{/other_user}",
                "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/neovim",
                "id": 6471485,
                "login": "neovim",
                "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
                "organizations_url": "https://api.github.com/users/neovim/orgs",
                "received_events_url": "https://api.github.com/users/neovim/received_events",
                "repos_url": "https://api.github.com/users/neovim/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
                "type": "Organization",
                "url": "https://api.github.com/users/neovim",
                "user_view_type": "public"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/neovim/neovim/pulls{/number}",
            "pushed_at": "2025-10-20T22:45:38Z",
            "releases_url": "https://api.github.com/repos/neovim/neovim/releases{/id}",
            "size": 348094,
            "ssh_url": "git@github.com:neovim/neovim.git",
            "stargazers_count": 93601,
            "stargazers_url": "https://api.github.com/repos/neovim/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/neovim/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/neovim/neovim/subscription",
            "svn_url": "https://github.com/neovim/neovim",
            "tags_url": "https://api.github.com/repos/neovim/neovim/tags",
            "teams_url": "https://api.github.com/repos/neovim/neovim/teams",
            "topics": [
                "api",
                "c",
                "lua",
                "neovim",
                "nvim",
                "text-editor",
                "vim"
            ],
            "trees_url": "https://api.github.com/repos/neovim/neovim/git/trees{/sha}",
            "updated_at": "2025-10-21T02:13:22Z",
            "url": "https://api.github.com/repos/neovim/neovim",
            "visibility": "public",
            "watchers": 93601,
            "watchers_count": 93601,
            "web_commit_signoff_required": false
        },
        "sha": "020d5e0f7e7f9d1576c21e884b3855a1799a1a7d",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
            "events_url": "https://api.github.com/users/neovim/events{/privacy}",
            "followers_url": "https://api.github.com/users/neovim/followers",
            "following_url": "https://api.github.com/users/neovim/following{/other_user}",
            "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/neovim",
            "id": 6471485,
            "login": "neovim",
            "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
            "organizations_url": "https://api.github.com/users/neovim/orgs",
            "received_events_url": "https://api.github.com/users/neovim/received_events",
            "repos_url": "https://api.github.com/users/neovim/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
            "type": "Organization",
            "url": "https://api.github.com/users/neovim",
            "user_view_type": "public"
        }
    },
    "body": "<!--\r\n  Thank you for contributing to Neovim!\r\n  If this is your first time, check out https://github.com/neovim/neovim/blob/master/CONTRIBUTING.md#pull-requests-prs\r\n  for our PR guidelines.\r\n-->\r\n\r\nThis PR improves type annotation of `vim.lsp.Config.root_dir` by allowing function as documented in <https://neovim.io/doc/user/lsp.html#lsp-root_dir()>.\r\n\r\nThe fix also required changes in `vim.lsp._get_workspace_folders` and `:checkhealth vim.lsp`.\r\n\r\nI ran `:cheackhealth vim.lsp` and confirmed `root_dir` as function works in monorepo with ts_ls.\r\n\r\n```\r\nvim.lsp: Active Clients ~\r\n- ts_ls (id: 2)\r\n  - Version: ? (no serverInfo.version response)\r\n  - Root directory: ~/ghq/github.com/xxx/xxx/xxx\r\n  - Command: { \"typescript-language-server\", \"--stdio\" }\r\n  - Settings: {}\r\n  - Attached buffers: 1\r\n- ts_ls (id: 3)\r\n  - Version: ? (no serverInfo.version response)\r\n  - Root directory: ~/ghq/github.com/xxx/xxx/yyy\r\n  - Command: { \"typescript-language-server\", \"--stdio\" }\r\n  - Settings: {}\r\n  - Attached buffers: 2\r\n```",
    "closed_at": "2025-10-11T23:01:06Z",
    "comment_data": [
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/36071#discussion_r2414474674"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/36071"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2414474674"
                }
            },
            "author_association": "MEMBER",
            "body": "I don't think we need a news entry for this.",
            "commit_id": "ff121a240d60141fc3d8126c7907da46bf906f39",
            "created_at": "2025-10-08T16:51:17Z",
            "diff_hunk": "@@ -30,6 +30,10 @@ LSP\n \n â€¢ |vim.lsp.buf.selection_range()| now accepts an integer which specifies its\n   direction, rather than a string `'outer'` or `'inner'`.\n+â€¢ LSP client can now get workspace folders considering the case",
            "html_url": "https://github.com/neovim/neovim/pull/36071#discussion_r2414474674",
            "id": 2414474674,
            "line": 33,
            "node_id": "PRRC_kwDOAPphoM6P6fWy",
            "original_commit_id": "2541fbe1865e875689eb33d1e9e9dc1b66e8da29",
            "original_line": 33,
            "original_position": 4,
            "original_start_line": null,
            "path": "runtime/doc/news.txt",
            "position": 4,
            "pull_request_review_id": 3315724242,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/36071",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2414474674/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-10-08T16:52:48Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2414474674",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/62502207?v=4",
                "events_url": "https://api.github.com/users/MariaSolOs/events{/privacy}",
                "followers_url": "https://api.github.com/users/MariaSolOs/followers",
                "following_url": "https://api.github.com/users/MariaSolOs/following{/other_user}",
                "gists_url": "https://api.github.com/users/MariaSolOs/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/MariaSolOs",
                "id": 62502207,
                "login": "MariaSolOs",
                "node_id": "MDQ6VXNlcjYyNTAyMjA3",
                "organizations_url": "https://api.github.com/users/MariaSolOs/orgs",
                "received_events_url": "https://api.github.com/users/MariaSolOs/received_events",
                "repos_url": "https://api.github.com/users/MariaSolOs/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/MariaSolOs/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/MariaSolOs/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/MariaSolOs",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/36071#discussion_r2414911473"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/36071"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2414911473"
                }
            },
            "author_association": "MEMBER",
            "body": "Normally not for a \"fix\", but based on my experience with nvim-lspconfig, every bit of communication we can provide for LSP configuration, is worth having. So let's keep this news update.\r\n\r\nThis matters because the transition from `require'lspconfig'` is leaving many people wondering how to do things with `vim.lsp.config`.",
            "commit_id": "ff121a240d60141fc3d8126c7907da46bf906f39",
            "created_at": "2025-10-08T20:08:20Z",
            "diff_hunk": "@@ -30,6 +30,10 @@ LSP\n \n â€¢ |vim.lsp.buf.selection_range()| now accepts an integer which specifies its\n   direction, rather than a string `'outer'` or `'inner'`.\n+â€¢ LSP client can now get workspace folders considering the case",
            "html_url": "https://github.com/neovim/neovim/pull/36071#discussion_r2414911473",
            "id": 2414911473,
            "in_reply_to_id": 2414474674,
            "line": 33,
            "node_id": "PRRC_kwDOAPphoM6P8J_x",
            "original_commit_id": "2541fbe1865e875689eb33d1e9e9dc1b66e8da29",
            "original_line": 33,
            "original_position": 4,
            "original_start_line": null,
            "path": "runtime/doc/news.txt",
            "position": 4,
            "pull_request_review_id": 3316341310,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/36071",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2414911473/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-10-08T20:09:06Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2414911473",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/36071#discussion_r2423115140"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/36071"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423115140"
                }
            },
            "author_association": "MEMBER",
            "body": "This could be asynchronous, though it's not common (but definitely happens). To protect against this, use `vim.wait` with a timeout:\r\n\r\nnot tested but shows the idea:\r\n\r\n```suggestion\r\n            local dir = nil\r\n            client.root_dir(buf, function(d)\r\n              dir = d\r\n            end)\r\n            vim.wait(1000, function() return not not dir end)\r\n            table.insert(root_dirs, dir or 'root_dir() timeout')\r\n```\r\n",
            "commit_id": "2fa0caf4b74170bb5ea019da06c3f7d5f3fba8b8",
            "created_at": "2025-10-11T20:07:36Z",
            "diff_hunk": "@@ -89,10 +89,31 @@ local function check_active_clients()\n         end\n         dirs_info = ('- Workspace folders:\\n    %s'):format(table.concat(wfolders, '\\n    '))\n       else\n-        dirs_info = string.format(\n-          '- Root directory: %s',\n-          client.root_dir and vim.fn.fnamemodify(client.root_dir, ':~')\n-        ) or nil\n+        local root_dirs = {} ---@type string[]\n+        if type(client.root_dir) == 'string' then\n+          table.insert(root_dirs, client.root_dir --[[@as string]])\n+        elseif type(client.root_dir) == 'function' then\n+          for buf, _ in pairs(client.attached_buffers) do\n+            client.root_dir(buf, function(dir)\n+              if dir then\n+                table.insert(root_dirs, dir)\n+              end\n+            end)",
            "html_url": "https://github.com/neovim/neovim/pull/36071#discussion_r2423115140",
            "id": 2423115140,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6Qbc2E",
            "original_commit_id": "2fa0caf4b74170bb5ea019da06c3f7d5f3fba8b8",
            "original_line": 101,
            "original_position": 17,
            "original_start_line": 97,
            "path": "runtime/lua/vim/lsp/health.lua",
            "position": 1,
            "pull_request_review_id": 3327566335,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/36071",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423115140/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-10-11T20:14:06Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423115140",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/36071#discussion_r2423115786"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/36071"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423115786"
                }
            },
            "author_association": "MEMBER",
            "body": "need a similar `vim.wait` approach here, in case `root_dir` is async.",
            "commit_id": "2fa0caf4b74170bb5ea019da06c3f7d5f3fba8b8",
            "created_at": "2025-10-11T20:10:07Z",
            "diff_hunk": "@@ -68,6 +68,18 @@ function lsp._get_workspace_folders(workspace_folders)\n         name = workspace_folders,\n       },\n     }\n+  elseif type(workspace_folders) == 'function' then\n+    local name ---@type string\n+    workspace_folders(0, function(root_dir)\n+      name = root_dir\n+    end)",
            "html_url": "https://github.com/neovim/neovim/pull/36071#discussion_r2423115786",
            "id": 2423115786,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6QbdAK",
            "original_commit_id": "2fa0caf4b74170bb5ea019da06c3f7d5f3fba8b8",
            "original_line": 75,
            "original_position": 17,
            "original_start_line": null,
            "path": "runtime/lua/vim/lsp.lua",
            "position": 1,
            "pull_request_review_id": 3327567013,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/36071",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423115786/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-10-11T20:10:07Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423115786",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/36071#discussion_r2423115917"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/36071"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423115917"
                }
            },
            "author_association": "MEMBER",
            "body": "might be a useful hint to name this parameter `root_dir`\n```suggestion\nfunction lsp._get_workspace_folders(root_dir)\n```",
            "commit_id": "ff121a240d60141fc3d8126c7907da46bf906f39",
            "created_at": "2025-10-11T20:10:35Z",
            "diff_hunk": "@@ -56,7 +56,7 @@ function lsp._unsupported_method(method)\n   return msg\n end\n \n----@param workspace_folders string|lsp.WorkspaceFolder[]?\n+---@param workspace_folders string|lsp.WorkspaceFolder[]|fun(bufnr: integer, on_dir:fun(root_dir?:string))?\n ---@return lsp.WorkspaceFolder[]?\n function lsp._get_workspace_folders(workspace_folders)",
            "html_url": "https://github.com/neovim/neovim/pull/36071#discussion_r2423115917",
            "id": 2423115917,
            "line": 61,
            "node_id": "PRRC_kwDOAPphoM6QbdCN",
            "original_commit_id": "2fa0caf4b74170bb5ea019da06c3f7d5f3fba8b8",
            "original_line": 61,
            "original_position": 7,
            "original_start_line": null,
            "path": "runtime/lua/vim/lsp.lua",
            "position": 7,
            "pull_request_review_id": 3327567109,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/36071",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423115917/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-10-11T20:10:35Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423115917",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/36071#discussion_r2423116325"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/36071"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423116325"
                }
            },
            "author_association": "MEMBER",
            "body": "great tests ðŸ‘ ",
            "commit_id": "ff121a240d60141fc3d8126c7907da46bf906f39",
            "created_at": "2025-10-11T20:11:58Z",
            "diff_hunk": "@@ -1944,6 +1944,102 @@ describe('LSP', function()\n         end)\n       )\n     end)\n+\n+    it('vim.lsp.start sends workspace folder when root_dir callback', function()\n+      exec_lua(create_server_definition)\n+\n+      local expected_root_dir = tmpname(false)\n+      mkdir(expected_root_dir)\n+\n+      local result = exec_lua(function(root_dir)\n+        local server = _G._create_server()\n+        local calls = {}\n+\n+        local client_id = vim.lsp.start({\n+          name = 'cb-root',\n+          cmd = server.cmd,\n+          root_dir = function(bufnr, on_dir)\n+            table.insert(calls, bufnr)\n+            on_dir(root_dir)\n+          end,\n+        }, { attach = false })\n+\n+        vim.wait(1000, function()\n+          return #server.messages > 0\n+        end)\n+\n+        local initialize = server.messages[1]\n+        if client_id then\n+          vim.lsp.stop_client(client_id)\n+        end\n+\n+        return {\n+          calls = calls,\n+          ---@diagnostic disable-next-line: no-unknown\n+          workspace_folders = initialize and initialize.params.workspaceFolders,\n+        }\n+      end, expected_root_dir)\n+\n+      eq({ 0 }, result.calls)\n+      eq({\n+        {\n+          uri = vim.uri_from_fname(expected_root_dir),\n+          name = expected_root_dir,\n+        },\n+      }, result.workspace_folders)\n+    end)\n+\n+    it('vim.lsp.start does not reuse client when root_dir callbacks differ', function()",
            "html_url": "https://github.com/neovim/neovim/pull/36071#discussion_r2423116325",
            "id": 2423116325,
            "line": 1992,
            "node_id": "PRRC_kwDOAPphoM6QbdIl",
            "original_commit_id": "2fa0caf4b74170bb5ea019da06c3f7d5f3fba8b8",
            "original_line": 1992,
            "original_position": 49,
            "original_start_line": null,
            "path": "test/functional/plugin/lsp_spec.lua",
            "position": 49,
            "pull_request_review_id": 3327567689,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/36071",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423116325/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-10-11T20:11:58Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423116325",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/36071#discussion_r2423172883"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/36071"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423172883"
                }
            },
            "author_association": "MEMBER",
            "body": "forgot `return` here. i will fix this in a push.",
            "commit_id": "2fa0caf4b74170bb5ea019da06c3f7d5f3fba8b8",
            "created_at": "2025-10-11T22:19:12Z",
            "diff_hunk": "@@ -89,10 +89,31 @@ local function check_active_clients()\n         end\n         dirs_info = ('- Workspace folders:\\n    %s'):format(table.concat(wfolders, '\\n    '))\n       else\n-        dirs_info = string.format(\n-          '- Root directory: %s',\n-          client.root_dir and vim.fn.fnamemodify(client.root_dir, ':~')\n-        ) or nil\n+        local root_dirs = {} ---@type string[]\n+        if type(client.root_dir) == 'string' then\n+          table.insert(root_dirs, client.root_dir --[[@as string]])\n+        elseif type(client.root_dir) == 'function' then\n+          for buf, _ in pairs(client.attached_buffers) do\n+            client.root_dir(buf, function(dir)\n+              if dir then\n+                table.insert(root_dirs, dir)\n+              end\n+            end)\n+          end\n+        end\n+        if #root_dirs == 1 then\n+          dirs_info = string.format('- Root directory: %s', vim.fn.fnamemodify(root_dirs[1], ':~'))\n+        elseif #root_dirs > 1 then\n+          dirs_info = string.format(\n+            '- Root directories:\\n    %s',\n+            table.concat(\n+              vim.iter(root_dirs):map(function(x)\n+                vim.fn.fnamemodify(x, ':~')",
            "html_url": "https://github.com/neovim/neovim/pull/36071#discussion_r2423172883",
            "id": 2423172883,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6Qbq8T",
            "original_commit_id": "2fa0caf4b74170bb5ea019da06c3f7d5f3fba8b8",
            "original_line": 111,
            "original_position": 27,
            "original_start_line": null,
            "path": "runtime/lua/vim/lsp/health.lua",
            "position": 1,
            "pull_request_review_id": 3327639995,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/36071",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423172883/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-10-11T22:19:12Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423172883",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/36071#discussion_r2423193725"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/36071"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423193725"
                }
            },
            "author_association": "MEMBER",
            "body": "if there are many `attached_buffers` all resolving to the same root, this will show many redundant root dirs.\n\ni will fix this in a push.",
            "commit_id": "2fa0caf4b74170bb5ea019da06c3f7d5f3fba8b8",
            "created_at": "2025-10-11T22:37:44Z",
            "diff_hunk": "@@ -89,10 +89,31 @@ local function check_active_clients()\n         end\n         dirs_info = ('- Workspace folders:\\n    %s'):format(table.concat(wfolders, '\\n    '))\n       else\n-        dirs_info = string.format(\n-          '- Root directory: %s',\n-          client.root_dir and vim.fn.fnamemodify(client.root_dir, ':~')\n-        ) or nil\n+        local root_dirs = {} ---@type string[]\n+        if type(client.root_dir) == 'string' then\n+          table.insert(root_dirs, client.root_dir --[[@as string]])\n+        elseif type(client.root_dir) == 'function' then\n+          for buf, _ in pairs(client.attached_buffers) do\n+            client.root_dir(buf, function(dir)",
            "html_url": "https://github.com/neovim/neovim/pull/36071#discussion_r2423193725",
            "id": 2423193725,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6QbwB9",
            "original_commit_id": "2fa0caf4b74170bb5ea019da06c3f7d5f3fba8b8",
            "original_line": 97,
            "original_position": 13,
            "original_start_line": 96,
            "path": "runtime/lua/vim/lsp/health.lua",
            "position": 1,
            "pull_request_review_id": 3327666049,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/36071",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423193725/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-10-11T22:37:44Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2423193725",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        }
    ],
    "comment_regular_data": [
        {
            "author_association": "MEMBER",
            "body": "@atusy you need to run `make doc` to update the text files.",
            "created_at": "2025-10-07T16:19:22Z",
            "html_url": "https://github.com/neovim/neovim/pull/36071#issuecomment-3377624942",
            "id": 3377624942,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36071",
            "node_id": "IC_kwDOAPphoM7JUndu",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3377624942/reactions"
            },
            "updated_at": "2025-10-07T16:19:22Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3377624942",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/62502207?v=4",
                "events_url": "https://api.github.com/users/MariaSolOs/events{/privacy}",
                "followers_url": "https://api.github.com/users/MariaSolOs/followers",
                "following_url": "https://api.github.com/users/MariaSolOs/following{/other_user}",
                "gists_url": "https://api.github.com/users/MariaSolOs/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/MariaSolOs",
                "id": 62502207,
                "login": "MariaSolOs",
                "node_id": "MDQ6VXNlcjYyNTAyMjA3",
                "organizations_url": "https://api.github.com/users/MariaSolOs/orgs",
                "received_events_url": "https://api.github.com/users/MariaSolOs/received_events",
                "repos_url": "https://api.github.com/users/MariaSolOs/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/MariaSolOs/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/MariaSolOs/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/MariaSolOs",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "thanks! I will",
            "created_at": "2025-10-07T16:19:38Z",
            "html_url": "https://github.com/neovim/neovim/pull/36071#issuecomment-3377625803",
            "id": 3377625803,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36071",
            "node_id": "IC_kwDOAPphoM7JUnrL",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3377625803/reactions"
            },
            "updated_at": "2025-10-07T16:19:38Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3377625803",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/30277794?v=4",
                "events_url": "https://api.github.com/users/atusy/events{/privacy}",
                "followers_url": "https://api.github.com/users/atusy/followers",
                "following_url": "https://api.github.com/users/atusy/following{/other_user}",
                "gists_url": "https://api.github.com/users/atusy/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/atusy",
                "id": 30277794,
                "login": "atusy",
                "node_id": "MDQ6VXNlcjMwMjc3Nzk0",
                "organizations_url": "https://api.github.com/users/atusy/orgs",
                "received_events_url": "https://api.github.com/users/atusy/received_events",
                "repos_url": "https://api.github.com/users/atusy/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/atusy/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/atusy/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/atusy",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I also need to fix type inconsistencies...\r\n\r\nI will make some time later.\r\n\r\n```\r\n  local config_folders = lsp._get_workspace_folders(config.workspace_folders or config.root_dir)\r\n```",
            "created_at": "2025-10-07T16:32:08Z",
            "html_url": "https://github.com/neovim/neovim/pull/36071#issuecomment-3377674538",
            "id": 3377674538,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36071",
            "node_id": "IC_kwDOAPphoM7JUzkq",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3377674538/reactions"
            },
            "updated_at": "2025-10-07T16:32:08Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3377674538",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/30277794?v=4",
                "events_url": "https://api.github.com/users/atusy/events{/privacy}",
                "followers_url": "https://api.github.com/users/atusy/followers",
                "following_url": "https://api.github.com/users/atusy/following{/other_user}",
                "gists_url": "https://api.github.com/users/atusy/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/atusy",
                "id": 30277794,
                "login": "atusy",
                "node_id": "MDQ6VXNlcjMwMjc3Nzk0",
                "organizations_url": "https://api.github.com/users/atusy/orgs",
                "received_events_url": "https://api.github.com/users/atusy/received_events",
                "repos_url": "https://api.github.com/users/atusy/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/atusy/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/atusy/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/atusy",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Okay, seems like everything is clear.",
            "created_at": "2025-10-08T16:01:00Z",
            "html_url": "https://github.com/neovim/neovim/pull/36071#issuecomment-3382242824",
            "id": 3382242824,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36071",
            "node_id": "IC_kwDOAPphoM7JmO4I",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3382242824/reactions"
            },
            "updated_at": "2025-10-08T16:01:00Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3382242824",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/30277794?v=4",
                "events_url": "https://api.github.com/users/atusy/events{/privacy}",
                "followers_url": "https://api.github.com/users/atusy/followers",
                "following_url": "https://api.github.com/users/atusy/following{/other_user}",
                "gists_url": "https://api.github.com/users/atusy/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/atusy",
                "id": 30277794,
                "login": "atusy",
                "node_id": "MDQ6VXNlcjMwMjc3Nzk0",
                "organizations_url": "https://api.github.com/users/atusy/orgs",
                "received_events_url": "https://api.github.com/users/atusy/received_events",
                "repos_url": "https://api.github.com/users/atusy/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/atusy/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/atusy/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/atusy",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Are you able to write a test to exercise this",
            "created_at": "2025-10-08T20:11:01Z",
            "html_url": "https://github.com/neovim/neovim/pull/36071#issuecomment-3383061142",
            "id": 3383061142,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36071",
            "node_id": "IC_kwDOAPphoM7JpWqW",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3383061142/reactions"
            },
            "updated_at": "2025-10-08T20:11:01Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3383061142",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I'll try",
            "created_at": "2025-10-08T23:50:35Z",
            "html_url": "https://github.com/neovim/neovim/pull/36071#issuecomment-3383583216",
            "id": 3383583216,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36071",
            "node_id": "IC_kwDOAPphoM7JrWHw",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3383583216/reactions"
            },
            "updated_at": "2025-10-08T23:50:35Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3383583216",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/30277794?v=4",
                "events_url": "https://api.github.com/users/atusy/events{/privacy}",
                "followers_url": "https://api.github.com/users/atusy/followers",
                "following_url": "https://api.github.com/users/atusy/following{/other_user}",
                "gists_url": "https://api.github.com/users/atusy/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/atusy",
                "id": 30277794,
                "login": "atusy",
                "node_id": "MDQ6VXNlcjMwMjc3Nzk0",
                "organizations_url": "https://api.github.com/users/atusy/orgs",
                "received_events_url": "https://api.github.com/users/atusy/received_events",
                "repos_url": "https://api.github.com/users/atusy/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/atusy/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/atusy/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/atusy",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "@justinmk \r\nI added test cases to `vim.lsp.start` which relies on the unexported `_get_workspace_folder`.",
            "created_at": "2025-10-09T01:39:36Z",
            "html_url": "https://github.com/neovim/neovim/pull/36071#issuecomment-3383747446",
            "id": 3383747446,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36071",
            "node_id": "IC_kwDOAPphoM7Jr-N2",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3383747446/reactions"
            },
            "updated_at": "2025-10-09T01:39:36Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3383747446",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/30277794?v=4",
                "events_url": "https://api.github.com/users/atusy/events{/privacy}",
                "followers_url": "https://api.github.com/users/atusy/followers",
                "following_url": "https://api.github.com/users/atusy/following{/other_user}",
                "gists_url": "https://api.github.com/users/atusy/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/atusy",
                "id": 30277794,
                "login": "atusy",
                "node_id": "MDQ6VXNlcjMwMjc3Nzk0",
                "organizations_url": "https://api.github.com/users/atusy/orgs",
                "received_events_url": "https://api.github.com/users/atusy/received_events",
                "repos_url": "https://api.github.com/users/atusy/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/atusy/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/atusy/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/atusy",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "thanks a lot!",
            "created_at": "2025-10-12T00:04:36Z",
            "html_url": "https://github.com/neovim/neovim/pull/36071#issuecomment-3393750886",
            "id": 3393750886,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36071",
            "node_id": "IC_kwDOAPphoM7KSIdm",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3393750886/reactions"
            },
            "updated_at": "2025-10-12T00:04:36Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3393750886",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/30277794?v=4",
                "events_url": "https://api.github.com/users/atusy/events{/privacy}",
                "followers_url": "https://api.github.com/users/atusy/followers",
                "following_url": "https://api.github.com/users/atusy/following{/other_user}",
                "gists_url": "https://api.github.com/users/atusy/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/atusy",
                "id": 30277794,
                "login": "atusy",
                "node_id": "MDQ6VXNlcjMwMjc3Nzk0",
                "organizations_url": "https://api.github.com/users/atusy/orgs",
                "received_events_url": "https://api.github.com/users/atusy/received_events",
                "repos_url": "https://api.github.com/users/atusy/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/atusy/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/atusy/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/atusy",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Isn't the annotation change sort of wrong?\r\n\r\nWhile `lsp.config()` can handle a `root_dir` as a function (`vim.lsp.Config`), once the client is initialized and started it _must_ be resolved, because it gets used. So `vim.lsp.ClientConfig` doesn't have to support the function case.\r\n\r\nResolving happens in:\r\n\r\nhttps://github.com/neovim/neovim/blob/c9b74f8b7e3813763d2ada6a4b3ea75ba8960cd8/runtime/lua/vim/lsp.lua?plain=1#L503-L508\r\n\r\nWith this change it is implied that the `root_dir` on a `vim.lsp.Client`  can also be a function, which is unnecessary and would also be a breaking change.",
            "created_at": "2025-10-12T05:47:19Z",
            "html_url": "https://github.com/neovim/neovim/pull/36071#issuecomment-3393957909",
            "id": 3393957909,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36071",
            "node_id": "IC_kwDOAPphoM7KS7AV",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3393957909/reactions"
            },
            "updated_at": "2025-10-12T05:52:51Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3393957909",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/38700?v=4",
                "events_url": "https://api.github.com/users/mfussenegger/events{/privacy}",
                "followers_url": "https://api.github.com/users/mfussenegger/followers",
                "following_url": "https://api.github.com/users/mfussenegger/following{/other_user}",
                "gists_url": "https://api.github.com/users/mfussenegger/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mfussenegger",
                "id": 38700,
                "login": "mfussenegger",
                "node_id": "MDQ6VXNlcjM4NzAw",
                "organizations_url": "https://api.github.com/users/mfussenegger/orgs",
                "received_events_url": "https://api.github.com/users/mfussenegger/received_events",
                "repos_url": "https://api.github.com/users/mfussenegger/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mfussenegger/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mfussenegger/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mfussenegger",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> once the client is initialized and started it _must_ be resolved, because it gets used.\r\n\r\ntrue, and very important. \r\nnow I am wondering about other parts of this entire PR.",
            "created_at": "2025-10-12T06:57:48Z",
            "html_url": "https://github.com/neovim/neovim/pull/36071#issuecomment-3393999706",
            "id": 3393999706,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36071",
            "node_id": "IC_kwDOAPphoM7KTFNa",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3393999706/reactions"
            },
            "updated_at": "2025-10-12T06:57:48Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3393999706",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> now I am wondering about other parts of this entire PR.\r\n\r\nOn a closer look, none of the changes here make sense to me but maybe I'm missing the problem",
            "created_at": "2025-10-12T09:20:48Z",
            "html_url": "https://github.com/neovim/neovim/pull/36071#issuecomment-3394097004",
            "id": 3394097004,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36071",
            "node_id": "IC_kwDOAPphoM7KTc9s",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3394097004/reactions"
            },
            "updated_at": "2025-10-12T09:20:48Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3394097004",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/38700?v=4",
                "events_url": "https://api.github.com/users/mfussenegger/events{/privacy}",
                "followers_url": "https://api.github.com/users/mfussenegger/followers",
                "following_url": "https://api.github.com/users/mfussenegger/following{/other_user}",
                "gists_url": "https://api.github.com/users/mfussenegger/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mfussenegger",
                "id": 38700,
                "login": "mfussenegger",
                "node_id": "MDQ6VXNlcjM4NzAw",
                "organizations_url": "https://api.github.com/users/mfussenegger/orgs",
                "received_events_url": "https://api.github.com/users/mfussenegger/received_events",
                "repos_url": "https://api.github.com/users/mfussenegger/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mfussenegger/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mfussenegger/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mfussenegger",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "The change I made is related to switching code formatters per project.\r\nI will explan more later, although my explanation may not justify the change. I mean there might be an alternative.",
            "created_at": "2025-10-12T11:30:26Z",
            "html_url": "https://github.com/neovim/neovim/pull/36071#issuecomment-3394207908",
            "id": 3394207908,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36071",
            "node_id": "IC_kwDOAPphoM7KT4Ck",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3394207908/reactions"
            },
            "updated_at": "2025-10-12T11:30:26Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3394207908",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/30277794?v=4",
                "events_url": "https://api.github.com/users/atusy/events{/privacy}",
                "followers_url": "https://api.github.com/users/atusy/followers",
                "following_url": "https://api.github.com/users/atusy/following{/other_user}",
                "gists_url": "https://api.github.com/users/atusy/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/atusy",
                "id": 30277794,
                "login": "atusy",
                "node_id": "MDQ6VXNlcjMwMjc3Nzk0",
                "organizations_url": "https://api.github.com/users/atusy/orgs",
                "received_events_url": "https://api.github.com/users/atusy/received_events",
                "repos_url": "https://api.github.com/users/atusy/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/atusy/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/atusy/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/atusy",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I think @mfussenegger 's suggestion make sense. `vim.lsp.Config.root_dir` should not be a function, and we should fix the case where `vim.lsp.Config.root_dir` becomes function.\r\n\r\nJust for clarifications, let me explain the backgrounds to open this PR.\r\n\r\nI am switching formatter by looking at files in the `root_dir`.\r\nRecently, `ts_ls` started to return `vim.lsp.Client` with `root_dir` as a function.\r\n\r\n```lua\r\n-- This used to be string|nil, but recently it became function.\r\nlocal root_dir = vim.lsp.get_clients({name = \"ts_ls\", bufnr = vim.api.nvim_get_current_buf()})[1].root_dir\r\n```\r\n\r\nI was surprised because LSP showed `vim.lsp.Client.root_dir` is not a function.\r\nThat is why I made a PR.\r\n",
            "created_at": "2025-10-14T17:44:25Z",
            "html_url": "https://github.com/neovim/neovim/pull/36071#issuecomment-3402972580",
            "id": 3402972580,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36071",
            "node_id": "IC_kwDOAPphoM7K1T2k",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3402972580/reactions"
            },
            "updated_at": "2025-10-14T17:44:25Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3402972580",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/30277794?v=4",
                "events_url": "https://api.github.com/users/atusy/events{/privacy}",
                "followers_url": "https://api.github.com/users/atusy/followers",
                "following_url": "https://api.github.com/users/atusy/following{/other_user}",
                "gists_url": "https://api.github.com/users/atusy/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/atusy",
                "id": 30277794,
                "login": "atusy",
                "node_id": "MDQ6VXNlcjMwMjc3Nzk0",
                "organizations_url": "https://api.github.com/users/atusy/orgs",
                "received_events_url": "https://api.github.com/users/atusy/received_events",
                "repos_url": "https://api.github.com/users/atusy/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/atusy/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/atusy/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/atusy",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> Recently, ts_ls started to return vim.lsp.Client with root_dir as a function.\r\n\r\nSounds like there is a call to `vim.lsp.start()` with a config where `root_dir` isn't resolved. That's not allowed.\r\nThe proper fix would be to tighten the validation to ensure it results in an error. ",
            "created_at": "2025-10-14T18:00:22Z",
            "html_url": "https://github.com/neovim/neovim/pull/36071#issuecomment-3403021253",
            "id": 3403021253,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36071",
            "node_id": "IC_kwDOAPphoM7K1fvF",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3403021253/reactions"
            },
            "updated_at": "2025-10-14T18:00:22Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3403021253",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/38700?v=4",
                "events_url": "https://api.github.com/users/mfussenegger/events{/privacy}",
                "followers_url": "https://api.github.com/users/mfussenegger/followers",
                "following_url": "https://api.github.com/users/mfussenegger/following{/other_user}",
                "gists_url": "https://api.github.com/users/mfussenegger/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mfussenegger",
                "id": 38700,
                "login": "mfussenegger",
                "node_id": "MDQ6VXNlcjM4NzAw",
                "organizations_url": "https://api.github.com/users/mfussenegger/orgs",
                "received_events_url": "https://api.github.com/users/mfussenegger/received_events",
                "repos_url": "https://api.github.com/users/mfussenegger/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mfussenegger/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mfussenegger/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mfussenegger",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "One thing to add here: We could change `vim.lsp.start()` to resolve `root_dir`. It feels a bit strange to me because the evaluation can't be deferred further but needs to happen right away but it would make the `vim.lsp.start(vim.lsp.config.myserver)` use-case a bit more convenient. So far users need to do something like this (untested):\r\n\r\n\r\n```lua\r\nlocal conf = vim.lsp.config.myserver\r\nif type(conf.root_dir) == \"function\" then\r\n  conf.root_dir(bufnr, function(root_dir)\r\n    conf.root_dir = root_dir\r\n    vim.lsp.start(conf)\r\n  end)\r\nelse\r\n  vim.lsp.start(conf)\r\nend\r\n```\r\n\r\n\r\nWhat we shouldn't do because it is breaking is the example you gave with:\r\n\r\n```lua\r\n-- This used to be string|nil, but recently it became function.\r\nlocal root_dir = vim.lsp.get_clients({name = \"ts_ls\", bufnr = vim.api.nvim_get_current_buf()})[1].root_dir\r\n```\r\n\r\nThe exposed `root_dir` from the client must not become a function to avoid breaking plugins which use the root_dir property. (And also because it would be nonsense to have to re-evaluate it on each use when it was already evaluated)\r\n\r\n\r\n\r\nBut there's also still in the air to revert `root_dir` being a function on vim.lsp.Config altogether, and instead make the whole config a function, then you'd have:\r\n\r\n\r\n```lua\r\nlocal conf = vim.lsp.config.myserver\r\nif type(conf) == \"function\" then\r\n  conf(bufnr, function(fullconf)\r\n    vim.lsp.start(fullconf)\r\n  end)\r\nelse\r\n  vim.lsp.start(conf)\r\nend\r\n```\r\n\r\nOr maybe something like:\r\n\r\n```lua\r\nvim.lsp.get_config(function(conf)\r\n  vim.lsp.start(conf)\r\nend)\r\n```\r\n",
            "created_at": "2025-10-15T05:18:22Z",
            "html_url": "https://github.com/neovim/neovim/pull/36071#issuecomment-3404560028",
            "id": 3404560028,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36071",
            "node_id": "IC_kwDOAPphoM7K7Xac",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3404560028/reactions"
            },
            "updated_at": "2025-10-15T05:18:22Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3404560028",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/38700?v=4",
                "events_url": "https://api.github.com/users/mfussenegger/events{/privacy}",
                "followers_url": "https://api.github.com/users/mfussenegger/followers",
                "following_url": "https://api.github.com/users/mfussenegger/following{/other_user}",
                "gists_url": "https://api.github.com/users/mfussenegger/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mfussenegger",
                "id": 38700,
                "login": "mfussenegger",
                "node_id": "MDQ6VXNlcjM4NzAw",
                "organizations_url": "https://api.github.com/users/mfussenegger/orgs",
                "received_events_url": "https://api.github.com/users/mfussenegger/received_events",
                "repos_url": "https://api.github.com/users/mfussenegger/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mfussenegger/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mfussenegger/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mfussenegger",
                "user_view_type": "public"
            }
        }
    ],
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/36071/comments",
    "commits_url": "https://api.github.com/repos/neovim/neovim/pulls/36071/commits",
    "created_at": "2025-10-07T15:54:13Z",
    "diff_url": "https://github.com/neovim/neovim/pull/36071.diff",
    "draft": false,
    "head": {
        "label": "atusy:fix-lsp-config-root-dir",
        "ref": "fix-lsp-config-root-dir",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/atusy/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/atusy/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/atusy/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/atusy/neovim/branches{/branch}",
            "clone_url": "https://github.com/atusy/neovim.git",
            "collaborators_url": "https://api.github.com/repos/atusy/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/atusy/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/atusy/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/atusy/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/atusy/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/atusy/neovim/contributors",
            "created_at": "2022-04-21T01:14:27Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/atusy/neovim/deployments",
            "description": "Vim-fork focused on extensibility and usability",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/atusy/neovim/downloads",
            "events_url": "https://api.github.com/repos/atusy/neovim/events",
            "fork": true,
            "forks": 0,
            "forks_count": 0,
            "forks_url": "https://api.github.com/repos/atusy/neovim/forks",
            "full_name": "atusy/neovim",
            "git_commits_url": "https://api.github.com/repos/atusy/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/atusy/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/atusy/neovim/git/tags{/sha}",
            "git_url": "git://github.com/atusy/neovim.git",
            "has_discussions": false,
            "has_downloads": true,
            "has_issues": false,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://neovim.io",
            "hooks_url": "https://api.github.com/repos/atusy/neovim/hooks",
            "html_url": "https://github.com/atusy/neovim",
            "id": 483863958,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/atusy/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/atusy/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/atusy/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/atusy/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/atusy/neovim/labels{/name}",
            "language": null,
            "languages_url": "https://api.github.com/repos/atusy/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/atusy/neovim/merges",
            "milestones_url": "https://api.github.com/repos/atusy/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "R_kgDOHNctlg",
            "notifications_url": "https://api.github.com/repos/atusy/neovim/notifications{?since,all,participating}",
            "open_issues": 0,
            "open_issues_count": 0,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/30277794?v=4",
                "events_url": "https://api.github.com/users/atusy/events{/privacy}",
                "followers_url": "https://api.github.com/users/atusy/followers",
                "following_url": "https://api.github.com/users/atusy/following{/other_user}",
                "gists_url": "https://api.github.com/users/atusy/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/atusy",
                "id": 30277794,
                "login": "atusy",
                "node_id": "MDQ6VXNlcjMwMjc3Nzk0",
                "organizations_url": "https://api.github.com/users/atusy/orgs",
                "received_events_url": "https://api.github.com/users/atusy/received_events",
                "repos_url": "https://api.github.com/users/atusy/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/atusy/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/atusy/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/atusy",
                "user_view_type": "public"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/atusy/neovim/pulls{/number}",
            "pushed_at": "2025-10-11T22:55:49Z",
            "releases_url": "https://api.github.com/repos/atusy/neovim/releases{/id}",
            "size": 337577,
            "ssh_url": "git@github.com:atusy/neovim.git",
            "stargazers_count": 0,
            "stargazers_url": "https://api.github.com/repos/atusy/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/atusy/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/atusy/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/atusy/neovim/subscription",
            "svn_url": "https://github.com/atusy/neovim",
            "tags_url": "https://api.github.com/repos/atusy/neovim/tags",
            "teams_url": "https://api.github.com/repos/atusy/neovim/teams",
            "topics": [],
            "trees_url": "https://api.github.com/repos/atusy/neovim/git/trees{/sha}",
            "updated_at": "2022-04-21T01:11:40Z",
            "url": "https://api.github.com/repos/atusy/neovim",
            "visibility": "public",
            "watchers": 0,
            "watchers_count": 0,
            "web_commit_signoff_required": false
        },
        "sha": "ff121a240d60141fc3d8126c7907da46bf906f39",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/30277794?v=4",
            "events_url": "https://api.github.com/users/atusy/events{/privacy}",
            "followers_url": "https://api.github.com/users/atusy/followers",
            "following_url": "https://api.github.com/users/atusy/following{/other_user}",
            "gists_url": "https://api.github.com/users/atusy/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/atusy",
            "id": 30277794,
            "login": "atusy",
            "node_id": "MDQ6VXNlcjMwMjc3Nzk0",
            "organizations_url": "https://api.github.com/users/atusy/orgs",
            "received_events_url": "https://api.github.com/users/atusy/received_events",
            "repos_url": "https://api.github.com/users/atusy/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/atusy/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/atusy/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/atusy",
            "user_view_type": "public"
        }
    },
    "html_url": "https://github.com/neovim/neovim/pull/36071",
    "id": 2894500290,
    "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36071",
    "labels": [
        {
            "color": "c5def5",
            "default": false,
            "description": null,
            "id": 662566370,
            "name": "lsp",
            "node_id": "MDU6TGFiZWw2NjI1NjYzNzA=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/lsp"
        }
    ],
    "locked": false,
    "merge_commit_sha": "97ab24b9c7d9327740f0692f8076fed5737a52dc",
    "merged_at": "2025-10-11T23:01:06Z",
    "milestone": null,
    "node_id": "PR_kwDOAPphoM6shpHC",
    "number": 36071,
    "patch_url": "https://github.com/neovim/neovim/pull/36071.patch",
    "requested_reviewers": [],
    "requested_teams": [],
    "review_comment_url": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}",
    "review_comments_url": "https://api.github.com/repos/neovim/neovim/pulls/36071/comments",
    "state": "closed",
    "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/ff121a240d60141fc3d8126c7907da46bf906f39",
    "title": "[reverted] fix(lsp): should support vim.lsp.Config.root_dir as `fun`, not only `string|nil`",
    "updated_at": "2025-10-15T05:18:22Z",
    "url": "https://api.github.com/repos/neovim/neovim/pulls/36071",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/30277794?v=4",
        "events_url": "https://api.github.com/users/atusy/events{/privacy}",
        "followers_url": "https://api.github.com/users/atusy/followers",
        "following_url": "https://api.github.com/users/atusy/following{/other_user}",
        "gists_url": "https://api.github.com/users/atusy/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/atusy",
        "id": 30277794,
        "login": "atusy",
        "node_id": "MDQ6VXNlcjMwMjc3Nzk0",
        "organizations_url": "https://api.github.com/users/atusy/orgs",
        "received_events_url": "https://api.github.com/users/atusy/received_events",
        "repos_url": "https://api.github.com/users/atusy/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/atusy/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/atusy/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/atusy",
        "user_view_type": "public"
    }
}