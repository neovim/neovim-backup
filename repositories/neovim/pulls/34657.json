{
    "_links": {
        "comments": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/34657/comments"
        },
        "commits": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/34657/commits"
        },
        "html": {
            "href": "https://github.com/neovim/neovim/pull/34657"
        },
        "issue": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/34657"
        },
        "review_comment": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}"
        },
        "review_comments": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/34657/comments"
        },
        "self": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/34657"
        },
        "statuses": {
            "href": "https://api.github.com/repos/neovim/neovim/statuses/87cd6847c4a2d24bd02ffa3989acda8cbb3cb7b5"
        }
    },
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "FIRST_TIME_CONTRIBUTOR",
    "auto_merge": null,
    "base": {
        "label": "neovim:master",
        "ref": "master",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/neovim/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/neovim/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/neovim/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/neovim/neovim/branches{/branch}",
            "clone_url": "https://github.com/neovim/neovim.git",
            "collaborators_url": "https://api.github.com/repos/neovim/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/neovim/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/neovim/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/neovim/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/neovim/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/neovim/neovim/contributors",
            "created_at": "2014-01-31T13:39:22Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/neovim/neovim/deployments",
            "description": "Vim-fork focused on extensibility and usability",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/neovim/neovim/downloads",
            "events_url": "https://api.github.com/repos/neovim/neovim/events",
            "fork": false,
            "forks": 6150,
            "forks_count": 6150,
            "forks_url": "https://api.github.com/repos/neovim/neovim/forks",
            "full_name": "neovim/neovim",
            "git_commits_url": "https://api.github.com/repos/neovim/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/neovim/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/neovim/neovim/git/tags{/sha}",
            "git_url": "git://github.com/neovim/neovim.git",
            "has_discussions": true,
            "has_downloads": true,
            "has_issues": true,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://neovim.io",
            "hooks_url": "https://api.github.com/repos/neovim/neovim/hooks",
            "html_url": "https://github.com/neovim/neovim",
            "id": 16408992,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/neovim/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/neovim/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/neovim/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/neovim/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/neovim/neovim/labels{/name}",
            "language": "Vim Script",
            "languages_url": "https://api.github.com/repos/neovim/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/neovim/neovim/merges",
            "milestones_url": "https://api.github.com/repos/neovim/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "MDEwOlJlcG9zaXRvcnkxNjQwODk5Mg==",
            "notifications_url": "https://api.github.com/repos/neovim/neovim/notifications{?since,all,participating}",
            "open_issues": 1963,
            "open_issues_count": 1963,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
                "events_url": "https://api.github.com/users/neovim/events{/privacy}",
                "followers_url": "https://api.github.com/users/neovim/followers",
                "following_url": "https://api.github.com/users/neovim/following{/other_user}",
                "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/neovim",
                "id": 6471485,
                "login": "neovim",
                "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
                "organizations_url": "https://api.github.com/users/neovim/orgs",
                "received_events_url": "https://api.github.com/users/neovim/received_events",
                "repos_url": "https://api.github.com/users/neovim/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
                "type": "Organization",
                "url": "https://api.github.com/users/neovim",
                "user_view_type": "public"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/neovim/neovim/pulls{/number}",
            "pushed_at": "2025-06-30T23:58:06Z",
            "releases_url": "https://api.github.com/repos/neovim/neovim/releases{/id}",
            "size": 330464,
            "ssh_url": "git@github.com:neovim/neovim.git",
            "stargazers_count": 90708,
            "stargazers_url": "https://api.github.com/repos/neovim/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/neovim/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/neovim/neovim/subscription",
            "svn_url": "https://github.com/neovim/neovim",
            "tags_url": "https://api.github.com/repos/neovim/neovim/tags",
            "teams_url": "https://api.github.com/repos/neovim/neovim/teams",
            "topics": [
                "api",
                "c",
                "lua",
                "neovim",
                "nvim",
                "text-editor",
                "vim"
            ],
            "trees_url": "https://api.github.com/repos/neovim/neovim/git/trees{/sha}",
            "updated_at": "2025-07-01T02:27:30Z",
            "url": "https://api.github.com/repos/neovim/neovim",
            "visibility": "public",
            "watchers": 90708,
            "watchers_count": 90708,
            "web_commit_signoff_required": false
        },
        "sha": "d6d1bfd20da05e8bd40441ecdc0ac75af66f77eb",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
            "events_url": "https://api.github.com/users/neovim/events{/privacy}",
            "followers_url": "https://api.github.com/users/neovim/followers",
            "following_url": "https://api.github.com/users/neovim/following{/other_user}",
            "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/neovim",
            "id": 6471485,
            "login": "neovim",
            "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
            "organizations_url": "https://api.github.com/users/neovim/orgs",
            "received_events_url": "https://api.github.com/users/neovim/received_events",
            "repos_url": "https://api.github.com/users/neovim/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
            "type": "Organization",
            "url": "https://api.github.com/users/neovim",
            "user_view_type": "public"
        }
    },
    "body": "Make `vim.iter():take()` and `vim.iter():skip()`\r\noptionally accept predicates to enable takewhile\r\nand skipwhile patterns used in functional\r\nprogramming. #33202\r\n\r\n<!--\r\n  Thank you for contributing to Neovim!\r\n  If this is your first time, check out https://github.com/neovim/neovim/blob/master/CONTRIBUTING.md#pull-requests-prs\r\n  for our PR guidelines.\r\n-->\r\n",
    "closed_at": null,
    "comment_data": [
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34657#discussion_r2169116839"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34657"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2169116839"
                }
            },
            "author_association": "MEMBER",
            "body": "This is not quite right because `next()` can return multiple values. So you could pack it into a table first, and then unpack it. But this is pretty bad for performance. You'll note that the implementations of `filter()` and `map()` have a similar problem and they go to great contortions to address it.\r\n\r\nAlso we shouldn't pass the index to the function, we don't do that for any other method. If the user wants the index they can call `enumerate()` first which includes the index as one of the iterator values. Staying consistent makes everything more composable.\r\n\r\nSimple (but possibly slow) implementation:\r\n\r\n```suggestion\r\n    local val = pack(next(self))\r\n    if f(unpack(val)) then\r\n      return unpack(val)\r\n```\r\n\r\nFor a solution that avoids the `pack` and `unpack` dance you can look at what `map()` does.",
            "commit_id": "87cd6847c4a2d24bd02ffa3989acda8cbb3cb7b5",
            "created_at": "2025-06-26T13:45:43Z",
            "diff_hunk": "@@ -693,24 +694,54 @@ end\n --- -- 2\n --- it:next()\n --- -- nil\n+---\n+--- local function pred(x) return x < 2 end\n+--- local it2 = vim.iter({ 1, 2, 3, 4 }):take(pred)\n+--- it2:next()\n+--- -- 1\n+--- it2:next()\n+--- -- nil\n --- ```\n ---\n----@param n integer\n+---@generic A\n+---\n+---@param f integer|fun(a:A, i:integer):boolean Either the number if values to\n+---                                             take or a predicate which takes\n+---                                             a value and it's index.\n ---@return Iter\n-function Iter:take(n)\n+function Iter:take(f)\n+  if type(f) ~= 'function' then\n+    local n = f\n+    f = function(_, i)\n+      return i <= n\n+    end\n+  end\n+\n   local next = self.next\n-  local i = 0\n+  local i = 1\n   self.next = function()\n-    if i < n then\n+    local val = next(self)\n+    if f(val, i) then\n       i = i + 1\n-      return next(self)\n+      return val",
            "html_url": "https://github.com/neovim/neovim/pull/34657#discussion_r2169116839",
            "id": 2169116839,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6BShin",
            "original_commit_id": "0e3633e301f57c9472c485769ad55c17dfbd51e8",
            "original_line": 726,
            "original_position": 48,
            "original_start_line": 723,
            "path": "runtime/lua/vim/iter.lua",
            "position": null,
            "pull_request_review_id": 2962194609,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34657",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2169116839/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-06-26T13:45:47Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2169116839",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/8965202?v=4",
                "events_url": "https://api.github.com/users/gpanders/events{/privacy}",
                "followers_url": "https://api.github.com/users/gpanders/followers",
                "following_url": "https://api.github.com/users/gpanders/following{/other_user}",
                "gists_url": "https://api.github.com/users/gpanders/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/gpanders",
                "id": 8965202,
                "login": "gpanders",
                "node_id": "MDQ6VXNlcjg5NjUyMDI=",
                "organizations_url": "https://api.github.com/users/gpanders/orgs",
                "received_events_url": "https://api.github.com/users/gpanders/received_events",
                "repos_url": "https://api.github.com/users/gpanders/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/gpanders/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/gpanders/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/gpanders",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34657#discussion_r2171495007"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34657"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2171495007"
                }
            },
            "author_association": "NONE",
            "body": "Thanks for the feedback, I tried a solution without the packing/unpacking similar to `map()` .",
            "commit_id": "87cd6847c4a2d24bd02ffa3989acda8cbb3cb7b5",
            "created_at": "2025-06-27T10:09:12Z",
            "diff_hunk": "@@ -693,24 +694,54 @@ end\n --- -- 2\n --- it:next()\n --- -- nil\n+---\n+--- local function pred(x) return x < 2 end\n+--- local it2 = vim.iter({ 1, 2, 3, 4 }):take(pred)\n+--- it2:next()\n+--- -- 1\n+--- it2:next()\n+--- -- nil\n --- ```\n ---\n----@param n integer\n+---@generic A\n+---\n+---@param f integer|fun(a:A, i:integer):boolean Either the number if values to\n+---                                             take or a predicate which takes\n+---                                             a value and it's index.\n ---@return Iter\n-function Iter:take(n)\n+function Iter:take(f)\n+  if type(f) ~= 'function' then\n+    local n = f\n+    f = function(_, i)\n+      return i <= n\n+    end\n+  end\n+\n   local next = self.next\n-  local i = 0\n+  local i = 1\n   self.next = function()\n-    if i < n then\n+    local val = next(self)\n+    if f(val, i) then\n       i = i + 1\n-      return next(self)\n+      return val",
            "html_url": "https://github.com/neovim/neovim/pull/34657#discussion_r2171495007",
            "id": 2171495007,
            "in_reply_to_id": 2169116839,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6BbmJf",
            "original_commit_id": "0e3633e301f57c9472c485769ad55c17dfbd51e8",
            "original_line": 726,
            "original_position": 48,
            "original_start_line": 723,
            "path": "runtime/lua/vim/iter.lua",
            "position": null,
            "pull_request_review_id": 2965808567,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34657",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2171495007/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-06-27T10:09:13Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2171495007",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/73405010?v=4",
                "events_url": "https://api.github.com/users/mart-mihkel/events{/privacy}",
                "followers_url": "https://api.github.com/users/mart-mihkel/followers",
                "following_url": "https://api.github.com/users/mart-mihkel/following{/other_user}",
                "gists_url": "https://api.github.com/users/mart-mihkel/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mart-mihkel",
                "id": 73405010,
                "login": "mart-mihkel",
                "node_id": "MDQ6VXNlcjczNDA1MDEw",
                "organizations_url": "https://api.github.com/users/mart-mihkel/orgs",
                "received_events_url": "https://api.github.com/users/mart-mihkel/received_events",
                "repos_url": "https://api.github.com/users/mart-mihkel/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mart-mihkel/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mart-mihkel/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mart-mihkel",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34657#discussion_r2171659807"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34657"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2171659807"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n    Skips `n` values of an iterator pipeline, or all values satisfying a\r\n```",
            "commit_id": "87cd6847c4a2d24bd02ffa3989acda8cbb3cb7b5",
            "created_at": "2025-06-27T11:12:42Z",
            "diff_hunk": "@@ -4518,17 +4518,24 @@ Iter:rskip({n})                                                 *Iter:rskip()*\n         (`Iter`)\n \n Iter:skip({n})                                                   *Iter:skip()*\n-    Skips `n` values of an iterator pipeline.\n+    Skips `n` values of an iterator pipeline, or the first values satisfying a",
            "html_url": "https://github.com/neovim/neovim/pull/34657#discussion_r2171659807",
            "id": 2171659807,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6BcOYf",
            "original_commit_id": "8c6fc36e0a726a8af9c6dc8187c195c5844a04ec",
            "original_line": 4521,
            "original_position": 5,
            "original_start_line": null,
            "path": "runtime/doc/lua.txt",
            "position": null,
            "pull_request_review_id": 2966069469,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34657",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2171659807/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-06-27T11:12:42Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2171659807",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34657#discussion_r2171660068"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34657"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2171660068"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n    Transforms an iterator to yield only the first n values, or all\r\n```",
            "commit_id": "87cd6847c4a2d24bd02ffa3989acda8cbb3cb7b5",
            "created_at": "2025-06-27T11:12:53Z",
            "diff_hunk": "@@ -4546,7 +4553,8 @@ Iter:slice({first}, {last})                                     *Iter:slice()*\n         (`Iter`)\n \n Iter:take({n})                                                   *Iter:take()*\n-    Transforms an iterator to yield only the first n values.\n+    Transforms an iterator to yield only the first n values, or the first",
            "html_url": "https://github.com/neovim/neovim/pull/34657#discussion_r2171660068",
            "id": 2171660068,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6BcOck",
            "original_commit_id": "8c6fc36e0a726a8af9c6dc8187c195c5844a04ec",
            "original_line": 4556,
            "original_position": 32,
            "original_start_line": null,
            "path": "runtime/doc/lua.txt",
            "position": null,
            "pull_request_review_id": 2966069876,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34657",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2171660068/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-06-27T11:12:53Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2171660068",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34657#discussion_r2171667046"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34657"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2171667046"
                }
            },
            "author_association": "MEMBER",
            "body": "Does it simplify the code if the \"number\" case is implemented by setting `n` to a predicate? Same for skip().",
            "commit_id": "87cd6847c4a2d24bd02ffa3989acda8cbb3cb7b5",
            "created_at": "2025-06-27T11:15:36Z",
            "diff_hunk": "@@ -693,11 +694,35 @@ end\n --- -- 2\n --- it:next()\n --- -- nil\n+---\n+--- local function pred(x) return x < 2 end\n+--- local it2 = vim.iter({ 1, 2, 3, 4 }):take(pred)\n+--- it2:next()\n+--- -- 1\n+--- it2:next()\n+--- -- nil\n --- ```\n ---\n----@param n integer\n+---@param n integer|fun(...):boolean Number of values to take or a predicate.\n ---@return Iter\n function Iter:take(n)\n+  if type(n) == 'function' then",
            "html_url": "https://github.com/neovim/neovim/pull/34657#discussion_r2171667046",
            "id": 2171667046,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6BcQJm",
            "original_commit_id": "8c6fc36e0a726a8af9c6dc8187c195c5844a04ec",
            "original_line": 709,
            "original_position": 27,
            "original_start_line": null,
            "path": "runtime/lua/vim/iter.lua",
            "position": null,
            "pull_request_review_id": 2966079213,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34657",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2171667046/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-06-27T11:16:27Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2171667046",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34657#discussion_r2171681438"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34657"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2171681438"
                }
            },
            "author_association": "MEMBER",
            "body": "it looks like the number case is supported (below), so why can't the predicate case be supported?",
            "commit_id": "87cd6847c4a2d24bd02ffa3989acda8cbb3cb7b5",
            "created_at": "2025-06-27T11:20:20Z",
            "diff_hunk": "@@ -782,11 +819,19 @@ end\n --- it:next()\n --- -- 9\n ---\n+--- local function pred(x) return x < 10 end\n+--- local it2 = vim.iter({ 3, 6, 9, 12 }):skip(pred)\n+--- it2:next()\n+--- -- 12\n --- ```\n ---\n----@param n number Number of values to skip.\n+---@param n integer|fun(...):boolean Number of values to skip or a predicate.\n ---@return Iter\n function Iter:skip(n)\n+  if type(n) == 'function' then\n+    error('skip() with predicate requires an array-like table')",
            "html_url": "https://github.com/neovim/neovim/pull/34657#discussion_r2171681438",
            "id": 2171681438,
            "line": 830,
            "node_id": "PRRC_kwDOAPphoM6BcTqe",
            "original_commit_id": "8c6fc36e0a726a8af9c6dc8187c195c5844a04ec",
            "original_line": 830,
            "original_position": 90,
            "original_start_line": null,
            "path": "runtime/lua/vim/iter.lua",
            "position": 98,
            "pull_request_review_id": 2966097124,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34657",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2171681438/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-06-27T11:20:20Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2171681438",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34657#discussion_r2171752366"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34657"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2171752366"
                }
            },
            "author_association": "NONE",
            "body": "We would need to evaluate the predicate with the next element, but we shouldn't advance the iterator if the predicate doesn't hold. Peek isn't implemented for dict-like tables:\r\n```lua\r\nfunction Iter:peek()\r\n  error('peek() requires an array-like table')\r\nend\r\n```",
            "commit_id": "87cd6847c4a2d24bd02ffa3989acda8cbb3cb7b5",
            "created_at": "2025-06-27T11:46:18Z",
            "diff_hunk": "@@ -782,11 +819,19 @@ end\n --- it:next()\n --- -- 9\n ---\n+--- local function pred(x) return x < 10 end\n+--- local it2 = vim.iter({ 3, 6, 9, 12 }):skip(pred)\n+--- it2:next()\n+--- -- 12\n --- ```\n ---\n----@param n number Number of values to skip.\n+---@param n integer|fun(...):boolean Number of values to skip or a predicate.\n ---@return Iter\n function Iter:skip(n)\n+  if type(n) == 'function' then\n+    error('skip() with predicate requires an array-like table')",
            "html_url": "https://github.com/neovim/neovim/pull/34657#discussion_r2171752366",
            "id": 2171752366,
            "in_reply_to_id": 2171681438,
            "line": 830,
            "node_id": "PRRC_kwDOAPphoM6Bck-u",
            "original_commit_id": "8c6fc36e0a726a8af9c6dc8187c195c5844a04ec",
            "original_line": 830,
            "original_position": 90,
            "original_start_line": null,
            "path": "runtime/lua/vim/iter.lua",
            "position": 98,
            "pull_request_review_id": 2966194329,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34657",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2171752366/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-06-27T11:46:18Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2171752366",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/73405010?v=4",
                "events_url": "https://api.github.com/users/mart-mihkel/events{/privacy}",
                "followers_url": "https://api.github.com/users/mart-mihkel/followers",
                "following_url": "https://api.github.com/users/mart-mihkel/following{/other_user}",
                "gists_url": "https://api.github.com/users/mart-mihkel/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mart-mihkel",
                "id": 73405010,
                "login": "mart-mihkel",
                "node_id": "MDQ6VXNlcjczNDA1MDEw",
                "organizations_url": "https://api.github.com/users/mart-mihkel/orgs",
                "received_events_url": "https://api.github.com/users/mart-mihkel/received_events",
                "repos_url": "https://api.github.com/users/mart-mihkel/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mart-mihkel/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mart-mihkel/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mart-mihkel",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34657#discussion_r2171783252"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34657"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2171783252"
                }
            },
            "author_association": "MEMBER",
            "body": "oh, makes sense. worth mentioning in a 1-line comment here.",
            "commit_id": "87cd6847c4a2d24bd02ffa3989acda8cbb3cb7b5",
            "created_at": "2025-06-27T11:52:01Z",
            "diff_hunk": "@@ -782,11 +819,19 @@ end\n --- it:next()\n --- -- 9\n ---\n+--- local function pred(x) return x < 10 end\n+--- local it2 = vim.iter({ 3, 6, 9, 12 }):skip(pred)\n+--- it2:next()\n+--- -- 12\n --- ```\n ---\n----@param n number Number of values to skip.\n+---@param n integer|fun(...):boolean Number of values to skip or a predicate.\n ---@return Iter\n function Iter:skip(n)\n+  if type(n) == 'function' then\n+    error('skip() with predicate requires an array-like table')",
            "html_url": "https://github.com/neovim/neovim/pull/34657#discussion_r2171783252",
            "id": 2171783252,
            "in_reply_to_id": 2171681438,
            "line": 830,
            "node_id": "PRRC_kwDOAPphoM6BcshU",
            "original_commit_id": "8c6fc36e0a726a8af9c6dc8187c195c5844a04ec",
            "original_line": 830,
            "original_position": 90,
            "original_start_line": null,
            "path": "runtime/lua/vim/iter.lua",
            "position": 98,
            "pull_request_review_id": 2966223586,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34657",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2171783252/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-06-27T11:52:01Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2171783252",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34657#discussion_r2171897545"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34657"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2171897545"
                }
            },
            "author_association": "NONE",
            "body": "I cooked something up with\r\n```lua\r\n  local i = 0\r\n  local f = n\r\n  if type(n) ~= 'function' then\r\n    f = function()\r\n      return i < n\r\n    end\r\n  end\r\n```\r\nand the code is a bit shorter.\r\n\r\nFor the array iterator skip and take, I think the logic should stay separate because in the number case it can be done in O(1) time, but O(n) for the predicate case.",
            "commit_id": "87cd6847c4a2d24bd02ffa3989acda8cbb3cb7b5",
            "created_at": "2025-06-27T12:20:46Z",
            "diff_hunk": "@@ -693,11 +694,35 @@ end\n --- -- 2\n --- it:next()\n --- -- nil\n+---\n+--- local function pred(x) return x < 2 end\n+--- local it2 = vim.iter({ 1, 2, 3, 4 }):take(pred)\n+--- it2:next()\n+--- -- 1\n+--- it2:next()\n+--- -- nil\n --- ```\n ---\n----@param n integer\n+---@param n integer|fun(...):boolean Number of values to take or a predicate.\n ---@return Iter\n function Iter:take(n)\n+  if type(n) == 'function' then",
            "html_url": "https://github.com/neovim/neovim/pull/34657#discussion_r2171897545",
            "id": 2171897545,
            "in_reply_to_id": 2171667046,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6BdIbJ",
            "original_commit_id": "8c6fc36e0a726a8af9c6dc8187c195c5844a04ec",
            "original_line": 709,
            "original_position": 27,
            "original_start_line": null,
            "path": "runtime/lua/vim/iter.lua",
            "position": null,
            "pull_request_review_id": 2966359263,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34657",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2171897545/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-06-27T12:20:46Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2171897545",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/73405010?v=4",
                "events_url": "https://api.github.com/users/mart-mihkel/events{/privacy}",
                "followers_url": "https://api.github.com/users/mart-mihkel/followers",
                "following_url": "https://api.github.com/users/mart-mihkel/following{/other_user}",
                "gists_url": "https://api.github.com/users/mart-mihkel/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mart-mihkel",
                "id": 73405010,
                "login": "mart-mihkel",
                "node_id": "MDQ6VXNlcjczNDA1MDEw",
                "organizations_url": "https://api.github.com/users/mart-mihkel/orgs",
                "received_events_url": "https://api.github.com/users/mart-mihkel/received_events",
                "repos_url": "https://api.github.com/users/mart-mihkel/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mart-mihkel/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mart-mihkel/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mart-mihkel",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34657#discussion_r2173241235"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34657"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2173241235"
                }
            },
            "author_association": "MEMBER",
            "body": "These tests look good for testing the behavior on arrays. Can you also add some tests to cover the behavior for non-arrays (function iterators and other tables)?",
            "commit_id": "87cd6847c4a2d24bd02ffa3989acda8cbb3cb7b5",
            "created_at": "2025-06-28T13:16:05Z",
            "diff_hunk": "@@ -159,6 +159,38 @@ describe('vim.iter', function()\n       eq({}, vim.iter(q):skip(#q + 1):totable())\n     end\n \n+    do",
            "html_url": "https://github.com/neovim/neovim/pull/34657#discussion_r2173241235",
            "id": 2173241235,
            "line": 162,
            "node_id": "PRRC_kwDOAPphoM6BiQeT",
            "original_commit_id": "7edc742e13eb9a6b82c1b349d123bb603b6485e3",
            "original_line": 162,
            "original_position": 4,
            "original_start_line": null,
            "path": "test/functional/lua/iter_spec.lua",
            "position": 4,
            "pull_request_review_id": 2968544087,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34657",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2173241235/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-06-28T13:16:10Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2173241235",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/8965202?v=4",
                "events_url": "https://api.github.com/users/gpanders/events{/privacy}",
                "followers_url": "https://api.github.com/users/gpanders/followers",
                "following_url": "https://api.github.com/users/gpanders/following{/other_user}",
                "gists_url": "https://api.github.com/users/gpanders/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/gpanders",
                "id": 8965202,
                "login": "gpanders",
                "node_id": "MDQ6VXNlcjg5NjUyMDI=",
                "organizations_url": "https://api.github.com/users/gpanders/orgs",
                "received_events_url": "https://api.github.com/users/gpanders/received_events",
                "repos_url": "https://api.github.com/users/gpanders/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/gpanders/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/gpanders/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/gpanders",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34657#discussion_r2173793730"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34657"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2173793730"
                }
            },
            "author_association": "MEMBER",
            "body": "These are good -- can you do these for `skip` too?",
            "commit_id": "87cd6847c4a2d24bd02ffa3989acda8cbb3cb7b5",
            "created_at": "2025-06-29T15:18:34Z",
            "diff_hunk": "@@ -271,6 +319,24 @@ describe('vim.iter', function()\n       -- non-array iterators are consumed by take()\n       eq({}, it:take(2):totable())\n     end\n+\n+    do\n+      eq({ 'a', 'b', 'c', 'd' }, vim.iter(vim.gsplit('a|b|c|d', '|')):take(correct):totable())\n+      eq(\n+        { 'a', 'b', 'c' },\n+        vim\n+          .iter(vim.gsplit('a|b|c|d', '|'))\n+          :enumerate()\n+          :take(function(i, x)\n+            return i < 3 or x == 'c'\n+          end)\n+          :map(function(_, x)\n+            return x\n+          end)\n+          :totable()\n+      )\n+      eq({}, vim.iter(vim.gsplit('a|b|c|d', '|')):take(wrong):totable())",
            "html_url": "https://github.com/neovim/neovim/pull/34657#discussion_r2173793730",
            "id": 2173793730,
            "line": 338,
            "node_id": "PRRC_kwDOAPphoM6BkXXC",
            "original_commit_id": "2e0256c63f2b9fc5357cab1dcf3f760fb20e7d12",
            "original_line": 338,
            "original_position": 89,
            "original_start_line": 324,
            "path": "test/functional/lua/iter_spec.lua",
            "position": 89,
            "pull_request_review_id": 2969293645,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34657",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2173793730/reactions"
            },
            "side": "RIGHT",
            "start_line": 324,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-06-29T15:18:34Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2173793730",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/8965202?v=4",
                "events_url": "https://api.github.com/users/gpanders/events{/privacy}",
                "followers_url": "https://api.github.com/users/gpanders/followers",
                "following_url": "https://api.github.com/users/gpanders/following{/other_user}",
                "gists_url": "https://api.github.com/users/gpanders/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/gpanders",
                "id": 8965202,
                "login": "gpanders",
                "node_id": "MDQ6VXNlcjg5NjUyMDI=",
                "organizations_url": "https://api.github.com/users/gpanders/orgs",
                "received_events_url": "https://api.github.com/users/gpanders/received_events",
                "repos_url": "https://api.github.com/users/gpanders/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/gpanders/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/gpanders/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/gpanders",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34657#discussion_r2173833233"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34657"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2173833233"
                }
            },
            "author_association": "NONE",
            "body": "I made skip on non array-like tables raise an error, there's an explanation above.",
            "commit_id": "87cd6847c4a2d24bd02ffa3989acda8cbb3cb7b5",
            "created_at": "2025-06-29T17:13:25Z",
            "diff_hunk": "@@ -271,6 +319,24 @@ describe('vim.iter', function()\n       -- non-array iterators are consumed by take()\n       eq({}, it:take(2):totable())\n     end\n+\n+    do\n+      eq({ 'a', 'b', 'c', 'd' }, vim.iter(vim.gsplit('a|b|c|d', '|')):take(correct):totable())\n+      eq(\n+        { 'a', 'b', 'c' },\n+        vim\n+          .iter(vim.gsplit('a|b|c|d', '|'))\n+          :enumerate()\n+          :take(function(i, x)\n+            return i < 3 or x == 'c'\n+          end)\n+          :map(function(_, x)\n+            return x\n+          end)\n+          :totable()\n+      )\n+      eq({}, vim.iter(vim.gsplit('a|b|c|d', '|')):take(wrong):totable())",
            "html_url": "https://github.com/neovim/neovim/pull/34657#discussion_r2173833233",
            "id": 2173833233,
            "in_reply_to_id": 2173793730,
            "line": 338,
            "node_id": "PRRC_kwDOAPphoM6BkhAR",
            "original_commit_id": "2e0256c63f2b9fc5357cab1dcf3f760fb20e7d12",
            "original_line": 338,
            "original_position": 89,
            "original_start_line": 324,
            "path": "test/functional/lua/iter_spec.lua",
            "position": 89,
            "pull_request_review_id": 2969337854,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34657",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2173833233/reactions"
            },
            "side": "RIGHT",
            "start_line": 324,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-06-29T17:13:25Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2173833233",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/73405010?v=4",
                "events_url": "https://api.github.com/users/mart-mihkel/events{/privacy}",
                "followers_url": "https://api.github.com/users/mart-mihkel/followers",
                "following_url": "https://api.github.com/users/mart-mihkel/following{/other_user}",
                "gists_url": "https://api.github.com/users/mart-mihkel/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mart-mihkel",
                "id": 73405010,
                "login": "mart-mihkel",
                "node_id": "MDQ6VXNlcjczNDA1MDEw",
                "organizations_url": "https://api.github.com/users/mart-mihkel/orgs",
                "received_events_url": "https://api.github.com/users/mart-mihkel/received_events",
                "repos_url": "https://api.github.com/users/mart-mihkel/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mart-mihkel/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mart-mihkel/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mart-mihkel",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34657#discussion_r2173843759"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34657"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2173843759"
                }
            },
            "author_association": "MEMBER",
            "body": "Oh yes that’s right, thanks",
            "commit_id": "87cd6847c4a2d24bd02ffa3989acda8cbb3cb7b5",
            "created_at": "2025-06-29T17:47:44Z",
            "diff_hunk": "@@ -271,6 +319,24 @@ describe('vim.iter', function()\n       -- non-array iterators are consumed by take()\n       eq({}, it:take(2):totable())\n     end\n+\n+    do\n+      eq({ 'a', 'b', 'c', 'd' }, vim.iter(vim.gsplit('a|b|c|d', '|')):take(correct):totable())\n+      eq(\n+        { 'a', 'b', 'c' },\n+        vim\n+          .iter(vim.gsplit('a|b|c|d', '|'))\n+          :enumerate()\n+          :take(function(i, x)\n+            return i < 3 or x == 'c'\n+          end)\n+          :map(function(_, x)\n+            return x\n+          end)\n+          :totable()\n+      )\n+      eq({}, vim.iter(vim.gsplit('a|b|c|d', '|')):take(wrong):totable())",
            "html_url": "https://github.com/neovim/neovim/pull/34657#discussion_r2173843759",
            "id": 2173843759,
            "in_reply_to_id": 2173793730,
            "line": 338,
            "node_id": "PRRC_kwDOAPphoM6Bkjkv",
            "original_commit_id": "2e0256c63f2b9fc5357cab1dcf3f760fb20e7d12",
            "original_line": 338,
            "original_position": 89,
            "original_start_line": 324,
            "path": "test/functional/lua/iter_spec.lua",
            "position": 89,
            "pull_request_review_id": 2969357026,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34657",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2173843759/reactions"
            },
            "side": "RIGHT",
            "start_line": 324,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-06-29T17:47:44Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2173843759",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/8965202?v=4",
                "events_url": "https://api.github.com/users/gpanders/events{/privacy}",
                "followers_url": "https://api.github.com/users/gpanders/followers",
                "following_url": "https://api.github.com/users/gpanders/following{/other_user}",
                "gists_url": "https://api.github.com/users/gpanders/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/gpanders",
                "id": 8965202,
                "login": "gpanders",
                "node_id": "MDQ6VXNlcjg5NjUyMDI=",
                "organizations_url": "https://api.github.com/users/gpanders/orgs",
                "received_events_url": "https://api.github.com/users/gpanders/received_events",
                "repos_url": "https://api.github.com/users/gpanders/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/gpanders/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/gpanders/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/gpanders",
                "user_view_type": "public"
            }
        }
    ],
    "comment_regular_data": [
        {
            "author_association": "MEMBER",
            "body": "add an item in news.txt features section",
            "created_at": "2025-06-30T09:57:35Z",
            "html_url": "https://github.com/neovim/neovim/pull/34657#issuecomment-3018533144",
            "id": 3018533144,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34657",
            "node_id": "IC_kwDOAPphoM6z6ykY",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3018533144/reactions"
            },
            "updated_at": "2025-06-30T09:57:35Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3018533144",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        }
    ],
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/34657/comments",
    "commits_url": "https://api.github.com/repos/neovim/neovim/pulls/34657/commits",
    "created_at": "2025-06-26T09:51:19Z",
    "diff_url": "https://github.com/neovim/neovim/pull/34657.diff",
    "draft": false,
    "head": {
        "label": "mart-mihkel:iter-predicates",
        "ref": "iter-predicates",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/mart-mihkel/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/mart-mihkel/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/mart-mihkel/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/mart-mihkel/neovim/branches{/branch}",
            "clone_url": "https://github.com/mart-mihkel/neovim.git",
            "collaborators_url": "https://api.github.com/repos/mart-mihkel/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/mart-mihkel/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/mart-mihkel/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/mart-mihkel/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/mart-mihkel/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/mart-mihkel/neovim/contributors",
            "created_at": "2025-02-16T20:38:57Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/mart-mihkel/neovim/deployments",
            "description": "Vim-fork focused on extensibility and usability",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/mart-mihkel/neovim/downloads",
            "events_url": "https://api.github.com/repos/mart-mihkel/neovim/events",
            "fork": true,
            "forks": 0,
            "forks_count": 0,
            "forks_url": "https://api.github.com/repos/mart-mihkel/neovim/forks",
            "full_name": "mart-mihkel/neovim",
            "git_commits_url": "https://api.github.com/repos/mart-mihkel/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/mart-mihkel/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/mart-mihkel/neovim/git/tags{/sha}",
            "git_url": "git://github.com/mart-mihkel/neovim.git",
            "has_discussions": false,
            "has_downloads": true,
            "has_issues": false,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://neovim.io",
            "hooks_url": "https://api.github.com/repos/mart-mihkel/neovim/hooks",
            "html_url": "https://github.com/mart-mihkel/neovim",
            "id": 933852372,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/mart-mihkel/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/mart-mihkel/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/mart-mihkel/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/mart-mihkel/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/mart-mihkel/neovim/labels{/name}",
            "language": "Vim Script",
            "languages_url": "https://api.github.com/repos/mart-mihkel/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/mart-mihkel/neovim/merges",
            "milestones_url": "https://api.github.com/repos/mart-mihkel/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "R_kgDON6l01A",
            "notifications_url": "https://api.github.com/repos/mart-mihkel/neovim/notifications{?since,all,participating}",
            "open_issues": 0,
            "open_issues_count": 0,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/73405010?v=4",
                "events_url": "https://api.github.com/users/mart-mihkel/events{/privacy}",
                "followers_url": "https://api.github.com/users/mart-mihkel/followers",
                "following_url": "https://api.github.com/users/mart-mihkel/following{/other_user}",
                "gists_url": "https://api.github.com/users/mart-mihkel/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mart-mihkel",
                "id": 73405010,
                "login": "mart-mihkel",
                "node_id": "MDQ6VXNlcjczNDA1MDEw",
                "organizations_url": "https://api.github.com/users/mart-mihkel/orgs",
                "received_events_url": "https://api.github.com/users/mart-mihkel/received_events",
                "repos_url": "https://api.github.com/users/mart-mihkel/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mart-mihkel/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mart-mihkel/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mart-mihkel",
                "user_view_type": "public"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/mart-mihkel/neovim/pulls{/number}",
            "pushed_at": "2025-06-30T14:51:55Z",
            "releases_url": "https://api.github.com/repos/mart-mihkel/neovim/releases{/id}",
            "size": 320214,
            "ssh_url": "git@github.com:mart-mihkel/neovim.git",
            "stargazers_count": 0,
            "stargazers_url": "https://api.github.com/repos/mart-mihkel/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/mart-mihkel/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/mart-mihkel/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/mart-mihkel/neovim/subscription",
            "svn_url": "https://github.com/mart-mihkel/neovim",
            "tags_url": "https://api.github.com/repos/mart-mihkel/neovim/tags",
            "teams_url": "https://api.github.com/repos/mart-mihkel/neovim/teams",
            "topics": [],
            "trees_url": "https://api.github.com/repos/mart-mihkel/neovim/git/trees{/sha}",
            "updated_at": "2025-06-24T15:59:01Z",
            "url": "https://api.github.com/repos/mart-mihkel/neovim",
            "visibility": "public",
            "watchers": 0,
            "watchers_count": 0,
            "web_commit_signoff_required": false
        },
        "sha": "87cd6847c4a2d24bd02ffa3989acda8cbb3cb7b5",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/73405010?v=4",
            "events_url": "https://api.github.com/users/mart-mihkel/events{/privacy}",
            "followers_url": "https://api.github.com/users/mart-mihkel/followers",
            "following_url": "https://api.github.com/users/mart-mihkel/following{/other_user}",
            "gists_url": "https://api.github.com/users/mart-mihkel/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/mart-mihkel",
            "id": 73405010,
            "login": "mart-mihkel",
            "node_id": "MDQ6VXNlcjczNDA1MDEw",
            "organizations_url": "https://api.github.com/users/mart-mihkel/orgs",
            "received_events_url": "https://api.github.com/users/mart-mihkel/received_events",
            "repos_url": "https://api.github.com/users/mart-mihkel/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/mart-mihkel/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mart-mihkel/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/mart-mihkel",
            "user_view_type": "public"
        }
    },
    "html_url": "https://github.com/neovim/neovim/pull/34657",
    "id": 2620698198,
    "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34657",
    "labels": [
        {
            "color": "c5def5",
            "default": false,
            "description": "funtime",
            "id": 120251370,
            "name": "runtime",
            "node_id": "MDU6TGFiZWwxMjAyNTEzNzA=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/runtime"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "stdlib",
            "id": 573222693,
            "name": "lua",
            "node_id": "MDU6TGFiZWw1NzMyMjI2OTM=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/lua"
        }
    ],
    "locked": false,
    "merge_commit_sha": "0368a5147a05c5340546d70f1b245889dc4ad580",
    "merged_at": null,
    "milestone": null,
    "node_id": "PR_kwDOAPphoM6cNK5W",
    "number": 34657,
    "patch_url": "https://github.com/neovim/neovim/pull/34657.patch",
    "requested_reviewers": [],
    "requested_teams": [],
    "review_comment_url": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}",
    "review_comments_url": "https://api.github.com/repos/neovim/neovim/pulls/34657/comments",
    "state": "open",
    "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/87cd6847c4a2d24bd02ffa3989acda8cbb3cb7b5",
    "title": "feat(runtime): accept predicates in take and skip",
    "updated_at": "2025-06-30T14:51:56Z",
    "url": "https://api.github.com/repos/neovim/neovim/pulls/34657",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/73405010?v=4",
        "events_url": "https://api.github.com/users/mart-mihkel/events{/privacy}",
        "followers_url": "https://api.github.com/users/mart-mihkel/followers",
        "following_url": "https://api.github.com/users/mart-mihkel/following{/other_user}",
        "gists_url": "https://api.github.com/users/mart-mihkel/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/mart-mihkel",
        "id": 73405010,
        "login": "mart-mihkel",
        "node_id": "MDQ6VXNlcjczNDA1MDEw",
        "organizations_url": "https://api.github.com/users/mart-mihkel/orgs",
        "received_events_url": "https://api.github.com/users/mart-mihkel/received_events",
        "repos_url": "https://api.github.com/users/mart-mihkel/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/mart-mihkel/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/mart-mihkel/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/mart-mihkel",
        "user_view_type": "public"
    }
}