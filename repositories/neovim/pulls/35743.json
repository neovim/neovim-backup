{
    "_links": {
        "comments": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/35743/comments"
        },
        "commits": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/35743/commits"
        },
        "html": {
            "href": "https://github.com/neovim/neovim/pull/35743"
        },
        "issue": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/35743"
        },
        "review_comment": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}"
        },
        "review_comments": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/35743/comments"
        },
        "self": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/35743"
        },
        "statuses": {
            "href": "https://api.github.com/repos/neovim/neovim/statuses/1a664cd1e226760bc4f75640b5e42bd66f559bbe"
        }
    },
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "auto_merge": null,
    "base": {
        "label": "neovim:master",
        "ref": "master",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/neovim/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/neovim/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/neovim/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/neovim/neovim/branches{/branch}",
            "clone_url": "https://github.com/neovim/neovim.git",
            "collaborators_url": "https://api.github.com/repos/neovim/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/neovim/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/neovim/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/neovim/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/neovim/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/neovim/neovim/contributors",
            "created_at": "2014-01-31T13:39:22Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/neovim/neovim/deployments",
            "description": "Vim-fork focused on extensibility and usability",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/neovim/neovim/downloads",
            "events_url": "https://api.github.com/repos/neovim/neovim/events",
            "fork": false,
            "forks": 6392,
            "forks_count": 6392,
            "forks_url": "https://api.github.com/repos/neovim/neovim/forks",
            "full_name": "neovim/neovim",
            "git_commits_url": "https://api.github.com/repos/neovim/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/neovim/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/neovim/neovim/git/tags{/sha}",
            "git_url": "git://github.com/neovim/neovim.git",
            "has_discussions": true,
            "has_downloads": true,
            "has_issues": true,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://neovim.io",
            "hooks_url": "https://api.github.com/repos/neovim/neovim/hooks",
            "html_url": "https://github.com/neovim/neovim",
            "id": 16408992,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/neovim/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/neovim/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/neovim/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/neovim/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/neovim/neovim/labels{/name}",
            "language": "Vim Script",
            "languages_url": "https://api.github.com/repos/neovim/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/neovim/neovim/merges",
            "milestones_url": "https://api.github.com/repos/neovim/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "MDEwOlJlcG9zaXRvcnkxNjQwODk5Mg==",
            "notifications_url": "https://api.github.com/repos/neovim/neovim/notifications{?since,all,participating}",
            "open_issues": 2048,
            "open_issues_count": 2048,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
                "events_url": "https://api.github.com/users/neovim/events{/privacy}",
                "followers_url": "https://api.github.com/users/neovim/followers",
                "following_url": "https://api.github.com/users/neovim/following{/other_user}",
                "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/neovim",
                "id": 6471485,
                "login": "neovim",
                "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
                "organizations_url": "https://api.github.com/users/neovim/orgs",
                "received_events_url": "https://api.github.com/users/neovim/received_events",
                "repos_url": "https://api.github.com/users/neovim/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
                "type": "Organization",
                "url": "https://api.github.com/users/neovim",
                "user_view_type": "public"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/neovim/neovim/pulls{/number}",
            "pushed_at": "2025-11-03T06:23:46Z",
            "releases_url": "https://api.github.com/repos/neovim/neovim/releases{/id}",
            "size": 350066,
            "ssh_url": "git@github.com:neovim/neovim.git",
            "stargazers_count": 93940,
            "stargazers_url": "https://api.github.com/repos/neovim/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/neovim/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/neovim/neovim/subscription",
            "svn_url": "https://github.com/neovim/neovim",
            "tags_url": "https://api.github.com/repos/neovim/neovim/tags",
            "teams_url": "https://api.github.com/repos/neovim/neovim/teams",
            "topics": [
                "api",
                "c",
                "lua",
                "neovim",
                "nvim",
                "text-editor",
                "vim"
            ],
            "trees_url": "https://api.github.com/repos/neovim/neovim/git/trees{/sha}",
            "updated_at": "2025-11-04T02:32:33Z",
            "url": "https://api.github.com/repos/neovim/neovim",
            "visibility": "public",
            "watchers": 93940,
            "watchers_count": 93940,
            "web_commit_signoff_required": false
        },
        "sha": "29e093c8f262007dd87412cf4a4c47cefef3c963",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
            "events_url": "https://api.github.com/users/neovim/events{/privacy}",
            "followers_url": "https://api.github.com/users/neovim/followers",
            "following_url": "https://api.github.com/users/neovim/following{/other_user}",
            "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/neovim",
            "id": 6471485,
            "login": "neovim",
            "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
            "organizations_url": "https://api.github.com/users/neovim/orgs",
            "received_events_url": "https://api.github.com/users/neovim/received_events",
            "repos_url": "https://api.github.com/users/neovim/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
            "type": "Organization",
            "url": "https://api.github.com/users/neovim",
            "user_view_type": "public"
        }
    },
    "body": "Problem:\r\nError extracting content-length causes all future coroutine resumes to\r\nfail.\r\n\r\nSolution:\r\nReplace `coroutine.wrap` with `coroutine.create` in `create_read_loop`\r\nso that we can check its status and catch any errors, allowing us to\r\nstop the lsp client and avoid repeatedly resuming the dead coroutine.\r\n\r\n\r\n\r\nclose https://github.com/neovim/neovim/issues/33564",
    "closed_at": "2025-10-27T17:03:45Z",
    "comment_data": [
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/35743#discussion_r2462107498"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/35743"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2462107498"
                }
            },
            "author_association": "MEMBER",
            "body": "Technically this is a breaking change. But it's marked as `@private` so not going to worry. But I would probably add `errkind` as the 2nd arg just to avoid accidents.",
            "commit_id": "a0ab8a937710d4fbe0c17111ae3a72bacf6692e9",
            "created_at": "2025-10-24T21:58:02Z",
            "diff_hunk": "@@ -175,27 +175,34 @@ end\n --- @private\n --- @param handle_body fun(body: string)\n --- @param on_exit? fun()\n---- @param on_error fun(err: any)\n+--- @param on_error? fun(errkind: vim.lsp.rpc.ClientErrors, err: any)",
            "html_url": "https://github.com/neovim/neovim/pull/35743#discussion_r2462107498",
            "id": 2462107498,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6SwMdq",
            "original_commit_id": "a0ab8a937710d4fbe0c17111ae3a72bacf6692e9",
            "original_line": 178,
            "original_position": 16,
            "original_start_line": null,
            "path": "runtime/lua/vim/lsp/rpc.lua",
            "position": 1,
            "pull_request_review_id": 3379020263,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/35743",
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2462107498/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-10-24T22:09:26Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2462107498",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        }
    ],
    "comment_regular_data": [
        {
            "author_association": "MEMBER",
            "body": "This looks rather specific (`get_content_length` is presumably not the only place where a BOM could cause problems in the LSP layer), but when problems like #33564 happen with unclear symptoms, we should at *minimum* detect and show useful errors. \r\n\r\nSo even if there are objections to this PR as it currently is, at least detecting the BOM and showing a useful error is something we should do.",
            "created_at": "2025-09-13T21:34:25Z",
            "html_url": "https://github.com/neovim/neovim/pull/35743#issuecomment-3288869256",
            "id": 3288869256,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/35743",
            "node_id": "IC_kwDOAPphoM7ECCmI",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3288869256/reactions"
            },
            "updated_at": "2025-09-13T21:34:25Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3288869256",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Hi, sorry it took so long to update, I spent about a month looking deeper into this and some findings might help.  üòÑ\r\n\r\n> `get_content_length` is presumably not the only place where a BOM could cause problems in the LSP layer\r\n\r\nFor issue #33564, BOM only appears once, at the beginning of `stdout` stream and as part of header field name.\r\nI also created [#2691](https://github.com/OmniSharp/omnisharp-roslyn/issues/2691) in `omnisharp-roslyn`. BTW, if I understand [#2647](https://github.com/OmniSharp/omnisharp-roslyn/issues/2647) correctly, once they drop mono and require users to install .NET runtime, this problem will disappear, since the .NET runtime stopped writing BOM to `stdout` [years ago](https://github.com/dotnet/runtime/blob/aed1aadd99f8825f913f9eb862da0bb2f7b74433/src/libraries/Common/src/System/Text/ConsoleEncoding.cs#L19-L20), while mono still does.\r\n\r\n> So even if there are objections to this PR as it currently is, at least detecting the BOM and showing a useful error is something we should do.\r\n\r\nThe latest commit shows a simple message when extracting `Content-Length` fails, terminates the client and stops repeatedly resuming dead coroutine:\r\n```log\r\nLSP[omnisharp_mono]: Error INVALID_SERVER_MESSAGE: \"...ary/www/github/neovim/neovim/runtime/lua/vim/lsp/rpc.lua:33: Content-Length not found in header: <feff>Content-Length: 185\\r\\n\"\r\n```\r\n\r\nAdditionally, I ran simple startup tests for 373 LSP configs in `nvim-lspconfig`, result is\r\n* 366 ‚úÖ\r\n* 1 doesn't actually implement lsp (i.e., [statix](https://github.com/neovim/nvim-lspconfig/blob/master/doc/configs.md#statix), which only reads file content from stdin and returns diagnostics) \r\n* 6 ‚ùå\r\n\r\n| config | invalid lsp header | repo | last_commit |\r\n|--------|----------|--------|--------|\r\n| [bright_script](https://github.com/neovim/nvim-lspconfig/blob/master/doc/configs.md#bright_script) | `[11:30:33:468 PM][LOG  ] prj0 Using config file: \"/xxxx/bsconfig.json\"\\n[11:30:33:470 PM][LOG  ] prj0 Loading 0 plugins for cwd \"/xxxx\" []\\n[11:30:33:475 PM][LOG  ] prj0 Parsing files\\n[11:30:33:483 PM][LOG  ] prj0 Parsing files finished. (7.753ms)\\n[11:30:33:484 PM][LOG  ] prj0 Validating project\\n[11:30:33:484 PM][LOG  ] prj0 Validating project finished. (0.643ms)\\nContent-Length: 387\\r\\n` | [brighterscript](https://github.com/RokuCommunity/brighterscript) | 2 days ago |\r\n| [custom_elements_ls](https://github.com/neovim/nvim-lspconfig/blob/master/doc/configs.md#custom_elements_ls) | `NODE VERSION:  v22.15.1\\nStartup at  2025-10-12T15:38:57.914Z\\nInitializing connection\\nInitializing documents\\nInitializing workspaces.\\nInitializing workspace /xxxx @ file:///xxxx\\nPackage JSON path  /xxxx/package.json\\nContent-Length: 275\\r\\n` | [custom-elements-language-server](https://github.com/Matsuuu/custom-elements-language-server) | 2 years ago |\r\n| [ltex](https://github.com/neovim/nvim-lspconfig/blob/master/doc/configs.md#ltex) | `WARN: no common words file defined for Khmer - this language might not be correctly auto-detected\\nWARN: no common words file defined for Japanese - this language might not be correctly auto-detected\\nContent-Length: 260\\r\\n` | [ltex-ls](https://github.com/valentjn/ltex-ls) | 2 years ago |\r\n| [pico8_ls](https://github.com/neovim/nvim-lspconfig/blob/master/doc/configs.md#pico8_ls) | `PICO-8 Language Server starting.\\nPICO-8 Language Server launched.\\nContent-Length: 535\\r\\n` | [pico8-ls](https://github.com/japhib/pico8-ls) | 3 weeks ago |\r\n| [sqlls](https://github.com/neovim/nvim-lspconfig/blob/master/doc/configs.md#sqlls) | `addCandidatesForFunctions: 0.046ms\\ncomplete: 4.274ms\\nContent-Length: 36\\r\\n` | [sql-language-server](https://github.com/joe-re/sql-language-server) | 10 months ago | \r\n| [pug](https://github.com/neovim/nvim-lspconfig/blob/master/doc/configs.md#pug) | `[TODO]: \"Is 5 enough?\"\\nContent-Length: 299\\r\\n` | [pug-lsp](https://github.com/opa-oz/pug-lsp) | 11 months ago |\r\n\r\nThe commonality among them is that they all write one or more log lines to `stdout` before the real lsp header, and each ending with `\\n`. They may be primarily designed for vscode client, and can work well in its `TransportKind.ipc` mode, but cause header parsing issue in `stdio` mode. My tests were fairly simple, so I‚Äôm not sure if other configs might also write log lines to `stdout` in some cases.\r\n\r\nIf we think the message in this commit is enough and keep strict parsing, then no changes to `get_content_length` are needed. However, if we want to show more specific message (like, `invalid token: <feff>`) or be more lenient by ignoring invalid log lines so these servers can still run, we might need a small header parser function. I‚Äôve also experimented with a rough implementation, which is faster than the current regex, I can provide it later if needed. ",
            "created_at": "2025-10-13T02:11:34Z",
            "html_url": "https://github.com/neovim/neovim/pull/35743#issuecomment-3395646442",
            "id": 3395646442,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/35743",
            "node_id": "IC_kwDOAPphoM7KZXPq",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 1,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3395646442/reactions"
            },
            "updated_at": "2025-10-14T08:40:32Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3395646442",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/8579651?v=4",
                "events_url": "https://api.github.com/users/ntdiary/events{/privacy}",
                "followers_url": "https://api.github.com/users/ntdiary/followers",
                "following_url": "https://api.github.com/users/ntdiary/following{/other_user}",
                "gists_url": "https://api.github.com/users/ntdiary/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ntdiary",
                "id": 8579651,
                "login": "ntdiary",
                "node_id": "MDQ6VXNlcjg1Nzk2NTE=",
                "organizations_url": "https://api.github.com/users/ntdiary/orgs",
                "received_events_url": "https://api.github.com/users/ntdiary/received_events",
                "repos_url": "https://api.github.com/users/ntdiary/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ntdiary/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ntdiary/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ntdiary",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Thanks for your reviews! I learned a lot while writing the test case. I've also briefly summarized the key changes in the commit message. BTW, I initially thought the test below might be related, but after digging into it, I feel it‚Äôs outdated, and the validation in `on_handler` is no longer called, It might be safe to remove it in the future?\r\nIf there's anything else that needs to be updated, please feel free to let me know. :)\r\nhttps://github.com/neovim/neovim/blob/29e093c8f262007dd87412cf4a4c47cefef3c963/test/functional/plugin/lsp_spec.lua#L1950-L1970\r\n",
            "created_at": "2025-10-27T15:47:06Z",
            "html_url": "https://github.com/neovim/neovim/pull/35743#issuecomment-3452009757",
            "id": 3452009757,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/35743",
            "node_id": "IC_kwDOAPphoM7NwX0d",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3452009757/reactions"
            },
            "updated_at": "2025-10-27T16:12:54Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3452009757",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/8579651?v=4",
                "events_url": "https://api.github.com/users/ntdiary/events{/privacy}",
                "followers_url": "https://api.github.com/users/ntdiary/followers",
                "following_url": "https://api.github.com/users/ntdiary/following{/other_user}",
                "gists_url": "https://api.github.com/users/ntdiary/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ntdiary",
                "id": 8579651,
                "login": "ntdiary",
                "node_id": "MDQ6VXNlcjg1Nzk2NTE=",
                "organizations_url": "https://api.github.com/users/ntdiary/orgs",
                "received_events_url": "https://api.github.com/users/ntdiary/received_events",
                "repos_url": "https://api.github.com/users/ntdiary/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ntdiary/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ntdiary/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ntdiary",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> BTW, I initially thought the test below might be related, but after digging into it, I feel it‚Äôs outdated, and the validation in `on_handler` is no longer called, It might be safe to remove it in the future?\r\n\r\nyes that sounds helpful, in a new PR!\r\n\r\n> I also wouldn't be opposed making the parsing a bit more lenient again and allow the first line to contain some garbage. E.g. one scenario I recently ran into where it also breaks is if you want to debug language servers written in Java with the jdwp agentlib attached. That will also cause an extra line to be printed, and there's no way to suppress that on the JDK/language server side.\r\n\r\nIs that implemented here or should we track it, or do you plan to implement it @ntdiary ?",
            "created_at": "2025-10-27T17:04:31Z",
            "html_url": "https://github.com/neovim/neovim/pull/35743#issuecomment-3452401642",
            "id": 3452401642,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/35743",
            "node_id": "IC_kwDOAPphoM7Nx3fq",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3452401642/reactions"
            },
            "updated_at": "2025-10-27T17:04:52Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3452401642",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "> Is that implemented here or should we track it, or do you plan to implement it @ntdiary ?\r\n\r\nwill try to implement it in a follow PR. üòÑ",
            "created_at": "2025-10-28T08:38:07Z",
            "html_url": "https://github.com/neovim/neovim/pull/35743#issuecomment-3455199258",
            "id": 3455199258,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/35743",
            "node_id": "IC_kwDOAPphoM7N8iga",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 1,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3455199258/reactions"
            },
            "updated_at": "2025-10-28T08:38:07Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3455199258",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/8579651?v=4",
                "events_url": "https://api.github.com/users/ntdiary/events{/privacy}",
                "followers_url": "https://api.github.com/users/ntdiary/followers",
                "following_url": "https://api.github.com/users/ntdiary/following{/other_user}",
                "gists_url": "https://api.github.com/users/ntdiary/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ntdiary",
                "id": 8579651,
                "login": "ntdiary",
                "node_id": "MDQ6VXNlcjg1Nzk2NTE=",
                "organizations_url": "https://api.github.com/users/ntdiary/orgs",
                "received_events_url": "https://api.github.com/users/ntdiary/received_events",
                "repos_url": "https://api.github.com/users/ntdiary/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ntdiary/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ntdiary/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ntdiary",
                "user_view_type": "public"
            }
        }
    ],
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/35743/comments",
    "commits_url": "https://api.github.com/repos/neovim/neovim/pulls/35743/commits",
    "created_at": "2025-09-13T08:28:06Z",
    "diff_url": "https://github.com/neovim/neovim/pull/35743.diff",
    "draft": false,
    "head": {
        "label": "ntdiary:omnisharp-mono-bom",
        "ref": "omnisharp-mono-bom",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/ntdiary/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/ntdiary/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/ntdiary/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/ntdiary/neovim/branches{/branch}",
            "clone_url": "https://github.com/ntdiary/neovim.git",
            "collaborators_url": "https://api.github.com/repos/ntdiary/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/ntdiary/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/ntdiary/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/ntdiary/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/ntdiary/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/ntdiary/neovim/contributors",
            "created_at": "2025-08-09T15:05:21Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/ntdiary/neovim/deployments",
            "description": "Vim-fork focused on extensibility and usability",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/ntdiary/neovim/downloads",
            "events_url": "https://api.github.com/repos/ntdiary/neovim/events",
            "fork": true,
            "forks": 0,
            "forks_count": 0,
            "forks_url": "https://api.github.com/repos/ntdiary/neovim/forks",
            "full_name": "ntdiary/neovim",
            "git_commits_url": "https://api.github.com/repos/ntdiary/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/ntdiary/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/ntdiary/neovim/git/tags{/sha}",
            "git_url": "git://github.com/ntdiary/neovim.git",
            "has_discussions": false,
            "has_downloads": true,
            "has_issues": false,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://neovim.io",
            "hooks_url": "https://api.github.com/repos/ntdiary/neovim/hooks",
            "html_url": "https://github.com/ntdiary/neovim",
            "id": 1035056562,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/ntdiary/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/ntdiary/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/ntdiary/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/ntdiary/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/ntdiary/neovim/labels{/name}",
            "language": "Vim Script",
            "languages_url": "https://api.github.com/repos/ntdiary/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/ntdiary/neovim/merges",
            "milestones_url": "https://api.github.com/repos/ntdiary/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "R_kgDOPbG1sg",
            "notifications_url": "https://api.github.com/repos/ntdiary/neovim/notifications{?since,all,participating}",
            "open_issues": 0,
            "open_issues_count": 0,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/8579651?v=4",
                "events_url": "https://api.github.com/users/ntdiary/events{/privacy}",
                "followers_url": "https://api.github.com/users/ntdiary/followers",
                "following_url": "https://api.github.com/users/ntdiary/following{/other_user}",
                "gists_url": "https://api.github.com/users/ntdiary/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ntdiary",
                "id": 8579651,
                "login": "ntdiary",
                "node_id": "MDQ6VXNlcjg1Nzk2NTE=",
                "organizations_url": "https://api.github.com/users/ntdiary/orgs",
                "received_events_url": "https://api.github.com/users/ntdiary/received_events",
                "repos_url": "https://api.github.com/users/ntdiary/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ntdiary/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ntdiary/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ntdiary",
                "user_view_type": "public"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/ntdiary/neovim/pulls{/number}",
            "pushed_at": "2025-11-01T00:32:26Z",
            "releases_url": "https://api.github.com/repos/ntdiary/neovim/releases{/id}",
            "size": 338327,
            "ssh_url": "git@github.com:ntdiary/neovim.git",
            "stargazers_count": 0,
            "stargazers_url": "https://api.github.com/repos/ntdiary/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/ntdiary/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/ntdiary/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/ntdiary/neovim/subscription",
            "svn_url": "https://github.com/ntdiary/neovim",
            "tags_url": "https://api.github.com/repos/ntdiary/neovim/tags",
            "teams_url": "https://api.github.com/repos/ntdiary/neovim/teams",
            "topics": [],
            "trees_url": "https://api.github.com/repos/ntdiary/neovim/git/trees{/sha}",
            "updated_at": "2025-10-31T01:42:14Z",
            "url": "https://api.github.com/repos/ntdiary/neovim",
            "visibility": "public",
            "watchers": 0,
            "watchers_count": 0,
            "web_commit_signoff_required": false
        },
        "sha": "1a664cd1e226760bc4f75640b5e42bd66f559bbe",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/8579651?v=4",
            "events_url": "https://api.github.com/users/ntdiary/events{/privacy}",
            "followers_url": "https://api.github.com/users/ntdiary/followers",
            "following_url": "https://api.github.com/users/ntdiary/following{/other_user}",
            "gists_url": "https://api.github.com/users/ntdiary/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/ntdiary",
            "id": 8579651,
            "login": "ntdiary",
            "node_id": "MDQ6VXNlcjg1Nzk2NTE=",
            "organizations_url": "https://api.github.com/users/ntdiary/orgs",
            "received_events_url": "https://api.github.com/users/ntdiary/received_events",
            "repos_url": "https://api.github.com/users/ntdiary/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/ntdiary/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/ntdiary/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/ntdiary",
            "user_view_type": "public"
        }
    },
    "html_url": "https://github.com/neovim/neovim/pull/35743",
    "id": 2824872768,
    "issue_url": "https://api.github.com/repos/neovim/neovim/issues/35743",
    "labels": [
        {
            "color": "c5def5",
            "default": false,
            "description": null,
            "id": 662566370,
            "name": "lsp",
            "node_id": "MDU6TGFiZWw2NjI1NjYzNzA=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/lsp"
        }
    ],
    "locked": false,
    "merge_commit_sha": "a768d0a95b52bc22cc0b6c3d180980fc354770e3",
    "merged_at": "2025-10-27T17:03:45Z",
    "milestone": null,
    "node_id": "PR_kwDOAPphoM6oYCNA",
    "number": 35743,
    "patch_url": "https://github.com/neovim/neovim/pull/35743.patch",
    "requested_reviewers": [],
    "requested_teams": [],
    "review_comment_url": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}",
    "review_comments_url": "https://api.github.com/repos/neovim/neovim/pulls/35743/comments",
    "state": "closed",
    "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/1a664cd1e226760bc4f75640b5e42bd66f559bbe",
    "title": "fix(lsp): stop repeatedly resuming dead coroutine",
    "updated_at": "2025-10-28T08:38:07Z",
    "url": "https://api.github.com/repos/neovim/neovim/pulls/35743",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/8579651?v=4",
        "events_url": "https://api.github.com/users/ntdiary/events{/privacy}",
        "followers_url": "https://api.github.com/users/ntdiary/followers",
        "following_url": "https://api.github.com/users/ntdiary/following{/other_user}",
        "gists_url": "https://api.github.com/users/ntdiary/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/ntdiary",
        "id": 8579651,
        "login": "ntdiary",
        "node_id": "MDQ6VXNlcjg1Nzk2NTE=",
        "organizations_url": "https://api.github.com/users/ntdiary/orgs",
        "received_events_url": "https://api.github.com/users/ntdiary/received_events",
        "repos_url": "https://api.github.com/users/ntdiary/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/ntdiary/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/ntdiary/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/ntdiary",
        "user_view_type": "public"
    }
}