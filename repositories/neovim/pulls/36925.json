{
    "_links": {
        "comments": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/36925/comments"
        },
        "commits": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/36925/commits"
        },
        "html": {
            "href": "https://github.com/neovim/neovim/pull/36925"
        },
        "issue": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/36925"
        },
        "review_comment": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}"
        },
        "review_comments": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/36925/comments"
        },
        "self": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/36925"
        },
        "statuses": {
            "href": "https://api.github.com/repos/neovim/neovim/statuses/bd225422a5b75ea8064603d21f7b38da30007910"
        }
    },
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "auto_merge": null,
    "base": {
        "label": "neovim:master",
        "ref": "master",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/neovim/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/neovim/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/neovim/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/neovim/neovim/branches{/branch}",
            "clone_url": "https://github.com/neovim/neovim.git",
            "collaborators_url": "https://api.github.com/repos/neovim/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/neovim/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/neovim/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/neovim/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/neovim/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/neovim/neovim/contributors",
            "created_at": "2014-01-31T13:39:22Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/neovim/neovim/deployments",
            "description": "Vim-fork focused on extensibility and usability",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/neovim/neovim/downloads",
            "events_url": "https://api.github.com/repos/neovim/neovim/events",
            "fork": false,
            "forks": 6474,
            "forks_count": 6474,
            "forks_url": "https://api.github.com/repos/neovim/neovim/forks",
            "full_name": "neovim/neovim",
            "git_commits_url": "https://api.github.com/repos/neovim/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/neovim/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/neovim/neovim/git/tags{/sha}",
            "git_url": "git://github.com/neovim/neovim.git",
            "has_discussions": true,
            "has_downloads": true,
            "has_issues": true,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://neovim.io",
            "hooks_url": "https://api.github.com/repos/neovim/neovim/hooks",
            "html_url": "https://github.com/neovim/neovim",
            "id": 16408992,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/neovim/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/neovim/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/neovim/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/neovim/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/neovim/neovim/labels{/name}",
            "language": "Vim Script",
            "languages_url": "https://api.github.com/repos/neovim/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/neovim/neovim/merges",
            "milestones_url": "https://api.github.com/repos/neovim/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "MDEwOlJlcG9zaXRvcnkxNjQwODk5Mg==",
            "notifications_url": "https://api.github.com/repos/neovim/neovim/notifications{?since,all,participating}",
            "open_issues": 2039,
            "open_issues_count": 2039,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
                "events_url": "https://api.github.com/users/neovim/events{/privacy}",
                "followers_url": "https://api.github.com/users/neovim/followers",
                "following_url": "https://api.github.com/users/neovim/following{/other_user}",
                "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/neovim",
                "id": 6471485,
                "login": "neovim",
                "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
                "organizations_url": "https://api.github.com/users/neovim/orgs",
                "received_events_url": "https://api.github.com/users/neovim/received_events",
                "repos_url": "https://api.github.com/users/neovim/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
                "type": "Organization",
                "url": "https://api.github.com/users/neovim",
                "user_view_type": "public"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/neovim/neovim/pulls{/number}",
            "pushed_at": "2025-12-23T01:01:43Z",
            "releases_url": "https://api.github.com/repos/neovim/neovim/releases{/id}",
            "size": 357388,
            "ssh_url": "git@github.com:neovim/neovim.git",
            "stargazers_count": 95118,
            "stargazers_url": "https://api.github.com/repos/neovim/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/neovim/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/neovim/neovim/subscription",
            "svn_url": "https://github.com/neovim/neovim",
            "tags_url": "https://api.github.com/repos/neovim/neovim/tags",
            "teams_url": "https://api.github.com/repos/neovim/neovim/teams",
            "topics": [
                "api",
                "c",
                "lua",
                "neovim",
                "nvim",
                "text-editor",
                "vim"
            ],
            "trees_url": "https://api.github.com/repos/neovim/neovim/git/trees{/sha}",
            "updated_at": "2025-12-23T02:29:47Z",
            "url": "https://api.github.com/repos/neovim/neovim",
            "visibility": "public",
            "watchers": 95118,
            "watchers_count": 95118,
            "web_commit_signoff_required": false
        },
        "sha": "89d26d61d271231b7753186de898bb95d2a83372",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
            "events_url": "https://api.github.com/users/neovim/events{/privacy}",
            "followers_url": "https://api.github.com/users/neovim/followers",
            "following_url": "https://api.github.com/users/neovim/following{/other_user}",
            "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/neovim",
            "id": 6471485,
            "login": "neovim",
            "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
            "organizations_url": "https://api.github.com/users/neovim/orgs",
            "received_events_url": "https://api.github.com/users/neovim/received_events",
            "repos_url": "https://api.github.com/users/neovim/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
            "type": "Organization",
            "url": "https://api.github.com/users/neovim",
            "user_view_type": "public"
        }
    },
    "body": "Continuation of the work in #35078, which seeks to upstream the commands in lspconfig.\r\n\r\nWork left for me to do before review:\r\n- [x] Implement unreviewed feedback from the original PR.\r\n- [x] Add tests.\r\n  - [x] Make tests more thorough.\r\n- [x] Rename `:lsp start` and `:lsp stop` to `:lsp enable` and `:lsp disable`.\r\n- [x] Correct completion for `:lsp disable`.\r\n- [x] Fix bug where `:lsp enable` without an argument will fail to enable a client not in `vim.lsp.config._configs`.\r\n- [x] ~~Remove support for specifying multiple clients in arguments.~~ Decided to skip for now.\r\n- [x] Improve `:lsp restart` so it works for manually started clients.\r\n- [x] Add a true `:lsp stop` which stops a client without disabling it.\r\n- [x] Standardize usage of \"client\" vs. \"server\" in documentation.\r\n- [x] Remove `*` from the completion of `:lsp enable`.\r\n- [x] ~~Add `++all` flag to `:lsp restart` and `:lsp stop`.~~ Decided it adds too much complexity for minimal value.\r\n- [x] Don't silently discard lua errors.\r\n- [x] Don't show already enabled configs in `:lsp enable` completion.\r\n\r\nclose #35078\r\nclose #28479",
    "closed_at": "2025-12-16T18:48:43Z",
    "comment_data": [
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/36925#discussion_r2616701019"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/36925"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2616701019"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "In case of bang, checking number of args is useless, you need to check that `nextcmd` is empty instead. But I have never felt certain that bang is necessary, so you could remove support for bang (in both `src/nvim/ex_cmds.lua` and the completion function in `_core/ex_cmd.lua`)",
            "commit_id": "bd225422a5b75ea8064603d21f7b38da30007910",
            "created_at": "2025-12-14T04:03:25Z",
            "diff_hunk": "@@ -0,0 +1,150 @@\n+local t = require('test.testutil')\n+local n = require('test.functional.testnvim')()\n+local t_lsp = require('test.functional.plugin.lsp.testutil')\n+\n+local clear = n.clear\n+local eq = t.eq\n+local exec_lua = n.exec_lua\n+\n+local create_server_definition = t_lsp.create_server_definition\n+\n+describe(':lsp', function()\n+  before_each(function()\n+    clear()\n+    exec_lua(create_server_definition)\n+    exec_lua(function()\n+      local server = _G._create_server()\n+      vim.lsp.config('dummy', {\n+        filetypes = { 'lua' },\n+        cmd = server.cmd,\n+      })\n+      vim.cmd('set ft=lua')\n+    end)\n+  end)\n+\n+  it('enable with arguments', function()\n+    local is_enabled = exec_lua(function()\n+      vim.cmd('lsp enable dummy')\n+      return vim.lsp.is_enabled('dummy')\n+    end)\n+    eq(true, is_enabled)\n+  end)\n+\n+  it('enable without arguments', function()\n+    local is_enabled = exec_lua(function()\n+      vim.cmd('lsp enable')\n+      return vim.lsp.is_enabled('dummy')\n+    end)\n+    eq(true, is_enabled)\n+  end)\n+\n+  it('disable with arguments', function()\n+    local is_enabled = exec_lua(function()\n+      vim.lsp.enable('dummy')\n+      vim.cmd('lsp disable dummy')\n+      return vim.lsp.is_enabled('dummy')\n+    end)\n+    eq(false, is_enabled)\n+  end)\n+\n+  it('disable without arguments', function()\n+    local is_enabled = exec_lua(function()\n+      vim.lsp.enable('dummy')\n+      vim.cmd('lsp disable')\n+      return vim.lsp.is_enabled('dummy')\n+    end)\n+    eq(false, is_enabled)\n+  end)\n+\n+  it('restart with arguments', function()\n+    local ids_differ = exec_lua(function()\n+      vim.lsp.enable('dummy')\n+      local old_id = vim.lsp.get_clients()[1].id\n+\n+      vim.cmd('lsp restart dummy')\n+      vim.wait(1000, function()\n+        return old_id ~= vim.lsp.get_clients()[1].id\n+      end)\n+      local new_id = vim.lsp.get_clients()[1].id\n+      return old_id ~= new_id\n+    end)\n+    eq(true, ids_differ)\n+  end)\n+\n+  it('restart without arguments', function()\n+    local ids_differ = exec_lua(function()\n+      vim.lsp.enable('dummy')\n+      local old_id = vim.lsp.get_clients()[1].id\n+\n+      vim.cmd('lsp restart')\n+      vim.wait(1000, function()\n+        return old_id ~= vim.lsp.get_clients()[1].id\n+      end)\n+      local new_id = vim.lsp.get_clients()[1].id\n+      return old_id ~= new_id\n+    end)\n+    eq(true, ids_differ)\n+  end)\n+\n+  it('stop with arguments', function()\n+    local running_clients = exec_lua(function()\n+      vim.lsp.enable('dummy')\n+      vim.cmd('lsp stop dummy')\n+      vim.wait(1000, function()\n+        return #vim.lsp.get_clients() == 0\n+      end)\n+      return #vim.lsp.get_clients()\n+    end)\n+    eq(0, running_clients)\n+  end)\n+\n+  it('stop without arguments', function()\n+    local running_clients = exec_lua(function()\n+      vim.lsp.enable('dummy')\n+      vim.cmd('lsp stop')\n+      vim.wait(1000, function()\n+        return #vim.lsp.get_clients() == 0\n+      end)\n+      return #vim.lsp.get_clients()\n+    end)\n+    eq(0, running_clients)\n+  end)\n+\n+  it('subcommand completion', function()\n+    local completions = exec_lua(function()\n+      return vim.fn.getcompletion('lsp ', 'cmdline')\n+    end)\n+    eq({ 'disable', 'enable', 'restart', 'stop' }, completions)\n+  end)\n+\n+  it('argument completion', function()\n+    local completions = exec_lua(function()\n+      return vim.fn.getcompletion('lsp enable ', 'cmdline')\n+    end)\n+    eq({ 'dummy' }, completions)\n+  end)\n+\n+  it('argument completion with spaces', function()\n+    local cmd_length = exec_lua(function()\n+      local server = _G._create_server()\n+      vim.lsp.config('client name with space', {\n+        cmd = server.cmd,\n+      })\n+      local completion = vim.fn.getcompletion('lsp enable cl ', 'cmdline')[1]\n+      return #vim.api.nvim_parse_cmd('lsp enable ' .. completion, {}).args\n+    end)\n+    eq(2, cmd_length)\n+  end)\n+\n+  it('argument completion with special characters', function()\n+    local cmd_length = exec_lua(function()\n+      local server = _G._create_server()\n+      vim.lsp.config('client\"name|with\\tsymbols', {\n+        cmd = server.cmd,\n+      })\n+      local completion = vim.fn.getcompletion('lsp enable cl ', 'cmdline')[1]\n+      return #vim.api.nvim_parse_cmd('lsp enable ' .. completion, {}).args",
            "html_url": "https://github.com/neovim/neovim/pull/36925#discussion_r2616701019",
            "id": 2616701019,
            "line": 113,
            "node_id": "PRRC_kwDOAPphoM6b97Bb",
            "original_commit_id": "d99255032497e35098f455a24c4ef078e8fbe1aa",
            "original_line": 113,
            "original_position": 146,
            "original_start_line": null,
            "path": "test/functional/ex_cmds/lsp_spec.lua",
            "position": 113,
            "pull_request_review_id": 3574736512,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/36925",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2616701019/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-12-14T04:04:53Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2616701019",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/111893501?v=4",
                "events_url": "https://api.github.com/users/brianhuster/events{/privacy}",
                "followers_url": "https://api.github.com/users/brianhuster/followers",
                "following_url": "https://api.github.com/users/brianhuster/following{/other_user}",
                "gists_url": "https://api.github.com/users/brianhuster/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/brianhuster",
                "id": 111893501,
                "login": "brianhuster",
                "node_id": "U_kgDOBqtb_Q",
                "organizations_url": "https://api.github.com/users/brianhuster/orgs",
                "received_events_url": "https://api.github.com/users/brianhuster/received_events",
                "repos_url": "https://api.github.com/users/brianhuster/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/brianhuster/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/brianhuster/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/brianhuster",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/36925#discussion_r2616702697"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/36925"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2616702697"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "I'm sorry, by \"bang\" do you mean the pipe character (`|`)? \"Bang\" typically means `!`.\r\n\r\nAlso, I'm not sure I understand what the issue is? Configs with a pipe in the name work fine for `vim.lsp.enable()`. Can you please clarify?",
            "commit_id": "bd225422a5b75ea8064603d21f7b38da30007910",
            "created_at": "2025-12-14T04:07:31Z",
            "diff_hunk": "@@ -0,0 +1,150 @@\n+local t = require('test.testutil')\n+local n = require('test.functional.testnvim')()\n+local t_lsp = require('test.functional.plugin.lsp.testutil')\n+\n+local clear = n.clear\n+local eq = t.eq\n+local exec_lua = n.exec_lua\n+\n+local create_server_definition = t_lsp.create_server_definition\n+\n+describe(':lsp', function()\n+  before_each(function()\n+    clear()\n+    exec_lua(create_server_definition)\n+    exec_lua(function()\n+      local server = _G._create_server()\n+      vim.lsp.config('dummy', {\n+        filetypes = { 'lua' },\n+        cmd = server.cmd,\n+      })\n+      vim.cmd('set ft=lua')\n+    end)\n+  end)\n+\n+  it('enable with arguments', function()\n+    local is_enabled = exec_lua(function()\n+      vim.cmd('lsp enable dummy')\n+      return vim.lsp.is_enabled('dummy')\n+    end)\n+    eq(true, is_enabled)\n+  end)\n+\n+  it('enable without arguments', function()\n+    local is_enabled = exec_lua(function()\n+      vim.cmd('lsp enable')\n+      return vim.lsp.is_enabled('dummy')\n+    end)\n+    eq(true, is_enabled)\n+  end)\n+\n+  it('disable with arguments', function()\n+    local is_enabled = exec_lua(function()\n+      vim.lsp.enable('dummy')\n+      vim.cmd('lsp disable dummy')\n+      return vim.lsp.is_enabled('dummy')\n+    end)\n+    eq(false, is_enabled)\n+  end)\n+\n+  it('disable without arguments', function()\n+    local is_enabled = exec_lua(function()\n+      vim.lsp.enable('dummy')\n+      vim.cmd('lsp disable')\n+      return vim.lsp.is_enabled('dummy')\n+    end)\n+    eq(false, is_enabled)\n+  end)\n+\n+  it('restart with arguments', function()\n+    local ids_differ = exec_lua(function()\n+      vim.lsp.enable('dummy')\n+      local old_id = vim.lsp.get_clients()[1].id\n+\n+      vim.cmd('lsp restart dummy')\n+      vim.wait(1000, function()\n+        return old_id ~= vim.lsp.get_clients()[1].id\n+      end)\n+      local new_id = vim.lsp.get_clients()[1].id\n+      return old_id ~= new_id\n+    end)\n+    eq(true, ids_differ)\n+  end)\n+\n+  it('restart without arguments', function()\n+    local ids_differ = exec_lua(function()\n+      vim.lsp.enable('dummy')\n+      local old_id = vim.lsp.get_clients()[1].id\n+\n+      vim.cmd('lsp restart')\n+      vim.wait(1000, function()\n+        return old_id ~= vim.lsp.get_clients()[1].id\n+      end)\n+      local new_id = vim.lsp.get_clients()[1].id\n+      return old_id ~= new_id\n+    end)\n+    eq(true, ids_differ)\n+  end)\n+\n+  it('stop with arguments', function()\n+    local running_clients = exec_lua(function()\n+      vim.lsp.enable('dummy')\n+      vim.cmd('lsp stop dummy')\n+      vim.wait(1000, function()\n+        return #vim.lsp.get_clients() == 0\n+      end)\n+      return #vim.lsp.get_clients()\n+    end)\n+    eq(0, running_clients)\n+  end)\n+\n+  it('stop without arguments', function()\n+    local running_clients = exec_lua(function()\n+      vim.lsp.enable('dummy')\n+      vim.cmd('lsp stop')\n+      vim.wait(1000, function()\n+        return #vim.lsp.get_clients() == 0\n+      end)\n+      return #vim.lsp.get_clients()\n+    end)\n+    eq(0, running_clients)\n+  end)\n+\n+  it('subcommand completion', function()\n+    local completions = exec_lua(function()\n+      return vim.fn.getcompletion('lsp ', 'cmdline')\n+    end)\n+    eq({ 'disable', 'enable', 'restart', 'stop' }, completions)\n+  end)\n+\n+  it('argument completion', function()\n+    local completions = exec_lua(function()\n+      return vim.fn.getcompletion('lsp enable ', 'cmdline')\n+    end)\n+    eq({ 'dummy' }, completions)\n+  end)\n+\n+  it('argument completion with spaces', function()\n+    local cmd_length = exec_lua(function()\n+      local server = _G._create_server()\n+      vim.lsp.config('client name with space', {\n+        cmd = server.cmd,\n+      })\n+      local completion = vim.fn.getcompletion('lsp enable cl ', 'cmdline')[1]\n+      return #vim.api.nvim_parse_cmd('lsp enable ' .. completion, {}).args\n+    end)\n+    eq(2, cmd_length)\n+  end)\n+\n+  it('argument completion with special characters', function()\n+    local cmd_length = exec_lua(function()\n+      local server = _G._create_server()\n+      vim.lsp.config('client\"name|with\\tsymbols', {\n+        cmd = server.cmd,\n+      })\n+      local completion = vim.fn.getcompletion('lsp enable cl ', 'cmdline')[1]\n+      return #vim.api.nvim_parse_cmd('lsp enable ' .. completion, {}).args",
            "html_url": "https://github.com/neovim/neovim/pull/36925#discussion_r2616702697",
            "id": 2616702697,
            "in_reply_to_id": 2616701019,
            "line": 113,
            "node_id": "PRRC_kwDOAPphoM6b97bp",
            "original_commit_id": "d99255032497e35098f455a24c4ef078e8fbe1aa",
            "original_line": 113,
            "original_position": 146,
            "original_start_line": null,
            "path": "test/functional/ex_cmds/lsp_spec.lua",
            "position": 113,
            "pull_request_review_id": 3574737708,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/36925",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2616702697/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-12-14T04:07:31Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2616702697",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/51250849?v=4",
                "events_url": "https://api.github.com/users/superatomic/events{/privacy}",
                "followers_url": "https://api.github.com/users/superatomic/followers",
                "following_url": "https://api.github.com/users/superatomic/following{/other_user}",
                "gists_url": "https://api.github.com/users/superatomic/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/superatomic",
                "id": 51250849,
                "login": "superatomic",
                "node_id": "MDQ6VXNlcjUxMjUwODQ5",
                "organizations_url": "https://api.github.com/users/superatomic/orgs",
                "received_events_url": "https://api.github.com/users/superatomic/received_events",
                "repos_url": "https://api.github.com/users/superatomic/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/superatomic/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/superatomic/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/superatomic",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/36925#discussion_r2616706683"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/36925"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2616706683"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Oh, yes, I mean a bar (`|`), which I think functions similar to `;` in common shells. The current behavior means that you could run 2 commands in the same cmdline like \r\n```vim\r\nlsp enable abc | lsp disable def\r\n```\r\nBut I have never been sure why it needs to be supported, so I suppose you can remove support for it. But I don't have a strong opinion on that anyway",
            "commit_id": "bd225422a5b75ea8064603d21f7b38da30007910",
            "created_at": "2025-12-14T04:17:26Z",
            "diff_hunk": "@@ -0,0 +1,150 @@\n+local t = require('test.testutil')\n+local n = require('test.functional.testnvim')()\n+local t_lsp = require('test.functional.plugin.lsp.testutil')\n+\n+local clear = n.clear\n+local eq = t.eq\n+local exec_lua = n.exec_lua\n+\n+local create_server_definition = t_lsp.create_server_definition\n+\n+describe(':lsp', function()\n+  before_each(function()\n+    clear()\n+    exec_lua(create_server_definition)\n+    exec_lua(function()\n+      local server = _G._create_server()\n+      vim.lsp.config('dummy', {\n+        filetypes = { 'lua' },\n+        cmd = server.cmd,\n+      })\n+      vim.cmd('set ft=lua')\n+    end)\n+  end)\n+\n+  it('enable with arguments', function()\n+    local is_enabled = exec_lua(function()\n+      vim.cmd('lsp enable dummy')\n+      return vim.lsp.is_enabled('dummy')\n+    end)\n+    eq(true, is_enabled)\n+  end)\n+\n+  it('enable without arguments', function()\n+    local is_enabled = exec_lua(function()\n+      vim.cmd('lsp enable')\n+      return vim.lsp.is_enabled('dummy')\n+    end)\n+    eq(true, is_enabled)\n+  end)\n+\n+  it('disable with arguments', function()\n+    local is_enabled = exec_lua(function()\n+      vim.lsp.enable('dummy')\n+      vim.cmd('lsp disable dummy')\n+      return vim.lsp.is_enabled('dummy')\n+    end)\n+    eq(false, is_enabled)\n+  end)\n+\n+  it('disable without arguments', function()\n+    local is_enabled = exec_lua(function()\n+      vim.lsp.enable('dummy')\n+      vim.cmd('lsp disable')\n+      return vim.lsp.is_enabled('dummy')\n+    end)\n+    eq(false, is_enabled)\n+  end)\n+\n+  it('restart with arguments', function()\n+    local ids_differ = exec_lua(function()\n+      vim.lsp.enable('dummy')\n+      local old_id = vim.lsp.get_clients()[1].id\n+\n+      vim.cmd('lsp restart dummy')\n+      vim.wait(1000, function()\n+        return old_id ~= vim.lsp.get_clients()[1].id\n+      end)\n+      local new_id = vim.lsp.get_clients()[1].id\n+      return old_id ~= new_id\n+    end)\n+    eq(true, ids_differ)\n+  end)\n+\n+  it('restart without arguments', function()\n+    local ids_differ = exec_lua(function()\n+      vim.lsp.enable('dummy')\n+      local old_id = vim.lsp.get_clients()[1].id\n+\n+      vim.cmd('lsp restart')\n+      vim.wait(1000, function()\n+        return old_id ~= vim.lsp.get_clients()[1].id\n+      end)\n+      local new_id = vim.lsp.get_clients()[1].id\n+      return old_id ~= new_id\n+    end)\n+    eq(true, ids_differ)\n+  end)\n+\n+  it('stop with arguments', function()\n+    local running_clients = exec_lua(function()\n+      vim.lsp.enable('dummy')\n+      vim.cmd('lsp stop dummy')\n+      vim.wait(1000, function()\n+        return #vim.lsp.get_clients() == 0\n+      end)\n+      return #vim.lsp.get_clients()\n+    end)\n+    eq(0, running_clients)\n+  end)\n+\n+  it('stop without arguments', function()\n+    local running_clients = exec_lua(function()\n+      vim.lsp.enable('dummy')\n+      vim.cmd('lsp stop')\n+      vim.wait(1000, function()\n+        return #vim.lsp.get_clients() == 0\n+      end)\n+      return #vim.lsp.get_clients()\n+    end)\n+    eq(0, running_clients)\n+  end)\n+\n+  it('subcommand completion', function()\n+    local completions = exec_lua(function()\n+      return vim.fn.getcompletion('lsp ', 'cmdline')\n+    end)\n+    eq({ 'disable', 'enable', 'restart', 'stop' }, completions)\n+  end)\n+\n+  it('argument completion', function()\n+    local completions = exec_lua(function()\n+      return vim.fn.getcompletion('lsp enable ', 'cmdline')\n+    end)\n+    eq({ 'dummy' }, completions)\n+  end)\n+\n+  it('argument completion with spaces', function()\n+    local cmd_length = exec_lua(function()\n+      local server = _G._create_server()\n+      vim.lsp.config('client name with space', {\n+        cmd = server.cmd,\n+      })\n+      local completion = vim.fn.getcompletion('lsp enable cl ', 'cmdline')[1]\n+      return #vim.api.nvim_parse_cmd('lsp enable ' .. completion, {}).args\n+    end)\n+    eq(2, cmd_length)\n+  end)\n+\n+  it('argument completion with special characters', function()\n+    local cmd_length = exec_lua(function()\n+      local server = _G._create_server()\n+      vim.lsp.config('client\"name|with\\tsymbols', {\n+        cmd = server.cmd,\n+      })\n+      local completion = vim.fn.getcompletion('lsp enable cl ', 'cmdline')[1]\n+      return #vim.api.nvim_parse_cmd('lsp enable ' .. completion, {}).args",
            "html_url": "https://github.com/neovim/neovim/pull/36925#discussion_r2616706683",
            "id": 2616706683,
            "in_reply_to_id": 2616701019,
            "line": 113,
            "node_id": "PRRC_kwDOAPphoM6b98Z7",
            "original_commit_id": "d99255032497e35098f455a24c4ef078e8fbe1aa",
            "original_line": 113,
            "original_position": 146,
            "original_start_line": null,
            "path": "test/functional/ex_cmds/lsp_spec.lua",
            "position": 113,
            "pull_request_review_id": 3574742528,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/36925",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2616706683/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-12-14T04:18:44Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2616706683",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/111893501?v=4",
                "events_url": "https://api.github.com/users/brianhuster/events{/privacy}",
                "followers_url": "https://api.github.com/users/brianhuster/followers",
                "following_url": "https://api.github.com/users/brianhuster/following{/other_user}",
                "gists_url": "https://api.github.com/users/brianhuster/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/brianhuster",
                "id": 111893501,
                "login": "brianhuster",
                "node_id": "U_kgDOBqtb_Q",
                "organizations_url": "https://api.github.com/users/brianhuster/orgs",
                "received_events_url": "https://api.github.com/users/brianhuster/received_events",
                "repos_url": "https://api.github.com/users/brianhuster/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/brianhuster/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/brianhuster/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/brianhuster",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/36925#discussion_r2616709092"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/36925"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2616709092"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Oh, I see the problem. I assumed you could escape `|` like you can with a space, so for example, if you had an lsp named `abc | lsp disable def` for some reason, you could enable it with `:lsp enable abc\\ \\|\\ lsp\\ disable\\ def`. I see how that doesn't work. I'll fix that.\r\n\r\n~~This is the perfect timing, because I just found a bug in the implementation of `src/nvim/cmdexpand.c` which means I have to rewrite some completion code anyway. It's proving non-trivial to fix, to expect this fix to take a bit.~~ It was a bug in `blink.cmp`, a plugin that I use.",
            "commit_id": "bd225422a5b75ea8064603d21f7b38da30007910",
            "created_at": "2025-12-14T04:22:13Z",
            "diff_hunk": "@@ -0,0 +1,150 @@\n+local t = require('test.testutil')\n+local n = require('test.functional.testnvim')()\n+local t_lsp = require('test.functional.plugin.lsp.testutil')\n+\n+local clear = n.clear\n+local eq = t.eq\n+local exec_lua = n.exec_lua\n+\n+local create_server_definition = t_lsp.create_server_definition\n+\n+describe(':lsp', function()\n+  before_each(function()\n+    clear()\n+    exec_lua(create_server_definition)\n+    exec_lua(function()\n+      local server = _G._create_server()\n+      vim.lsp.config('dummy', {\n+        filetypes = { 'lua' },\n+        cmd = server.cmd,\n+      })\n+      vim.cmd('set ft=lua')\n+    end)\n+  end)\n+\n+  it('enable with arguments', function()\n+    local is_enabled = exec_lua(function()\n+      vim.cmd('lsp enable dummy')\n+      return vim.lsp.is_enabled('dummy')\n+    end)\n+    eq(true, is_enabled)\n+  end)\n+\n+  it('enable without arguments', function()\n+    local is_enabled = exec_lua(function()\n+      vim.cmd('lsp enable')\n+      return vim.lsp.is_enabled('dummy')\n+    end)\n+    eq(true, is_enabled)\n+  end)\n+\n+  it('disable with arguments', function()\n+    local is_enabled = exec_lua(function()\n+      vim.lsp.enable('dummy')\n+      vim.cmd('lsp disable dummy')\n+      return vim.lsp.is_enabled('dummy')\n+    end)\n+    eq(false, is_enabled)\n+  end)\n+\n+  it('disable without arguments', function()\n+    local is_enabled = exec_lua(function()\n+      vim.lsp.enable('dummy')\n+      vim.cmd('lsp disable')\n+      return vim.lsp.is_enabled('dummy')\n+    end)\n+    eq(false, is_enabled)\n+  end)\n+\n+  it('restart with arguments', function()\n+    local ids_differ = exec_lua(function()\n+      vim.lsp.enable('dummy')\n+      local old_id = vim.lsp.get_clients()[1].id\n+\n+      vim.cmd('lsp restart dummy')\n+      vim.wait(1000, function()\n+        return old_id ~= vim.lsp.get_clients()[1].id\n+      end)\n+      local new_id = vim.lsp.get_clients()[1].id\n+      return old_id ~= new_id\n+    end)\n+    eq(true, ids_differ)\n+  end)\n+\n+  it('restart without arguments', function()\n+    local ids_differ = exec_lua(function()\n+      vim.lsp.enable('dummy')\n+      local old_id = vim.lsp.get_clients()[1].id\n+\n+      vim.cmd('lsp restart')\n+      vim.wait(1000, function()\n+        return old_id ~= vim.lsp.get_clients()[1].id\n+      end)\n+      local new_id = vim.lsp.get_clients()[1].id\n+      return old_id ~= new_id\n+    end)\n+    eq(true, ids_differ)\n+  end)\n+\n+  it('stop with arguments', function()\n+    local running_clients = exec_lua(function()\n+      vim.lsp.enable('dummy')\n+      vim.cmd('lsp stop dummy')\n+      vim.wait(1000, function()\n+        return #vim.lsp.get_clients() == 0\n+      end)\n+      return #vim.lsp.get_clients()\n+    end)\n+    eq(0, running_clients)\n+  end)\n+\n+  it('stop without arguments', function()\n+    local running_clients = exec_lua(function()\n+      vim.lsp.enable('dummy')\n+      vim.cmd('lsp stop')\n+      vim.wait(1000, function()\n+        return #vim.lsp.get_clients() == 0\n+      end)\n+      return #vim.lsp.get_clients()\n+    end)\n+    eq(0, running_clients)\n+  end)\n+\n+  it('subcommand completion', function()\n+    local completions = exec_lua(function()\n+      return vim.fn.getcompletion('lsp ', 'cmdline')\n+    end)\n+    eq({ 'disable', 'enable', 'restart', 'stop' }, completions)\n+  end)\n+\n+  it('argument completion', function()\n+    local completions = exec_lua(function()\n+      return vim.fn.getcompletion('lsp enable ', 'cmdline')\n+    end)\n+    eq({ 'dummy' }, completions)\n+  end)\n+\n+  it('argument completion with spaces', function()\n+    local cmd_length = exec_lua(function()\n+      local server = _G._create_server()\n+      vim.lsp.config('client name with space', {\n+        cmd = server.cmd,\n+      })\n+      local completion = vim.fn.getcompletion('lsp enable cl ', 'cmdline')[1]\n+      return #vim.api.nvim_parse_cmd('lsp enable ' .. completion, {}).args\n+    end)\n+    eq(2, cmd_length)\n+  end)\n+\n+  it('argument completion with special characters', function()\n+    local cmd_length = exec_lua(function()\n+      local server = _G._create_server()\n+      vim.lsp.config('client\"name|with\\tsymbols', {\n+        cmd = server.cmd,\n+      })\n+      local completion = vim.fn.getcompletion('lsp enable cl ', 'cmdline')[1]\n+      return #vim.api.nvim_parse_cmd('lsp enable ' .. completion, {}).args",
            "html_url": "https://github.com/neovim/neovim/pull/36925#discussion_r2616709092",
            "id": 2616709092,
            "in_reply_to_id": 2616701019,
            "line": 113,
            "node_id": "PRRC_kwDOAPphoM6b98_k",
            "original_commit_id": "d99255032497e35098f455a24c4ef078e8fbe1aa",
            "original_line": 113,
            "original_position": 146,
            "original_start_line": null,
            "path": "test/functional/ex_cmds/lsp_spec.lua",
            "position": 113,
            "pull_request_review_id": 3574745329,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/36925",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2616709092/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-12-14T18:03:33Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2616709092",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/51250849?v=4",
                "events_url": "https://api.github.com/users/superatomic/events{/privacy}",
                "followers_url": "https://api.github.com/users/superatomic/followers",
                "following_url": "https://api.github.com/users/superatomic/following{/other_user}",
                "gists_url": "https://api.github.com/users/superatomic/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/superatomic",
                "id": 51250849,
                "login": "superatomic",
                "node_id": "MDQ6VXNlcjUxMjUwODQ5",
                "organizations_url": "https://api.github.com/users/superatomic/orgs",
                "received_events_url": "https://api.github.com/users/superatomic/received_events",
                "repos_url": "https://api.github.com/users/superatomic/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/superatomic/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/superatomic/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/superatomic",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/36925#discussion_r2616715780"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/36925"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2616715780"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Right now you have to escape `|` in argument, but I am suggesting that users don't need to escape it. So with a client name `abc|def`, they could just restart it with `:lsp restart abc|def` instead of `:lsp restart abc\\|def`",
            "commit_id": "bd225422a5b75ea8064603d21f7b38da30007910",
            "created_at": "2025-12-14T04:25:48Z",
            "diff_hunk": "@@ -0,0 +1,150 @@\n+local t = require('test.testutil')\n+local n = require('test.functional.testnvim')()\n+local t_lsp = require('test.functional.plugin.lsp.testutil')\n+\n+local clear = n.clear\n+local eq = t.eq\n+local exec_lua = n.exec_lua\n+\n+local create_server_definition = t_lsp.create_server_definition\n+\n+describe(':lsp', function()\n+  before_each(function()\n+    clear()\n+    exec_lua(create_server_definition)\n+    exec_lua(function()\n+      local server = _G._create_server()\n+      vim.lsp.config('dummy', {\n+        filetypes = { 'lua' },\n+        cmd = server.cmd,\n+      })\n+      vim.cmd('set ft=lua')\n+    end)\n+  end)\n+\n+  it('enable with arguments', function()\n+    local is_enabled = exec_lua(function()\n+      vim.cmd('lsp enable dummy')\n+      return vim.lsp.is_enabled('dummy')\n+    end)\n+    eq(true, is_enabled)\n+  end)\n+\n+  it('enable without arguments', function()\n+    local is_enabled = exec_lua(function()\n+      vim.cmd('lsp enable')\n+      return vim.lsp.is_enabled('dummy')\n+    end)\n+    eq(true, is_enabled)\n+  end)\n+\n+  it('disable with arguments', function()\n+    local is_enabled = exec_lua(function()\n+      vim.lsp.enable('dummy')\n+      vim.cmd('lsp disable dummy')\n+      return vim.lsp.is_enabled('dummy')\n+    end)\n+    eq(false, is_enabled)\n+  end)\n+\n+  it('disable without arguments', function()\n+    local is_enabled = exec_lua(function()\n+      vim.lsp.enable('dummy')\n+      vim.cmd('lsp disable')\n+      return vim.lsp.is_enabled('dummy')\n+    end)\n+    eq(false, is_enabled)\n+  end)\n+\n+  it('restart with arguments', function()\n+    local ids_differ = exec_lua(function()\n+      vim.lsp.enable('dummy')\n+      local old_id = vim.lsp.get_clients()[1].id\n+\n+      vim.cmd('lsp restart dummy')\n+      vim.wait(1000, function()\n+        return old_id ~= vim.lsp.get_clients()[1].id\n+      end)\n+      local new_id = vim.lsp.get_clients()[1].id\n+      return old_id ~= new_id\n+    end)\n+    eq(true, ids_differ)\n+  end)\n+\n+  it('restart without arguments', function()\n+    local ids_differ = exec_lua(function()\n+      vim.lsp.enable('dummy')\n+      local old_id = vim.lsp.get_clients()[1].id\n+\n+      vim.cmd('lsp restart')\n+      vim.wait(1000, function()\n+        return old_id ~= vim.lsp.get_clients()[1].id\n+      end)\n+      local new_id = vim.lsp.get_clients()[1].id\n+      return old_id ~= new_id\n+    end)\n+    eq(true, ids_differ)\n+  end)\n+\n+  it('stop with arguments', function()\n+    local running_clients = exec_lua(function()\n+      vim.lsp.enable('dummy')\n+      vim.cmd('lsp stop dummy')\n+      vim.wait(1000, function()\n+        return #vim.lsp.get_clients() == 0\n+      end)\n+      return #vim.lsp.get_clients()\n+    end)\n+    eq(0, running_clients)\n+  end)\n+\n+  it('stop without arguments', function()\n+    local running_clients = exec_lua(function()\n+      vim.lsp.enable('dummy')\n+      vim.cmd('lsp stop')\n+      vim.wait(1000, function()\n+        return #vim.lsp.get_clients() == 0\n+      end)\n+      return #vim.lsp.get_clients()\n+    end)\n+    eq(0, running_clients)\n+  end)\n+\n+  it('subcommand completion', function()\n+    local completions = exec_lua(function()\n+      return vim.fn.getcompletion('lsp ', 'cmdline')\n+    end)\n+    eq({ 'disable', 'enable', 'restart', 'stop' }, completions)\n+  end)\n+\n+  it('argument completion', function()\n+    local completions = exec_lua(function()\n+      return vim.fn.getcompletion('lsp enable ', 'cmdline')\n+    end)\n+    eq({ 'dummy' }, completions)\n+  end)\n+\n+  it('argument completion with spaces', function()\n+    local cmd_length = exec_lua(function()\n+      local server = _G._create_server()\n+      vim.lsp.config('client name with space', {\n+        cmd = server.cmd,\n+      })\n+      local completion = vim.fn.getcompletion('lsp enable cl ', 'cmdline')[1]\n+      return #vim.api.nvim_parse_cmd('lsp enable ' .. completion, {}).args\n+    end)\n+    eq(2, cmd_length)\n+  end)\n+\n+  it('argument completion with special characters', function()\n+    local cmd_length = exec_lua(function()\n+      local server = _G._create_server()\n+      vim.lsp.config('client\"name|with\\tsymbols', {\n+        cmd = server.cmd,\n+      })\n+      local completion = vim.fn.getcompletion('lsp enable cl ', 'cmdline')[1]\n+      return #vim.api.nvim_parse_cmd('lsp enable ' .. completion, {}).args",
            "html_url": "https://github.com/neovim/neovim/pull/36925#discussion_r2616715780",
            "id": 2616715780,
            "in_reply_to_id": 2616701019,
            "line": 113,
            "node_id": "PRRC_kwDOAPphoM6b9-oE",
            "original_commit_id": "d99255032497e35098f455a24c4ef078e8fbe1aa",
            "original_line": 113,
            "original_position": 146,
            "original_start_line": null,
            "path": "test/functional/ex_cmds/lsp_spec.lua",
            "position": 113,
            "pull_request_review_id": 3574757346,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/36925",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2616715780/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-12-14T04:25:48Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2616715780",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/111893501?v=4",
                "events_url": "https://api.github.com/users/brianhuster/events{/privacy}",
                "followers_url": "https://api.github.com/users/brianhuster/followers",
                "following_url": "https://api.github.com/users/brianhuster/following{/other_user}",
                "gists_url": "https://api.github.com/users/brianhuster/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/brianhuster",
                "id": 111893501,
                "login": "brianhuster",
                "node_id": "U_kgDOBqtb_Q",
                "organizations_url": "https://api.github.com/users/brianhuster/orgs",
                "received_events_url": "https://api.github.com/users/brianhuster/received_events",
                "repos_url": "https://api.github.com/users/brianhuster/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/brianhuster/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/brianhuster/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/brianhuster",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/36925#discussion_r2616719156"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/36925"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2616719156"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "As the code stands right now, `:lsp restart abc\\|def` will not work. I actually think forcing `|` to be escaped is fine (who puts a bar in their lsp name?), but it should definitely work. If this turns out to be a limitation of vim (which I suspect, but have not looked into), I'll work around it by doing what you suggested.",
            "commit_id": "bd225422a5b75ea8064603d21f7b38da30007910",
            "created_at": "2025-12-14T04:34:25Z",
            "diff_hunk": "@@ -0,0 +1,150 @@\n+local t = require('test.testutil')\n+local n = require('test.functional.testnvim')()\n+local t_lsp = require('test.functional.plugin.lsp.testutil')\n+\n+local clear = n.clear\n+local eq = t.eq\n+local exec_lua = n.exec_lua\n+\n+local create_server_definition = t_lsp.create_server_definition\n+\n+describe(':lsp', function()\n+  before_each(function()\n+    clear()\n+    exec_lua(create_server_definition)\n+    exec_lua(function()\n+      local server = _G._create_server()\n+      vim.lsp.config('dummy', {\n+        filetypes = { 'lua' },\n+        cmd = server.cmd,\n+      })\n+      vim.cmd('set ft=lua')\n+    end)\n+  end)\n+\n+  it('enable with arguments', function()\n+    local is_enabled = exec_lua(function()\n+      vim.cmd('lsp enable dummy')\n+      return vim.lsp.is_enabled('dummy')\n+    end)\n+    eq(true, is_enabled)\n+  end)\n+\n+  it('enable without arguments', function()\n+    local is_enabled = exec_lua(function()\n+      vim.cmd('lsp enable')\n+      return vim.lsp.is_enabled('dummy')\n+    end)\n+    eq(true, is_enabled)\n+  end)\n+\n+  it('disable with arguments', function()\n+    local is_enabled = exec_lua(function()\n+      vim.lsp.enable('dummy')\n+      vim.cmd('lsp disable dummy')\n+      return vim.lsp.is_enabled('dummy')\n+    end)\n+    eq(false, is_enabled)\n+  end)\n+\n+  it('disable without arguments', function()\n+    local is_enabled = exec_lua(function()\n+      vim.lsp.enable('dummy')\n+      vim.cmd('lsp disable')\n+      return vim.lsp.is_enabled('dummy')\n+    end)\n+    eq(false, is_enabled)\n+  end)\n+\n+  it('restart with arguments', function()\n+    local ids_differ = exec_lua(function()\n+      vim.lsp.enable('dummy')\n+      local old_id = vim.lsp.get_clients()[1].id\n+\n+      vim.cmd('lsp restart dummy')\n+      vim.wait(1000, function()\n+        return old_id ~= vim.lsp.get_clients()[1].id\n+      end)\n+      local new_id = vim.lsp.get_clients()[1].id\n+      return old_id ~= new_id\n+    end)\n+    eq(true, ids_differ)\n+  end)\n+\n+  it('restart without arguments', function()\n+    local ids_differ = exec_lua(function()\n+      vim.lsp.enable('dummy')\n+      local old_id = vim.lsp.get_clients()[1].id\n+\n+      vim.cmd('lsp restart')\n+      vim.wait(1000, function()\n+        return old_id ~= vim.lsp.get_clients()[1].id\n+      end)\n+      local new_id = vim.lsp.get_clients()[1].id\n+      return old_id ~= new_id\n+    end)\n+    eq(true, ids_differ)\n+  end)\n+\n+  it('stop with arguments', function()\n+    local running_clients = exec_lua(function()\n+      vim.lsp.enable('dummy')\n+      vim.cmd('lsp stop dummy')\n+      vim.wait(1000, function()\n+        return #vim.lsp.get_clients() == 0\n+      end)\n+      return #vim.lsp.get_clients()\n+    end)\n+    eq(0, running_clients)\n+  end)\n+\n+  it('stop without arguments', function()\n+    local running_clients = exec_lua(function()\n+      vim.lsp.enable('dummy')\n+      vim.cmd('lsp stop')\n+      vim.wait(1000, function()\n+        return #vim.lsp.get_clients() == 0\n+      end)\n+      return #vim.lsp.get_clients()\n+    end)\n+    eq(0, running_clients)\n+  end)\n+\n+  it('subcommand completion', function()\n+    local completions = exec_lua(function()\n+      return vim.fn.getcompletion('lsp ', 'cmdline')\n+    end)\n+    eq({ 'disable', 'enable', 'restart', 'stop' }, completions)\n+  end)\n+\n+  it('argument completion', function()\n+    local completions = exec_lua(function()\n+      return vim.fn.getcompletion('lsp enable ', 'cmdline')\n+    end)\n+    eq({ 'dummy' }, completions)\n+  end)\n+\n+  it('argument completion with spaces', function()\n+    local cmd_length = exec_lua(function()\n+      local server = _G._create_server()\n+      vim.lsp.config('client name with space', {\n+        cmd = server.cmd,\n+      })\n+      local completion = vim.fn.getcompletion('lsp enable cl ', 'cmdline')[1]\n+      return #vim.api.nvim_parse_cmd('lsp enable ' .. completion, {}).args\n+    end)\n+    eq(2, cmd_length)\n+  end)\n+\n+  it('argument completion with special characters', function()\n+    local cmd_length = exec_lua(function()\n+      local server = _G._create_server()\n+      vim.lsp.config('client\"name|with\\tsymbols', {\n+        cmd = server.cmd,\n+      })\n+      local completion = vim.fn.getcompletion('lsp enable cl ', 'cmdline')[1]\n+      return #vim.api.nvim_parse_cmd('lsp enable ' .. completion, {}).args",
            "html_url": "https://github.com/neovim/neovim/pull/36925#discussion_r2616719156",
            "id": 2616719156,
            "in_reply_to_id": 2616701019,
            "line": 113,
            "node_id": "PRRC_kwDOAPphoM6b9_c0",
            "original_commit_id": "d99255032497e35098f455a24c4ef078e8fbe1aa",
            "original_line": 113,
            "original_position": 146,
            "original_start_line": null,
            "path": "test/functional/ex_cmds/lsp_spec.lua",
            "position": 113,
            "pull_request_review_id": 3574760842,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/36925",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2616719156/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-12-14T04:37:57Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2616719156",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/51250849?v=4",
                "events_url": "https://api.github.com/users/superatomic/events{/privacy}",
                "followers_url": "https://api.github.com/users/superatomic/followers",
                "following_url": "https://api.github.com/users/superatomic/following{/other_user}",
                "gists_url": "https://api.github.com/users/superatomic/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/superatomic",
                "id": 51250849,
                "login": "superatomic",
                "node_id": "MDQ6VXNlcjUxMjUwODQ5",
                "organizations_url": "https://api.github.com/users/superatomic/orgs",
                "received_events_url": "https://api.github.com/users/superatomic/received_events",
                "repos_url": "https://api.github.com/users/superatomic/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/superatomic/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/superatomic/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/superatomic",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/36925#discussion_r2617372805"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/36925"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2617372805"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Resolved.",
            "commit_id": "bd225422a5b75ea8064603d21f7b38da30007910",
            "created_at": "2025-12-14T18:08:53Z",
            "diff_hunk": "@@ -0,0 +1,150 @@\n+local t = require('test.testutil')\n+local n = require('test.functional.testnvim')()\n+local t_lsp = require('test.functional.plugin.lsp.testutil')\n+\n+local clear = n.clear\n+local eq = t.eq\n+local exec_lua = n.exec_lua\n+\n+local create_server_definition = t_lsp.create_server_definition\n+\n+describe(':lsp', function()\n+  before_each(function()\n+    clear()\n+    exec_lua(create_server_definition)\n+    exec_lua(function()\n+      local server = _G._create_server()\n+      vim.lsp.config('dummy', {\n+        filetypes = { 'lua' },\n+        cmd = server.cmd,\n+      })\n+      vim.cmd('set ft=lua')\n+    end)\n+  end)\n+\n+  it('enable with arguments', function()\n+    local is_enabled = exec_lua(function()\n+      vim.cmd('lsp enable dummy')\n+      return vim.lsp.is_enabled('dummy')\n+    end)\n+    eq(true, is_enabled)\n+  end)\n+\n+  it('enable without arguments', function()\n+    local is_enabled = exec_lua(function()\n+      vim.cmd('lsp enable')\n+      return vim.lsp.is_enabled('dummy')\n+    end)\n+    eq(true, is_enabled)\n+  end)\n+\n+  it('disable with arguments', function()\n+    local is_enabled = exec_lua(function()\n+      vim.lsp.enable('dummy')\n+      vim.cmd('lsp disable dummy')\n+      return vim.lsp.is_enabled('dummy')\n+    end)\n+    eq(false, is_enabled)\n+  end)\n+\n+  it('disable without arguments', function()\n+    local is_enabled = exec_lua(function()\n+      vim.lsp.enable('dummy')\n+      vim.cmd('lsp disable')\n+      return vim.lsp.is_enabled('dummy')\n+    end)\n+    eq(false, is_enabled)\n+  end)\n+\n+  it('restart with arguments', function()\n+    local ids_differ = exec_lua(function()\n+      vim.lsp.enable('dummy')\n+      local old_id = vim.lsp.get_clients()[1].id\n+\n+      vim.cmd('lsp restart dummy')\n+      vim.wait(1000, function()\n+        return old_id ~= vim.lsp.get_clients()[1].id\n+      end)\n+      local new_id = vim.lsp.get_clients()[1].id\n+      return old_id ~= new_id\n+    end)\n+    eq(true, ids_differ)\n+  end)\n+\n+  it('restart without arguments', function()\n+    local ids_differ = exec_lua(function()\n+      vim.lsp.enable('dummy')\n+      local old_id = vim.lsp.get_clients()[1].id\n+\n+      vim.cmd('lsp restart')\n+      vim.wait(1000, function()\n+        return old_id ~= vim.lsp.get_clients()[1].id\n+      end)\n+      local new_id = vim.lsp.get_clients()[1].id\n+      return old_id ~= new_id\n+    end)\n+    eq(true, ids_differ)\n+  end)\n+\n+  it('stop with arguments', function()\n+    local running_clients = exec_lua(function()\n+      vim.lsp.enable('dummy')\n+      vim.cmd('lsp stop dummy')\n+      vim.wait(1000, function()\n+        return #vim.lsp.get_clients() == 0\n+      end)\n+      return #vim.lsp.get_clients()\n+    end)\n+    eq(0, running_clients)\n+  end)\n+\n+  it('stop without arguments', function()\n+    local running_clients = exec_lua(function()\n+      vim.lsp.enable('dummy')\n+      vim.cmd('lsp stop')\n+      vim.wait(1000, function()\n+        return #vim.lsp.get_clients() == 0\n+      end)\n+      return #vim.lsp.get_clients()\n+    end)\n+    eq(0, running_clients)\n+  end)\n+\n+  it('subcommand completion', function()\n+    local completions = exec_lua(function()\n+      return vim.fn.getcompletion('lsp ', 'cmdline')\n+    end)\n+    eq({ 'disable', 'enable', 'restart', 'stop' }, completions)\n+  end)\n+\n+  it('argument completion', function()\n+    local completions = exec_lua(function()\n+      return vim.fn.getcompletion('lsp enable ', 'cmdline')\n+    end)\n+    eq({ 'dummy' }, completions)\n+  end)\n+\n+  it('argument completion with spaces', function()\n+    local cmd_length = exec_lua(function()\n+      local server = _G._create_server()\n+      vim.lsp.config('client name with space', {\n+        cmd = server.cmd,\n+      })\n+      local completion = vim.fn.getcompletion('lsp enable cl ', 'cmdline')[1]\n+      return #vim.api.nvim_parse_cmd('lsp enable ' .. completion, {}).args\n+    end)\n+    eq(2, cmd_length)\n+  end)\n+\n+  it('argument completion with special characters', function()\n+    local cmd_length = exec_lua(function()\n+      local server = _G._create_server()\n+      vim.lsp.config('client\"name|with\\tsymbols', {\n+        cmd = server.cmd,\n+      })\n+      local completion = vim.fn.getcompletion('lsp enable cl ', 'cmdline')[1]\n+      return #vim.api.nvim_parse_cmd('lsp enable ' .. completion, {}).args",
            "html_url": "https://github.com/neovim/neovim/pull/36925#discussion_r2617372805",
            "id": 2617372805,
            "in_reply_to_id": 2616701019,
            "line": 113,
            "node_id": "PRRC_kwDOAPphoM6cAfCF",
            "original_commit_id": "d99255032497e35098f455a24c4ef078e8fbe1aa",
            "original_line": 113,
            "original_position": 146,
            "original_start_line": null,
            "path": "test/functional/ex_cmds/lsp_spec.lua",
            "position": 113,
            "pull_request_review_id": 3575699415,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/36925",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2617372805/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-12-14T18:08:53Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2617372805",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/51250849?v=4",
                "events_url": "https://api.github.com/users/superatomic/events{/privacy}",
                "followers_url": "https://api.github.com/users/superatomic/followers",
                "following_url": "https://api.github.com/users/superatomic/following{/other_user}",
                "gists_url": "https://api.github.com/users/superatomic/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/superatomic",
                "id": 51250849,
                "login": "superatomic",
                "node_id": "MDQ6VXNlcjUxMjUwODQ5",
                "organizations_url": "https://api.github.com/users/superatomic/orgs",
                "received_events_url": "https://api.github.com/users/superatomic/received_events",
                "repos_url": "https://api.github.com/users/superatomic/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/superatomic/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/superatomic/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/superatomic",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/36925#discussion_r2621825840"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/36925"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2621825840"
                }
            },
            "author_association": "MEMBER",
            "body": "this deserves its own section, it doesn't really fit into any other section.\n\n```suggestion\n==============================================================================\nCOMMANDS                                                    *:lsp*\n```",
            "commit_id": "bd225422a5b75ea8064603d21f7b38da30007910",
            "created_at": "2025-12-16T05:17:24Z",
            "diff_hunk": "@@ -121,6 +121,29 @@ To remove or override BUFFER-LOCAL defaults, define a |LspAttach| handler: >lua\n       end,\n     })\n <\n+\n+COMMANDS                                                    *:lsp*",
            "html_url": "https://github.com/neovim/neovim/pull/36925#discussion_r2621825840",
            "id": 2621825840,
            "line": 120,
            "node_id": "PRRC_kwDOAPphoM6cReMw",
            "original_commit_id": "cdd252abd35753bf154d5733fe3d127f53dda2a3",
            "original_line": 120,
            "original_position": 5,
            "original_start_line": null,
            "path": "runtime/doc/lsp.txt",
            "position": 5,
            "pull_request_review_id": 3581361833,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/36925",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2621825840/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-12-16T05:17:24Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2621825840",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/36925#discussion_r2621828328"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/36925"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2621828328"
                }
            },
            "author_association": "MEMBER",
            "body": "should be careful to use mostly the same language as `:help vim.lsp.enable()` , and also minimize explanation in these command docs if possible, instead refer to to |vim.lsp.enable()| , because the details are important, somewhat subtle, and want to guide users to find them in one place.\n\nnot a blocker, just mentioning. i will do a pass on the docs later.",
            "commit_id": "bd225422a5b75ea8064603d21f7b38da30007910",
            "created_at": "2025-12-16T05:18:42Z",
            "diff_hunk": "@@ -121,6 +121,29 @@ To remove or override BUFFER-LOCAL defaults, define a |LspAttach| handler: >lua\n       end,\n     })\n <\n+\n+COMMANDS                                                    *:lsp*\n+\n+:lsp enable {name}?                                       *:lsp-enable*\n+    Enables the given lsp clients. If no names are given, all clients\n+    configured with |vim.lsp.config()| with a filetype matching the current\n+    buffer's filetype are enabled. Use |vim.lsp.enable()| for non-interactive",
            "html_url": "https://github.com/neovim/neovim/pull/36925#discussion_r2621828328",
            "id": 2621828328,
            "line": 125,
            "node_id": "PRRC_kwDOAPphoM6cRezo",
            "original_commit_id": "cdd252abd35753bf154d5733fe3d127f53dda2a3",
            "original_line": 125,
            "original_position": 10,
            "original_start_line": 128,
            "path": "runtime/doc/lsp.txt",
            "position": 10,
            "pull_request_review_id": 3581365147,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/36925",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2621828328/reactions"
            },
            "side": "RIGHT",
            "start_line": 123,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-12-16T05:18:57Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2621828328",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/36925#discussion_r2621831509"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/36925"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2621831509"
                }
            },
            "author_association": "MEMBER",
            "body": "just a nit to avoid this becoming a pattern: if anything is going to be aliased, alias `levels` , not the specific level names.\n```suggestion\nlocal loglevel = vim.log.levels\n```",
            "commit_id": "cdd252abd35753bf154d5733fe3d127f53dda2a3",
            "created_at": "2025-12-16T05:20:26Z",
            "diff_hunk": "@@ -0,0 +1,223 @@\n+local api = vim.api\n+local lsp = vim.lsp\n+local ERROR = vim.log.levels.ERROR",
            "html_url": "https://github.com/neovim/neovim/pull/36925#discussion_r2621831509",
            "id": 2621831509,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6cRflV",
            "original_commit_id": "cdd252abd35753bf154d5733fe3d127f53dda2a3",
            "original_line": 3,
            "original_position": 3,
            "original_start_line": null,
            "path": "runtime/lua/vim/_core/ex_cmd/lsp.lua",
            "position": 1,
            "pull_request_review_id": 3581368406,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/36925",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2621831509/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-12-16T05:20:26Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2621831509",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/36925#discussion_r2621841567"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/36925"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2621841567"
                }
            },
            "author_association": "MEMBER",
            "body": "The general idea for `_core` stuff is that it has a similar layout as the C modules. So this should be named `ex_lsp` since that is how we name the C thing. (And hopefully it's understand that everything in `_core` is private.)",
            "commit_id": "cdd252abd35753bf154d5733fe3d127f53dda2a3",
            "created_at": "2025-12-16T05:25:45Z",
            "diff_hunk": "@@ -0,0 +1,223 @@\n+local api = vim.api\n+local lsp = vim.lsp\n+local ERROR = vim.log.levels.ERROR\n+\n+local M = {}\n+\n+--- @return string[]\n+local function get_client_names()\n+  local client_names = vim\n+    .iter(lsp.get_clients())\n+    :map(function(client)\n+      return client.name\n+    end)\n+    :totable()\n+  return vim.list.unique(client_names)\n+end\n+\n+--- @return string[]\n+local function get_config_names()\n+  local config_names = vim\n+    .iter(api.nvim_get_runtime_file('lsp/*.lua', true))\n+    --- @param path string\n+    :map(function(path)\n+      local file_name = path:match('[^/]*.lua$')\n+      return file_name:sub(0, #file_name - 4)\n+    end)\n+    :totable()\n+\n+  --- @diagnostic disable-next-line\n+  vim.list_extend(config_names, vim.tbl_keys(lsp.config._configs))\n+\n+  return vim\n+    .iter(vim.list.unique(config_names))\n+    --- @param name string\n+    :filter(function(name)\n+      return name ~= '*'\n+    end)\n+    :totable()\n+end\n+\n+--- @return string[]\n+local function get_enabled_config_names()\n+  return vim\n+    .iter(get_config_names())\n+    --- @param name string\n+    :filter(function(name)\n+      return lsp.is_enabled(name)\n+    end)\n+    :totable()\n+end\n+\n+--- @return string[]\n+local function get_disabled_config_names()\n+  return vim\n+    .iter(get_config_names())\n+    --- @param name string\n+    :filter(function(name)\n+      return not lsp.is_enabled(name)\n+    end)\n+    :totable()\n+end\n+\n+local complete_args = {\n+  enable = get_disabled_config_names,\n+  disable = get_enabled_config_names,\n+  restart = get_client_names,\n+  stop = get_client_names,\n+}\n+\n+--- @param names string[]\n+--- @param enable? boolean\n+local function checked_enable(names, enable)\n+  for _, name in ipairs(names) do\n+    if name:find('*') == nil and lsp.config[name] ~= nil then\n+      lsp.enable(name, enable)\n+    else\n+      vim.notify((\"No client config named '%s'\"):format(name), ERROR)\n+    end\n+  end\n+end\n+\n+--- @param config_names string[]\n+local function ex_lsp_enable(config_names)\n+  -- Default to enabling all clients matching the filetype of the current buffer.\n+  if #config_names == 0 then\n+    local filetype = vim.bo.filetype\n+    for _, name in ipairs(get_config_names()) do\n+      local filetypes = lsp.config[name].filetypes\n+      if filetypes and vim.tbl_contains(filetypes, filetype) then\n+        table.insert(config_names, name)\n+      end\n+    end\n+  end\n+\n+  checked_enable(config_names)\n+end\n+\n+--- @param config_names string[]\n+local function ex_lsp_disable(config_names)\n+  -- Default to disabling all clients attached to the current buffer.\n+  if #config_names == 0 then\n+    config_names = vim\n+      .iter(lsp.get_clients { bufnr = api.nvim_get_current_buf() })\n+      :map(function(client)\n+        return client.name\n+      end)\n+      :filter(function(name)\n+        return lsp.config[name] ~= nil\n+      end)\n+      :totable()\n+  end\n+\n+  checked_enable(config_names, false)\n+end\n+\n+--- @param client_names string[]\n+--- @return vim.lsp.Client[]\n+local function get_clients_from_names(client_names)\n+  -- Default to stopping all active clients attached to the current buffer.\n+  if #client_names == 0 then\n+    return lsp.get_clients { bufnr = api.nvim_get_current_buf() }\n+  else\n+    return vim\n+      .iter(client_names)\n+      :map(function(name)\n+        local clients = lsp.get_clients { name = name }\n+        if #clients == 0 then\n+          vim.notify((\"No active clients named '%s'\"):format(name), ERROR)\n+        end\n+        return clients\n+      end)\n+      :flatten()\n+      :totable()\n+  end\n+end\n+\n+--- @param client_names string[]\n+local function ex_lsp_restart(client_names)\n+  local clients = get_clients_from_names(client_names)\n+\n+  for _, client in ipairs(clients) do\n+    --- @type integer[]\n+    local attached_buffers = vim.tbl_keys(client.attached_buffers)\n+\n+    -- Reattach new client once the old one exits\n+    api.nvim_create_autocmd('LspDetach', {\n+      group = api.nvim_create_augroup('nvim.lsp.ex_restart_' .. client.id, {}),\n+      callback = function(info)\n+        if info.data.client_id ~= client.id then\n+          return\n+        end\n+\n+        local new_client_id = lsp.start(client.config, { attach = false })\n+        if new_client_id then\n+          for _, buffer in ipairs(attached_buffers) do\n+            lsp.buf_attach_client(buffer, new_client_id)\n+          end\n+        end\n+\n+        return true -- Delete autocmd\n+      end,\n+    })\n+\n+    client:stop(client.exit_timeout)\n+  end\n+end\n+\n+--- @param client_names string[]\n+local function ex_lsp_stop(client_names)\n+  local clients = get_clients_from_names(client_names)\n+\n+  for _, client in ipairs(clients) do\n+    client:stop(client.exit_timeout)\n+  end\n+end\n+\n+local actions = {\n+  enable = ex_lsp_enable,\n+  disable = ex_lsp_disable,\n+  restart = ex_lsp_restart,\n+  stop = ex_lsp_stop,\n+}\n+\n+local available_subcmds = vim.tbl_keys(actions)\n+\n+--- Use for `:lsp {subcmd} {name}?` command\n+--- @param args string\n+M.lsp = function(args)",
            "html_url": "https://github.com/neovim/neovim/pull/36925#discussion_r2621841567",
            "id": 2621841567,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6cRiCf",
            "original_commit_id": "cdd252abd35753bf154d5733fe3d127f53dda2a3",
            "original_line": 188,
            "original_position": 188,
            "original_start_line": null,
            "path": "runtime/lua/vim/_core/ex_cmd/lsp.lua",
            "position": 1,
            "pull_request_review_id": 3581379424,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/36925",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2621841567/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-12-16T05:25:45Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2621841567",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/36925#discussion_r2621841761"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/36925"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2621841761"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\nM.ex_lsp = function(args)\n```",
            "commit_id": "cdd252abd35753bf154d5733fe3d127f53dda2a3",
            "created_at": "2025-12-16T05:25:54Z",
            "diff_hunk": "@@ -0,0 +1,223 @@\n+local api = vim.api\n+local lsp = vim.lsp\n+local ERROR = vim.log.levels.ERROR\n+\n+local M = {}\n+\n+--- @return string[]\n+local function get_client_names()\n+  local client_names = vim\n+    .iter(lsp.get_clients())\n+    :map(function(client)\n+      return client.name\n+    end)\n+    :totable()\n+  return vim.list.unique(client_names)\n+end\n+\n+--- @return string[]\n+local function get_config_names()\n+  local config_names = vim\n+    .iter(api.nvim_get_runtime_file('lsp/*.lua', true))\n+    --- @param path string\n+    :map(function(path)\n+      local file_name = path:match('[^/]*.lua$')\n+      return file_name:sub(0, #file_name - 4)\n+    end)\n+    :totable()\n+\n+  --- @diagnostic disable-next-line\n+  vim.list_extend(config_names, vim.tbl_keys(lsp.config._configs))\n+\n+  return vim\n+    .iter(vim.list.unique(config_names))\n+    --- @param name string\n+    :filter(function(name)\n+      return name ~= '*'\n+    end)\n+    :totable()\n+end\n+\n+--- @return string[]\n+local function get_enabled_config_names()\n+  return vim\n+    .iter(get_config_names())\n+    --- @param name string\n+    :filter(function(name)\n+      return lsp.is_enabled(name)\n+    end)\n+    :totable()\n+end\n+\n+--- @return string[]\n+local function get_disabled_config_names()\n+  return vim\n+    .iter(get_config_names())\n+    --- @param name string\n+    :filter(function(name)\n+      return not lsp.is_enabled(name)\n+    end)\n+    :totable()\n+end\n+\n+local complete_args = {\n+  enable = get_disabled_config_names,\n+  disable = get_enabled_config_names,\n+  restart = get_client_names,\n+  stop = get_client_names,\n+}\n+\n+--- @param names string[]\n+--- @param enable? boolean\n+local function checked_enable(names, enable)\n+  for _, name in ipairs(names) do\n+    if name:find('*') == nil and lsp.config[name] ~= nil then\n+      lsp.enable(name, enable)\n+    else\n+      vim.notify((\"No client config named '%s'\"):format(name), ERROR)\n+    end\n+  end\n+end\n+\n+--- @param config_names string[]\n+local function ex_lsp_enable(config_names)\n+  -- Default to enabling all clients matching the filetype of the current buffer.\n+  if #config_names == 0 then\n+    local filetype = vim.bo.filetype\n+    for _, name in ipairs(get_config_names()) do\n+      local filetypes = lsp.config[name].filetypes\n+      if filetypes and vim.tbl_contains(filetypes, filetype) then\n+        table.insert(config_names, name)\n+      end\n+    end\n+  end\n+\n+  checked_enable(config_names)\n+end\n+\n+--- @param config_names string[]\n+local function ex_lsp_disable(config_names)\n+  -- Default to disabling all clients attached to the current buffer.\n+  if #config_names == 0 then\n+    config_names = vim\n+      .iter(lsp.get_clients { bufnr = api.nvim_get_current_buf() })\n+      :map(function(client)\n+        return client.name\n+      end)\n+      :filter(function(name)\n+        return lsp.config[name] ~= nil\n+      end)\n+      :totable()\n+  end\n+\n+  checked_enable(config_names, false)\n+end\n+\n+--- @param client_names string[]\n+--- @return vim.lsp.Client[]\n+local function get_clients_from_names(client_names)\n+  -- Default to stopping all active clients attached to the current buffer.\n+  if #client_names == 0 then\n+    return lsp.get_clients { bufnr = api.nvim_get_current_buf() }\n+  else\n+    return vim\n+      .iter(client_names)\n+      :map(function(name)\n+        local clients = lsp.get_clients { name = name }\n+        if #clients == 0 then\n+          vim.notify((\"No active clients named '%s'\"):format(name), ERROR)\n+        end\n+        return clients\n+      end)\n+      :flatten()\n+      :totable()\n+  end\n+end\n+\n+--- @param client_names string[]\n+local function ex_lsp_restart(client_names)\n+  local clients = get_clients_from_names(client_names)\n+\n+  for _, client in ipairs(clients) do\n+    --- @type integer[]\n+    local attached_buffers = vim.tbl_keys(client.attached_buffers)\n+\n+    -- Reattach new client once the old one exits\n+    api.nvim_create_autocmd('LspDetach', {\n+      group = api.nvim_create_augroup('nvim.lsp.ex_restart_' .. client.id, {}),\n+      callback = function(info)\n+        if info.data.client_id ~= client.id then\n+          return\n+        end\n+\n+        local new_client_id = lsp.start(client.config, { attach = false })\n+        if new_client_id then\n+          for _, buffer in ipairs(attached_buffers) do\n+            lsp.buf_attach_client(buffer, new_client_id)\n+          end\n+        end\n+\n+        return true -- Delete autocmd\n+      end,\n+    })\n+\n+    client:stop(client.exit_timeout)\n+  end\n+end\n+\n+--- @param client_names string[]\n+local function ex_lsp_stop(client_names)\n+  local clients = get_clients_from_names(client_names)\n+\n+  for _, client in ipairs(clients) do\n+    client:stop(client.exit_timeout)\n+  end\n+end\n+\n+local actions = {\n+  enable = ex_lsp_enable,\n+  disable = ex_lsp_disable,\n+  restart = ex_lsp_restart,\n+  stop = ex_lsp_stop,\n+}\n+\n+local available_subcmds = vim.tbl_keys(actions)\n+\n+--- Use for `:lsp {subcmd} {name}?` command\n+--- @param args string\n+M.lsp = function(args)",
            "html_url": "https://github.com/neovim/neovim/pull/36925#discussion_r2621841761",
            "id": 2621841761,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6cRiFh",
            "original_commit_id": "cdd252abd35753bf154d5733fe3d127f53dda2a3",
            "original_line": 188,
            "original_position": 188,
            "original_start_line": null,
            "path": "runtime/lua/vim/_core/ex_cmd/lsp.lua",
            "position": 1,
            "pull_request_review_id": 3581379692,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/36925",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2621841761/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-12-16T05:25:54Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2621841761",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/36925#discussion_r2621842926"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/36925"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2621842926"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\n--- Implements command: `:lsp {subcmd} {name}?`.\n```",
            "commit_id": "cdd252abd35753bf154d5733fe3d127f53dda2a3",
            "created_at": "2025-12-16T05:26:35Z",
            "diff_hunk": "@@ -0,0 +1,223 @@\n+local api = vim.api\n+local lsp = vim.lsp\n+local ERROR = vim.log.levels.ERROR\n+\n+local M = {}\n+\n+--- @return string[]\n+local function get_client_names()\n+  local client_names = vim\n+    .iter(lsp.get_clients())\n+    :map(function(client)\n+      return client.name\n+    end)\n+    :totable()\n+  return vim.list.unique(client_names)\n+end\n+\n+--- @return string[]\n+local function get_config_names()\n+  local config_names = vim\n+    .iter(api.nvim_get_runtime_file('lsp/*.lua', true))\n+    --- @param path string\n+    :map(function(path)\n+      local file_name = path:match('[^/]*.lua$')\n+      return file_name:sub(0, #file_name - 4)\n+    end)\n+    :totable()\n+\n+  --- @diagnostic disable-next-line\n+  vim.list_extend(config_names, vim.tbl_keys(lsp.config._configs))\n+\n+  return vim\n+    .iter(vim.list.unique(config_names))\n+    --- @param name string\n+    :filter(function(name)\n+      return name ~= '*'\n+    end)\n+    :totable()\n+end\n+\n+--- @return string[]\n+local function get_enabled_config_names()\n+  return vim\n+    .iter(get_config_names())\n+    --- @param name string\n+    :filter(function(name)\n+      return lsp.is_enabled(name)\n+    end)\n+    :totable()\n+end\n+\n+--- @return string[]\n+local function get_disabled_config_names()\n+  return vim\n+    .iter(get_config_names())\n+    --- @param name string\n+    :filter(function(name)\n+      return not lsp.is_enabled(name)\n+    end)\n+    :totable()\n+end\n+\n+local complete_args = {\n+  enable = get_disabled_config_names,\n+  disable = get_enabled_config_names,\n+  restart = get_client_names,\n+  stop = get_client_names,\n+}\n+\n+--- @param names string[]\n+--- @param enable? boolean\n+local function checked_enable(names, enable)\n+  for _, name in ipairs(names) do\n+    if name:find('*') == nil and lsp.config[name] ~= nil then\n+      lsp.enable(name, enable)\n+    else\n+      vim.notify((\"No client config named '%s'\"):format(name), ERROR)\n+    end\n+  end\n+end\n+\n+--- @param config_names string[]\n+local function ex_lsp_enable(config_names)\n+  -- Default to enabling all clients matching the filetype of the current buffer.\n+  if #config_names == 0 then\n+    local filetype = vim.bo.filetype\n+    for _, name in ipairs(get_config_names()) do\n+      local filetypes = lsp.config[name].filetypes\n+      if filetypes and vim.tbl_contains(filetypes, filetype) then\n+        table.insert(config_names, name)\n+      end\n+    end\n+  end\n+\n+  checked_enable(config_names)\n+end\n+\n+--- @param config_names string[]\n+local function ex_lsp_disable(config_names)\n+  -- Default to disabling all clients attached to the current buffer.\n+  if #config_names == 0 then\n+    config_names = vim\n+      .iter(lsp.get_clients { bufnr = api.nvim_get_current_buf() })\n+      :map(function(client)\n+        return client.name\n+      end)\n+      :filter(function(name)\n+        return lsp.config[name] ~= nil\n+      end)\n+      :totable()\n+  end\n+\n+  checked_enable(config_names, false)\n+end\n+\n+--- @param client_names string[]\n+--- @return vim.lsp.Client[]\n+local function get_clients_from_names(client_names)\n+  -- Default to stopping all active clients attached to the current buffer.\n+  if #client_names == 0 then\n+    return lsp.get_clients { bufnr = api.nvim_get_current_buf() }\n+  else\n+    return vim\n+      .iter(client_names)\n+      :map(function(name)\n+        local clients = lsp.get_clients { name = name }\n+        if #clients == 0 then\n+          vim.notify((\"No active clients named '%s'\"):format(name), ERROR)\n+        end\n+        return clients\n+      end)\n+      :flatten()\n+      :totable()\n+  end\n+end\n+\n+--- @param client_names string[]\n+local function ex_lsp_restart(client_names)\n+  local clients = get_clients_from_names(client_names)\n+\n+  for _, client in ipairs(clients) do\n+    --- @type integer[]\n+    local attached_buffers = vim.tbl_keys(client.attached_buffers)\n+\n+    -- Reattach new client once the old one exits\n+    api.nvim_create_autocmd('LspDetach', {\n+      group = api.nvim_create_augroup('nvim.lsp.ex_restart_' .. client.id, {}),\n+      callback = function(info)\n+        if info.data.client_id ~= client.id then\n+          return\n+        end\n+\n+        local new_client_id = lsp.start(client.config, { attach = false })\n+        if new_client_id then\n+          for _, buffer in ipairs(attached_buffers) do\n+            lsp.buf_attach_client(buffer, new_client_id)\n+          end\n+        end\n+\n+        return true -- Delete autocmd\n+      end,\n+    })\n+\n+    client:stop(client.exit_timeout)\n+  end\n+end\n+\n+--- @param client_names string[]\n+local function ex_lsp_stop(client_names)\n+  local clients = get_clients_from_names(client_names)\n+\n+  for _, client in ipairs(clients) do\n+    client:stop(client.exit_timeout)\n+  end\n+end\n+\n+local actions = {\n+  enable = ex_lsp_enable,\n+  disable = ex_lsp_disable,\n+  restart = ex_lsp_restart,\n+  stop = ex_lsp_stop,\n+}\n+\n+local available_subcmds = vim.tbl_keys(actions)\n+\n+--- Use for `:lsp {subcmd} {name}?` command",
            "html_url": "https://github.com/neovim/neovim/pull/36925#discussion_r2621842926",
            "id": 2621842926,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6cRiXu",
            "original_commit_id": "cdd252abd35753bf154d5733fe3d127f53dda2a3",
            "original_line": 186,
            "original_position": 186,
            "original_start_line": null,
            "path": "runtime/lua/vim/_core/ex_cmd/lsp.lua",
            "position": 1,
            "pull_request_review_id": 3581380935,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/36925",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2621842926/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-12-16T05:26:35Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2621842926",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/36925#discussion_r2621854103"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/36925"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2621854103"
                }
            },
            "author_association": "MEMBER",
            "body": "For reference: builtin support for subcommands was proposed in https://github.com/neovim/neovim/pull/29116 in the Lua layer, but it probabably should be part of `nvim_create_user_command`.",
            "commit_id": "bd225422a5b75ea8064603d21f7b38da30007910",
            "created_at": "2025-12-16T05:33:09Z",
            "diff_hunk": "@@ -0,0 +1,223 @@\n+local api = vim.api\n+local lsp = vim.lsp\n+local ERROR = vim.log.levels.ERROR\n+\n+local M = {}\n+\n+--- @return string[]\n+local function get_client_names()\n+  local client_names = vim\n+    .iter(lsp.get_clients())\n+    :map(function(client)\n+      return client.name\n+    end)\n+    :totable()\n+  return vim.list.unique(client_names)\n+end\n+\n+--- @return string[]\n+local function get_config_names()\n+  local config_names = vim\n+    .iter(api.nvim_get_runtime_file('lsp/*.lua', true))\n+    --- @param path string\n+    :map(function(path)\n+      local file_name = path:match('[^/]*.lua$')\n+      return file_name:sub(0, #file_name - 4)\n+    end)\n+    :totable()\n+\n+  --- @diagnostic disable-next-line\n+  vim.list_extend(config_names, vim.tbl_keys(lsp.config._configs))\n+\n+  return vim\n+    .iter(vim.list.unique(config_names))\n+    --- @param name string\n+    :filter(function(name)\n+      return name ~= '*'\n+    end)\n+    :totable()\n+end\n+\n+--- @return string[]\n+local function get_enabled_config_names()\n+  return vim\n+    .iter(get_config_names())\n+    --- @param name string\n+    :filter(function(name)\n+      return lsp.is_enabled(name)\n+    end)\n+    :totable()\n+end\n+\n+--- @return string[]\n+local function get_disabled_config_names()\n+  return vim\n+    .iter(get_config_names())\n+    --- @param name string\n+    :filter(function(name)\n+      return not lsp.is_enabled(name)\n+    end)\n+    :totable()\n+end\n+\n+local complete_args = {\n+  enable = get_disabled_config_names,\n+  disable = get_enabled_config_names,\n+  restart = get_client_names,\n+  stop = get_client_names,\n+}\n+\n+--- @param names string[]\n+--- @param enable? boolean\n+local function checked_enable(names, enable)\n+  for _, name in ipairs(names) do\n+    if name:find('*') == nil and lsp.config[name] ~= nil then\n+      lsp.enable(name, enable)\n+    else\n+      vim.notify((\"No client config named '%s'\"):format(name), ERROR)\n+    end\n+  end\n+end\n+\n+--- @param config_names string[]\n+local function ex_lsp_enable(config_names)\n+  -- Default to enabling all clients matching the filetype of the current buffer.\n+  if #config_names == 0 then\n+    local filetype = vim.bo.filetype\n+    for _, name in ipairs(get_config_names()) do\n+      local filetypes = lsp.config[name].filetypes\n+      if filetypes and vim.tbl_contains(filetypes, filetype) then\n+        table.insert(config_names, name)\n+      end\n+    end\n+  end\n+\n+  checked_enable(config_names)\n+end\n+\n+--- @param config_names string[]\n+local function ex_lsp_disable(config_names)\n+  -- Default to disabling all clients attached to the current buffer.\n+  if #config_names == 0 then\n+    config_names = vim\n+      .iter(lsp.get_clients { bufnr = api.nvim_get_current_buf() })\n+      :map(function(client)\n+        return client.name\n+      end)\n+      :filter(function(name)\n+        return lsp.config[name] ~= nil\n+      end)\n+      :totable()\n+  end\n+\n+  checked_enable(config_names, false)\n+end\n+\n+--- @param client_names string[]\n+--- @return vim.lsp.Client[]\n+local function get_clients_from_names(client_names)\n+  -- Default to stopping all active clients attached to the current buffer.\n+  if #client_names == 0 then\n+    return lsp.get_clients { bufnr = api.nvim_get_current_buf() }\n+  else\n+    return vim\n+      .iter(client_names)\n+      :map(function(name)\n+        local clients = lsp.get_clients { name = name }\n+        if #clients == 0 then\n+          vim.notify((\"No active clients named '%s'\"):format(name), ERROR)\n+        end\n+        return clients\n+      end)\n+      :flatten()\n+      :totable()\n+  end\n+end\n+\n+--- @param client_names string[]\n+local function ex_lsp_restart(client_names)\n+  local clients = get_clients_from_names(client_names)\n+\n+  for _, client in ipairs(clients) do\n+    --- @type integer[]\n+    local attached_buffers = vim.tbl_keys(client.attached_buffers)\n+\n+    -- Reattach new client once the old one exits\n+    api.nvim_create_autocmd('LspDetach', {\n+      group = api.nvim_create_augroup('nvim.lsp.ex_restart_' .. client.id, {}),\n+      callback = function(info)\n+        if info.data.client_id ~= client.id then\n+          return\n+        end\n+\n+        local new_client_id = lsp.start(client.config, { attach = false })\n+        if new_client_id then\n+          for _, buffer in ipairs(attached_buffers) do\n+            lsp.buf_attach_client(buffer, new_client_id)\n+          end\n+        end\n+\n+        return true -- Delete autocmd\n+      end,\n+    })\n+\n+    client:stop(client.exit_timeout)\n+  end\n+end\n+\n+--- @param client_names string[]\n+local function ex_lsp_stop(client_names)\n+  local clients = get_clients_from_names(client_names)\n+\n+  for _, client in ipairs(clients) do\n+    client:stop(client.exit_timeout)\n+  end\n+end\n+\n+local actions = {\n+  enable = ex_lsp_enable,\n+  disable = ex_lsp_disable,\n+  restart = ex_lsp_restart,\n+  stop = ex_lsp_stop,\n+}\n+\n+local available_subcmds = vim.tbl_keys(actions)",
            "html_url": "https://github.com/neovim/neovim/pull/36925#discussion_r2621854103",
            "id": 2621854103,
            "line": 173,
            "node_id": "PRRC_kwDOAPphoM6cRlGX",
            "original_commit_id": "cdd252abd35753bf154d5733fe3d127f53dda2a3",
            "original_line": 173,
            "original_position": 184,
            "original_start_line": null,
            "path": "runtime/lua/vim/_core/ex_cmd/lsp.lua",
            "position": 173,
            "pull_request_review_id": 3581394128,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/36925",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2621854103/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-12-16T05:33:22Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2621854103",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/36925#discussion_r2621856198"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/36925"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2621856198"
                }
            },
            "author_association": "MEMBER",
            "body": "nit: almost identical with `get_enabled_config_names`, could easily dedupe",
            "commit_id": "cdd252abd35753bf154d5733fe3d127f53dda2a3",
            "created_at": "2025-12-16T05:34:28Z",
            "diff_hunk": "@@ -0,0 +1,223 @@\n+local api = vim.api\n+local lsp = vim.lsp\n+local ERROR = vim.log.levels.ERROR\n+\n+local M = {}\n+\n+--- @return string[]\n+local function get_client_names()\n+  local client_names = vim\n+    .iter(lsp.get_clients())\n+    :map(function(client)\n+      return client.name\n+    end)\n+    :totable()\n+  return vim.list.unique(client_names)\n+end\n+\n+--- @return string[]\n+local function get_config_names()\n+  local config_names = vim\n+    .iter(api.nvim_get_runtime_file('lsp/*.lua', true))\n+    --- @param path string\n+    :map(function(path)\n+      local file_name = path:match('[^/]*.lua$')\n+      return file_name:sub(0, #file_name - 4)\n+    end)\n+    :totable()\n+\n+  --- @diagnostic disable-next-line\n+  vim.list_extend(config_names, vim.tbl_keys(lsp.config._configs))\n+\n+  return vim\n+    .iter(vim.list.unique(config_names))\n+    --- @param name string\n+    :filter(function(name)\n+      return name ~= '*'\n+    end)\n+    :totable()\n+end\n+\n+--- @return string[]\n+local function get_enabled_config_names()\n+  return vim\n+    .iter(get_config_names())\n+    --- @param name string\n+    :filter(function(name)\n+      return lsp.is_enabled(name)\n+    end)\n+    :totable()\n+end\n+\n+--- @return string[]\n+local function get_disabled_config_names()",
            "html_url": "https://github.com/neovim/neovim/pull/36925#discussion_r2621856198",
            "id": 2621856198,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6cRlnG",
            "original_commit_id": "cdd252abd35753bf154d5733fe3d127f53dda2a3",
            "original_line": 53,
            "original_position": 53,
            "original_start_line": null,
            "path": "runtime/lua/vim/_core/ex_cmd/lsp.lua",
            "position": 1,
            "pull_request_review_id": 3581396429,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/36925",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2621856198/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-12-16T05:34:28Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2621856198",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/36925#discussion_r2621870266"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/36925"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2621870266"
                }
            },
            "author_association": "MEMBER",
            "body": "Also need 1 mini-test which just checks how things fail with `nvim -u NONE` (i.e. when the runtime is missing). Mainly just want to check that nvim doesn't crash.\n\n```lua\n    clear {\n      args_rm = { '-u' },\n      args = { '-u', 'NONE' },\n      env = { VIMRUNTIME = 'non-existent' },\n    }\n    eq('..', t.pcall_err(n.command, 'lsp enable dummy'))\n```",
            "commit_id": "cdd252abd35753bf154d5733fe3d127f53dda2a3",
            "created_at": "2025-12-16T05:42:44Z",
            "diff_hunk": "@@ -0,0 +1,150 @@\n+local t = require('test.testutil')\n+local n = require('test.functional.testnvim')()\n+local t_lsp = require('test.functional.plugin.lsp.testutil')\n+\n+local clear = n.clear\n+local eq = t.eq\n+local exec_lua = n.exec_lua\n+\n+local create_server_definition = t_lsp.create_server_definition\n+\n+describe(':lsp', function()\n+  before_each(function()\n+    clear()\n+    exec_lua(create_server_definition)\n+    exec_lua(function()\n+      local server = _G._create_server()\n+      vim.lsp.config('dummy', {\n+        filetypes = { 'lua' },\n+        cmd = server.cmd,\n+      })\n+      vim.cmd('set ft=lua')\n+    end)\n+  end)\n+\n+  it('enable with arguments', function()",
            "html_url": "https://github.com/neovim/neovim/pull/36925#discussion_r2621870266",
            "id": 2621870266,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6cRpC6",
            "original_commit_id": "cdd252abd35753bf154d5733fe3d127f53dda2a3",
            "original_line": 25,
            "original_position": 25,
            "original_start_line": null,
            "path": "test/functional/ex_cmds/lsp_spec.lua",
            "position": 1,
            "pull_request_review_id": 3581411383,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/36925",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2621870266/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-12-16T05:43:28Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2621870266",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/36925#discussion_r2621874005"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/36925"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2621874005"
                }
            },
            "author_association": "MEMBER",
            "body": "all 4 of the above tests could be deduplicated with 2 parameters.",
            "commit_id": "cdd252abd35753bf154d5733fe3d127f53dda2a3",
            "created_at": "2025-12-16T05:44:50Z",
            "diff_hunk": "@@ -0,0 +1,150 @@\n+local t = require('test.testutil')\n+local n = require('test.functional.testnvim')()\n+local t_lsp = require('test.functional.plugin.lsp.testutil')\n+\n+local clear = n.clear\n+local eq = t.eq\n+local exec_lua = n.exec_lua\n+\n+local create_server_definition = t_lsp.create_server_definition\n+\n+describe(':lsp', function()\n+  before_each(function()\n+    clear()\n+    exec_lua(create_server_definition)\n+    exec_lua(function()\n+      local server = _G._create_server()\n+      vim.lsp.config('dummy', {\n+        filetypes = { 'lua' },\n+        cmd = server.cmd,\n+      })\n+      vim.cmd('set ft=lua')\n+    end)\n+  end)\n+\n+  it('enable with arguments', function()\n+    local is_enabled = exec_lua(function()\n+      vim.cmd('lsp enable dummy')\n+      return vim.lsp.is_enabled('dummy')\n+    end)\n+    eq(true, is_enabled)\n+  end)\n+\n+  it('enable without arguments', function()\n+    local is_enabled = exec_lua(function()\n+      vim.cmd('lsp enable')\n+      return vim.lsp.is_enabled('dummy')\n+    end)\n+    eq(true, is_enabled)\n+  end)\n+\n+  it('disable with arguments', function()\n+    local is_enabled = exec_lua(function()\n+      vim.lsp.enable('dummy')\n+      vim.cmd('lsp disable dummy')\n+      return vim.lsp.is_enabled('dummy')\n+    end)\n+    eq(false, is_enabled)\n+  end)\n+\n+  it('disable without arguments', function()",
            "html_url": "https://github.com/neovim/neovim/pull/36925#discussion_r2621874005",
            "id": 2621874005,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6cRp9V",
            "original_commit_id": "cdd252abd35753bf154d5733fe3d127f53dda2a3",
            "original_line": 50,
            "original_position": 50,
            "original_start_line": null,
            "path": "test/functional/ex_cmds/lsp_spec.lua",
            "position": 1,
            "pull_request_review_id": 3581415284,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/36925",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2621874005/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-12-16T05:44:50Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2621874005",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/36925#discussion_r2621874302"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/36925"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2621874302"
                }
            },
            "author_association": "MEMBER",
            "body": "can be deduplicated",
            "commit_id": "cdd252abd35753bf154d5733fe3d127f53dda2a3",
            "created_at": "2025-12-16T05:44:59Z",
            "diff_hunk": "@@ -0,0 +1,150 @@\n+local t = require('test.testutil')\n+local n = require('test.functional.testnvim')()\n+local t_lsp = require('test.functional.plugin.lsp.testutil')\n+\n+local clear = n.clear\n+local eq = t.eq\n+local exec_lua = n.exec_lua\n+\n+local create_server_definition = t_lsp.create_server_definition\n+\n+describe(':lsp', function()\n+  before_each(function()\n+    clear()\n+    exec_lua(create_server_definition)\n+    exec_lua(function()\n+      local server = _G._create_server()\n+      vim.lsp.config('dummy', {\n+        filetypes = { 'lua' },\n+        cmd = server.cmd,\n+      })\n+      vim.cmd('set ft=lua')\n+    end)\n+  end)\n+\n+  it('enable with arguments', function()\n+    local is_enabled = exec_lua(function()\n+      vim.cmd('lsp enable dummy')\n+      return vim.lsp.is_enabled('dummy')\n+    end)\n+    eq(true, is_enabled)\n+  end)\n+\n+  it('enable without arguments', function()\n+    local is_enabled = exec_lua(function()\n+      vim.cmd('lsp enable')\n+      return vim.lsp.is_enabled('dummy')\n+    end)\n+    eq(true, is_enabled)\n+  end)\n+\n+  it('disable with arguments', function()\n+    local is_enabled = exec_lua(function()\n+      vim.lsp.enable('dummy')\n+      vim.cmd('lsp disable dummy')\n+      return vim.lsp.is_enabled('dummy')\n+    end)\n+    eq(false, is_enabled)\n+  end)\n+\n+  it('disable without arguments', function()\n+    local is_enabled = exec_lua(function()\n+      vim.lsp.enable('dummy')\n+      vim.cmd('lsp disable')\n+      return vim.lsp.is_enabled('dummy')\n+    end)\n+    eq(false, is_enabled)\n+  end)\n+\n+  it('restart with arguments', function()\n+    local ids_differ = exec_lua(function()\n+      vim.lsp.enable('dummy')\n+      local old_id = vim.lsp.get_clients()[1].id\n+\n+      vim.cmd('lsp restart dummy')\n+      vim.wait(1000, function()\n+        return old_id ~= vim.lsp.get_clients()[1].id\n+      end)\n+      local new_id = vim.lsp.get_clients()[1].id\n+      return old_id ~= new_id\n+    end)\n+    eq(true, ids_differ)\n+  end)\n+\n+  it('restart without arguments', function()",
            "html_url": "https://github.com/neovim/neovim/pull/36925#discussion_r2621874302",
            "id": 2621874302,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6cRqB-",
            "original_commit_id": "cdd252abd35753bf154d5733fe3d127f53dda2a3",
            "original_line": 74,
            "original_position": 74,
            "original_start_line": null,
            "path": "test/functional/ex_cmds/lsp_spec.lua",
            "position": 1,
            "pull_request_review_id": 3581415547,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/36925",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2621874302/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-12-16T05:44:59Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2621874302",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/36925#discussion_r2621874947"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/36925"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2621874947"
                }
            },
            "author_association": "MEMBER",
            "body": "can be deduplicated",
            "commit_id": "cdd252abd35753bf154d5733fe3d127f53dda2a3",
            "created_at": "2025-12-16T05:45:21Z",
            "diff_hunk": "@@ -0,0 +1,150 @@\n+local t = require('test.testutil')\n+local n = require('test.functional.testnvim')()\n+local t_lsp = require('test.functional.plugin.lsp.testutil')\n+\n+local clear = n.clear\n+local eq = t.eq\n+local exec_lua = n.exec_lua\n+\n+local create_server_definition = t_lsp.create_server_definition\n+\n+describe(':lsp', function()\n+  before_each(function()\n+    clear()\n+    exec_lua(create_server_definition)\n+    exec_lua(function()\n+      local server = _G._create_server()\n+      vim.lsp.config('dummy', {\n+        filetypes = { 'lua' },\n+        cmd = server.cmd,\n+      })\n+      vim.cmd('set ft=lua')\n+    end)\n+  end)\n+\n+  it('enable with arguments', function()\n+    local is_enabled = exec_lua(function()\n+      vim.cmd('lsp enable dummy')\n+      return vim.lsp.is_enabled('dummy')\n+    end)\n+    eq(true, is_enabled)\n+  end)\n+\n+  it('enable without arguments', function()\n+    local is_enabled = exec_lua(function()\n+      vim.cmd('lsp enable')\n+      return vim.lsp.is_enabled('dummy')\n+    end)\n+    eq(true, is_enabled)\n+  end)\n+\n+  it('disable with arguments', function()\n+    local is_enabled = exec_lua(function()\n+      vim.lsp.enable('dummy')\n+      vim.cmd('lsp disable dummy')\n+      return vim.lsp.is_enabled('dummy')\n+    end)\n+    eq(false, is_enabled)\n+  end)\n+\n+  it('disable without arguments', function()\n+    local is_enabled = exec_lua(function()\n+      vim.lsp.enable('dummy')\n+      vim.cmd('lsp disable')\n+      return vim.lsp.is_enabled('dummy')\n+    end)\n+    eq(false, is_enabled)\n+  end)\n+\n+  it('restart with arguments', function()\n+    local ids_differ = exec_lua(function()\n+      vim.lsp.enable('dummy')\n+      local old_id = vim.lsp.get_clients()[1].id\n+\n+      vim.cmd('lsp restart dummy')\n+      vim.wait(1000, function()\n+        return old_id ~= vim.lsp.get_clients()[1].id\n+      end)\n+      local new_id = vim.lsp.get_clients()[1].id\n+      return old_id ~= new_id\n+    end)\n+    eq(true, ids_differ)\n+  end)\n+\n+  it('restart without arguments', function()\n+    local ids_differ = exec_lua(function()\n+      vim.lsp.enable('dummy')\n+      local old_id = vim.lsp.get_clients()[1].id\n+\n+      vim.cmd('lsp restart')\n+      vim.wait(1000, function()\n+        return old_id ~= vim.lsp.get_clients()[1].id\n+      end)\n+      local new_id = vim.lsp.get_clients()[1].id\n+      return old_id ~= new_id\n+    end)\n+    eq(true, ids_differ)\n+  end)\n+\n+  it('stop with arguments', function()\n+    local running_clients = exec_lua(function()\n+      vim.lsp.enable('dummy')\n+      vim.cmd('lsp stop dummy')\n+      vim.wait(1000, function()\n+        return #vim.lsp.get_clients() == 0\n+      end)\n+      return #vim.lsp.get_clients()\n+    end)\n+    eq(0, running_clients)\n+  end)\n+\n+  it('stop without arguments', function()",
            "html_url": "https://github.com/neovim/neovim/pull/36925#discussion_r2621874947",
            "id": 2621874947,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6cRqMD",
            "original_commit_id": "cdd252abd35753bf154d5733fe3d127f53dda2a3",
            "original_line": 101,
            "original_position": 101,
            "original_start_line": null,
            "path": "test/functional/ex_cmds/lsp_spec.lua",
            "position": 1,
            "pull_request_review_id": 3581416192,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/36925",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2621874947/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-12-16T05:45:21Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2621874947",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/36925#discussion_r2624151200"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/36925"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2624151200"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Sounds great.",
            "commit_id": "bd225422a5b75ea8064603d21f7b38da30007910",
            "created_at": "2025-12-16T17:30:46Z",
            "diff_hunk": "@@ -121,6 +121,29 @@ To remove or override BUFFER-LOCAL defaults, define a |LspAttach| handler: >lua\n       end,\n     })\n <\n+\n+COMMANDS                                                    *:lsp*\n+\n+:lsp enable {name}?                                       *:lsp-enable*\n+    Enables the given lsp clients. If no names are given, all clients\n+    configured with |vim.lsp.config()| with a filetype matching the current\n+    buffer's filetype are enabled. Use |vim.lsp.enable()| for non-interactive",
            "html_url": "https://github.com/neovim/neovim/pull/36925#discussion_r2624151200",
            "id": 2624151200,
            "in_reply_to_id": 2621828328,
            "line": 125,
            "node_id": "PRRC_kwDOAPphoM6caV6g",
            "original_commit_id": "cdd252abd35753bf154d5733fe3d127f53dda2a3",
            "original_line": 125,
            "original_position": 10,
            "original_start_line": 128,
            "path": "runtime/doc/lsp.txt",
            "position": 10,
            "pull_request_review_id": 3584213431,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/36925",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2624151200/reactions"
            },
            "side": "RIGHT",
            "start_line": 123,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-12-16T17:30:46Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2624151200",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/51250849?v=4",
                "events_url": "https://api.github.com/users/superatomic/events{/privacy}",
                "followers_url": "https://api.github.com/users/superatomic/followers",
                "following_url": "https://api.github.com/users/superatomic/following{/other_user}",
                "gists_url": "https://api.github.com/users/superatomic/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/superatomic",
                "id": 51250849,
                "login": "superatomic",
                "node_id": "MDQ6VXNlcjUxMjUwODQ5",
                "organizations_url": "https://api.github.com/users/superatomic/orgs",
                "received_events_url": "https://api.github.com/users/superatomic/received_events",
                "repos_url": "https://api.github.com/users/superatomic/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/superatomic/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/superatomic/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/superatomic",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/36925#discussion_r2624267603"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/36925"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2624267603"
                }
            },
            "author_association": "MEMBER",
            "body": "Configs are \"enabled\", not \"clients\" or \"servers\". Servers are \"started\", and clients \"attach\".\n\nNo action required for now, just mentioning.",
            "commit_id": "bd225422a5b75ea8064603d21f7b38da30007910",
            "created_at": "2025-12-16T18:13:15Z",
            "diff_hunk": "@@ -116,6 +121,29 @@ To remove or override BUFFER-LOCAL defaults, define a |LspAttach| handler: >lua\n       end,\n     })\n <\n+==============================================================================\n+COMMANDS                                                    *:lsp*\n+\n+:lsp enable {name}?                                       *:lsp-enable*\n+    Enables the given lsp clients. If no names are given, all clients",
            "html_url": "https://github.com/neovim/neovim/pull/36925#discussion_r2624267603",
            "id": 2624267603,
            "line": 123,
            "node_id": "PRRC_kwDOAPphoM6cayVT",
            "original_commit_id": "2bdc4c8baaab66b571e9b18f6ae5c13a296c7f03",
            "original_line": 123,
            "original_position": 36,
            "original_start_line": null,
            "path": "runtime/doc/lsp.txt",
            "position": 8,
            "pull_request_review_id": 3584384149,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/36925",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2624267603/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-12-16T18:14:20Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2624267603",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/36925#discussion_r2624273791"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/36925"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2624273791"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Good to know for the future. Thanks.",
            "commit_id": "bd225422a5b75ea8064603d21f7b38da30007910",
            "created_at": "2025-12-16T18:15:46Z",
            "diff_hunk": "@@ -116,6 +121,29 @@ To remove or override BUFFER-LOCAL defaults, define a |LspAttach| handler: >lua\n       end,\n     })\n <\n+==============================================================================\n+COMMANDS                                                    *:lsp*\n+\n+:lsp enable {name}?                                       *:lsp-enable*\n+    Enables the given lsp clients. If no names are given, all clients",
            "html_url": "https://github.com/neovim/neovim/pull/36925#discussion_r2624273791",
            "id": 2624273791,
            "in_reply_to_id": 2624267603,
            "line": 123,
            "node_id": "PRRC_kwDOAPphoM6caz1_",
            "original_commit_id": "2bdc4c8baaab66b571e9b18f6ae5c13a296c7f03",
            "original_line": 123,
            "original_position": 36,
            "original_start_line": null,
            "path": "runtime/doc/lsp.txt",
            "position": 8,
            "pull_request_review_id": 3584393322,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/36925",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2624273791/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-12-16T18:15:46Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2624273791",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/51250849?v=4",
                "events_url": "https://api.github.com/users/superatomic/events{/privacy}",
                "followers_url": "https://api.github.com/users/superatomic/followers",
                "following_url": "https://api.github.com/users/superatomic/following{/other_user}",
                "gists_url": "https://api.github.com/users/superatomic/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/superatomic",
                "id": 51250849,
                "login": "superatomic",
                "node_id": "MDQ6VXNlcjUxMjUwODQ5",
                "organizations_url": "https://api.github.com/users/superatomic/orgs",
                "received_events_url": "https://api.github.com/users/superatomic/received_events",
                "repos_url": "https://api.github.com/users/superatomic/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/superatomic/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/superatomic/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/superatomic",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/36925#discussion_r2624431125"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/36925"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2624431125"
                }
            },
            "author_association": "MEMBER",
            "body": "Does bang (!) force-stop servers immediately? Should probably mention that.",
            "commit_id": "bd225422a5b75ea8064603d21f7b38da30007910",
            "created_at": "2025-12-16T19:09:54Z",
            "diff_hunk": "@@ -116,6 +116,29 @@ To remove or override BUFFER-LOCAL defaults, define a |LspAttach| handler: >lua\n       end,\n     })\n <\n+==============================================================================\n+COMMANDS                                                    *:lsp*\n+\n+:lsp enable {name}?                                       *:lsp-enable*\n+    Enables the given lsp clients. If no names are given, all clients\n+    configured with |vim.lsp.config()| with a filetype matching the current\n+    buffer's filetype are enabled. Use |vim.lsp.enable()| for non-interactive\n+    use.\n+\n+:lsp disable {name}?                                      *:lsp-disable*",
            "html_url": "https://github.com/neovim/neovim/pull/36925#discussion_r2624431125",
            "id": 2624431125,
            "line": 128,
            "node_id": "PRRC_kwDOAPphoM6cbaQV",
            "original_commit_id": "bd225422a5b75ea8064603d21f7b38da30007910",
            "original_line": 128,
            "original_position": 13,
            "original_start_line": null,
            "path": "runtime/doc/lsp.txt",
            "position": 13,
            "pull_request_review_id": 3584579248,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/36925",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2624431125/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-12-16T19:09:54Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2624431125",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/36925#discussion_r2624453820"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/36925"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2624453820"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "It does not. There is no support for `!` in any of these commands, since with `exit_timeout` it is now possible to control that on a config level.\r\n\r\nI don't think it's necessary anymore, plus now that the command is a subcommand, we would probably have to use `:lsp stop ++force`.",
            "commit_id": "bd225422a5b75ea8064603d21f7b38da30007910",
            "created_at": "2025-12-16T19:18:25Z",
            "diff_hunk": "@@ -116,6 +116,29 @@ To remove or override BUFFER-LOCAL defaults, define a |LspAttach| handler: >lua\n       end,\n     })\n <\n+==============================================================================\n+COMMANDS                                                    *:lsp*\n+\n+:lsp enable {name}?                                       *:lsp-enable*\n+    Enables the given lsp clients. If no names are given, all clients\n+    configured with |vim.lsp.config()| with a filetype matching the current\n+    buffer's filetype are enabled. Use |vim.lsp.enable()| for non-interactive\n+    use.\n+\n+:lsp disable {name}?                                      *:lsp-disable*",
            "html_url": "https://github.com/neovim/neovim/pull/36925#discussion_r2624453820",
            "id": 2624453820,
            "in_reply_to_id": 2624431125,
            "line": 128,
            "node_id": "PRRC_kwDOAPphoM6cbfy8",
            "original_commit_id": "bd225422a5b75ea8064603d21f7b38da30007910",
            "original_line": 128,
            "original_position": 13,
            "original_start_line": null,
            "path": "runtime/doc/lsp.txt",
            "position": 13,
            "pull_request_review_id": 3584605359,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/36925",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 2,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2624453820/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-12-16T19:22:08Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2624453820",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/51250849?v=4",
                "events_url": "https://api.github.com/users/superatomic/events{/privacy}",
                "followers_url": "https://api.github.com/users/superatomic/followers",
                "following_url": "https://api.github.com/users/superatomic/following{/other_user}",
                "gists_url": "https://api.github.com/users/superatomic/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/superatomic",
                "id": 51250849,
                "login": "superatomic",
                "node_id": "MDQ6VXNlcjUxMjUwODQ5",
                "organizations_url": "https://api.github.com/users/superatomic/orgs",
                "received_events_url": "https://api.github.com/users/superatomic/received_events",
                "repos_url": "https://api.github.com/users/superatomic/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/superatomic/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/superatomic/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/superatomic",
                "user_view_type": "public"
            }
        }
    ],
    "comment_regular_data": [
        {
            "author_association": "CONTRIBUTOR",
            "body": "@justinmk you've [said in the past that you only want these commands to support only one argument max](https://github.com/neovim/nvim-lspconfig/pull/3896#issuecomment-2959581087). I can definitely make this change, but as I work more on these subcommands, I'm starting to think we should support multiple arguments. It doesn't simplify any code to remove this feature, since the subcommands need to loop anyway when no arguments are passed (and by removing it, the commands without arguments can function differently to any possible argument). While the benefit is niche, I can definitely see situations where I might want to, for example, disable two related configs. In my opinion, this also makes the commands more intuitive, since I expect them to work like `:set` takes multiple arguments.\r\n\r\nI'd love to hear your current thoughts.",
            "created_at": "2025-12-12T23:34:22Z",
            "html_url": "https://github.com/neovim/neovim/pull/36925#issuecomment-3648510399",
            "id": 3648510399,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36925",
            "node_id": "IC_kwDOAPphoM7Zd9m_",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3648510399/reactions"
            },
            "updated_at": "2025-12-12T23:49:55Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3648510399",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/51250849?v=4",
                "events_url": "https://api.github.com/users/superatomic/events{/privacy}",
                "followers_url": "https://api.github.com/users/superatomic/followers",
                "following_url": "https://api.github.com/users/superatomic/following{/other_user}",
                "gists_url": "https://api.github.com/users/superatomic/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/superatomic",
                "id": 51250849,
                "login": "superatomic",
                "node_id": "MDQ6VXNlcjUxMjUwODQ5",
                "organizations_url": "https://api.github.com/users/superatomic/orgs",
                "received_events_url": "https://api.github.com/users/superatomic/received_events",
                "repos_url": "https://api.github.com/users/superatomic/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/superatomic/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/superatomic/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/superatomic",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Just some ideas from me about why I made the command accept multi-client arg (even though by that way, it will diverge from nvim-lspconfig)\r\n- The command `:lsp` has to support multiple arguments in the first place (one for subcommand, at least one for LSP name, so at least 2 arguments need to be supported).\r\n- Arg parsing is simple enough, I just used `nvim_parse_cmd()`. If I want to make it only support one client name, I will have to \"concat\" all arguments (from the second one), so the logic is just more complex, not simplified at all. Not only so, I may even have to modify the logic of `nvim_parse_cmd()` so that it doesn't give misleading results \r\n- And as OP said, the command has to support multi-client anyway, in case users don't supply any client names.\r\n- Multi-client args does have use cases in interactive use. I often have at least 3 LS for each buffer (language-specific LS, basic-ls and copilot-ls). If I want to stop/restart 2 out of 3, wouldn't supply 2 lsp names in one command much faster and much more convenient than having to run `:lsp` command twice?\r\n\r\nThat being said, with multi-client support in command args, you (OP) will need to be careful on completion part, I think you should test completion if client name contain special characters like `<Space>`, `<Tab>`, `|` (bang) (Comment mark `\"` probably should have never existed). The code for `client name with space` could be like\r\n```lua\r\nvim.lsp.config[\"client name with space\"] = { something }\r\n--- Assuming that the first completion candidate of `lsp restart ` is `client name with space`\r\nassert(#vim.api.nvim_parse_cmd(\"lsp restart \" .. vim.fn.getcompletion(\"lsp restart \", \"cmdline\")[1]).args == 2)\r\n```",
            "created_at": "2025-12-13T12:13:21Z",
            "html_url": "https://github.com/neovim/neovim/pull/36925#issuecomment-3649318627",
            "id": 3649318627,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36925",
            "node_id": "IC_kwDOAPphoM7ZhC7j",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3649318627/reactions"
            },
            "updated_at": "2025-12-13T12:38:12Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3649318627",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/111893501?v=4",
                "events_url": "https://api.github.com/users/brianhuster/events{/privacy}",
                "followers_url": "https://api.github.com/users/brianhuster/followers",
                "following_url": "https://api.github.com/users/brianhuster/following{/other_user}",
                "gists_url": "https://api.github.com/users/brianhuster/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/brianhuster",
                "id": 111893501,
                "login": "brianhuster",
                "node_id": "U_kgDOBqtb_Q",
                "organizations_url": "https://api.github.com/users/brianhuster/orgs",
                "received_events_url": "https://api.github.com/users/brianhuster/received_events",
                "repos_url": "https://api.github.com/users/brianhuster/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/brianhuster/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/brianhuster/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/brianhuster",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "> I think you should test completion if client name contain special characters\r\n\r\nAdded! Thank you for the feedback.\r\n\r\n---\r\n\r\nI'm going to open this PR for review. The idea of removing multiple argument support can be a review topic if anyone feels strongly about it.",
            "created_at": "2025-12-13T15:03:21Z",
            "html_url": "https://github.com/neovim/neovim/pull/36925#issuecomment-3649513396",
            "id": 3649513396,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36925",
            "node_id": "IC_kwDOAPphoM7Zhye0",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3649513396/reactions"
            },
            "updated_at": "2025-12-13T15:03:21Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3649513396",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/51250849?v=4",
                "events_url": "https://api.github.com/users/superatomic/events{/privacy}",
                "followers_url": "https://api.github.com/users/superatomic/followers",
                "following_url": "https://api.github.com/users/superatomic/following{/other_user}",
                "gists_url": "https://api.github.com/users/superatomic/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/superatomic",
                "id": 51250849,
                "login": "superatomic",
                "node_id": "MDQ6VXNlcjUxMjUwODQ5",
                "organizations_url": "https://api.github.com/users/superatomic/orgs",
                "received_events_url": "https://api.github.com/users/superatomic/received_events",
                "repos_url": "https://api.github.com/users/superatomic/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/superatomic/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/superatomic/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/superatomic",
                "user_view_type": "public"
            }
        }
    ],
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/36925/comments",
    "commits_url": "https://api.github.com/repos/neovim/neovim/pulls/36925/commits",
    "created_at": "2025-12-12T02:46:56Z",
    "diff_url": "https://github.com/neovim/neovim/pull/36925.diff",
    "draft": false,
    "head": {
        "label": "superatomic:lsp-cmd",
        "ref": "lsp-cmd",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/superatomic/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/superatomic/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/superatomic/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/superatomic/neovim/branches{/branch}",
            "clone_url": "https://github.com/superatomic/neovim.git",
            "collaborators_url": "https://api.github.com/repos/superatomic/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/superatomic/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/superatomic/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/superatomic/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/superatomic/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/superatomic/neovim/contributors",
            "created_at": "2025-11-04T00:14:36Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/superatomic/neovim/deployments",
            "description": "Vim-fork focused on extensibility and usability",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/superatomic/neovim/downloads",
            "events_url": "https://api.github.com/repos/superatomic/neovim/events",
            "fork": true,
            "forks": 0,
            "forks_count": 0,
            "forks_url": "https://api.github.com/repos/superatomic/neovim/forks",
            "full_name": "superatomic/neovim",
            "git_commits_url": "https://api.github.com/repos/superatomic/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/superatomic/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/superatomic/neovim/git/tags{/sha}",
            "git_url": "git://github.com/superatomic/neovim.git",
            "has_discussions": false,
            "has_downloads": true,
            "has_issues": false,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://neovim.io",
            "hooks_url": "https://api.github.com/repos/superatomic/neovim/hooks",
            "html_url": "https://github.com/superatomic/neovim",
            "id": 1089144502,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/superatomic/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/superatomic/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/superatomic/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/superatomic/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/superatomic/neovim/labels{/name}",
            "language": "Vim Script",
            "languages_url": "https://api.github.com/repos/superatomic/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/superatomic/neovim/merges",
            "milestones_url": "https://api.github.com/repos/superatomic/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "R_kgDOQOsGtg",
            "notifications_url": "https://api.github.com/repos/superatomic/neovim/notifications{?since,all,participating}",
            "open_issues": 0,
            "open_issues_count": 0,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/51250849?v=4",
                "events_url": "https://api.github.com/users/superatomic/events{/privacy}",
                "followers_url": "https://api.github.com/users/superatomic/followers",
                "following_url": "https://api.github.com/users/superatomic/following{/other_user}",
                "gists_url": "https://api.github.com/users/superatomic/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/superatomic",
                "id": 51250849,
                "login": "superatomic",
                "node_id": "MDQ6VXNlcjUxMjUwODQ5",
                "organizations_url": "https://api.github.com/users/superatomic/orgs",
                "received_events_url": "https://api.github.com/users/superatomic/received_events",
                "repos_url": "https://api.github.com/users/superatomic/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/superatomic/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/superatomic/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/superatomic",
                "user_view_type": "public"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/superatomic/neovim/pulls{/number}",
            "pushed_at": "2025-12-22T01:35:28Z",
            "releases_url": "https://api.github.com/repos/superatomic/neovim/releases{/id}",
            "size": 355617,
            "ssh_url": "git@github.com:superatomic/neovim.git",
            "stargazers_count": 0,
            "stargazers_url": "https://api.github.com/repos/superatomic/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/superatomic/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/superatomic/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/superatomic/neovim/subscription",
            "svn_url": "https://github.com/superatomic/neovim",
            "tags_url": "https://api.github.com/repos/superatomic/neovim/tags",
            "teams_url": "https://api.github.com/repos/superatomic/neovim/teams",
            "topics": [],
            "trees_url": "https://api.github.com/repos/superatomic/neovim/git/trees{/sha}",
            "updated_at": "2025-12-05T07:24:01Z",
            "url": "https://api.github.com/repos/superatomic/neovim",
            "visibility": "public",
            "watchers": 0,
            "watchers_count": 0,
            "web_commit_signoff_required": false
        },
        "sha": "bd225422a5b75ea8064603d21f7b38da30007910",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/51250849?v=4",
            "events_url": "https://api.github.com/users/superatomic/events{/privacy}",
            "followers_url": "https://api.github.com/users/superatomic/followers",
            "following_url": "https://api.github.com/users/superatomic/following{/other_user}",
            "gists_url": "https://api.github.com/users/superatomic/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/superatomic",
            "id": 51250849,
            "login": "superatomic",
            "node_id": "MDQ6VXNlcjUxMjUwODQ5",
            "organizations_url": "https://api.github.com/users/superatomic/orgs",
            "received_events_url": "https://api.github.com/users/superatomic/received_events",
            "repos_url": "https://api.github.com/users/superatomic/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/superatomic/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/superatomic/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/superatomic",
            "user_view_type": "public"
        }
    },
    "html_url": "https://github.com/neovim/neovim/pull/36925",
    "id": 3095038959,
    "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36925",
    "labels": [
        {
            "color": "c5def5",
            "default": false,
            "description": null,
            "id": 662566370,
            "name": "lsp",
            "node_id": "MDU6TGFiZWw2NjI1NjYzNzA=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/lsp"
        }
    ],
    "locked": false,
    "merge_commit_sha": "02def1a32ef7acb6b7d940193815ba06e3775ecf",
    "merged_at": "2025-12-16T18:48:43Z",
    "milestone": null,
    "node_id": "PR_kwDOAPphoM64eovv",
    "number": 36925,
    "patch_url": "https://github.com/neovim/neovim/pull/36925.patch",
    "requested_reviewers": [],
    "requested_teams": [],
    "review_comment_url": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}",
    "review_comments_url": "https://api.github.com/repos/neovim/neovim/pulls/36925/comments",
    "state": "closed",
    "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/bd225422a5b75ea8064603d21f7b38da30007910",
    "title": "feat(ex): add `:lsp` command",
    "updated_at": "2025-12-16T19:21:08Z",
    "url": "https://api.github.com/repos/neovim/neovim/pulls/36925",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/51250849?v=4",
        "events_url": "https://api.github.com/users/superatomic/events{/privacy}",
        "followers_url": "https://api.github.com/users/superatomic/followers",
        "following_url": "https://api.github.com/users/superatomic/following{/other_user}",
        "gists_url": "https://api.github.com/users/superatomic/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/superatomic",
        "id": 51250849,
        "login": "superatomic",
        "node_id": "MDQ6VXNlcjUxMjUwODQ5",
        "organizations_url": "https://api.github.com/users/superatomic/orgs",
        "received_events_url": "https://api.github.com/users/superatomic/received_events",
        "repos_url": "https://api.github.com/users/superatomic/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/superatomic/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/superatomic/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/superatomic",
        "user_view_type": "public"
    }
}