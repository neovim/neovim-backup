{
    "_links": {
        "comments": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/25724/comments"
        },
        "commits": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/25724/commits"
        },
        "html": {
            "href": "https://github.com/neovim/neovim/pull/25724"
        },
        "issue": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/25724"
        },
        "review_comment": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}"
        },
        "review_comments": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/25724/comments"
        },
        "self": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/25724"
        },
        "statuses": {
            "href": "https://api.github.com/repos/neovim/neovim/statuses/498667584a9690d75db428968d317905a75754da"
        }
    },
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "MEMBER",
    "auto_merge": null,
    "base": {
        "label": "neovim:master",
        "ref": "master",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/neovim/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/neovim/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/neovim/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/neovim/neovim/branches{/branch}",
            "clone_url": "https://github.com/neovim/neovim.git",
            "collaborators_url": "https://api.github.com/repos/neovim/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/neovim/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/neovim/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/neovim/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/neovim/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/neovim/neovim/contributors",
            "created_at": "2014-01-31T13:39:22Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/neovim/neovim/deployments",
            "description": "Vim-fork focused on extensibility and usability",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/neovim/neovim/downloads",
            "events_url": "https://api.github.com/repos/neovim/neovim/events",
            "fork": false,
            "forks": 4973,
            "forks_count": 4973,
            "forks_url": "https://api.github.com/repos/neovim/neovim/forks",
            "full_name": "neovim/neovim",
            "git_commits_url": "https://api.github.com/repos/neovim/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/neovim/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/neovim/neovim/git/tags{/sha}",
            "git_url": "git://github.com/neovim/neovim.git",
            "has_discussions": true,
            "has_downloads": true,
            "has_issues": true,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://neovim.io",
            "hooks_url": "https://api.github.com/repos/neovim/neovim/hooks",
            "html_url": "https://github.com/neovim/neovim",
            "id": 16408992,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/neovim/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/neovim/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/neovim/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/neovim/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/neovim/neovim/labels{/name}",
            "language": "Vim Script",
            "languages_url": "https://api.github.com/repos/neovim/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/neovim/neovim/merges",
            "milestones_url": "https://api.github.com/repos/neovim/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "MDEwOlJlcG9zaXRvcnkxNjQwODk5Mg==",
            "notifications_url": "https://api.github.com/repos/neovim/neovim/notifications{?since,all,participating}",
            "open_issues": 1684,
            "open_issues_count": 1684,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
                "events_url": "https://api.github.com/users/neovim/events{/privacy}",
                "followers_url": "https://api.github.com/users/neovim/followers",
                "following_url": "https://api.github.com/users/neovim/following{/other_user}",
                "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/neovim",
                "id": 6471485,
                "login": "neovim",
                "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
                "organizations_url": "https://api.github.com/users/neovim/orgs",
                "received_events_url": "https://api.github.com/users/neovim/received_events",
                "repos_url": "https://api.github.com/users/neovim/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
                "type": "Organization",
                "url": "https://api.github.com/users/neovim"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/neovim/neovim/pulls{/number}",
            "pushed_at": "2023-11-11T02:21:14Z",
            "releases_url": "https://api.github.com/repos/neovim/neovim/releases{/id}",
            "size": 235404,
            "ssh_url": "git@github.com:neovim/neovim.git",
            "stargazers_count": 70788,
            "stargazers_url": "https://api.github.com/repos/neovim/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/neovim/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/neovim/neovim/subscription",
            "svn_url": "https://github.com/neovim/neovim",
            "tags_url": "https://api.github.com/repos/neovim/neovim/tags",
            "teams_url": "https://api.github.com/repos/neovim/neovim/teams",
            "topics": [
                "api",
                "c",
                "lua",
                "neovim",
                "nvim",
                "text-editor",
                "vim"
            ],
            "trees_url": "https://api.github.com/repos/neovim/neovim/git/trees{/sha}",
            "updated_at": "2023-11-11T01:50:46Z",
            "url": "https://api.github.com/repos/neovim/neovim",
            "visibility": "public",
            "watchers": 70788,
            "watchers_count": 70788,
            "web_commit_signoff_required": false
        },
        "sha": "d1b2a5cf5fa583b556457d34a46ce7b940913a66",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
            "events_url": "https://api.github.com/users/neovim/events{/privacy}",
            "followers_url": "https://api.github.com/users/neovim/followers",
            "following_url": "https://api.github.com/users/neovim/following{/other_user}",
            "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/neovim",
            "id": 6471485,
            "login": "neovim",
            "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
            "organizations_url": "https://api.github.com/users/neovim/orgs",
            "received_events_url": "https://api.github.com/users/neovim/received_events",
            "repos_url": "https://api.github.com/users/neovim/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
            "type": "Organization",
            "url": "https://api.github.com/users/neovim"
        }
    },
    "body": "Problem:  The legacy signlist data structure and associated functions are\r\n          redundant since the introduction of extmark signs.\r\nSolution: Store signs placed through the legacy commands in the extmark\r\n          tree and replace signlist associated functions.\r\n\r\nUsage of the legacy sign commands should yield no change in behavior with the\r\nexception of:\r\n  - \"orphaned signs\" are now always removed when the line it is placed on is\r\n    deleted. This used to depend on the value of 'signcolumn'. When the\r\n    line deletion is undone, the removed signs are also restored.\r\n  - It is no longer possible to place multiple signs with the same identifier\r\n    in a single group on multiple lines. This will now move the sign instead.\r\n\r\nMoreover:\r\nAll signs are now displayed by increasing sign identifier, left to right.\r\nExtmark signs used to be ordered decreasingly as opposed to legacy signs.\r\n\r\nSigns placed through the legacy sign commands and through\r\n|nvim_buf_set_extmark()| will show up in both |sign-place| and\r\n|nvim_buf_get_extmarks()|.",
    "closed_at": null,
    "comment_data": [
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/25724#discussion_r1368366026"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/25724"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1368366026"
                }
            },
            "author_association": "MEMBER",
            "body": "How much stuff would break if this was reduced to a single id (which would be incremented regardless if the sign is newly added or modified)? ",
            "commit_id": "498667584a9690d75db428968d317905a75754da",
            "created_at": "2023-10-23T09:16:53Z",
            "diff_hunk": "@@ -156,12 +159,16 @@ void extmark_set(buf_T *buf, uint32_t ns_id, uint32_t *idp, int row, colnr_T col\n       buf->b_virt_line_blocks++;\n     }\n     if (decor_has_sign(decor)) {\n+      if (revised) {\n+        decor->sign_mod_id = sign_add_id;\n+      }\n+      decor->sign_add_id = sign_add_id++;",
            "html_url": "https://github.com/neovim/neovim/pull/25724#discussion_r1368366026",
            "id": 1368366026,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5Rj5vK",
            "original_commit_id": "33b91acbd1621ba64a6e7fa24ea17da8e6731f07",
            "original_line": 169,
            "original_position": 31,
            "original_start_line": 162,
            "path": "src/nvim/extmark.c",
            "position": null,
            "pull_request_review_id": 1692073345,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/25724",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1368366026/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2023-10-23T09:16:53Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1368366026",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
                "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
                "followers_url": "https://api.github.com/users/bfredl/followers",
                "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
                "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bfredl",
                "id": 1363104,
                "login": "bfredl",
                "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
                "organizations_url": "https://api.github.com/users/bfredl/orgs",
                "received_events_url": "https://api.github.com/users/bfredl/received_events",
                "repos_url": "https://api.github.com/users/bfredl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bfredl"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/25724#discussion_r1368493804"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/25724"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1368493804"
                }
            },
            "author_association": "MEMBER",
            "body": "Arguably not that much. When signs are first placed in the signlist, currently they are sorted by `lnum` -> `priority` -> `sign_id`. Then when modified, signs take precedence over other signs with the same `sign_id`, even if the priority didn't change. I.e. this function does not consider `sign_id`:\r\nhttps://github.com/neovim/neovim/blob/5e5f5174e3faa862a9bc353aa7da41487911140b/src/nvim/sign.c#L309-L312\r\n\r\nSeems rather arbitrary to me actually, but it is explicitly tested for here:\r\nhttps://github.com/neovim/neovim/blob/5e5f5174e3faa862a9bc353aa7da41487911140b/test/old/testdir/test_signs.vim#L1512-L1515",
            "commit_id": "498667584a9690d75db428968d317905a75754da",
            "created_at": "2023-10-23T11:06:41Z",
            "diff_hunk": "@@ -156,12 +159,16 @@ void extmark_set(buf_T *buf, uint32_t ns_id, uint32_t *idp, int row, colnr_T col\n       buf->b_virt_line_blocks++;\n     }\n     if (decor_has_sign(decor)) {\n+      if (revised) {\n+        decor->sign_mod_id = sign_add_id;\n+      }\n+      decor->sign_add_id = sign_add_id++;",
            "html_url": "https://github.com/neovim/neovim/pull/25724#discussion_r1368493804",
            "id": 1368493804,
            "in_reply_to_id": 1368366026,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5RkY7s",
            "original_commit_id": "33b91acbd1621ba64a6e7fa24ea17da8e6731f07",
            "original_line": 169,
            "original_position": 31,
            "original_start_line": 162,
            "path": "src/nvim/extmark.c",
            "position": null,
            "pull_request_review_id": 1692267924,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/25724",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1368493804/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2023-10-23T15:24:59Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1368493804",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/25724#discussion_r1377996476"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/25724"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1377996476"
                }
            },
            "author_association": "MEMBER",
            "body": "IMO we should change this and just keep track of the last modified time. This is the kind of bug-for-bug compatibility which we don't aim at supporting.",
            "commit_id": "498667584a9690d75db428968d317905a75754da",
            "created_at": "2023-10-31T18:09:31Z",
            "diff_hunk": "@@ -156,12 +159,16 @@ void extmark_set(buf_T *buf, uint32_t ns_id, uint32_t *idp, int row, colnr_T col\n       buf->b_virt_line_blocks++;\n     }\n     if (decor_has_sign(decor)) {\n+      if (revised) {\n+        decor->sign_mod_id = sign_add_id;\n+      }\n+      decor->sign_add_id = sign_add_id++;",
            "html_url": "https://github.com/neovim/neovim/pull/25724#discussion_r1377996476",
            "id": 1377996476,
            "in_reply_to_id": 1368366026,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5SIo68",
            "original_commit_id": "33b91acbd1621ba64a6e7fa24ea17da8e6731f07",
            "original_line": 169,
            "original_position": 31,
            "original_start_line": 162,
            "path": "src/nvim/extmark.c",
            "position": null,
            "pull_request_review_id": 1706969521,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/25724",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1377996476/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2023-10-31T18:09:32Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1377996476",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
                "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
                "followers_url": "https://api.github.com/users/bfredl/followers",
                "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
                "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bfredl",
                "id": 1363104,
                "login": "bfredl",
                "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
                "organizations_url": "https://api.github.com/users/bfredl/orgs",
                "received_events_url": "https://api.github.com/users/bfredl/received_events",
                "repos_url": "https://api.github.com/users/bfredl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bfredl"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/25724#discussion_r1378047465"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/25724"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1378047465"
                }
            },
            "author_association": "MEMBER",
            "body": "To be clear, we then want signs to be sorted by `lnum`->`priority`->`sign_id`->`last_modifed`?",
            "commit_id": "498667584a9690d75db428968d317905a75754da",
            "created_at": "2023-10-31T18:58:07Z",
            "diff_hunk": "@@ -156,12 +159,16 @@ void extmark_set(buf_T *buf, uint32_t ns_id, uint32_t *idp, int row, colnr_T col\n       buf->b_virt_line_blocks++;\n     }\n     if (decor_has_sign(decor)) {\n+      if (revised) {\n+        decor->sign_mod_id = sign_add_id;\n+      }\n+      decor->sign_add_id = sign_add_id++;",
            "html_url": "https://github.com/neovim/neovim/pull/25724#discussion_r1378047465",
            "id": 1378047465,
            "in_reply_to_id": 1368366026,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5SI1Xp",
            "original_commit_id": "33b91acbd1621ba64a6e7fa24ea17da8e6731f07",
            "original_line": 169,
            "original_position": 31,
            "original_start_line": 162,
            "path": "src/nvim/extmark.c",
            "position": null,
            "pull_request_review_id": 1707048901,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/25724",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1378047465/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2023-10-31T18:58:07Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1378047465",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/25724#discussion_r1378203097"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/25724"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1378203097"
                }
            },
            "author_association": "MEMBER",
            "body": "Do these changes warrant a news item and/or should this PR be a `refactor()` commit in spite of these changes?",
            "commit_id": "498667584a9690d75db428968d317905a75754da",
            "created_at": "2023-10-31T21:58:21Z",
            "diff_hunk": "@@ -77,9 +75,9 @@ When two signs with the same priority are present, and one has an icon or text\n in the signcolumn while the other has line highlighting, then both are\n displayed.\n \n-When the line on which the sign is placed is deleted, the sign is moved to the\n-next line (or the last line of the buffer, if there is no next line).  When\n-the delete is undone the sign does not move back.\n+When the line on which the sign is placed is deleted, the sign is removed along\n+with it. This is in contrast to the default Vim behavior of keeping and grouping\n+them. Undoing the line deletion also restores the removed signs.",
            "html_url": "https://github.com/neovim/neovim/pull/25724#discussion_r1378203097",
            "id": 1378203097,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5SJbXZ",
            "original_commit_id": "b37e22c59af594c1491ef4093660c6d62e126cdc",
            "original_line": 80,
            "original_position": 22,
            "original_start_line": null,
            "path": "runtime/doc/sign.txt",
            "position": null,
            "pull_request_review_id": 1707297864,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/25724",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1378203097/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-10-31T22:32:05Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1378203097",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/25724#discussion_r1378205087"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/25724"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1378205087"
                }
            },
            "author_association": "MEMBER",
            "body": "This was flip-flopping `b_signcols.valid` in a buffer without any signs. Causing unnecessarily looping over all marks in `decor_signcols()` each time any extmark was added. (Could try adding a regression test for this, maybe through FFI?)",
            "commit_id": "498667584a9690d75db428968d317905a75754da",
            "created_at": "2023-10-31T22:01:32Z",
            "diff_hunk": "@@ -4149,42 +4092,32 @@ void buf_signcols_add_check(buf_T *buf, sign_entry_T *added)\n     return;\n   }\n \n-  sign_entry_T *s;\n-\n-  // Get first sign for added lnum\n-  for (s = added; s->se_prev && s->se_lnum == s->se_prev->se_lnum; s = s->se_prev) {}\n-\n-  // Count signs for lnum\n-  int linesum = 1;\n-  for (; s->se_next && s->se_lnum == s->se_next->se_lnum; s = s->se_next) {\n-    linesum++;\n-  }\n-  linesum += decor_signcols(buf, &decor_state, (int)s->se_lnum - 1, (int)s->se_lnum - 1,\n-                            SIGN_SHOW_MAX - linesum);\n+  int signcols = decor_signcols(buf, lnum - 1, lnum - 1, SIGN_SHOW_MAX);\n \n-  if (linesum > buf->b_signcols.size) {\n-    buf->b_signcols.size = linesum;\n-    buf->b_signcols.max = linesum;\n-    buf->b_signcols.sentinel = added->se_lnum;\n+  if (signcols > buf->b_signcols.size) {\n+    buf->b_signcols.size = signcols;\n+    buf->b_signcols.max = signcols;\n+    buf->b_signcols.sentinel = lnum;\n     redraw_buf_later(buf, UPD_NOT_VALID);\n   }\n }\n \n-int buf_signcols(buf_T *buf, int maximum)\n+int buf_signcols(buf_T *buf, int max)\n {\n   // The maximum can be determined from 'signcolumn' which is window scoped so\n   // need to invalidate signcols if the maximum is greater than the previous\n-  // maximum.\n-  if (maximum > buf->b_signcols.max) {\n+  // (valid) maximum.\n+  if (buf->b_signcols.max && max > buf->b_signcols.max) {",
            "html_url": "https://github.com/neovim/neovim/pull/25724#discussion_r1378205087",
            "id": 1378205087,
            "line": 4110,
            "node_id": "PRRC_kwDOAPphoM5SJb2f",
            "original_commit_id": "b37e22c59af594c1491ef4093660c6d62e126cdc",
            "original_line": 4110,
            "original_position": 131,
            "original_start_line": null,
            "path": "src/nvim/buffer.c",
            "position": 131,
            "pull_request_review_id": 1707297864,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/25724",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1378205087/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-10-31T22:32:05Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1378205087",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/25724#discussion_r1378215145"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/25724"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1378215145"
                }
            },
            "author_association": "MEMBER",
            "body": "I wonder if an elaborate `FOR_ALL_MARKS` macro or function with function pointer argument would be useful for reducing boilerplate. Or would it only obfuscate unnecessarily?",
            "commit_id": "498667584a9690d75db428968d317905a75754da",
            "created_at": "2023-10-31T22:18:17Z",
            "diff_hunk": "@@ -476,10 +476,6 @@ EXTERN buf_T *curbuf INIT( = NULL);    // currently active buffer\n #define FOR_ALL_BUF_WININFO(buf, wip) \\\n   for ((wip) = (buf)->b_wininfo; (wip) != NULL; (wip) = (wip)->wi_next)   // NOLINT\n \n-// Iterate through all the signs placed in a buffer\n-#define FOR_ALL_SIGNS_IN_BUF(buf, sign) \\",
            "html_url": "https://github.com/neovim/neovim/pull/25724#discussion_r1378215145",
            "id": 1378215145,
            "line": 480,
            "node_id": "PRRC_kwDOAPphoM5SJeTp",
            "original_commit_id": "b37e22c59af594c1491ef4093660c6d62e126cdc",
            "original_line": 480,
            "original_position": 5,
            "original_start_line": null,
            "path": "src/nvim/globals.h",
            "position": 5,
            "pull_request_review_id": 1707297864,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/25724",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1378215145/reactions"
            },
            "side": "LEFT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-10-31T22:32:05Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1378215145",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/25724#discussion_r1378225160"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/25724"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1378225160"
                }
            },
            "author_association": "MEMBER",
            "body": "Is this `extmark_del()` refactor alright and if so is there any reason why it shouldn't be used in `extmark_clear()`? I noticed that adds all marks/decors to a vector instead of deleting during iteration. \r\n\r\nTested it out and it seems to result in some paired marks not being deleted so I guess not. Restoring the iter after deleting the paired mark with `marktree_itr_get()` seems to work(as in all tests pass), but I'm not sure if the refactor makes sense at that point: https://github.com/neovim/neovim/pull/25859.",
            "commit_id": "498667584a9690d75db428968d317905a75754da",
            "created_at": "2023-10-31T22:35:42Z",
            "diff_hunk": "@@ -612,206 +193,139 @@ static linenr_T buf_delsign(buf_T *buf, linenr_T atlnum, int id, char *group)\n /// @param group  sign group\n static int buf_findsign(buf_T *buf, int id, char *group)\n {\n-  sign_entry_T *sign;  // a sign in the signlist\n-\n-  FOR_ALL_SIGNS_IN_BUF(buf, sign) {\n-    if (sign->se_id == id && sign_in_group(sign, group)) {\n-      return (int)sign->se_lnum;\n-    }\n-  }\n-\n-  return 0;\n+  uint32_t ns_id = (uint32_t)map_get(String, int)(&namespace_ids, cstr_as_string(group));\n+  return (id < 0 || (ns_id == 0 && group != NULL)) ? 0\n+         : marktree_lookup_ns(buf->b_marktree, ns_id, (uint32_t)id, false, NULL).pos.row + 1;\n }\n \n-/// Return the sign at line 'lnum' in buffer 'buf'. Returns NULL if a sign is\n-/// not found at the line. If 'groupname' is NULL, searches in the global group.\n+/// Delete the specified signs\n ///\n-/// @param buf  buffer whose sign we are searching for\n-/// @param lnum  line number of sign\n-/// @param groupname  sign group name\n-static sign_entry_T *buf_getsign_at_line(buf_T *buf, linenr_T lnum, char *groupname)\n+/// @param buf  buffer sign is stored in or NULL for all buffers\n+/// @param group  sign group\n+/// @param id  sign id\n+/// @param atlnum  sign at this line, -1 at any line\n+static int buf_delete_signs(buf_T *buf, char *group, int id, linenr_T atlnum)\n {\n-  sign_entry_T *sign;    // a sign in the signlist\n+  int64_t ns_id = group_get_ns(group);\n+  if (ns_id < 0) {\n+    return FAIL;\n+  }\n \n-  FOR_ALL_SIGNS_IN_BUF(buf, sign) {\n-    if (sign->se_lnum > lnum) {\n-      // Signs are sorted by line number in the buffer. No need to check\n-      // for signs after the specified line number 'lnum'.\n-      break;\n+  MarkTreeIter itr[1];\n+  int row = atlnum > 0 ? atlnum - 1 : 0;\n+  kvec_t(MTKey) signs = KV_INITIAL_VALUE;\n+\n+  if (atlnum > 0) {\n+    if (!marktree_itr_get_overlap(buf->b_marktree, row, 0, itr)) {\n+      return FAIL;\n     }\n \n-    if (sign->se_lnum == lnum && sign_in_group(sign, groupname)) {\n-      return sign;\n+    MTPair pair;\n+    while (marktree_itr_step_overlap(buf->b_marktree, itr, &pair)) {\n+      if ((ns_id == UINT32_MAX || ns_id == pair.start.ns)\n+          && pair.start.decor_full && decor_has_sign(pair.start.decor_full)) {\n+        kv_push(signs, pair.start);\n+      }\n     }\n+  } else {\n+    marktree_itr_get(buf->b_marktree, 0, 0, itr);\n   }\n \n-  return NULL;\n-}\n-\n-/// Return the identifier of the sign at line number 'lnum' in buffer 'buf'.\n-///\n-/// @param buf  buffer whose sign we are searching for\n-/// @param lnum  line number of sign\n-/// @param groupname  sign group name\n-static int buf_findsign_id(buf_T *buf, linenr_T lnum, char *groupname)\n-{\n-  sign_entry_T *sign;   // a sign in the signlist\n-\n-  sign = buf_getsign_at_line(buf, lnum, groupname);\n-  if (sign != NULL) {\n-    return sign->se_id;\n+  while (itr->x) {\n+    MTKey mark = marktree_itr_current(itr);\n+    if (row && mark.pos.row > row) {\n+      break;\n+    }\n+    if ((id == 0 || (int)mark.id == id)\n+        && (ns_id == UINT32_MAX || ns_id == mark.ns)\n+        && !mt_end(mark) && mark.decor_full && decor_has_sign(mark.decor_full)) {\n+      if (atlnum > 0) {\n+        kv_push(signs, mark);\n+        marktree_itr_next(buf->b_marktree, itr);\n+      } else {\n+        extmark_del(buf, itr, mark, 0, 0);",
            "html_url": "https://github.com/neovim/neovim/pull/25724#discussion_r1378225160",
            "id": 1378225160,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5SJgwI",
            "original_commit_id": "b37e22c59af594c1491ef4093660c6d62e126cdc",
            "original_line": 246,
            "original_position": 724,
            "original_start_line": null,
            "path": "src/nvim/sign.c",
            "position": null,
            "pull_request_review_id": 1707329804,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/25724",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1378225160/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-11-01T00:49:43Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1378225160",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/25724#discussion_r1378613006"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/25724"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1378613006"
                }
            },
            "author_association": "MEMBER",
            "body": "It is fine to label the commit as `refactor()` but would still be good with a brief news.txt item acknowledging that the behavior of legacy signs has changed.",
            "commit_id": "498667584a9690d75db428968d317905a75754da",
            "created_at": "2023-11-01T10:12:49Z",
            "diff_hunk": "@@ -77,9 +75,9 @@ When two signs with the same priority are present, and one has an icon or text\n in the signcolumn while the other has line highlighting, then both are\n displayed.\n \n-When the line on which the sign is placed is deleted, the sign is moved to the\n-next line (or the last line of the buffer, if there is no next line).  When\n-the delete is undone the sign does not move back.\n+When the line on which the sign is placed is deleted, the sign is removed along\n+with it. This is in contrast to the default Vim behavior of keeping and grouping\n+them. Undoing the line deletion also restores the removed signs.",
            "html_url": "https://github.com/neovim/neovim/pull/25724#discussion_r1378613006",
            "id": 1378613006,
            "in_reply_to_id": 1378203097,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5SK_cO",
            "original_commit_id": "b37e22c59af594c1491ef4093660c6d62e126cdc",
            "original_line": 80,
            "original_position": 22,
            "original_start_line": null,
            "path": "runtime/doc/sign.txt",
            "position": null,
            "pull_request_review_id": 1707917433,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/25724",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1378613006/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-11-01T10:12:49Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1378613006",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
                "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
                "followers_url": "https://api.github.com/users/bfredl/followers",
                "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
                "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bfredl",
                "id": 1363104,
                "login": "bfredl",
                "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
                "organizations_url": "https://api.github.com/users/bfredl/orgs",
                "received_events_url": "https://api.github.com/users/bfredl/received_events",
                "repos_url": "https://api.github.com/users/bfredl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bfredl"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/25724#discussion_r1378615048"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/25724"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1378615048"
                }
            },
            "author_association": "MEMBER",
            "body": "good catch. Doesn't need a specific test.",
            "commit_id": "498667584a9690d75db428968d317905a75754da",
            "created_at": "2023-11-01T10:15:02Z",
            "diff_hunk": "@@ -4149,42 +4092,32 @@ void buf_signcols_add_check(buf_T *buf, sign_entry_T *added)\n     return;\n   }\n \n-  sign_entry_T *s;\n-\n-  // Get first sign for added lnum\n-  for (s = added; s->se_prev && s->se_lnum == s->se_prev->se_lnum; s = s->se_prev) {}\n-\n-  // Count signs for lnum\n-  int linesum = 1;\n-  for (; s->se_next && s->se_lnum == s->se_next->se_lnum; s = s->se_next) {\n-    linesum++;\n-  }\n-  linesum += decor_signcols(buf, &decor_state, (int)s->se_lnum - 1, (int)s->se_lnum - 1,\n-                            SIGN_SHOW_MAX - linesum);\n+  int signcols = decor_signcols(buf, lnum - 1, lnum - 1, SIGN_SHOW_MAX);\n \n-  if (linesum > buf->b_signcols.size) {\n-    buf->b_signcols.size = linesum;\n-    buf->b_signcols.max = linesum;\n-    buf->b_signcols.sentinel = added->se_lnum;\n+  if (signcols > buf->b_signcols.size) {\n+    buf->b_signcols.size = signcols;\n+    buf->b_signcols.max = signcols;\n+    buf->b_signcols.sentinel = lnum;\n     redraw_buf_later(buf, UPD_NOT_VALID);\n   }\n }\n \n-int buf_signcols(buf_T *buf, int maximum)\n+int buf_signcols(buf_T *buf, int max)\n {\n   // The maximum can be determined from 'signcolumn' which is window scoped so\n   // need to invalidate signcols if the maximum is greater than the previous\n-  // maximum.\n-  if (maximum > buf->b_signcols.max) {\n+  // (valid) maximum.\n+  if (buf->b_signcols.max && max > buf->b_signcols.max) {",
            "html_url": "https://github.com/neovim/neovim/pull/25724#discussion_r1378615048",
            "id": 1378615048,
            "in_reply_to_id": 1378205087,
            "line": 4110,
            "node_id": "PRRC_kwDOAPphoM5SK_8I",
            "original_commit_id": "b37e22c59af594c1491ef4093660c6d62e126cdc",
            "original_line": 4110,
            "original_position": 131,
            "original_start_line": null,
            "path": "src/nvim/buffer.c",
            "position": 131,
            "pull_request_review_id": 1707920567,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/25724",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1378615048/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-11-01T10:15:03Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1378615048",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
                "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
                "followers_url": "https://api.github.com/users/bfredl/followers",
                "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
                "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bfredl",
                "id": 1363104,
                "login": "bfredl",
                "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
                "organizations_url": "https://api.github.com/users/bfredl/orgs",
                "received_events_url": "https://api.github.com/users/bfredl/received_events",
                "repos_url": "https://api.github.com/users/bfredl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bfredl"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/25724#discussion_r1378617667"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/25724"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1378617667"
                }
            },
            "author_association": "MEMBER",
            "body": "Shouldn't be a need, direct control of the iterator is better and is not much boiler plate in the simple case.",
            "commit_id": "498667584a9690d75db428968d317905a75754da",
            "created_at": "2023-11-01T10:17:50Z",
            "diff_hunk": "@@ -476,10 +476,6 @@ EXTERN buf_T *curbuf INIT( = NULL);    // currently active buffer\n #define FOR_ALL_BUF_WININFO(buf, wip) \\\n   for ((wip) = (buf)->b_wininfo; (wip) != NULL; (wip) = (wip)->wi_next)   // NOLINT\n \n-// Iterate through all the signs placed in a buffer\n-#define FOR_ALL_SIGNS_IN_BUF(buf, sign) \\",
            "html_url": "https://github.com/neovim/neovim/pull/25724#discussion_r1378617667",
            "id": 1378617667,
            "in_reply_to_id": 1378215145,
            "line": 480,
            "node_id": "PRRC_kwDOAPphoM5SLAlD",
            "original_commit_id": "b37e22c59af594c1491ef4093660c6d62e126cdc",
            "original_line": 480,
            "original_position": 5,
            "original_start_line": null,
            "path": "src/nvim/globals.h",
            "position": 5,
            "pull_request_review_id": 1707924584,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/25724",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1378617667/reactions"
            },
            "side": "LEFT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-11-01T10:17:50Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1378617667",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
                "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
                "followers_url": "https://api.github.com/users/bfredl/followers",
                "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
                "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bfredl",
                "id": 1363104,
                "login": "bfredl",
                "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
                "organizations_url": "https://api.github.com/users/bfredl/orgs",
                "received_events_url": "https://api.github.com/users/bfredl/received_events",
                "repos_url": "https://api.github.com/users/bfredl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bfredl"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/25724#discussion_r1378618660"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/25724"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1378618660"
                }
            },
            "author_association": "MEMBER",
            "body": ">  then want signs to be sorted by lnum->priority->sign_id->last_modifed?\r\n\r\nSounds reasonable",
            "commit_id": "498667584a9690d75db428968d317905a75754da",
            "created_at": "2023-11-01T10:18:54Z",
            "diff_hunk": "@@ -156,12 +159,16 @@ void extmark_set(buf_T *buf, uint32_t ns_id, uint32_t *idp, int row, colnr_T col\n       buf->b_virt_line_blocks++;\n     }\n     if (decor_has_sign(decor)) {\n+      if (revised) {\n+        decor->sign_mod_id = sign_add_id;\n+      }\n+      decor->sign_add_id = sign_add_id++;",
            "html_url": "https://github.com/neovim/neovim/pull/25724#discussion_r1378618660",
            "id": 1378618660,
            "in_reply_to_id": 1368366026,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5SLA0k",
            "original_commit_id": "33b91acbd1621ba64a6e7fa24ea17da8e6731f07",
            "original_line": 169,
            "original_position": 31,
            "original_start_line": 162,
            "path": "src/nvim/extmark.c",
            "position": null,
            "pull_request_review_id": 1707926059,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/25724",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1378618660/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2023-11-01T10:18:55Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1378618660",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
                "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
                "followers_url": "https://api.github.com/users/bfredl/followers",
                "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
                "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bfredl",
                "id": 1363104,
                "login": "bfredl",
                "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
                "organizations_url": "https://api.github.com/users/bfredl/orgs",
                "received_events_url": "https://api.github.com/users/bfredl/received_events",
                "repos_url": "https://api.github.com/users/bfredl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bfredl"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/25724#discussion_r1381442426"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/25724"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1381442426"
                }
            },
            "author_association": "MEMBER",
            "body": " I think this should be considered a breaking change (and not one I think I'm in favour of) and may require me to make changes to several of my plugins.",
            "commit_id": "498667584a9690d75db428968d317905a75754da",
            "created_at": "2023-11-03T10:18:08Z",
            "diff_hunk": "@@ -80,6 +80,14 @@ The following changes may require adaptations in user config or plugins.\n   the option is set (e.g. using |:set| or |nvim_set_option_value()|) without a\n   scope, which means they now behave the same way as string options.\n \n+ Signs placed through the legacy |sign-commands| are now stored and displayed\n+  as |extmarks| internally. Along with the following changes:\n+   Lines deleted and restored with |undo| have their signs removed and restored.",
            "html_url": "https://github.com/neovim/neovim/pull/25724#discussion_r1381442426",
            "id": 1381442426,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5SVyN6",
            "original_commit_id": "e1db8d64c2539447b2bf5080b1b55fe0389a9a16",
            "original_line": 85,
            "original_position": 6,
            "original_start_line": null,
            "path": "runtime/doc/news.txt",
            "position": null,
            "pull_request_review_id": 1712275052,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/25724",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1381442426/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-11-03T10:30:33Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1381442426",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/7904185?v=4",
                "events_url": "https://api.github.com/users/lewis6991/events{/privacy}",
                "followers_url": "https://api.github.com/users/lewis6991/followers",
                "following_url": "https://api.github.com/users/lewis6991/following{/other_user}",
                "gists_url": "https://api.github.com/users/lewis6991/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/lewis6991",
                "id": 7904185,
                "login": "lewis6991",
                "node_id": "MDQ6VXNlcjc5MDQxODU=",
                "organizations_url": "https://api.github.com/users/lewis6991/orgs",
                "received_events_url": "https://api.github.com/users/lewis6991/received_events",
                "repos_url": "https://api.github.com/users/lewis6991/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/lewis6991/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lewis6991/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/lewis6991"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/25724#discussion_r1381537470"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/25724"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1381537470"
                }
            },
            "author_association": "MEMBER",
            "body": "yea, if we add the \"ignore undo\" mode (I'll put up a PR), it would make sense to use that for legacy signs.",
            "commit_id": "498667584a9690d75db428968d317905a75754da",
            "created_at": "2023-11-03T11:28:48Z",
            "diff_hunk": "@@ -80,6 +80,14 @@ The following changes may require adaptations in user config or plugins.\n   the option is set (e.g. using |:set| or |nvim_set_option_value()|) without a\n   scope, which means they now behave the same way as string options.\n \n+ Signs placed through the legacy |sign-commands| are now stored and displayed\n+  as |extmarks| internally. Along with the following changes:\n+   Lines deleted and restored with |undo| have their signs removed and restored.",
            "html_url": "https://github.com/neovim/neovim/pull/25724#discussion_r1381537470",
            "id": 1381537470,
            "in_reply_to_id": 1381442426,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5SWJa-",
            "original_commit_id": "e1db8d64c2539447b2bf5080b1b55fe0389a9a16",
            "original_line": 85,
            "original_position": 6,
            "original_start_line": null,
            "path": "runtime/doc/news.txt",
            "position": null,
            "pull_request_review_id": 1712427694,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/25724",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1381537470/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-11-03T11:28:48Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1381537470",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
                "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
                "followers_url": "https://api.github.com/users/bfredl/followers",
                "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
                "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bfredl",
                "id": 1363104,
                "login": "bfredl",
                "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
                "organizations_url": "https://api.github.com/users/bfredl/orgs",
                "received_events_url": "https://api.github.com/users/bfredl/received_events",
                "repos_url": "https://api.github.com/users/bfredl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bfredl"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/25724#discussion_r1381561813"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/25724"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1381561813"
                }
            },
            "author_association": "MEMBER",
            "body": "Ok so what do we want to happen in this PR upon line deletion?\r\n\r\n1. Both legacy and extmark signs will be deleted from the buffer (regardless of 'signcolumn', \"breaking\" for extmark signs).\r\n2. We make a superficial distinction between extmark and legacy signs and have extmark signs adjusted and legacy signs deleted, just to stay backwards compatible.\r\n3. Both legacy and extmark signs will be adjusted instead of deleted (\"breaking\" for legacy signs).",
            "commit_id": "498667584a9690d75db428968d317905a75754da",
            "created_at": "2023-11-03T11:51:12Z",
            "diff_hunk": "@@ -80,6 +80,14 @@ The following changes may require adaptations in user config or plugins.\n   the option is set (e.g. using |:set| or |nvim_set_option_value()|) without a\n   scope, which means they now behave the same way as string options.\n \n+ Signs placed through the legacy |sign-commands| are now stored and displayed\n+  as |extmarks| internally. Along with the following changes:\n+   Lines deleted and restored with |undo| have their signs removed and restored.",
            "html_url": "https://github.com/neovim/neovim/pull/25724#discussion_r1381561813",
            "id": 1381561813,
            "in_reply_to_id": 1381442426,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5SWPXV",
            "original_commit_id": "e1db8d64c2539447b2bf5080b1b55fe0389a9a16",
            "original_line": 85,
            "original_position": 6,
            "original_start_line": null,
            "path": "runtime/doc/news.txt",
            "position": null,
            "pull_request_review_id": 1712467833,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/25724",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1381561813/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-11-03T11:51:12Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1381561813",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/25724#discussion_r1381584652"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/25724"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1381584652"
                }
            },
            "author_association": "MEMBER",
            "body": "The distinction will rather be that extmark signs _explicitly_ can choose either mode, just like any other extmark.\r\n\r\n\"legacy\" behavior becomes a strict subset of the configurable extmark behavior in either case.",
            "commit_id": "498667584a9690d75db428968d317905a75754da",
            "created_at": "2023-11-03T12:12:43Z",
            "diff_hunk": "@@ -80,6 +80,14 @@ The following changes may require adaptations in user config or plugins.\n   the option is set (e.g. using |:set| or |nvim_set_option_value()|) without a\n   scope, which means they now behave the same way as string options.\n \n+ Signs placed through the legacy |sign-commands| are now stored and displayed\n+  as |extmarks| internally. Along with the following changes:\n+   Lines deleted and restored with |undo| have their signs removed and restored.",
            "html_url": "https://github.com/neovim/neovim/pull/25724#discussion_r1381584652",
            "id": 1381584652,
            "in_reply_to_id": 1381442426,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5SWU8M",
            "original_commit_id": "e1db8d64c2539447b2bf5080b1b55fe0389a9a16",
            "original_line": 85,
            "original_position": 6,
            "original_start_line": null,
            "path": "runtime/doc/news.txt",
            "position": null,
            "pull_request_review_id": 1712506323,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/25724",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1381584652/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-11-03T12:12:43Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1381584652",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
                "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
                "followers_url": "https://api.github.com/users/bfredl/followers",
                "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
                "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bfredl",
                "id": 1363104,
                "login": "bfredl",
                "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
                "organizations_url": "https://api.github.com/users/bfredl/orgs",
                "received_events_url": "https://api.github.com/users/bfredl/received_events",
                "repos_url": "https://api.github.com/users/bfredl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bfredl"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/25724#discussion_r1381588790"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/25724"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1381588790"
                }
            },
            "author_association": "MEMBER",
            "body": "Yeah fair, I guess we're set then once I rebase this on top of #25882. Legacy signs will have both `invalidate` and `no_undo_restore` set and will be deleted, only [breaking](https://github.com/neovim/neovim/pull/25724#issuecomment-1775840754) the current `'signcolumn' == yes/auto:1` behavior.",
            "commit_id": "498667584a9690d75db428968d317905a75754da",
            "created_at": "2023-11-03T12:17:09Z",
            "diff_hunk": "@@ -80,6 +80,14 @@ The following changes may require adaptations in user config or plugins.\n   the option is set (e.g. using |:set| or |nvim_set_option_value()|) without a\n   scope, which means they now behave the same way as string options.\n \n+ Signs placed through the legacy |sign-commands| are now stored and displayed\n+  as |extmarks| internally. Along with the following changes:\n+   Lines deleted and restored with |undo| have their signs removed and restored.",
            "html_url": "https://github.com/neovim/neovim/pull/25724#discussion_r1381588790",
            "id": 1381588790,
            "in_reply_to_id": 1381442426,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5SWV82",
            "original_commit_id": "e1db8d64c2539447b2bf5080b1b55fe0389a9a16",
            "original_line": 85,
            "original_position": 6,
            "original_start_line": null,
            "path": "runtime/doc/news.txt",
            "position": null,
            "pull_request_review_id": 1712513675,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/25724",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1381588790/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-11-03T12:17:38Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1381588790",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/25724#discussion_r1388050099"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/25724"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1388050099"
                }
            },
            "author_association": "MEMBER",
            "body": "Can this TODO be removed now that the sentinel line is being checked for extmark signs in `buf_signcols_add_check()`, or did you plan something else @lewis6991?",
            "commit_id": "498667584a9690d75db428968d317905a75754da",
            "created_at": "2023-11-09T14:03:03Z",
            "diff_hunk": "@@ -105,12 +107,13 @@ void decor_add(buf_T *buf, int row, int row2, Decoration *decor, bool hl_id)\n       buf->b_virt_line_blocks++;\n     }\n     if (decor_has_sign(decor)) {\n+      decor->sign_add_id = sign_add_id++;\n       buf->b_signs++;\n     }\n     if (decor->sign_text) {\n       buf->b_signs_with_text++;\n       // TODO(lewis6991): smarter invalidation",
            "html_url": "https://github.com/neovim/neovim/pull/25724#discussion_r1388050099",
            "id": 1388050099,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5Su_az",
            "original_commit_id": "e3edc09b79871448f827c3e1a3ec9cae03fa4d73",
            "original_line": 115,
            "original_position": 25,
            "original_start_line": null,
            "path": "src/nvim/decoration.c",
            "position": null,
            "pull_request_review_id": 1722615445,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/25724",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1388050099/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-11-09T14:03:21Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1388050099",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/25724#discussion_r1388496138"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/25724"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1388496138"
                }
            },
            "author_association": "MEMBER",
            "body": "Maybe? I can't really remember without deep diving. If you think it's optimal (...enough) then feel free to remove.",
            "commit_id": "498667584a9690d75db428968d317905a75754da",
            "created_at": "2023-11-09T19:32:51Z",
            "diff_hunk": "@@ -105,12 +107,13 @@ void decor_add(buf_T *buf, int row, int row2, Decoration *decor, bool hl_id)\n       buf->b_virt_line_blocks++;\n     }\n     if (decor_has_sign(decor)) {\n+      decor->sign_add_id = sign_add_id++;\n       buf->b_signs++;\n     }\n     if (decor->sign_text) {\n       buf->b_signs_with_text++;\n       // TODO(lewis6991): smarter invalidation",
            "html_url": "https://github.com/neovim/neovim/pull/25724#discussion_r1388496138",
            "id": 1388496138,
            "in_reply_to_id": 1388050099,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5SwsUK",
            "original_commit_id": "e3edc09b79871448f827c3e1a3ec9cae03fa4d73",
            "original_line": 115,
            "original_position": 25,
            "original_start_line": null,
            "path": "src/nvim/decoration.c",
            "position": null,
            "pull_request_review_id": 1723350854,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/25724",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1388496138/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-11-09T19:32:51Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1388496138",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/7904185?v=4",
                "events_url": "https://api.github.com/users/lewis6991/events{/privacy}",
                "followers_url": "https://api.github.com/users/lewis6991/followers",
                "following_url": "https://api.github.com/users/lewis6991/following{/other_user}",
                "gists_url": "https://api.github.com/users/lewis6991/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/lewis6991",
                "id": 7904185,
                "login": "lewis6991",
                "node_id": "MDQ6VXNlcjc5MDQxODU=",
                "organizations_url": "https://api.github.com/users/lewis6991/orgs",
                "received_events_url": "https://api.github.com/users/lewis6991/received_events",
                "repos_url": "https://api.github.com/users/lewis6991/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/lewis6991/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lewis6991/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/lewis6991"
            }
        }
    ],
    "comment_regular_data": [
        {
            "author_association": "MEMBER",
            "body": "Good work. This looks awesome!",
            "created_at": "2023-10-20T19:40:45Z",
            "html_url": "https://github.com/neovim/neovim/pull/25724#issuecomment-1773303073",
            "id": 1773303073,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25724",
            "node_id": "IC_kwDOAPphoM5psnUh",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 1,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1773303073/reactions"
            },
            "updated_at": "2023-10-20T19:40:45Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1773303073",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/7904185?v=4",
                "events_url": "https://api.github.com/users/lewis6991/events{/privacy}",
                "followers_url": "https://api.github.com/users/lewis6991/followers",
                "following_url": "https://api.github.com/users/lewis6991/following{/other_user}",
                "gists_url": "https://api.github.com/users/lewis6991/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/lewis6991",
                "id": 7904185,
                "login": "lewis6991",
                "node_id": "MDQ6VXNlcjc5MDQxODU=",
                "organizations_url": "https://api.github.com/users/lewis6991/orgs",
                "received_events_url": "https://api.github.com/users/lewis6991/received_events",
                "repos_url": "https://api.github.com/users/lewis6991/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/lewis6991/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lewis6991/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/lewis6991"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I believe all issues related to sign ordering are now resolved. The few display tests of which I changed the expected result were modified to match the extmark sign order to legacy sign order when it is not determined by `priority` but by `sign id` (as discussed and suggested by @bfredl on matrix).\r\n\r\nThe remaining failing tests require a solution for extmark signs to match legacy behavior where deleted lines have their associated signs removed from the buffer.",
            "created_at": "2023-10-23T03:33:47Z",
            "html_url": "https://github.com/neovim/neovim/pull/25724#issuecomment-1774377618",
            "id": 1774377618,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25724",
            "node_id": "IC_kwDOAPphoM5pwtqS",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1774377618/reactions"
            },
            "updated_at": "2023-10-23T03:33:47Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1774377618",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Extmark signs will currently show up in `sign place group=*` and signs placed through the legacy commands will show up in `nvim_buf_get_extmarks()`. IMO it's not really a problem, more so a useful (unintended) consequence of this refactor. If anyone disagrees let me know and we can keep them segregated.",
            "created_at": "2023-10-23T03:44:40Z",
            "html_url": "https://github.com/neovim/neovim/pull/25724#issuecomment-1774384429",
            "id": 1774384429,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25724",
            "node_id": "IC_kwDOAPphoM5pwvUt",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1774384429/reactions"
            },
            "updated_at": "2023-10-23T03:44:40Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1774384429",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> Add a new (public?) extmark property to have the mark removed when the line it is placed on is deleted to match the legacy sign behavior. Should fix the last remaining failing tests?\r\n\r\nI'm kind of stuck on this. First of all, do we want to keep sign deletion conditional on the value of [`'signcolumn'`](https://github.com/neovim/neovim/blob/94127cb5df0a513e66777d18a2c7fa6219404280/runtime/doc/options.txt#L5620-L5624)?\r\n\r\nDo we want it to be a publicly configurable property for all extmarks? Or can it simply be done implicitly for marks containing sign properties? And would looping over all marks in the deleted range and simply deleting when the flag is set/is a sign be fine? I think if done properly it would be handled somewhere in `marktree_splice()` but I'm not sure I would manage that.\r\n\r\nCan this note about undoing sign deletion be removed, or does this need to be maintained along with the behavior somehow? Signs (being extmarks) now move back upon undo'ing.\r\nhttps://github.com/neovim/neovim/blob/94127cb5df0a513e66777d18a2c7fa6219404280/runtime/doc/sign.txt#L80-L82",
            "created_at": "2023-10-23T17:45:12Z",
            "html_url": "https://github.com/neovim/neovim/pull/25724#issuecomment-1775705749",
            "id": 1775705749,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25724",
            "node_id": "IC_kwDOAPphoM5p1x6V",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1775705749/reactions"
            },
            "updated_at": "2023-10-23T17:58:09Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1775705749",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> First of all, do we want to keep sign deletion conditional on the value of 'signcolumn'?\n\nNo. I wasn't even aware it was conditional on the sign column until recently.\n\n> Do we want it to be a publicly configurable property for all extmarks?\n\nIdeally all marks. But if it makes it easier, you can add the logic internally and defer adding this to the public extmark API. I was thinking this could be added as `lifetime = 'buffer' | 'redraw'` and deprecate `ephemeral`.\n\n> And would looping over all marks in the deleted range and simply deleting when the flag is set/is a sign be fine? I think if done properly it would be handled somewhere in marktree_splice() but I'm not sure I would manage that.\n\nYes I believe so. Can't you just mimic the code for what we do for signs?\n\n> Can this note about undoing sign deletion be removed, or does this need to be maintained along with the behavior somehow? Signs (being extmarks) now move back upon undo'ing.\n\nIsn't that note superseded by the fact that signs are deleted when lines are removed?",
            "created_at": "2023-10-23T19:00:09Z",
            "html_url": "https://github.com/neovim/neovim/pull/25724#issuecomment-1775840754",
            "id": 1775840754,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25724",
            "node_id": "IC_kwDOAPphoM5p2S3y",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1775840754/reactions"
            },
            "updated_at": "2023-10-23T19:03:31Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1775840754",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/7904185?v=4",
                "events_url": "https://api.github.com/users/lewis6991/events{/privacy}",
                "followers_url": "https://api.github.com/users/lewis6991/followers",
                "following_url": "https://api.github.com/users/lewis6991/following{/other_user}",
                "gists_url": "https://api.github.com/users/lewis6991/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/lewis6991",
                "id": 7904185,
                "login": "lewis6991",
                "node_id": "MDQ6VXNlcjc5MDQxODU=",
                "organizations_url": "https://api.github.com/users/lewis6991/orgs",
                "received_events_url": "https://api.github.com/users/lewis6991/received_events",
                "repos_url": "https://api.github.com/users/lewis6991/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/lewis6991/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lewis6991/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/lewis6991"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> Ideally all marks. But if it makes it easier, you can add the logic internally and defer adding this to the public extmark API. I was thinking this could be added as `lifetime = 'buffer' | 'redraw'` and deprecate `ephemeral`.\r\n\r\nAlright, I think I'll defer it for now then. Just need to keep in mind that whatever code I add now might become redundant whenever it is handled properly for all marks.\r\n\r\n> > And would looping over all marks in the deleted range and simply deleting when the flag is set/is a sign be fine? I think if done properly it would be handled somewhere in marktree_splice() but I'm not sure I would manage that.\r\n> \r\n> Yes I believe so. Can't you just mimic the code for what we do for signs?\r\n\r\nYeah this is no problem, and is what I had already implemented locally. I just believe its not idiomatic with the rest of the extmark adjusting code.\r\n\r\n> > Can this note about undoing sign deletion be removed, or does this need to be maintained along with the behavior somehow? Signs (being extmarks) now move back upon undo'ing.\r\n> \r\n> Isn't that note superseded by the fact that signs are deleted when lines are removed?\r\n\r\nCorrect. If we get rid of the conditional removal of signs and instead always remove them, this note is redundant all together.",
            "created_at": "2023-10-23T20:06:32Z",
            "html_url": "https://github.com/neovim/neovim/pull/25724#issuecomment-1775938231",
            "id": 1775938231,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25724",
            "node_id": "IC_kwDOAPphoM5p2qq3",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1775938231/reactions"
            },
            "updated_at": "2023-10-23T20:06:32Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1775938231",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> > > And would looping over all marks in the deleted range and simply deleting when the flag is set/is a sign be fine? I think if done properly it would be handled somewhere in marktree_splice() but I'm not sure I would manage that.\r\n> > \r\n> > \r\n> > Yes I believe so. Can't you just mimic the code for what we do for signs?\r\n> \r\n> Yeah this is no problem, and is what I had already implemented locally. I just believe its not idiomatic with the rest of the extmark adjusting code.\r\n\r\nHmm it does result in problems when joining lines. In `do_join()`, [`del_lines()`](https://github.com/neovim/neovim/blob/94127cb5df0a513e66777d18a2c7fa6219404280/src/nvim/ops.c#L4172C7-L4172C7) is called after extmarks have already been adjusted by [`extmark_splice()`](https://github.com/neovim/neovim/blob/94127cb5df0a513e66777d18a2c7fa6219404280/src/nvim/ops.c#L4172C7-L4172C7). This results in marks being deleted in lines succeeding the joined lines with my current implementation.\r\n\r\nI get the feeling deleting flagged marks should be handled while iterating in the splice routine. But TBH I haven't wrapped my head around what really happens in `extmark_splice()`. So IDK if I can manage that, or if my intuition is even correct.",
            "created_at": "2023-10-23T22:03:11Z",
            "html_url": "https://github.com/neovim/neovim/pull/25724#issuecomment-1776092794",
            "id": 1776092794,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25724",
            "node_id": "IC_kwDOAPphoM5p3QZ6",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1776092794/reactions"
            },
            "updated_at": "2023-10-24T11:46:02Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1776092794",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "OK found something that appears to work properly, also for joining lines. I guess I can take a stab at making a separate PR for the API change. @lewis6991 I didn't quite get how you wanted `lifetime` to work, `buffer|redraw` seem to me to be the current default mark lifetime and the lifetime for `ephemeral` marks. Were you suggesting we add those in addition to a third `lifetime` e.g. `line`, or am I missing something? Does https://github.com/neovim/neovim/pull/25767 look alright?",
            "created_at": "2023-10-24T01:54:43Z",
            "html_url": "https://github.com/neovim/neovim/pull/25724#issuecomment-1776361236",
            "id": 1776361236,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25724",
            "node_id": "IC_kwDOAPphoM5p4R8U",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1776361236/reactions"
            },
            "updated_at": "2023-10-24T13:13:44Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1776361236",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I have included the invalidation flags from #25767 here (and made it to work with undo), and set them implicitly for sign extmarks. Marks that were placed on deleted lines are not drawn, and are restored when the deletion is undone.\r\n\r\nIf that behavior is desireable as an API flag I'd be glad to revive #25767 but after the discussion there I'm not so sure anymore.",
            "created_at": "2023-10-31T15:12:38Z",
            "html_url": "https://github.com/neovim/neovim/pull/25724#issuecomment-1787421478",
            "id": 1787421478,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25724",
            "node_id": "IC_kwDOAPphoM5qieMm",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1787421478/reactions"
            },
            "updated_at": "2023-10-31T15:12:38Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1787421478",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "There might be room for some more cleanup, and this will surely conflict with #25826 (IDK if that will merge before this). However, I don't think the general shape of this PR will change anymore so accepting reviews (no pressure, I know it's a big refactor).",
            "created_at": "2023-10-31T15:31:35Z",
            "html_url": "https://github.com/neovim/neovim/pull/25724#issuecomment-1787460075",
            "id": 1787460075,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25724",
            "node_id": "IC_kwDOAPphoM5qinnr",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1787460075/reactions"
            },
            "updated_at": "2023-10-31T16:40:32Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1787460075",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> IDK if that will merge before this\r\n\r\nI haven't strictly decided on that yet. But if this is is close to ready maybe we should get this in first, and I can do the rebase fixes (shouldn't be a big deal, just shuffle things around).",
            "created_at": "2023-10-31T18:05:23Z",
            "html_url": "https://github.com/neovim/neovim/pull/25724#issuecomment-1787725731",
            "id": 1787725731,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25724",
            "node_id": "IC_kwDOAPphoM5qjoej",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1787725731/reactions"
            },
            "updated_at": "2023-10-31T18:05:23Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1787725731",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
                "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
                "followers_url": "https://api.github.com/users/bfredl/followers",
                "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
                "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bfredl",
                "id": 1363104,
                "login": "bfredl",
                "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
                "organizations_url": "https://api.github.com/users/bfredl/orgs",
                "received_events_url": "https://api.github.com/users/bfredl/received_events",
                "repos_url": "https://api.github.com/users/bfredl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bfredl"
            }
        }
    ],
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/25724/comments",
    "commits_url": "https://api.github.com/repos/neovim/neovim/pulls/25724/commits",
    "created_at": "2023-10-20T09:24:53Z",
    "diff_url": "https://github.com/neovim/neovim/pull/25724.diff",
    "draft": false,
    "head": {
        "label": "luukvbaal:signmerge",
        "ref": "signmerge",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/luukvbaal/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/luukvbaal/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/luukvbaal/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/luukvbaal/neovim/branches{/branch}",
            "clone_url": "https://github.com/luukvbaal/neovim.git",
            "collaborators_url": "https://api.github.com/repos/luukvbaal/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/luukvbaal/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/luukvbaal/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/luukvbaal/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/luukvbaal/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/luukvbaal/neovim/contributors",
            "created_at": "2022-07-05T23:21:47Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/luukvbaal/neovim/deployments",
            "description": "Vim-fork focused on extensibility and usability",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/luukvbaal/neovim/downloads",
            "events_url": "https://api.github.com/repos/luukvbaal/neovim/events",
            "fork": true,
            "forks": 0,
            "forks_count": 0,
            "forks_url": "https://api.github.com/repos/luukvbaal/neovim/forks",
            "full_name": "luukvbaal/neovim",
            "git_commits_url": "https://api.github.com/repos/luukvbaal/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/luukvbaal/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/luukvbaal/neovim/git/tags{/sha}",
            "git_url": "git://github.com/luukvbaal/neovim.git",
            "has_discussions": false,
            "has_downloads": true,
            "has_issues": false,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://neovim.io",
            "hooks_url": "https://api.github.com/repos/luukvbaal/neovim/hooks",
            "html_url": "https://github.com/luukvbaal/neovim",
            "id": 510922471,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/luukvbaal/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/luukvbaal/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/luukvbaal/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/luukvbaal/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/luukvbaal/neovim/labels{/name}",
            "language": "Vim Script",
            "languages_url": "https://api.github.com/repos/luukvbaal/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/luukvbaal/neovim/merges",
            "milestones_url": "https://api.github.com/repos/luukvbaal/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "R_kgDOHnQO5w",
            "notifications_url": "https://api.github.com/repos/luukvbaal/neovim/notifications{?since,all,participating}",
            "open_issues": 0,
            "open_issues_count": 0,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/luukvbaal/neovim/pulls{/number}",
            "pushed_at": "2023-11-11T01:34:30Z",
            "releases_url": "https://api.github.com/repos/luukvbaal/neovim/releases{/id}",
            "size": 243968,
            "ssh_url": "git@github.com:luukvbaal/neovim.git",
            "stargazers_count": 0,
            "stargazers_url": "https://api.github.com/repos/luukvbaal/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/luukvbaal/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/luukvbaal/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/luukvbaal/neovim/subscription",
            "svn_url": "https://github.com/luukvbaal/neovim",
            "tags_url": "https://api.github.com/repos/luukvbaal/neovim/tags",
            "teams_url": "https://api.github.com/repos/luukvbaal/neovim/teams",
            "topics": [],
            "trees_url": "https://api.github.com/repos/luukvbaal/neovim/git/trees{/sha}",
            "updated_at": "2022-09-14T02:39:38Z",
            "url": "https://api.github.com/repos/luukvbaal/neovim",
            "visibility": "public",
            "watchers": 0,
            "watchers_count": 0,
            "web_commit_signoff_required": false
        },
        "sha": "498667584a9690d75db428968d317905a75754da",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
            "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
            "followers_url": "https://api.github.com/users/luukvbaal/followers",
            "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
            "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/luukvbaal",
            "id": 31730729,
            "login": "luukvbaal",
            "node_id": "MDQ6VXNlcjMxNzMwNzI5",
            "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
            "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
            "repos_url": "https://api.github.com/users/luukvbaal/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/luukvbaal"
        }
    },
    "html_url": "https://github.com/neovim/neovim/pull/25724",
    "id": 1566338565,
    "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25724",
    "labels": [
        {
            "color": "C5DEF5",
            "default": false,
            "description": "changes that are not features or bugfixes",
            "id": 106949155,
            "name": "refactor",
            "node_id": "MDU6TGFiZWwxMDY5NDkxNTU=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/refactor"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "sign/number column",
            "id": 2962322085,
            "name": "column",
            "node_id": "MDU6TGFiZWwyOTYyMzIyMDg1",
            "url": "https://api.github.com/repos/neovim/neovim/labels/column"
        }
    ],
    "locked": false,
    "merge_commit_sha": "685f06014d21e6daf105447ccb98aeeb51ee17f2",
    "merged_at": null,
    "milestone": null,
    "node_id": "PR_kwDOAPphoM5dXG4F",
    "number": 25724,
    "patch_url": "https://github.com/neovim/neovim/pull/25724.patch",
    "requested_reviewers": [
        {
            "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
            "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
            "followers_url": "https://api.github.com/users/bfredl/followers",
            "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
            "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/bfredl",
            "id": 1363104,
            "login": "bfredl",
            "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
            "organizations_url": "https://api.github.com/users/bfredl/orgs",
            "received_events_url": "https://api.github.com/users/bfredl/received_events",
            "repos_url": "https://api.github.com/users/bfredl/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/bfredl"
        }
    ],
    "requested_teams": [],
    "review_comment_url": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}",
    "review_comments_url": "https://api.github.com/repos/neovim/neovim/pulls/25724/comments",
    "state": "open",
    "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/498667584a9690d75db428968d317905a75754da",
    "title": "refactor(sign): move legacy signs to extmarks",
    "updated_at": "2023-11-11T01:34:32Z",
    "url": "https://api.github.com/repos/neovim/neovim/pulls/25724",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
        "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
        "followers_url": "https://api.github.com/users/luukvbaal/followers",
        "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
        "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/luukvbaal",
        "id": 31730729,
        "login": "luukvbaal",
        "node_id": "MDQ6VXNlcjMxNzMwNzI5",
        "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
        "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
        "repos_url": "https://api.github.com/users/luukvbaal/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/luukvbaal"
    }
}