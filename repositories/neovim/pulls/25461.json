{
    "_links": {
        "comments": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/25461/comments"
        },
        "commits": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/25461/commits"
        },
        "html": {
            "href": "https://github.com/neovim/neovim/pull/25461"
        },
        "issue": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/25461"
        },
        "review_comment": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}"
        },
        "review_comments": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/25461/comments"
        },
        "self": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/25461"
        },
        "statuses": {
            "href": "https://api.github.com/repos/neovim/neovim/statuses/dfd6a6706425b0db3d49efc77aed7f4c28a08fda"
        }
    },
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "FIRST_TIME_CONTRIBUTOR",
    "auto_merge": null,
    "base": {
        "label": "neovim:master",
        "ref": "master",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/neovim/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/neovim/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/neovim/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/neovim/neovim/branches{/branch}",
            "clone_url": "https://github.com/neovim/neovim.git",
            "collaborators_url": "https://api.github.com/repos/neovim/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/neovim/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/neovim/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/neovim/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/neovim/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/neovim/neovim/contributors",
            "created_at": "2014-01-31T13:39:22Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/neovim/neovim/deployments",
            "description": "Vim-fork focused on extensibility and usability",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/neovim/neovim/downloads",
            "events_url": "https://api.github.com/repos/neovim/neovim/events",
            "fork": false,
            "forks": 5077,
            "forks_count": 5077,
            "forks_url": "https://api.github.com/repos/neovim/neovim/forks",
            "full_name": "neovim/neovim",
            "git_commits_url": "https://api.github.com/repos/neovim/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/neovim/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/neovim/neovim/git/tags{/sha}",
            "git_url": "git://github.com/neovim/neovim.git",
            "has_discussions": true,
            "has_downloads": true,
            "has_issues": true,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://neovim.io",
            "hooks_url": "https://api.github.com/repos/neovim/neovim/hooks",
            "html_url": "https://github.com/neovim/neovim",
            "id": 16408992,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/neovim/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/neovim/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/neovim/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/neovim/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/neovim/neovim/labels{/name}",
            "language": "Vim Script",
            "languages_url": "https://api.github.com/repos/neovim/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/neovim/neovim/merges",
            "milestones_url": "https://api.github.com/repos/neovim/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "MDEwOlJlcG9zaXRvcnkxNjQwODk5Mg==",
            "notifications_url": "https://api.github.com/repos/neovim/neovim/notifications{?since,all,participating}",
            "open_issues": 1697,
            "open_issues_count": 1697,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
                "events_url": "https://api.github.com/users/neovim/events{/privacy}",
                "followers_url": "https://api.github.com/users/neovim/followers",
                "following_url": "https://api.github.com/users/neovim/following{/other_user}",
                "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/neovim",
                "id": 6471485,
                "login": "neovim",
                "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
                "organizations_url": "https://api.github.com/users/neovim/orgs",
                "received_events_url": "https://api.github.com/users/neovim/received_events",
                "repos_url": "https://api.github.com/users/neovim/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
                "type": "Organization",
                "url": "https://api.github.com/users/neovim"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/neovim/neovim/pulls{/number}",
            "pushed_at": "2023-12-26T01:26:05Z",
            "releases_url": "https://api.github.com/repos/neovim/neovim/releases{/id}",
            "size": 247838,
            "ssh_url": "git@github.com:neovim/neovim.git",
            "stargazers_count": 72074,
            "stargazers_url": "https://api.github.com/repos/neovim/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/neovim/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/neovim/neovim/subscription",
            "svn_url": "https://github.com/neovim/neovim",
            "tags_url": "https://api.github.com/repos/neovim/neovim/tags",
            "teams_url": "https://api.github.com/repos/neovim/neovim/teams",
            "topics": [
                "api",
                "c",
                "lua",
                "neovim",
                "nvim",
                "text-editor",
                "vim"
            ],
            "trees_url": "https://api.github.com/repos/neovim/neovim/git/trees{/sha}",
            "updated_at": "2023-12-26T01:14:58Z",
            "url": "https://api.github.com/repos/neovim/neovim",
            "visibility": "public",
            "watchers": 72074,
            "watchers_count": 72074,
            "web_commit_signoff_required": false
        },
        "sha": "49efdf84139a0c0f7ba0217e5ab665bc4f222206",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
            "events_url": "https://api.github.com/users/neovim/events{/privacy}",
            "followers_url": "https://api.github.com/users/neovim/followers",
            "following_url": "https://api.github.com/users/neovim/following{/other_user}",
            "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/neovim",
            "id": 6471485,
            "login": "neovim",
            "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
            "organizations_url": "https://api.github.com/users/neovim/orgs",
            "received_events_url": "https://api.github.com/users/neovim/received_events",
            "repos_url": "https://api.github.com/users/neovim/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
            "type": "Organization",
            "url": "https://api.github.com/users/neovim"
        }
    },
    "body": "Closes #25365.\r\n\r\nThese changes fix the weird behavior described in #25365, by applying two simple changes:\r\n- remove all entries of a buffer from the jump list when deleting it\r\n- not adding a new entry to the jump list if the next buffer to be displayed was also found in the jump list\r\n\r\nThis makes the jump list behave exactly as you would expect when deleting buffers",
    "closed_at": null,
    "comment_data": [
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/25461#discussion_r1345757907"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/25461"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1345757907"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n    buf_T *buf = buflist_findnr(curwin->w_jumplist[i].fmark.fnum);\r\n```",
            "commit_id": "dfd6a6706425b0db3d49efc77aed7f4c28a08fda",
            "created_at": "2023-10-04T12:59:38Z",
            "diff_hunk": "@@ -1178,6 +1178,32 @@ static int empty_curbuf(int close_others, int forceit, int action)\n   return retval;\n }\n \n+/// Remove every jump list entry referring to a given buffer.\n+/// This function will also adjust the current jump list index.\n+void remove_buffer_from_jumplist(buf_T *deleted_buffer)\n+{\n+  // Remove all jump list entries that match the deleted buffer.\n+  for (int i = curwin->w_jumplistlen - 1; i >= 0; i--) {\n+    buf_T *tested_buffer = buflist_findnr(curwin->w_jumplist[i].fmark.fnum);",
            "html_url": "https://github.com/neovim/neovim/pull/25461#discussion_r1345757907",
            "id": 1345757907,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5QNqLT",
            "original_commit_id": "bce0c30862991e118300139b5bac3a22dec66157",
            "original_line": 1187,
            "original_position": 10,
            "original_start_line": null,
            "path": "src/nvim/buffer.c",
            "position": null,
            "pull_request_review_id": 1657475031,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/25461",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1345757907/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-10-04T12:59:39Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1345757907",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/25461#discussion_r1345758880"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/25461"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1345758880"
                }
            },
            "author_association": "MEMBER",
            "body": "\"buf\" is the codebase convention\r\n```suggestion\r\nvoid remove_buffer_from_jumplist(buf_T *deleted_buf)\r\n```",
            "commit_id": "dfd6a6706425b0db3d49efc77aed7f4c28a08fda",
            "created_at": "2023-10-04T13:00:20Z",
            "diff_hunk": "@@ -1178,6 +1178,32 @@ static int empty_curbuf(int close_others, int forceit, int action)\n   return retval;\n }\n \n+/// Remove every jump list entry referring to a given buffer.\n+/// This function will also adjust the current jump list index.\n+void remove_buffer_from_jumplist(buf_T *deleted_buffer)",
            "html_url": "https://github.com/neovim/neovim/pull/25461#discussion_r1345758880",
            "id": 1345758880,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5QNqag",
            "original_commit_id": "bce0c30862991e118300139b5bac3a22dec66157",
            "original_line": 1183,
            "original_position": 6,
            "original_start_line": null,
            "path": "src/nvim/buffer.c",
            "position": null,
            "pull_request_review_id": 1657476494,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/25461",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1345758880/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-10-04T13:00:20Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1345758880",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/25461#discussion_r1392594885"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/25461"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1392594885"
                }
            },
            "author_association": "MEMBER",
            "body": "is feed() intentional or can command be used? feed() is asynchronous and hides errors.\r\n\r\n```suggestion\r\n    command('clearjumps')\r\n```",
            "commit_id": "dfd6a6706425b0db3d49efc77aed7f4c28a08fda",
            "created_at": "2023-11-14T13:37:26Z",
            "diff_hunk": "@@ -182,6 +182,109 @@ describe(\"jumpoptions=stack behaves like 'tagstack'\", function()\n   end)\n end)\n \n+describe('buffer deletion', function()\n+  local base_file = 'Xtest-functional-buffer-deletion'\n+  local file1 = base_file..'1'\n+  local file2 = base_file..'2'\n+  local file3 = base_file..'3'\n+  local base_content = 'text'\n+  local content1 = base_content..'1'\n+  local content2 = base_content..'2'\n+  local content3 = base_content..'3'\n+  local function delete_buf(file)\n+    local bufnr = funcs.bufnr(file)\n+    command('bw '..bufnr)\n+  end\n+\n+  before_each(function()\n+    clear()\n+    feed(':clearjumps<cr>')",
            "html_url": "https://github.com/neovim/neovim/pull/25461#discussion_r1392594885",
            "id": 1392594885,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5TAU_F",
            "original_commit_id": "075464cb27e7df480a8ea06b33b541d47fe2b52e",
            "original_line": 201,
            "original_position": 20,
            "original_start_line": null,
            "path": "test/functional/editor/jump_spec.lua",
            "position": null,
            "pull_request_review_id": 1729749178,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/25461",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1392594885/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-11-14T13:37:27Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1392594885",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/25461#discussion_r1392596770"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/25461"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1392596770"
                }
            },
            "author_association": "MEMBER",
            "body": "could use dedent() with a literal `[[...]]` string.",
            "commit_id": "dfd6a6706425b0db3d49efc77aed7f4c28a08fda",
            "created_at": "2023-11-14T13:38:55Z",
            "diff_hunk": "@@ -182,6 +182,109 @@ describe(\"jumpoptions=stack behaves like 'tagstack'\", function()\n   end)\n end)\n \n+describe('buffer deletion', function()\n+  local base_file = 'Xtest-functional-buffer-deletion'\n+  local file1 = base_file..'1'\n+  local file2 = base_file..'2'\n+  local file3 = base_file..'3'\n+  local base_content = 'text'\n+  local content1 = base_content..'1'\n+  local content2 = base_content..'2'\n+  local content3 = base_content..'3'\n+  local function delete_buf(file)\n+    local bufnr = funcs.bufnr(file)\n+    command('bw '..bufnr)\n+  end\n+\n+  before_each(function()\n+    clear()\n+    command('clearjumps')\n+\n+    write_file(file1, content1, false, false)\n+    write_file(file2, content2, false, false)\n+    write_file(file3, content3, false, false)\n+\n+    command(\"edit \" .. file1)\n+    command(\"edit \" .. file2)\n+    command(\"edit \" .. file3)\n+  end)\n+\n+  it('deletes jump list entries when the current buffer is deleted', function()\n+    command(\"edit \" .. file1)\n+\n+    eq(   ''\n+       .. ' jump line  col file/text\\n'\n+       .. '   3     1    0 '..content1..'\\n'\n+       .. '   2     1    0 '..file2..'\\n'\n+       .. '   1     1    0 '..file3..'\\n'\n+       .. '>',\n+       exec_capture('jumps'))\n+\n+    command('bw')\n+\n+    eq(   ''\n+       .. ' jump line  col file/text\\n'\n+       .. '   1     1    0 '..file2..'\\n'\n+       .. '>  0     1    0 '..content3,\n+       exec_capture('jumps'))\n+  end)\n+\n+  it('deletes jump list entries when another buffer is deleted', function()\n+    eq(   ''\n+       .. ' jump line  col file/text\\n'\n+       .. '   2     1    0 '..file1..'\\n'\n+       .. '   1     1    0 '..file2..'\\n'\n+       .. '>',",
            "html_url": "https://github.com/neovim/neovim/pull/25461#discussion_r1392596770",
            "id": 1392596770,
            "line": 233,
            "node_id": "PRRC_kwDOAPphoM5TAVci",
            "original_commit_id": "bf6678877793fb7ffb85cd0c9d0b0f913cf99d08",
            "original_line": 233,
            "original_position": 56,
            "original_start_line": 233,
            "path": "test/functional/editor/jump_spec.lua",
            "position": 52,
            "pull_request_review_id": 1729752056,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/25461",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1392596770/reactions"
            },
            "side": "RIGHT",
            "start_line": 229,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2023-11-14T13:39:03Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1392596770",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/25461#discussion_r1392598874"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/25461"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1392598874"
                }
            },
            "author_association": "MEMBER",
            "body": "use full command names in code. bwipout also works with buffer names, is bufnr() needed?\r\n\r\n```suggestion\r\n    command('bwipeout '..file)\r\n```",
            "commit_id": "dfd6a6706425b0db3d49efc77aed7f4c28a08fda",
            "created_at": "2023-11-14T13:40:37Z",
            "diff_hunk": "@@ -182,6 +182,109 @@ describe(\"jumpoptions=stack behaves like 'tagstack'\", function()\n   end)\n end)\n \n+describe('buffer deletion', function()\n+  local base_file = 'Xtest-functional-buffer-deletion'\n+  local file1 = base_file..'1'\n+  local file2 = base_file..'2'\n+  local file3 = base_file..'3'\n+  local base_content = 'text'\n+  local content1 = base_content..'1'\n+  local content2 = base_content..'2'\n+  local content3 = base_content..'3'\n+  local function delete_buf(file)\n+    local bufnr = funcs.bufnr(file)\n+    command('bw '..bufnr)",
            "html_url": "https://github.com/neovim/neovim/pull/25461#discussion_r1392598874",
            "id": 1392598874,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5TAV9a",
            "original_commit_id": "bf6678877793fb7ffb85cd0c9d0b0f913cf99d08",
            "original_line": 196,
            "original_position": 15,
            "original_start_line": null,
            "path": "test/functional/editor/jump_spec.lua",
            "position": null,
            "pull_request_review_id": 1729755223,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/25461",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1392598874/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-11-14T13:40:37Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1392598874",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/25461#discussion_r1392600671"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/25461"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1392600671"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\nvoid buf_remove_from_jumplist(buf_T *deleted_buf)\r\n```",
            "commit_id": "dfd6a6706425b0db3d49efc77aed7f4c28a08fda",
            "created_at": "2023-11-14T13:41:56Z",
            "diff_hunk": "@@ -1178,6 +1178,32 @@ static int empty_curbuf(int close_others, int forceit, int action)\n   return retval;\n }\n \n+/// Remove every jump list entry referring to a given buffer.\n+/// This function will also adjust the current jump list index.\n+void remove_buffer_from_jumplist(buf_T *deleted_buf)",
            "html_url": "https://github.com/neovim/neovim/pull/25461#discussion_r1392600671",
            "id": 1392600671,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5TAWZf",
            "original_commit_id": "bf6678877793fb7ffb85cd0c9d0b0f913cf99d08",
            "original_line": 1183,
            "original_position": 6,
            "original_start_line": null,
            "path": "src/nvim/buffer.c",
            "position": null,
            "pull_request_review_id": 1729757888,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/25461",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1392600671/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-11-14T13:41:56Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1392600671",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/25461#discussion_r1394830201"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/25461"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1394830201"
                }
            },
            "author_association": "NONE",
            "body": "I didn't realize, thanks for pointing it out!",
            "commit_id": "dfd6a6706425b0db3d49efc77aed7f4c28a08fda",
            "created_at": "2023-11-15T21:33:06Z",
            "diff_hunk": "@@ -182,6 +182,109 @@ describe(\"jumpoptions=stack behaves like 'tagstack'\", function()\n   end)\n end)\n \n+describe('buffer deletion', function()\n+  local base_file = 'Xtest-functional-buffer-deletion'\n+  local file1 = base_file..'1'\n+  local file2 = base_file..'2'\n+  local file3 = base_file..'3'\n+  local base_content = 'text'\n+  local content1 = base_content..'1'\n+  local content2 = base_content..'2'\n+  local content3 = base_content..'3'\n+  local function delete_buf(file)\n+    local bufnr = funcs.bufnr(file)\n+    command('bw '..bufnr)",
            "html_url": "https://github.com/neovim/neovim/pull/25461#discussion_r1394830201",
            "id": 1394830201,
            "in_reply_to_id": 1392598874,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5TI2t5",
            "original_commit_id": "bf6678877793fb7ffb85cd0c9d0b0f913cf99d08",
            "original_line": 196,
            "original_position": 15,
            "original_start_line": null,
            "path": "test/functional/editor/jump_spec.lua",
            "position": null,
            "pull_request_review_id": 1733026398,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/25461",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1394830201/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-11-15T21:33:06Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1394830201",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/24727270?v=4",
                "events_url": "https://api.github.com/users/vE5li/events{/privacy}",
                "followers_url": "https://api.github.com/users/vE5li/followers",
                "following_url": "https://api.github.com/users/vE5li/following{/other_user}",
                "gists_url": "https://api.github.com/users/vE5li/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/vE5li",
                "id": 24727270,
                "login": "vE5li",
                "node_id": "MDQ6VXNlcjI0NzI3Mjcw",
                "organizations_url": "https://api.github.com/users/vE5li/orgs",
                "received_events_url": "https://api.github.com/users/vE5li/received_events",
                "repos_url": "https://api.github.com/users/vE5li/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/vE5li/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/vE5li/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/vE5li"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/25461#discussion_r1394839520"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/25461"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1394839520"
                }
            },
            "author_association": "NONE",
            "body": "@justinmk How would I do that nicely given that I have to format the string inside the `[[...]]`?\r\n\r\nI thought it would be nice not to have the file name/content hard coded in the string 30 times to make the code easier to maintain, but if that style of creating the literals is not in line with the rest of the tests I can change it.",
            "commit_id": "dfd6a6706425b0db3d49efc77aed7f4c28a08fda",
            "created_at": "2023-11-15T21:41:55Z",
            "diff_hunk": "@@ -182,6 +182,109 @@ describe(\"jumpoptions=stack behaves like 'tagstack'\", function()\n   end)\n end)\n \n+describe('buffer deletion', function()\n+  local base_file = 'Xtest-functional-buffer-deletion'\n+  local file1 = base_file..'1'\n+  local file2 = base_file..'2'\n+  local file3 = base_file..'3'\n+  local base_content = 'text'\n+  local content1 = base_content..'1'\n+  local content2 = base_content..'2'\n+  local content3 = base_content..'3'\n+  local function delete_buf(file)\n+    local bufnr = funcs.bufnr(file)\n+    command('bw '..bufnr)\n+  end\n+\n+  before_each(function()\n+    clear()\n+    command('clearjumps')\n+\n+    write_file(file1, content1, false, false)\n+    write_file(file2, content2, false, false)\n+    write_file(file3, content3, false, false)\n+\n+    command(\"edit \" .. file1)\n+    command(\"edit \" .. file2)\n+    command(\"edit \" .. file3)\n+  end)\n+\n+  it('deletes jump list entries when the current buffer is deleted', function()\n+    command(\"edit \" .. file1)\n+\n+    eq(   ''\n+       .. ' jump line  col file/text\\n'\n+       .. '   3     1    0 '..content1..'\\n'\n+       .. '   2     1    0 '..file2..'\\n'\n+       .. '   1     1    0 '..file3..'\\n'\n+       .. '>',\n+       exec_capture('jumps'))\n+\n+    command('bw')\n+\n+    eq(   ''\n+       .. ' jump line  col file/text\\n'\n+       .. '   1     1    0 '..file2..'\\n'\n+       .. '>  0     1    0 '..content3,\n+       exec_capture('jumps'))\n+  end)\n+\n+  it('deletes jump list entries when another buffer is deleted', function()\n+    eq(   ''\n+       .. ' jump line  col file/text\\n'\n+       .. '   2     1    0 '..file1..'\\n'\n+       .. '   1     1    0 '..file2..'\\n'\n+       .. '>',",
            "html_url": "https://github.com/neovim/neovim/pull/25461#discussion_r1394839520",
            "id": 1394839520,
            "in_reply_to_id": 1392596770,
            "line": 233,
            "node_id": "PRRC_kwDOAPphoM5TI4_g",
            "original_commit_id": "bf6678877793fb7ffb85cd0c9d0b0f913cf99d08",
            "original_line": 233,
            "original_position": 56,
            "original_start_line": 233,
            "path": "test/functional/editor/jump_spec.lua",
            "position": 52,
            "pull_request_review_id": 1733038751,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/25461",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1394839520/reactions"
            },
            "side": "RIGHT",
            "start_line": 229,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2023-11-21T11:24:30Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1394839520",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/24727270?v=4",
                "events_url": "https://api.github.com/users/vE5li/events{/privacy}",
                "followers_url": "https://api.github.com/users/vE5li/followers",
                "following_url": "https://api.github.com/users/vE5li/following{/other_user}",
                "gists_url": "https://api.github.com/users/vE5li/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/vE5li",
                "id": 24727270,
                "login": "vE5li",
                "node_id": "MDQ6VXNlcjI0NzI3Mjcw",
                "organizations_url": "https://api.github.com/users/vE5li/orgs",
                "received_events_url": "https://api.github.com/users/vE5li/received_events",
                "repos_url": "https://api.github.com/users/vE5li/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/vE5li/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/vE5li/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/vE5li"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/25461#discussion_r1417289123"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/25461"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1417289123"
                }
            },
            "author_association": "NONE",
            "body": "@justinmk I really don't want to be pushy and I know you're a busy guy but it would be really great if you could help me out here and tell me what else I need to do before merging",
            "commit_id": "dfd6a6706425b0db3d49efc77aed7f4c28a08fda",
            "created_at": "2023-12-06T13:20:30Z",
            "diff_hunk": "@@ -182,6 +182,109 @@ describe(\"jumpoptions=stack behaves like 'tagstack'\", function()\n   end)\n end)\n \n+describe('buffer deletion', function()\n+  local base_file = 'Xtest-functional-buffer-deletion'\n+  local file1 = base_file..'1'\n+  local file2 = base_file..'2'\n+  local file3 = base_file..'3'\n+  local base_content = 'text'\n+  local content1 = base_content..'1'\n+  local content2 = base_content..'2'\n+  local content3 = base_content..'3'\n+  local function delete_buf(file)\n+    local bufnr = funcs.bufnr(file)\n+    command('bw '..bufnr)\n+  end\n+\n+  before_each(function()\n+    clear()\n+    command('clearjumps')\n+\n+    write_file(file1, content1, false, false)\n+    write_file(file2, content2, false, false)\n+    write_file(file3, content3, false, false)\n+\n+    command(\"edit \" .. file1)\n+    command(\"edit \" .. file2)\n+    command(\"edit \" .. file3)\n+  end)\n+\n+  it('deletes jump list entries when the current buffer is deleted', function()\n+    command(\"edit \" .. file1)\n+\n+    eq(   ''\n+       .. ' jump line  col file/text\\n'\n+       .. '   3     1    0 '..content1..'\\n'\n+       .. '   2     1    0 '..file2..'\\n'\n+       .. '   1     1    0 '..file3..'\\n'\n+       .. '>',\n+       exec_capture('jumps'))\n+\n+    command('bw')\n+\n+    eq(   ''\n+       .. ' jump line  col file/text\\n'\n+       .. '   1     1    0 '..file2..'\\n'\n+       .. '>  0     1    0 '..content3,\n+       exec_capture('jumps'))\n+  end)\n+\n+  it('deletes jump list entries when another buffer is deleted', function()\n+    eq(   ''\n+       .. ' jump line  col file/text\\n'\n+       .. '   2     1    0 '..file1..'\\n'\n+       .. '   1     1    0 '..file2..'\\n'\n+       .. '>',",
            "html_url": "https://github.com/neovim/neovim/pull/25461#discussion_r1417289123",
            "id": 1417289123,
            "in_reply_to_id": 1392596770,
            "line": 233,
            "node_id": "PRRC_kwDOAPphoM5Ueh2j",
            "original_commit_id": "bf6678877793fb7ffb85cd0c9d0b0f913cf99d08",
            "original_line": 233,
            "original_position": 56,
            "original_start_line": 233,
            "path": "test/functional/editor/jump_spec.lua",
            "position": 52,
            "pull_request_review_id": 1767536828,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/25461",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1417289123/reactions"
            },
            "side": "RIGHT",
            "start_line": 229,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2023-12-06T13:20:31Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1417289123",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/24727270?v=4",
                "events_url": "https://api.github.com/users/vE5li/events{/privacy}",
                "followers_url": "https://api.github.com/users/vE5li/followers",
                "following_url": "https://api.github.com/users/vE5li/following{/other_user}",
                "gists_url": "https://api.github.com/users/vE5li/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/vE5li",
                "id": 24727270,
                "login": "vE5li",
                "node_id": "MDQ6VXNlcjI0NzI3Mjcw",
                "organizations_url": "https://api.github.com/users/vE5li/orgs",
                "received_events_url": "https://api.github.com/users/vE5li/received_events",
                "repos_url": "https://api.github.com/users/vE5li/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/vE5li/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/vE5li/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/vE5li"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/25461#discussion_r1418116077"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/25461"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1418116077"
                }
            },
            "author_association": "MEMBER",
            "body": "> I thought it would be nice not to have the file name/content hard coded in the string\r\n\r\ndefinitely. sometimes it's worth using a trick like replacing a token, e.g. `(([[foo {file1} ...]]):gsub('%{file1%}', 'x'))`\r\n\r\ndon't need to block on this, though.",
            "commit_id": "dfd6a6706425b0db3d49efc77aed7f4c28a08fda",
            "created_at": "2023-12-06T23:38:06Z",
            "diff_hunk": "@@ -182,6 +182,109 @@ describe(\"jumpoptions=stack behaves like 'tagstack'\", function()\n   end)\n end)\n \n+describe('buffer deletion', function()\n+  local base_file = 'Xtest-functional-buffer-deletion'\n+  local file1 = base_file..'1'\n+  local file2 = base_file..'2'\n+  local file3 = base_file..'3'\n+  local base_content = 'text'\n+  local content1 = base_content..'1'\n+  local content2 = base_content..'2'\n+  local content3 = base_content..'3'\n+  local function delete_buf(file)\n+    local bufnr = funcs.bufnr(file)\n+    command('bw '..bufnr)\n+  end\n+\n+  before_each(function()\n+    clear()\n+    command('clearjumps')\n+\n+    write_file(file1, content1, false, false)\n+    write_file(file2, content2, false, false)\n+    write_file(file3, content3, false, false)\n+\n+    command(\"edit \" .. file1)\n+    command(\"edit \" .. file2)\n+    command(\"edit \" .. file3)\n+  end)\n+\n+  it('deletes jump list entries when the current buffer is deleted', function()\n+    command(\"edit \" .. file1)\n+\n+    eq(   ''\n+       .. ' jump line  col file/text\\n'\n+       .. '   3     1    0 '..content1..'\\n'\n+       .. '   2     1    0 '..file2..'\\n'\n+       .. '   1     1    0 '..file3..'\\n'\n+       .. '>',\n+       exec_capture('jumps'))\n+\n+    command('bw')\n+\n+    eq(   ''\n+       .. ' jump line  col file/text\\n'\n+       .. '   1     1    0 '..file2..'\\n'\n+       .. '>  0     1    0 '..content3,\n+       exec_capture('jumps'))\n+  end)\n+\n+  it('deletes jump list entries when another buffer is deleted', function()\n+    eq(   ''\n+       .. ' jump line  col file/text\\n'\n+       .. '   2     1    0 '..file1..'\\n'\n+       .. '   1     1    0 '..file2..'\\n'\n+       .. '>',",
            "html_url": "https://github.com/neovim/neovim/pull/25461#discussion_r1418116077",
            "id": 1418116077,
            "in_reply_to_id": 1392596770,
            "line": 233,
            "node_id": "PRRC_kwDOAPphoM5Uhrvt",
            "original_commit_id": "bf6678877793fb7ffb85cd0c9d0b0f913cf99d08",
            "original_line": 233,
            "original_position": 56,
            "original_start_line": 233,
            "path": "test/functional/editor/jump_spec.lua",
            "position": 52,
            "pull_request_review_id": 1768842029,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/25461",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1418116077/reactions"
            },
            "side": "RIGHT",
            "start_line": 229,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2023-12-06T23:38:06Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1418116077",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/25461#discussion_r1418129363"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/25461"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1418129363"
                }
            },
            "author_association": "MEMBER",
            "body": "there is also `:help getjumplist()`, would that be useful for checking this instead of a `:jumps` screentest?\r\n\r\n(note: the existing tests in this file were added before `getjumplist()` was added).\r\n\r\n```suggestion\r\n    eq({ ... }, funcs.getjumplist())\r\n```",
            "commit_id": "dfd6a6706425b0db3d49efc77aed7f4c28a08fda",
            "created_at": "2023-12-06T23:53:19Z",
            "diff_hunk": "@@ -182,6 +182,105 @@ describe(\"jumpoptions=stack behaves like 'tagstack'\", function()\n   end)\n end)\n \n+describe('buffer deletion', function()\n+  local base_file = 'Xtest-functional-buffer-deletion'\n+  local file1 = base_file..'1'\n+  local file2 = base_file..'2'\n+  local file3 = base_file..'3'\n+  local base_content = 'text'\n+  local content1 = base_content..'1'\n+  local content2 = base_content..'2'\n+  local content3 = base_content..'3'\n+\n+  before_each(function()\n+    clear()\n+    command('clearjumps')\n+\n+    write_file(file1, content1, false, false)\n+    write_file(file2, content2, false, false)\n+    write_file(file3, content3, false, false)\n+\n+    command(\"edit \" .. file1)\n+    command(\"edit \" .. file2)\n+    command(\"edit \" .. file3)\n+  end)\n+\n+  it('deletes jump list entries when the current buffer is deleted', function()\n+    command(\"edit \" .. file1)\n+\n+    eq(   ''\n+       .. ' jump line  col file/text\\n'\n+       .. '   3     1    0 '..content1..'\\n'\n+       .. '   2     1    0 '..file2..'\\n'\n+       .. '   1     1    0 '..file3..'\\n'\n+       .. '>',\n+       exec_capture('jumps'))\n+\n+    command('bwipeout')\n+\n+    eq(   ''\n+       .. ' jump line  col file/text\\n'\n+       .. '   1     1    0 '..file2..'\\n'\n+       .. '>  0     1    0 '..content3,\n+       exec_capture('jumps'))\n+  end)\n+\n+  it('deletes jump list entries when another buffer is deleted', function()\n+    eq(   ''\n+       .. ' jump line  col file/text\\n'\n+       .. '   2     1    0 '..file1..'\\n'\n+       .. '   1     1    0 '..file2..'\\n'\n+       .. '>',\n+       exec_capture('jumps'))\n+\n+    command('bwipeout '..file2)\n+\n+    eq(   ''\n+       .. ' jump line  col file/text\\n'\n+       .. '   1     1    0 '..file1..'\\n'\n+       .. '>',\n+       exec_capture('jumps'))\n+  end)\n+\n+  it('sets the correct jump index when the current buffer is deleted', function()\n+    feed('<C-O>')\n+\n+    eq(   ''\n+       .. ' jump line  col file/text\\n'\n+       .. '   1     1    0 '..file1..'\\n'\n+       .. '>  0     1    0 '..content2..'\\n'\n+       .. '   1     1    0 '..file3,\n+       exec_capture('jumps'))",
            "html_url": "https://github.com/neovim/neovim/pull/25461#discussion_r1418129363",
            "id": 1418129363,
            "line": 253,
            "node_id": "PRRC_kwDOAPphoM5Uhu_T",
            "original_commit_id": "95a9a75a92806e69bea97c88538d8b2403d6a91c",
            "original_line": 253,
            "original_position": 72,
            "original_start_line": 248,
            "path": "test/functional/editor/jump_spec.lua",
            "position": 72,
            "pull_request_review_id": 1768854392,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/25461",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1418129363/reactions"
            },
            "side": "RIGHT",
            "start_line": 248,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2023-12-06T23:53:20Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1418129363",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/25461#discussion_r1421749111"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/25461"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1421749111"
                }
            },
            "author_association": "NONE",
            "body": "I'm not sure to be honest. I like the fact that in the current state it is very easy to understand the state of the jump list, and to visually compare when running the same steps manually. On the other hand, this test now depends on the formatting that `jumps` uses, so if that is ever changed these tests would break too.\r\n\r\nI would propose: we keep it like this for now and if it's a good idea I create a follow up PR where I migrate all the tests to use `getjumplist` instead, not just my own.",
            "commit_id": "dfd6a6706425b0db3d49efc77aed7f4c28a08fda",
            "created_at": "2023-12-10T13:16:47Z",
            "diff_hunk": "@@ -182,6 +182,105 @@ describe(\"jumpoptions=stack behaves like 'tagstack'\", function()\n   end)\n end)\n \n+describe('buffer deletion', function()\n+  local base_file = 'Xtest-functional-buffer-deletion'\n+  local file1 = base_file..'1'\n+  local file2 = base_file..'2'\n+  local file3 = base_file..'3'\n+  local base_content = 'text'\n+  local content1 = base_content..'1'\n+  local content2 = base_content..'2'\n+  local content3 = base_content..'3'\n+\n+  before_each(function()\n+    clear()\n+    command('clearjumps')\n+\n+    write_file(file1, content1, false, false)\n+    write_file(file2, content2, false, false)\n+    write_file(file3, content3, false, false)\n+\n+    command(\"edit \" .. file1)\n+    command(\"edit \" .. file2)\n+    command(\"edit \" .. file3)\n+  end)\n+\n+  it('deletes jump list entries when the current buffer is deleted', function()\n+    command(\"edit \" .. file1)\n+\n+    eq(   ''\n+       .. ' jump line  col file/text\\n'\n+       .. '   3     1    0 '..content1..'\\n'\n+       .. '   2     1    0 '..file2..'\\n'\n+       .. '   1     1    0 '..file3..'\\n'\n+       .. '>',\n+       exec_capture('jumps'))\n+\n+    command('bwipeout')\n+\n+    eq(   ''\n+       .. ' jump line  col file/text\\n'\n+       .. '   1     1    0 '..file2..'\\n'\n+       .. '>  0     1    0 '..content3,\n+       exec_capture('jumps'))\n+  end)\n+\n+  it('deletes jump list entries when another buffer is deleted', function()\n+    eq(   ''\n+       .. ' jump line  col file/text\\n'\n+       .. '   2     1    0 '..file1..'\\n'\n+       .. '   1     1    0 '..file2..'\\n'\n+       .. '>',\n+       exec_capture('jumps'))\n+\n+    command('bwipeout '..file2)\n+\n+    eq(   ''\n+       .. ' jump line  col file/text\\n'\n+       .. '   1     1    0 '..file1..'\\n'\n+       .. '>',\n+       exec_capture('jumps'))\n+  end)\n+\n+  it('sets the correct jump index when the current buffer is deleted', function()\n+    feed('<C-O>')\n+\n+    eq(   ''\n+       .. ' jump line  col file/text\\n'\n+       .. '   1     1    0 '..file1..'\\n'\n+       .. '>  0     1    0 '..content2..'\\n'\n+       .. '   1     1    0 '..file3,\n+       exec_capture('jumps'))",
            "html_url": "https://github.com/neovim/neovim/pull/25461#discussion_r1421749111",
            "id": 1421749111,
            "in_reply_to_id": 1418129363,
            "line": 253,
            "node_id": "PRRC_kwDOAPphoM5Uvit3",
            "original_commit_id": "95a9a75a92806e69bea97c88538d8b2403d6a91c",
            "original_line": 253,
            "original_position": 72,
            "original_start_line": 248,
            "path": "test/functional/editor/jump_spec.lua",
            "position": 72,
            "pull_request_review_id": 1774032541,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/25461",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1421749111/reactions"
            },
            "side": "RIGHT",
            "start_line": 248,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2023-12-10T13:16:47Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1421749111",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/24727270?v=4",
                "events_url": "https://api.github.com/users/vE5li/events{/privacy}",
                "followers_url": "https://api.github.com/users/vE5li/followers",
                "following_url": "https://api.github.com/users/vE5li/following{/other_user}",
                "gists_url": "https://api.github.com/users/vE5li/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/vE5li",
                "id": 24727270,
                "login": "vE5li",
                "node_id": "MDQ6VXNlcjI0NzI3Mjcw",
                "organizations_url": "https://api.github.com/users/vE5li/orgs",
                "received_events_url": "https://api.github.com/users/vE5li/received_events",
                "repos_url": "https://api.github.com/users/vE5li/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/vE5li/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/vE5li/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/vE5li"
            }
        }
    ],
    "comment_regular_data": [
        {
            "author_association": "MEMBER",
            "body": "Thanks! Looks worth trying, but needs a test. Also see questions below.\r\n\r\nTest could go in [test/functional/editor/jump_spec.lua](https://github.com/neovim/neovim/blob/master/test/functional/editor/jump_spec.lua). You can [run the test](https://github.com/neovim/neovim/blob/master/test/README.md#running-tests) like this:\r\n\r\n    TEST_FILE=test/functional/editor/jump_spec.lua make functionaltest\r\n\r\n## Questions\r\n\r\n- would it make sense for the logic to be part of `cleanup_jumplist` ? or why not?\r\n- is this related to https://github.com/neovim/neovim/pull/9805 , or why not?\r\n    - note that was partially reverted in [21874](https://github.com/neovim/neovim/pull/21874), need to make sure we don't regress again",
            "created_at": "2023-10-04T13:15:52Z",
            "html_url": "https://github.com/neovim/neovim/pull/25461#issuecomment-1746858548",
            "id": 1746858548,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25461",
            "node_id": "IC_kwDOAPphoM5oHvI0",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1746858548/reactions"
            },
            "updated_at": "2023-10-04T13:15:52Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1746858548",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "author_association": "NONE",
            "body": "I have some time the following days so I will try to add some tests.\r\n\r\nTo answer your questions:\r\n- I don't think it makes sense, because of the way that `cleanup_jumplist` is used throughout the code base. The cleanup I'm doing here is exclusively applicable when deleting a buffer. However, I would like to continue cleaning up the jump list even after this PR is merged, and ideally, the `cleanup_jumplist` function can be removed completely, by making sure the jump list is never put into a \"dirty\" state to begin with. I think that doing so will make jump lists more stable, but more importantly, make the jump list logic much easier to maintain, as I noticed these `cleanup_jumplist` calls make it very hard to follow what state the jump list is in\r\n- I don't really see #9805 as being related in any way other than it is also concerning the jump list. Given what I said above I would hope that both it and #21874 can be solved in a more fundamental way",
            "created_at": "2023-10-13T08:55:14Z",
            "html_url": "https://github.com/neovim/neovim/pull/25461#issuecomment-1761160045",
            "id": 1761160045,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25461",
            "node_id": "IC_kwDOAPphoM5o-Stt",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1761160045/reactions"
            },
            "updated_at": "2023-10-13T08:55:14Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1761160045",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/24727270?v=4",
                "events_url": "https://api.github.com/users/vE5li/events{/privacy}",
                "followers_url": "https://api.github.com/users/vE5li/followers",
                "following_url": "https://api.github.com/users/vE5li/following{/other_user}",
                "gists_url": "https://api.github.com/users/vE5li/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/vE5li",
                "id": 24727270,
                "login": "vE5li",
                "node_id": "MDQ6VXNlcjI0NzI3Mjcw",
                "organizations_url": "https://api.github.com/users/vE5li/orgs",
                "received_events_url": "https://api.github.com/users/vE5li/received_events",
                "repos_url": "https://api.github.com/users/vE5li/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/vE5li/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/vE5li/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/vE5li"
            }
        },
        {
            "author_association": "NONE",
            "body": "Tests are added :+1: ",
            "created_at": "2023-10-13T12:45:30Z",
            "html_url": "https://github.com/neovim/neovim/pull/25461#issuecomment-1761460838",
            "id": 1761460838,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25461",
            "node_id": "IC_kwDOAPphoM5o_cJm",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1761460838/reactions"
            },
            "updated_at": "2023-10-13T12:45:30Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1761460838",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/24727270?v=4",
                "events_url": "https://api.github.com/users/vE5li/events{/privacy}",
                "followers_url": "https://api.github.com/users/vE5li/followers",
                "following_url": "https://api.github.com/users/vE5li/following{/other_user}",
                "gists_url": "https://api.github.com/users/vE5li/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/vE5li",
                "id": 24727270,
                "login": "vE5li",
                "node_id": "MDQ6VXNlcjI0NzI3Mjcw",
                "organizations_url": "https://api.github.com/users/vE5li/orgs",
                "received_events_url": "https://api.github.com/users/vE5li/received_events",
                "repos_url": "https://api.github.com/users/vE5li/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/vE5li/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/vE5li/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/vE5li"
            }
        },
        {
            "author_association": "NONE",
            "body": "@justinmk Would be great if you could take another look at this",
            "created_at": "2023-10-20T07:39:34Z",
            "html_url": "https://github.com/neovim/neovim/pull/25461#issuecomment-1772238735",
            "id": 1772238735,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25461",
            "node_id": "IC_kwDOAPphoM5pojeP",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1772238735/reactions"
            },
            "updated_at": "2023-10-20T07:39:34Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1772238735",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/24727270?v=4",
                "events_url": "https://api.github.com/users/vE5li/events{/privacy}",
                "followers_url": "https://api.github.com/users/vE5li/followers",
                "following_url": "https://api.github.com/users/vE5li/following{/other_user}",
                "gists_url": "https://api.github.com/users/vE5li/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/vE5li",
                "id": 24727270,
                "login": "vE5li",
                "node_id": "MDQ6VXNlcjI0NzI3Mjcw",
                "organizations_url": "https://api.github.com/users/vE5li/orgs",
                "received_events_url": "https://api.github.com/users/vE5li/received_events",
                "repos_url": "https://api.github.com/users/vE5li/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/vE5li/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/vE5li/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/vE5li"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> I would like to continue cleaning up the jump list even after this PR is merged, and ideally, the `cleanup_jumplist` function can be removed completely, by making sure the jump list is never put into a \"dirty\" state to begin with. ... make the jump list logic much easier to maintain, as I noticed these `cleanup_jumplist` calls make it very hard to follow what state the jump list is in. ... and [revert: \"shada/context: fully remove jumplist duplicates #10898\"#21874](https://github.com/neovim/neovim/pull/21874) can be solved in a more fundamental way\r\n\r\n  Very much looking forward to that.",
            "created_at": "2023-11-14T13:43:43Z",
            "html_url": "https://github.com/neovim/neovim/pull/25461#issuecomment-1810229931",
            "id": 1810229931,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25461",
            "node_id": "IC_kwDOAPphoM5r5eqr",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 1,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1810229931/reactions"
            },
            "updated_at": "2023-11-14T13:43:43Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1810229931",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> I really don't want to be pushy and I know you're a busy guy but it would be really great if you could help me out here and tell me what else I need to do before merging\r\n\r\n- Pinging is helpful, so thanks the for the ping :)\r\n- It is extremely helpful to keep the PR fresh (rebased on latest master). Even though it might sit for awhile, it saves time for everyone if the PR is ready to go when a reviewer gets to it. It also means the latest CI runs against it.\r\n- It looks like CI is failing, did you check those?\r\n    - If it goes away after rebasing, it's possible that it was fixed on master. But this failure looks related to this PR since it involves `xfmark_T`.\r\n    ```\r\n    RUN      T5130 float window with only one tabpage, deleting the last non-floating window's buffer closes other windows with that buffer when there are other buffers if called from non-floating window: 110.00 ms OK\r\n    ==================== File /home/runner/work/neovim/neovim/build/log/asan.28132 ====================\r\n    = /home/runner/work/neovim/neovim/src/nvim/buffer.c:1417:30: runtime error: index -1 out of bounds for type 'xfmark_T[100]' (aka 'struct xfilemark[100]')\r\n    =     #0 0x55ab8a61becc in do_buffer /home/runner/work/neovim/neovim/src/nvim/buffer.c:1417:58\r\n    =     #1 0x55ab8a385337 in nvim_buf_delete /home/runner/work/neovim/neovim/src/nvim/api/buffer.c:1113:16\r\n    =     #2 0x55ab8a45cda5 in handle_nvim_buf_delete /home/runner/work/neovim/neovim/build/src/nvim/auto/api/private/dispatch_wrappers.generated.h:2668:3\r\n    =     #3 0x55ab8b1d7aea in request_event /home/runner/work/neovim/neovim/src/nvim/msgpack_rpc/channel.c:441:19\r\n    =     #4 0x55ab8b84e05d in state_handle_k_event /home/runner/work/neovim/neovim/src/nvim/state.c:114:7\r\n    =     #5 0x55ab8b265a90 in nv_event /home/runner/work/neovim/neovim/src/nvim/normal.c:6626:3\r\n    =     #6 0x55ab8b229251 in normal_execute /home/runner/work/neovim/neovim/src/nvim/normal.c:1224:3\r\n    =     #7 0x55ab8b84ddd9 in state_enter /home/runner/work/neovim/neovim/src/nvim/state.c:96:26\r\n    =     #8 0x55ab8b20b6d4 in normal_enter /home/runner/work/neovim/neovim/src/nvim/normal.c:513:3\r\n    =     #9 0x55ab8a2ebb9b in main /home/runner/work/neovim/neovim/src/nvim/main.c:634:3\r\n    =     #10 0x7f22d9029d8f in __libc_start_call_main csu/../sysdeps/nptl/libc_start_call_main.h:58:16\r\n    =     #11 0x7f22d9029e3f in __libc_start_main csu/../csu/libc-start.c:392:3\r\n    =     #12 0x55ab8a20ef34 in _start (/home/runner/work/neovim/neovim/build/bin/nvim+0xbcdf34) (BuildId: 11f2a7e818f3896d5facd604dc4e68e21dd2ebd1)\r\n    = \r\n    = SUMMARY: UndefinedBehaviorSanitizer: undefined-behavior /home/runner/work/neovim/neovim/src/nvim/buffer.c:1417:30 in \r\n    ===================================================================================================\r\n    nan ms test/helpers.lua:334: Found runtime errors in logfile(s): /home/runner/work/neovim/neovim/build/log/asan.28132\r\n\r\n    stack traceback:\r\n        test/helpers.lua:334: in function 'check_logs'\r\n        test/functional/helpers.lua:959: in function <test/functional/helpers.lua:958>\r\n    ```\r\n",
            "created_at": "2023-12-06T23:43:13Z",
            "html_url": "https://github.com/neovim/neovim/pull/25461#issuecomment-1843865794",
            "id": 1843865794,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25461",
            "node_id": "IC_kwDOAPphoM5t5yjC",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1843865794/reactions"
            },
            "updated_at": "2023-12-06T23:47:58Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1843865794",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "author_association": "NONE",
            "body": "> It looks like CI is failing, did you check those?\r\n\r\nI did, but to be honest I am having trouble testing this project effectively. The tests fail for me locally and I'm struggling to understand the output of the tests/CI.\r\n\r\nTake the output of `ubuntu-22.04 asan clang oldtest` for example:\r\n```\r\nExecuted:  1313 Tests\r\n Skipped:   179 Tests\r\n  Failed:     0 Tests\r\n\r\nFailures: \r\n\tTest test_quickfix failed, see output above and summary for more details\r\n```\r\n> Failed 0\r\n\r\nbut it still fails. And `ubuntu-22.04 asan clang functionaltest` logs\r\n```\r\nERR 2023-12-10T12:50:29.388 T1346.12868.0 libuv_process_spawn:90: uv_spawn(/usr/bin/pwd) failed: permission denied\r\n```\r\nBut I guess this test failing is just a consequence of the `oldtest` failing?\r\n\r\nI will look into fixing the failing test(s) today :+1: ",
            "created_at": "2023-12-10T13:33:07Z",
            "html_url": "https://github.com/neovim/neovim/pull/25461#issuecomment-1848967105",
            "id": 1848967105,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25461",
            "node_id": "IC_kwDOAPphoM5uNP_B",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1848967105/reactions"
            },
            "updated_at": "2023-12-10T13:33:07Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1848967105",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/24727270?v=4",
                "events_url": "https://api.github.com/users/vE5li/events{/privacy}",
                "followers_url": "https://api.github.com/users/vE5li/followers",
                "following_url": "https://api.github.com/users/vE5li/following{/other_user}",
                "gists_url": "https://api.github.com/users/vE5li/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/vE5li",
                "id": 24727270,
                "login": "vE5li",
                "node_id": "MDQ6VXNlcjI0NzI3Mjcw",
                "organizations_url": "https://api.github.com/users/vE5li/orgs",
                "received_events_url": "https://api.github.com/users/vE5li/received_events",
                "repos_url": "https://api.github.com/users/vE5li/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/vE5li/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/vE5li/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/vE5li"
            }
        },
        {
            "author_association": "NONE",
            "body": "@justinmk Alright, I have fixed the issue and I squashed my commits to make the commit message linter happy.\r\n\r\nFrom my point of view this is now ready to merge",
            "created_at": "2023-12-10T15:34:28Z",
            "html_url": "https://github.com/neovim/neovim/pull/25461#issuecomment-1848997744",
            "id": 1848997744,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25461",
            "node_id": "IC_kwDOAPphoM5uNXdw",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1848997744/reactions"
            },
            "updated_at": "2023-12-10T16:06:23Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1848997744",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/24727270?v=4",
                "events_url": "https://api.github.com/users/vE5li/events{/privacy}",
                "followers_url": "https://api.github.com/users/vE5li/followers",
                "following_url": "https://api.github.com/users/vE5li/following{/other_user}",
                "gists_url": "https://api.github.com/users/vE5li/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/vE5li",
                "id": 24727270,
                "login": "vE5li",
                "node_id": "MDQ6VXNlcjI0NzI3Mjcw",
                "organizations_url": "https://api.github.com/users/vE5li/orgs",
                "received_events_url": "https://api.github.com/users/vE5li/received_events",
                "repos_url": "https://api.github.com/users/vE5li/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/vE5li/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/vE5li/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/vE5li"
            }
        },
        {
            "author_association": "NONE",
            "body": "@justinmk I rebased on master again, please see if this can be merged",
            "created_at": "2023-12-19T17:14:07Z",
            "html_url": "https://github.com/neovim/neovim/pull/25461#issuecomment-1863179868",
            "id": 1863179868,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25461",
            "node_id": "IC_kwDOAPphoM5vDd5c",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1863179868/reactions"
            },
            "updated_at": "2023-12-19T17:14:07Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1863179868",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/24727270?v=4",
                "events_url": "https://api.github.com/users/vE5li/events{/privacy}",
                "followers_url": "https://api.github.com/users/vE5li/followers",
                "following_url": "https://api.github.com/users/vE5li/following{/other_user}",
                "gists_url": "https://api.github.com/users/vE5li/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/vE5li",
                "id": 24727270,
                "login": "vE5li",
                "node_id": "MDQ6VXNlcjI0NzI3Mjcw",
                "organizations_url": "https://api.github.com/users/vE5li/orgs",
                "received_events_url": "https://api.github.com/users/vE5li/received_events",
                "repos_url": "https://api.github.com/users/vE5li/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/vE5li/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/vE5li/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/vE5li"
            }
        }
    ],
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/25461/comments",
    "commits_url": "https://api.github.com/repos/neovim/neovim/pulls/25461/commits",
    "created_at": "2023-10-01T15:09:46Z",
    "diff_url": "https://github.com/neovim/neovim/pull/25461.diff",
    "draft": false,
    "head": {
        "label": "vE5li:fix-jumplist",
        "ref": "fix-jumplist",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/vE5li/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/vE5li/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/vE5li/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/vE5li/neovim/branches{/branch}",
            "clone_url": "https://github.com/vE5li/neovim.git",
            "collaborators_url": "https://api.github.com/repos/vE5li/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/vE5li/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/vE5li/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/vE5li/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/vE5li/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/vE5li/neovim/contributors",
            "created_at": "2023-10-01T13:58:56Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/vE5li/neovim/deployments",
            "description": "Vim-fork focused on extensibility and usability",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/vE5li/neovim/downloads",
            "events_url": "https://api.github.com/repos/vE5li/neovim/events",
            "fork": true,
            "forks": 0,
            "forks_count": 0,
            "forks_url": "https://api.github.com/repos/vE5li/neovim/forks",
            "full_name": "vE5li/neovim",
            "git_commits_url": "https://api.github.com/repos/vE5li/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/vE5li/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/vE5li/neovim/git/tags{/sha}",
            "git_url": "git://github.com/vE5li/neovim.git",
            "has_discussions": false,
            "has_downloads": true,
            "has_issues": false,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://neovim.io",
            "hooks_url": "https://api.github.com/repos/vE5li/neovim/hooks",
            "html_url": "https://github.com/vE5li/neovim",
            "id": 698957632,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/vE5li/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/vE5li/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/vE5li/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/vE5li/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/vE5li/neovim/labels{/name}",
            "language": "Vim Script",
            "languages_url": "https://api.github.com/repos/vE5li/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/vE5li/neovim/merges",
            "milestones_url": "https://api.github.com/repos/vE5li/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "R_kgDOKak_QA",
            "notifications_url": "https://api.github.com/repos/vE5li/neovim/notifications{?since,all,participating}",
            "open_issues": 0,
            "open_issues_count": 0,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/24727270?v=4",
                "events_url": "https://api.github.com/users/vE5li/events{/privacy}",
                "followers_url": "https://api.github.com/users/vE5li/followers",
                "following_url": "https://api.github.com/users/vE5li/following{/other_user}",
                "gists_url": "https://api.github.com/users/vE5li/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/vE5li",
                "id": 24727270,
                "login": "vE5li",
                "node_id": "MDQ6VXNlcjI0NzI3Mjcw",
                "organizations_url": "https://api.github.com/users/vE5li/orgs",
                "received_events_url": "https://api.github.com/users/vE5li/received_events",
                "repos_url": "https://api.github.com/users/vE5li/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/vE5li/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/vE5li/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/vE5li"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/vE5li/neovim/pulls{/number}",
            "pushed_at": "2023-12-25T05:20:37Z",
            "releases_url": "https://api.github.com/repos/vE5li/neovim/releases{/id}",
            "size": 239984,
            "ssh_url": "git@github.com:vE5li/neovim.git",
            "stargazers_count": 0,
            "stargazers_url": "https://api.github.com/repos/vE5li/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/vE5li/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/vE5li/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/vE5li/neovim/subscription",
            "svn_url": "https://github.com/vE5li/neovim",
            "tags_url": "https://api.github.com/repos/vE5li/neovim/tags",
            "teams_url": "https://api.github.com/repos/vE5li/neovim/teams",
            "topics": [],
            "trees_url": "https://api.github.com/repos/vE5li/neovim/git/trees{/sha}",
            "updated_at": "2023-10-01T14:08:18Z",
            "url": "https://api.github.com/repos/vE5li/neovim",
            "visibility": "public",
            "watchers": 0,
            "watchers_count": 0,
            "web_commit_signoff_required": false
        },
        "sha": "dfd6a6706425b0db3d49efc77aed7f4c28a08fda",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/24727270?v=4",
            "events_url": "https://api.github.com/users/vE5li/events{/privacy}",
            "followers_url": "https://api.github.com/users/vE5li/followers",
            "following_url": "https://api.github.com/users/vE5li/following{/other_user}",
            "gists_url": "https://api.github.com/users/vE5li/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/vE5li",
            "id": 24727270,
            "login": "vE5li",
            "node_id": "MDQ6VXNlcjI0NzI3Mjcw",
            "organizations_url": "https://api.github.com/users/vE5li/orgs",
            "received_events_url": "https://api.github.com/users/vE5li/received_events",
            "repos_url": "https://api.github.com/users/vE5li/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/vE5li/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/vE5li/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/vE5li"
        }
    },
    "html_url": "https://github.com/neovim/neovim/pull/25461",
    "id": 1537062601,
    "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25461",
    "labels": [
        {
            "color": "C5DEF5",
            "default": false,
            "description": "",
            "id": 5581608985,
            "name": "marks",
            "node_id": "LA_kwDOAPphoM8AAAABTLCYGQ",
            "url": "https://api.github.com/repos/neovim/neovim/labels/marks"
        }
    ],
    "locked": false,
    "merge_commit_sha": "47e6c840230efcf04bb99b54d40d0e1608f42b1d",
    "merged_at": null,
    "milestone": null,
    "node_id": "PR_kwDOAPphoM5bnbbJ",
    "number": 25461,
    "patch_url": "https://github.com/neovim/neovim/pull/25461.patch",
    "requested_reviewers": [],
    "requested_teams": [],
    "review_comment_url": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}",
    "review_comments_url": "https://api.github.com/repos/neovim/neovim/pulls/25461/comments",
    "state": "open",
    "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/dfd6a6706425b0db3d49efc77aed7f4c28a08fda",
    "title": "fix(jumplist): update jump list when deleting buffers",
    "updated_at": "2023-12-19T17:14:09Z",
    "url": "https://api.github.com/repos/neovim/neovim/pulls/25461",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/24727270?v=4",
        "events_url": "https://api.github.com/users/vE5li/events{/privacy}",
        "followers_url": "https://api.github.com/users/vE5li/followers",
        "following_url": "https://api.github.com/users/vE5li/following{/other_user}",
        "gists_url": "https://api.github.com/users/vE5li/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/vE5li",
        "id": 24727270,
        "login": "vE5li",
        "node_id": "MDQ6VXNlcjI0NzI3Mjcw",
        "organizations_url": "https://api.github.com/users/vE5li/orgs",
        "received_events_url": "https://api.github.com/users/vE5li/received_events",
        "repos_url": "https://api.github.com/users/vE5li/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/vE5li/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/vE5li/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/vE5li"
    }
}