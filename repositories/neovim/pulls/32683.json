{
    "_links": {
        "comments": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/32683/comments"
        },
        "commits": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/32683/commits"
        },
        "html": {
            "href": "https://github.com/neovim/neovim/pull/32683"
        },
        "issue": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/32683"
        },
        "review_comment": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}"
        },
        "review_comments": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/32683/comments"
        },
        "self": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
        },
        "statuses": {
            "href": "https://api.github.com/repos/neovim/neovim/statuses/1e7c097882f91fefc3be2a68b18c3f79f78c1231"
        }
    },
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "auto_merge": null,
    "base": {
        "label": "neovim:master",
        "ref": "master",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/neovim/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/neovim/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/neovim/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/neovim/neovim/branches{/branch}",
            "clone_url": "https://github.com/neovim/neovim.git",
            "collaborators_url": "https://api.github.com/repos/neovim/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/neovim/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/neovim/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/neovim/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/neovim/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/neovim/neovim/contributors",
            "created_at": "2014-01-31T13:39:22Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/neovim/neovim/deployments",
            "description": "Vim-fork focused on extensibility and usability",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/neovim/neovim/downloads",
            "events_url": "https://api.github.com/repos/neovim/neovim/events",
            "fork": false,
            "forks": 6015,
            "forks_count": 6015,
            "forks_url": "https://api.github.com/repos/neovim/neovim/forks",
            "full_name": "neovim/neovim",
            "git_commits_url": "https://api.github.com/repos/neovim/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/neovim/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/neovim/neovim/git/tags{/sha}",
            "git_url": "git://github.com/neovim/neovim.git",
            "has_discussions": true,
            "has_downloads": true,
            "has_issues": true,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://neovim.io",
            "hooks_url": "https://api.github.com/repos/neovim/neovim/hooks",
            "html_url": "https://github.com/neovim/neovim",
            "id": 16408992,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/neovim/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/neovim/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/neovim/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/neovim/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/neovim/neovim/labels{/name}",
            "language": "Vim Script",
            "languages_url": "https://api.github.com/repos/neovim/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/neovim/neovim/merges",
            "milestones_url": "https://api.github.com/repos/neovim/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "MDEwOlJlcG9zaXRvcnkxNjQwODk5Mg==",
            "notifications_url": "https://api.github.com/repos/neovim/neovim/notifications{?since,all,participating}",
            "open_issues": 1915,
            "open_issues_count": 1915,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
                "events_url": "https://api.github.com/users/neovim/events{/privacy}",
                "followers_url": "https://api.github.com/users/neovim/followers",
                "following_url": "https://api.github.com/users/neovim/following{/other_user}",
                "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/neovim",
                "id": 6471485,
                "login": "neovim",
                "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
                "organizations_url": "https://api.github.com/users/neovim/orgs",
                "received_events_url": "https://api.github.com/users/neovim/received_events",
                "repos_url": "https://api.github.com/users/neovim/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
                "type": "Organization",
                "url": "https://api.github.com/users/neovim",
                "user_view_type": "public"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/neovim/neovim/pulls{/number}",
            "pushed_at": "2025-04-15T00:58:00Z",
            "releases_url": "https://api.github.com/repos/neovim/neovim/releases{/id}",
            "size": 317153,
            "ssh_url": "git@github.com:neovim/neovim.git",
            "stargazers_count": 88635,
            "stargazers_url": "https://api.github.com/repos/neovim/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/neovim/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/neovim/neovim/subscription",
            "svn_url": "https://github.com/neovim/neovim",
            "tags_url": "https://api.github.com/repos/neovim/neovim/tags",
            "teams_url": "https://api.github.com/repos/neovim/neovim/teams",
            "topics": [
                "api",
                "c",
                "lua",
                "neovim",
                "nvim",
                "text-editor",
                "vim"
            ],
            "trees_url": "https://api.github.com/repos/neovim/neovim/git/trees{/sha}",
            "updated_at": "2025-04-15T02:31:15Z",
            "url": "https://api.github.com/repos/neovim/neovim",
            "visibility": "public",
            "watchers": 88635,
            "watchers_count": 88635,
            "web_commit_signoff_required": false
        },
        "sha": "bd37348939a781046dedc6f101a8db80bf1afc53",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
            "events_url": "https://api.github.com/users/neovim/events{/privacy}",
            "followers_url": "https://api.github.com/users/neovim/followers",
            "following_url": "https://api.github.com/users/neovim/following{/other_user}",
            "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/neovim",
            "id": 6471485,
            "login": "neovim",
            "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
            "organizations_url": "https://api.github.com/users/neovim/orgs",
            "received_events_url": "https://api.github.com/users/neovim/received_events",
            "repos_url": "https://api.github.com/users/neovim/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
            "type": "Organization",
            "url": "https://api.github.com/users/neovim",
            "user_view_type": "public"
        }
    },
    "body": "# Description\r\n\r\nAddressing Issue  https://github.com/neovim/neovim/issues/32550\r\n\r\n## Problem\r\n\r\nInconsistency in terms of dynamic environment variable changes. The problem relates an internal cache, that may not be available for all necessary access. \r\n\r\n## Solution\r\n\r\nFollowing the suggesiton from [comment](https://github.com/neovim/neovim/issues/32550#issuecomment-2674327903) by @justinmk , the internal cache is removed.\r\n\r\nNote: removing the cache implies memory allocation on occasions when `os_getenv()` is called. Corresponding memory has to be `xfree()`-d after.",
    "closed_at": null,
    "comment_data": [
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1986150173"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1986150173"
                }
            },
            "author_association": "MEMBER",
            "body": "`must_free` seems like the most common name in the codebase\r\n```suggestion\r\n  const char *must_free = var;\r\n```",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-08T20:36:49Z",
            "diff_hunk": "@@ -429,6 +411,7 @@ void init_homedir(void)\n   homedir = NULL;\n \n   const char *var = os_getenv(\"HOME\");\n+  const char *setmefree = var;",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1986150173",
            "id": 1986150173,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM52Yj8d",
            "original_commit_id": "6f5a63dd380f6ecf98bec3ca3d9d858a7b2339a1",
            "original_line": 414,
            "original_position": 57,
            "original_start_line": null,
            "path": "src/nvim/os/env.c",
            "position": null,
            "pull_request_review_id": 2669260105,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1986150173/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-08T20:36:50Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1986150173",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1986150513"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1986150513"
                }
            },
            "author_association": "MEMBER",
            "body": "this kind of casting is never done for free() in this codebase. sometimes a `(void *)` cast is needed, but unless the build fails, don't cast. We have tons of checks and analysis that make such casts counterproductive.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-08T20:38:46Z",
            "diff_hunk": "@@ -919,7 +892,9 @@ char *vim_getenv(const char *name)\n \n   const char *kos_env_path = os_getenv(name);\n   if (kos_env_path != NULL) {\n-    return xstrdup(kos_env_path);\n+    char *retval = xstrdup(kos_env_path);\n+    xfree((char *)kos_env_path);",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1986150513",
            "id": 1986150513,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM52YkBx",
            "original_commit_id": "6f5a63dd380f6ecf98bec3ca3d9d858a7b2339a1",
            "original_line": 896,
            "original_position": 93,
            "original_start_line": null,
            "path": "src/nvim/os/env.c",
            "position": null,
            "pull_request_review_id": 2669260381,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1986150513/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-08T20:39:46Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1986150513",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1986150550"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1986150550"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n    xfree(kos_env_path);\r\n```",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-08T20:39:04Z",
            "diff_hunk": "@@ -919,7 +892,9 @@ char *vim_getenv(const char *name)\n \n   const char *kos_env_path = os_getenv(name);\n   if (kos_env_path != NULL) {\n-    return xstrdup(kos_env_path);\n+    char *retval = xstrdup(kos_env_path);\n+    xfree((char *)kos_env_path);",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1986150550",
            "id": 1986150550,
            "in_reply_to_id": 1986150513,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM52YkCW",
            "original_commit_id": "6f5a63dd380f6ecf98bec3ca3d9d858a7b2339a1",
            "original_line": 896,
            "original_position": 93,
            "original_start_line": null,
            "path": "src/nvim/os/env.c",
            "position": null,
            "pull_request_review_id": 2669260423,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1986150550/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-08T20:39:04Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1986150550",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1986151176"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1986151176"
                }
            },
            "author_association": "MEMBER",
            "body": "don't think we need a new `appname_init_namebuf` function. just modify `get_appname` somehow.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-08T20:42:23Z",
            "diff_hunk": "@@ -120,12 +126,12 @@ char *server_address_new(const char *name)\n   static uint32_t count = 0;\n   char fmt[ADDRESS_MAX_SIZE];\n #ifdef MSWIN\n-  (void)get_appname(true);\n+  appname_init_namebuf();",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1986151176",
            "id": 1986151176,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM52YkMI",
            "original_commit_id": "6f5a63dd380f6ecf98bec3ca3d9d858a7b2339a1",
            "original_line": 129,
            "original_position": 43,
            "original_start_line": null,
            "path": "src/nvim/msgpack_rpc/server.c",
            "position": null,
            "pull_request_review_id": 2669260957,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1986151176/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-08T20:42:23Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1986151176",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1986151426"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1986151426"
                }
            },
            "author_association": "MEMBER",
            "body": "    /// Caller must free the return value.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-08T20:44:29Z",
            "diff_hunk": "@@ -52,10 +52,6 @@\n # include \"os/env.c.generated.h\"\n #endif\n \n-// Because `uv_os_getenv` requires allocating, we must manage a map to maintain\n-// the behavior of `os_getenv`.\n-static PMap(cstr_t) envmap = MAP_INIT;\n-\n /// Like getenv(), but returns NULL if the variable is empty.",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1986151426",
            "id": 1986151426,
            "line": 55,
            "node_id": "PRRC_kwDOAPphoM52YkQC",
            "original_commit_id": "6f5a63dd380f6ecf98bec3ca3d9d858a7b2339a1",
            "original_line": 55,
            "original_position": 8,
            "original_start_line": null,
            "path": "src/nvim/os/env.c",
            "position": 8,
            "pull_request_review_id": 2669261226,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1986151426/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-08T20:44:29Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1986151426",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1986151557"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1986151557"
                }
            },
            "author_association": "MEMBER",
            "body": "do we need to `xfree(s)` before calling os_getenv again here? also just below.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-08T20:45:25Z",
            "diff_hunk": "@@ -2410,22 +2410,37 @@ char *enc_locale(void)\n {\n   int i;\n   char buf[50];\n+  bool memfree = false;\n \n   const char *s;\n+  const char *langinfo = NULL;\n+  const char *setmefree = NULL;\n+\n #ifdef HAVE_NL_LANGINFO_CODESET\n   if (!(s = nl_langinfo(CODESET)) || *s == NUL)\n #endif\n   {\n     if (!(s = setlocale(LC_CTYPE, NULL)) || *s == NUL) {\n       if ((s = os_getenv(\"LC_ALL\"))) {\n+        memfree = true;\n         if ((s = os_getenv(\"LC_CTYPE\"))) {",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1986151557",
            "id": 1986151557,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM52YkSF",
            "original_commit_id": "6f5a63dd380f6ecf98bec3ca3d9d858a7b2339a1",
            "original_line": 2427,
            "original_position": 17,
            "original_start_line": null,
            "path": "src/nvim/mbyte.c",
            "position": null,
            "pull_request_review_id": 2669261377,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1986151557/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-08T20:45:47Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1986151557",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1986151868"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1986151868"
                }
            },
            "author_association": "MEMBER",
            "body": "Note that `xfree(NULL)` is 100% safe. Does that simplify any of the code in this PR?",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-08T20:46:50Z",
            "diff_hunk": "@@ -2410,22 +2410,37 @@ char *enc_locale(void)\n {\n   int i;\n   char buf[50];\n+  bool memfree = false;\n \n   const char *s;\n+  const char *langinfo = NULL;\n+  const char *setmefree = NULL;\n+\n #ifdef HAVE_NL_LANGINFO_CODESET\n   if (!(s = nl_langinfo(CODESET)) || *s == NUL)\n #endif\n   {\n     if (!(s = setlocale(LC_CTYPE, NULL)) || *s == NUL) {\n       if ((s = os_getenv(\"LC_ALL\"))) {\n+        memfree = true;\n         if ((s = os_getenv(\"LC_CTYPE\"))) {\n           s = os_getenv(\"LANG\");\n         }\n       }\n     }\n   }\n \n-  if (!s) {\n+  if (s != NULL) {",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1986151868",
            "id": 1986151868,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM52YkW8",
            "original_commit_id": "6f5a63dd380f6ecf98bec3ca3d9d858a7b2339a1",
            "original_line": 2433,
            "original_position": 25,
            "original_start_line": null,
            "path": "src/nvim/mbyte.c",
            "position": null,
            "pull_request_review_id": 2669261673,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1986151868/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-08T20:46:51Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1986151868",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1987847498"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1987847498"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Both the `mustfree` and the `must_free` variables are used in the codebase exclusively as booleans. Basically indicating that \"memory allocation happened\", and we need to address that within the corresponding scope.\r\n\r\nMy point with the different naming was to make a distinction from the existing terminology. In my case above the pointer is defined to keep track of the allocated _area_ itself. (This is typically needed when the original variable, such as `var` in this case may be reassigned pointing to another memory area in a potential execution flow -- resulting in the original allocation getting lost, if not \"remembered\".)\r\n\r\nIf you prefer a different name for the variable, sure I'm glad to rename to whatever may be suggested. However, don't you agree that it may be conceptually beneficial to distinguish between `bool` and `const [char|int|..] *` deallocation helper variables?",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-10T18:51:31Z",
            "diff_hunk": "@@ -429,6 +411,7 @@ void init_homedir(void)\n   homedir = NULL;\n \n   const char *var = os_getenv(\"HOME\");\n+  const char *setmefree = var;",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1987847498",
            "id": 1987847498,
            "in_reply_to_id": 1986150173,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM52fCVK",
            "original_commit_id": "6f5a63dd380f6ecf98bec3ca3d9d858a7b2339a1",
            "original_line": 414,
            "original_position": 57,
            "original_start_line": null,
            "path": "src/nvim/os/env.c",
            "position": null,
            "pull_request_review_id": 2671917264,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1987847498/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-10T18:51:31Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1987847498",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1987847616"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1987847616"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "The build fails otherwise with the following error:\r\n\r\n```\r\nerror: passing 'const char *' to parameter of type 'void *' discards qualifiers [-Werror,-Wincompatible-pointer-types-discards-qualifiers]\r\n```\r\nIn case there's an alternative solution to avoid it, I'm glad to go with that.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-10T18:51:36Z",
            "diff_hunk": "@@ -919,7 +892,9 @@ char *vim_getenv(const char *name)\n \n   const char *kos_env_path = os_getenv(name);\n   if (kos_env_path != NULL) {\n-    return xstrdup(kos_env_path);\n+    char *retval = xstrdup(kos_env_path);\n+    xfree((char *)kos_env_path);",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1987847616",
            "id": 1987847616,
            "in_reply_to_id": 1986150513,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM52fCXA",
            "original_commit_id": "6f5a63dd380f6ecf98bec3ca3d9d858a7b2339a1",
            "original_line": 896,
            "original_position": 93,
            "original_start_line": null,
            "path": "src/nvim/os/env.c",
            "position": null,
            "pull_request_review_id": 2671917473,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1987847616/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-10T18:51:36Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1987847616",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1987847852"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1987847852"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Sure, if preferred.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-10T18:51:47Z",
            "diff_hunk": "@@ -120,12 +126,12 @@ char *server_address_new(const char *name)\n   static uint32_t count = 0;\n   char fmt[ADDRESS_MAX_SIZE];\n #ifdef MSWIN\n-  (void)get_appname(true);\n+  appname_init_namebuf();",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1987847852",
            "id": 1987847852,
            "in_reply_to_id": 1986151176,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM52fCas",
            "original_commit_id": "6f5a63dd380f6ecf98bec3ca3d9d858a7b2339a1",
            "original_line": 129,
            "original_position": 43,
            "original_start_line": null,
            "path": "src/nvim/msgpack_rpc/server.c",
            "position": null,
            "pull_request_review_id": 2671917850,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1987847852/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-10T18:51:47Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1987847852",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1987848006"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1987848006"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Totally, very good call, thank you.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-10T18:51:54Z",
            "diff_hunk": "@@ -2410,22 +2410,37 @@ char *enc_locale(void)\n {\n   int i;\n   char buf[50];\n+  bool memfree = false;\n \n   const char *s;\n+  const char *langinfo = NULL;\n+  const char *setmefree = NULL;\n+\n #ifdef HAVE_NL_LANGINFO_CODESET\n   if (!(s = nl_langinfo(CODESET)) || *s == NUL)\n #endif\n   {\n     if (!(s = setlocale(LC_CTYPE, NULL)) || *s == NUL) {\n       if ((s = os_getenv(\"LC_ALL\"))) {\n+        memfree = true;\n         if ((s = os_getenv(\"LC_CTYPE\"))) {",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1987848006",
            "id": 1987848006,
            "in_reply_to_id": 1986151557,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM52fCdG",
            "original_commit_id": "6f5a63dd380f6ecf98bec3ca3d9d858a7b2339a1",
            "original_line": 2427,
            "original_position": 17,
            "original_start_line": null,
            "path": "src/nvim/mbyte.c",
            "position": null,
            "pull_request_review_id": 2671918086,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1987848006/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-10T18:51:54Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1987848006",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1987936056"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1987936056"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Absolutely. Sry, my bad, I thought I added this.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-10T19:58:08Z",
            "diff_hunk": "@@ -52,10 +52,6 @@\n # include \"os/env.c.generated.h\"\n #endif\n \n-// Because `uv_os_getenv` requires allocating, we must manage a map to maintain\n-// the behavior of `os_getenv`.\n-static PMap(cstr_t) envmap = MAP_INIT;\n-\n /// Like getenv(), but returns NULL if the variable is empty.",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1987936056",
            "id": 1987936056,
            "in_reply_to_id": 1986151426,
            "line": 55,
            "node_id": "PRRC_kwDOAPphoM52fX84",
            "original_commit_id": "6f5a63dd380f6ecf98bec3ca3d9d858a7b2339a1",
            "original_line": 55,
            "original_position": 8,
            "original_start_line": null,
            "path": "src/nvim/os/env.c",
            "position": 8,
            "pull_request_review_id": 2672060199,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1987936056/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-10T19:58:09Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1987936056",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1988077371"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1988077371"
                }
            },
            "author_association": "MEMBER",
            "body": "> However, don't you agree that it may be conceptually beneficial to distinguish between `bool` and `const [char|int|..] *` deallocation helper variables?\r\n\r\nThat's a good thought, but unless both kinds are in the same function body, risk of ambiguity/confusion is very low. ",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-10T21:52:21Z",
            "diff_hunk": "@@ -429,6 +411,7 @@ void init_homedir(void)\n   homedir = NULL;\n \n   const char *var = os_getenv(\"HOME\");\n+  const char *setmefree = var;",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1988077371",
            "id": 1988077371,
            "in_reply_to_id": 1986150173,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM52f6c7",
            "original_commit_id": "6f5a63dd380f6ecf98bec3ca3d9d858a7b2339a1",
            "original_line": 414,
            "original_position": 57,
            "original_start_line": null,
            "path": "src/nvim/os/env.c",
            "position": null,
            "pull_request_review_id": 2672285412,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1988077371/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-10T21:52:21Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1988077371",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1988084613"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1988084613"
                }
            },
            "author_association": "MEMBER",
            "body": "can immediately `xfree(conemuansi_env)` here (also don't need to check NULL).",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-10T22:00:16Z",
            "diff_hunk": "@@ -117,7 +118,8 @@ void os_title_reset(void)\n /// @param out_fd stdout file descriptor\n void os_tty_guess_term(const char **term, int out_fd)\n {\n-  bool conemu_ansi = strequal(os_getenv(\"ConEmuANSI\"), \"ON\");\n+  const char *conemuansi_env = os_getenv(\"ConEmuANSI\");\n+  bool conemu_ansi = strequal(conemuansi_env, \"ON\");",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1988084613",
            "id": 1988084613,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM52f8OF",
            "original_commit_id": "6f5a63dd380f6ecf98bec3ca3d9d858a7b2339a1",
            "original_line": 122,
            "original_position": 14,
            "original_start_line": null,
            "path": "src/nvim/os/os_win_console.c",
            "position": null,
            "pull_request_review_id": 2672296494,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1988084613/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-10T22:00:16Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1988084613",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1988087063"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1988087063"
                }
            },
            "author_association": "MEMBER",
            "body": "could avoid the need for `memfree` by changing line 192 to:\r\n\r\n    env_val = xstrdup(\"\");",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-10T22:03:21Z",
            "diff_hunk": "@@ -188,6 +212,9 @@ char *stdpaths_get_xdg_var(const XDGVarType idx)\n     ret = xdg_remove_duplicate(ret, ENV_SEPSTR);\n   }\n \n+  if (memfree) {",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1988087063",
            "id": 1988087063,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM52f80X",
            "original_commit_id": "6f5a63dd380f6ecf98bec3ca3d9d858a7b2339a1",
            "original_line": 215,
            "original_position": 72,
            "original_start_line": null,
            "path": "src/nvim/os/stdpaths.c",
            "position": null,
            "pull_request_review_id": 2672300548,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1988087063/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-10T22:03:21Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1988087063",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1988120733"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1988120733"
                }
            },
            "author_association": "MEMBER",
            "body": "`tofree`",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-10T22:46:17Z",
            "diff_hunk": "@@ -429,6 +411,7 @@ void init_homedir(void)\n   homedir = NULL;\n \n   const char *var = os_getenv(\"HOME\");\n+  const char *setmefree = var;",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1988120733",
            "id": 1988120733,
            "in_reply_to_id": 1986150173,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM52gFCd",
            "original_commit_id": "6f5a63dd380f6ecf98bec3ca3d9d858a7b2339a1",
            "original_line": 414,
            "original_position": 57,
            "original_start_line": null,
            "path": "src/nvim/os/env.c",
            "position": null,
            "pull_request_review_id": 2672352353,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1988120733/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-10T22:46:17Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1988120733",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1988753165"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1988753165"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Here I have a conceptual question, please let me know which policy is preferred:\r\n\r\n1. `xfree()` as soon as the var is not used anymore\r\n   - cons: may be fragile, leaving space for future bugs (code change may introduce additional usage of the variable after `xfree()`)\r\n2. have an \"`xfree() block\" at the end of corresponding scope, de-allocating all occupied memory when it surely won't be needed anymore",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-11T09:09:30Z",
            "diff_hunk": "@@ -117,7 +118,8 @@ void os_title_reset(void)\n /// @param out_fd stdout file descriptor\n void os_tty_guess_term(const char **term, int out_fd)\n {\n-  bool conemu_ansi = strequal(os_getenv(\"ConEmuANSI\"), \"ON\");\n+  const char *conemuansi_env = os_getenv(\"ConEmuANSI\");\n+  bool conemu_ansi = strequal(conemuansi_env, \"ON\");",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1988753165",
            "id": 1988753165,
            "in_reply_to_id": 1988084613,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM52ifcN",
            "original_commit_id": "6f5a63dd380f6ecf98bec3ca3d9d858a7b2339a1",
            "original_line": 122,
            "original_position": 14,
            "original_start_line": null,
            "path": "src/nvim/os/os_win_console.c",
            "position": null,
            "pull_request_review_id": 2673510074,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1988753165/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-11T09:09:30Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1988753165",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1989100578"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1989100578"
                }
            },
            "author_association": "MEMBER",
            "body": "(1) is preferred, especially when it can be done immediately after usage. We have static analyzers running in CI, which will catch use-after-free, so I'm not worried about that (though I would have been in 2014 :).\r\n\r\n(2) is for cases where there are multiple usages in the function body, thus grouping all the resource releasing in one place is better.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-11T12:02:09Z",
            "diff_hunk": "@@ -117,7 +118,8 @@ void os_title_reset(void)\n /// @param out_fd stdout file descriptor\n void os_tty_guess_term(const char **term, int out_fd)\n {\n-  bool conemu_ansi = strequal(os_getenv(\"ConEmuANSI\"), \"ON\");\n+  const char *conemuansi_env = os_getenv(\"ConEmuANSI\");\n+  bool conemu_ansi = strequal(conemuansi_env, \"ON\");",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1989100578",
            "id": 1989100578,
            "in_reply_to_id": 1988084613,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM52j0Qi",
            "original_commit_id": "6f5a63dd380f6ecf98bec3ca3d9d858a7b2339a1",
            "original_line": 122,
            "original_position": 14,
            "original_start_line": null,
            "path": "src/nvim/os/os_win_console.c",
            "position": null,
            "pull_request_review_id": 2674186405,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1989100578/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-11T12:02:09Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1989100578",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1989118865"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1989118865"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Cool, thx very much for the explanation! Changing the code accordingly.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-11T12:12:27Z",
            "diff_hunk": "@@ -117,7 +118,8 @@ void os_title_reset(void)\n /// @param out_fd stdout file descriptor\n void os_tty_guess_term(const char **term, int out_fd)\n {\n-  bool conemu_ansi = strequal(os_getenv(\"ConEmuANSI\"), \"ON\");\n+  const char *conemuansi_env = os_getenv(\"ConEmuANSI\");\n+  bool conemu_ansi = strequal(conemuansi_env, \"ON\");",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1989118865",
            "id": 1989118865,
            "in_reply_to_id": 1988084613,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM52j4uR",
            "original_commit_id": "6f5a63dd380f6ecf98bec3ca3d9d858a7b2339a1",
            "original_line": 122,
            "original_position": 14,
            "original_start_line": null,
            "path": "src/nvim/os/os_win_console.c",
            "position": null,
            "pull_request_review_id": 2674223519,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1989118865/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-11T12:12:27Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1989118865",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1989794068"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1989794068"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Should be OK now.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-11T17:20:21Z",
            "diff_hunk": "@@ -2410,22 +2410,37 @@ char *enc_locale(void)\n {\n   int i;\n   char buf[50];\n+  bool memfree = false;\n \n   const char *s;\n+  const char *langinfo = NULL;\n+  const char *setmefree = NULL;\n+\n #ifdef HAVE_NL_LANGINFO_CODESET\n   if (!(s = nl_langinfo(CODESET)) || *s == NUL)\n #endif\n   {\n     if (!(s = setlocale(LC_CTYPE, NULL)) || *s == NUL) {\n       if ((s = os_getenv(\"LC_ALL\"))) {\n+        memfree = true;\n         if ((s = os_getenv(\"LC_CTYPE\"))) {",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1989794068",
            "id": 1989794068,
            "in_reply_to_id": 1986151557,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM52mdkU",
            "original_commit_id": "6f5a63dd380f6ecf98bec3ca3d9d858a7b2339a1",
            "original_line": 2427,
            "original_position": 17,
            "original_start_line": null,
            "path": "src/nvim/mbyte.c",
            "position": null,
            "pull_request_review_id": 2675491284,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1989794068/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-11T17:20:22Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1989794068",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1989796256"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1989796256"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Added. (Copied existing wording from the module, should I change to the suggested one?).",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-11T17:21:43Z",
            "diff_hunk": "@@ -52,10 +52,6 @@\n # include \"os/env.c.generated.h\"\n #endif\n \n-// Because `uv_os_getenv` requires allocating, we must manage a map to maintain\n-// the behavior of `os_getenv`.\n-static PMap(cstr_t) envmap = MAP_INIT;\n-\n /// Like getenv(), but returns NULL if the variable is empty.",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1989796256",
            "id": 1989796256,
            "in_reply_to_id": 1986151426,
            "line": 55,
            "node_id": "PRRC_kwDOAPphoM52meGg",
            "original_commit_id": "6f5a63dd380f6ecf98bec3ca3d9d858a7b2339a1",
            "original_line": 55,
            "original_position": 8,
            "original_start_line": null,
            "path": "src/nvim/os/env.c",
            "position": 8,
            "pull_request_review_id": 2675495032,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1989796256/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-11T17:21:43Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1989796256",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1989796921"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1989796921"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Done.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-11T17:22:10Z",
            "diff_hunk": "@@ -117,7 +118,8 @@ void os_title_reset(void)\n /// @param out_fd stdout file descriptor\n void os_tty_guess_term(const char **term, int out_fd)\n {\n-  bool conemu_ansi = strequal(os_getenv(\"ConEmuANSI\"), \"ON\");\n+  const char *conemuansi_env = os_getenv(\"ConEmuANSI\");\n+  bool conemu_ansi = strequal(conemuansi_env, \"ON\");",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1989796921",
            "id": 1989796921,
            "in_reply_to_id": 1988084613,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM52meQ5",
            "original_commit_id": "6f5a63dd380f6ecf98bec3ca3d9d858a7b2339a1",
            "original_line": 122,
            "original_position": 14,
            "original_start_line": null,
            "path": "src/nvim/os/os_win_console.c",
            "position": null,
            "pull_request_review_id": 2675496138,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1989796921/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-11T17:22:10Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1989796921",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1989798546"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1989798546"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Fixed on all occurences (simplifying the PR). ",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-11T17:23:11Z",
            "diff_hunk": "@@ -2410,22 +2410,37 @@ char *enc_locale(void)\n {\n   int i;\n   char buf[50];\n+  bool memfree = false;\n \n   const char *s;\n+  const char *langinfo = NULL;\n+  const char *setmefree = NULL;\n+\n #ifdef HAVE_NL_LANGINFO_CODESET\n   if (!(s = nl_langinfo(CODESET)) || *s == NUL)\n #endif\n   {\n     if (!(s = setlocale(LC_CTYPE, NULL)) || *s == NUL) {\n       if ((s = os_getenv(\"LC_ALL\"))) {\n+        memfree = true;\n         if ((s = os_getenv(\"LC_CTYPE\"))) {\n           s = os_getenv(\"LANG\");\n         }\n       }\n     }\n   }\n \n-  if (!s) {\n+  if (s != NULL) {",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1989798546",
            "id": 1989798546,
            "in_reply_to_id": 1986151868,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM52meqS",
            "original_commit_id": "6f5a63dd380f6ecf98bec3ca3d9d858a7b2339a1",
            "original_line": 2433,
            "original_position": 25,
            "original_start_line": null,
            "path": "src/nvim/mbyte.c",
            "position": null,
            "pull_request_review_id": 2675498722,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1989798546/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-11T17:23:11Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1989798546",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1989799044"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1989799044"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Done.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-11T17:23:33Z",
            "diff_hunk": "@@ -188,6 +212,9 @@ char *stdpaths_get_xdg_var(const XDGVarType idx)\n     ret = xdg_remove_duplicate(ret, ENV_SEPSTR);\n   }\n \n+  if (memfree) {",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1989799044",
            "id": 1989799044,
            "in_reply_to_id": 1988087063,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM52meyE",
            "original_commit_id": "6f5a63dd380f6ecf98bec3ca3d9d858a7b2339a1",
            "original_line": 215,
            "original_position": 72,
            "original_start_line": null,
            "path": "src/nvim/os/stdpaths.c",
            "position": null,
            "pull_request_review_id": 2675499610,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1989799044/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-11T17:23:33Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1989799044",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1989856185"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1989856185"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "I'm wondering that this may be the cleanest / most_consistent solution for the two occasions when only `NameBuff` population is needed.\r\n\r\nOther alternatives, similar to \r\n```\r\nconst char *get_appname(bool namelike, bool return_value_needed) {\r\n    const char *env_val = os_getenv(\"NVIM_APPNAME\");\r\n    \r\n    [add env val to NameBuff]\r\n \r\n    if (return_value_needed) {\r\n       return env_val;\r\n    } else {\r\n       // Potential xfree(env_val) here, so caller only needs to free if \r\n       // no return value is consumed\r\n       return NULL;\r\n    }\r\n}\r\n```\r\n just feel more confusing (signature, return value, potential side effects)... \r\n \r\n In case there may be a straightforward, elegant solution in mind, I'm glad to go with your suggestion.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-11T17:56:44Z",
            "diff_hunk": "@@ -120,12 +125,14 @@ char *server_address_new(const char *name)\n   static uint32_t count = 0;\n   char fmt[ADDRESS_MAX_SIZE];\n #ifdef MSWIN\n-  (void)get_appname(true);\n+  const char *appname = get_appname(true);    // Call to initialize NameBuf with appname\n+  xfree((char *)appname);",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1989856185",
            "id": 1989856185,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM52msu5",
            "original_commit_id": "763cd72635c555665fbcb776027696bf3a1b95a9",
            "original_line": 129,
            "original_position": 43,
            "original_start_line": null,
            "path": "src/nvim/msgpack_rpc/server.c",
            "position": null,
            "pull_request_review_id": 2675596530,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1989856185/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-11T17:56:44Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1989856185",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1989857056"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1989857056"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Issue addressed, though not with a great solution. Details in [corresponding comment](https://github.com/neovim/neovim/pull/32683/files#r1989856185)",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-11T17:57:20Z",
            "diff_hunk": "@@ -120,12 +126,12 @@ char *server_address_new(const char *name)\n   static uint32_t count = 0;\n   char fmt[ADDRESS_MAX_SIZE];\n #ifdef MSWIN\n-  (void)get_appname(true);\n+  appname_init_namebuf();",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1989857056",
            "id": 1989857056,
            "in_reply_to_id": 1986151176,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM52ms8g",
            "original_commit_id": "6f5a63dd380f6ecf98bec3ca3d9d858a7b2339a1",
            "original_line": 129,
            "original_position": 43,
            "original_start_line": null,
            "path": "src/nvim/msgpack_rpc/server.c",
            "position": null,
            "pull_request_review_id": 2675598051,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1989857056/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-11T17:57:43Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1989857056",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1989858516"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1989858516"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "See [comment](https://github.com/neovim/neovim/pull/32683/files#r1989856185) above. ",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-11T17:58:13Z",
            "diff_hunk": "@@ -120,12 +125,14 @@ char *server_address_new(const char *name)\n   static uint32_t count = 0;\n   char fmt[ADDRESS_MAX_SIZE];\n #ifdef MSWIN\n-  (void)get_appname(true);\n+  const char *appname = get_appname(true);    // Call to initialize NameBuf with appname\n+  xfree((char *)appname);\n   int r = snprintf(fmt, sizeof(fmt), \"\\\\\\\\.\\\\pipe\\\\%s.%\" PRIu64 \".%\" PRIu32,\n                    name ? name : NameBuff, os_get_pid(), count++);\n #else\n   char *dir = stdpaths_get_xdg_var(kXDGRuntimeDir);\n-  (void)get_appname(true);\n+  const char *appname = get_appname(true);    // Call to initialize NameBuf with appname\n+  xfree((char *)appname);",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1989858516",
            "id": 1989858516,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM52mtTU",
            "original_commit_id": "763cd72635c555665fbcb776027696bf3a1b95a9",
            "original_line": 135,
            "original_position": 50,
            "original_start_line": null,
            "path": "src/nvim/msgpack_rpc/server.c",
            "position": null,
            "pull_request_review_id": 2675600764,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1989858516/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-11T17:58:14Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1989858516",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1990288232"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1990288232"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Hmmm.... Or is this assumption correct (mapping to current usage): *either* a return value, *or* data in the `NameBuff` is expected? Never both? \r\n\r\nThat could allow for an execution flow as such:\r\n```\r\nconst char *get_appname(bool namelike) {\r\n    const char *env_val = os_getenv(\"NVIM_APPNAME\");\r\n    \r\n    if (namelike) {\r\n      [add env val to NameBuff]\r\n      xfree(env_var)\r\n      return NULL\r\n    }\r\n    return env_val;\r\n}\r\n```\r\nIf the parameter is expressing exclusive usage of buffer or return value -- then it can make sense if the caller needs to `xfree()` or not accordingly. It's not consistent in terms of side-effects, yet alongside a clear logic.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-11T23:31:33Z",
            "diff_hunk": "@@ -120,12 +125,14 @@ char *server_address_new(const char *name)\n   static uint32_t count = 0;\n   char fmt[ADDRESS_MAX_SIZE];\n #ifdef MSWIN\n-  (void)get_appname(true);\n+  const char *appname = get_appname(true);    // Call to initialize NameBuf with appname\n+  xfree((char *)appname);",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1990288232",
            "id": 1990288232,
            "in_reply_to_id": 1989856185,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM52oWNo",
            "original_commit_id": "763cd72635c555665fbcb776027696bf3a1b95a9",
            "original_line": 129,
            "original_position": 43,
            "original_start_line": null,
            "path": "src/nvim/msgpack_rpc/server.c",
            "position": null,
            "pull_request_review_id": 2676407811,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1990288232/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-11T23:31:34Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1990288232",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1991207128"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1991207128"
                }
            },
            "author_association": "MEMBER",
            "body": "can avoid `memfree`\r\n```suggestion\r\n  const char *s = NULL;\r\n```",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-12T10:51:28Z",
            "diff_hunk": "@@ -2410,22 +2410,37 @@ char *enc_locale(void)\n {\n   int i;\n   char buf[50];\n+  bool memfree = false;\n \n   const char *s;",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1991207128",
            "id": 1991207128,
            "line": 2414,
            "node_id": "PRRC_kwDOAPphoM52r2jY",
            "original_commit_id": "763cd72635c555665fbcb776027696bf3a1b95a9",
            "original_line": 2414,
            "original_position": 6,
            "original_start_line": null,
            "path": "src/nvim/mbyte.c",
            "position": 3,
            "pull_request_review_id": 2677960000,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1991207128/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-12T10:51:28Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1991207128",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1991215214"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1991215214"
                }
            },
            "author_association": "MEMBER",
            "body": "probably don't need that comment. lots of places in the codebase like that.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-12T10:56:19Z",
            "diff_hunk": "@@ -161,11 +167,11 @@ char *stdpaths_get_xdg_var(const XDGVarType idx)\n \n #ifdef MSWIN\n   if (env_val == NULL && xdg_defaults_env_vars[idx] != NULL) {\n-    env_val = os_getenv(xdg_defaults_env_vars[idx]);\n+    env_val = os_getenv(xdg_defaults_env_vars[idx]);    // 'env_val' was NULL, no xfree() is needed",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1991215214",
            "id": 1991215214,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM52r4hu",
            "original_commit_id": "763cd72635c555665fbcb776027696bf3a1b95a9",
            "original_line": 170,
            "original_position": 47,
            "original_start_line": null,
            "path": "src/nvim/os/stdpaths.c",
            "position": null,
            "pull_request_review_id": 2677972911,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1991215214/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-12T10:56:19Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1991215214",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1991226987"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1991226987"
                }
            },
            "author_association": "MEMBER",
            "body": "Maybe simpler for `get_appname` to *never* allocate its result, instead it always writes to NameBuff (and perhaps for convenience, returns a pointer to it).\r\n\r\nThen the caller can `xstrdup(get_appname(..))` if it wants to.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-12T11:03:34Z",
            "diff_hunk": "@@ -120,12 +125,14 @@ char *server_address_new(const char *name)\n   static uint32_t count = 0;\n   char fmt[ADDRESS_MAX_SIZE];\n #ifdef MSWIN\n-  (void)get_appname(true);\n+  const char *appname = get_appname(true);    // Call to initialize NameBuf with appname\n+  xfree((char *)appname);",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1991226987",
            "id": 1991226987,
            "in_reply_to_id": 1989856185,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM52r7Zr",
            "original_commit_id": "763cd72635c555665fbcb776027696bf3a1b95a9",
            "original_line": 129,
            "original_position": 43,
            "original_start_line": null,
            "path": "src/nvim/msgpack_rpc/server.c",
            "position": null,
            "pull_request_review_id": 2677992548,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1991226987/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-12T11:03:35Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1991226987",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1991231491"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1991231491"
                }
            },
            "author_association": "MEMBER",
            "body": "if `_noalloc` were used above, then could do this this here:\r\n```suggestion\r\n      set_string_default(kOptShell, (char *)shell, true);\r\n```",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-12T11:06:47Z",
            "diff_hunk": "@@ -196,6 +196,7 @@ static void set_init_default_shell(void)\n     } else {\n       set_string_default(kOptShell, (char *)shell, false);",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1991231491",
            "id": 1991231491,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM52r8gD",
            "original_commit_id": "763cd72635c555665fbcb776027696bf3a1b95a9",
            "original_line": 197,
            "original_position": 2,
            "original_start_line": null,
            "path": "src/nvim/option.c",
            "position": null,
            "pull_request_review_id": 2678000322,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1991231491/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-12T11:06:47Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1991231491",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1991234139"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1991234139"
                }
            },
            "author_association": "MEMBER",
            "body": "wrong cast. the declaration of `kos_env_path` should remove `const`.\r\n\r\nthat also should remove the need for the xfree() casts.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-12T11:08:29Z",
            "diff_hunk": "@@ -919,7 +904,7 @@ char *vim_getenv(const char *name)\n \n   const char *kos_env_path = os_getenv(name);\n   if (kos_env_path != NULL) {\n-    return xstrdup(kos_env_path);\n+    return (char *)kos_env_path;",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1991234139",
            "id": 1991234139,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM52r9Jb",
            "original_commit_id": "763cd72635c555665fbcb776027696bf3a1b95a9",
            "original_line": 907,
            "original_position": 147,
            "original_start_line": null,
            "path": "src/nvim/os/env.c",
            "position": null,
            "pull_request_review_id": 2678005729,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1991234139/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-12T11:09:05Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1991234139",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1991236438"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1991236438"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n    kos_env_path = os_getenv(\"VIM\");  // kos_env_path was NULL.\r\n```",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-12T11:09:55Z",
            "diff_hunk": "@@ -932,12 +917,13 @@ char *vim_getenv(const char *name)\n   char *vim_path = NULL;\n   if (vimruntime\n       && *default_vimruntime_dir == NUL) {\n-    kos_env_path = os_getenv(\"VIM\");\n+    kos_env_path = os_getenv(\"VIM\");    // No xfree() needed for kos_env_path, as it must be NULL if we got here",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1991236438",
            "id": 1991236438,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM52r9tW",
            "original_commit_id": "763cd72635c555665fbcb776027696bf3a1b95a9",
            "original_line": 920,
            "original_position": 156,
            "original_start_line": null,
            "path": "src/nvim/os/env.c",
            "position": null,
            "pull_request_review_id": 2678009423,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1991236438/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-12T11:09:55Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1991236438",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1991237964"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1991237964"
                }
            },
            "author_association": "MEMBER",
            "body": "`_noalloc`",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-12T11:10:59Z",
            "diff_hunk": "@@ -1229,7 +1219,9 @@ bool os_shell_is_cmdexe(const char *sh)\n   }\n   if (striequal(sh, \"$COMSPEC\")) {\n     const char *comspec = os_getenv(\"COMSPEC\");\n-    return striequal(\"cmd.exe\", path_tail(comspec));\n+    bool retval = striequal(\"cmd.exe\", path_tail(comspec));\n+    xfree((char *)comspec);\n+    return retval;",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1991237964",
            "id": 1991237964,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM52r-FM",
            "original_commit_id": "763cd72635c555665fbcb776027696bf3a1b95a9",
            "original_line": 1224,
            "original_position": 203,
            "original_start_line": 1221,
            "path": "src/nvim/os/env.c",
            "position": null,
            "pull_request_review_id": 2678011939,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1991237964/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-03-12T11:10:59Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1991237964",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1991240389"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1991240389"
                }
            },
            "author_association": "MEMBER",
            "body": "will `_noalloc` help here?",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-12T11:12:38Z",
            "diff_hunk": "@@ -70,16 +70,19 @@ char *get_mess_lang(void)\n }\n \n /// Get the language used for messages from the environment.\n+/// Result must be freed by the caller.\n ///\n /// This uses LC_MESSAGES when available, which it is for most systems we build for\n /// except for windows. Then fallback to get the value from the environment\n /// ourselves, and use LC_CTYPE as a last resort.\n static char *get_mess_env(void)",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1991240389",
            "id": 1991240389,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM52r-rF",
            "original_commit_id": "763cd72635c555665fbcb776027696bf3a1b95a9",
            "original_line": 78,
            "original_position": 9,
            "original_start_line": null,
            "path": "src/nvim/os/lang.c",
            "position": null,
            "pull_request_review_id": 2678015894,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1991240389/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-12T11:12:38Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1991240389",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1991241344"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1991241344"
                }
            },
            "author_association": "MEMBER",
            "body": "`_noalloc`",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-12T11:12:59Z",
            "diff_hunk": "@@ -117,7 +118,9 @@ void os_title_reset(void)\n /// @param out_fd stdout file descriptor\n void os_tty_guess_term(const char **term, int out_fd)\n {\n-  bool conemu_ansi = strequal(os_getenv(\"ConEmuANSI\"), \"ON\");\n+  const char *conemuansi_env = os_getenv(\"ConEmuANSI\");\n+  bool conemu_ansi = strequal(conemuansi_env, \"ON\");",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1991241344",
            "id": 1991241344,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM52r-6A",
            "original_commit_id": "763cd72635c555665fbcb776027696bf3a1b95a9",
            "original_line": 122,
            "original_position": 14,
            "original_start_line": 121,
            "path": "src/nvim/os/os_win_console.c",
            "position": null,
            "pull_request_review_id": 2678017779,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1991241344/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-03-12T11:12:59Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1991241344",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1991243901"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1991243901"
                }
            },
            "author_association": "MEMBER",
            "body": "xstrdup(), eliminates `memfree`",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-12T11:14:19Z",
            "diff_hunk": "@@ -101,11 +102,19 @@ struct tm *os_localtime_r(const time_t *restrict clock,\n   const char *tz = os_getenv(\"TZ\");\n   if (tz == NULL) {\n     tz = \"\";",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1991243901",
            "id": 1991243901,
            "line": 103,
            "node_id": "PRRC_kwDOAPphoM52r_h9",
            "original_commit_id": "763cd72635c555665fbcb776027696bf3a1b95a9",
            "original_line": 103,
            "original_position": 11,
            "original_start_line": null,
            "path": "src/nvim/os/time.c",
            "position": 8,
            "pull_request_review_id": 2678022844,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1991243901/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-12T11:14:19Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1991243901",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1991295915"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1991295915"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Cool, I agree, it's an elegant solution. Thx, implementing so :-) ",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-12T11:42:37Z",
            "diff_hunk": "@@ -120,12 +125,14 @@ char *server_address_new(const char *name)\n   static uint32_t count = 0;\n   char fmt[ADDRESS_MAX_SIZE];\n #ifdef MSWIN\n-  (void)get_appname(true);\n+  const char *appname = get_appname(true);    // Call to initialize NameBuf with appname\n+  xfree((char *)appname);",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1991295915",
            "id": 1991295915,
            "in_reply_to_id": 1989856185,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM52sMOr",
            "original_commit_id": "763cd72635c555665fbcb776027696bf3a1b95a9",
            "original_line": 129,
            "original_position": 43,
            "original_start_line": null,
            "path": "src/nvim/msgpack_rpc/server.c",
            "position": null,
            "pull_request_review_id": 2678114246,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1991295915/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-12T11:42:38Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1991295915",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1991308897"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1991308897"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Exactly. Coming soon :-) ",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-12T11:48:15Z",
            "diff_hunk": "@@ -1229,7 +1219,9 @@ bool os_shell_is_cmdexe(const char *sh)\n   }\n   if (striequal(sh, \"$COMSPEC\")) {\n     const char *comspec = os_getenv(\"COMSPEC\");\n-    return striequal(\"cmd.exe\", path_tail(comspec));\n+    bool retval = striequal(\"cmd.exe\", path_tail(comspec));\n+    xfree((char *)comspec);\n+    return retval;",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1991308897",
            "id": 1991308897,
            "in_reply_to_id": 1991237964,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM52sPZh",
            "original_commit_id": "763cd72635c555665fbcb776027696bf3a1b95a9",
            "original_line": 1224,
            "original_position": 203,
            "original_start_line": 1221,
            "path": "src/nvim/os/env.c",
            "position": null,
            "pull_request_review_id": 2678137497,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1991308897/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-03-12T11:48:16Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1991308897",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1991317561"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1991317561"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Clearly ;-)",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-12T11:51:34Z",
            "diff_hunk": "@@ -117,7 +118,9 @@ void os_title_reset(void)\n /// @param out_fd stdout file descriptor\n void os_tty_guess_term(const char **term, int out_fd)\n {\n-  bool conemu_ansi = strequal(os_getenv(\"ConEmuANSI\"), \"ON\");\n+  const char *conemuansi_env = os_getenv(\"ConEmuANSI\");\n+  bool conemu_ansi = strequal(conemuansi_env, \"ON\");",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1991317561",
            "id": 1991317561,
            "in_reply_to_id": 1991241344,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM52sRg5",
            "original_commit_id": "763cd72635c555665fbcb776027696bf3a1b95a9",
            "original_line": 122,
            "original_position": 14,
            "original_start_line": 121,
            "path": "src/nvim/os/os_win_console.c",
            "position": null,
            "pull_request_review_id": 2678155204,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1991317561/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-03-12T11:51:34Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1991317561",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1995848498"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1995848498"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Done.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-14T16:08:24Z",
            "diff_hunk": "@@ -101,11 +102,19 @@ struct tm *os_localtime_r(const time_t *restrict clock,\n   const char *tz = os_getenv(\"TZ\");\n   if (tz == NULL) {\n     tz = \"\";",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1995848498",
            "id": 1995848498,
            "in_reply_to_id": 1991243901,
            "line": 103,
            "node_id": "PRRC_kwDOAPphoM529jsy",
            "original_commit_id": "763cd72635c555665fbcb776027696bf3a1b95a9",
            "original_line": 103,
            "original_position": 11,
            "original_start_line": null,
            "path": "src/nvim/os/time.c",
            "position": 8,
            "pull_request_review_id": 2686044226,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1995848498/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-14T16:08:24Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1995848498",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1995849593"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1995849593"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Yes it will, see [PR II.](https://github.com/juditnovak/neovim/pull/1) :-) ",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-14T16:09:05Z",
            "diff_hunk": "@@ -70,16 +70,19 @@ char *get_mess_lang(void)\n }\n \n /// Get the language used for messages from the environment.\n+/// Result must be freed by the caller.\n ///\n /// This uses LC_MESSAGES when available, which it is for most systems we build for\n /// except for windows. Then fallback to get the value from the environment\n /// ourselves, and use LC_CTYPE as a last resort.\n static char *get_mess_env(void)",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1995849593",
            "id": 1995849593,
            "in_reply_to_id": 1991240389,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM529j95",
            "original_commit_id": "763cd72635c555665fbcb776027696bf3a1b95a9",
            "original_line": 78,
            "original_position": 9,
            "original_start_line": null,
            "path": "src/nvim/os/lang.c",
            "position": null,
            "pull_request_review_id": 2686046335,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1995849593/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-14T16:09:05Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1995849593",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1995850026"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1995850026"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Done in [PR II.](https://github.com/juditnovak/neovim/pull/1)",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-14T16:09:22Z",
            "diff_hunk": "@@ -1229,7 +1219,9 @@ bool os_shell_is_cmdexe(const char *sh)\n   }\n   if (striequal(sh, \"$COMSPEC\")) {\n     const char *comspec = os_getenv(\"COMSPEC\");\n-    return striequal(\"cmd.exe\", path_tail(comspec));\n+    bool retval = striequal(\"cmd.exe\", path_tail(comspec));\n+    xfree((char *)comspec);\n+    return retval;",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1995850026",
            "id": 1995850026,
            "in_reply_to_id": 1991237964,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM529kEq",
            "original_commit_id": "763cd72635c555665fbcb776027696bf3a1b95a9",
            "original_line": 1224,
            "original_position": 203,
            "original_start_line": 1221,
            "path": "src/nvim/os/env.c",
            "position": null,
            "pull_request_review_id": 2686047311,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1995850026/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-03-14T16:09:22Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1995850026",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1995850349"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1995850349"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Done.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-14T16:09:34Z",
            "diff_hunk": "@@ -932,12 +917,13 @@ char *vim_getenv(const char *name)\n   char *vim_path = NULL;\n   if (vimruntime\n       && *default_vimruntime_dir == NUL) {\n-    kos_env_path = os_getenv(\"VIM\");\n+    kos_env_path = os_getenv(\"VIM\");    // No xfree() needed for kos_env_path, as it must be NULL if we got here",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1995850349",
            "id": 1995850349,
            "in_reply_to_id": 1991236438,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM529kJt",
            "original_commit_id": "763cd72635c555665fbcb776027696bf3a1b95a9",
            "original_line": 920,
            "original_position": 156,
            "original_start_line": null,
            "path": "src/nvim/os/env.c",
            "position": null,
            "pull_request_review_id": 2686048213,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1995850349/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-14T16:09:34Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1995850349",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1995850613"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1995850613"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Done.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-14T16:09:43Z",
            "diff_hunk": "@@ -919,7 +904,7 @@ char *vim_getenv(const char *name)\n \n   const char *kos_env_path = os_getenv(name);\n   if (kos_env_path != NULL) {\n-    return xstrdup(kos_env_path);\n+    return (char *)kos_env_path;",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1995850613",
            "id": 1995850613,
            "in_reply_to_id": 1991234139,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM529kN1",
            "original_commit_id": "763cd72635c555665fbcb776027696bf3a1b95a9",
            "original_line": 907,
            "original_position": 147,
            "original_start_line": null,
            "path": "src/nvim/os/env.c",
            "position": null,
            "pull_request_review_id": 2686048607,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1995850613/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-14T16:09:43Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1995850613",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1995869143"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1995869143"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Technically you are right, `set_string_default()` could change accordingly. \r\n\r\nHowever, in case we do that, we run into the following conflict.\r\n\r\n1. In one of the `if` branche we apply `malloc()` for `kOptShell` defaults\r\n2. In the other `if` branch we use statically allocated memory\r\n\r\nThis becomes a problem when the `free_all_options() -> optval_free()` calls are issued at the end of execution. While 1) would require `xfree()`, 2) would be throwing an error if `xfree()` applied at this point...\r\n\r\nPlease let me know in case I'm overlooking something...",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-14T16:20:34Z",
            "diff_hunk": "@@ -196,6 +196,7 @@ static void set_init_default_shell(void)\n     } else {\n       set_string_default(kOptShell, (char *)shell, false);",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1995869143",
            "id": 1995869143,
            "in_reply_to_id": 1991231491,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM529ovX",
            "original_commit_id": "763cd72635c555665fbcb776027696bf3a1b95a9",
            "original_line": 197,
            "original_position": 2,
            "original_start_line": null,
            "path": "src/nvim/option.c",
            "position": null,
            "pull_request_review_id": 2686083826,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1995869143/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-14T17:00:55Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1995869143",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1995876024"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1995876024"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "I apologize, I'm confused about this one... :-(\r\n\r\nThe `memfree` is mostly there in case `s` was defined by the `setlocale()` call. In this case --if I understand correctly-- `xfree()` must not be applied. \r\n\r\nI'm sorry if I can't see something obvious here :-(",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-14T16:24:34Z",
            "diff_hunk": "@@ -2410,22 +2410,37 @@ char *enc_locale(void)\n {\n   int i;\n   char buf[50];\n+  bool memfree = false;\n \n   const char *s;",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1995876024",
            "id": 1995876024,
            "in_reply_to_id": 1991207128,
            "line": 2414,
            "node_id": "PRRC_kwDOAPphoM529qa4",
            "original_commit_id": "763cd72635c555665fbcb776027696bf3a1b95a9",
            "original_line": 2414,
            "original_position": 6,
            "original_start_line": null,
            "path": "src/nvim/mbyte.c",
            "position": 3,
            "pull_request_review_id": 2686096677,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1995876024/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-14T16:24:34Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1995876024",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1995940236"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1995940236"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Done.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-14T16:58:47Z",
            "diff_hunk": "@@ -120,12 +125,14 @@ char *server_address_new(const char *name)\n   static uint32_t count = 0;\n   char fmt[ADDRESS_MAX_SIZE];\n #ifdef MSWIN\n-  (void)get_appname(true);\n+  const char *appname = get_appname(true);    // Call to initialize NameBuf with appname\n+  xfree((char *)appname);",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1995940236",
            "id": 1995940236,
            "in_reply_to_id": 1989856185,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5296GM",
            "original_commit_id": "763cd72635c555665fbcb776027696bf3a1b95a9",
            "original_line": 129,
            "original_position": 43,
            "original_start_line": null,
            "path": "src/nvim/msgpack_rpc/server.c",
            "position": null,
            "pull_request_review_id": 2686209477,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1995940236/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-14T16:59:02Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1995940236",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1995941430"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1995941430"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Done.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-14T16:59:20Z",
            "diff_hunk": "@@ -161,11 +167,11 @@ char *stdpaths_get_xdg_var(const XDGVarType idx)\n \n #ifdef MSWIN\n   if (env_val == NULL && xdg_defaults_env_vars[idx] != NULL) {\n-    env_val = os_getenv(xdg_defaults_env_vars[idx]);\n+    env_val = os_getenv(xdg_defaults_env_vars[idx]);    // 'env_val' was NULL, no xfree() is needed",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1995941430",
            "id": 1995941430,
            "in_reply_to_id": 1991215214,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5296Y2",
            "original_commit_id": "763cd72635c555665fbcb776027696bf3a1b95a9",
            "original_line": 170,
            "original_position": 47,
            "original_start_line": null,
            "path": "src/nvim/os/stdpaths.c",
            "position": null,
            "pull_request_review_id": 2686211636,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1995941430/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-14T16:59:20Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1995941430",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1997808403"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1997808403"
                }
            },
            "author_association": "MEMBER",
            "body": "`tv_dict_add_allocated_str()`",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-17T01:12:55Z",
            "diff_hunk": "@@ -3939,9 +3939,8 @@ dict_T *create_environment(const dictitem_T *job_env, const bool clear_env, cons\n       size_t len = strlen(required_env_vars[i]);\n       dictitem_T *dv = tv_dict_find(env, required_env_vars[i], (ptrdiff_t)len);\n       if (!dv) {\n-        const char *env_var = os_getenv(required_env_vars[i]);\n-        if (env_var) {\n-          tv_dict_add_str(env, required_env_vars[i], len, env_var);\n+        if (os_env_exists(required_env_vars[i], true)) {\n+          tv_dict_add_str(env, required_env_vars[i], len, os_getenv(required_env_vars[i]));",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1997808403",
            "id": 1997808403,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM53FCMT",
            "original_commit_id": "66a3f382b6af879834e9f5d62503f47153b89ca2",
            "original_line": 3943,
            "original_position": 17,
            "original_start_line": null,
            "path": "src/nvim/eval/funcs.c",
            "position": null,
            "pull_request_review_id": 2688923630,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1997808403/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-17T01:12:56Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1997808403",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1998630804"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1998630804"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Fixed, thanks for noticing.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-17T12:31:15Z",
            "diff_hunk": "@@ -3939,9 +3939,8 @@ dict_T *create_environment(const dictitem_T *job_env, const bool clear_env, cons\n       size_t len = strlen(required_env_vars[i]);\n       dictitem_T *dv = tv_dict_find(env, required_env_vars[i], (ptrdiff_t)len);\n       if (!dv) {\n-        const char *env_var = os_getenv(required_env_vars[i]);\n-        if (env_var) {\n-          tv_dict_add_str(env, required_env_vars[i], len, env_var);\n+        if (os_env_exists(required_env_vars[i], true)) {\n+          tv_dict_add_str(env, required_env_vars[i], len, os_getenv(required_env_vars[i]));",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1998630804",
            "id": 1998630804,
            "in_reply_to_id": 1997808403,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM53IK-U",
            "original_commit_id": "66a3f382b6af879834e9f5d62503f47153b89ca2",
            "original_line": 3943,
            "original_position": 17,
            "original_start_line": null,
            "path": "src/nvim/eval/funcs.c",
            "position": null,
            "pull_request_review_id": 2690304633,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1998630804/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-17T12:31:15Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1998630804",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1998737073"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1998737073"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n/// Like getenv(), but returns a pointer to `NameBuff` instead of allocating.\r\n```",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-17T13:30:00Z",
            "diff_hunk": "@@ -96,32 +82,55 @@ const char *os_getenv(const char *name)\n     // except when it does not include the NUL-terminator.\n     e = xmemdupz(buf, size);\n   }\n-  pmap_put(cstr_t)(&envmap, xstrdup(name), e);\n end:\n   if (r != 0 && r != UV_ENOENT && r != UV_UNKNOWN) {\n     ELOG(\"uv_os_getenv(%s) failed: %d %s\", name, r, uv_err_name(r));\n   }\n   return e;\n }\n \n+/// Like getenv(), loading the result to `NameBuff`",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1998737073",
            "id": 1998737073,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM53Ik6x",
            "original_commit_id": "f4d74a5230db03e522321fa18ae5c4624fde63ca",
            "original_line": 92,
            "original_position": 43,
            "original_start_line": null,
            "path": "src/nvim/os/env.c",
            "position": null,
            "pull_request_review_id": 2690510332,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1998737073/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-17T13:30:01Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1998737073",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1998738764"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1998738764"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n      ELOG(\"uv_os_getenv(%s) failed: %d %s\", name, r, uv_err_name(r));\r\n```",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-17T13:30:52Z",
            "diff_hunk": "@@ -96,32 +82,55 @@ const char *os_getenv(const char *name)\n     // except when it does not include the NUL-terminator.\n     e = xmemdupz(buf, size);\n   }\n-  pmap_put(cstr_t)(&envmap, xstrdup(name), e);\n end:\n   if (r != 0 && r != UV_ENOENT && r != UV_UNKNOWN) {\n     ELOG(\"uv_os_getenv(%s) failed: %d %s\", name, r, uv_err_name(r));\n   }\n   return e;\n }\n \n+/// Like getenv(), loading the result to `NameBuff`\n+/// @see os_env_exists\n+char *os_getenv_noalloc(const char *name)\n+  FUNC_ATTR_NONNULL_ALL\n+{\n+  if (name[0] == NUL) {\n+    return NULL;\n+  }\n+\n+  size_t size = sizeof(NameBuff);\n+  int r = uv_os_getenv(name, NameBuff, &size);\n+  if (r != 0 || size == 0 || NameBuff[0] == NUL) {\n+    if (r != 0 && r != UV_ENOENT && r != UV_UNKNOWN) {\n+      ELOG(\"uv_os_getenv_noalloc(%s) failed: %d %s\", name, r, uv_err_name(r));",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1998738764",
            "id": 1998738764,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM53IlVM",
            "original_commit_id": "f4d74a5230db03e522321fa18ae5c4624fde63ca",
            "original_line": 105,
            "original_position": 56,
            "original_start_line": null,
            "path": "src/nvim/os/env.c",
            "position": null,
            "pull_request_review_id": 2690514028,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1998738764/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-17T13:30:52Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1998738764",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1998741453"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1998741453"
                }
            },
            "author_association": "MEMBER",
            "body": "`NameBuff[0] == NUL` seems suspicious, can that actually happen and is it actually a failure?",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-17T13:32:09Z",
            "diff_hunk": "@@ -96,32 +82,55 @@ const char *os_getenv(const char *name)\n     // except when it does not include the NUL-terminator.\n     e = xmemdupz(buf, size);\n   }\n-  pmap_put(cstr_t)(&envmap, xstrdup(name), e);\n end:\n   if (r != 0 && r != UV_ENOENT && r != UV_UNKNOWN) {\n     ELOG(\"uv_os_getenv(%s) failed: %d %s\", name, r, uv_err_name(r));\n   }\n   return e;\n }\n \n+/// Like getenv(), loading the result to `NameBuff`\n+/// @see os_env_exists\n+char *os_getenv_noalloc(const char *name)\n+  FUNC_ATTR_NONNULL_ALL\n+{\n+  if (name[0] == NUL) {\n+    return NULL;\n+  }\n+\n+  size_t size = sizeof(NameBuff);\n+  int r = uv_os_getenv(name, NameBuff, &size);\n+  if (r != 0 || size == 0 || NameBuff[0] == NUL) {",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1998741453",
            "id": 1998741453,
            "line": 114,
            "node_id": "PRRC_kwDOAPphoM53Il_N",
            "original_commit_id": "f4d74a5230db03e522321fa18ae5c4624fde63ca",
            "original_line": 114,
            "original_position": 54,
            "original_start_line": null,
            "path": "src/nvim/os/env.c",
            "position": 68,
            "pull_request_review_id": 2690520903,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1998741453/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-17T13:32:09Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1998741453",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1998744840"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1998744840"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n/// @param defined Return true if the env var is defined but empty.\r\n```",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-17T13:34:11Z",
            "diff_hunk": "@@ -96,32 +82,55 @@ const char *os_getenv(const char *name)\n     // except when it does not include the NUL-terminator.\n     e = xmemdupz(buf, size);\n   }\n-  pmap_put(cstr_t)(&envmap, xstrdup(name), e);\n end:\n   if (r != 0 && r != UV_ENOENT && r != UV_UNKNOWN) {\n     ELOG(\"uv_os_getenv(%s) failed: %d %s\", name, r, uv_err_name(r));\n   }\n   return e;\n }\n \n+/// Like getenv(), loading the result to `NameBuff`\n+/// @see os_env_exists\n+char *os_getenv_noalloc(const char *name)\n+  FUNC_ATTR_NONNULL_ALL\n+{\n+  if (name[0] == NUL) {\n+    return NULL;\n+  }\n+\n+  size_t size = sizeof(NameBuff);\n+  int r = uv_os_getenv(name, NameBuff, &size);\n+  if (r != 0 || size == 0 || NameBuff[0] == NUL) {\n+    if (r != 0 && r != UV_ENOENT && r != UV_UNKNOWN) {\n+      ELOG(\"uv_os_getenv_noalloc(%s) failed: %d %s\", name, r, uv_err_name(r));\n+    }\n+    return NULL;\n+  }\n+  return NameBuff;\n+}\n+\n /// Returns true if environment variable `name` is defined (even if empty).\n /// Returns false if not found (UV_ENOENT) or other failure.\n-bool os_env_exists(const char *name)\n+///\n+/// @param name the environment variable in question\n+/// @param defined whether the variable has a valid value, or may be empty",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1998744840",
            "id": 1998744840,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM53Im0I",
            "original_commit_id": "f4d74a5230db03e522321fa18ae5c4624fde63ca",
            "original_line": 116,
            "original_position": 68,
            "original_start_line": null,
            "path": "src/nvim/os/env.c",
            "position": null,
            "pull_request_review_id": 2690526942,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1998744840/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-17T13:34:11Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1998744840",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1998749363"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1998749363"
                }
            },
            "author_association": "MEMBER",
            "body": "seems like the retval of `os_getenv` should no longer be `const`. Because we don't have an envmap anymore?",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-17T13:36:36Z",
            "diff_hunk": "@@ -917,9 +926,9 @@ char *vim_getenv(const char *name)\n   }\n #endif\n \n-  const char *kos_env_path = os_getenv(name);\n+  char *kos_env_path = (char *)os_getenv(name);",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1998749363",
            "id": 1998749363,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM53In6z",
            "original_commit_id": "f4d74a5230db03e522321fa18ae5c4624fde63ca",
            "original_line": 929,
            "original_position": 206,
            "original_start_line": null,
            "path": "src/nvim/os/env.c",
            "position": null,
            "pull_request_review_id": 2690536030,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1998749363/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-17T13:36:36Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1998749363",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1998753892"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1998753892"
                }
            },
            "author_association": "MEMBER",
            "body": "remove",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-17T13:38:57Z",
            "diff_hunk": "@@ -98,14 +98,16 @@ struct tm *os_localtime_r(const time_t *restrict clock,\n   // Call tzset(3) to update the global timezone variables if it has.\n   // POSIX standard doesn't require localtime_r() implementations to do that\n   // as it does with localtime(), and we don't want to call tzset() every time.\n-  const char *tz = os_getenv(\"TZ\");\n-  if (tz == NULL) {\n+  const char *tz = os_getenv_noalloc(\"TZ\");\n+  if (!tz) {\n     tz = \"\";\n   }\n+\n   if (strncmp(tz_cache, tz, sizeof(tz_cache) - 1) != 0) {\n     tzset();\n     xstrlcpy(tz_cache, tz, sizeof(tz_cache));\n   }\n+",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1998753892",
            "id": 1998753892,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM53IpBk",
            "original_commit_id": "f4d74a5230db03e522321fa18ae5c4624fde63ca",
            "original_line": 110,
            "original_position": 15,
            "original_start_line": null,
            "path": "src/nvim/os/time.c",
            "position": null,
            "pull_request_review_id": 2690546045,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1998753892/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-17T13:38:58Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1998753892",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1998754013"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1998754013"
                }
            },
            "author_association": "MEMBER",
            "body": "remove",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-17T13:39:01Z",
            "diff_hunk": "@@ -98,14 +98,16 @@ struct tm *os_localtime_r(const time_t *restrict clock,\n   // Call tzset(3) to update the global timezone variables if it has.\n   // POSIX standard doesn't require localtime_r() implementations to do that\n   // as it does with localtime(), and we don't want to call tzset() every time.\n-  const char *tz = os_getenv(\"TZ\");\n-  if (tz == NULL) {\n+  const char *tz = os_getenv_noalloc(\"TZ\");\n+  if (!tz) {\n     tz = \"\";\n   }\n+",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1998754013",
            "id": 1998754013,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM53IpDd",
            "original_commit_id": "f4d74a5230db03e522321fa18ae5c4624fde63ca",
            "original_line": 105,
            "original_position": 10,
            "original_start_line": null,
            "path": "src/nvim/os/time.c",
            "position": null,
            "pull_request_review_id": 2690546236,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1998754013/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-17T13:39:01Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1998754013",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1998756191"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1998756191"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n  itp('os_env_exists(, true)', function()\r\n```",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-17T13:40:11Z",
            "diff_hunk": "@@ -34,17 +34,41 @@ describe('env.c', function()\n     end\n   end\n \n+  local function os_getenv_noalloc(name)\n+    local rval = cimp.os_getenv_noalloc(to_cstr(name))\n+    if rval ~= NULL then\n+      return ffi.string(rval)\n+    else\n+      return NULL\n+    end\n+  end\n+\n   itp('os_env_exists', function()\n-    eq(false, os_env_exists(''))\n-    eq(false, os_env_exists('      '))\n-    eq(false, os_env_exists('\\t'))\n-    eq(false, os_env_exists('\\n'))\n-    eq(false, os_env_exists('AaB <= very weird name...'))\n+    eq(false, os_env_exists('', false))\n+    eq(false, os_env_exists('      ', false))\n+    eq(false, os_env_exists('\\t', false))\n+    eq(false, os_env_exists('\\n', false))\n+    eq(false, os_env_exists('AaB <= very weird name...', false))\n \n     local varname = 'NVIM_UNIT_TEST_os_env_exists'\n-    eq(false, os_env_exists(varname))\n+    eq(false, os_env_exists(varname, false))\n     eq(OK, os_setenv(varname, 'foo bar baz ...', 1))\n-    eq(true, os_env_exists(varname))\n+    eq(true, os_env_exists(varname, false))\n+  end)\n+\n+  itp('os_env_defined', function()",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1998756191",
            "id": 1998756191,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM53Iplf",
            "original_commit_id": "f4d74a5230db03e522321fa18ae5c4624fde63ca",
            "original_line": 59,
            "original_position": 44,
            "original_start_line": null,
            "path": "test/unit/os/env_spec.lua",
            "position": null,
            "pull_request_review_id": 2690550122,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1998756191/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-17T13:40:11Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1998756191",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1998756645"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1998756645"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n  itp('os_env_exists(, false)', function()\r\n```",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-17T13:40:26Z",
            "diff_hunk": "@@ -34,17 +34,41 @@ describe('env.c', function()\n     end\n   end\n \n+  local function os_getenv_noalloc(name)\n+    local rval = cimp.os_getenv_noalloc(to_cstr(name))\n+    if rval ~= NULL then\n+      return ffi.string(rval)\n+    else\n+      return NULL\n+    end\n+  end\n+\n   itp('os_env_exists', function()",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1998756645",
            "id": 1998756645,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM53Ipsl",
            "original_commit_id": "f4d74a5230db03e522321fa18ae5c4624fde63ca",
            "original_line": 46,
            "original_position": 24,
            "original_start_line": null,
            "path": "test/unit/os/env_spec.lua",
            "position": null,
            "pull_request_review_id": 2690550920,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1998756645/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-17T13:40:27Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1998756645",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1998758325"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1998758325"
                }
            },
            "author_association": "MEMBER",
            "body": "I think this is for consistency with `os_getenv()`.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-17T13:41:25Z",
            "diff_hunk": "@@ -96,32 +82,55 @@ const char *os_getenv(const char *name)\n     // except when it does not include the NUL-terminator.\n     e = xmemdupz(buf, size);\n   }\n-  pmap_put(cstr_t)(&envmap, xstrdup(name), e);\n end:\n   if (r != 0 && r != UV_ENOENT && r != UV_UNKNOWN) {\n     ELOG(\"uv_os_getenv(%s) failed: %d %s\", name, r, uv_err_name(r));\n   }\n   return e;\n }\n \n+/// Like getenv(), loading the result to `NameBuff`\n+/// @see os_env_exists\n+char *os_getenv_noalloc(const char *name)\n+  FUNC_ATTR_NONNULL_ALL\n+{\n+  if (name[0] == NUL) {\n+    return NULL;\n+  }\n+\n+  size_t size = sizeof(NameBuff);\n+  int r = uv_os_getenv(name, NameBuff, &size);\n+  if (r != 0 || size == 0 || NameBuff[0] == NUL) {",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1998758325",
            "id": 1998758325,
            "in_reply_to_id": 1998741453,
            "line": 114,
            "node_id": "PRRC_kwDOAPphoM53IqG1",
            "original_commit_id": "f4d74a5230db03e522321fa18ae5c4624fde63ca",
            "original_line": 114,
            "original_position": 54,
            "original_start_line": null,
            "path": "src/nvim/os/env.c",
            "position": 68,
            "pull_request_review_id": 2690554013,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1998758325/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-17T13:41:25Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1998758325",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1998759094"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1998759094"
                }
            },
            "author_association": "MEMBER",
            "body": "`tv_dict_add_allocated_str` requires an alloc'd string",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-17T13:41:53Z",
            "diff_hunk": "@@ -3939,9 +3939,9 @@ dict_T *create_environment(const dictitem_T *job_env, const bool clear_env, cons\n       size_t len = strlen(required_env_vars[i]);\n       dictitem_T *dv = tv_dict_find(env, required_env_vars[i], (ptrdiff_t)len);\n       if (!dv) {\n-        const char *env_var = os_getenv(required_env_vars[i]);\n-        if (env_var) {\n-          tv_dict_add_str(env, required_env_vars[i], len, env_var);\n+        if (os_env_exists(required_env_vars[i], true)) {\n+          tv_dict_add_allocated_str(env, required_env_vars[i], len,\n+                                    os_getenv_noalloc(required_env_vars[i]));",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1998759094",
            "id": 1998759094,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM53IqS2",
            "original_commit_id": "f4d74a5230db03e522321fa18ae5c4624fde63ca",
            "original_line": 3944,
            "original_position": 18,
            "original_start_line": 3943,
            "path": "src/nvim/eval/funcs.c",
            "position": null,
            "pull_request_review_id": 2690555397,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1998759094/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-03-17T13:41:54Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1998759094",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r1998763400"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1998763400"
                }
            },
            "author_association": "MEMBER",
            "body": "I think that's `false`, not `true`.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-17T13:44:11Z",
            "diff_hunk": "@@ -96,32 +82,55 @@ const char *os_getenv(const char *name)\n     // except when it does not include the NUL-terminator.\n     e = xmemdupz(buf, size);\n   }\n-  pmap_put(cstr_t)(&envmap, xstrdup(name), e);\n end:\n   if (r != 0 && r != UV_ENOENT && r != UV_UNKNOWN) {\n     ELOG(\"uv_os_getenv(%s) failed: %d %s\", name, r, uv_err_name(r));\n   }\n   return e;\n }\n \n+/// Like getenv(), loading the result to `NameBuff`\n+/// @see os_env_exists\n+char *os_getenv_noalloc(const char *name)\n+  FUNC_ATTR_NONNULL_ALL\n+{\n+  if (name[0] == NUL) {\n+    return NULL;\n+  }\n+\n+  size_t size = sizeof(NameBuff);\n+  int r = uv_os_getenv(name, NameBuff, &size);\n+  if (r != 0 || size == 0 || NameBuff[0] == NUL) {\n+    if (r != 0 && r != UV_ENOENT && r != UV_UNKNOWN) {\n+      ELOG(\"uv_os_getenv_noalloc(%s) failed: %d %s\", name, r, uv_err_name(r));\n+    }\n+    return NULL;\n+  }\n+  return NameBuff;\n+}\n+\n /// Returns true if environment variable `name` is defined (even if empty).\n /// Returns false if not found (UV_ENOENT) or other failure.\n-bool os_env_exists(const char *name)\n+///\n+/// @param name the environment variable in question\n+/// @param defined whether the variable has a valid value, or may be empty",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r1998763400",
            "id": 1998763400,
            "in_reply_to_id": 1998744840,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM53IrWI",
            "original_commit_id": "f4d74a5230db03e522321fa18ae5c4624fde63ca",
            "original_line": 116,
            "original_position": 68,
            "original_start_line": null,
            "path": "src/nvim/os/env.c",
            "position": null,
            "pull_request_review_id": 2690563008,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1998763400/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-17T13:44:12Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1998763400",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2010985446"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2010985446"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Indeed, as @zeertzjq suggested. I found the same check in `os_getenv()` code following both `uv_os_getenv()` calls.\r\n",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-24T22:03:05Z",
            "diff_hunk": "@@ -96,32 +82,55 @@ const char *os_getenv(const char *name)\n     // except when it does not include the NUL-terminator.\n     e = xmemdupz(buf, size);\n   }\n-  pmap_put(cstr_t)(&envmap, xstrdup(name), e);\n end:\n   if (r != 0 && r != UV_ENOENT && r != UV_UNKNOWN) {\n     ELOG(\"uv_os_getenv(%s) failed: %d %s\", name, r, uv_err_name(r));\n   }\n   return e;\n }\n \n+/// Like getenv(), loading the result to `NameBuff`\n+/// @see os_env_exists\n+char *os_getenv_noalloc(const char *name)\n+  FUNC_ATTR_NONNULL_ALL\n+{\n+  if (name[0] == NUL) {\n+    return NULL;\n+  }\n+\n+  size_t size = sizeof(NameBuff);\n+  int r = uv_os_getenv(name, NameBuff, &size);\n+  if (r != 0 || size == 0 || NameBuff[0] == NUL) {",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2010985446",
            "id": 2010985446,
            "in_reply_to_id": 1998741453,
            "line": 114,
            "node_id": "PRRC_kwDOAPphoM533TPm",
            "original_commit_id": "f4d74a5230db03e522321fa18ae5c4624fde63ca",
            "original_line": 114,
            "original_position": 54,
            "original_start_line": null,
            "path": "src/nvim/os/env.c",
            "position": 68,
            "pull_request_review_id": 2711776978,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2010985446/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-24T22:03:05Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2010985446",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2010990404"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2010990404"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Indeed, @zeertzjq is right. \r\nI'm not sure what is the best terminology here, I'm open for suggestions.\r\n\r\nCurrently `os_env_exists(name, defined)` means:\r\n```\r\nReturn false if the env var exists but it's empty -- i.e. the variable's value is not defined.)\r\n       ^^^^^\r\n```\r\nMy terminology was:\r\n- `os_exists(defined=false)` - 'exists': the variable should exists at all ()\r\n- `os_exists(defined=true)` -  'defined': the variable should to have an actual value ()",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-24T22:08:32Z",
            "diff_hunk": "@@ -96,32 +82,55 @@ const char *os_getenv(const char *name)\n     // except when it does not include the NUL-terminator.\n     e = xmemdupz(buf, size);\n   }\n-  pmap_put(cstr_t)(&envmap, xstrdup(name), e);\n end:\n   if (r != 0 && r != UV_ENOENT && r != UV_UNKNOWN) {\n     ELOG(\"uv_os_getenv(%s) failed: %d %s\", name, r, uv_err_name(r));\n   }\n   return e;\n }\n \n+/// Like getenv(), loading the result to `NameBuff`\n+/// @see os_env_exists\n+char *os_getenv_noalloc(const char *name)\n+  FUNC_ATTR_NONNULL_ALL\n+{\n+  if (name[0] == NUL) {\n+    return NULL;\n+  }\n+\n+  size_t size = sizeof(NameBuff);\n+  int r = uv_os_getenv(name, NameBuff, &size);\n+  if (r != 0 || size == 0 || NameBuff[0] == NUL) {\n+    if (r != 0 && r != UV_ENOENT && r != UV_UNKNOWN) {\n+      ELOG(\"uv_os_getenv_noalloc(%s) failed: %d %s\", name, r, uv_err_name(r));\n+    }\n+    return NULL;\n+  }\n+  return NameBuff;\n+}\n+\n /// Returns true if environment variable `name` is defined (even if empty).\n /// Returns false if not found (UV_ENOENT) or other failure.\n-bool os_env_exists(const char *name)\n+///\n+/// @param name the environment variable in question\n+/// @param defined whether the variable has a valid value, or may be empty",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2010990404",
            "id": 2010990404,
            "in_reply_to_id": 1998744840,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM533UdE",
            "original_commit_id": "f4d74a5230db03e522321fa18ae5c4624fde63ca",
            "original_line": 116,
            "original_position": 68,
            "original_start_line": null,
            "path": "src/nvim/os/env.c",
            "position": null,
            "pull_request_review_id": 2711785725,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2010990404/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-24T22:08:32Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2010990404",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2010994919"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2010994919"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Fair point. I go ahead changing it to `char *` instead.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-24T22:13:30Z",
            "diff_hunk": "@@ -917,9 +926,9 @@ char *vim_getenv(const char *name)\n   }\n #endif\n \n-  const char *kos_env_path = os_getenv(name);\n+  char *kos_env_path = (char *)os_getenv(name);",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2010994919",
            "id": 2010994919,
            "in_reply_to_id": 1998749363,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM533Vjn",
            "original_commit_id": "f4d74a5230db03e522321fa18ae5c4624fde63ca",
            "original_line": 929,
            "original_position": 206,
            "original_start_line": null,
            "path": "src/nvim/os/env.c",
            "position": null,
            "pull_request_review_id": 2711792777,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2010994919/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-24T22:13:30Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2010994919",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2011084211"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2011084211"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Actually, according to [comment](https://github.com/neovim/neovim/pull/32683#discussion_r1998759094) below we shouldn't use that one.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-25T00:07:25Z",
            "diff_hunk": "@@ -3939,9 +3939,8 @@ dict_T *create_environment(const dictitem_T *job_env, const bool clear_env, cons\n       size_t len = strlen(required_env_vars[i]);\n       dictitem_T *dv = tv_dict_find(env, required_env_vars[i], (ptrdiff_t)len);\n       if (!dv) {\n-        const char *env_var = os_getenv(required_env_vars[i]);\n-        if (env_var) {\n-          tv_dict_add_str(env, required_env_vars[i], len, env_var);\n+        if (os_env_exists(required_env_vars[i], true)) {\n+          tv_dict_add_str(env, required_env_vars[i], len, os_getenv(required_env_vars[i]));",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2011084211",
            "id": 2011084211,
            "in_reply_to_id": 1997808403,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM533rWz",
            "original_commit_id": "66a3f382b6af879834e9f5d62503f47153b89ca2",
            "original_line": 3943,
            "original_position": 17,
            "original_start_line": null,
            "path": "src/nvim/eval/funcs.c",
            "position": null,
            "pull_request_review_id": 2711930801,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2011084211/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-25T00:07:40Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2011084211",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2011095819"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2011095819"
                }
            },
            "author_association": "MEMBER",
            "body": "No, you shouldn't use `allocated` and `noalloc` together.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-25T00:23:02Z",
            "diff_hunk": "@@ -3939,9 +3939,8 @@ dict_T *create_environment(const dictitem_T *job_env, const bool clear_env, cons\n       size_t len = strlen(required_env_vars[i]);\n       dictitem_T *dv = tv_dict_find(env, required_env_vars[i], (ptrdiff_t)len);\n       if (!dv) {\n-        const char *env_var = os_getenv(required_env_vars[i]);\n-        if (env_var) {\n-          tv_dict_add_str(env, required_env_vars[i], len, env_var);\n+        if (os_env_exists(required_env_vars[i], true)) {\n+          tv_dict_add_str(env, required_env_vars[i], len, os_getenv(required_env_vars[i]));",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2011095819",
            "id": 2011095819,
            "in_reply_to_id": 1997808403,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM533uML",
            "original_commit_id": "66a3f382b6af879834e9f5d62503f47153b89ca2",
            "original_line": 3943,
            "original_position": 17,
            "original_start_line": null,
            "path": "src/nvim/eval/funcs.c",
            "position": null,
            "pull_request_review_id": 2711953165,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2011095819/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-25T00:23:02Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2011095819",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2011096039"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2011096039"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n          tv_dict_add_allocated_str(env, required_env_vars[i], len,\r\n                                    os_getenv(required_env_vars[i]));\r\n```",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-25T00:23:27Z",
            "diff_hunk": "@@ -3939,9 +3939,9 @@ dict_T *create_environment(const dictitem_T *job_env, const bool clear_env, cons\n       size_t len = strlen(required_env_vars[i]);\n       dictitem_T *dv = tv_dict_find(env, required_env_vars[i], (ptrdiff_t)len);\n       if (!dv) {\n-        const char *env_var = os_getenv(required_env_vars[i]);\n-        if (env_var) {\n-          tv_dict_add_str(env, required_env_vars[i], len, env_var);\n+        if (os_env_exists(required_env_vars[i], true)) {\n+          tv_dict_add_allocated_str(env, required_env_vars[i], len,\n+                                    os_getenv_noalloc(required_env_vars[i]));",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2011096039",
            "id": 2011096039,
            "in_reply_to_id": 1998759094,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM533uPn",
            "original_commit_id": "f4d74a5230db03e522321fa18ae5c4624fde63ca",
            "original_line": 3944,
            "original_position": 18,
            "original_start_line": 3943,
            "path": "src/nvim/eval/funcs.c",
            "position": null,
            "pull_request_review_id": 2711953553,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2011096039/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-03-25T00:23:28Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2011096039",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2011105381"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2011105381"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Indeed your original suggestion was with `os_getenv()`. Sry, I got lost in the transition. Your suggestion was accurate at the time.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-25T00:36:50Z",
            "diff_hunk": "@@ -3939,9 +3939,8 @@ dict_T *create_environment(const dictitem_T *job_env, const bool clear_env, cons\n       size_t len = strlen(required_env_vars[i]);\n       dictitem_T *dv = tv_dict_find(env, required_env_vars[i], (ptrdiff_t)len);\n       if (!dv) {\n-        const char *env_var = os_getenv(required_env_vars[i]);\n-        if (env_var) {\n-          tv_dict_add_str(env, required_env_vars[i], len, env_var);\n+        if (os_env_exists(required_env_vars[i], true)) {\n+          tv_dict_add_str(env, required_env_vars[i], len, os_getenv(required_env_vars[i]));",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2011105381",
            "id": 2011105381,
            "in_reply_to_id": 1997808403,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM533whl",
            "original_commit_id": "66a3f382b6af879834e9f5d62503f47153b89ca2",
            "original_line": 3943,
            "original_position": 17,
            "original_start_line": null,
            "path": "src/nvim/eval/funcs.c",
            "position": null,
            "pull_request_review_id": 2711971762,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2011105381/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-25T00:36:50Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2011105381",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2011117623"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2011117623"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Done",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-25T00:55:10Z",
            "diff_hunk": "@@ -34,17 +34,41 @@ describe('env.c', function()\n     end\n   end\n \n+  local function os_getenv_noalloc(name)\n+    local rval = cimp.os_getenv_noalloc(to_cstr(name))\n+    if rval ~= NULL then\n+      return ffi.string(rval)\n+    else\n+      return NULL\n+    end\n+  end\n+\n   itp('os_env_exists', function()\n-    eq(false, os_env_exists(''))\n-    eq(false, os_env_exists('      '))\n-    eq(false, os_env_exists('\\t'))\n-    eq(false, os_env_exists('\\n'))\n-    eq(false, os_env_exists('AaB <= very weird name...'))\n+    eq(false, os_env_exists('', false))\n+    eq(false, os_env_exists('      ', false))\n+    eq(false, os_env_exists('\\t', false))\n+    eq(false, os_env_exists('\\n', false))\n+    eq(false, os_env_exists('AaB <= very weird name...', false))\n \n     local varname = 'NVIM_UNIT_TEST_os_env_exists'\n-    eq(false, os_env_exists(varname))\n+    eq(false, os_env_exists(varname, false))\n     eq(OK, os_setenv(varname, 'foo bar baz ...', 1))\n-    eq(true, os_env_exists(varname))\n+    eq(true, os_env_exists(varname, false))\n+  end)\n+\n+  itp('os_env_defined', function()",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2011117623",
            "id": 2011117623,
            "in_reply_to_id": 1998756191,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM533zg3",
            "original_commit_id": "f4d74a5230db03e522321fa18ae5c4624fde63ca",
            "original_line": 59,
            "original_position": 44,
            "original_start_line": null,
            "path": "test/unit/os/env_spec.lua",
            "position": null,
            "pull_request_review_id": 2711994512,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2011117623/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-25T00:55:10Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2011117623",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2011117713"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2011117713"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Done",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-25T00:55:17Z",
            "diff_hunk": "@@ -98,14 +98,16 @@ struct tm *os_localtime_r(const time_t *restrict clock,\n   // Call tzset(3) to update the global timezone variables if it has.\n   // POSIX standard doesn't require localtime_r() implementations to do that\n   // as it does with localtime(), and we don't want to call tzset() every time.\n-  const char *tz = os_getenv(\"TZ\");\n-  if (tz == NULL) {\n+  const char *tz = os_getenv_noalloc(\"TZ\");\n+  if (!tz) {\n     tz = \"\";\n   }\n+",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2011117713",
            "id": 2011117713,
            "in_reply_to_id": 1998754013,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM533ziR",
            "original_commit_id": "f4d74a5230db03e522321fa18ae5c4624fde63ca",
            "original_line": 105,
            "original_position": 10,
            "original_start_line": null,
            "path": "src/nvim/os/time.c",
            "position": null,
            "pull_request_review_id": 2711994618,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2011117713/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-25T00:55:17Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2011117713",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2011117889"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2011117889"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Done",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-25T00:55:34Z",
            "diff_hunk": "@@ -98,14 +98,16 @@ struct tm *os_localtime_r(const time_t *restrict clock,\n   // Call tzset(3) to update the global timezone variables if it has.\n   // POSIX standard doesn't require localtime_r() implementations to do that\n   // as it does with localtime(), and we don't want to call tzset() every time.\n-  const char *tz = os_getenv(\"TZ\");\n-  if (tz == NULL) {\n+  const char *tz = os_getenv_noalloc(\"TZ\");\n+  if (!tz) {\n     tz = \"\";\n   }\n+\n   if (strncmp(tz_cache, tz, sizeof(tz_cache) - 1) != 0) {\n     tzset();\n     xstrlcpy(tz_cache, tz, sizeof(tz_cache));\n   }\n+",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2011117889",
            "id": 2011117889,
            "in_reply_to_id": 1998753892,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM533zlB",
            "original_commit_id": "f4d74a5230db03e522321fa18ae5c4624fde63ca",
            "original_line": 110,
            "original_position": 15,
            "original_start_line": null,
            "path": "src/nvim/os/time.c",
            "position": null,
            "pull_request_review_id": 2711994899,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2011117889/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-25T00:55:34Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2011117889",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2011118085"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2011118085"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Done",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-25T00:55:48Z",
            "diff_hunk": "@@ -917,9 +926,9 @@ char *vim_getenv(const char *name)\n   }\n #endif\n \n-  const char *kos_env_path = os_getenv(name);\n+  char *kos_env_path = (char *)os_getenv(name);",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2011118085",
            "id": 2011118085,
            "in_reply_to_id": 1998749363,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM533zoF",
            "original_commit_id": "f4d74a5230db03e522321fa18ae5c4624fde63ca",
            "original_line": 929,
            "original_position": 206,
            "original_start_line": null,
            "path": "src/nvim/os/env.c",
            "position": null,
            "pull_request_review_id": 2711995167,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2011118085/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-25T00:55:48Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2011118085",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2011118435"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2011118435"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Done.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-25T00:56:14Z",
            "diff_hunk": "@@ -96,32 +82,55 @@ const char *os_getenv(const char *name)\n     // except when it does not include the NUL-terminator.\n     e = xmemdupz(buf, size);\n   }\n-  pmap_put(cstr_t)(&envmap, xstrdup(name), e);\n end:\n   if (r != 0 && r != UV_ENOENT && r != UV_UNKNOWN) {\n     ELOG(\"uv_os_getenv(%s) failed: %d %s\", name, r, uv_err_name(r));\n   }\n   return e;\n }\n \n+/// Like getenv(), loading the result to `NameBuff`\n+/// @see os_env_exists\n+char *os_getenv_noalloc(const char *name)\n+  FUNC_ATTR_NONNULL_ALL\n+{\n+  if (name[0] == NUL) {\n+    return NULL;\n+  }\n+\n+  size_t size = sizeof(NameBuff);\n+  int r = uv_os_getenv(name, NameBuff, &size);\n+  if (r != 0 || size == 0 || NameBuff[0] == NUL) {\n+    if (r != 0 && r != UV_ENOENT && r != UV_UNKNOWN) {\n+      ELOG(\"uv_os_getenv_noalloc(%s) failed: %d %s\", name, r, uv_err_name(r));",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2011118435",
            "id": 2011118435,
            "in_reply_to_id": 1998738764,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM533ztj",
            "original_commit_id": "f4d74a5230db03e522321fa18ae5c4624fde63ca",
            "original_line": 105,
            "original_position": 56,
            "original_start_line": null,
            "path": "src/nvim/os/env.c",
            "position": null,
            "pull_request_review_id": 2711995975,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2011118435/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-25T00:56:14Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2011118435",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2011118513"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2011118513"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Done.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-25T00:56:20Z",
            "diff_hunk": "@@ -96,32 +82,55 @@ const char *os_getenv(const char *name)\n     // except when it does not include the NUL-terminator.\n     e = xmemdupz(buf, size);\n   }\n-  pmap_put(cstr_t)(&envmap, xstrdup(name), e);\n end:\n   if (r != 0 && r != UV_ENOENT && r != UV_UNKNOWN) {\n     ELOG(\"uv_os_getenv(%s) failed: %d %s\", name, r, uv_err_name(r));\n   }\n   return e;\n }\n \n+/// Like getenv(), loading the result to `NameBuff`",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2011118513",
            "id": 2011118513,
            "in_reply_to_id": 1998737073,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM533zux",
            "original_commit_id": "f4d74a5230db03e522321fa18ae5c4624fde63ca",
            "original_line": 92,
            "original_position": 43,
            "original_start_line": null,
            "path": "src/nvim/os/env.c",
            "position": null,
            "pull_request_review_id": 2711996073,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2011118513/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-25T00:56:20Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2011118513",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2011119052"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2011119052"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Closing as it's moved to the [conversation below](https://github.com/neovim/neovim/pull/32683#discussion_r1998759094)",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-25T00:57:10Z",
            "diff_hunk": "@@ -3939,9 +3939,8 @@ dict_T *create_environment(const dictitem_T *job_env, const bool clear_env, cons\n       size_t len = strlen(required_env_vars[i]);\n       dictitem_T *dv = tv_dict_find(env, required_env_vars[i], (ptrdiff_t)len);\n       if (!dv) {\n-        const char *env_var = os_getenv(required_env_vars[i]);\n-        if (env_var) {\n-          tv_dict_add_str(env, required_env_vars[i], len, env_var);\n+        if (os_env_exists(required_env_vars[i], true)) {\n+          tv_dict_add_str(env, required_env_vars[i], len, os_getenv(required_env_vars[i]));",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2011119052",
            "id": 2011119052,
            "in_reply_to_id": 1997808403,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM533z3M",
            "original_commit_id": "66a3f382b6af879834e9f5d62503f47153b89ca2",
            "original_line": 3943,
            "original_position": 17,
            "original_start_line": null,
            "path": "src/nvim/eval/funcs.c",
            "position": null,
            "pull_request_review_id": 2711996906,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2011119052/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-25T00:57:10Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2011119052",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2011122510"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2011122510"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "So.... Which of the two? :-)  If I'm following right, there are two correct solutions. \r\n(The current code has `tv_dict_add_str()` - `os_getenv_noalloc()`)",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-25T01:01:57Z",
            "diff_hunk": "@@ -3939,9 +3939,9 @@ dict_T *create_environment(const dictitem_T *job_env, const bool clear_env, cons\n       size_t len = strlen(required_env_vars[i]);\n       dictitem_T *dv = tv_dict_find(env, required_env_vars[i], (ptrdiff_t)len);\n       if (!dv) {\n-        const char *env_var = os_getenv(required_env_vars[i]);\n-        if (env_var) {\n-          tv_dict_add_str(env, required_env_vars[i], len, env_var);\n+        if (os_env_exists(required_env_vars[i], true)) {\n+          tv_dict_add_allocated_str(env, required_env_vars[i], len,\n+                                    os_getenv_noalloc(required_env_vars[i]));",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2011122510",
            "id": 2011122510,
            "in_reply_to_id": 1998759094,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5330tO",
            "original_commit_id": "f4d74a5230db03e522321fa18ae5c4624fde63ca",
            "original_line": 3944,
            "original_position": 18,
            "original_start_line": 3943,
            "path": "src/nvim/eval/funcs.c",
            "position": null,
            "pull_request_review_id": 2712003405,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2011122510/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-03-25T01:01:57Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2011122510",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2011125514"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2011125514"
                }
            },
            "author_association": "MEMBER",
            "body": "`os_getenv()` is more accurate as it's not limited by the size of `NameBuff`",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-25T01:05:18Z",
            "diff_hunk": "@@ -3939,9 +3939,9 @@ dict_T *create_environment(const dictitem_T *job_env, const bool clear_env, cons\n       size_t len = strlen(required_env_vars[i]);\n       dictitem_T *dv = tv_dict_find(env, required_env_vars[i], (ptrdiff_t)len);\n       if (!dv) {\n-        const char *env_var = os_getenv(required_env_vars[i]);\n-        if (env_var) {\n-          tv_dict_add_str(env, required_env_vars[i], len, env_var);\n+        if (os_env_exists(required_env_vars[i], true)) {\n+          tv_dict_add_allocated_str(env, required_env_vars[i], len,\n+                                    os_getenv_noalloc(required_env_vars[i]));",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2011125514",
            "id": 2011125514,
            "in_reply_to_id": 1998759094,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5331cK",
            "original_commit_id": "f4d74a5230db03e522321fa18ae5c4624fde63ca",
            "original_line": 3944,
            "original_position": 18,
            "original_start_line": 3943,
            "path": "src/nvim/eval/funcs.c",
            "position": null,
            "pull_request_review_id": 2712008094,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2011125514/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-03-25T01:05:19Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2011125514",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2012986657"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2012986657"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Done.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-25T21:48:02Z",
            "diff_hunk": "@@ -3939,9 +3939,9 @@ dict_T *create_environment(const dictitem_T *job_env, const bool clear_env, cons\n       size_t len = strlen(required_env_vars[i]);\n       dictitem_T *dv = tv_dict_find(env, required_env_vars[i], (ptrdiff_t)len);\n       if (!dv) {\n-        const char *env_var = os_getenv(required_env_vars[i]);\n-        if (env_var) {\n-          tv_dict_add_str(env, required_env_vars[i], len, env_var);\n+        if (os_env_exists(required_env_vars[i], true)) {\n+          tv_dict_add_allocated_str(env, required_env_vars[i], len,\n+                                    os_getenv_noalloc(required_env_vars[i]));",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2012986657",
            "id": 2012986657,
            "in_reply_to_id": 1998759094,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM53-70h",
            "original_commit_id": "f4d74a5230db03e522321fa18ae5c4624fde63ca",
            "original_line": 3944,
            "original_position": 18,
            "original_start_line": 3943,
            "path": "src/nvim/eval/funcs.c",
            "position": null,
            "pull_request_review_id": 2715289129,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2012986657/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-03-25T21:48:02Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2012986657",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2013926697"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2013926697"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n  if (!overwrite && os_env_exists(name, true)) {\r\n    return 0;\r\n  }\r\n```",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-26T11:20:16Z",
            "diff_hunk": "@@ -137,15 +146,22 @@ int os_setenv(const char *name, const char *value, int overwrite)\n     return -1;\n   }\n #ifdef MSWIN\n-  if (!overwrite && os_getenv(name) != NULL) {\n+  bool return_donothing = false;\n+  char *env = os_getenv(name);\n+  if (!overwrite && env != NULL) {\n+    return_donothing = true;\n+  }\n+  xfree(env);\n+  if (return_donothing) {\n     return 0;\n   }\n+",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2013926697",
            "id": 2013926697,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM54ChUp",
            "original_commit_id": "3cd512c56efd759d02f7ec0ecc11e78ea8677fa2",
            "original_line": 158,
            "original_position": 108,
            "original_start_line": 149,
            "path": "src/nvim/os/env.c",
            "position": null,
            "pull_request_review_id": 2716786299,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2013926697/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-03-26T11:20:16Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2013926697",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2013932166"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2013932166"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n        vim_path = kos_env_path;\r\n      } else {\r\n        xfree(kos_env_path);\r\n      }\r\n```",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-26T11:23:51Z",
            "diff_hunk": "@@ -932,12 +941,13 @@ char *vim_getenv(const char *name)\n   char *vim_path = NULL;\n   if (vimruntime\n       && *default_vimruntime_dir == NUL) {\n-    kos_env_path = os_getenv(\"VIM\");\n+    kos_env_path = os_getenv(\"VIM\");    // kos_env_path was NULL.\n     if (kos_env_path != NULL) {\n       vim_path = vim_version_dir(kos_env_path);\n       if (vim_path == NULL) {\n         vim_path = xstrdup(kos_env_path);\n       }\n+      xfree(kos_env_path);",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2013932166",
            "id": 2013932166,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM54CiqG",
            "original_commit_id": "3cd512c56efd759d02f7ec0ecc11e78ea8677fa2",
            "original_line": 950,
            "original_position": 236,
            "original_start_line": 948,
            "path": "src/nvim/os/env.c",
            "position": null,
            "pull_request_review_id": 2716795904,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2013932166/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-03-26T11:23:52Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2013932166",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2013976730"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2013976730"
                }
            },
            "author_association": "MEMBER",
            "body": "Wait, it seems that you can just use the original code and change `tv_dict_add_str` to `tv_dict_add_allocated_str` (and remove the `const`).\r\n```suggestion\r\n        char *env_var = os_getenv(required_env_vars[i]);\r\n        if (env_var) {\r\n          tv_dict_add_allocated_str(env, required_env_vars[i], len, env);\r\n```",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-26T11:54:21Z",
            "diff_hunk": "@@ -3939,9 +3939,9 @@ dict_T *create_environment(const dictitem_T *job_env, const bool clear_env, cons\n       size_t len = strlen(required_env_vars[i]);\n       dictitem_T *dv = tv_dict_find(env, required_env_vars[i], (ptrdiff_t)len);\n       if (!dv) {\n-        const char *env_var = os_getenv(required_env_vars[i]);\n-        if (env_var) {\n-          tv_dict_add_str(env, required_env_vars[i], len, env_var);\n+        if (os_env_exists(required_env_vars[i], true)) {\n+          tv_dict_add_allocated_str(env, required_env_vars[i], len,\n+                                    os_getenv(required_env_vars[i]));",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2013976730",
            "id": 2013976730,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM54Ctia",
            "original_commit_id": "3cd512c56efd759d02f7ec0ecc11e78ea8677fa2",
            "original_line": 3944,
            "original_position": 18,
            "original_start_line": 3942,
            "path": "src/nvim/eval/funcs.c",
            "position": null,
            "pull_request_review_id": 2716870743,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2013976730/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-03-26T11:55:33Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2013976730",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2014003152"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2014003152"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n  (void)get_appname(true);    // Call to initialize NameBuf with appname\r\n```",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-26T12:06:13Z",
            "diff_hunk": "@@ -120,12 +120,12 @@ char *server_address_new(const char *name)\n   static uint32_t count = 0;\n   char fmt[ADDRESS_MAX_SIZE];\n #ifdef MSWIN\n-  (void)get_appname(true);\n+  const char *appname = get_appname(true);    // Call to initialize NameBuf with appname",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2014003152",
            "id": 2014003152,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM54Cz_Q",
            "original_commit_id": "3cd512c56efd759d02f7ec0ecc11e78ea8677fa2",
            "original_line": 123,
            "original_position": 60,
            "original_start_line": null,
            "path": "src/nvim/msgpack_rpc/server.c",
            "position": null,
            "pull_request_review_id": 2716911742,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2014003152/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-26T12:06:14Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2014003152",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2014004618"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2014004618"
                }
            },
            "author_association": "MEMBER",
            "body": "This comment seems outdated.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-26T12:07:15Z",
            "diff_hunk": "@@ -64,31 +64,33 @@ static const char *const xdg_defaults[] = {\n };\n \n /// Gets the value of $NVIM_APPNAME, or \"nvim\" if not set.\n+/// Result must be freed by the caller, if called with 'retval_needed == true'.",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2014004618",
            "id": 2014004618,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM54C0WK",
            "original_commit_id": "3cd512c56efd759d02f7ec0ecc11e78ea8677fa2",
            "original_line": 67,
            "original_position": 4,
            "original_start_line": null,
            "path": "src/nvim/os/stdpaths.c",
            "position": null,
            "pull_request_review_id": 2716914449,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2014004618/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-26T12:19:33Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2014004618",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2014012432"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2014012432"
                }
            },
            "author_association": "MEMBER",
            "body": "Moving the definition of `char *p` back to the `#else` branch (i.e. only having a `return get_locale_val(LC_MESSAGES)` in the `#ifdef` branch) seems easier to understand.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-26T12:10:54Z",
            "diff_hunk": "@@ -70,34 +70,37 @@ char *get_mess_lang(void)\n }\n \n /// Get the language used for messages from the environment.\n+/// The function may be using NameBuff.\n ///\n /// This uses LC_MESSAGES when available, which it is for most systems we build for\n /// except for windows. Then fallback to get the value from the environment\n /// ourselves, and use LC_CTYPE as a last resort.\n static char *get_mess_env(void)\n {\n+  char *p;\n+",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2014012432",
            "id": 2014012432,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM54C2QQ",
            "original_commit_id": "3cd512c56efd759d02f7ec0ecc11e78ea8677fa2",
            "original_line": 81,
            "original_position": 12,
            "original_start_line": 80,
            "path": "src/nvim/os/lang.c",
            "position": null,
            "pull_request_review_id": 2716927998,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2014012432/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-03-26T12:11:56Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2014012432",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2014013996"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2014013996"
                }
            },
            "author_association": "MEMBER",
            "body": "This comment seems outdated.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-26T12:11:53Z",
            "diff_hunk": "@@ -70,34 +70,37 @@ char *get_mess_lang(void)\n }\n \n /// Get the language used for messages from the environment.\n+/// The function may be using NameBuff.\n ///\n /// This uses LC_MESSAGES when available, which it is for most systems we build for\n /// except for windows. Then fallback to get the value from the environment\n /// ourselves, and use LC_CTYPE as a last resort.\n static char *get_mess_env(void)\n {\n+  char *p;\n+\n #ifdef LC_MESSAGES\n-  return get_locale_val(LC_MESSAGES);\n+  p = get_locale_val(LC_MESSAGES);   // Making sure that we can free() the return value",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2014013996",
            "id": 2014013996,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM54C2os",
            "original_commit_id": "3cd512c56efd759d02f7ec0ecc11e78ea8677fa2",
            "original_line": 83,
            "original_position": 15,
            "original_start_line": null,
            "path": "src/nvim/os/lang.c",
            "position": null,
            "pull_request_review_id": 2716931552,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2014013996/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-26T12:11:54Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2014013996",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2014015006"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2014015006"
                }
            },
            "author_association": "MEMBER",
            "body": "This change seems inconsistent with the other assignments to `loc`.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-26T12:12:33Z",
            "diff_hunk": "@@ -107,8 +110,7 @@ void set_lang_var(void)\n   const char *loc = get_locale_val(LC_CTYPE);\n   set_vim_var_string(VV_CTYPE, loc, -1);\n \n-  loc = get_mess_env();\n-  set_vim_var_string(VV_LANG, loc, -1);\n+  set_vim_var_string(VV_LANG, get_mess_env(), -1);",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2014015006",
            "id": 2014015006,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM54C24e",
            "original_commit_id": "3cd512c56efd759d02f7ec0ecc11e78ea8677fa2",
            "original_line": 113,
            "original_position": 49,
            "original_start_line": 110,
            "path": "src/nvim/os/lang.c",
            "position": null,
            "pull_request_review_id": 2716933384,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2014015006/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "LEFT",
            "subject_type": "line",
            "updated_at": "2025-03-26T12:12:34Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2014015006",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2014016562"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2014016562"
                }
            },
            "author_association": "MEMBER",
            "body": "The changes to this function seem no longer necessary.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-26T12:13:34Z",
            "diff_hunk": "@@ -64,31 +64,33 @@ static const char *const xdg_defaults[] = {\n };\n \n /// Gets the value of $NVIM_APPNAME, or \"nvim\" if not set.\n+/// Result must be freed by the caller, if called with 'retval_needed == true'.\n ///\n /// @param namelike Write \"name-like\" value (no path separators) in `NameBuff`.\n ///\n /// @return $NVIM_APPNAME value\n const char *get_appname(bool namelike)\n {\n-  const char *env_val = os_getenv(\"NVIM_APPNAME\");\n-  if (env_val == NULL || *env_val == NUL) {\n-    env_val = \"nvim\";\n+  const char *env_val = os_getenv_noalloc(\"NVIM_APPNAME\");\n+\n+  if (!env_val) {\n+    xstrlcpy(NameBuff, \"nvim\", sizeof(NameBuff));\n   }\n \n   if (namelike) {\n     // Appname may be a relative path, replace slashes to make it name-like.\n-    xstrlcpy(NameBuff, env_val, sizeof(NameBuff));\n     memchrsub(NameBuff, '/', '-', sizeof(NameBuff));\n     memchrsub(NameBuff, '\\\\', '-', sizeof(NameBuff));\n   }\n \n-  return env_val;\n+  return NameBuff;\n }\n \n /// Ensure that APPNAME is valid. Must be a name or relative path.\n bool appname_is_valid(void)\n {\n   const char *appname = get_appname(false);\n+  bool valid = true;\n   if (path_is_absolute(appname)\n       // TODO(justinmk): on Windows, path_is_absolute says \"/\" is NOT absolute. Should it?\n       || strequal(appname, \"/\")",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2014016562",
            "id": 2014016562,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM54C3Qy",
            "original_commit_id": "3cd512c56efd759d02f7ec0ecc11e78ea8677fa2",
            "original_line": 94,
            "original_position": 38,
            "original_start_line": 89,
            "path": "src/nvim/os/stdpaths.c",
            "position": null,
            "pull_request_review_id": 2716935920,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2014016562/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-03-26T12:13:34Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2014016562",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2014018289"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2014018289"
                }
            },
            "author_association": "MEMBER",
            "body": "You can remove the `xstrdup()` in the `if (env_val != NULL)` branch above, so that this `xfree()` is not needed.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-26T12:14:42Z",
            "diff_hunk": "@@ -188,6 +191,7 @@ char *stdpaths_get_xdg_var(const XDGVarType idx)\n     ret = xdg_remove_duplicate(ret, ENV_SEPSTR);\n   }\n \n+  xfree(env_val);",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2014018289",
            "id": 2014018289,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM54C3rx",
            "original_commit_id": "3cd512c56efd759d02f7ec0ecc11e78ea8677fa2",
            "original_line": 194,
            "original_position": 75,
            "original_start_line": null,
            "path": "src/nvim/os/stdpaths.c",
            "position": null,
            "pull_request_review_id": 2716938968,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2014018289/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-26T12:14:42Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2014018289",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2014023379"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2014023379"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n  return strequal(term, \"xterm\") && os_env_exists(\"XTERM_VERSION\", true);\r\n```",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-26T12:17:53Z",
            "diff_hunk": "@@ -49,7 +49,7 @@ bool terminfo_is_bsd_console(const char *term)\n # if defined(__FreeBSD__)\n   // FreeBSD console sets TERM=xterm, but it does not support xterm features\n   // like cursor-shaping. Assume that TERM=xterm is degraded. #8644\n-  return strequal(term, \"xterm\") && !!os_getenv(\"XTERM_VERSION\");\n+  return strequal(term, \"xterm\") && !!os_getenv_noalloc(\"XTERM_VERSION\");",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2014023379",
            "id": 2014023379,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM54C47T",
            "original_commit_id": "3cd512c56efd759d02f7ec0ecc11e78ea8677fa2",
            "original_line": 52,
            "original_position": 5,
            "original_start_line": null,
            "path": "src/nvim/tui/terminfo.c",
            "position": null,
            "pull_request_review_id": 2716949645,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2014023379/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-26T12:17:54Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2014023379",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2015087473"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2015087473"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "`env_var` at the end, but yes :-) ",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-26T22:39:43Z",
            "diff_hunk": "@@ -3939,9 +3939,9 @@ dict_T *create_environment(const dictitem_T *job_env, const bool clear_env, cons\n       size_t len = strlen(required_env_vars[i]);\n       dictitem_T *dv = tv_dict_find(env, required_env_vars[i], (ptrdiff_t)len);\n       if (!dv) {\n-        const char *env_var = os_getenv(required_env_vars[i]);\n-        if (env_var) {\n-          tv_dict_add_str(env, required_env_vars[i], len, env_var);\n+        if (os_env_exists(required_env_vars[i], true)) {\n+          tv_dict_add_allocated_str(env, required_env_vars[i], len,\n+                                    os_getenv(required_env_vars[i]));",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2015087473",
            "id": 2015087473,
            "in_reply_to_id": 2013976730,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM54G8tx",
            "original_commit_id": "3cd512c56efd759d02f7ec0ecc11e78ea8677fa2",
            "original_line": 3944,
            "original_position": 18,
            "original_start_line": 3942,
            "path": "src/nvim/eval/funcs.c",
            "position": null,
            "pull_request_review_id": 2718758168,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2015087473/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-03-26T22:39:43Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2015087473",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2015170419"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2015170419"
                }
            },
            "author_association": "MEMBER",
            "body": "https://docs.libuv.org/en/v1.x/misc.html#c.uv_os_getenv\r\n\r\n> If the environment variable exceeds the storage available in buffer, UV_ENOBUFS is returned\r\n\r\nLooks like we will return NULL for `UV_ENOBUFS`. But perhaps we should instead return `NameBuff`, and update the docstring to say `Value is truncated if it exceeds sizeof(NameBuff).`",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-27T00:27:59Z",
            "diff_hunk": "@@ -96,32 +82,55 @@ const char *os_getenv(const char *name)\n     // except when it does not include the NUL-terminator.\n     e = xmemdupz(buf, size);\n   }\n-  pmap_put(cstr_t)(&envmap, xstrdup(name), e);\n end:\n   if (r != 0 && r != UV_ENOENT && r != UV_UNKNOWN) {\n     ELOG(\"uv_os_getenv(%s) failed: %d %s\", name, r, uv_err_name(r));\n   }\n   return e;\n }\n \n+/// Like getenv(), but returns a pointer to `NameBuff` instead of allocating.\n+/// @see os_env_exists\n+char *os_getenv_noalloc(const char *name)\n+  FUNC_ATTR_NONNULL_ALL\n+{\n+  if (name[0] == NUL) {\n+    return NULL;\n+  }\n+\n+  size_t size = sizeof(NameBuff);\n+  int r = uv_os_getenv(name, NameBuff, &size);\n+  if (r != 0 || size == 0 || NameBuff[0] == NUL) {\n+    if (r != 0 && r != UV_ENOENT && r != UV_UNKNOWN) {\n+      ELOG(\"uv_os_getenv(%s) failed: %d %s\", name, r, uv_err_name(r));\n+    }\n+    return NULL;",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2015170419",
            "id": 2015170419,
            "line": 118,
            "node_id": "PRRC_kwDOAPphoM54HQ9z",
            "original_commit_id": "3cd512c56efd759d02f7ec0ecc11e78ea8677fa2",
            "original_line": 118,
            "original_position": 61,
            "original_start_line": 104,
            "path": "src/nvim/os/env.c",
            "position": 72,
            "pull_request_review_id": 2718900492,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2015170419/reactions"
            },
            "side": "RIGHT",
            "start_line": 115,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-03-27T00:28:41Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2015170419",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2015172676"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2015172676"
                }
            },
            "author_association": "MEMBER",
            "body": "I don't think that's how \"defined\" is usually understood.\r\n\r\nTo avoid confusion, let's rename this parameter to `nonempty`.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-27T00:31:39Z",
            "diff_hunk": "@@ -96,32 +82,55 @@ const char *os_getenv(const char *name)\n     // except when it does not include the NUL-terminator.\n     e = xmemdupz(buf, size);\n   }\n-  pmap_put(cstr_t)(&envmap, xstrdup(name), e);\n end:\n   if (r != 0 && r != UV_ENOENT && r != UV_UNKNOWN) {\n     ELOG(\"uv_os_getenv(%s) failed: %d %s\", name, r, uv_err_name(r));\n   }\n   return e;\n }\n \n+/// Like getenv(), loading the result to `NameBuff`\n+/// @see os_env_exists\n+char *os_getenv_noalloc(const char *name)\n+  FUNC_ATTR_NONNULL_ALL\n+{\n+  if (name[0] == NUL) {\n+    return NULL;\n+  }\n+\n+  size_t size = sizeof(NameBuff);\n+  int r = uv_os_getenv(name, NameBuff, &size);\n+  if (r != 0 || size == 0 || NameBuff[0] == NUL) {\n+    if (r != 0 && r != UV_ENOENT && r != UV_UNKNOWN) {\n+      ELOG(\"uv_os_getenv_noalloc(%s) failed: %d %s\", name, r, uv_err_name(r));\n+    }\n+    return NULL;\n+  }\n+  return NameBuff;\n+}\n+\n /// Returns true if environment variable `name` is defined (even if empty).\n /// Returns false if not found (UV_ENOENT) or other failure.\n-bool os_env_exists(const char *name)\n+///\n+/// @param name the environment variable in question\n+/// @param defined whether the variable has a valid value, or may be empty",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2015172676",
            "id": 2015172676,
            "in_reply_to_id": 1998744840,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM54HRhE",
            "original_commit_id": "f4d74a5230db03e522321fa18ae5c4624fde63ca",
            "original_line": 116,
            "original_position": 68,
            "original_start_line": null,
            "path": "src/nvim/os/env.c",
            "position": null,
            "pull_request_review_id": 2718904062,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2015172676/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-27T00:34:04Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2015172676",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2015176243"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2015176243"
                }
            },
            "author_association": "MEMBER",
            "body": "the comment was referring to this deleted line.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-27T00:36:59Z",
            "diff_hunk": "@@ -162,7 +178,6 @@ int os_setenv(const char *name, const char *value, int overwrite)\n   assert(r != UV_EINVAL);\n   // Destroy the old map item. Do this AFTER uv_os_setenv(), because `value`\n   // could be a previous os_getenv() result.\n-  pmap_del2(&envmap, name);",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2015176243",
            "id": 2015176243,
            "line": 165,
            "node_id": "PRRC_kwDOAPphoM54HSYz",
            "original_commit_id": "3cd512c56efd759d02f7ec0ecc11e78ea8677fa2",
            "original_line": 165,
            "original_position": 123,
            "original_start_line": null,
            "path": "src/nvim/os/env.c",
            "position": 129,
            "pull_request_review_id": 2718910043,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2015176243/reactions"
            },
            "side": "LEFT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-27T00:36:59Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2015176243",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2015184082"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2015184082"
                }
            },
            "author_association": "MEMBER",
            "body": "eliminates `exit` and `nvim_env`: \r\n```suggestion\r\n    } else if (strequal(server_addr, os_getenv_noalloc(\"NVIM\"))) {\r\n```",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-27T00:42:32Z",
            "diff_hunk": "@@ -932,16 +932,25 @@ static void remote_request(mparm_T *params, int remote_args, char *server_addr,\n   Object rvobj = OBJECT_INIT;\n \n   if (is_ui) {\n+    char *nvim_env = os_getenv(\"NVIM\");\n+    bool exit = false;\n     if (!chan) {\n       fprintf(stderr, \"Remote ui failed to start: %s\\n\", connect_error);\n-      os_exit(1);\n-    } else if (strequal(server_addr, os_getenv(\"NVIM\"))) {\n+      exit = true;\n+    } else if (strequal(server_addr, nvim_env)) {",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2015184082",
            "id": 2015184082,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM54HUTS",
            "original_commit_id": "3cd512c56efd759d02f7ec0ecc11e78ea8677fa2",
            "original_line": 940,
            "original_position": 11,
            "original_start_line": null,
            "path": "src/nvim/main.c",
            "position": null,
            "pull_request_review_id": 2718923946,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2015184082/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-27T00:43:43Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2015184082",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2015185841"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2015185841"
                }
            },
            "author_association": "MEMBER",
            "body": "noalloc?",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-27T00:45:31Z",
            "diff_hunk": "@@ -1283,7 +1282,9 @@ static int nlua_empty_dict_tostring(lua_State *lstate)\n /// @param  lstate  Lua interpreter state.\n static int nlua_getenv(lua_State *lstate)\n {\n-  lua_pushstring(lstate, os_getenv(luaL_checkstring(lstate, 1)));\n+  char *lstate_var = os_getenv(luaL_checkstring(lstate, 1));\n+  lua_pushstring(lstate, lstate_var);",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2015185841",
            "id": 2015185841,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM54HUux",
            "original_commit_id": "3cd512c56efd759d02f7ec0ecc11e78ea8677fa2",
            "original_line": 1286,
            "original_position": 16,
            "original_start_line": null,
            "path": "src/nvim/lua/executor.c",
            "position": null,
            "pull_request_review_id": 2718926994,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2015185841/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-27T00:45:31Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2015185841",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2015186860"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2015186860"
                }
            },
            "author_association": "MEMBER",
            "body": "it was only checking NULL, which means the arg should be `false` ?\r\n```suggestion\r\n  if (!os_env_exists(\"LANG\", false)) {\r\n```",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-27T00:47:16Z",
            "diff_hunk": "@@ -340,7 +342,7 @@ char *get_locales(expand_T *xp, int idx)\n void lang_init(void)\n {\n #ifdef __APPLE__\n-  if (os_getenv(\"LANG\") == NULL) {\n+  if (!os_env_exists(\"LANG\", true)) {",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2015186860",
            "id": 2015186860,
            "line": 345,
            "node_id": "PRRC_kwDOAPphoM54HU-s",
            "original_commit_id": "3cd512c56efd759d02f7ec0ecc11e78ea8677fa2",
            "original_line": 345,
            "original_position": 58,
            "original_start_line": null,
            "path": "src/nvim/os/lang.c",
            "position": 35,
            "pull_request_review_id": 2718928878,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2015186860/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-27T00:47:16Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2015186860",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2015190423"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2015190423"
                }
            },
            "author_association": "MEMBER",
            "body": "`os_getenv` returns `NULL` for empty string",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-27T00:50:41Z",
            "diff_hunk": "@@ -340,7 +342,7 @@ char *get_locales(expand_T *xp, int idx)\n void lang_init(void)\n {\n #ifdef __APPLE__\n-  if (os_getenv(\"LANG\") == NULL) {\n+  if (!os_env_exists(\"LANG\", true)) {",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2015190423",
            "id": 2015190423,
            "in_reply_to_id": 2015186860,
            "line": 345,
            "node_id": "PRRC_kwDOAPphoM54HV2X",
            "original_commit_id": "3cd512c56efd759d02f7ec0ecc11e78ea8677fa2",
            "original_line": 345,
            "original_position": 58,
            "original_start_line": null,
            "path": "src/nvim/os/lang.c",
            "position": 35,
            "pull_request_review_id": 2718934831,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2015190423/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-27T00:50:41Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2015190423",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2015190947"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2015190947"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n/// @see os_getenv_noalloc\r\n/// @see os_env_exists\r\n```",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-27T00:51:40Z",
            "diff_hunk": "@@ -52,31 +52,17 @@\n # include \"os/env.c.generated.h\"\n #endif\n \n-// Because `uv_os_getenv` requires allocating, we must manage a map to maintain\n-// the behavior of `os_getenv`.\n-static PMap(cstr_t) envmap = MAP_INIT;\n-\n /// Like getenv(), but returns NULL if the variable is empty.\n+/// Result must be freed by the caller.\n /// @see os_env_exists",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2015190947",
            "id": 2015190947,
            "line": 57,
            "node_id": "PRRC_kwDOAPphoM54HV-j",
            "original_commit_id": "3cd512c56efd759d02f7ec0ecc11e78ea8677fa2",
            "original_line": 57,
            "original_position": 10,
            "original_start_line": null,
            "path": "src/nvim/os/env.c",
            "position": 10,
            "pull_request_review_id": 2718935810,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2015190947/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-27T00:51:41Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2015190947",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2015194296"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2015194296"
                }
            },
            "author_association": "MEMBER",
            "body": "could use os_env_exists here",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-27T00:55:11Z",
            "diff_hunk": "@@ -401,23 +401,27 @@ static void terminfo_start(TUIData *tui)\n   }\n \n   // None of the following work over SSH; see :help TERM .\n-  const char *colorterm = os_getenv(\"COLORTERM\");\n-  const char *termprg = os_getenv(\"TERM_PROGRAM\");\n-  const char *vte_version_env = os_getenv(\"VTE_VERSION\");\n+  char *tmux_env = os_getenv(\"TMUX\");\n+  char *colorterm = os_getenv(\"COLORTERM\");\n+  char *termprg = os_getenv(\"TERM_PROGRAM\");\n+  char *vte_version_env = os_getenv(\"VTE_VERSION\");\n+  char *konsolev_env = os_getenv(\"KONSOLE_VERSION\");\n+  char *konsole_profile_env = os_getenv(\"KONSOLE_PROFILE_NAME\");\n+  char *konsole_dbus_session = os_getenv(\"KONSOLE_DBUS_SESSION\");\n+  char *term_program_version_env = os_getenv(\"TERM_PROGRAM_VERSION\");\n+\n   int vtev = vte_version_env ? (int)strtol(vte_version_env, NULL, 10) : 0;\n   bool iterm_env = termprg && strstr(termprg, \"iTerm.app\");\n   bool nsterm = (termprg && strstr(termprg, \"Apple_Terminal\"))\n                 || terminfo_is_term_family(term, \"nsterm\");\n   bool konsole = terminfo_is_term_family(term, \"konsole\")\n-                 || os_getenv(\"KONSOLE_PROFILE_NAME\")\n-                 || os_getenv(\"KONSOLE_DBUS_SESSION\");",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2015194296",
            "id": 2015194296,
            "line": 413,
            "node_id": "PRRC_kwDOAPphoM54HWy4",
            "original_commit_id": "3cd512c56efd759d02f7ec0ecc11e78ea8677fa2",
            "original_line": 413,
            "original_position": 31,
            "original_start_line": null,
            "path": "src/nvim/tui/tui.c",
            "position": 28,
            "pull_request_review_id": 2718942742,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2015194296/reactions"
            },
            "side": "LEFT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-27T00:55:41Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2015194296",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2015768541"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2015768541"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "I should have noticed that, sorry.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-27T06:46:06Z",
            "diff_hunk": "@@ -162,7 +178,6 @@ int os_setenv(const char *name, const char *value, int overwrite)\n   assert(r != UV_EINVAL);\n   // Destroy the old map item. Do this AFTER uv_os_setenv(), because `value`\n   // could be a previous os_getenv() result.\n-  pmap_del2(&envmap, name);",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2015768541",
            "id": 2015768541,
            "in_reply_to_id": 2015176243,
            "line": 165,
            "node_id": "PRRC_kwDOAPphoM54Ji_d",
            "original_commit_id": "3cd512c56efd759d02f7ec0ecc11e78ea8677fa2",
            "original_line": 165,
            "original_position": 123,
            "original_start_line": null,
            "path": "src/nvim/os/env.c",
            "position": 129,
            "pull_request_review_id": 2719987186,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2015768541/reactions"
            },
            "side": "LEFT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-27T06:46:06Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2015768541",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2017711732"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2017711732"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "I'm wondering, should we add a log message (like `WLOG`) as well?",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-27T23:21:02Z",
            "diff_hunk": "@@ -96,32 +82,55 @@ const char *os_getenv(const char *name)\n     // except when it does not include the NUL-terminator.\n     e = xmemdupz(buf, size);\n   }\n-  pmap_put(cstr_t)(&envmap, xstrdup(name), e);\n end:\n   if (r != 0 && r != UV_ENOENT && r != UV_UNKNOWN) {\n     ELOG(\"uv_os_getenv(%s) failed: %d %s\", name, r, uv_err_name(r));\n   }\n   return e;\n }\n \n+/// Like getenv(), but returns a pointer to `NameBuff` instead of allocating.\n+/// @see os_env_exists\n+char *os_getenv_noalloc(const char *name)\n+  FUNC_ATTR_NONNULL_ALL\n+{\n+  if (name[0] == NUL) {\n+    return NULL;\n+  }\n+\n+  size_t size = sizeof(NameBuff);\n+  int r = uv_os_getenv(name, NameBuff, &size);\n+  if (r != 0 || size == 0 || NameBuff[0] == NUL) {\n+    if (r != 0 && r != UV_ENOENT && r != UV_UNKNOWN) {\n+      ELOG(\"uv_os_getenv(%s) failed: %d %s\", name, r, uv_err_name(r));\n+    }\n+    return NULL;",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2017711732",
            "id": 2017711732,
            "in_reply_to_id": 2015170419,
            "line": 118,
            "node_id": "PRRC_kwDOAPphoM54Q9Z0",
            "original_commit_id": "3cd512c56efd759d02f7ec0ecc11e78ea8677fa2",
            "original_line": 118,
            "original_position": 61,
            "original_start_line": 104,
            "path": "src/nvim/os/env.c",
            "position": 72,
            "pull_request_review_id": 2723931757,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2017711732/reactions"
            },
            "side": "RIGHT",
            "start_line": 115,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-03-27T23:21:02Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2017711732",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2017719177"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2017719177"
                }
            },
            "author_association": "MEMBER",
            "body": "I think the caller needs to decide how to deal with that. So no.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-27T23:31:43Z",
            "diff_hunk": "@@ -96,32 +82,55 @@ const char *os_getenv(const char *name)\n     // except when it does not include the NUL-terminator.\n     e = xmemdupz(buf, size);\n   }\n-  pmap_put(cstr_t)(&envmap, xstrdup(name), e);\n end:\n   if (r != 0 && r != UV_ENOENT && r != UV_UNKNOWN) {\n     ELOG(\"uv_os_getenv(%s) failed: %d %s\", name, r, uv_err_name(r));\n   }\n   return e;\n }\n \n+/// Like getenv(), but returns a pointer to `NameBuff` instead of allocating.\n+/// @see os_env_exists\n+char *os_getenv_noalloc(const char *name)\n+  FUNC_ATTR_NONNULL_ALL\n+{\n+  if (name[0] == NUL) {\n+    return NULL;\n+  }\n+\n+  size_t size = sizeof(NameBuff);\n+  int r = uv_os_getenv(name, NameBuff, &size);\n+  if (r != 0 || size == 0 || NameBuff[0] == NUL) {\n+    if (r != 0 && r != UV_ENOENT && r != UV_UNKNOWN) {\n+      ELOG(\"uv_os_getenv(%s) failed: %d %s\", name, r, uv_err_name(r));\n+    }\n+    return NULL;",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2017719177",
            "id": 2017719177,
            "in_reply_to_id": 2015170419,
            "line": 118,
            "node_id": "PRRC_kwDOAPphoM54Q_OJ",
            "original_commit_id": "3cd512c56efd759d02f7ec0ecc11e78ea8677fa2",
            "original_line": 118,
            "original_position": 61,
            "original_start_line": 104,
            "path": "src/nvim/os/env.c",
            "position": 72,
            "pull_request_review_id": 2723942768,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2017719177/reactions"
            },
            "side": "RIGHT",
            "start_line": 115,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-03-27T23:31:57Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2017719177",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2019034182"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019034182"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Done.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-28T17:02:32Z",
            "diff_hunk": "@@ -137,15 +146,22 @@ int os_setenv(const char *name, const char *value, int overwrite)\n     return -1;\n   }\n #ifdef MSWIN\n-  if (!overwrite && os_getenv(name) != NULL) {\n+  bool return_donothing = false;\n+  char *env = os_getenv(name);\n+  if (!overwrite && env != NULL) {\n+    return_donothing = true;\n+  }\n+  xfree(env);\n+  if (return_donothing) {\n     return 0;\n   }\n+",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2019034182",
            "id": 2019034182,
            "in_reply_to_id": 2013926697,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM54WARG",
            "original_commit_id": "3cd512c56efd759d02f7ec0ecc11e78ea8677fa2",
            "original_line": 158,
            "original_position": 108,
            "original_start_line": 149,
            "path": "src/nvim/os/env.c",
            "position": null,
            "pull_request_review_id": 2726164096,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019034182/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-03-28T17:02:32Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019034182",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2019035337"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019035337"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Done.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-28T17:03:18Z",
            "diff_hunk": "@@ -932,12 +941,13 @@ char *vim_getenv(const char *name)\n   char *vim_path = NULL;\n   if (vimruntime\n       && *default_vimruntime_dir == NUL) {\n-    kos_env_path = os_getenv(\"VIM\");\n+    kos_env_path = os_getenv(\"VIM\");    // kos_env_path was NULL.\n     if (kos_env_path != NULL) {\n       vim_path = vim_version_dir(kos_env_path);\n       if (vim_path == NULL) {\n         vim_path = xstrdup(kos_env_path);\n       }\n+      xfree(kos_env_path);",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2019035337",
            "id": 2019035337,
            "in_reply_to_id": 2013932166,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM54WAjJ",
            "original_commit_id": "3cd512c56efd759d02f7ec0ecc11e78ea8677fa2",
            "original_line": 950,
            "original_position": 236,
            "original_start_line": 948,
            "path": "src/nvim/os/env.c",
            "position": null,
            "pull_request_review_id": 2726165757,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019035337/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-03-28T17:03:18Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019035337",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2019035686"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019035686"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Done.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-28T17:03:35Z",
            "diff_hunk": "@@ -3939,9 +3939,9 @@ dict_T *create_environment(const dictitem_T *job_env, const bool clear_env, cons\n       size_t len = strlen(required_env_vars[i]);\n       dictitem_T *dv = tv_dict_find(env, required_env_vars[i], (ptrdiff_t)len);\n       if (!dv) {\n-        const char *env_var = os_getenv(required_env_vars[i]);\n-        if (env_var) {\n-          tv_dict_add_str(env, required_env_vars[i], len, env_var);\n+        if (os_env_exists(required_env_vars[i], true)) {\n+          tv_dict_add_allocated_str(env, required_env_vars[i], len,\n+                                    os_getenv(required_env_vars[i]));",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2019035686",
            "id": 2019035686,
            "in_reply_to_id": 2013976730,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM54WAom",
            "original_commit_id": "3cd512c56efd759d02f7ec0ecc11e78ea8677fa2",
            "original_line": 3944,
            "original_position": 18,
            "original_start_line": 3942,
            "path": "src/nvim/eval/funcs.c",
            "position": null,
            "pull_request_review_id": 2726166357,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019035686/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-03-28T17:03:35Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019035686",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2019036194"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019036194"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Done.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-28T17:03:56Z",
            "diff_hunk": "@@ -120,12 +120,12 @@ char *server_address_new(const char *name)\n   static uint32_t count = 0;\n   char fmt[ADDRESS_MAX_SIZE];\n #ifdef MSWIN\n-  (void)get_appname(true);\n+  const char *appname = get_appname(true);    // Call to initialize NameBuf with appname",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2019036194",
            "id": 2019036194,
            "in_reply_to_id": 2014003152,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM54WAwi",
            "original_commit_id": "3cd512c56efd759d02f7ec0ecc11e78ea8677fa2",
            "original_line": 123,
            "original_position": 60,
            "original_start_line": null,
            "path": "src/nvim/msgpack_rpc/server.c",
            "position": null,
            "pull_request_review_id": 2726167115,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019036194/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-28T17:03:56Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019036194",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2019036407"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019036407"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Done.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-28T17:04:06Z",
            "diff_hunk": "@@ -64,31 +64,33 @@ static const char *const xdg_defaults[] = {\n };\n \n /// Gets the value of $NVIM_APPNAME, or \"nvim\" if not set.\n+/// Result must be freed by the caller, if called with 'retval_needed == true'.",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2019036407",
            "id": 2019036407,
            "in_reply_to_id": 2014004618,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM54WAz3",
            "original_commit_id": "3cd512c56efd759d02f7ec0ecc11e78ea8677fa2",
            "original_line": 67,
            "original_position": 4,
            "original_start_line": null,
            "path": "src/nvim/os/stdpaths.c",
            "position": null,
            "pull_request_review_id": 2726167479,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019036407/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-28T17:04:07Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019036407",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2019036618"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019036618"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Done.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-28T17:04:16Z",
            "diff_hunk": "@@ -70,34 +70,37 @@ char *get_mess_lang(void)\n }\n \n /// Get the language used for messages from the environment.\n+/// The function may be using NameBuff.\n ///\n /// This uses LC_MESSAGES when available, which it is for most systems we build for\n /// except for windows. Then fallback to get the value from the environment\n /// ourselves, and use LC_CTYPE as a last resort.\n static char *get_mess_env(void)\n {\n+  char *p;\n+",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2019036618",
            "id": 2019036618,
            "in_reply_to_id": 2014012432,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM54WA3K",
            "original_commit_id": "3cd512c56efd759d02f7ec0ecc11e78ea8677fa2",
            "original_line": 81,
            "original_position": 12,
            "original_start_line": 80,
            "path": "src/nvim/os/lang.c",
            "position": null,
            "pull_request_review_id": 2726167780,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019036618/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-03-28T17:04:16Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019036618",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2019036827"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019036827"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Done.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-28T17:04:25Z",
            "diff_hunk": "@@ -70,34 +70,37 @@ char *get_mess_lang(void)\n }\n \n /// Get the language used for messages from the environment.\n+/// The function may be using NameBuff.\n ///\n /// This uses LC_MESSAGES when available, which it is for most systems we build for\n /// except for windows. Then fallback to get the value from the environment\n /// ourselves, and use LC_CTYPE as a last resort.\n static char *get_mess_env(void)\n {\n+  char *p;\n+\n #ifdef LC_MESSAGES\n-  return get_locale_val(LC_MESSAGES);\n+  p = get_locale_val(LC_MESSAGES);   // Making sure that we can free() the return value",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2019036827",
            "id": 2019036827,
            "in_reply_to_id": 2014013996,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM54WA6b",
            "original_commit_id": "3cd512c56efd759d02f7ec0ecc11e78ea8677fa2",
            "original_line": 83,
            "original_position": 15,
            "original_start_line": null,
            "path": "src/nvim/os/lang.c",
            "position": null,
            "pull_request_review_id": 2726168151,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019036827/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-28T17:04:25Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019036827",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2019039373"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019039373"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Reverted to original.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-28T17:06:30Z",
            "diff_hunk": "@@ -107,8 +110,7 @@ void set_lang_var(void)\n   const char *loc = get_locale_val(LC_CTYPE);\n   set_vim_var_string(VV_CTYPE, loc, -1);\n \n-  loc = get_mess_env();\n-  set_vim_var_string(VV_LANG, loc, -1);\n+  set_vim_var_string(VV_LANG, get_mess_env(), -1);",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2019039373",
            "id": 2019039373,
            "in_reply_to_id": 2014015006,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM54WBiN",
            "original_commit_id": "3cd512c56efd759d02f7ec0ecc11e78ea8677fa2",
            "original_line": 113,
            "original_position": 49,
            "original_start_line": 110,
            "path": "src/nvim/os/lang.c",
            "position": null,
            "pull_request_review_id": 2726172516,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019039373/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "LEFT",
            "subject_type": "line",
            "updated_at": "2025-03-28T17:06:30Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019039373",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2019039583"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019039583"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Done.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-28T17:06:39Z",
            "diff_hunk": "@@ -64,31 +64,33 @@ static const char *const xdg_defaults[] = {\n };\n \n /// Gets the value of $NVIM_APPNAME, or \"nvim\" if not set.\n+/// Result must be freed by the caller, if called with 'retval_needed == true'.\n ///\n /// @param namelike Write \"name-like\" value (no path separators) in `NameBuff`.\n ///\n /// @return $NVIM_APPNAME value\n const char *get_appname(bool namelike)\n {\n-  const char *env_val = os_getenv(\"NVIM_APPNAME\");\n-  if (env_val == NULL || *env_val == NUL) {\n-    env_val = \"nvim\";\n+  const char *env_val = os_getenv_noalloc(\"NVIM_APPNAME\");\n+\n+  if (!env_val) {\n+    xstrlcpy(NameBuff, \"nvim\", sizeof(NameBuff));\n   }\n \n   if (namelike) {\n     // Appname may be a relative path, replace slashes to make it name-like.\n-    xstrlcpy(NameBuff, env_val, sizeof(NameBuff));\n     memchrsub(NameBuff, '/', '-', sizeof(NameBuff));\n     memchrsub(NameBuff, '\\\\', '-', sizeof(NameBuff));\n   }\n \n-  return env_val;\n+  return NameBuff;\n }\n \n /// Ensure that APPNAME is valid. Must be a name or relative path.\n bool appname_is_valid(void)\n {\n   const char *appname = get_appname(false);\n+  bool valid = true;\n   if (path_is_absolute(appname)\n       // TODO(justinmk): on Windows, path_is_absolute says \"/\" is NOT absolute. Should it?\n       || strequal(appname, \"/\")",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2019039583",
            "id": 2019039583,
            "in_reply_to_id": 2014016562,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM54WBlf",
            "original_commit_id": "3cd512c56efd759d02f7ec0ecc11e78ea8677fa2",
            "original_line": 94,
            "original_position": 38,
            "original_start_line": 89,
            "path": "src/nvim/os/stdpaths.c",
            "position": null,
            "pull_request_review_id": 2726172855,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019039583/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-03-28T17:06:40Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019039583",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2019039735"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019039735"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Done.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-28T17:06:46Z",
            "diff_hunk": "@@ -188,6 +191,7 @@ char *stdpaths_get_xdg_var(const XDGVarType idx)\n     ret = xdg_remove_duplicate(ret, ENV_SEPSTR);\n   }\n \n+  xfree(env_val);",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2019039735",
            "id": 2019039735,
            "in_reply_to_id": 2014018289,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM54WBn3",
            "original_commit_id": "3cd512c56efd759d02f7ec0ecc11e78ea8677fa2",
            "original_line": 194,
            "original_position": 75,
            "original_start_line": null,
            "path": "src/nvim/os/stdpaths.c",
            "position": null,
            "pull_request_review_id": 2726173104,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019039735/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-28T17:06:46Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019039735",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2019039977"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019039977"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Done.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-28T17:06:58Z",
            "diff_hunk": "@@ -49,7 +49,7 @@ bool terminfo_is_bsd_console(const char *term)\n # if defined(__FreeBSD__)\n   // FreeBSD console sets TERM=xterm, but it does not support xterm features\n   // like cursor-shaping. Assume that TERM=xterm is degraded. #8644\n-  return strequal(term, \"xterm\") && !!os_getenv(\"XTERM_VERSION\");\n+  return strequal(term, \"xterm\") && !!os_getenv_noalloc(\"XTERM_VERSION\");",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2019039977",
            "id": 2019039977,
            "in_reply_to_id": 2014023379,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM54WBrp",
            "original_commit_id": "3cd512c56efd759d02f7ec0ecc11e78ea8677fa2",
            "original_line": 52,
            "original_position": 5,
            "original_start_line": null,
            "path": "src/nvim/tui/terminfo.c",
            "position": null,
            "pull_request_review_id": 2726173526,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019039977/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-28T17:06:58Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019039977",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2019043047"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019043047"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "By default `uv_os_getenv()` returns and empty buffer with `UV_ENOBUFS`. \r\n\r\nTherefore, if we take this direction, we need to fetch the variable into a temporary buffer (of the correct size), and truncate it to `NameBuff` after. I added this change in a separate commit, together with corresponding unittests.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-28T17:09:24Z",
            "diff_hunk": "@@ -96,32 +82,55 @@ const char *os_getenv(const char *name)\n     // except when it does not include the NUL-terminator.\n     e = xmemdupz(buf, size);\n   }\n-  pmap_put(cstr_t)(&envmap, xstrdup(name), e);\n end:\n   if (r != 0 && r != UV_ENOENT && r != UV_UNKNOWN) {\n     ELOG(\"uv_os_getenv(%s) failed: %d %s\", name, r, uv_err_name(r));\n   }\n   return e;\n }\n \n+/// Like getenv(), but returns a pointer to `NameBuff` instead of allocating.\n+/// @see os_env_exists\n+char *os_getenv_noalloc(const char *name)\n+  FUNC_ATTR_NONNULL_ALL\n+{\n+  if (name[0] == NUL) {\n+    return NULL;\n+  }\n+\n+  size_t size = sizeof(NameBuff);\n+  int r = uv_os_getenv(name, NameBuff, &size);\n+  if (r != 0 || size == 0 || NameBuff[0] == NUL) {\n+    if (r != 0 && r != UV_ENOENT && r != UV_UNKNOWN) {\n+      ELOG(\"uv_os_getenv(%s) failed: %d %s\", name, r, uv_err_name(r));\n+    }\n+    return NULL;",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2019043047",
            "id": 2019043047,
            "in_reply_to_id": 2015170419,
            "line": 118,
            "node_id": "PRRC_kwDOAPphoM54WCbn",
            "original_commit_id": "3cd512c56efd759d02f7ec0ecc11e78ea8677fa2",
            "original_line": 118,
            "original_position": 61,
            "original_start_line": 104,
            "path": "src/nvim/os/env.c",
            "position": 72,
            "pull_request_review_id": 2726178770,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019043047/reactions"
            },
            "side": "RIGHT",
            "start_line": 115,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-03-28T17:09:24Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019043047",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2019043279"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019043279"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Done.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-28T17:09:35Z",
            "diff_hunk": "@@ -162,7 +178,6 @@ int os_setenv(const char *name, const char *value, int overwrite)\n   assert(r != UV_EINVAL);\n   // Destroy the old map item. Do this AFTER uv_os_setenv(), because `value`\n   // could be a previous os_getenv() result.\n-  pmap_del2(&envmap, name);",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2019043279",
            "id": 2019043279,
            "in_reply_to_id": 2015176243,
            "line": 165,
            "node_id": "PRRC_kwDOAPphoM54WCfP",
            "original_commit_id": "3cd512c56efd759d02f7ec0ecc11e78ea8677fa2",
            "original_line": 165,
            "original_position": 123,
            "original_start_line": null,
            "path": "src/nvim/os/env.c",
            "position": 129,
            "pull_request_review_id": 2726179384,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019043279/reactions"
            },
            "side": "LEFT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-28T17:09:35Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019043279",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2019043453"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019043453"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Done.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-28T17:09:42Z",
            "diff_hunk": "@@ -932,16 +932,25 @@ static void remote_request(mparm_T *params, int remote_args, char *server_addr,\n   Object rvobj = OBJECT_INIT;\n \n   if (is_ui) {\n+    char *nvim_env = os_getenv(\"NVIM\");\n+    bool exit = false;\n     if (!chan) {\n       fprintf(stderr, \"Remote ui failed to start: %s\\n\", connect_error);\n-      os_exit(1);\n-    } else if (strequal(server_addr, os_getenv(\"NVIM\"))) {\n+      exit = true;\n+    } else if (strequal(server_addr, nvim_env)) {",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2019043453",
            "id": 2019043453,
            "in_reply_to_id": 2015184082,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM54WCh9",
            "original_commit_id": "3cd512c56efd759d02f7ec0ecc11e78ea8677fa2",
            "original_line": 940,
            "original_position": 11,
            "original_start_line": null,
            "path": "src/nvim/main.c",
            "position": null,
            "pull_request_review_id": 2726179648,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019043453/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-28T17:09:43Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019043453",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2019043696"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019043696"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Done.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-28T17:09:56Z",
            "diff_hunk": "@@ -1283,7 +1282,9 @@ static int nlua_empty_dict_tostring(lua_State *lstate)\n /// @param  lstate  Lua interpreter state.\n static int nlua_getenv(lua_State *lstate)\n {\n-  lua_pushstring(lstate, os_getenv(luaL_checkstring(lstate, 1)));\n+  char *lstate_var = os_getenv(luaL_checkstring(lstate, 1));\n+  lua_pushstring(lstate, lstate_var);",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2019043696",
            "id": 2019043696,
            "in_reply_to_id": 2015185841,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM54WClw",
            "original_commit_id": "3cd512c56efd759d02f7ec0ecc11e78ea8677fa2",
            "original_line": 1286,
            "original_position": 16,
            "original_start_line": null,
            "path": "src/nvim/lua/executor.c",
            "position": null,
            "pull_request_review_id": 2726180174,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019043696/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-28T17:09:56Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019043696",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2019043889"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019043889"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Done.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-28T17:10:05Z",
            "diff_hunk": "@@ -52,31 +52,17 @@\n # include \"os/env.c.generated.h\"\n #endif\n \n-// Because `uv_os_getenv` requires allocating, we must manage a map to maintain\n-// the behavior of `os_getenv`.\n-static PMap(cstr_t) envmap = MAP_INIT;\n-\n /// Like getenv(), but returns NULL if the variable is empty.\n+/// Result must be freed by the caller.\n /// @see os_env_exists",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2019043889",
            "id": 2019043889,
            "in_reply_to_id": 2015190947,
            "line": 57,
            "node_id": "PRRC_kwDOAPphoM54WCox",
            "original_commit_id": "3cd512c56efd759d02f7ec0ecc11e78ea8677fa2",
            "original_line": 57,
            "original_position": 10,
            "original_start_line": null,
            "path": "src/nvim/os/env.c",
            "position": 10,
            "pull_request_review_id": 2726180490,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019043889/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-28T17:10:06Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019043889",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2019044023"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019044023"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Done.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-28T17:10:12Z",
            "diff_hunk": "@@ -401,23 +401,27 @@ static void terminfo_start(TUIData *tui)\n   }\n \n   // None of the following work over SSH; see :help TERM .\n-  const char *colorterm = os_getenv(\"COLORTERM\");\n-  const char *termprg = os_getenv(\"TERM_PROGRAM\");\n-  const char *vte_version_env = os_getenv(\"VTE_VERSION\");\n+  char *tmux_env = os_getenv(\"TMUX\");\n+  char *colorterm = os_getenv(\"COLORTERM\");\n+  char *termprg = os_getenv(\"TERM_PROGRAM\");\n+  char *vte_version_env = os_getenv(\"VTE_VERSION\");\n+  char *konsolev_env = os_getenv(\"KONSOLE_VERSION\");\n+  char *konsole_profile_env = os_getenv(\"KONSOLE_PROFILE_NAME\");\n+  char *konsole_dbus_session = os_getenv(\"KONSOLE_DBUS_SESSION\");\n+  char *term_program_version_env = os_getenv(\"TERM_PROGRAM_VERSION\");\n+\n   int vtev = vte_version_env ? (int)strtol(vte_version_env, NULL, 10) : 0;\n   bool iterm_env = termprg && strstr(termprg, \"iTerm.app\");\n   bool nsterm = (termprg && strstr(termprg, \"Apple_Terminal\"))\n                 || terminfo_is_term_family(term, \"nsterm\");\n   bool konsole = terminfo_is_term_family(term, \"konsole\")\n-                 || os_getenv(\"KONSOLE_PROFILE_NAME\")\n-                 || os_getenv(\"KONSOLE_DBUS_SESSION\");",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2019044023",
            "id": 2019044023,
            "in_reply_to_id": 2015194296,
            "line": 413,
            "node_id": "PRRC_kwDOAPphoM54WCq3",
            "original_commit_id": "3cd512c56efd759d02f7ec0ecc11e78ea8677fa2",
            "original_line": 413,
            "original_position": 31,
            "original_start_line": null,
            "path": "src/nvim/tui/tui.c",
            "position": 28,
            "pull_request_review_id": 2726180727,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019044023/reactions"
            },
            "side": "LEFT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-28T17:10:12Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019044023",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2019588228"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019588228"
                }
            },
            "author_association": "MEMBER",
            "body": "This variable is never used.\r\n```suggestion\r\n```",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-28T23:45:58Z",
            "diff_hunk": "@@ -137,15 +157,17 @@ int os_setenv(const char *name, const char *value, int overwrite)\n     return -1;\n   }\n #ifdef MSWIN\n-  if (!overwrite && os_getenv(name) != NULL) {\n+  bool return_donothing = false;",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2019588228",
            "id": 2019588228,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM54YHiE",
            "original_commit_id": "9982f402e9dd4f65eda147ce8dffb6ae68543bd0",
            "original_line": 160,
            "original_position": 110,
            "original_start_line": null,
            "path": "src/nvim/os/env.c",
            "position": null,
            "pull_request_review_id": 2727071012,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019588228/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-28T23:45:59Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019588228",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2019588452"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019588452"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n```",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-28T23:46:15Z",
            "diff_hunk": "@@ -137,15 +157,17 @@ int os_setenv(const char *name, const char *value, int overwrite)\n     return -1;\n   }\n #ifdef MSWIN\n-  if (!overwrite && os_getenv(name) != NULL) {\n+  bool return_donothing = false;\n+  if (!overwrite && !os_env_exists(name, true)) {\n     return 0;\n   }\n+",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2019588452",
            "id": 2019588452,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM54YHlk",
            "original_commit_id": "9982f402e9dd4f65eda147ce8dffb6ae68543bd0",
            "original_line": 164,
            "original_position": 114,
            "original_start_line": null,
            "path": "src/nvim/os/env.c",
            "position": null,
            "pull_request_review_id": 2727071315,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019588452/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-28T23:46:15Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2019588452",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2020233489"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2020233489"
                }
            },
            "author_association": "MEMBER",
            "body": "Ok, I see that you only allocate if `UV_ENOBUFS` is returned. That's good.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-30T19:22:06Z",
            "diff_hunk": "@@ -96,32 +82,55 @@ const char *os_getenv(const char *name)\n     // except when it does not include the NUL-terminator.\n     e = xmemdupz(buf, size);\n   }\n-  pmap_put(cstr_t)(&envmap, xstrdup(name), e);\n end:\n   if (r != 0 && r != UV_ENOENT && r != UV_UNKNOWN) {\n     ELOG(\"uv_os_getenv(%s) failed: %d %s\", name, r, uv_err_name(r));\n   }\n   return e;\n }\n \n+/// Like getenv(), but returns a pointer to `NameBuff` instead of allocating.\n+/// @see os_env_exists\n+char *os_getenv_noalloc(const char *name)\n+  FUNC_ATTR_NONNULL_ALL\n+{\n+  if (name[0] == NUL) {\n+    return NULL;\n+  }\n+\n+  size_t size = sizeof(NameBuff);\n+  int r = uv_os_getenv(name, NameBuff, &size);\n+  if (r != 0 || size == 0 || NameBuff[0] == NUL) {\n+    if (r != 0 && r != UV_ENOENT && r != UV_UNKNOWN) {\n+      ELOG(\"uv_os_getenv(%s) failed: %d %s\", name, r, uv_err_name(r));\n+    }\n+    return NULL;",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2020233489",
            "id": 2020233489,
            "in_reply_to_id": 2015170419,
            "line": 118,
            "node_id": "PRRC_kwDOAPphoM54alER",
            "original_commit_id": "3cd512c56efd759d02f7ec0ecc11e78ea8677fa2",
            "original_line": 118,
            "original_position": 61,
            "original_start_line": 104,
            "path": "src/nvim/os/env.c",
            "position": 72,
            "pull_request_review_id": 2727987496,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2020233489/reactions"
            },
            "side": "RIGHT",
            "start_line": 115,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-03-30T19:22:06Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2020233489",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2021645683"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2021645683"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "...and we can `xfree()` the allocated area right after :-)",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-31T19:24:20Z",
            "diff_hunk": "@@ -96,32 +82,55 @@ const char *os_getenv(const char *name)\n     // except when it does not include the NUL-terminator.\n     e = xmemdupz(buf, size);\n   }\n-  pmap_put(cstr_t)(&envmap, xstrdup(name), e);\n end:\n   if (r != 0 && r != UV_ENOENT && r != UV_UNKNOWN) {\n     ELOG(\"uv_os_getenv(%s) failed: %d %s\", name, r, uv_err_name(r));\n   }\n   return e;\n }\n \n+/// Like getenv(), but returns a pointer to `NameBuff` instead of allocating.\n+/// @see os_env_exists\n+char *os_getenv_noalloc(const char *name)\n+  FUNC_ATTR_NONNULL_ALL\n+{\n+  if (name[0] == NUL) {\n+    return NULL;\n+  }\n+\n+  size_t size = sizeof(NameBuff);\n+  int r = uv_os_getenv(name, NameBuff, &size);\n+  if (r != 0 || size == 0 || NameBuff[0] == NUL) {\n+    if (r != 0 && r != UV_ENOENT && r != UV_UNKNOWN) {\n+      ELOG(\"uv_os_getenv(%s) failed: %d %s\", name, r, uv_err_name(r));\n+    }\n+    return NULL;",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2021645683",
            "id": 2021645683,
            "in_reply_to_id": 2015170419,
            "line": 118,
            "node_id": "PRRC_kwDOAPphoM54f91z",
            "original_commit_id": "3cd512c56efd759d02f7ec0ecc11e78ea8677fa2",
            "original_line": 118,
            "original_position": 61,
            "original_start_line": 104,
            "path": "src/nvim/os/env.c",
            "position": 72,
            "pull_request_review_id": 2730307244,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2021645683/reactions"
            },
            "side": "RIGHT",
            "start_line": 115,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-03-31T19:24:20Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2021645683",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2021723917"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2021723917"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Done.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-31T20:29:20Z",
            "diff_hunk": "@@ -137,15 +157,17 @@ int os_setenv(const char *name, const char *value, int overwrite)\n     return -1;\n   }\n #ifdef MSWIN\n-  if (!overwrite && os_getenv(name) != NULL) {\n+  bool return_donothing = false;\n+  if (!overwrite && !os_env_exists(name, true)) {\n     return 0;\n   }\n+",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2021723917",
            "id": 2021723917,
            "in_reply_to_id": 2019588452,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM54gQ8N",
            "original_commit_id": "9982f402e9dd4f65eda147ce8dffb6ae68543bd0",
            "original_line": 164,
            "original_position": 114,
            "original_start_line": null,
            "path": "src/nvim/os/env.c",
            "position": null,
            "pull_request_review_id": 2730438494,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2021723917/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-31T20:29:20Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2021723917",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2021724020"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2021724020"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Done.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-31T20:29:26Z",
            "diff_hunk": "@@ -137,15 +157,17 @@ int os_setenv(const char *name, const char *value, int overwrite)\n     return -1;\n   }\n #ifdef MSWIN\n-  if (!overwrite && os_getenv(name) != NULL) {\n+  bool return_donothing = false;",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2021724020",
            "id": 2021724020,
            "in_reply_to_id": 2019588228,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM54gQ90",
            "original_commit_id": "9982f402e9dd4f65eda147ce8dffb6ae68543bd0",
            "original_line": 160,
            "original_position": 110,
            "original_start_line": null,
            "path": "src/nvim/os/env.c",
            "position": null,
            "pull_request_review_id": 2730438682,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2021724020/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-31T20:29:27Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2021724020",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2021724630"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2021724630"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Done.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-03-31T20:29:58Z",
            "diff_hunk": "@@ -96,32 +82,55 @@ const char *os_getenv(const char *name)\n     // except when it does not include the NUL-terminator.\n     e = xmemdupz(buf, size);\n   }\n-  pmap_put(cstr_t)(&envmap, xstrdup(name), e);\n end:\n   if (r != 0 && r != UV_ENOENT && r != UV_UNKNOWN) {\n     ELOG(\"uv_os_getenv(%s) failed: %d %s\", name, r, uv_err_name(r));\n   }\n   return e;\n }\n \n+/// Like getenv(), loading the result to `NameBuff`\n+/// @see os_env_exists\n+char *os_getenv_noalloc(const char *name)\n+  FUNC_ATTR_NONNULL_ALL\n+{\n+  if (name[0] == NUL) {\n+    return NULL;\n+  }\n+\n+  size_t size = sizeof(NameBuff);\n+  int r = uv_os_getenv(name, NameBuff, &size);\n+  if (r != 0 || size == 0 || NameBuff[0] == NUL) {\n+    if (r != 0 && r != UV_ENOENT && r != UV_UNKNOWN) {\n+      ELOG(\"uv_os_getenv_noalloc(%s) failed: %d %s\", name, r, uv_err_name(r));\n+    }\n+    return NULL;\n+  }\n+  return NameBuff;\n+}\n+\n /// Returns true if environment variable `name` is defined (even if empty).\n /// Returns false if not found (UV_ENOENT) or other failure.\n-bool os_env_exists(const char *name)\n+///\n+/// @param name the environment variable in question\n+/// @param defined whether the variable has a valid value, or may be empty",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2021724630",
            "id": 2021724630,
            "in_reply_to_id": 1998744840,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM54gRHW",
            "original_commit_id": "f4d74a5230db03e522321fa18ae5c4624fde63ca",
            "original_line": 116,
            "original_position": 68,
            "original_start_line": null,
            "path": "src/nvim/os/env.c",
            "position": null,
            "pull_request_review_id": 2730439704,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2021724630/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-03-31T20:29:58Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2021724630",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2023574009"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2023574009"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Outdated: `memfree` is not needed once using `os_getenv_noalloc()` :-)",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-04-01T19:38:57Z",
            "diff_hunk": "@@ -2410,22 +2410,37 @@ char *enc_locale(void)\n {\n   int i;\n   char buf[50];\n+  bool memfree = false;\n \n   const char *s;",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2023574009",
            "id": 2023574009,
            "in_reply_to_id": 1991207128,
            "line": 2414,
            "node_id": "PRRC_kwDOAPphoM54nUn5",
            "original_commit_id": "763cd72635c555665fbcb776027696bf3a1b95a9",
            "original_line": 2414,
            "original_position": 6,
            "original_start_line": null,
            "path": "src/nvim/mbyte.c",
            "position": 3,
            "pull_request_review_id": 2733876191,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2023574009/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-01T19:38:57Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2023574009",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2041950899"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2041950899"
                }
            },
            "author_association": "MEMBER",
            "body": "this is  very confusing. \"defined\" and \"exists\" are synonyms usually. An empty variable *is* defined.\r\n\r\n```suggestion\r\n/// @return whether the variable exists\r\n```",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-04-14T11:27:30Z",
            "diff_hunk": "@@ -96,32 +83,65 @@ const char *os_getenv(const char *name)\n     // except when it does not include the NUL-terminator.\n     e = xmemdupz(buf, size);\n   }\n-  pmap_put(cstr_t)(&envmap, xstrdup(name), e);\n end:\n   if (r != 0 && r != UV_ENOENT && r != UV_UNKNOWN) {\n     ELOG(\"uv_os_getenv(%s) failed: %d %s\", name, r, uv_err_name(r));\n   }\n   return e;\n }\n \n+/// Like getenv(), but returns a pointer to `NameBuff` instead of allocating.\n+/// Value is truncated if it exceeds sizeof(NameBuff).\n+/// @see os_env_exists\n+char *os_getenv_noalloc(const char *name)\n+  FUNC_ATTR_NONNULL_ALL\n+{\n+  if (name[0] == NUL) {\n+    return NULL;\n+  }\n+\n+  size_t size = sizeof(NameBuff);\n+  int r = uv_os_getenv(name, NameBuff, &size);\n+  if (r == UV_ENOBUFS) {\n+    char *e = xmalloc(size);\n+    r = uv_os_getenv(name, e, &size);\n+    if (r == 0 && size != 0 && e[0] != NUL) {\n+      xmemcpyz(NameBuff, e, sizeof(NameBuff) - 1);\n+    }\n+    xfree(e);\n+  }\n+\n+  if (r != 0 || size == 0 || NameBuff[0] == NUL) {\n+    if (r != 0 && r != UV_ENOENT && r != UV_UNKNOWN) {\n+      ELOG(\"uv_os_getenv(%s) failed: %d %s\", name, r, uv_err_name(r));\n+    }\n+    return NULL;\n+  }\n+  return NameBuff;\n+}\n+\n /// Returns true if environment variable `name` is defined (even if empty).\n /// Returns false if not found (UV_ENOENT) or other failure.\n-bool os_env_exists(const char *name)\n+///\n+/// @param name the environment variable in question\n+/// @param nonempty whether the variable has a valid value, or may be empty\n+/// @return whether the variable exists (and is defined)",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2041950899",
            "id": 2041950899,
            "line": 128,
            "node_id": "PRRC_kwDOAPphoM55tbKz",
            "original_commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "original_line": 128,
            "original_position": 83,
            "original_start_line": null,
            "path": "src/nvim/os/env.c",
            "position": 83,
            "pull_request_review_id": 2764020452,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2041950899/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-14T11:31:29Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2041950899",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2041955780"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2041955780"
                }
            },
            "author_association": "MEMBER",
            "body": "description is ambiguous, let's say more clearly what is *activated* by setting this param:\r\n\r\n```suggestion\r\n/// @param nonempty Require a non-empty value. Treat empty as \"does not exist\".\r\n```",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-04-14T11:31:06Z",
            "diff_hunk": "@@ -96,32 +83,65 @@ const char *os_getenv(const char *name)\n     // except when it does not include the NUL-terminator.\n     e = xmemdupz(buf, size);\n   }\n-  pmap_put(cstr_t)(&envmap, xstrdup(name), e);\n end:\n   if (r != 0 && r != UV_ENOENT && r != UV_UNKNOWN) {\n     ELOG(\"uv_os_getenv(%s) failed: %d %s\", name, r, uv_err_name(r));\n   }\n   return e;\n }\n \n+/// Like getenv(), but returns a pointer to `NameBuff` instead of allocating.\n+/// Value is truncated if it exceeds sizeof(NameBuff).\n+/// @see os_env_exists\n+char *os_getenv_noalloc(const char *name)\n+  FUNC_ATTR_NONNULL_ALL\n+{\n+  if (name[0] == NUL) {\n+    return NULL;\n+  }\n+\n+  size_t size = sizeof(NameBuff);\n+  int r = uv_os_getenv(name, NameBuff, &size);\n+  if (r == UV_ENOBUFS) {\n+    char *e = xmalloc(size);\n+    r = uv_os_getenv(name, e, &size);\n+    if (r == 0 && size != 0 && e[0] != NUL) {\n+      xmemcpyz(NameBuff, e, sizeof(NameBuff) - 1);\n+    }\n+    xfree(e);\n+  }\n+\n+  if (r != 0 || size == 0 || NameBuff[0] == NUL) {\n+    if (r != 0 && r != UV_ENOENT && r != UV_UNKNOWN) {\n+      ELOG(\"uv_os_getenv(%s) failed: %d %s\", name, r, uv_err_name(r));\n+    }\n+    return NULL;\n+  }\n+  return NameBuff;\n+}\n+\n /// Returns true if environment variable `name` is defined (even if empty).\n /// Returns false if not found (UV_ENOENT) or other failure.\n-bool os_env_exists(const char *name)\n+///\n+/// @param name the environment variable in question\n+/// @param nonempty whether the variable has a valid value, or may be empty",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2041955780",
            "id": 2041955780,
            "line": 127,
            "node_id": "PRRC_kwDOAPphoM55tcXE",
            "original_commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "original_line": 127,
            "original_position": 82,
            "original_start_line": null,
            "path": "src/nvim/os/env.c",
            "position": 82,
            "pull_request_review_id": 2764028318,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2041955780/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-14T11:31:06Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2041955780",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2041963643"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2041963643"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n  (void)get_appname(true);  // Writes appname to NameBuf.\r\n```",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-04-14T11:37:01Z",
            "diff_hunk": "@@ -120,12 +120,12 @@ char *server_address_new(const char *name)\n   static uint32_t count = 0;\n   char fmt[ADDRESS_MAX_SIZE];\n #ifdef MSWIN\n-  (void)get_appname(true);\n+  (void)get_appname(true);    // Call to initialize NameBuf with appname",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2041963643",
            "id": 2041963643,
            "line": 123,
            "node_id": "PRRC_kwDOAPphoM55teR7",
            "original_commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "original_line": 123,
            "original_position": 60,
            "original_start_line": null,
            "path": "src/nvim/msgpack_rpc/server.c",
            "position": 60,
            "pull_request_review_id": 2764041480,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2041963643/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-14T11:37:01Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2041963643",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2041963878"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2041963878"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n  (void)get_appname(true);  // Writes appname to NameBuf.\r\n```",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-04-14T11:37:12Z",
            "diff_hunk": "@@ -120,12 +120,12 @@ char *server_address_new(const char *name)\n   static uint32_t count = 0;\n   char fmt[ADDRESS_MAX_SIZE];\n #ifdef MSWIN\n-  (void)get_appname(true);\n+  (void)get_appname(true);    // Call to initialize NameBuf with appname\n   int r = snprintf(fmt, sizeof(fmt), \"\\\\\\\\.\\\\pipe\\\\%s.%\" PRIu64 \".%\" PRIu32,\n                    name ? name : NameBuff, os_get_pid(), count++);\n #else\n   char *dir = stdpaths_get_xdg_var(kXDGRuntimeDir);\n-  (void)get_appname(true);\n+  (void)get_appname(true);    // Call to initialize NameBuf with appname",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2041963878",
            "id": 2041963878,
            "line": 128,
            "node_id": "PRRC_kwDOAPphoM55teVm",
            "original_commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "original_line": 128,
            "original_position": 66,
            "original_start_line": null,
            "path": "src/nvim/msgpack_rpc/server.c",
            "position": 66,
            "pull_request_review_id": 2764041864,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2041963878/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-14T11:37:12Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2041963878",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2041970833"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2041970833"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n  char *p = os_getenv_noalloc(\"LC_ALL\");\r\n```",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-04-14T11:42:20Z",
            "diff_hunk": "@@ -79,17 +80,18 @@ static char *get_mess_env(void)\n #ifdef LC_MESSAGES\n   return get_locale_val(LC_MESSAGES);\n #else\n-  char *p = (char *)os_getenv(\"LC_ALL\");\n+  char *p;\n+  p = os_getenv_noalloc(\"LC_ALL\");",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2041970833",
            "id": 2041970833,
            "line": 84,
            "node_id": "PRRC_kwDOAPphoM55tgCR",
            "original_commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "original_line": 84,
            "original_position": 14,
            "original_start_line": 83,
            "path": "src/nvim/os/lang.c",
            "position": 14,
            "pull_request_review_id": 2764053159,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2041970833/reactions"
            },
            "side": "RIGHT",
            "start_line": 83,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-04-14T11:42:20Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2041970833",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2041973882"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2041973882"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n/// Like getenv(), but returns a pointer to `NameBuff` instead of allocating, or NULL on failure.\r\n```",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-04-14T11:44:26Z",
            "diff_hunk": "@@ -96,32 +83,65 @@ const char *os_getenv(const char *name)\n     // except when it does not include the NUL-terminator.\n     e = xmemdupz(buf, size);\n   }\n-  pmap_put(cstr_t)(&envmap, xstrdup(name), e);\n end:\n   if (r != 0 && r != UV_ENOENT && r != UV_UNKNOWN) {\n     ELOG(\"uv_os_getenv(%s) failed: %d %s\", name, r, uv_err_name(r));\n   }\n   return e;\n }\n \n+/// Like getenv(), but returns a pointer to `NameBuff` instead of allocating.",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2041973882",
            "id": 2041973882,
            "line": 93,
            "node_id": "PRRC_kwDOAPphoM55tgx6",
            "original_commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "original_line": 93,
            "original_position": 47,
            "original_start_line": null,
            "path": "src/nvim/os/env.c",
            "position": 47,
            "pull_request_review_id": 2764061306,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2041973882/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-14T11:44:26Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2041973882",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2041981951"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2041981951"
                }
            },
            "author_association": "MEMBER",
            "body": "could use `_noalloc` since `sscanf` doesn't use NameBuf, but maybe that's too clever.",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-04-14T11:49:55Z",
            "diff_hunk": "@@ -1781,10 +1792,12 @@ void tui_guess_size(TUIData *tui)\n \n   // 2 - use $LINES/$COLUMNS if available\n   const char *val;\n+  lines = os_getenv(\"LINES\");\n+  columns = os_getenv(\"COLUMNS\");\n   int advance;\n-  if ((val = os_getenv(\"LINES\"))\n+  if ((val = lines)\n       && sscanf(val, \"%d%n\", &height, &advance) != EOF && advance\n-      && (val = os_getenv(\"COLUMNS\"))\n+      && (val = columns)\n       && sscanf(val, \"%d%n\", &width, &advance) != EOF && advance) {",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2041981951",
            "id": 2041981951,
            "line": 1801,
            "node_id": "PRRC_kwDOAPphoM55tiv_",
            "original_commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "original_line": 1801,
            "original_position": 78,
            "original_start_line": 1785,
            "path": "src/nvim/tui/tui.c",
            "position": 78,
            "pull_request_review_id": 2764075940,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2041981951/reactions"
            },
            "side": "RIGHT",
            "start_line": 1785,
            "start_side": "LEFT",
            "subject_type": "line",
            "updated_at": "2025-04-14T11:49:56Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2041981951",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2041984327"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2041984327"
                }
            },
            "author_association": "MEMBER",
            "body": "should require nonempty here",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-04-14T11:51:35Z",
            "diff_hunk": "@@ -63,7 +63,7 @@ uint64_t ui_client_start_server(int argc, char **argv)\n \n #ifdef MSWIN\n   // TODO(justinmk): detach breaks `tt.setup_child_nvim` tests on Windows?\n-  bool detach = os_env_exists(\"__NVIM_DETACH\");\n+  bool detach = os_env_exists(\"__NVIM_DETACH\", false);",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2041984327",
            "id": 2041984327,
            "line": 66,
            "node_id": "PRRC_kwDOAPphoM55tjVH",
            "original_commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "original_line": 66,
            "original_position": 5,
            "original_start_line": null,
            "path": "src/nvim/ui_client.c",
            "position": 5,
            "pull_request_review_id": 2764079576,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2041984327/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-14T11:51:35Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2041984327",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2041984657"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2041984657"
                }
            },
            "author_association": "MEMBER",
            "body": "require nonempty",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-04-14T11:51:49Z",
            "diff_hunk": "@@ -172,7 +172,7 @@ void ui_client_run(bool remote_ui)\n   ui_client_attach(width, height, term, rgb);\n \n   // TODO(justinmk): this is for log_spec. Can remove this after nvim_log #7062 is merged.\n-  if (os_env_exists(\"__NVIM_TEST_LOG\")) {\n+  if (os_env_exists(\"__NVIM_TEST_LOG\", false)) {",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2041984657",
            "id": 2041984657,
            "line": 175,
            "node_id": "PRRC_kwDOAPphoM55tjaR",
            "original_commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "original_line": 175,
            "original_position": 14,
            "original_start_line": null,
            "path": "src/nvim/ui_client.c",
            "position": 14,
            "pull_request_review_id": 2764080084,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2041984657/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-14T11:51:49Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2041984657",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32683#discussion_r2041985273"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32683"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2041985273"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n  local function os_env_exists(name, nonempty)\r\n    return cimp.os_env_exists(to_cstr(name), nonempty)\r\n```",
            "commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "created_at": "2025-04-14T11:52:16Z",
            "diff_hunk": "@@ -13,8 +13,8 @@ local OK = 0\n local cimp = cimport('./src/nvim/os/os.h')\n \n describe('env.c', function()\n-  local function os_env_exists(name)\n-    return cimp.os_env_exists(to_cstr(name))\n+  local function os_env_exists(name, defined)\n+    return cimp.os_env_exists(to_cstr(name), defined)",
            "html_url": "https://github.com/neovim/neovim/pull/32683#discussion_r2041985273",
            "id": 2041985273,
            "line": 17,
            "node_id": "PRRC_kwDOAPphoM55tjj5",
            "original_commit_id": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
            "original_line": 17,
            "original_position": 7,
            "original_start_line": 16,
            "path": "test/unit/os/env_spec.lua",
            "position": 7,
            "pull_request_review_id": 2764081069,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2041985273/reactions"
            },
            "side": "RIGHT",
            "start_line": 16,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-04-14T11:52:16Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2041985273",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        }
    ],
    "comment_regular_data": [
        {
            "author_association": "CONTRIBUTOR",
            "body": "@justinmk Thanks for noticing my contribution here :-) \r\nMay I ask, what does the \"needs:response\" label stand for? I couldn't find a question (this PR, referred issue, etc.) but I wonder if it may have potential further meaning? Thx in advance.",
            "created_at": "2025-03-04T16:28:53Z",
            "html_url": "https://github.com/neovim/neovim/pull/32683#issuecomment-2698247730",
            "id": 2698247730,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32683",
            "node_id": "IC_kwDOAPphoM6g0_4y",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2698247730/reactions"
            },
            "updated_at": "2025-03-04T16:28:53Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2698247730",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "@justinmk Thanks very much for the review.\r\n\r\nI had a question while working on this code. Isn't it an \"overkill\" to add the amount of (sensitive) changes to fix an --after all-- small issue? In case your judgement is to rather have this change, I'm more than happy to polish it to perfect :-)\r\n(I'm actively working on tracking down the issue of the windows pipeline.)\r\n\r\n\r\n\r\n",
            "created_at": "2025-03-10T18:52:52Z",
            "html_url": "https://github.com/neovim/neovim/pull/32683#issuecomment-2711531343",
            "id": 2711531343,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32683",
            "node_id": "IC_kwDOAPphoM6hnq9P",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2711531343/reactions"
            },
            "updated_at": "2025-03-10T18:52:52Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2711531343",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> Isn't it an \"overkill\" to add the amount of (sensitive) changes to fix an --after all-- small issue?\r\n\r\nI wouldn't say https://github.com/neovim/neovim/issues/32550 is a small issue. It's pointing to a bug I had worried about, and could affect other libraries loaded by nvim.\r\n\r\n`envmap` was never really a good solution, and I'm glad you are finally getting rid of it :) It's true that this work is delicate and will require careful review, but we don't really have an alternative.\r\n\r\nI think `memfree` can be avoided in some of these cases. Also, if there are many cases that only want to quickly check the result of `os_getenv`, we could add `os_getenv_noalloc` which writes to `NameBuff` (and returns a pointer to it), to save the caller the trouble of freeing the result.\r\n",
            "created_at": "2025-03-10T22:05:14Z",
            "html_url": "https://github.com/neovim/neovim/pull/32683#issuecomment-2711951176",
            "id": 2711951176,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32683",
            "node_id": "IC_kwDOAPphoM6hpRdI",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2711951176/reactions"
            },
            "updated_at": "2025-03-10T22:05:14Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2711951176",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "@justinmk Thank you very much for additional suggestions and most importantly the confirmation of the value of this work.\r\nI'm very glad it's useful :-)  \r\nAlso thanks for the foreseen particularly careful review -- keeps me re-assured :-)\r\n\r\nI carry on accordingly, evaluating cases for a potential `os_getenv_noalloc`. Thx very much :-) ",
            "created_at": "2025-03-11T08:58:46Z",
            "html_url": "https://github.com/neovim/neovim/pull/32683#issuecomment-2713219194",
            "id": 2713219194,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32683",
            "node_id": "IC_kwDOAPphoM6huHB6",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 1,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2713219194/reactions"
            },
            "updated_at": "2025-03-11T08:58:46Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2713219194",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Simple changes are applied, pipelines are :green_circle: :tada: \r\n\r\nMaking an attempt for `os_getenv_noalloc` in an upcoming commit.",
            "created_at": "2025-03-11T17:39:10Z",
            "html_url": "https://github.com/neovim/neovim/pull/32683#issuecomment-2715187280",
            "id": 2715187280,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32683",
            "node_id": "IC_kwDOAPphoM6h1nhQ",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2715187280/reactions"
            },
            "updated_at": "2025-03-11T17:39:10Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2715187280",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "@zeertzjq Thanks for your response. `os_env_exists` uses cool trick :-) \r\nBut I'm a bit confused, how to benefit from a similar approach here. Would you suggest to use `uv_os_getenv()` to retrieve the value to `NameBuff` directly? (I apologize if I'm overlooking something obvious...)\r\n\r\n",
            "created_at": "2025-03-12T09:39:12Z",
            "html_url": "https://github.com/neovim/neovim/pull/32683#issuecomment-2717252307",
            "id": 2717252307,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32683",
            "node_id": "IC_kwDOAPphoM6h9frT",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2717252307/reactions"
            },
            "updated_at": "2025-03-12T09:39:12Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2717252307",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "No, I mean there are some cases where the caller only needs to check if an environment variable is empty. In such cases an allocation can be avoided, as they don't actually need to use the string, and can use a boolean value instead.",
            "created_at": "2025-03-12T09:50:35Z",
            "html_url": "https://github.com/neovim/neovim/pull/32683#issuecomment-2717289801",
            "id": 2717289801,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32683",
            "node_id": "IC_kwDOAPphoM6h9o1J",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2717289801/reactions"
            },
            "updated_at": "2025-03-12T09:51:02Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2717289801",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I see your point, but I can't map that usage to the case in question. The actual value of `NVIM_APPNAME` seems to be used in all cases (potentially slightly transformed). \r\n\r\nCase 1: Direct return value\r\n```\r\nconst char *appname = get_appname(false)\r\n```\r\n\r\nCase 2: Using the (slightly transformed) value loaded to `NameBuff` (`src/nvim/os/stdpaths.c`)\r\n```\r\n(void *)get_appname(true);   // Loading NVIM_APPNAME to NameBuff\r\nint r = snprintf(..., name ? name : NameBuff, ...)\r\n```\r\n\r\nI'm not sure how an existence check may come useful :-(   (Pls let me know if I'm on a wrong track.)",
            "created_at": "2025-03-12T10:04:01Z",
            "html_url": "https://github.com/neovim/neovim/pull/32683#issuecomment-2717324422",
            "id": 2717324422,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32683",
            "node_id": "IC_kwDOAPphoM6h9xSG",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2717324422/reactions"
            },
            "updated_at": "2025-03-12T10:04:01Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2717324422",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I was talking about `vim_mktempdir()` etc.",
            "created_at": "2025-03-12T10:40:59Z",
            "html_url": "https://github.com/neovim/neovim/pull/32683#issuecomment-2717432464",
            "id": 2717432464,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32683",
            "node_id": "IC_kwDOAPphoM6h-LqQ",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2717432464/reactions"
            },
            "updated_at": "2025-03-12T10:40:59Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2717432464",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "@zeertzjq Thanks for the clarification, now your message is clear. (The context was confusing, I thought the suggestion was targeting [this issue](https://github.com/neovim/neovim/pull/32683#discussion_r1989856185).)\r\n\r\nThe existence check only appears on a few occasions, yet I agree that an `os_env_defined()` (similar to `os_env_exists()`) could increase clarity and avoid memory allocation. I'm adding it with in the next round. Thanks.",
            "created_at": "2025-03-12T10:59:10Z",
            "html_url": "https://github.com/neovim/neovim/pull/32683#issuecomment-2717479192",
            "id": 2717479192,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32683",
            "node_id": "IC_kwDOAPphoM6h-XEY",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2717479192/reactions"
            },
            "updated_at": "2025-03-12T10:59:10Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2717479192",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "In order to keep individually fully functional stages separate, I've left this PR as a fully \"polished\" version of `os_getenv()` usage on each occasion.\r\n\r\nI'm introducting the code with `os_env_defined()` (suggested by @zeertzjq ) and `os_getenv_noalloc()` (suggested by @justinmk ) in [PR II.](https://github.com/juditnovak/neovim/pull/1), demonstrating the transition the code discussed here. (Of course, to be added here at the end, and merged to `master` as a single change.)",
            "created_at": "2025-03-14T16:12:42Z",
            "html_url": "https://github.com/neovim/neovim/pull/32683#issuecomment-2725148404",
            "id": 2725148404,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32683",
            "node_id": "IC_kwDOAPphoM6ibnb0",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2725148404/reactions"
            },
            "updated_at": "2025-03-14T17:02:11Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2725148404",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Added changes from [PR II.](https://github.com/juditnovak/neovim/pull/1), including fixes for comments:\r\n - @zeertzjq:\r\n  - https://github.com/juditnovak/neovim/pull/1#discussion_r1996402380\r\n  - https://github.com/juditnovak/neovim/pull/1#discussion_r1996402865\r\n - @justinmk:\r\n  - https://github.com/juditnovak/neovim/pull/1#discussion_r1996825716 ",
            "created_at": "2025-03-17T00:18:56Z",
            "html_url": "https://github.com/neovim/neovim/pull/32683#issuecomment-2727742433",
            "id": 2727742433,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32683",
            "node_id": "IC_kwDOAPphoM6ilgvh",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2727742433/reactions"
            },
            "updated_at": "2025-03-17T00:18:56Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2727742433",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "NOTE: All commits will be squashed into the first commit (that has the correct, linted structure) once the review process is over. Until then lintcommit pipeline errors could be ignored.",
            "created_at": "2025-03-26T11:19:46Z",
            "html_url": "https://github.com/neovim/neovim/pull/32683#issuecomment-2754065373",
            "id": 2754065373,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32683",
            "node_id": "IC_kwDOAPphoM6kJ7Pd",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2754065373/reactions"
            },
            "updated_at": "2025-03-26T11:20:11Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2754065373",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Requests completed + added a few more simplifications and tests.",
            "created_at": "2025-04-01T19:41:04Z",
            "html_url": "https://github.com/neovim/neovim/pull/32683#issuecomment-2770508696",
            "id": 2770508696,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32683",
            "node_id": "IC_kwDOAPphoM6lIpuY",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2770508696/reactions"
            },
            "updated_at": "2025-04-01T19:41:04Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2770508696",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "(Once final, I'd squash all commits into the 1st one, that already has the correct commit message format, so it would be prepared for merge to `master`.)",
            "created_at": "2025-04-01T19:41:57Z",
            "html_url": "https://github.com/neovim/neovim/pull/32683#issuecomment-2770510609",
            "id": 2770510609,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32683",
            "node_id": "IC_kwDOAPphoM6lIqMR",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2770510609/reactions"
            },
            "updated_at": "2025-04-01T19:43:18Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2770510609",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Could you pls suggest if the test failure I see after the latest rebase is a known flaky behaviour of the tests? I tried to reproduce both locally and on [GH pipelines](https://github.com/juditnovak/neovim/actions/runs/14215072803). Thanks.",
            "created_at": "2025-04-02T14:03:18Z",
            "html_url": "https://github.com/neovim/neovim/pull/32683#issuecomment-2772670069",
            "id": 2772670069,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32683",
            "node_id": "IC_kwDOAPphoM6lQ5Z1",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2772670069/reactions"
            },
            "updated_at": "2025-04-02T14:03:18Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2772670069",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Yes",
            "created_at": "2025-04-02T14:07:27Z",
            "html_url": "https://github.com/neovim/neovim/pull/32683#issuecomment-2772684092",
            "id": 2772684092,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32683",
            "node_id": "IC_kwDOAPphoM6lQ808",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2772684092/reactions"
            },
            "updated_at": "2025-04-02T14:07:27Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2772684092",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Re-base to latest `master` (no code changes).",
            "created_at": "2025-04-07T09:49:20Z",
            "html_url": "https://github.com/neovim/neovim/pull/32683#issuecomment-2782744107",
            "id": 2782744107,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32683",
            "node_id": "IC_kwDOAPphoM6l3U4r",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2782744107/reactions"
            },
            "updated_at": "2025-04-07T09:49:20Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2782744107",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "@justinmk @zeertzjq Are there any outstanding actions on my side? Please let me know in case I may be missing something...\r\n(No pressure in case it's for you to take action. I just wanted to double-check if I may be blocking progress :-) )",
            "created_at": "2025-04-08T20:01:54Z",
            "html_url": "https://github.com/neovim/neovim/pull/32683#issuecomment-2787532379",
            "id": 2787532379,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32683",
            "node_id": "IC_kwDOAPphoM6mJl5b",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2787532379/reactions"
            },
            "updated_at": "2025-04-08T20:01:54Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2787532379",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Maybe we should also have a test for `vim.uv.os_unsetenv` (the repro steps from https://github.com/neovim/neovim/issues/32550 ) in `test/functional/` (not `test/unit/`)? May need a new `test/functional/core/env_spec.lua` file.",
            "created_at": "2025-04-14T14:48:35Z",
            "html_url": "https://github.com/neovim/neovim/pull/32683#issuecomment-2801974785",
            "id": 2801974785,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32683",
            "node_id": "IC_kwDOAPphoM6nAr4B",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2801974785/reactions"
            },
            "updated_at": "2025-04-14T14:48:35Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2801974785",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        }
    ],
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/32683/comments",
    "commits_url": "https://api.github.com/repos/neovim/neovim/pulls/32683/commits",
    "created_at": "2025-02-28T23:38:34Z",
    "diff_url": "https://github.com/neovim/neovim/pull/32683.diff",
    "draft": false,
    "head": {
        "label": "juditnovak:bugfix/setenv",
        "ref": "bugfix/setenv",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/juditnovak/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/juditnovak/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/juditnovak/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/juditnovak/neovim/branches{/branch}",
            "clone_url": "https://github.com/juditnovak/neovim.git",
            "collaborators_url": "https://api.github.com/repos/juditnovak/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/juditnovak/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/juditnovak/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/juditnovak/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/juditnovak/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/juditnovak/neovim/contributors",
            "created_at": "2025-01-25T12:14:45Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/juditnovak/neovim/deployments",
            "description": "Vim-fork focused on extensibility and usability",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/juditnovak/neovim/downloads",
            "events_url": "https://api.github.com/repos/juditnovak/neovim/events",
            "fork": true,
            "forks": 0,
            "forks_count": 0,
            "forks_url": "https://api.github.com/repos/juditnovak/neovim/forks",
            "full_name": "juditnovak/neovim",
            "git_commits_url": "https://api.github.com/repos/juditnovak/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/juditnovak/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/juditnovak/neovim/git/tags{/sha}",
            "git_url": "git://github.com/juditnovak/neovim.git",
            "has_discussions": false,
            "has_downloads": true,
            "has_issues": false,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://neovim.io",
            "hooks_url": "https://api.github.com/repos/juditnovak/neovim/hooks",
            "html_url": "https://github.com/juditnovak/neovim",
            "id": 922135693,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/juditnovak/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/juditnovak/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/juditnovak/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/juditnovak/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/juditnovak/neovim/labels{/name}",
            "language": "Vim Script",
            "languages_url": "https://api.github.com/repos/juditnovak/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/juditnovak/neovim/merges",
            "milestones_url": "https://api.github.com/repos/juditnovak/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "R_kgDONvasjQ",
            "notifications_url": "https://api.github.com/repos/juditnovak/neovim/notifications{?since,all,participating}",
            "open_issues": 0,
            "open_issues_count": 0,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
                "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
                "followers_url": "https://api.github.com/users/juditnovak/followers",
                "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
                "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/juditnovak",
                "id": 3271248,
                "login": "juditnovak",
                "node_id": "MDQ6VXNlcjMyNzEyNDg=",
                "organizations_url": "https://api.github.com/users/juditnovak/orgs",
                "received_events_url": "https://api.github.com/users/juditnovak/received_events",
                "repos_url": "https://api.github.com/users/juditnovak/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/juditnovak",
                "user_view_type": "public"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/juditnovak/neovim/pulls{/number}",
            "pushed_at": "2025-04-11T10:08:19Z",
            "releases_url": "https://api.github.com/repos/juditnovak/neovim/releases{/id}",
            "size": 316387,
            "ssh_url": "git@github.com:juditnovak/neovim.git",
            "stargazers_count": 1,
            "stargazers_url": "https://api.github.com/repos/juditnovak/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/juditnovak/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/juditnovak/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/juditnovak/neovim/subscription",
            "svn_url": "https://github.com/juditnovak/neovim",
            "tags_url": "https://api.github.com/repos/juditnovak/neovim/tags",
            "teams_url": "https://api.github.com/repos/juditnovak/neovim/teams",
            "topics": [],
            "trees_url": "https://api.github.com/repos/juditnovak/neovim/git/trees{/sha}",
            "updated_at": "2025-04-11T10:08:25Z",
            "url": "https://api.github.com/repos/juditnovak/neovim",
            "visibility": "public",
            "watchers": 1,
            "watchers_count": 1,
            "web_commit_signoff_required": false
        },
        "sha": "1e7c097882f91fefc3be2a68b18c3f79f78c1231",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
            "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
            "followers_url": "https://api.github.com/users/juditnovak/followers",
            "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
            "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/juditnovak",
            "id": 3271248,
            "login": "juditnovak",
            "node_id": "MDQ6VXNlcjMyNzEyNDg=",
            "organizations_url": "https://api.github.com/users/juditnovak/orgs",
            "received_events_url": "https://api.github.com/users/juditnovak/received_events",
            "repos_url": "https://api.github.com/users/juditnovak/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/juditnovak",
            "user_view_type": "public"
        }
    },
    "html_url": "https://github.com/neovim/neovim/pull/32683",
    "id": 2365546744,
    "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32683",
    "labels": [],
    "locked": false,
    "merge_commit_sha": "1267cbc7d9aa67548f3213c8283c112f9efe62e4",
    "merged_at": null,
    "milestone": {
        "closed_at": null,
        "closed_issues": 17,
        "created_at": "2024-05-16T14:11:54Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
            "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
            "followers_url": "https://api.github.com/users/justinmk/followers",
            "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/justinmk",
            "id": 1359421,
            "login": "justinmk",
            "node_id": "MDQ6VXNlcjEzNTk0MjE=",
            "organizations_url": "https://api.github.com/users/justinmk/orgs",
            "received_events_url": "https://api.github.com/users/justinmk/received_events",
            "repos_url": "https://api.github.com/users/justinmk/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/justinmk",
            "user_view_type": "public"
        },
        "description": "",
        "due_on": null,
        "html_url": "https://github.com/neovim/neovim/milestone/43",
        "id": 11063573,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/43/labels",
        "node_id": "MI_kwDOAPphoM4AqNEV",
        "number": 43,
        "open_issues": 70,
        "state": "open",
        "title": "0.12",
        "updated_at": "2025-04-13T21:22:19Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/43"
    },
    "node_id": "PR_kwDOAPphoM6M_2D4",
    "number": 32683,
    "patch_url": "https://github.com/neovim/neovim/pull/32683.patch",
    "requested_reviewers": [],
    "requested_teams": [],
    "review_comment_url": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}",
    "review_comments_url": "https://api.github.com/repos/neovim/neovim/pulls/32683/comments",
    "state": "open",
    "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/1e7c097882f91fefc3be2a68b18c3f79f78c1231",
    "title": "fix(env.c): drop envmap, callers must free os_getenv() result",
    "updated_at": "2025-04-14T14:48:36Z",
    "url": "https://api.github.com/repos/neovim/neovim/pulls/32683",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/3271248?v=4",
        "events_url": "https://api.github.com/users/juditnovak/events{/privacy}",
        "followers_url": "https://api.github.com/users/juditnovak/followers",
        "following_url": "https://api.github.com/users/juditnovak/following{/other_user}",
        "gists_url": "https://api.github.com/users/juditnovak/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/juditnovak",
        "id": 3271248,
        "login": "juditnovak",
        "node_id": "MDQ6VXNlcjMyNzEyNDg=",
        "organizations_url": "https://api.github.com/users/juditnovak/orgs",
        "received_events_url": "https://api.github.com/users/juditnovak/received_events",
        "repos_url": "https://api.github.com/users/juditnovak/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/juditnovak/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/juditnovak/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/juditnovak",
        "user_view_type": "public"
    }
}