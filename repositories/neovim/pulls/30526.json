{
    "_links": {
        "comments": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/30526/comments"
        },
        "commits": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/30526/commits"
        },
        "html": {
            "href": "https://github.com/neovim/neovim/pull/30526"
        },
        "issue": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/30526"
        },
        "review_comment": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}"
        },
        "review_comments": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/30526/comments"
        },
        "self": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/30526"
        },
        "statuses": {
            "href": "https://api.github.com/repos/neovim/neovim/statuses/0fb5299e53cc0d7a5c03c333b1ed79262a0db3f9"
        }
    },
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "MEMBER",
    "auto_merge": {
        "commit_message": "",
        "commit_title": "Merge pull request #30526 from lewis6991/fix/linematchnul",
        "enabled_by": {
            "avatar_url": "https://avatars.githubusercontent.com/u/7904185?v=4",
            "events_url": "https://api.github.com/users/lewis6991/events{/privacy}",
            "followers_url": "https://api.github.com/users/lewis6991/followers",
            "following_url": "https://api.github.com/users/lewis6991/following{/other_user}",
            "gists_url": "https://api.github.com/users/lewis6991/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/lewis6991",
            "id": 7904185,
            "login": "lewis6991",
            "node_id": "MDQ6VXNlcjc5MDQxODU=",
            "organizations_url": "https://api.github.com/users/lewis6991/orgs",
            "received_events_url": "https://api.github.com/users/lewis6991/received_events",
            "repos_url": "https://api.github.com/users/lewis6991/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/lewis6991/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/lewis6991/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/lewis6991",
            "user_view_type": "public"
        },
        "merge_method": "merge"
    },
    "base": {
        "label": "neovim:master",
        "ref": "master",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/neovim/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/neovim/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/neovim/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/neovim/neovim/branches{/branch}",
            "clone_url": "https://github.com/neovim/neovim.git",
            "collaborators_url": "https://api.github.com/repos/neovim/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/neovim/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/neovim/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/neovim/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/neovim/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/neovim/neovim/contributors",
            "created_at": "2014-01-31T13:39:22Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/neovim/neovim/deployments",
            "description": "Vim-fork focused on extensibility and usability",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/neovim/neovim/downloads",
            "events_url": "https://api.github.com/repos/neovim/neovim/events",
            "fork": false,
            "forks": 5841,
            "forks_count": 5841,
            "forks_url": "https://api.github.com/repos/neovim/neovim/forks",
            "full_name": "neovim/neovim",
            "git_commits_url": "https://api.github.com/repos/neovim/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/neovim/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/neovim/neovim/git/tags{/sha}",
            "git_url": "git://github.com/neovim/neovim.git",
            "has_discussions": true,
            "has_downloads": true,
            "has_issues": true,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://neovim.io",
            "hooks_url": "https://api.github.com/repos/neovim/neovim/hooks",
            "html_url": "https://github.com/neovim/neovim",
            "id": 16408992,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/neovim/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/neovim/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/neovim/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/neovim/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/neovim/neovim/labels{/name}",
            "language": "Vim Script",
            "languages_url": "https://api.github.com/repos/neovim/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/neovim/neovim/merges",
            "milestones_url": "https://api.github.com/repos/neovim/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "MDEwOlJlcG9zaXRvcnkxNjQwODk5Mg==",
            "notifications_url": "https://api.github.com/repos/neovim/neovim/notifications{?since,all,participating}",
            "open_issues": 1854,
            "open_issues_count": 1854,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
                "events_url": "https://api.github.com/users/neovim/events{/privacy}",
                "followers_url": "https://api.github.com/users/neovim/followers",
                "following_url": "https://api.github.com/users/neovim/following{/other_user}",
                "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/neovim",
                "id": 6471485,
                "login": "neovim",
                "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
                "organizations_url": "https://api.github.com/users/neovim/orgs",
                "received_events_url": "https://api.github.com/users/neovim/received_events",
                "repos_url": "https://api.github.com/users/neovim/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
                "type": "Organization",
                "url": "https://api.github.com/users/neovim",
                "user_view_type": "public"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/neovim/neovim/pulls{/number}",
            "pushed_at": "2025-02-04T02:07:35Z",
            "releases_url": "https://api.github.com/repos/neovim/neovim/releases{/id}",
            "size": 307298,
            "ssh_url": "git@github.com:neovim/neovim.git",
            "stargazers_count": 85859,
            "stargazers_url": "https://api.github.com/repos/neovim/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/neovim/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/neovim/neovim/subscription",
            "svn_url": "https://github.com/neovim/neovim",
            "tags_url": "https://api.github.com/repos/neovim/neovim/tags",
            "teams_url": "https://api.github.com/repos/neovim/neovim/teams",
            "topics": [
                "api",
                "c",
                "lua",
                "neovim",
                "nvim",
                "text-editor",
                "vim"
            ],
            "trees_url": "https://api.github.com/repos/neovim/neovim/git/trees{/sha}",
            "updated_at": "2025-02-04T02:07:39Z",
            "url": "https://api.github.com/repos/neovim/neovim",
            "visibility": "public",
            "watchers": 85859,
            "watchers_count": 85859,
            "web_commit_signoff_required": false
        },
        "sha": "20251be15a4ad3f6e7016450ca3338d52b2f0951",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
            "events_url": "https://api.github.com/users/neovim/events{/privacy}",
            "followers_url": "https://api.github.com/users/neovim/followers",
            "following_url": "https://api.github.com/users/neovim/following{/other_user}",
            "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/neovim",
            "id": 6471485,
            "login": "neovim",
            "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
            "organizations_url": "https://api.github.com/users/neovim/orgs",
            "received_events_url": "https://api.github.com/users/neovim/received_events",
            "repos_url": "https://api.github.com/users/neovim/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
            "type": "Organization",
            "url": "https://api.github.com/users/neovim",
            "user_view_type": "public"
        }
    },
    "body": "Problem:\r\n\r\nLinematch used to use strchr to navigate a string, however strchr does\r\nnot supoprt embedded NULs.\r\n\r\nSolution:\r\n\r\nUse `mmfile_t` instead of `char*` in linematch and introduce `strnchr()`.\r\n\r\nFixes: #30505\r\n",
    "closed_at": "2024-09-30T11:09:36Z",
    "comment_data": [
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/30526#discussion_r1777928643"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/30526"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1777928643"
                }
            },
            "author_association": "MEMBER",
            "body": "I don't think using `s->size` here is correct. This is processing the whole file when `matching_chars()` only compares one line.",
            "commit_id": "0fb5299e53cc0d7a5c03c333b1ed79262a0db3f9",
            "created_at": "2024-09-27T02:16:57Z",
            "diff_hunk": "@@ -29,44 +31,48 @@ struct diffcmppath_S {\n # include \"linematch.c.generated.h\"\n #endif\n \n-static size_t line_len(const char *s)\n+static size_t line_len(const mmfile_t *m)\n {\n-  char *end = strchr(s, '\\n');\n+  char *s = m->ptr;\n+  size_t n = (size_t)m->size;\n+  char *end = strnchr(s, &n, '\\n');\n   if (end) {\n     return (size_t)(end - s);\n   }\n-  return strlen(s);\n+  return (size_t)m->size;\n }\n \n /// Same as matching_chars but ignore whitespace\n ///\n /// @param s1\n /// @param s2\n-static int matching_chars_iwhite(const char *s1, const char *s2)\n+static int matching_chars_iwhite(const mmfile_t *s1, const mmfile_t *s2)\n {\n   // the newly processed strings that will be compared\n   // delete the white space characters, and/or replace all upper case with lower\n-  char *strsproc[2];\n-  const char *strsorig[2] = { s1, s2 };\n+  mmfile_t strsproc[2];\n   for (int k = 0; k < 2; k++) {\n-    size_t d = 0;\n-    size_t i = 0;\n-    size_t slen = line_len(strsorig[k]);\n-    strsproc[k] = xmalloc((slen + 1) * sizeof(char));\n-    while (d + i < slen) {\n-      char e = strsorig[k][i + d];\n+    const mmfile_t *s = k == 0 ? s1 : s2;\n+    int d = 0;\n+    int i = 0;\n+    strsproc[k] = (mmfile_t){\n+      .ptr = xmalloc((size_t)(s->size + 1) * sizeof(char)),\n+      .size = s->size\n+    };\n+    while (d + i < s->size) {",
            "html_url": "https://github.com/neovim/neovim/pull/30526#discussion_r1777928643",
            "id": 1777928643,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5p-QnD",
            "original_commit_id": "2fb39be290af165d9144769480e17b808b949f4e",
            "original_line": 62,
            "original_position": 53,
            "original_start_line": 60,
            "path": "src/nvim/linematch.c",
            "position": null,
            "pull_request_review_id": 2332626806,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/30526",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1777928643/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2024-09-27T02:16:57Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1777928643",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/30526#discussion_r1780016774"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/30526"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1780016774"
                }
            },
            "author_association": "MEMBER",
            "body": "no need for `register` annotation on variables.",
            "commit_id": "0fb5299e53cc0d7a5c03c333b1ed79262a0db3f9",
            "created_at": "2024-09-29T11:06:40Z",
            "diff_hunk": "@@ -496,6 +496,20 @@ char *vim_strchr(const char *const string, const int c)\n   }\n }\n \n+// Sized version of strchr that can handle embedded NULs.\n+// Adjusts n to the new size.\n+char *strnchr(register const char *p, size_t *n, int c)",
            "html_url": "https://github.com/neovim/neovim/pull/30526#discussion_r1780016774",
            "id": 1780016774,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5qGOaG",
            "original_commit_id": "7ddc829deb86555abdf7572e9e3d6edd31e79869",
            "original_line": 501,
            "original_position": 6,
            "original_start_line": null,
            "path": "src/nvim/strings.c",
            "position": null,
            "pull_request_review_id": 2335827377,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/30526",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1780016774/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-09-29T11:06:40Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1780016774",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
                "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
                "followers_url": "https://api.github.com/users/bfredl/followers",
                "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
                "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bfredl",
                "id": 1363104,
                "login": "bfredl",
                "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
                "organizations_url": "https://api.github.com/users/bfredl/orgs",
                "received_events_url": "https://api.github.com/users/bfredl/received_events",
                "repos_url": "https://api.github.com/users/bfredl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bfredl",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/30526#discussion_r1780017806"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/30526"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1780017806"
                }
            },
            "author_association": "MEMBER",
            "body": "wouldn't `s.ptr++` be matched by `s.size--` ? or am I missing something?",
            "commit_id": "0fb5299e53cc0d7a5c03c333b1ed79262a0db3f9",
            "created_at": "2024-09-29T11:12:24Z",
            "diff_hunk": "@@ -143,15 +147,17 @@ static int count_n_matched_chars(const char **sp, const size_t n, bool iwhite)\n   return matched_chars;\n }\n \n-void fastforward_buf_to_lnum(const char **s, linenr_T lnum)\n+mmfile_t fastforward_buf_to_lnum(mmfile_t s, linenr_T lnum)\n {\n   for (int i = 0; i < lnum - 1; i++) {\n-    *s = strchr(*s, '\\n');\n-    if (!*s) {\n-      return;\n+    s.ptr = strnchr(s.ptr, (size_t *)&s.size, '\\n');\n+    if (!s.ptr) {\n+      break;\n     }\n-    (*s)++;\n+    s.ptr++;\n+    s.size++;",
            "html_url": "https://github.com/neovim/neovim/pull/30526#discussion_r1780017806",
            "id": 1780017806,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5qGOqO",
            "original_commit_id": "7ddc829deb86555abdf7572e9e3d6edd31e79869",
            "original_line": 158,
            "original_position": 136,
            "original_start_line": null,
            "path": "src/nvim/linematch.c",
            "position": null,
            "pull_request_review_id": 2335828386,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/30526",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1780017806/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-09-29T11:12:25Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1780017806",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
                "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
                "followers_url": "https://api.github.com/users/bfredl/followers",
                "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
                "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bfredl",
                "id": 1363104,
                "login": "bfredl",
                "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
                "organizations_url": "https://api.github.com/users/bfredl/orgs",
                "received_events_url": "https://api.github.com/users/bfredl/received_events",
                "repos_url": "https://api.github.com/users/bfredl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bfredl",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/30526#discussion_r1780018047"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/30526"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1780018047"
                }
            },
            "author_association": "MEMBER",
            "body": "Yes. Good spot. Obviously the test suite isn't exercising this.",
            "commit_id": "0fb5299e53cc0d7a5c03c333b1ed79262a0db3f9",
            "created_at": "2024-09-29T11:13:32Z",
            "diff_hunk": "@@ -143,15 +147,17 @@ static int count_n_matched_chars(const char **sp, const size_t n, bool iwhite)\n   return matched_chars;\n }\n \n-void fastforward_buf_to_lnum(const char **s, linenr_T lnum)\n+mmfile_t fastforward_buf_to_lnum(mmfile_t s, linenr_T lnum)\n {\n   for (int i = 0; i < lnum - 1; i++) {\n-    *s = strchr(*s, '\\n');\n-    if (!*s) {\n-      return;\n+    s.ptr = strnchr(s.ptr, (size_t *)&s.size, '\\n');\n+    if (!s.ptr) {\n+      break;\n     }\n-    (*s)++;\n+    s.ptr++;\n+    s.size++;",
            "html_url": "https://github.com/neovim/neovim/pull/30526#discussion_r1780018047",
            "id": 1780018047,
            "in_reply_to_id": 1780017806,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5qGOt_",
            "original_commit_id": "7ddc829deb86555abdf7572e9e3d6edd31e79869",
            "original_line": 158,
            "original_position": 136,
            "original_start_line": null,
            "path": "src/nvim/linematch.c",
            "position": null,
            "pull_request_review_id": 2335828626,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/30526",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1780018047/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-09-29T11:13:33Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1780018047",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/7904185?v=4",
                "events_url": "https://api.github.com/users/lewis6991/events{/privacy}",
                "followers_url": "https://api.github.com/users/lewis6991/followers",
                "following_url": "https://api.github.com/users/lewis6991/following{/other_user}",
                "gists_url": "https://api.github.com/users/lewis6991/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/lewis6991",
                "id": 7904185,
                "login": "lewis6991",
                "node_id": "MDQ6VXNlcjc5MDQxODU=",
                "organizations_url": "https://api.github.com/users/lewis6991/orgs",
                "received_events_url": "https://api.github.com/users/lewis6991/received_events",
                "repos_url": "https://api.github.com/users/lewis6991/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/lewis6991/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lewis6991/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/lewis6991",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/30526#discussion_r1780018184"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/30526"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1780018184"
                }
            },
            "author_association": "MEMBER",
            "body": "How come? I copied this from GCC's `strchr()` implementation, so if they think it's necessary, wouldn't it also be necessary here too?",
            "commit_id": "0fb5299e53cc0d7a5c03c333b1ed79262a0db3f9",
            "created_at": "2024-09-29T11:14:24Z",
            "diff_hunk": "@@ -496,6 +496,20 @@ char *vim_strchr(const char *const string, const int c)\n   }\n }\n \n+// Sized version of strchr that can handle embedded NULs.\n+// Adjusts n to the new size.\n+char *strnchr(register const char *p, size_t *n, int c)",
            "html_url": "https://github.com/neovim/neovim/pull/30526#discussion_r1780018184",
            "id": 1780018184,
            "in_reply_to_id": 1780016774,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5qGOwI",
            "original_commit_id": "7ddc829deb86555abdf7572e9e3d6edd31e79869",
            "original_line": 501,
            "original_position": 6,
            "original_start_line": null,
            "path": "src/nvim/strings.c",
            "position": null,
            "pull_request_review_id": 2335828799,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/30526",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1780018184/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-09-29T11:14:34Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1780018184",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/7904185?v=4",
                "events_url": "https://api.github.com/users/lewis6991/events{/privacy}",
                "followers_url": "https://api.github.com/users/lewis6991/followers",
                "following_url": "https://api.github.com/users/lewis6991/following{/other_user}",
                "gists_url": "https://api.github.com/users/lewis6991/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/lewis6991",
                "id": 7904185,
                "login": "lewis6991",
                "node_id": "MDQ6VXNlcjc5MDQxODU=",
                "organizations_url": "https://api.github.com/users/lewis6991/orgs",
                "received_events_url": "https://api.github.com/users/lewis6991/received_events",
                "repos_url": "https://api.github.com/users/lewis6991/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/lewis6991/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lewis6991/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/lewis6991",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/30526#discussion_r1780021808"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/30526"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1780021808"
                }
            },
            "author_association": "MEMBER",
            "body": "yes, and when we copy in code into our codebase we adjust it to follow _our_ conventions (which is based on what compilers _we_ support, etc). We don't use `register` annotations in general (because we trust the optimizer with that), and I don't think this function needs to be marked that it came originally from a codebase which uses them. ",
            "commit_id": "0fb5299e53cc0d7a5c03c333b1ed79262a0db3f9",
            "created_at": "2024-09-29T11:33:50Z",
            "diff_hunk": "@@ -496,6 +496,20 @@ char *vim_strchr(const char *const string, const int c)\n   }\n }\n \n+// Sized version of strchr that can handle embedded NULs.\n+// Adjusts n to the new size.\n+char *strnchr(register const char *p, size_t *n, int c)",
            "html_url": "https://github.com/neovim/neovim/pull/30526#discussion_r1780021808",
            "id": 1780021808,
            "in_reply_to_id": 1780016774,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5qGPow",
            "original_commit_id": "7ddc829deb86555abdf7572e9e3d6edd31e79869",
            "original_line": 501,
            "original_position": 6,
            "original_start_line": null,
            "path": "src/nvim/strings.c",
            "position": null,
            "pull_request_review_id": 2335832472,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/30526",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1780021808/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-09-29T11:33:51Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1780021808",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
                "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
                "followers_url": "https://api.github.com/users/bfredl/followers",
                "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
                "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bfredl",
                "id": 1363104,
                "login": "bfredl",
                "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
                "organizations_url": "https://api.github.com/users/bfredl/orgs",
                "received_events_url": "https://api.github.com/users/bfredl/received_events",
                "repos_url": "https://api.github.com/users/bfredl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bfredl",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/30526#discussion_r1780077657"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/30526"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1780077657"
                }
            },
            "author_association": "MEMBER",
            "body": "I compiled this with `gcc` and `clang`. `gcc` with `register` produces the least amount of code.\r\n\r\n<details>\r\n<summary>`gcc` (no `register`) - 28 instructions</summary>\r\n\r\n```\r\nd10083ff     \tsub\tsp, sp, #0x20\r\nf9000fe0     \tstr\tx0, [sp, #0x18]\r\nf9000be1     \tstr\tx1, [sp, #0x10]\r\nb9000fe2     \tstr\tw2, [sp, #0xc]\r\n14000011     \tb\t0x54 <ltmp0+0x54>\r\nf9400fe0     \tldr\tx0, [sp, #0x18]\r\n39c00000     \tldrsb\tw0, [x0]\r\n2a0003e1     \tmov\tw1, w0\r\nb9400fe0     \tldr\tw0, [sp, #0xc]\r\n6b01001f     \tcmp\tw0, w1\r\n54000061     \tb.ne\t0x34 <ltmp0+0x34>\r\nf9400fe0     \tldr\tx0, [sp, #0x18]\r\n1400000e     \tb\t0x68 <ltmp0+0x68>\r\nf9400fe0     \tldr\tx0, [sp, #0x18]\r\n91000400     \tadd\tx0, x0, #0x1\r\nf9000fe0     \tstr\tx0, [sp, #0x18]\r\nf9400be0     \tldr\tx0, [sp, #0x10]\r\nb9400000     \tldr\tw0, [x0]\r\n51000401     \tsub\tw1, w0, #0x1\r\nf9400be0     \tldr\tx0, [sp, #0x10]\r\nb9000001     \tstr\tw1, [x0]\r\nf9400be0     \tldr\tx0, [sp, #0x10]\r\nb9400000     \tldr\tw0, [x0]\r\n7100001f     \tcmp\tw0, #0x0\r\n54fffdac     \tb.gt\t0x14 <ltmp0+0x14>\r\nd2800000     \tmov\tx0, #0x0                ; =0\r\n910083ff     \tadd\tsp, sp, #0x20\r\nd65f03c0     \tret\r\n```\r\n</details>\r\n\r\n<details>\r\n<summary>`gcc` (with `register`) - 23 instructions</summary>\r\n\r\n```\r\nd10043ff     \tsub\tsp, sp, #0x10\r\nf90007e1     \tstr\tx1, [sp, #0x8]\r\nb90007e2     \tstr\tw2, [sp, #0x4]\r\n1400000d     \tb\t0x40 <ltmp0+0x40>\r\n39c00001     \tldrsb\tw1, [x0]\r\n2a0103e2     \tmov\tw2, w1\r\nb94007e1     \tldr\tw1, [sp, #0x4]\r\n6b02003f     \tcmp\tw1, w2\r\n54000041     \tb.ne\t0x28 <ltmp0+0x28>\r\n1400000c     \tb\t0x54 <ltmp0+0x54>\r\n91000400     \tadd\tx0, x0, #0x1\r\nf94007e1     \tldr\tx1, [sp, #0x8]\r\nb9400021     \tldr\tw1, [x1]\r\n51000422     \tsub\tw2, w1, #0x1\r\nf94007e1     \tldr\tx1, [sp, #0x8]\r\nb9000022     \tstr\tw2, [x1]\r\nf94007e1     \tldr\tx1, [sp, #0x8]\r\nb9400021     \tldr\tw1, [x1]\r\n7100003f     \tcmp\tw1, #0x0\r\n54fffe2c     \tb.gt\t0x10 <ltmp0+0x10>\r\nd2800000     \tmov\tx0, #0x0                ; =0\r\n910043ff     \tadd\tsp, sp, #0x10\r\nd65f03c0     \tret\r\n```\r\n</details>\r\n\r\n<details>\r\n<summary>`clang` (with and without `register`) - 34 instructions</summary>\r\n\r\n```\r\nd10083ff     \tsub\tsp, sp, #0x20\r\nf9000be0     \tstr\tx0, [sp, #0x10]\r\nf90007e1     \tstr\tx1, [sp, #0x8]\r\nb90007e2     \tstr\tw2, [sp, #0x4]\r\n14000001     \tb\t0x14 <ltmp0+0x14>\r\nf94007e8     \tldr\tx8, [sp, #0x8]\r\nb9400108     \tldr\tw8, [x8]\r\n71000108     \tsubs\tw8, w8, #0x0\r\n1a9fc7e8     \tcset\tw8, le\r\n37000288     \ttbnz\tw8, #0x0, 0x74 <ltmp0+0x74>\r\n14000001     \tb\t0x2c <ltmp0+0x2c>\r\nf9400be8     \tldr\tx8, [sp, #0x10]\r\n39c00108     \tldrsb\tw8, [x8]\r\nb94007e9     \tldr\tw9, [sp, #0x4]\r\n6b090108     \tsubs\tw8, w8, w9\r\n1a9f07e8     \tcset\tw8, ne\r\n370000a8     \ttbnz\tw8, #0x0, 0x54 <ltmp0+0x54>\r\n14000001     \tb\t0x48 <ltmp0+0x48>\r\nf9400be8     \tldr\tx8, [sp, #0x10]\r\nf9000fe8     \tstr\tx8, [sp, #0x18]\r\n1400000b     \tb\t0x7c <ltmp0+0x7c>\r\nf9400be8     \tldr\tx8, [sp, #0x10]\r\n91000508     \tadd\tx8, x8, #0x1\r\nf9000be8     \tstr\tx8, [sp, #0x10]\r\nf94007e9     \tldr\tx9, [sp, #0x8]\r\nb9400128     \tldr\tw8, [x9]\r\n71000508     \tsubs\tw8, w8, #0x1\r\nb9000128     \tstr\tw8, [x9]\r\n17ffffe9     \tb\t0x14 <ltmp0+0x14>\r\nf9000fff     \tstr\txzr, [sp, #0x18]\r\n14000001     \tb\t0x7c <ltmp0+0x7c>\r\nf9400fe0     \tldr\tx0, [sp, #0x18]\r\n910083ff     \tadd\tsp, sp, #0x20\r\nd65f03c0     \tret\r\n```\r\n</details>\r\n\r\nWith `register`, `gcc` appears to optimize away a couple `ldr` and `str` instructions, which is pretty significant.\r\n\r\n<img width=\"727\" alt=\"image\" src=\"https://github.com/user-attachments/assets/25122b93-e393-4989-845d-ee9f21417d7b\">\r\n\r\nEDIT: ah, forgot to run with `-O2`. Let me do that.",
            "commit_id": "0fb5299e53cc0d7a5c03c333b1ed79262a0db3f9",
            "created_at": "2024-09-29T16:06:48Z",
            "diff_hunk": "@@ -496,6 +496,20 @@ char *vim_strchr(const char *const string, const int c)\n   }\n }\n \n+// Sized version of strchr that can handle embedded NULs.\n+// Adjusts n to the new size.\n+char *strnchr(register const char *p, size_t *n, int c)",
            "html_url": "https://github.com/neovim/neovim/pull/30526#discussion_r1780077657",
            "id": 1780077657,
            "in_reply_to_id": 1780016774,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5qGdRZ",
            "original_commit_id": "7ddc829deb86555abdf7572e9e3d6edd31e79869",
            "original_line": 501,
            "original_position": 6,
            "original_start_line": null,
            "path": "src/nvim/strings.c",
            "position": null,
            "pull_request_review_id": 2335886823,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/30526",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1780077657/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-09-29T16:16:53Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1780077657",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/7904185?v=4",
                "events_url": "https://api.github.com/users/lewis6991/events{/privacy}",
                "followers_url": "https://api.github.com/users/lewis6991/followers",
                "following_url": "https://api.github.com/users/lewis6991/following{/other_user}",
                "gists_url": "https://api.github.com/users/lewis6991/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/lewis6991",
                "id": 7904185,
                "login": "lewis6991",
                "node_id": "MDQ6VXNlcjc5MDQxODU=",
                "organizations_url": "https://api.github.com/users/lewis6991/orgs",
                "received_events_url": "https://api.github.com/users/lewis6991/received_events",
                "repos_url": "https://api.github.com/users/lewis6991/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/lewis6991/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lewis6991/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/lewis6991",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/30526#discussion_r1783977372"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/30526"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1783977372"
                }
            },
            "author_association": "MEMBER",
            "body": "coverity warning looks valid, worth an assert?\r\n\r\n```\r\nCID 510275:  Memory - illegal accesses  (INCOMPATIBLE_CAST)\r\n/src/nvim/linematch.c: 153 in fastforward_buf_to_lnum()\r\n147       return matched_chars;\r\n148     }\r\n149     \r\n150     mmfile_t fastforward_buf_to_lnum(mmfile_t s, linenr_T lnum)\r\n151     {\r\n152       for (int i = 0; i < lnum - 1; i++) {\r\n>>>     CID 510275:  Memory - illegal accesses  (INCOMPATIBLE_CAST)\r\n>>>     Pointer \"&s.size\" points to an object whose effective type is \"int\" (32 bits, signed) but is dereferenced as a wider \"unsigned long\" (64 bits, unsigned). This may lead to memory corruption.\r\n153         s.ptr = strnchr(s.ptr, (size_t *)&s.size, '\\n');\r\n154         if (!s.ptr) {\r\n155           break;\r\n156         }\r\n157         s.ptr++;\r\n158         s.size--;\r\n```",
            "commit_id": "0fb5299e53cc0d7a5c03c333b1ed79262a0db3f9",
            "created_at": "2024-10-02T07:51:23Z",
            "diff_hunk": "@@ -143,15 +147,17 @@ static int count_n_matched_chars(const char **sp, const size_t n, bool iwhite)\n   return matched_chars;\n }\n \n-void fastforward_buf_to_lnum(const char **s, linenr_T lnum)\n+mmfile_t fastforward_buf_to_lnum(mmfile_t s, linenr_T lnum)\n {\n   for (int i = 0; i < lnum - 1; i++) {\n-    *s = strchr(*s, '\\n');\n-    if (!*s) {\n-      return;\n+    s.ptr = strnchr(s.ptr, (size_t *)&s.size, '\\n');",
            "html_url": "https://github.com/neovim/neovim/pull/30526#discussion_r1783977372",
            "id": 1783977372,
            "line": 153,
            "node_id": "PRRC_kwDOAPphoM5qVVWc",
            "original_commit_id": "0fb5299e53cc0d7a5c03c333b1ed79262a0db3f9",
            "original_line": 153,
            "original_position": 130,
            "original_start_line": null,
            "path": "src/nvim/linematch.c",
            "position": 130,
            "pull_request_review_id": 2342101888,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/30526",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1783977372/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-10-02T07:51:24Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1783977372",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/30526#discussion_r1939508781"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/30526"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1939508781"
                }
            },
            "author_association": "MEMBER",
            "body": "Is this really needed? This seems mostly the same as `memchr()`, except that it takes a pointer to `n` (which is strange for a function with such a generic name).",
            "commit_id": "0fb5299e53cc0d7a5c03c333b1ed79262a0db3f9",
            "created_at": "2025-02-03T14:49:20Z",
            "diff_hunk": "@@ -496,6 +496,20 @@ char *vim_strchr(const char *const string, const int c)\n   }\n }\n \n+// Sized version of strchr that can handle embedded NULs.\n+// Adjusts n to the new size.\n+char *strnchr(const char *p, size_t *n, int c)\n+{\n+  while (*n > 0) {\n+    if (*p == c) {\n+      return (char *)p;\n+    }\n+    p++;\n+    (*n)--;\n+  }\n+  return NULL;\n+}",
            "html_url": "https://github.com/neovim/neovim/pull/30526#discussion_r1939508781",
            "id": 1939508781,
            "line": 511,
            "node_id": "PRRC_kwDOAPphoM5zmo4t",
            "original_commit_id": "0fb5299e53cc0d7a5c03c333b1ed79262a0db3f9",
            "original_line": 511,
            "original_position": 16,
            "original_start_line": 499,
            "path": "src/nvim/strings.c",
            "position": 16,
            "pull_request_review_id": 2590138938,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/30526",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1939508781/reactions"
            },
            "side": "RIGHT",
            "start_line": 499,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-02-03T14:50:24Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1939508781",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/30526#discussion_r1939737819"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/30526"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1939737819"
                }
            },
            "author_association": "MEMBER",
            "body": "If you can replace with `memchr()` then go for it. I gave it a generic name because it is a generic function, it's just a sized version of `strchr`.",
            "commit_id": "0fb5299e53cc0d7a5c03c333b1ed79262a0db3f9",
            "created_at": "2025-02-03T17:04:40Z",
            "diff_hunk": "@@ -496,6 +496,20 @@ char *vim_strchr(const char *const string, const int c)\n   }\n }\n \n+// Sized version of strchr that can handle embedded NULs.\n+// Adjusts n to the new size.\n+char *strnchr(const char *p, size_t *n, int c)\n+{\n+  while (*n > 0) {\n+    if (*p == c) {\n+      return (char *)p;\n+    }\n+    p++;\n+    (*n)--;\n+  }\n+  return NULL;\n+}",
            "html_url": "https://github.com/neovim/neovim/pull/30526#discussion_r1939737819",
            "id": 1939737819,
            "in_reply_to_id": 1939508781,
            "line": 511,
            "node_id": "PRRC_kwDOAPphoM5zngzb",
            "original_commit_id": "0fb5299e53cc0d7a5c03c333b1ed79262a0db3f9",
            "original_line": 511,
            "original_position": 16,
            "original_start_line": 499,
            "path": "src/nvim/strings.c",
            "position": 16,
            "pull_request_review_id": 2590527885,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/30526",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1939737819/reactions"
            },
            "side": "RIGHT",
            "start_line": 499,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-02-03T17:08:03Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1939737819",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/7904185?v=4",
                "events_url": "https://api.github.com/users/lewis6991/events{/privacy}",
                "followers_url": "https://api.github.com/users/lewis6991/followers",
                "following_url": "https://api.github.com/users/lewis6991/following{/other_user}",
                "gists_url": "https://api.github.com/users/lewis6991/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/lewis6991",
                "id": 7904185,
                "login": "lewis6991",
                "node_id": "MDQ6VXNlcjc5MDQxODU=",
                "organizations_url": "https://api.github.com/users/lewis6991/orgs",
                "received_events_url": "https://api.github.com/users/lewis6991/received_events",
                "repos_url": "https://api.github.com/users/lewis6991/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/lewis6991/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lewis6991/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/lewis6991",
                "user_view_type": "public"
            }
        }
    ],
    "comment_regular_data": [
        {
            "author_association": "MEMBER",
            "body": "@jwhite510 ",
            "created_at": "2024-09-26T15:20:38Z",
            "html_url": "https://github.com/neovim/neovim/pull/30526#issuecomment-2377274538",
            "id": 2377274538,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30526",
            "node_id": "IC_kwDOAPphoM6NslSq",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2377274538/reactions"
            },
            "updated_at": "2024-09-26T15:20:38Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2377274538",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/7904185?v=4",
                "events_url": "https://api.github.com/users/lewis6991/events{/privacy}",
                "followers_url": "https://api.github.com/users/lewis6991/followers",
                "following_url": "https://api.github.com/users/lewis6991/following{/other_user}",
                "gists_url": "https://api.github.com/users/lewis6991/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/lewis6991",
                "id": 7904185,
                "login": "lewis6991",
                "node_id": "MDQ6VXNlcjc5MDQxODU=",
                "organizations_url": "https://api.github.com/users/lewis6991/orgs",
                "received_events_url": "https://api.github.com/users/lewis6991/received_events",
                "repos_url": "https://api.github.com/users/lewis6991/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/lewis6991/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lewis6991/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/lewis6991",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "Backport failed for `release-0.10`, because it was unable to cherry-pick the commit(s).\n\nPlease cherry-pick the changes locally and resolve any conflicts.\n```bash\ngit fetch origin release-0.10\ngit worktree add -d .worktree/backport-30526-to-release-0.10 origin/release-0.10\ncd .worktree/backport-30526-to-release-0.10\ngit switch --create backport-30526-to-release-0.10\ngit cherry-pick -x c65646c2474d22948c604168a68f6626a645d1d2 0fb5299e53cc0d7a5c03c333b1ed79262a0db3f9\n```",
            "created_at": "2024-09-30T11:09:57Z",
            "html_url": "https://github.com/neovim/neovim/pull/30526#issuecomment-2382886214",
            "id": 2382886214,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30526",
            "node_id": "IC_kwDOAPphoM6OB_VG",
            "performed_via_github_app": {
                "client_id": "Iv23lig4DyAliuVagKSN",
                "created_at": "2024-07-16T09:59:15Z",
                "description": "",
                "events": [],
                "external_url": "https://neovim.io/",
                "html_url": "https://github.com/apps/neovim-backports",
                "id": 946290,
                "name": "neovim backports",
                "node_id": "A_kwHOAGK_Pc4ADnBy",
                "owner": {
                    "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
                    "events_url": "https://api.github.com/users/neovim/events{/privacy}",
                    "followers_url": "https://api.github.com/users/neovim/followers",
                    "following_url": "https://api.github.com/users/neovim/following{/other_user}",
                    "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
                    "gravatar_id": "",
                    "html_url": "https://github.com/neovim",
                    "id": 6471485,
                    "login": "neovim",
                    "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
                    "organizations_url": "https://api.github.com/users/neovim/orgs",
                    "received_events_url": "https://api.github.com/users/neovim/received_events",
                    "repos_url": "https://api.github.com/users/neovim/repos",
                    "site_admin": false,
                    "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
                    "type": "Organization",
                    "url": "https://api.github.com/users/neovim",
                    "user_view_type": "public"
                },
                "permissions": {
                    "contents": "write",
                    "metadata": "read",
                    "pull_requests": "write"
                },
                "slug": "neovim-backports",
                "updated_at": "2024-09-11T10:04:42Z"
            },
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2382886214/reactions"
            },
            "updated_at": "2024-09-30T11:09:57Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2382886214",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/in/946290?v=4",
                "events_url": "https://api.github.com/users/neovim-backports%5Bbot%5D/events{/privacy}",
                "followers_url": "https://api.github.com/users/neovim-backports%5Bbot%5D/followers",
                "following_url": "https://api.github.com/users/neovim-backports%5Bbot%5D/following{/other_user}",
                "gists_url": "https://api.github.com/users/neovim-backports%5Bbot%5D/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/apps/neovim-backports",
                "id": 175700243,
                "login": "neovim-backports[bot]",
                "node_id": "BOT_kgDOCnj5Ew",
                "organizations_url": "https://api.github.com/users/neovim-backports%5Bbot%5D/orgs",
                "received_events_url": "https://api.github.com/users/neovim-backports%5Bbot%5D/received_events",
                "repos_url": "https://api.github.com/users/neovim-backports%5Bbot%5D/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/neovim-backports%5Bbot%5D/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/neovim-backports%5Bbot%5D/subscriptions",
                "type": "Bot",
                "url": "https://api.github.com/users/neovim-backports%5Bbot%5D",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "https://github.com/neovim/neovim/pull/30591",
            "created_at": "2024-09-30T11:27:07Z",
            "html_url": "https://github.com/neovim/neovim/pull/30526#issuecomment-2382922540",
            "id": 2382922540,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30526",
            "node_id": "IC_kwDOAPphoM6OCIMs",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2382922540/reactions"
            },
            "updated_at": "2024-09-30T11:27:07Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2382922540",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/7904185?v=4",
                "events_url": "https://api.github.com/users/lewis6991/events{/privacy}",
                "followers_url": "https://api.github.com/users/lewis6991/followers",
                "following_url": "https://api.github.com/users/lewis6991/following{/other_user}",
                "gists_url": "https://api.github.com/users/lewis6991/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/lewis6991",
                "id": 7904185,
                "login": "lewis6991",
                "node_id": "MDQ6VXNlcjc5MDQxODU=",
                "organizations_url": "https://api.github.com/users/lewis6991/orgs",
                "received_events_url": "https://api.github.com/users/lewis6991/received_events",
                "repos_url": "https://api.github.com/users/lewis6991/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/lewis6991/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lewis6991/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/lewis6991",
                "user_view_type": "public"
            }
        }
    ],
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/30526/comments",
    "commits_url": "https://api.github.com/repos/neovim/neovim/pulls/30526/commits",
    "created_at": "2024-09-26T15:18:03Z",
    "diff_url": "https://github.com/neovim/neovim/pull/30526.diff",
    "draft": false,
    "head": {
        "label": "lewis6991:fix/linematchnul",
        "ref": "fix/linematchnul",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/lewis6991/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/lewis6991/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/lewis6991/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/lewis6991/neovim/branches{/branch}",
            "clone_url": "https://github.com/lewis6991/neovim.git",
            "collaborators_url": "https://api.github.com/repos/lewis6991/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/lewis6991/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/lewis6991/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/lewis6991/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/lewis6991/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/lewis6991/neovim/contributors",
            "created_at": "2020-11-24T21:47:43Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/lewis6991/neovim/deployments",
            "description": "Vim-fork focused on extensibility and usability",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/lewis6991/neovim/downloads",
            "events_url": "https://api.github.com/repos/lewis6991/neovim/events",
            "fork": true,
            "forks": 0,
            "forks_count": 0,
            "forks_url": "https://api.github.com/repos/lewis6991/neovim/forks",
            "full_name": "lewis6991/neovim",
            "git_commits_url": "https://api.github.com/repos/lewis6991/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/lewis6991/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/lewis6991/neovim/git/tags{/sha}",
            "git_url": "git://github.com/lewis6991/neovim.git",
            "has_discussions": false,
            "has_downloads": true,
            "has_issues": false,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://neovim.io",
            "hooks_url": "https://api.github.com/repos/lewis6991/neovim/hooks",
            "html_url": "https://github.com/lewis6991/neovim",
            "id": 315760150,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/lewis6991/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/lewis6991/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/lewis6991/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/lewis6991/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/lewis6991/neovim/labels{/name}",
            "language": "Vim Script",
            "languages_url": "https://api.github.com/repos/lewis6991/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/lewis6991/neovim/merges",
            "milestones_url": "https://api.github.com/repos/lewis6991/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "MDEwOlJlcG9zaXRvcnkzMTU3NjAxNTA=",
            "notifications_url": "https://api.github.com/repos/lewis6991/neovim/notifications{?since,all,participating}",
            "open_issues": 0,
            "open_issues_count": 0,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/7904185?v=4",
                "events_url": "https://api.github.com/users/lewis6991/events{/privacy}",
                "followers_url": "https://api.github.com/users/lewis6991/followers",
                "following_url": "https://api.github.com/users/lewis6991/following{/other_user}",
                "gists_url": "https://api.github.com/users/lewis6991/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/lewis6991",
                "id": 7904185,
                "login": "lewis6991",
                "node_id": "MDQ6VXNlcjc5MDQxODU=",
                "organizations_url": "https://api.github.com/users/lewis6991/orgs",
                "received_events_url": "https://api.github.com/users/lewis6991/received_events",
                "repos_url": "https://api.github.com/users/lewis6991/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/lewis6991/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lewis6991/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/lewis6991",
                "user_view_type": "public"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/lewis6991/neovim/pulls{/number}",
            "pushed_at": "2025-02-03T11:03:25Z",
            "releases_url": "https://api.github.com/repos/lewis6991/neovim/releases{/id}",
            "size": 300194,
            "ssh_url": "git@github.com:lewis6991/neovim.git",
            "stargazers_count": 0,
            "stargazers_url": "https://api.github.com/repos/lewis6991/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/lewis6991/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/lewis6991/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/lewis6991/neovim/subscription",
            "svn_url": "https://github.com/lewis6991/neovim",
            "tags_url": "https://api.github.com/repos/lewis6991/neovim/tags",
            "teams_url": "https://api.github.com/repos/lewis6991/neovim/teams",
            "topics": [],
            "trees_url": "https://api.github.com/repos/lewis6991/neovim/git/trees{/sha}",
            "updated_at": "2025-01-29T11:45:46Z",
            "url": "https://api.github.com/repos/lewis6991/neovim",
            "visibility": "public",
            "watchers": 0,
            "watchers_count": 0,
            "web_commit_signoff_required": false
        },
        "sha": "0fb5299e53cc0d7a5c03c333b1ed79262a0db3f9",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/7904185?v=4",
            "events_url": "https://api.github.com/users/lewis6991/events{/privacy}",
            "followers_url": "https://api.github.com/users/lewis6991/followers",
            "following_url": "https://api.github.com/users/lewis6991/following{/other_user}",
            "gists_url": "https://api.github.com/users/lewis6991/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/lewis6991",
            "id": 7904185,
            "login": "lewis6991",
            "node_id": "MDQ6VXNlcjc5MDQxODU=",
            "organizations_url": "https://api.github.com/users/lewis6991/orgs",
            "received_events_url": "https://api.github.com/users/lewis6991/received_events",
            "repos_url": "https://api.github.com/users/lewis6991/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/lewis6991/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/lewis6991/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/lewis6991",
            "user_view_type": "public"
        }
    },
    "html_url": "https://github.com/neovim/neovim/pull/30526",
    "id": 2094029948,
    "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30526",
    "labels": [
        {
            "color": "c5def5",
            "default": false,
            "description": "",
            "id": 3010934759,
            "name": "diff",
            "node_id": "MDU6TGFiZWwzMDEwOTM0NzU5",
            "url": "https://api.github.com/repos/neovim/neovim/labels/diff"
        },
        {
            "color": "0052CC",
            "default": false,
            "description": "",
            "id": 6959860626,
            "name": "ci:backport release-0.10",
            "node_id": "LA_kwDOAPphoM8AAAABntcLkg",
            "url": "https://api.github.com/repos/neovim/neovim/labels/ci:backport%20release-0.10"
        }
    ],
    "locked": false,
    "merge_commit_sha": "2c88cfcac42d0a4e0b1a1396539b5add807c336c",
    "merged_at": "2024-09-30T11:09:36Z",
    "milestone": null,
    "node_id": "PR_kwDOAPphoM580Fx8",
    "number": 30526,
    "patch_url": "https://github.com/neovim/neovim/pull/30526.patch",
    "requested_reviewers": [],
    "requested_teams": [],
    "review_comment_url": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}",
    "review_comments_url": "https://api.github.com/repos/neovim/neovim/pulls/30526/comments",
    "state": "closed",
    "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/0fb5299e53cc0d7a5c03c333b1ed79262a0db3f9",
    "title": "fix(diff): use mmfile_t in linematch",
    "updated_at": "2025-02-03T17:04:40Z",
    "url": "https://api.github.com/repos/neovim/neovim/pulls/30526",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/7904185?v=4",
        "events_url": "https://api.github.com/users/lewis6991/events{/privacy}",
        "followers_url": "https://api.github.com/users/lewis6991/followers",
        "following_url": "https://api.github.com/users/lewis6991/following{/other_user}",
        "gists_url": "https://api.github.com/users/lewis6991/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/lewis6991",
        "id": 7904185,
        "login": "lewis6991",
        "node_id": "MDQ6VXNlcjc5MDQxODU=",
        "organizations_url": "https://api.github.com/users/lewis6991/orgs",
        "received_events_url": "https://api.github.com/users/lewis6991/received_events",
        "repos_url": "https://api.github.com/users/lewis6991/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/lewis6991/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/lewis6991/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/lewis6991",
        "user_view_type": "public"
    }
}