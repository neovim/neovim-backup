{
    "_links": {
        "comments": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/37743/comments"
        },
        "commits": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/37743/commits"
        },
        "html": {
            "href": "https://github.com/neovim/neovim/pull/37743"
        },
        "issue": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/37743"
        },
        "review_comment": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}"
        },
        "review_comments": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/37743/comments"
        },
        "self": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/37743"
        },
        "statuses": {
            "href": "https://api.github.com/repos/neovim/neovim/statuses/4accbb0626b485632a3977a26e8ae00b90704028"
        }
    },
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "auto_merge": null,
    "base": {
        "label": "neovim:master",
        "ref": "master",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/neovim/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/neovim/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/neovim/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/neovim/neovim/branches{/branch}",
            "clone_url": "https://github.com/neovim/neovim.git",
            "collaborators_url": "https://api.github.com/repos/neovim/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/neovim/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/neovim/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/neovim/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/neovim/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/neovim/neovim/contributors",
            "created_at": "2014-01-31T13:39:22Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/neovim/neovim/deployments",
            "description": "Vim-fork focused on extensibility and usability",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/neovim/neovim/downloads",
            "events_url": "https://api.github.com/repos/neovim/neovim/events",
            "fork": false,
            "forks": 6587,
            "forks_count": 6587,
            "forks_url": "https://api.github.com/repos/neovim/neovim/forks",
            "full_name": "neovim/neovim",
            "git_commits_url": "https://api.github.com/repos/neovim/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/neovim/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/neovim/neovim/git/tags{/sha}",
            "git_url": "git://github.com/neovim/neovim.git",
            "has_discussions": true,
            "has_downloads": true,
            "has_issues": true,
            "has_pages": false,
            "has_projects": true,
            "has_pull_requests": true,
            "has_wiki": true,
            "homepage": "https://neovim.io",
            "hooks_url": "https://api.github.com/repos/neovim/neovim/hooks",
            "html_url": "https://github.com/neovim/neovim",
            "id": 16408992,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/neovim/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/neovim/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/neovim/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/neovim/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/neovim/neovim/labels{/name}",
            "language": "Vim Script",
            "languages_url": "https://api.github.com/repos/neovim/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/neovim/neovim/merges",
            "milestones_url": "https://api.github.com/repos/neovim/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "MDEwOlJlcG9zaXRvcnkxNjQwODk5Mg==",
            "notifications_url": "https://api.github.com/repos/neovim/neovim/notifications{?since,all,participating}",
            "open_issues": 2031,
            "open_issues_count": 2031,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
                "events_url": "https://api.github.com/users/neovim/events{/privacy}",
                "followers_url": "https://api.github.com/users/neovim/followers",
                "following_url": "https://api.github.com/users/neovim/following{/other_user}",
                "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/neovim",
                "id": 6471485,
                "login": "neovim",
                "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
                "organizations_url": "https://api.github.com/users/neovim/orgs",
                "received_events_url": "https://api.github.com/users/neovim/received_events",
                "repos_url": "https://api.github.com/users/neovim/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
                "type": "Organization",
                "url": "https://api.github.com/users/neovim",
                "user_view_type": "public"
            },
            "private": false,
            "pull_request_creation_policy": "all",
            "pulls_url": "https://api.github.com/repos/neovim/neovim/pulls{/number}",
            "pushed_at": "2026-02-17T03:34:12Z",
            "releases_url": "https://api.github.com/repos/neovim/neovim/releases{/id}",
            "size": 369888,
            "ssh_url": "git@github.com:neovim/neovim.git",
            "stargazers_count": 96478,
            "stargazers_url": "https://api.github.com/repos/neovim/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/neovim/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/neovim/neovim/subscription",
            "svn_url": "https://github.com/neovim/neovim",
            "tags_url": "https://api.github.com/repos/neovim/neovim/tags",
            "teams_url": "https://api.github.com/repos/neovim/neovim/teams",
            "topics": [
                "api",
                "c",
                "lua",
                "neovim",
                "nvim",
                "text-editor",
                "vim"
            ],
            "trees_url": "https://api.github.com/repos/neovim/neovim/git/trees{/sha}",
            "updated_at": "2026-02-17T03:34:17Z",
            "url": "https://api.github.com/repos/neovim/neovim",
            "visibility": "public",
            "watchers": 96478,
            "watchers_count": 96478,
            "web_commit_signoff_required": false
        },
        "sha": "6ad73421cbfc42d63e8e2d3522ef1e6b9ed48855",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
            "events_url": "https://api.github.com/users/neovim/events{/privacy}",
            "followers_url": "https://api.github.com/users/neovim/followers",
            "following_url": "https://api.github.com/users/neovim/following{/other_user}",
            "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/neovim",
            "id": 6471485,
            "login": "neovim",
            "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
            "organizations_url": "https://api.github.com/users/neovim/orgs",
            "received_events_url": "https://api.github.com/users/neovim/received_events",
            "repos_url": "https://api.github.com/users/neovim/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
            "type": "Organization",
            "url": "https://api.github.com/users/neovim",
            "user_view_type": "public"
        }
    },
    "body": "### Problem:\r\nCurrently, if prompt gets changed during user-input with prompt_setprompt() it only gets reflected in next prompt. And that behavrior is not also consistent. If user re-enters insert mode then the user input gets discarded and a new prompt gets created with the new pormpt.\r\n\r\n### Solution:\r\nRespond to prompt_setprompt right away. Change the prompt and keep user input.\r\n\r\nfix #37744",
    "closed_at": "2026-02-14T17:18:08Z",
    "comment_data": [
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/37743#discussion_r2774826164"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/37743"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2774826164"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\n    // In case the mark is set to a non-existent line.\n```",
            "commit_id": "0b7b980e6508025d15cf6d8dc7cf7e1ef0ee43e2",
            "created_at": "2026-02-06T15:55:17Z",
            "diff_hunk": "@@ -1586,6 +1586,56 @@ char *prompt_text(void)\n   return buf_prompt_text(curbuf);\n }\n \n+void buf_update_prompt_text(buf_T *buf, const char *new_prompt)\n+{\n+  if (buf->b_p_bt[0] != 'p') {\n+    // buftype not set as prompt. skip the special stuff cause we'll create\n+    // a new prompt anyway once bt=prompt is set\n+    goto theend;\n+  }\n+\n+  if (buf->b_prompt_start.mark.lnum > buf->b_ml.ml_line_count) {\n+    // in case the where the mark is set the line doesn't exist",
            "html_url": "https://github.com/neovim/neovim/pull/37743#discussion_r2774826164",
            "id": 2774826164,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6lZHy0",
            "original_commit_id": "0b7b980e6508025d15cf6d8dc7cf7e1ef0ee43e2",
            "original_line": 1598,
            "original_position": 13,
            "original_start_line": null,
            "path": "src/nvim/edit.c",
            "position": 1,
            "pull_request_review_id": 3763845686,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/37743",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2774826164/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2026-02-06T15:55:17Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2774826164",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/37743#discussion_r2774836630"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/37743"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2774836630"
                }
            },
            "author_association": "MEMBER",
            "body": "`strequal` ?",
            "commit_id": "0b7b980e6508025d15cf6d8dc7cf7e1ef0ee43e2",
            "created_at": "2026-02-06T15:57:23Z",
            "diff_hunk": "@@ -1586,6 +1586,56 @@ char *prompt_text(void)\n   return buf_prompt_text(curbuf);\n }\n \n+void buf_update_prompt_text(buf_T *buf, const char *new_prompt)\n+{\n+  if (buf->b_p_bt[0] != 'p') {\n+    // buftype not set as prompt. skip the special stuff cause we'll create\n+    // a new prompt anyway once bt=prompt is set\n+    goto theend;\n+  }\n+\n+  if (buf->b_prompt_start.mark.lnum > buf->b_ml.ml_line_count) {\n+    // in case the where the mark is set the line doesn't exist\n+    buf->b_prompt_start.mark.lnum = buf->b_ml.ml_line_count;\n+  }\n+\n+  linenr_T prompt_lno = buf->b_prompt_start.mark.lnum;\n+  char *old_prompt = buf->b_prompt_text != NULL ? buf->b_prompt_text : \"\";\n+  char *old_line = ml_get_buf(buf, prompt_lno);\n+  new_prompt = new_prompt != NULL ? new_prompt : \"\";\n+  old_line = old_line != NULL ? old_line : \"\";\n+\n+  int old_prompt_len = (int)strlen(old_prompt);\n+  int new_prompt_len = (int)strlen(new_prompt);\n+  int old_line_len = (int)strlen(old_line);\n+\n+  if (buf->b_prompt_start.mark.col < old_prompt_len\n+      || old_line_len < curbuf->b_prompt_start.mark.col\n+      || strncmp(old_line + curbuf->b_prompt_start.mark.col - old_prompt_len, old_prompt,\n+                 (size_t)old_prompt_len) != 0) {",
            "html_url": "https://github.com/neovim/neovim/pull/37743#discussion_r2774836630",
            "id": 2774836630,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6lZKWW",
            "original_commit_id": "0b7b980e6508025d15cf6d8dc7cf7e1ef0ee43e2",
            "original_line": 1615,
            "original_position": 30,
            "original_start_line": 1614,
            "path": "src/nvim/edit.c",
            "position": 1,
            "pull_request_review_id": 3763857921,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/37743",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2774836630/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2026-02-06T15:57:23Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2774836630",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/37743#discussion_r2774851829"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/37743"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2774851829"
                }
            },
            "author_association": "MEMBER",
            "body": "just curious, which change effected this? related to https://github.com/neovim/neovim/issues/14116 ?",
            "commit_id": "4accbb0626b485632a3977a26e8ae00b90704028",
            "created_at": "2026-02-06T16:00:59Z",
            "diff_hunk": "@@ -62,7 +62,7 @@ describe('prompt buffer', function()\n     screen:expect([[\n       cmd: ^                    |\n       {1:~                        }|*3\n-      {3:[Prompt] [+]             }|\n+      {3:[Prompt]                 }|",
            "html_url": "https://github.com/neovim/neovim/pull/37743#discussion_r2774851829",
            "id": 2774851829,
            "line": 65,
            "node_id": "PRRC_kwDOAPphoM6lZOD1",
            "original_commit_id": "0b7b980e6508025d15cf6d8dc7cf7e1ef0ee43e2",
            "original_line": 65,
            "original_position": 5,
            "original_start_line": null,
            "path": "test/functional/legacy/prompt_buffer_spec.lua",
            "position": 5,
            "pull_request_review_id": 3763874236,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/37743",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2774851829/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2026-02-06T16:00:59Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2774851829",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/37743#discussion_r2774889152"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/37743"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2774889152"
                }
            },
            "author_association": "MEMBER",
            "body": "to avoid analyzer warnings, should we assert after these casts?\n\n```\nassert(old_prompt_len > 0);\n...\n```",
            "commit_id": "e6ee242b89a66910e87c26858f5cd62e14c6e0d4",
            "created_at": "2026-02-06T16:09:56Z",
            "diff_hunk": "@@ -1586,6 +1586,56 @@ char *prompt_text(void)\n   return buf_prompt_text(curbuf);\n }\n \n+void buf_update_prompt_text(buf_T *buf, const char *new_prompt)\n+{\n+  if (buf->b_p_bt[0] != 'p') {\n+    // buftype not set as prompt. skip the special stuff cause we'll create\n+    // a new prompt anyway once bt=prompt is set\n+    goto theend;\n+  }\n+\n+  if (buf->b_prompt_start.mark.lnum > buf->b_ml.ml_line_count) {\n+    // in case the where the mark is set the line doesn't exist\n+    buf->b_prompt_start.mark.lnum = buf->b_ml.ml_line_count;\n+  }\n+\n+  linenr_T prompt_lno = buf->b_prompt_start.mark.lnum;\n+  char *old_prompt = buf->b_prompt_text != NULL ? buf->b_prompt_text : \"\";\n+  char *old_line = ml_get_buf(buf, prompt_lno);\n+  new_prompt = new_prompt != NULL ? new_prompt : \"\";\n+  old_line = old_line != NULL ? old_line : \"\";\n+\n+  int old_prompt_len = (int)strlen(old_prompt);\n+  int new_prompt_len = (int)strlen(new_prompt);\n+  int old_line_len = (int)strlen(old_line);",
            "html_url": "https://github.com/neovim/neovim/pull/37743#discussion_r2774889152",
            "id": 2774889152,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6lZXLA",
            "original_commit_id": "0b7b980e6508025d15cf6d8dc7cf7e1ef0ee43e2",
            "original_line": 1610,
            "original_position": 25,
            "original_start_line": 1608,
            "path": "src/nvim/edit.c",
            "position": 1,
            "pull_request_review_id": 3763912863,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/37743",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2774889152/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2026-02-06T16:09:56Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2774889152",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/37743#discussion_r2775394545"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/37743"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2775394545"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "The static analyzer warnings went away after adding null check. Which warnings are you seeing?",
            "commit_id": "e6ee242b89a66910e87c26858f5cd62e14c6e0d4",
            "created_at": "2026-02-06T18:05:54Z",
            "diff_hunk": "@@ -1586,6 +1586,56 @@ char *prompt_text(void)\n   return buf_prompt_text(curbuf);\n }\n \n+void buf_update_prompt_text(buf_T *buf, const char *new_prompt)\n+{\n+  if (buf->b_p_bt[0] != 'p') {\n+    // buftype not set as prompt. skip the special stuff cause we'll create\n+    // a new prompt anyway once bt=prompt is set\n+    goto theend;\n+  }\n+\n+  if (buf->b_prompt_start.mark.lnum > buf->b_ml.ml_line_count) {\n+    // in case the where the mark is set the line doesn't exist\n+    buf->b_prompt_start.mark.lnum = buf->b_ml.ml_line_count;\n+  }\n+\n+  linenr_T prompt_lno = buf->b_prompt_start.mark.lnum;\n+  char *old_prompt = buf->b_prompt_text != NULL ? buf->b_prompt_text : \"\";\n+  char *old_line = ml_get_buf(buf, prompt_lno);\n+  new_prompt = new_prompt != NULL ? new_prompt : \"\";\n+  old_line = old_line != NULL ? old_line : \"\";\n+\n+  int old_prompt_len = (int)strlen(old_prompt);\n+  int new_prompt_len = (int)strlen(new_prompt);\n+  int old_line_len = (int)strlen(old_line);",
            "html_url": "https://github.com/neovim/neovim/pull/37743#discussion_r2775394545",
            "id": 2775394545,
            "in_reply_to_id": 2774889152,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6lbSjx",
            "original_commit_id": "0b7b980e6508025d15cf6d8dc7cf7e1ef0ee43e2",
            "original_line": 1610,
            "original_position": 25,
            "original_start_line": 1608,
            "path": "src/nvim/edit.c",
            "position": 1,
            "pull_request_review_id": 3764486487,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/37743",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2775394545/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2026-02-06T18:05:54Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2775394545",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/13149513?v=4",
                "events_url": "https://api.github.com/users/shadmansaleh/events{/privacy}",
                "followers_url": "https://api.github.com/users/shadmansaleh/followers",
                "following_url": "https://api.github.com/users/shadmansaleh/following{/other_user}",
                "gists_url": "https://api.github.com/users/shadmansaleh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/shadmansaleh",
                "id": 13149513,
                "login": "shadmansaleh",
                "node_id": "MDQ6VXNlcjEzMTQ5NTEz",
                "organizations_url": "https://api.github.com/users/shadmansaleh/orgs",
                "received_events_url": "https://api.github.com/users/shadmansaleh/received_events",
                "repos_url": "https://api.github.com/users/shadmansaleh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/shadmansaleh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/shadmansaleh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/shadmansaleh",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/37743#discussion_r2775398744"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/37743"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2775398744"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "They are different. This basically make it so when we insert-prompt the buffer doesn't get marked as modified. But on user-input it still becomes modified.",
            "commit_id": "4accbb0626b485632a3977a26e8ae00b90704028",
            "created_at": "2026-02-06T18:07:08Z",
            "diff_hunk": "@@ -62,7 +62,7 @@ describe('prompt buffer', function()\n     screen:expect([[\n       cmd: ^                    |\n       {1:~                        }|*3\n-      {3:[Prompt] [+]             }|\n+      {3:[Prompt]                 }|",
            "html_url": "https://github.com/neovim/neovim/pull/37743#discussion_r2775398744",
            "id": 2775398744,
            "in_reply_to_id": 2774851829,
            "line": 65,
            "node_id": "PRRC_kwDOAPphoM6lbTlY",
            "original_commit_id": "0b7b980e6508025d15cf6d8dc7cf7e1ef0ee43e2",
            "original_line": 65,
            "original_position": 5,
            "original_start_line": null,
            "path": "test/functional/legacy/prompt_buffer_spec.lua",
            "position": 5,
            "pull_request_review_id": 3764490965,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/37743",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2775398744/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2026-02-06T18:07:08Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2775398744",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/13149513?v=4",
                "events_url": "https://api.github.com/users/shadmansaleh/events{/privacy}",
                "followers_url": "https://api.github.com/users/shadmansaleh/followers",
                "following_url": "https://api.github.com/users/shadmansaleh/following{/other_user}",
                "gists_url": "https://api.github.com/users/shadmansaleh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/shadmansaleh",
                "id": 13149513,
                "login": "shadmansaleh",
                "node_id": "MDQ6VXNlcjEzMTQ5NTEz",
                "organizations_url": "https://api.github.com/users/shadmansaleh/orgs",
                "received_events_url": "https://api.github.com/users/shadmansaleh/received_events",
                "repos_url": "https://api.github.com/users/shadmansaleh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/shadmansaleh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/shadmansaleh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/shadmansaleh",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/37743#discussion_r2779330553"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/37743"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2779330553"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\n      || !strequal(old_prompt, old_line + curbuf->b_prompt_start.mark.col - old_prompt_len)) {\n```",
            "commit_id": "6cf1253c5aa589cb755e4546b61981a92ac659b7",
            "created_at": "2026-02-08T14:20:00Z",
            "diff_hunk": "@@ -1586,6 +1586,52 @@ char *prompt_text(void)\n   return buf_prompt_text(curbuf);\n }\n \n+void buf_update_prompt_text(buf_T *buf, const char *new_prompt)\n+{\n+  if (buf->b_prompt_start.mark.lnum > buf->b_ml.ml_line_count) {\n+    // In case the mark is set to a non-existent line.\n+    buf->b_prompt_start.mark.lnum = buf->b_ml.ml_line_count;\n+  }\n+\n+  linenr_T prompt_lno = buf->b_prompt_start.mark.lnum;\n+  char *old_prompt = buf->b_prompt_text != NULL ? buf->b_prompt_text : \"\";\n+  char *old_line = ml_get_buf(buf, prompt_lno);\n+  new_prompt = new_prompt != NULL ? new_prompt : \"\";\n+  old_line = old_line != NULL ? old_line : \"\";\n+\n+  int old_prompt_len = (int)strlen(old_prompt);\n+  int new_prompt_len = (int)strlen(new_prompt);\n+  int old_line_len = (int)strlen(old_line);\n+\n+  if (buf->b_prompt_start.mark.col < old_prompt_len\n+      || old_line_len < curbuf->b_prompt_start.mark.col\n+      || strequal(old_prompt, old_line + curbuf->b_prompt_start.mark.col - old_prompt_len) != 0) {",
            "html_url": "https://github.com/neovim/neovim/pull/37743#discussion_r2779330553",
            "id": 2779330553,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6lqTf5",
            "original_commit_id": "6cf1253c5aa589cb755e4546b61981a92ac659b7",
            "original_line": 1608,
            "original_position": 23,
            "original_start_line": null,
            "path": "src/nvim/edit.c",
            "position": 1,
            "pull_request_review_id": 3769814941,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/37743",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2779330553/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2026-02-08T14:20:01Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2779330553",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/37743#discussion_r2779404316"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/37743"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2779404316"
                }
            },
            "author_association": "MEMBER",
            "body": "comparing OK explicitly is a good practice, it's not a boolean. ",
            "commit_id": "e6ee242b89a66910e87c26858f5cd62e14c6e0d4",
            "created_at": "2026-02-08T15:34:34Z",
            "diff_hunk": "@@ -1614,7 +1615,7 @@ void buf_update_prompt_text(buf_T *buf, const char *new_prompt)\n     }\n   } else {\n     char *new_line = concat_str(new_prompt, old_line + buf->b_prompt_start.mark.col);\n-    if (ml_replace_buf(buf, prompt_lno, new_line, false, false) != OK) {\n+    if (!ml_replace_buf(buf, prompt_lno, new_line, false, false)) {",
            "html_url": "https://github.com/neovim/neovim/pull/37743#discussion_r2779404316",
            "id": 2779404316,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6lqlgc",
            "original_commit_id": "e6ee242b89a66910e87c26858f5cd62e14c6e0d4",
            "original_line": 1618,
            "original_position": 15,
            "original_start_line": null,
            "path": "src/nvim/edit.c",
            "position": 1,
            "pull_request_review_id": 3769880254,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/37743",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2779404316/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2026-02-08T15:34:34Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2779404316",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/37743#discussion_r2780092400"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/37743"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2780092400"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Ok will add explicit check. But the ok isn't the issue here. The function is returning ok and still leaking the memory. Which is very odd.",
            "commit_id": "e6ee242b89a66910e87c26858f5cd62e14c6e0d4",
            "created_at": "2026-02-09T00:09:59Z",
            "diff_hunk": "@@ -1614,7 +1615,7 @@ void buf_update_prompt_text(buf_T *buf, const char *new_prompt)\n     }\n   } else {\n     char *new_line = concat_str(new_prompt, old_line + buf->b_prompt_start.mark.col);\n-    if (ml_replace_buf(buf, prompt_lno, new_line, false, false) != OK) {\n+    if (!ml_replace_buf(buf, prompt_lno, new_line, false, false)) {",
            "html_url": "https://github.com/neovim/neovim/pull/37743#discussion_r2780092400",
            "id": 2780092400,
            "in_reply_to_id": 2779404316,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6ltNfw",
            "original_commit_id": "e6ee242b89a66910e87c26858f5cd62e14c6e0d4",
            "original_line": 1618,
            "original_position": 15,
            "original_start_line": null,
            "path": "src/nvim/edit.c",
            "position": 1,
            "pull_request_review_id": 3770650430,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/37743",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2780092400/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2026-02-09T00:10:00Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2780092400",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/13149513?v=4",
                "events_url": "https://api.github.com/users/shadmansaleh/events{/privacy}",
                "followers_url": "https://api.github.com/users/shadmansaleh/followers",
                "following_url": "https://api.github.com/users/shadmansaleh/following{/other_user}",
                "gists_url": "https://api.github.com/users/shadmansaleh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/shadmansaleh",
                "id": 13149513,
                "login": "shadmansaleh",
                "node_id": "MDQ6VXNlcjEzMTQ5NTEz",
                "organizations_url": "https://api.github.com/users/shadmansaleh/orgs",
                "received_events_url": "https://api.github.com/users/shadmansaleh/received_events",
                "repos_url": "https://api.github.com/users/shadmansaleh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/shadmansaleh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/shadmansaleh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/shadmansaleh",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/37743#discussion_r2780151267"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/37743"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2780151267"
                }
            },
            "author_association": "MEMBER",
            "body": "does `new_prompt` need to be freed? though if so, need to think about `xstrdup(new_prompt)` below.\n\nit may be clearer to avoid these if/else branches and deal with one `new_prompt`",
            "commit_id": "e6ee242b89a66910e87c26858f5cd62e14c6e0d4",
            "created_at": "2026-02-09T00:54:34Z",
            "diff_hunk": "@@ -1614,7 +1615,7 @@ void buf_update_prompt_text(buf_T *buf, const char *new_prompt)\n     }\n   } else {\n     char *new_line = concat_str(new_prompt, old_line + buf->b_prompt_start.mark.col);\n-    if (ml_replace_buf(buf, prompt_lno, new_line, false, false) != OK) {\n+    if (!ml_replace_buf(buf, prompt_lno, new_line, false, false)) {",
            "html_url": "https://github.com/neovim/neovim/pull/37743#discussion_r2780151267",
            "id": 2780151267,
            "in_reply_to_id": 2779404316,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6ltb3j",
            "original_commit_id": "e6ee242b89a66910e87c26858f5cd62e14c6e0d4",
            "original_line": 1618,
            "original_position": 15,
            "original_start_line": null,
            "path": "src/nvim/edit.c",
            "position": 1,
            "pull_request_review_id": 3770721450,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/37743",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2780151267/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2026-02-09T00:54:34Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2780151267",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/37743#discussion_r2780755651"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/37743"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2780755651"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "That wasn't the issue. I think the issue was I was setting buffer-lines before some initialization was already done, probably that was causing some dangling state. When I was running the tests with asan on my machine I couldn't reproduce it. So it's hard to pin point what exactly causing the leak. But if we make sure the buffer is a prompt buffer that dangling state no longer happens. And fixes the leak while keeping the feature intact. And I've set the mark-colum to update with change in prompt. That should fix the breaking issues we were getting in different plugins (telescope, NeoTree, Nui,.... etc)",
            "commit_id": "e6ee242b89a66910e87c26858f5cd62e14c6e0d4",
            "created_at": "2026-02-09T05:54:20Z",
            "diff_hunk": "@@ -1614,7 +1615,7 @@ void buf_update_prompt_text(buf_T *buf, const char *new_prompt)\n     }\n   } else {\n     char *new_line = concat_str(new_prompt, old_line + buf->b_prompt_start.mark.col);\n-    if (ml_replace_buf(buf, prompt_lno, new_line, false, false) != OK) {\n+    if (!ml_replace_buf(buf, prompt_lno, new_line, false, false)) {",
            "html_url": "https://github.com/neovim/neovim/pull/37743#discussion_r2780755651",
            "id": 2780755651,
            "in_reply_to_id": 2779404316,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6lvvbD",
            "original_commit_id": "e6ee242b89a66910e87c26858f5cd62e14c6e0d4",
            "original_line": 1618,
            "original_position": 15,
            "original_start_line": null,
            "path": "src/nvim/edit.c",
            "position": 1,
            "pull_request_review_id": 3771329228,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/37743",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2780755651/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2026-02-09T05:54:20Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2780755651",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/13149513?v=4",
                "events_url": "https://api.github.com/users/shadmansaleh/events{/privacy}",
                "followers_url": "https://api.github.com/users/shadmansaleh/followers",
                "following_url": "https://api.github.com/users/shadmansaleh/following{/other_user}",
                "gists_url": "https://api.github.com/users/shadmansaleh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/shadmansaleh",
                "id": 13149513,
                "login": "shadmansaleh",
                "node_id": "MDQ6VXNlcjEzMTQ5NTEz",
                "organizations_url": "https://api.github.com/users/shadmansaleh/orgs",
                "received_events_url": "https://api.github.com/users/shadmansaleh/received_events",
                "repos_url": "https://api.github.com/users/shadmansaleh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/shadmansaleh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/shadmansaleh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/shadmansaleh",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/37743#discussion_r2797957744"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/37743"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2797957744"
                }
            },
            "author_association": "MEMBER",
            "body": "This seems like a hint that `f_prompt_setprompt` may fit better in buffer.c or edit.c",
            "commit_id": "77e6b68b2d5eba4336b0f0a95541e1469d5083d7",
            "created_at": "2026-02-12T10:11:33Z",
            "diff_hunk": "@@ -12,8 +12,13 @@\n #include \"nvim/api/private/helpers.h\"\n #include \"nvim/autocmd.h\"\n #include \"nvim/autocmd_defs.h\"\n+#include \"nvim/buffer.h\"\n #include \"nvim/buffer_defs.h\"\n+#include \"nvim/change.h\"\n #include \"nvim/channel.h\"\n+#include \"nvim/cursor.h\"\n+#include \"nvim/drawscreen.h\"\n+#include \"nvim/edit.h\"",
            "html_url": "https://github.com/neovim/neovim/pull/37743#discussion_r2797957744",
            "id": 2797957744,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6mxXJw",
            "original_commit_id": "77e6b68b2d5eba4336b0f0a95541e1469d5083d7",
            "original_line": 21,
            "original_position": 10,
            "original_start_line": 19,
            "path": "src/nvim/channel.c",
            "position": 1,
            "pull_request_review_id": 3789989459,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/37743",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2797957744/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2026-02-12T10:14:24Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2797957744",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/37743#discussion_r2797978502"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/37743"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2797978502"
                }
            },
            "author_association": "MEMBER",
            "body": "this is a big new block that isn't easy to understand. previously it was called `buf_update_prompt_text`, but since it's now inlined, a 1-line comment would help a lot.\n```suggestion\n  // Update existing prompt, potentially while the user is editing it!\n  if (bt_prompt(buf)) {\n```",
            "commit_id": "77e6b68b2d5eba4336b0f0a95541e1469d5083d7",
            "created_at": "2026-02-12T10:16:11Z",
            "diff_hunk": "@@ -1047,7 +1069,49 @@ void f_prompt_setprompt(typval_T *argvars, typval_T *rettv, EvalFuncData fptr)\n     return;\n   }\n \n-  const char *text = tv_get_string(&argvars[1]);\n+  const char *new_prompt = tv_get_string(&argvars[1]);\n+  int new_prompt_len = (int)strlen(new_prompt);\n+\n+  if (bt_prompt(buf)) {",
            "html_url": "https://github.com/neovim/neovim/pull/37743#discussion_r2797978502",
            "id": 2797978502,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6mxcOG",
            "original_commit_id": "77e6b68b2d5eba4336b0f0a95541e1469d5083d7",
            "original_line": 1075,
            "original_position": 60,
            "original_start_line": null,
            "path": "src/nvim/channel.c",
            "position": 1,
            "pull_request_review_id": 3790010354,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/37743",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2797978502/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2026-02-12T10:16:11Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2797978502",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/37743#discussion_r2802274451"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/37743"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2802274451"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Agreed. I was wondering why this is in channel.c. I think edit.c is a good place. Most of the prompt buffer stuff are there.",
            "commit_id": "77e6b68b2d5eba4336b0f0a95541e1469d5083d7",
            "created_at": "2026-02-13T04:56:29Z",
            "diff_hunk": "@@ -12,8 +12,13 @@\n #include \"nvim/api/private/helpers.h\"\n #include \"nvim/autocmd.h\"\n #include \"nvim/autocmd_defs.h\"\n+#include \"nvim/buffer.h\"\n #include \"nvim/buffer_defs.h\"\n+#include \"nvim/change.h\"\n #include \"nvim/channel.h\"\n+#include \"nvim/cursor.h\"\n+#include \"nvim/drawscreen.h\"\n+#include \"nvim/edit.h\"",
            "html_url": "https://github.com/neovim/neovim/pull/37743#discussion_r2802274451",
            "id": 2802274451,
            "in_reply_to_id": 2797957744,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6nB1CT",
            "original_commit_id": "77e6b68b2d5eba4336b0f0a95541e1469d5083d7",
            "original_line": 21,
            "original_position": 10,
            "original_start_line": 19,
            "path": "src/nvim/channel.c",
            "position": 1,
            "pull_request_review_id": 3795031673,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/37743",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2802274451/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2026-02-13T04:56:29Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2802274451",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/13149513?v=4",
                "events_url": "https://api.github.com/users/shadmansaleh/events{/privacy}",
                "followers_url": "https://api.github.com/users/shadmansaleh/followers",
                "following_url": "https://api.github.com/users/shadmansaleh/following{/other_user}",
                "gists_url": "https://api.github.com/users/shadmansaleh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/shadmansaleh",
                "id": 13149513,
                "login": "shadmansaleh",
                "node_id": "MDQ6VXNlcjEzMTQ5NTEz",
                "organizations_url": "https://api.github.com/users/shadmansaleh/orgs",
                "received_events_url": "https://api.github.com/users/shadmansaleh/received_events",
                "repos_url": "https://api.github.com/users/shadmansaleh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/shadmansaleh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/shadmansaleh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/shadmansaleh",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/37743#discussion_r2802345849"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/37743"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2802345849"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "After more thoughts I believe edit is not appropriate for this. buffer.c or funcs.c is more appropriate. I've moved these prompt-function implementation to buffer.c",
            "commit_id": "77e6b68b2d5eba4336b0f0a95541e1469d5083d7",
            "created_at": "2026-02-13T05:23:55Z",
            "diff_hunk": "@@ -12,8 +12,13 @@\n #include \"nvim/api/private/helpers.h\"\n #include \"nvim/autocmd.h\"\n #include \"nvim/autocmd_defs.h\"\n+#include \"nvim/buffer.h\"\n #include \"nvim/buffer_defs.h\"\n+#include \"nvim/change.h\"\n #include \"nvim/channel.h\"\n+#include \"nvim/cursor.h\"\n+#include \"nvim/drawscreen.h\"\n+#include \"nvim/edit.h\"",
            "html_url": "https://github.com/neovim/neovim/pull/37743#discussion_r2802345849",
            "id": 2802345849,
            "in_reply_to_id": 2797957744,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6nCGd5",
            "original_commit_id": "77e6b68b2d5eba4336b0f0a95541e1469d5083d7",
            "original_line": 21,
            "original_position": 10,
            "original_start_line": 19,
            "path": "src/nvim/channel.c",
            "position": 1,
            "pull_request_review_id": 3795115034,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/37743",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2802345849/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2026-02-13T05:23:55Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2802345849",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/13149513?v=4",
                "events_url": "https://api.github.com/users/shadmansaleh/events{/privacy}",
                "followers_url": "https://api.github.com/users/shadmansaleh/followers",
                "following_url": "https://api.github.com/users/shadmansaleh/following{/other_user}",
                "gists_url": "https://api.github.com/users/shadmansaleh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/shadmansaleh",
                "id": 13149513,
                "login": "shadmansaleh",
                "node_id": "MDQ6VXNlcjEzMTQ5NTEz",
                "organizations_url": "https://api.github.com/users/shadmansaleh/orgs",
                "received_events_url": "https://api.github.com/users/shadmansaleh/received_events",
                "repos_url": "https://api.github.com/users/shadmansaleh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/shadmansaleh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/shadmansaleh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/shadmansaleh",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/37743#discussion_r2804373039"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/37743"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2804373039"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\n  // Update the prompt-text and prompt-marks if a plugin calls prompt_setprompt()\n  // even while user is editing their input.\n```",
            "commit_id": "f80fa254ad5623fdc5ee82dd762bbd1e3986c07c",
            "created_at": "2026-02-13T14:01:21Z",
            "diff_hunk": "@@ -4315,3 +4309,110 @@ void read_buffer_into(buf_T *buf, linenr_T start, linenr_T end, StringBuilder *s\n     }\n   }\n }\n+\n+/// \"prompt_setcallback({buffer}, {callback})\" function\n+void f_prompt_setcallback(typval_T *argvars, typval_T *rettv, EvalFuncData fptr)\n+{\n+  Callback prompt_callback = { .type = kCallbackNone };\n+\n+  if (check_secure()) {\n+    return;\n+  }\n+  buf_T *buf = tv_get_buf(&argvars[0], false);\n+  if (buf == NULL) {\n+    return;\n+  }\n+\n+  if (argvars[1].v_type != VAR_STRING || *argvars[1].vval.v_string != NUL) {\n+    if (!callback_from_typval(&prompt_callback, &argvars[1])) {\n+      return;\n+    }\n+  }\n+\n+  callback_free(&buf->b_prompt_callback);\n+  buf->b_prompt_callback = prompt_callback;\n+}\n+\n+/// \"prompt_setinterrupt({buffer}, {callback})\" function\n+void f_prompt_setinterrupt(typval_T *argvars, typval_T *rettv, EvalFuncData fptr)\n+{\n+  Callback interrupt_callback = { .type = kCallbackNone };\n+\n+  if (check_secure()) {\n+    return;\n+  }\n+  buf_T *buf = tv_get_buf(&argvars[0], false);\n+  if (buf == NULL) {\n+    return;\n+  }\n+\n+  if (argvars[1].v_type != VAR_STRING || *argvars[1].vval.v_string != NUL) {\n+    if (!callback_from_typval(&interrupt_callback, &argvars[1])) {\n+      return;\n+    }\n+  }\n+\n+  callback_free(&buf->b_prompt_interrupt);\n+  buf->b_prompt_interrupt = interrupt_callback;\n+}\n+\n+/// \"prompt_setprompt({buffer}, {text})\" function\n+void f_prompt_setprompt(typval_T *argvars, typval_T *rettv, EvalFuncData fptr)\n+{\n+  if (check_secure()) {\n+    return;\n+  }\n+  buf_T *buf = tv_get_buf(&argvars[0], false);\n+  if (buf == NULL) {\n+    return;\n+  }\n+\n+  const char *new_prompt = tv_get_string(&argvars[1]);\n+  int new_prompt_len = (int)strlen(new_prompt);\n+\n+  // Update the prompt-text and prompt-marks in prompt-buffer so we get live\n+  // update of prompts even while user is editing their input. This is skipped\n+  // for non-prompt buffer because previous prompt only exists in prompt-buffer",
            "html_url": "https://github.com/neovim/neovim/pull/37743#discussion_r2804373039",
            "id": 2804373039,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6nJ1Yv",
            "original_commit_id": "f80fa254ad5623fdc5ee82dd762bbd1e3986c07c",
            "original_line": 4375,
            "original_position": 132,
            "original_start_line": 4373,
            "path": "src/nvim/buffer.c",
            "position": 1,
            "pull_request_review_id": 3797450416,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/37743",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2804373039/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2026-02-13T14:01:22Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2804373039",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/37743#discussion_r2804380730"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/37743"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2804380730"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\n      // If for some odd reason the old prompt is missing,\n      // replace prompt line with new-prompt (discards user-input).\n```",
            "commit_id": "71b448a482d6a5b03768cc681379aa50dc833b2e",
            "created_at": "2026-02-13T14:03:05Z",
            "diff_hunk": "@@ -4315,3 +4309,109 @@ void read_buffer_into(buf_T *buf, linenr_T start, linenr_T end, StringBuilder *s\n     }\n   }\n }\n+\n+/// \"prompt_setcallback({buffer}, {callback})\" function\n+void f_prompt_setcallback(typval_T *argvars, typval_T *rettv, EvalFuncData fptr)\n+{\n+  Callback prompt_callback = { .type = kCallbackNone };\n+\n+  if (check_secure()) {\n+    return;\n+  }\n+  buf_T *buf = tv_get_buf(&argvars[0], false);\n+  if (buf == NULL) {\n+    return;\n+  }\n+\n+  if (argvars[1].v_type != VAR_STRING || *argvars[1].vval.v_string != NUL) {\n+    if (!callback_from_typval(&prompt_callback, &argvars[1])) {\n+      return;\n+    }\n+  }\n+\n+  callback_free(&buf->b_prompt_callback);\n+  buf->b_prompt_callback = prompt_callback;\n+}\n+\n+/// \"prompt_setinterrupt({buffer}, {callback})\" function\n+void f_prompt_setinterrupt(typval_T *argvars, typval_T *rettv, EvalFuncData fptr)\n+{\n+  Callback interrupt_callback = { .type = kCallbackNone };\n+\n+  if (check_secure()) {\n+    return;\n+  }\n+  buf_T *buf = tv_get_buf(&argvars[0], false);\n+  if (buf == NULL) {\n+    return;\n+  }\n+\n+  if (argvars[1].v_type != VAR_STRING || *argvars[1].vval.v_string != NUL) {\n+    if (!callback_from_typval(&interrupt_callback, &argvars[1])) {\n+      return;\n+    }\n+  }\n+\n+  callback_free(&buf->b_prompt_interrupt);\n+  buf->b_prompt_interrupt = interrupt_callback;\n+}\n+\n+/// \"prompt_setprompt({buffer}, {text})\" function\n+void f_prompt_setprompt(typval_T *argvars, typval_T *rettv, EvalFuncData fptr)\n+{\n+  if (check_secure()) {\n+    return;\n+  }\n+  buf_T *buf = tv_get_buf(&argvars[0], false);\n+  if (buf == NULL) {\n+    return;\n+  }\n+\n+  const char *new_prompt = tv_get_string(&argvars[1]);\n+  int new_prompt_len = (int)strlen(new_prompt);\n+\n+  // Update the prompt-text and prompt-marks if a plugin calls prompt_setprompt()\n+  // even while user is editing their input.\n+  if (bt_prompt(buf)) {\n+    if (buf->b_prompt_start.mark.lnum > buf->b_ml.ml_line_count) {\n+      // In case the mark is set to a nonexistent line.\n+      buf->b_prompt_start.mark.lnum = buf->b_ml.ml_line_count;\n+    }\n+\n+    linenr_T prompt_lno = buf->b_prompt_start.mark.lnum;\n+    char *old_prompt = buf_prompt_text(buf);\n+    char *old_line = ml_get_buf(buf, prompt_lno);\n+    old_line = old_line != NULL ? old_line : \"\";\n+\n+    int old_prompt_len = (int)strlen(old_prompt);\n+    colnr_T cursor_col = curwin->w_cursor.col;\n+\n+    if (buf->b_prompt_start.mark.col < old_prompt_len\n+        || curbuf->b_prompt_start.mark.col < old_prompt_len\n+        || !strnequal(old_prompt, old_line + curbuf->b_prompt_start.mark.col - old_prompt_len,\n+                      (size_t)old_prompt_len)) {\n+      // in case if for some odd reason the old prompt is missing\n+      // replace the prompt line with new-prompt (discards user-input)",
            "html_url": "https://github.com/neovim/neovim/pull/37743#discussion_r2804380730",
            "id": 2804380730,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6nJ3Q6",
            "original_commit_id": "71b448a482d6a5b03768cc681379aa50dc833b2e",
            "original_line": 4394,
            "original_position": 151,
            "original_start_line": 4393,
            "path": "src/nvim/buffer.c",
            "position": 1,
            "pull_request_review_id": 3797458738,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/37743",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2804380730/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2026-02-13T14:03:05Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2804380730",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        }
    ],
    "comment_regular_data": [
        {
            "author_association": "CONTRIBUTOR",
            "body": "Solves issue mentioned at https://github.com/neovim/neovim/pull/36194#issuecomment-3850279241\r\n\r\ncc @justinmk ",
            "created_at": "2026-02-06T05:04:23Z",
            "html_url": "https://github.com/neovim/neovim/pull/37743#issuecomment-3858002699",
            "id": 3858002699,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/37743",
            "node_id": "IC_kwDOAPphoM7l9HML",
            "performed_via_github_app": null,
            "pin": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3858002699/reactions"
            },
            "updated_at": "2026-02-06T05:09:07Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3858002699",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/13149513?v=4",
                "events_url": "https://api.github.com/users/shadmansaleh/events{/privacy}",
                "followers_url": "https://api.github.com/users/shadmansaleh/followers",
                "following_url": "https://api.github.com/users/shadmansaleh/following{/other_user}",
                "gists_url": "https://api.github.com/users/shadmansaleh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/shadmansaleh",
                "id": 13149513,
                "login": "shadmansaleh",
                "node_id": "MDQ6VXNlcjEzMTQ5NTEz",
                "organizations_url": "https://api.github.com/users/shadmansaleh/orgs",
                "received_events_url": "https://api.github.com/users/shadmansaleh/received_events",
                "repos_url": "https://api.github.com/users/shadmansaleh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/shadmansaleh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/shadmansaleh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/shadmansaleh",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Thank you. I can't comment on this change in general, but at least it solves the reported problem. ~Finally after some modification of https://github.com/neovim/neovim/pull/36194#issuecomment-3857961906 I found a working repro so I can create an issue.~",
            "created_at": "2026-02-06T07:49:46Z",
            "html_url": "https://github.com/neovim/neovim/pull/37743#issuecomment-3858615225",
            "id": 3858615225,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/37743",
            "node_id": "IC_kwDOAPphoM7l_cu5",
            "performed_via_github_app": null,
            "pin": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3858615225/reactions"
            },
            "updated_at": "2026-02-06T07:52:24Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3858615225",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11404453?v=4",
                "events_url": "https://api.github.com/users/przepompownia/events{/privacy}",
                "followers_url": "https://api.github.com/users/przepompownia/followers",
                "following_url": "https://api.github.com/users/przepompownia/following{/other_user}",
                "gists_url": "https://api.github.com/users/przepompownia/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/przepompownia",
                "id": 11404453,
                "login": "przepompownia",
                "node_id": "MDQ6VXNlcjExNDA0NDUz",
                "organizations_url": "https://api.github.com/users/przepompownia/orgs",
                "received_events_url": "https://api.github.com/users/przepompownia/received_events",
                "repos_url": "https://api.github.com/users/przepompownia/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/przepompownia/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/przepompownia/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/przepompownia",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "```lua\r\nlocal function init()\r\n  local api = vim.api\r\n  local buf = api.nvim_create_buf(false, true)\r\n  api.nvim_open_win(buf, true, {height = 1, width = 40, relative = 'editor', col = 0, row = 0})\r\n\r\n  local prompt = '> '\r\n  vim.bo[buf].buftype = 'prompt'\r\n  vim.fn.prompt_setprompt(buf, prompt)\r\n  api.nvim_buf_set_lines(buf, 0, -1, false, {prompt .. 'query'})\r\n  api.nvim_feedkeys('A', 'n', false)\r\nend\r\n\r\n-- schedule because of https://github.com/neovim/neovim/issues/12295\r\n-- considered as not a bug\r\nvim.schedule(init)\r\n```\r\n\r\nI noticed that both here and in https://github.com/nvim-telescope/telescope.nvim/issues/3617 the prompt text is not cleared, but the buffer gets the second line. It is easy to see it in the minimal repro after switching to Normal mode. In Telescope we need to call `:lua vim.api.nvim_win_set_cursor(0, {1, 1})`.",
            "created_at": "2026-02-06T08:04:06Z",
            "html_url": "https://github.com/neovim/neovim/pull/37743#issuecomment-3858684371",
            "id": 3858684371,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/37743",
            "node_id": "IC_kwDOAPphoM7l_tnT",
            "performed_via_github_app": null,
            "pin": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3858684371/reactions"
            },
            "updated_at": "2026-02-06T16:52:43Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3858684371",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11404453?v=4",
                "events_url": "https://api.github.com/users/przepompownia/events{/privacy}",
                "followers_url": "https://api.github.com/users/przepompownia/followers",
                "following_url": "https://api.github.com/users/przepompownia/following{/other_user}",
                "gists_url": "https://api.github.com/users/przepompownia/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/przepompownia",
                "id": 11404453,
                "login": "przepompownia",
                "node_id": "MDQ6VXNlcjExNDA0NDUz",
                "organizations_url": "https://api.github.com/users/przepompownia/orgs",
                "received_events_url": "https://api.github.com/users/przepompownia/received_events",
                "repos_url": "https://api.github.com/users/przepompownia/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/przepompownia/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/przepompownia/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/przepompownia",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "https://github.com/neovim/neovim/issues/37744",
            "created_at": "2026-02-06T08:24:33Z",
            "html_url": "https://github.com/neovim/neovim/pull/37743#issuecomment-3858766403",
            "id": 3858766403,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/37743",
            "node_id": "IC_kwDOAPphoM7mABpD",
            "performed_via_github_app": null,
            "pin": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3858766403/reactions"
            },
            "updated_at": "2026-02-06T08:24:33Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3858766403",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11404453?v=4",
                "events_url": "https://api.github.com/users/przepompownia/events{/privacy}",
                "followers_url": "https://api.github.com/users/przepompownia/followers",
                "following_url": "https://api.github.com/users/przepompownia/following{/other_user}",
                "gists_url": "https://api.github.com/users/przepompownia/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/przepompownia",
                "id": 11404453,
                "login": "przepompownia",
                "node_id": "MDQ6VXNlcjExNDA0NDUz",
                "organizations_url": "https://api.github.com/users/przepompownia/orgs",
                "received_events_url": "https://api.github.com/users/przepompownia/received_events",
                "repos_url": "https://api.github.com/users/przepompownia/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/przepompownia/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/przepompownia/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/przepompownia",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Do we need a test change to exercise this scenario?",
            "created_at": "2026-02-06T16:11:05Z",
            "html_url": "https://github.com/neovim/neovim/pull/37743#issuecomment-3861251803",
            "id": 3861251803,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/37743",
            "node_id": "IC_kwDOAPphoM7mJgbb",
            "performed_via_github_app": null,
            "pin": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3861251803/reactions"
            },
            "updated_at": "2026-02-06T16:11:05Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3861251803",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "> Do we need a test change to exercise this scenario?\r\n\r\nYeah ofcourse. I'll add tests. Forgot about it ",
            "created_at": "2026-02-06T18:08:04Z",
            "html_url": "https://github.com/neovim/neovim/pull/37743#issuecomment-3861893123",
            "id": 3861893123,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/37743",
            "node_id": "IC_kwDOAPphoM7mL9AD",
            "performed_via_github_app": null,
            "pin": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3861893123/reactions"
            },
            "updated_at": "2026-02-06T18:08:04Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3861893123",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/13149513?v=4",
                "events_url": "https://api.github.com/users/shadmansaleh/events{/privacy}",
                "followers_url": "https://api.github.com/users/shadmansaleh/followers",
                "following_url": "https://api.github.com/users/shadmansaleh/following{/other_user}",
                "gists_url": "https://api.github.com/users/shadmansaleh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/shadmansaleh",
                "id": 13149513,
                "login": "shadmansaleh",
                "node_id": "MDQ6VXNlcjEzMTQ5NTEz",
                "organizations_url": "https://api.github.com/users/shadmansaleh/orgs",
                "received_events_url": "https://api.github.com/users/shadmansaleh/received_events",
                "repos_url": "https://api.github.com/users/shadmansaleh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/shadmansaleh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/shadmansaleh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/shadmansaleh",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "> I noticed that both here and in https://github.com/nvim-telescope/telescope.nvim/issues/3617 the prompt text is not cleared, but the buffer gets the second line. It is easy to see it in the minimal repro after switching to Normal mode. In Telescope we need to call :lua vim.api.nvim_win_set_cursor(0, {1, 1}).\r\n\r\nYeah it's creating a new line due to prompt mis-match. on telescope end you can work around the quark (alongside curson you'll also need to set the `:` marks position too). I'd just prefer the quark not to be there. ",
            "created_at": "2026-02-06T18:54:46Z",
            "html_url": "https://github.com/neovim/neovim/pull/37743#issuecomment-3862068146",
            "id": 3862068146,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/37743",
            "node_id": "IC_kwDOAPphoM7mMnuy",
            "performed_via_github_app": null,
            "pin": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3862068146/reactions"
            },
            "updated_at": "2026-02-06T18:54:46Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3862068146",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/13149513?v=4",
                "events_url": "https://api.github.com/users/shadmansaleh/events{/privacy}",
                "followers_url": "https://api.github.com/users/shadmansaleh/followers",
                "following_url": "https://api.github.com/users/shadmansaleh/following{/other_user}",
                "gists_url": "https://api.github.com/users/shadmansaleh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/shadmansaleh",
                "id": 13149513,
                "login": "shadmansaleh",
                "node_id": "MDQ6VXNlcjEzMTQ5NTEz",
                "organizations_url": "https://api.github.com/users/shadmansaleh/orgs",
                "received_events_url": "https://api.github.com/users/shadmansaleh/received_events",
                "repos_url": "https://api.github.com/users/shadmansaleh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/shadmansaleh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/shadmansaleh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/shadmansaleh",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "```\r\n2026-02-08T14:14:48.2147784Z = ==15734==ERROR: LeakSanitizer: detected memory leaks\r\n2026-02-08T14:14:48.2148266Z = \r\n2026-02-08T14:14:48.2148632Z = Direct leak of 15 byte(s) in 1 object(s) allocated from:\r\n2026-02-08T14:14:48.2149601Z =     #0 0x56269d75fdb3 in malloc (/home/runner/work/neovim/neovim/build/bin/nvim+0xd50db3) (BuildId: 9293df87f819ece2620e19d17b465d2dd8025114)\r\n2026-02-08T14:14:48.2150790Z =     #1 0x56269e41f084 in try_malloc /home/runner/work/neovim/neovim/src/nvim/memory.c:113:15\r\n2026-02-08T14:14:48.2151381Z =     #2 0x56269e41f2e4 in xmalloc /home/runner/work/neovim/neovim/src/nvim/memory.c:147:15\r\n2026-02-08T14:14:48.2151970Z =     #3 0x56269ea81744 in concat_str /home/runner/work/neovim/neovim/src/nvim/strings.c:569:16\r\n2026-02-08T14:14:48.2152596Z =     #4 0x56269dc044a7 in buf_update_prompt_text /home/runner/work/neovim/neovim/src/nvim/edit.c:1616:22\r\n2026-02-08T14:14:48.2153258Z =     #5 0x56269da629c2 in f_prompt_setprompt /home/runner/work/neovim/neovim/src/nvim/channel.c:1052:3\r\n```",
            "created_at": "2026-02-08T14:28:38Z",
            "html_url": "https://github.com/neovim/neovim/pull/37743#issuecomment-3867307998",
            "id": 3867307998,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/37743",
            "node_id": "IC_kwDOAPphoM7mgm_e",
            "performed_via_github_app": null,
            "pin": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3867307998/reactions"
            },
            "updated_at": "2026-02-08T14:28:38Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3867307998",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> After more thoughts I believe edit is not appropriate for this. buffer.c or funcs.c is more appropriate. I've moved these prompt-function implementation to buffer.c\r\n\r\nactually `src/nvim/eval/buffer.c` is probably best  ",
            "created_at": "2026-02-13T14:04:51Z",
            "html_url": "https://github.com/neovim/neovim/pull/37743#issuecomment-3897416840",
            "id": 3897416840,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/37743",
            "node_id": "IC_kwDOAPphoM7oTdyI",
            "performed_via_github_app": null,
            "pin": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3897416840/reactions"
            },
            "updated_at": "2026-02-13T14:04:51Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3897416840",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Let me just add that I am merging these changes locally as they progress and I am not encountering any problems.",
            "created_at": "2026-02-13T14:31:58Z",
            "html_url": "https://github.com/neovim/neovim/pull/37743#issuecomment-3897536879",
            "id": 3897536879,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/37743",
            "node_id": "IC_kwDOAPphoM7oT7Fv",
            "performed_via_github_app": null,
            "pin": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3897536879/reactions"
            },
            "updated_at": "2026-02-13T14:31:58Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3897536879",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11404453?v=4",
                "events_url": "https://api.github.com/users/przepompownia/events{/privacy}",
                "followers_url": "https://api.github.com/users/przepompownia/followers",
                "following_url": "https://api.github.com/users/przepompownia/following{/other_user}",
                "gists_url": "https://api.github.com/users/przepompownia/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/przepompownia",
                "id": 11404453,
                "login": "przepompownia",
                "node_id": "MDQ6VXNlcjExNDA0NDUz",
                "organizations_url": "https://api.github.com/users/przepompownia/orgs",
                "received_events_url": "https://api.github.com/users/przepompownia/received_events",
                "repos_url": "https://api.github.com/users/przepompownia/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/przepompownia/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/przepompownia/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/przepompownia",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "> actually src/nvim/eval/buffer.c is probably best \r\n\r\nYeah eval/buffer.c is better. migrating awayy",
            "created_at": "2026-02-14T16:47:24Z",
            "html_url": "https://github.com/neovim/neovim/pull/37743#issuecomment-3902160232",
            "id": 3902160232,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/37743",
            "node_id": "IC_kwDOAPphoM7olj1o",
            "performed_via_github_app": null,
            "pin": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3902160232/reactions"
            },
            "updated_at": "2026-02-14T16:47:24Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3902160232",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/13149513?v=4",
                "events_url": "https://api.github.com/users/shadmansaleh/events{/privacy}",
                "followers_url": "https://api.github.com/users/shadmansaleh/followers",
                "following_url": "https://api.github.com/users/shadmansaleh/following{/other_user}",
                "gists_url": "https://api.github.com/users/shadmansaleh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/shadmansaleh",
                "id": 13149513,
                "login": "shadmansaleh",
                "node_id": "MDQ6VXNlcjEzMTQ5NTEz",
                "organizations_url": "https://api.github.com/users/shadmansaleh/orgs",
                "received_events_url": "https://api.github.com/users/shadmansaleh/received_events",
                "repos_url": "https://api.github.com/users/shadmansaleh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/shadmansaleh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/shadmansaleh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/shadmansaleh",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Thank you all (@seandewar too for cases not covered here)!",
            "created_at": "2026-02-15T16:20:49Z",
            "html_url": "https://github.com/neovim/neovim/pull/37743#issuecomment-3904758625",
            "id": 3904758625,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/37743",
            "node_id": "IC_kwDOAPphoM7oveNh",
            "performed_via_github_app": null,
            "pin": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 2,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3904758625/reactions"
            },
            "updated_at": "2026-02-15T16:20:49Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3904758625",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11404453?v=4",
                "events_url": "https://api.github.com/users/przepompownia/events{/privacy}",
                "followers_url": "https://api.github.com/users/przepompownia/followers",
                "following_url": "https://api.github.com/users/przepompownia/following{/other_user}",
                "gists_url": "https://api.github.com/users/przepompownia/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/przepompownia",
                "id": 11404453,
                "login": "przepompownia",
                "node_id": "MDQ6VXNlcjExNDA0NDUz",
                "organizations_url": "https://api.github.com/users/przepompownia/orgs",
                "received_events_url": "https://api.github.com/users/przepompownia/received_events",
                "repos_url": "https://api.github.com/users/przepompownia/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/przepompownia/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/przepompownia/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/przepompownia",
                "user_view_type": "public"
            }
        }
    ],
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/37743/comments",
    "commits_url": "https://api.github.com/repos/neovim/neovim/pulls/37743/commits",
    "created_at": "2026-02-06T05:02:50Z",
    "diff_url": "https://github.com/neovim/neovim/pull/37743.diff",
    "draft": false,
    "head": {
        "label": "shadmansaleh:feat/prompt/allow_prompt_text_change_anytime",
        "ref": "feat/prompt/allow_prompt_text_change_anytime",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/shadmansaleh/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/shadmansaleh/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/shadmansaleh/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/shadmansaleh/neovim/branches{/branch}",
            "clone_url": "https://github.com/shadmansaleh/neovim.git",
            "collaborators_url": "https://api.github.com/repos/shadmansaleh/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/shadmansaleh/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/shadmansaleh/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/shadmansaleh/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/shadmansaleh/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/shadmansaleh/neovim/contributors",
            "created_at": "2021-03-16T15:07:33Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/shadmansaleh/neovim/deployments",
            "description": "Vim-fork focused on extensibility and usability",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/shadmansaleh/neovim/downloads",
            "events_url": "https://api.github.com/repos/shadmansaleh/neovim/events",
            "fork": true,
            "forks": 0,
            "forks_count": 0,
            "forks_url": "https://api.github.com/repos/shadmansaleh/neovim/forks",
            "full_name": "shadmansaleh/neovim",
            "git_commits_url": "https://api.github.com/repos/shadmansaleh/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/shadmansaleh/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/shadmansaleh/neovim/git/tags{/sha}",
            "git_url": "git://github.com/shadmansaleh/neovim.git",
            "has_discussions": false,
            "has_downloads": true,
            "has_issues": false,
            "has_pages": false,
            "has_projects": true,
            "has_pull_requests": true,
            "has_wiki": true,
            "homepage": "https://neovim.io",
            "hooks_url": "https://api.github.com/repos/shadmansaleh/neovim/hooks",
            "html_url": "https://github.com/shadmansaleh/neovim",
            "id": 348391941,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/shadmansaleh/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/shadmansaleh/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/shadmansaleh/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/shadmansaleh/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/shadmansaleh/neovim/labels{/name}",
            "language": "Vim Script",
            "languages_url": "https://api.github.com/repos/shadmansaleh/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/shadmansaleh/neovim/merges",
            "milestones_url": "https://api.github.com/repos/shadmansaleh/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "MDEwOlJlcG9zaXRvcnkzNDgzOTE5NDE=",
            "notifications_url": "https://api.github.com/repos/shadmansaleh/neovim/notifications{?since,all,participating}",
            "open_issues": 0,
            "open_issues_count": 0,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/13149513?v=4",
                "events_url": "https://api.github.com/users/shadmansaleh/events{/privacy}",
                "followers_url": "https://api.github.com/users/shadmansaleh/followers",
                "following_url": "https://api.github.com/users/shadmansaleh/following{/other_user}",
                "gists_url": "https://api.github.com/users/shadmansaleh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/shadmansaleh",
                "id": 13149513,
                "login": "shadmansaleh",
                "node_id": "MDQ6VXNlcjEzMTQ5NTEz",
                "organizations_url": "https://api.github.com/users/shadmansaleh/orgs",
                "received_events_url": "https://api.github.com/users/shadmansaleh/received_events",
                "repos_url": "https://api.github.com/users/shadmansaleh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/shadmansaleh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/shadmansaleh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/shadmansaleh",
                "user_view_type": "public"
            },
            "private": false,
            "pull_request_creation_policy": "all",
            "pulls_url": "https://api.github.com/repos/shadmansaleh/neovim/pulls{/number}",
            "pushed_at": "2026-02-16T06:11:43Z",
            "releases_url": "https://api.github.com/repos/shadmansaleh/neovim/releases{/id}",
            "size": 358227,
            "ssh_url": "git@github.com:shadmansaleh/neovim.git",
            "stargazers_count": 0,
            "stargazers_url": "https://api.github.com/repos/shadmansaleh/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/shadmansaleh/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/shadmansaleh/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/shadmansaleh/neovim/subscription",
            "svn_url": "https://github.com/shadmansaleh/neovim",
            "tags_url": "https://api.github.com/repos/shadmansaleh/neovim/tags",
            "teams_url": "https://api.github.com/repos/shadmansaleh/neovim/teams",
            "topics": [],
            "trees_url": "https://api.github.com/repos/shadmansaleh/neovim/git/trees{/sha}",
            "updated_at": "2026-02-15T15:16:48Z",
            "url": "https://api.github.com/repos/shadmansaleh/neovim",
            "visibility": "public",
            "watchers": 0,
            "watchers_count": 0,
            "web_commit_signoff_required": false
        },
        "sha": "4accbb0626b485632a3977a26e8ae00b90704028",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/13149513?v=4",
            "events_url": "https://api.github.com/users/shadmansaleh/events{/privacy}",
            "followers_url": "https://api.github.com/users/shadmansaleh/followers",
            "following_url": "https://api.github.com/users/shadmansaleh/following{/other_user}",
            "gists_url": "https://api.github.com/users/shadmansaleh/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/shadmansaleh",
            "id": 13149513,
            "login": "shadmansaleh",
            "node_id": "MDQ6VXNlcjEzMTQ5NTEz",
            "organizations_url": "https://api.github.com/users/shadmansaleh/orgs",
            "received_events_url": "https://api.github.com/users/shadmansaleh/received_events",
            "repos_url": "https://api.github.com/users/shadmansaleh/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/shadmansaleh/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/shadmansaleh/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/shadmansaleh",
            "user_view_type": "public"
        }
    },
    "html_url": "https://github.com/neovim/neovim/pull/37743",
    "id": 3253104001,
    "issue_url": "https://api.github.com/repos/neovim/neovim/issues/37743",
    "labels": [],
    "locked": false,
    "merge_commit_sha": "8ab511bba524bcd5b5913d1b1205b5e4fe3f7210",
    "merged_at": "2026-02-14T17:18:08Z",
    "milestone": null,
    "node_id": "PR_kwDOAPphoM7B5m2B",
    "number": 37743,
    "patch_url": "https://github.com/neovim/neovim/pull/37743.patch",
    "requested_reviewers": [],
    "requested_teams": [],
    "review_comment_url": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}",
    "review_comments_url": "https://api.github.com/repos/neovim/neovim/pulls/37743/comments",
    "state": "closed",
    "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/4accbb0626b485632a3977a26e8ae00b90704028",
    "title": "feat(prompt): allow prompt to be changed without disrupting user input",
    "updated_at": "2026-02-15T16:20:49Z",
    "url": "https://api.github.com/repos/neovim/neovim/pulls/37743",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/13149513?v=4",
        "events_url": "https://api.github.com/users/shadmansaleh/events{/privacy}",
        "followers_url": "https://api.github.com/users/shadmansaleh/followers",
        "following_url": "https://api.github.com/users/shadmansaleh/following{/other_user}",
        "gists_url": "https://api.github.com/users/shadmansaleh/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/shadmansaleh",
        "id": 13149513,
        "login": "shadmansaleh",
        "node_id": "MDQ6VXNlcjEzMTQ5NTEz",
        "organizations_url": "https://api.github.com/users/shadmansaleh/orgs",
        "received_events_url": "https://api.github.com/users/shadmansaleh/received_events",
        "repos_url": "https://api.github.com/users/shadmansaleh/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/shadmansaleh/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/shadmansaleh/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/shadmansaleh",
        "user_view_type": "public"
    }
}