{
    "_links": {
        "comments": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/33320/comments"
        },
        "commits": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/33320/commits"
        },
        "html": {
            "href": "https://github.com/neovim/neovim/pull/33320"
        },
        "issue": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/33320"
        },
        "review_comment": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}"
        },
        "review_comments": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/33320/comments"
        },
        "self": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/33320"
        },
        "statuses": {
            "href": "https://api.github.com/repos/neovim/neovim/statuses/6ec56eda0cc0fb96725bff175475a6bb3f109585"
        }
    },
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "auto_merge": null,
    "base": {
        "label": "neovim:master",
        "ref": "master",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/neovim/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/neovim/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/neovim/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/neovim/neovim/branches{/branch}",
            "clone_url": "https://github.com/neovim/neovim.git",
            "collaborators_url": "https://api.github.com/repos/neovim/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/neovim/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/neovim/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/neovim/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/neovim/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/neovim/neovim/contributors",
            "created_at": "2014-01-31T13:39:22Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/neovim/neovim/deployments",
            "description": "Vim-fork focused on extensibility and usability",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/neovim/neovim/downloads",
            "events_url": "https://api.github.com/repos/neovim/neovim/events",
            "fork": false,
            "forks": 6037,
            "forks_count": 6037,
            "forks_url": "https://api.github.com/repos/neovim/neovim/forks",
            "full_name": "neovim/neovim",
            "git_commits_url": "https://api.github.com/repos/neovim/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/neovim/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/neovim/neovim/git/tags{/sha}",
            "git_url": "git://github.com/neovim/neovim.git",
            "has_discussions": true,
            "has_downloads": true,
            "has_issues": true,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://neovim.io",
            "hooks_url": "https://api.github.com/repos/neovim/neovim/hooks",
            "html_url": "https://github.com/neovim/neovim",
            "id": 16408992,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/neovim/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/neovim/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/neovim/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/neovim/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/neovim/neovim/labels{/name}",
            "language": "Vim Script",
            "languages_url": "https://api.github.com/repos/neovim/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/neovim/neovim/merges",
            "milestones_url": "https://api.github.com/repos/neovim/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "MDEwOlJlcG9zaXRvcnkxNjQwODk5Mg==",
            "notifications_url": "https://api.github.com/repos/neovim/neovim/notifications{?since,all,participating}",
            "open_issues": 1913,
            "open_issues_count": 1913,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
                "events_url": "https://api.github.com/users/neovim/events{/privacy}",
                "followers_url": "https://api.github.com/users/neovim/followers",
                "following_url": "https://api.github.com/users/neovim/following{/other_user}",
                "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/neovim",
                "id": 6471485,
                "login": "neovim",
                "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
                "organizations_url": "https://api.github.com/users/neovim/orgs",
                "received_events_url": "https://api.github.com/users/neovim/received_events",
                "repos_url": "https://api.github.com/users/neovim/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
                "type": "Organization",
                "url": "https://api.github.com/users/neovim",
                "user_view_type": "public"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/neovim/neovim/pulls{/number}",
            "pushed_at": "2025-04-21T23:49:28Z",
            "releases_url": "https://api.github.com/repos/neovim/neovim/releases{/id}",
            "size": 318183,
            "ssh_url": "git@github.com:neovim/neovim.git",
            "stargazers_count": 88840,
            "stargazers_url": "https://api.github.com/repos/neovim/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/neovim/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/neovim/neovim/subscription",
            "svn_url": "https://github.com/neovim/neovim",
            "tags_url": "https://api.github.com/repos/neovim/neovim/tags",
            "teams_url": "https://api.github.com/repos/neovim/neovim/teams",
            "topics": [
                "api",
                "c",
                "lua",
                "neovim",
                "nvim",
                "text-editor",
                "vim"
            ],
            "trees_url": "https://api.github.com/repos/neovim/neovim/git/trees{/sha}",
            "updated_at": "2025-04-22T02:39:42Z",
            "url": "https://api.github.com/repos/neovim/neovim",
            "visibility": "public",
            "watchers": 88840,
            "watchers_count": 88840,
            "web_commit_signoff_required": false
        },
        "sha": "51a967d58acc74db176c1955a7fa754a2708067b",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
            "events_url": "https://api.github.com/users/neovim/events{/privacy}",
            "followers_url": "https://api.github.com/users/neovim/followers",
            "following_url": "https://api.github.com/users/neovim/following{/other_user}",
            "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/neovim",
            "id": 6471485,
            "login": "neovim",
            "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
            "organizations_url": "https://api.github.com/users/neovim/orgs",
            "received_events_url": "https://api.github.com/users/neovim/received_events",
            "repos_url": "https://api.github.com/users/neovim/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
            "type": "Organization",
            "url": "https://api.github.com/users/neovim",
            "user_view_type": "public"
        }
    },
    "body": "Closes #33318 ",
    "closed_at": null,
    "comment_data": [
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/33320#discussion_r2031079981"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/33320"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2031079981"
                }
            },
            "author_association": "MEMBER",
            "body": "Line length over limit",
            "commit_id": "6ec56eda0cc0fb96725bff175475a6bb3f109585",
            "created_at": "2025-04-07T11:54:32Z",
            "diff_hunk": "@@ -5172,14 +5180,15 @@ M.funcs = {\n     signature = 'has_key({dict}, {key})',\n   },\n   haslocaldir = {\n-    args = { 0, 2 },\n+    args = { 0, 3 },\n     base = 1,\n     desc = [=[\n       The result is a Number, which is 1 when the window has set a\n       local path via |:lcd| or when {winnr} is -1 and the tabpage\n-      has set a local path via |:tcd|, otherwise 0.\n+      has set a local path via |:tcd|, or when {winnr} and {tabnr} are\n+      -1 and {bufnr} has set a local path via |:bcd|, otherwise 0.\n \n-      Tabs and windows are identified by their respective numbers,\n+      Tabs, windows and buffers are identified by their respective numbers,",
            "html_url": "https://github.com/neovim/neovim/pull/33320#discussion_r2031079981",
            "id": 2031079981,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM55D9It",
            "original_commit_id": "825f5743dfe0c82326cf64ceba8b1c11ce5b08b9",
            "original_line": 5191,
            "original_position": 65,
            "original_start_line": null,
            "path": "src/nvim/eval.lua",
            "position": null,
            "pull_request_review_id": 2746551067,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/33320",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2031079981/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-07T11:54:33Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2031079981",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/33320#discussion_r2031110987"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/33320"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2031110987"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Good catch. Am I supposed to amend and force push or create a new commit?",
            "commit_id": "6ec56eda0cc0fb96725bff175475a6bb3f109585",
            "created_at": "2025-04-07T12:13:11Z",
            "diff_hunk": "@@ -5172,14 +5180,15 @@ M.funcs = {\n     signature = 'has_key({dict}, {key})',\n   },\n   haslocaldir = {\n-    args = { 0, 2 },\n+    args = { 0, 3 },\n     base = 1,\n     desc = [=[\n       The result is a Number, which is 1 when the window has set a\n       local path via |:lcd| or when {winnr} is -1 and the tabpage\n-      has set a local path via |:tcd|, otherwise 0.\n+      has set a local path via |:tcd|, or when {winnr} and {tabnr} are\n+      -1 and {bufnr} has set a local path via |:bcd|, otherwise 0.\n \n-      Tabs and windows are identified by their respective numbers,\n+      Tabs, windows and buffers are identified by their respective numbers,",
            "html_url": "https://github.com/neovim/neovim/pull/33320#discussion_r2031110987",
            "id": 2031110987,
            "in_reply_to_id": 2031079981,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM55EEtL",
            "original_commit_id": "825f5743dfe0c82326cf64ceba8b1c11ce5b08b9",
            "original_line": 5191,
            "original_position": 65,
            "original_start_line": null,
            "path": "src/nvim/eval.lua",
            "position": null,
            "pull_request_review_id": 2746602541,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/33320",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2031110987/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-07T12:13:11Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2031110987",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/77233589?v=4",
                "events_url": "https://api.github.com/users/msaher/events{/privacy}",
                "followers_url": "https://api.github.com/users/msaher/followers",
                "following_url": "https://api.github.com/users/msaher/following{/other_user}",
                "gists_url": "https://api.github.com/users/msaher/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/msaher",
                "id": 77233589,
                "login": "msaher",
                "node_id": "MDQ6VXNlcjc3MjMzNTg5",
                "organizations_url": "https://api.github.com/users/msaher/orgs",
                "received_events_url": "https://api.github.com/users/msaher/received_events",
                "repos_url": "https://api.github.com/users/msaher/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/msaher/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/msaher/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/msaher",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/33320#discussion_r2031119250"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/33320"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2031119250"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "`:h chdir()` docs must be updated as well. Forgot about that",
            "commit_id": "6ec56eda0cc0fb96725bff175475a6bb3f109585",
            "created_at": "2025-04-07T12:18:28Z",
            "diff_hunk": "@@ -1367,10 +1368,16 @@ exist, the next-higher scope in the hierarchy applies.\n \t\t\t\t\t\t\t*:tch* *:tchdir*\n :tch[dir][!]\t\tSame as |:tcd|.\n \n+\t\t\t\t\t\t\t*:bc* *:bcd*\n+:bc[d][!] {path}\tLike |:bcd|, but only set the current directory for the\n+\t\t\tcurrent buffer.  The current directory for other\n+\t\t\twindows or buffers or tabs is not changed.\n+\n+",
            "html_url": "https://github.com/neovim/neovim/pull/33320#discussion_r2031119250",
            "id": 2031119250,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM55EGuS",
            "original_commit_id": "825f5743dfe0c82326cf64ceba8b1c11ce5b08b9",
            "original_line": 1376,
            "original_position": 25,
            "original_start_line": 1371,
            "path": "runtime/doc/editing.txt",
            "position": null,
            "pull_request_review_id": 2746616195,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/33320",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2031119250/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-04-07T12:18:46Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2031119250",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/77233589?v=4",
                "events_url": "https://api.github.com/users/msaher/events{/privacy}",
                "followers_url": "https://api.github.com/users/msaher/followers",
                "following_url": "https://api.github.com/users/msaher/following{/other_user}",
                "gists_url": "https://api.github.com/users/msaher/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/msaher",
                "id": 77233589,
                "login": "msaher",
                "node_id": "MDQ6VXNlcjc3MjMzNTg5",
                "organizations_url": "https://api.github.com/users/msaher/orgs",
                "received_events_url": "https://api.github.com/users/msaher/received_events",
                "repos_url": "https://api.github.com/users/msaher/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/msaher/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/msaher/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/msaher",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/33320#discussion_r2031155021"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/33320"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2031155021"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Need to add `E5007`",
            "commit_id": "6ec56eda0cc0fb96725bff175475a6bb3f109585",
            "created_at": "2025-04-07T12:39:47Z",
            "diff_hunk": "@@ -5172,30 +5183,36 @@ M.funcs = {\n     signature = 'has_key({dict}, {key})',\n   },\n   haslocaldir = {\n-    args = { 0, 2 },\n+    args = { 0, 3 },\n     base = 1,\n     desc = [=[\n       The result is a Number, which is 1 when the window has set a\n       local path via |:lcd| or when {winnr} is -1 and the tabpage\n-      has set a local path via |:tcd|, otherwise 0.\n+      has set a local path via |:tcd|, or when {winnr} and {tabnr} are\n+      -1 and {bufnr} has set a local path via |:bcd|, otherwise 0.\n \n-      Tabs and windows are identified by their respective numbers,\n-      0 means current tab or window. Missing argument implies 0.\n-      Thus the following are equivalent: >vim\n+      Tabs, windows and buffers are identified by their respective\n+      numbers, 0 means current tab or window. Missing argument\n+      implies 0. Thus the following are equivalent: >vim\n       \techo haslocaldir()\n       \techo haslocaldir(0)\n       \techo haslocaldir(0, 0)\n       <With {winnr} use that window in the current tabpage.\n       With {winnr} and {tabnr} use the window in that tabpage.\n       {winnr} can be the window number or the |window-ID|.\n       If {winnr} is -1 it is ignored, only the tab is resolved.\n-      Throw error if the arguments are invalid. |E5000| |E5001| |E5002|\n+      If {bufnr} is provided, {winnr} and {tabnr} must be -1 and\n+      only the buffer is resolved.\n+      Examples of buffer usage: >vim\n+        haslocaldir(-1, -1, 0)  \" Check if current buffer has local directory\n+        haslocaldir(-1, -1, 3)  \" Check if buffer #3 has local directory\n+      >Throw error if the arguments are invalid. |E5000| |E5001| |E5002| |E5006|",
            "html_url": "https://github.com/neovim/neovim/pull/33320#discussion_r2031155021",
            "id": 2031155021,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM55EPdN",
            "original_commit_id": "0fd6565d79bc21269d47a8147553d0e8a2668a22",
            "original_line": 5209,
            "original_position": 93,
            "original_start_line": null,
            "path": "src/nvim/eval.lua",
            "position": null,
            "pull_request_review_id": 2746674421,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/33320",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2031155021/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-07T12:39:47Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2031155021",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/77233589?v=4",
                "events_url": "https://api.github.com/users/msaher/events{/privacy}",
                "followers_url": "https://api.github.com/users/msaher/followers",
                "following_url": "https://api.github.com/users/msaher/following{/other_user}",
                "gists_url": "https://api.github.com/users/msaher/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/msaher",
                "id": 77233589,
                "login": "msaher",
                "node_id": "MDQ6VXNlcjc3MjMzNTg5",
                "organizations_url": "https://api.github.com/users/msaher/orgs",
                "received_events_url": "https://api.github.com/users/msaher/received_events",
                "repos_url": "https://api.github.com/users/msaher/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/msaher/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/msaher/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/msaher",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/33320#discussion_r2031160899"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/33320"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2031160899"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "forgot to test `err5007`",
            "commit_id": "6ec56eda0cc0fb96725bff175475a6bb3f109585",
            "created_at": "2025-04-07T12:42:54Z",
            "diff_hunk": "@@ -271,14 +392,19 @@ for _, cmd in ipairs { 'getcwd', 'haslocaldir' } do\n       eq(err474, exc_exec('call ' .. cmd .. '(-2)'))\n     end)\n     local err5001 = 'Vim(call):E5001: Higher scope cannot be -1 if lower scope is >= 0.'\n+    local err5006 = 'Vim(call):E5006: Window and tab scope must be -1 when using buffer scope'",
            "html_url": "https://github.com/neovim/neovim/pull/33320#discussion_r2031160899",
            "id": 2031160899,
            "line": 434,
            "node_id": "PRRC_kwDOAPphoM55EQ5D",
            "original_commit_id": "0fd6565d79bc21269d47a8147553d0e8a2668a22",
            "original_line": 395,
            "original_position": 170,
            "original_start_line": null,
            "path": "test/functional/ex_cmds/cd_spec.lua",
            "position": 209,
            "pull_request_review_id": 2746684822,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/33320",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2031160899/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-07T12:42:54Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2031160899",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/77233589?v=4",
                "events_url": "https://api.github.com/users/msaher/events{/privacy}",
                "followers_url": "https://api.github.com/users/msaher/followers",
                "following_url": "https://api.github.com/users/msaher/following{/other_user}",
                "gists_url": "https://api.github.com/users/msaher/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/msaher",
                "id": 77233589,
                "login": "msaher",
                "node_id": "MDQ6VXNlcjc3MjMzNTg5",
                "organizations_url": "https://api.github.com/users/msaher/orgs",
                "received_events_url": "https://api.github.com/users/msaher/received_events",
                "repos_url": "https://api.github.com/users/msaher/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/msaher/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/msaher/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/msaher",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/33320#discussion_r2031295407"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/33320"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2031295407"
                }
            },
            "author_association": "MEMBER",
            "body": "For new tests, use `eq(..., t.pcall_err(n.command, ...))` instead of `exc_exec` (which is deprecated). That reduces the cleanup work we need to do later.  `exc_exec` is not needed and will be removed.",
            "commit_id": "6ec56eda0cc0fb96725bff175475a6bb3f109585",
            "created_at": "2025-04-07T13:51:44Z",
            "diff_hunk": "@@ -271,14 +392,23 @@ for _, cmd in ipairs { 'getcwd', 'haslocaldir' } do\n       eq(err474, exc_exec('call ' .. cmd .. '(-2)'))\n     end)\n     local err5001 = 'Vim(call):E5001: Higher scope cannot be -1 if lower scope is >= 0.'\n+    local err5006 = 'Vim(call):E5006: Window and tab scope must be -1 when using buffer scope'\n+    local err5007 = 'Vim(call):E5007: Cannot find buffer number.'\n     it('fails on -1 if previous arg is >=0', function()\n       eq(err5001, exc_exec('call ' .. cmd .. '(0, -1)'))\n     end)\n+    it('fails when 1st and 2nd args != -1 when 3rd arg > -1', function()\n+      eq(err5006, exc_exec('call ' .. cmd .. '(0, 0, 0)'))\n+      eq(err5006, exc_exec('call ' .. cmd .. '(1, 2, 3)'))",
            "html_url": "https://github.com/neovim/neovim/pull/33320#discussion_r2031295407",
            "id": 2031295407,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM55Exuv",
            "original_commit_id": "0383719b1172fd8ab49bd3227e8dd33d88a7b717",
            "original_line": 402,
            "original_position": 177,
            "original_start_line": null,
            "path": "test/functional/ex_cmds/cd_spec.lua",
            "position": null,
            "pull_request_review_id": 2746913080,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/33320",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2031295407/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-07T13:52:03Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2031295407",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/33320#discussion_r2032172022"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/33320"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2032172022"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n```",
            "commit_id": "6ec56eda0cc0fb96725bff175475a6bb3f109585",
            "created_at": "2025-04-08T00:06:01Z",
            "diff_hunk": "@@ -1367,10 +1368,16 @@ exist, the next-higher scope in the hierarchy applies.\n \t\t\t\t\t\t\t*:tch* *:tchdir*\n :tch[dir][!]\t\tSame as |:tcd|.\n \n+\t\t\t\t\t\t\t*:bc* *:bcd*\n+:bc[d][!] {path}\tLike |:bcd|, but only set the current directory for the\n+\t\t\tcurrent buffer.  The current directory for other\n+\t\t\twindows or buffers or tabs is not changed.\n+",
            "html_url": "https://github.com/neovim/neovim/pull/33320#discussion_r2032172022",
            "id": 2032172022,
            "line": 1375,
            "node_id": "PRRC_kwDOAPphoM55IHv2",
            "original_commit_id": "4f9fe0c599e7cc824ae33e51f3820953767bc4b2",
            "original_line": 1375,
            "original_position": 24,
            "original_start_line": null,
            "path": "runtime/doc/editing.txt",
            "position": 24,
            "pull_request_review_id": 2748357905,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/33320",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2032172022/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-04-08T00:06:01Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2032172022",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/33320#discussion_r2036540819"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/33320"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2036540819"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "This will not work with `:enew` because it will call `buflist_new()` above with the `BLN_CURBUF` flag, and that in return will call `buf_freeall()`, freeing `curbuf->b_localdir` and setting it to `NULL`. Effectively ignoring the buffer-local directory.\r\n\r\nA direct solution to this problem is to `xstrcpy(curbuf->b_localdir)` before `buf = buflist_new()` is called and assigning it to `buf->b_localdir` after. However, it might be more consistent if there was a way to communicate to `buf_freeall()` to NOT free the buffer-local directory. That way, calling `buflist_new()` with `BLN_CURBUF` will always keep the buffer local directory.\r\n\r\nWith that being said, there are other calls to `buflist_new()` with `BLN_CURBUF`. Always re-using the buffer-local directory might have unforeseen side effects. It might be wise to test these calls too.",
            "commit_id": "6ec56eda0cc0fb96725bff175475a6bb3f109585",
            "created_at": "2025-04-10T05:36:55Z",
            "diff_hunk": "@@ -2709,6 +2709,12 @@ int do_ecmd(int fnum, char *ffname, char *sfname, exarg_T *eap, linenr_T newlnum\n     redraw_curbuf_later(UPD_NOT_VALID);  // redraw this buffer later\n   }\n \n+  // If editing a buffer in the current window, make sure to update to the\n+  // buffer's working directory.\n+  if (oldwin == curwin) {\n+    fix_current_dir(false);\n+  }\n+",
            "html_url": "https://github.com/neovim/neovim/pull/33320#discussion_r2036540819",
            "id": 2036540819,
            "line": 2717,
            "node_id": "PRRC_kwDOAPphoM55YyWT",
            "original_commit_id": "e6aba4e1723bc4cd17874c129d0e80dd65e9c44f",
            "original_line": 2717,
            "original_position": 9,
            "original_start_line": 2712,
            "path": "src/nvim/ex_cmds.c",
            "position": 9,
            "pull_request_review_id": 2755390840,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/33320",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2036540819/reactions"
            },
            "side": "RIGHT",
            "start_line": 2712,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-04-10T06:03:10Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2036540819",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/77233589?v=4",
                "events_url": "https://api.github.com/users/msaher/events{/privacy}",
                "followers_url": "https://api.github.com/users/msaher/followers",
                "following_url": "https://api.github.com/users/msaher/following{/other_user}",
                "gists_url": "https://api.github.com/users/msaher/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/msaher",
                "id": 77233589,
                "login": "msaher",
                "node_id": "MDQ6VXNlcjc3MjMzNTg5",
                "organizations_url": "https://api.github.com/users/msaher/orgs",
                "received_events_url": "https://api.github.com/users/msaher/received_events",
                "repos_url": "https://api.github.com/users/msaher/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/msaher/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/msaher/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/msaher",
                "user_view_type": "public"
            }
        }
    ],
    "comment_regular_data": [
        {
            "author_association": "MEMBER",
            "body": "Looks like there was some merge/rebase confusion here, since this has unrelated changes from already-merged PRs.\r\n\r\nGiven the discussion in https://github.com/neovim/neovim/issues/8610, it does seem like this could be a necessary feature. Need feedback from others.\r\n\r\nNote also that a requirement is to have an ergonomic way to get the buffer's \"current directory\". At least via `getcwd()`, but also maybe a buffer-local option or variable? (Need to hear comments on that.)",
            "created_at": "2025-04-05T13:13:33Z",
            "html_url": "https://github.com/neovim/neovim/pull/33320#issuecomment-2780718613",
            "id": 2780718613,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33320",
            "node_id": "IC_kwDOAPphoM6lvmYV",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2780718613/reactions"
            },
            "updated_at": "2025-04-05T13:13:33Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2780718613",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "> Looks like there was some merge/rebase confusion here, since this has unrelated changes from already-merged PRs.\r\n\r\nApologies. I'm kinda new to this. Do I rebase on top of master and force push? I think I was using an outdated master branch.\r\n\r\n> ergonomic way to get the buffer's \"current directory\"\r\n\r\nThis PR extends `getcwd()` to take a third argument such that `getcwd(-1, -1, bunfr)` returns the buffers' working directory.\r\n\r\n > maybe buffer-local option or variable?\r\n\r\n`:lcd` does not set window-local options, so it will be inconsistent if `:bcd` sets buffer-local options.",
            "created_at": "2025-04-05T13:28:39Z",
            "html_url": "https://github.com/neovim/neovim/pull/33320#issuecomment-2780724536",
            "id": 2780724536,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33320",
            "node_id": "IC_kwDOAPphoM6lvn04",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2780724536/reactions"
            },
            "updated_at": "2025-04-05T13:28:39Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2780724536",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/77233589?v=4",
                "events_url": "https://api.github.com/users/msaher/events{/privacy}",
                "followers_url": "https://api.github.com/users/msaher/followers",
                "following_url": "https://api.github.com/users/msaher/following{/other_user}",
                "gists_url": "https://api.github.com/users/msaher/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/msaher",
                "id": 77233589,
                "login": "msaher",
                "node_id": "MDQ6VXNlcjc3MjMzNTg5",
                "organizations_url": "https://api.github.com/users/msaher/orgs",
                "received_events_url": "https://api.github.com/users/msaher/received_events",
                "repos_url": "https://api.github.com/users/msaher/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/msaher/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/msaher/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/msaher",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> Do I rebase on top of master and force push?\r\n\r\nyes",
            "created_at": "2025-04-05T15:33:04Z",
            "html_url": "https://github.com/neovim/neovim/pull/33320#issuecomment-2780842861",
            "id": 2780842861,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33320",
            "node_id": "IC_kwDOAPphoM6lwEtt",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2780842861/reactions"
            },
            "updated_at": "2025-04-05T15:33:04Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2780842861",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I think I should give an overview of the changes.\r\n\r\nThis PR adds a `:bcd` command to change buffer-local directories. This is done by adding a new entry to the `CdScope` enum. The new hierarchy is `window-local -> buffer-local -> tab-local -> global`. The `getcwd()` and `haslocaldir()` functions will follow this hierarchy.\r\n\r\nIt's my personal opinion that buffer-local directories should have less priority than window-local ones, and more priority than tab-local ones. I'm open to discuss this if there are objections.  \r\n\r\nThe `:cd`, `:tcd` and `:lcd` family of commands do not set any options, so following that tradition, `:bcd` does not set a buffer-local option. To query the current directory, use `getcwd()`.\r\n\r\nThis PR updates `getcwd()` and `haslocaldir()` to support buffer-local directories. This new signature is `getcwd({winnr}, {tabnr}, {bufnr})`. When `{bufnr}` is provided, `{winnr}` and `{tabnr}` MUST be -1. Otherwise, it's an error (because passing a window or tab doesn't make sense). When `{bufnr}` is missing, and `{winnr}` or `{tabnr}` is provided, the behavior is the same as the old versions. `haslocaldir()` has similar updates.\r\n\r\nI'd like some feedback on this potentially confusing edge case this:\r\n\r\n```vimscript\r\ngetcwd(-1)        \"a) get tab-local directory. fine.\r\ngetcwd(-1, 0)     \"b) get tab-local directory. fine\r\ngetcwd(-1, -1)    \"c) get global directory, NOT buffer-local directory. Isn't that confusing?\r\ngetcwd(-1, -1, 0) \"d) get buffer-local directory. fine.\r\n```\r\n  \r\nOne could argue that `c)` should return a buffer-local directory rather than a global one because its consistent with `a)` and the pattern that -1 means give me the \"next\" scope. However, the current documentation of `:h getcwd` says\r\n\r\n> If both `{winnr}` and `{tabnr}` are -1 the global working directory is returned.\r\n\r\nSo changing `c)` to return a global directory would technically be a breaking change.\r\n\r\nImplementation wise, vim calls `win_fix_current_dir()` to update the directory when navigating between windows. The introduction of buffer-local directories means switching to a different buffer in the same window could trigger a directory change. Thus, `win_fix_current_dir()` has been changed into `fix_current_dir(bool caused_by_win)`. \r\n\r\nThe `DirChangedPre` and `DirChanged` auto commands are now aware of buffer-local directories and their `scope` event key may now take the value of `\"buffer\"`.\r\n\r\nFinally, `:bcd` is restored by `:mksession`. This is done by creating a autocmd that runs `++once` on `BufEnter` to call `:bcd`.  \r\n",
            "created_at": "2025-04-06T03:10:02Z",
            "html_url": "https://github.com/neovim/neovim/pull/33320#issuecomment-2781194173",
            "id": 2781194173,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33320",
            "node_id": "IC_kwDOAPphoM6lxae9",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2781194173/reactions"
            },
            "updated_at": "2025-04-09T18:11:53Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2781194173",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/77233589?v=4",
                "events_url": "https://api.github.com/users/msaher/events{/privacy}",
                "followers_url": "https://api.github.com/users/msaher/followers",
                "following_url": "https://api.github.com/users/msaher/following{/other_user}",
                "gists_url": "https://api.github.com/users/msaher/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/msaher",
                "id": 77233589,
                "login": "msaher",
                "node_id": "MDQ6VXNlcjc3MjMzNTg5",
                "organizations_url": "https://api.github.com/users/msaher/orgs",
                "received_events_url": "https://api.github.com/users/msaher/received_events",
                "repos_url": "https://api.github.com/users/msaher/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/msaher/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/msaher/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/msaher",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "This looks rather complete. I don't have any objections, waiting to hear other comments...\r\n\r\nSince you are thinking about this, is there an example usage you can provide in lsp.txt? And any other concrete usage examples will help.\r\n\r\nTo fill out the \"project\" concept (not this PR), we may need a function that makes it easy for plugins to \"get all the buffers for a given workdir\" (pseudoname [get_project_bufs](https://github.com/neovim/neovim/issues/8610#issuecomment-1367994885)). That also may involve \"nested\" projects...\r\n\r\n> So changing `c)` to return a global directory would technically be a breaking change.\r\n\r\nYeah, changing that would be very expensive.\r\n\r\n\r\n\r\n> buffer-local directories should have less priority than window-local ones, and more priority than tab-local ones.\r\n\r\nMakes sense.",
            "created_at": "2025-04-07T10:40:52Z",
            "html_url": "https://github.com/neovim/neovim/pull/33320#issuecomment-2782881538",
            "id": 2782881538,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33320",
            "node_id": "IC_kwDOAPphoM6l32cC",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 1,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2782881538/reactions"
            },
            "updated_at": "2025-04-07T10:40:52Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2782881538",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "> Since you are thinking about this, is there an example usage you can provide in lsp.txt? And any other concrete usage examples will help.\r\n\r\nI may be inaccurate in my assessment (as I'm not a heavy lsp user) but my understanding of the \"pain point\" is that most lsp servers automatically figure out the root directory for a buffer, but neovim's directory remains the same, which may be undesirable for some, as ex-commands like `:{make, grep, term, edit}` do not respect what the lsp server considers the \"project\". \r\n\r\nIf what I said above is correct, then I suggest adding this example to `lsp.txt` to sync the buffer's directory with the lsp server's root directory: \r\n\r\n```lua\r\nvim.api.nvim_create_autocmd(\"LspAttach\", {\r\n    group = vim.api.nvim_create_augroup(\"my.lsp.bcd\", { clear = true }),\r\n    callback = function(ctx)\r\n        local client = vim.lsp.get_client_by_id(ctx.data.client_id)\r\n        if client and client.root_dir then\r\n            vim.api.nvim_buf_call(ctx.buf, function()\r\n                vim.cmd.bcd(client.root_dir)\r\n            end)\r\n        end\r\n    end\r\n})\r\n```\r\n\r\nOutside of lsp, users may explore a library's codebase or a different project on a whim. They may decide to `:grep` or `:term find` their way through them, and having to make sure neovim is in the \"correct\" directory acts as friction. We may want to add an example in the docs (where?) that acts as a [vim-rooter](https://github.com/airblade/vim-rooter) alternative:\r\n\r\n\r\n```lua\r\nvim.api.nvim_create_autocmd(\"BufRead\", {\r\n    group = vim.api.nvim_create_augroup(\"my.bcd\", { clear = true }),\r\n    callback = function(ctx)\r\n        vim.api.nvim_buf_call(ctx.buf, function()\r\n            local root = vim.fs.root(ctx.buf, { '.git', 'pyproject.toml', 'node_modules', 'Makefile' })\r\n            vim.cmd.bcd(root)\r\n        end)\r\n    end\r\n})\r\n```\r\n\r\n(an advantage over `vim-rooter` is that `:bcd` is easy to override in an ad-hoc manner).\r\n\r\nI'd like to hear some feedback on these examples.\r\n",
            "created_at": "2025-04-07T18:21:29Z",
            "html_url": "https://github.com/neovim/neovim/pull/33320#issuecomment-2784195398",
            "id": 2784195398,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33320",
            "node_id": "IC_kwDOAPphoM6l83NG",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2784195398/reactions"
            },
            "updated_at": "2025-04-08T02:47:30Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2784195398",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/77233589?v=4",
                "events_url": "https://api.github.com/users/msaher/events{/privacy}",
                "followers_url": "https://api.github.com/users/msaher/followers",
                "following_url": "https://api.github.com/users/msaher/following{/other_user}",
                "gists_url": "https://api.github.com/users/msaher/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/msaher",
                "id": 77233589,
                "login": "msaher",
                "node_id": "MDQ6VXNlcjc3MjMzNTg5",
                "organizations_url": "https://api.github.com/users/msaher/orgs",
                "received_events_url": "https://api.github.com/users/msaher/received_events",
                "repos_url": "https://api.github.com/users/msaher/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/msaher/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/msaher/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/msaher",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "It might be a good idea to replace the snippet in `:h terminal-osc7` to use `:bcd` instead of `:cd`. Thoughts?",
            "created_at": "2025-04-20T12:12:54Z",
            "html_url": "https://github.com/neovim/neovim/pull/33320#issuecomment-2817142525",
            "id": 2817142525,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33320",
            "node_id": "IC_kwDOAPphoM6n6i79",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2817142525/reactions"
            },
            "updated_at": "2025-04-20T12:20:02Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2817142525",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/77233589?v=4",
                "events_url": "https://api.github.com/users/msaher/events{/privacy}",
                "followers_url": "https://api.github.com/users/msaher/followers",
                "following_url": "https://api.github.com/users/msaher/following{/other_user}",
                "gists_url": "https://api.github.com/users/msaher/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/msaher",
                "id": 77233589,
                "login": "msaher",
                "node_id": "MDQ6VXNlcjc3MjMzNTg5",
                "organizations_url": "https://api.github.com/users/msaher/orgs",
                "received_events_url": "https://api.github.com/users/msaher/received_events",
                "repos_url": "https://api.github.com/users/msaher/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/msaher/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/msaher/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/msaher",
                "user_view_type": "public"
            }
        }
    ],
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/33320/comments",
    "commits_url": "https://api.github.com/repos/neovim/neovim/pulls/33320/commits",
    "created_at": "2025-04-04T20:50:21Z",
    "diff_url": "https://github.com/neovim/neovim/pull/33320.diff",
    "draft": true,
    "head": {
        "label": "msaher:bcd",
        "ref": "bcd",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/msaher/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/msaher/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/msaher/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/msaher/neovim/branches{/branch}",
            "clone_url": "https://github.com/msaher/neovim.git",
            "collaborators_url": "https://api.github.com/repos/msaher/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/msaher/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/msaher/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/msaher/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/msaher/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/msaher/neovim/contributors",
            "created_at": "2022-04-27T14:54:51Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/msaher/neovim/deployments",
            "description": "Vim-fork focused on extensibility and usability",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/msaher/neovim/downloads",
            "events_url": "https://api.github.com/repos/msaher/neovim/events",
            "fork": true,
            "forks": 0,
            "forks_count": 0,
            "forks_url": "https://api.github.com/repos/msaher/neovim/forks",
            "full_name": "msaher/neovim",
            "git_commits_url": "https://api.github.com/repos/msaher/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/msaher/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/msaher/neovim/git/tags{/sha}",
            "git_url": "git://github.com/msaher/neovim.git",
            "has_discussions": false,
            "has_downloads": true,
            "has_issues": false,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://neovim.io",
            "hooks_url": "https://api.github.com/repos/msaher/neovim/hooks",
            "html_url": "https://github.com/msaher/neovim",
            "id": 486236747,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/msaher/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/msaher/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/msaher/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/msaher/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/msaher/neovim/labels{/name}",
            "language": "Vim Script",
            "languages_url": "https://api.github.com/repos/msaher/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/msaher/neovim/merges",
            "milestones_url": "https://api.github.com/repos/msaher/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "R_kgDOHPtiSw",
            "notifications_url": "https://api.github.com/repos/msaher/neovim/notifications{?since,all,participating}",
            "open_issues": 0,
            "open_issues_count": 0,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/77233589?v=4",
                "events_url": "https://api.github.com/users/msaher/events{/privacy}",
                "followers_url": "https://api.github.com/users/msaher/followers",
                "following_url": "https://api.github.com/users/msaher/following{/other_user}",
                "gists_url": "https://api.github.com/users/msaher/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/msaher",
                "id": 77233589,
                "login": "msaher",
                "node_id": "MDQ6VXNlcjc3MjMzNTg5",
                "organizations_url": "https://api.github.com/users/msaher/orgs",
                "received_events_url": "https://api.github.com/users/msaher/received_events",
                "repos_url": "https://api.github.com/users/msaher/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/msaher/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/msaher/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/msaher",
                "user_view_type": "public"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/msaher/neovim/pulls{/number}",
            "pushed_at": "2025-04-15T05:27:22Z",
            "releases_url": "https://api.github.com/repos/msaher/neovim/releases{/id}",
            "size": 311372,
            "ssh_url": "git@github.com:msaher/neovim.git",
            "stargazers_count": 0,
            "stargazers_url": "https://api.github.com/repos/msaher/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/msaher/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/msaher/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/msaher/neovim/subscription",
            "svn_url": "https://github.com/msaher/neovim",
            "tags_url": "https://api.github.com/repos/msaher/neovim/tags",
            "teams_url": "https://api.github.com/repos/msaher/neovim/teams",
            "topics": [],
            "trees_url": "https://api.github.com/repos/msaher/neovim/git/trees{/sha}",
            "updated_at": "2025-01-27T10:54:04Z",
            "url": "https://api.github.com/repos/msaher/neovim",
            "visibility": "public",
            "watchers": 0,
            "watchers_count": 0,
            "web_commit_signoff_required": false
        },
        "sha": "6ec56eda0cc0fb96725bff175475a6bb3f109585",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/77233589?v=4",
            "events_url": "https://api.github.com/users/msaher/events{/privacy}",
            "followers_url": "https://api.github.com/users/msaher/followers",
            "following_url": "https://api.github.com/users/msaher/following{/other_user}",
            "gists_url": "https://api.github.com/users/msaher/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/msaher",
            "id": 77233589,
            "login": "msaher",
            "node_id": "MDQ6VXNlcjc3MjMzNTg5",
            "organizations_url": "https://api.github.com/users/msaher/orgs",
            "received_events_url": "https://api.github.com/users/msaher/received_events",
            "repos_url": "https://api.github.com/users/msaher/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/msaher/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/msaher/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/msaher",
            "user_view_type": "public"
        }
    },
    "html_url": "https://github.com/neovim/neovim/pull/33320",
    "id": 2440398504,
    "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33320",
    "labels": [
        {
            "color": "C5DEF5",
            "default": false,
            "description": "",
            "id": 7421978602,
            "name": "editor",
            "node_id": "LA_kwDOAPphoM8AAAABumJn6g",
            "url": "https://api.github.com/repos/neovim/neovim/labels/editor"
        }
    ],
    "locked": false,
    "merge_commit_sha": "eddf08040fbc56ae3c028687bba55967b034f395",
    "merged_at": null,
    "milestone": null,
    "node_id": "PR_kwDOAPphoM6RdYao",
    "number": 33320,
    "patch_url": "https://github.com/neovim/neovim/pull/33320.patch",
    "requested_reviewers": [],
    "requested_teams": [],
    "review_comment_url": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}",
    "review_comments_url": "https://api.github.com/repos/neovim/neovim/pulls/33320/comments",
    "state": "open",
    "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/6ec56eda0cc0fb96725bff175475a6bb3f109585",
    "title": "feat(editor): `:bcd` changes buffer-local directory",
    "updated_at": "2025-04-20T12:20:03Z",
    "url": "https://api.github.com/repos/neovim/neovim/pulls/33320",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/77233589?v=4",
        "events_url": "https://api.github.com/users/msaher/events{/privacy}",
        "followers_url": "https://api.github.com/users/msaher/followers",
        "following_url": "https://api.github.com/users/msaher/following{/other_user}",
        "gists_url": "https://api.github.com/users/msaher/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/msaher",
        "id": 77233589,
        "login": "msaher",
        "node_id": "MDQ6VXNlcjc3MjMzNTg5",
        "organizations_url": "https://api.github.com/users/msaher/orgs",
        "received_events_url": "https://api.github.com/users/msaher/received_events",
        "repos_url": "https://api.github.com/users/msaher/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/msaher/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/msaher/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/msaher",
        "user_view_type": "public"
    }
}