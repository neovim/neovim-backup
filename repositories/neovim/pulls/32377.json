{
    "_links": {
        "comments": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/32377/comments"
        },
        "commits": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/32377/commits"
        },
        "html": {
            "href": "https://github.com/neovim/neovim/pull/32377"
        },
        "issue": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/32377"
        },
        "review_comment": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}"
        },
        "review_comments": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/32377/comments"
        },
        "self": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/32377"
        },
        "statuses": {
            "href": "https://api.github.com/repos/neovim/neovim/statuses/6525c19ab000479adf7309aa5d79f7b815b83dec"
        }
    },
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "MEMBER",
    "auto_merge": null,
    "base": {
        "label": "neovim:master",
        "ref": "master",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/neovim/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/neovim/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/neovim/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/neovim/neovim/branches{/branch}",
            "clone_url": "https://github.com/neovim/neovim.git",
            "collaborators_url": "https://api.github.com/repos/neovim/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/neovim/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/neovim/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/neovim/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/neovim/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/neovim/neovim/contributors",
            "created_at": "2014-01-31T13:39:22Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/neovim/neovim/deployments",
            "description": "Vim-fork focused on extensibility and usability",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/neovim/neovim/downloads",
            "events_url": "https://api.github.com/repos/neovim/neovim/events",
            "fork": false,
            "forks": 5870,
            "forks_count": 5870,
            "forks_url": "https://api.github.com/repos/neovim/neovim/forks",
            "full_name": "neovim/neovim",
            "git_commits_url": "https://api.github.com/repos/neovim/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/neovim/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/neovim/neovim/git/tags{/sha}",
            "git_url": "git://github.com/neovim/neovim.git",
            "has_discussions": true,
            "has_downloads": true,
            "has_issues": true,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://neovim.io",
            "hooks_url": "https://api.github.com/repos/neovim/neovim/hooks",
            "html_url": "https://github.com/neovim/neovim",
            "id": 16408992,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/neovim/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/neovim/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/neovim/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/neovim/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/neovim/neovim/labels{/name}",
            "language": "Vim Script",
            "languages_url": "https://api.github.com/repos/neovim/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/neovim/neovim/merges",
            "milestones_url": "https://api.github.com/repos/neovim/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "MDEwOlJlcG9zaXRvcnkxNjQwODk5Mg==",
            "notifications_url": "https://api.github.com/repos/neovim/neovim/notifications{?since,all,participating}",
            "open_issues": 1861,
            "open_issues_count": 1861,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
                "events_url": "https://api.github.com/users/neovim/events{/privacy}",
                "followers_url": "https://api.github.com/users/neovim/followers",
                "following_url": "https://api.github.com/users/neovim/following{/other_user}",
                "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/neovim",
                "id": 6471485,
                "login": "neovim",
                "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
                "organizations_url": "https://api.github.com/users/neovim/orgs",
                "received_events_url": "https://api.github.com/users/neovim/received_events",
                "repos_url": "https://api.github.com/users/neovim/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
                "type": "Organization",
                "url": "https://api.github.com/users/neovim",
                "user_view_type": "public"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/neovim/neovim/pulls{/number}",
            "pushed_at": "2025-02-17T23:14:59Z",
            "releases_url": "https://api.github.com/repos/neovim/neovim/releases{/id}",
            "size": 308398,
            "ssh_url": "git@github.com:neovim/neovim.git",
            "stargazers_count": 86255,
            "stargazers_url": "https://api.github.com/repos/neovim/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/neovim/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/neovim/neovim/subscription",
            "svn_url": "https://github.com/neovim/neovim",
            "tags_url": "https://api.github.com/repos/neovim/neovim/tags",
            "teams_url": "https://api.github.com/repos/neovim/neovim/teams",
            "topics": [
                "api",
                "c",
                "lua",
                "neovim",
                "nvim",
                "text-editor",
                "vim"
            ],
            "trees_url": "https://api.github.com/repos/neovim/neovim/git/trees{/sha}",
            "updated_at": "2025-02-18T02:05:55Z",
            "url": "https://api.github.com/repos/neovim/neovim",
            "visibility": "public",
            "watchers": 86255,
            "watchers_count": 86255,
            "web_commit_signoff_required": false
        },
        "sha": "ec3071ffad8e4cf043e93e1c679a37c947856a26",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
            "events_url": "https://api.github.com/users/neovim/events{/privacy}",
            "followers_url": "https://api.github.com/users/neovim/followers",
            "following_url": "https://api.github.com/users/neovim/following{/other_user}",
            "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/neovim",
            "id": 6471485,
            "login": "neovim",
            "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
            "organizations_url": "https://api.github.com/users/neovim/orgs",
            "received_events_url": "https://api.github.com/users/neovim/received_events",
            "repos_url": "https://api.github.com/users/neovim/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
            "type": "Organization",
            "url": "https://api.github.com/users/neovim",
            "user_view_type": "public"
        }
    },
    "body": "Problem:  completion doesn't work with multi lines\r\n          (≈Åukasz Jan Niemier)\r\nSolution: handle linebreaks in completion code as expected\r\n          (glepnir)\r\n\r\nfixes: vim/vim#2505\r\ncloses: vim/vim#15373\r\n\r\nhttps://github.com/vim/vim/commit/76bdb82527a13b5b2baa8f7d7ce14b4d5dc05b82",
    "closed_at": "2025-02-09T02:43:02Z",
    "comment_data": [
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32377#discussion_r1947987624"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32377"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1947987624"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n/// Returns true if the current completion string contains newline characters,\r\n/// indicating it's a multi-line completion.\r\n```",
            "commit_id": "6525c19ab000479adf7309aa5d79f7b815b83dec",
            "created_at": "2025-02-09T01:41:47Z",
            "diff_hunk": "@@ -963,20 +964,49 @@ static void ins_compl_insert_bytes(char *p, int len)\n \n /// Checks if the column is within the currently inserted completion text\n /// column range. If it is, it returns a special highlight attribute.\n-/// -1 mean normal item.\n-int ins_compl_col_range_attr(int col)\n+/// -1 means normal item.\n+int ins_compl_col_range_attr(linenr_T lnum, int col)\n {\n-  if (get_cot_flags() & kOptCotFlagFuzzy) {\n+  int attr;\n+  if ((get_cot_flags() & kOptCotFlagFuzzy) || (attr = syn_name2attr(\"ComplMatchIns\")) == 0) {\n     return -1;\n   }\n \n-  if (col >= (compl_col + (int)ins_compl_leader_len()) && col < compl_ins_end_col) {\n-    return syn_name2attr(\"ComplMatchIns\");\n+  int start_col = compl_col + (int)ins_compl_leader_len();\n+  if (!ins_compl_has_multiple()) {\n+    return (col >= start_col && col < compl_ins_end_col) ? attr : -1;\n+  }\n+  // Multiple lines\n+  if ((lnum == compl_lnum && col >= start_col && col < MAXCOL)\n+      || (lnum > compl_lnum && lnum < curwin->w_cursor.lnum)\n+      || (lnum == curwin->w_cursor.lnum && col <= compl_ins_end_col)) {\n+    return attr;\n   }\n \n   return -1;\n }\n \n+/*\n+ * Returns TRUE if the current completion string contains newline characters,\n+ * indicating it's a multi-line completion.\n+ */",
            "html_url": "https://github.com/neovim/neovim/pull/32377#discussion_r1947987624",
            "id": 1947987624,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM50G-6o",
            "original_commit_id": "ab27ee5a2049b2551ae979ed2324a57e4e62df81",
            "original_line": 992,
            "original_position": 42,
            "original_start_line": 989,
            "path": "src/nvim/insexpand.c",
            "position": null,
            "pull_request_review_id": 2604093484,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32377",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1947987624/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-02-09T01:42:18Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1947987624",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32377#discussion_r1947987676"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32377"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1947987676"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n\r\n/// Returns true if the given line number falls within the range of a multi-line\r\n/// completion, i.e. between the starting line (compl_lnum) and current cursor\r\n/// line. Always returns false for single-line completions.\r\n```",
            "commit_id": "6525c19ab000479adf7309aa5d79f7b815b83dec",
            "created_at": "2025-02-09T01:42:13Z",
            "diff_hunk": "@@ -963,20 +964,49 @@ static void ins_compl_insert_bytes(char *p, int len)\n \n /// Checks if the column is within the currently inserted completion text\n /// column range. If it is, it returns a special highlight attribute.\n-/// -1 mean normal item.\n-int ins_compl_col_range_attr(int col)\n+/// -1 means normal item.\n+int ins_compl_col_range_attr(linenr_T lnum, int col)\n {\n-  if (get_cot_flags() & kOptCotFlagFuzzy) {\n+  int attr;\n+  if ((get_cot_flags() & kOptCotFlagFuzzy) || (attr = syn_name2attr(\"ComplMatchIns\")) == 0) {\n     return -1;\n   }\n \n-  if (col >= (compl_col + (int)ins_compl_leader_len()) && col < compl_ins_end_col) {\n-    return syn_name2attr(\"ComplMatchIns\");\n+  int start_col = compl_col + (int)ins_compl_leader_len();\n+  if (!ins_compl_has_multiple()) {\n+    return (col >= start_col && col < compl_ins_end_col) ? attr : -1;\n+  }\n+  // Multiple lines\n+  if ((lnum == compl_lnum && col >= start_col && col < MAXCOL)\n+      || (lnum > compl_lnum && lnum < curwin->w_cursor.lnum)\n+      || (lnum == curwin->w_cursor.lnum && col <= compl_ins_end_col)) {\n+    return attr;\n   }\n \n   return -1;\n }\n \n+/*\n+ * Returns TRUE if the current completion string contains newline characters,\n+ * indicating it's a multi-line completion.\n+ */\n+static bool ins_compl_has_multiple(void)\n+{\n+  return vim_strchr(compl_shown_match->cp_str.data, '\\n') != NULL;\n+}\n+/*\n+ * Returns TRUE if the given line number falls within the range of a multi-line\n+ * completion, i.e. between the starting line (compl_lnum) and current cursor\n+ * line. Always returns FALSE for single-line completions.\n+ */",
            "html_url": "https://github.com/neovim/neovim/pull/32377#discussion_r1947987676",
            "id": 1947987676,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM50G-7c",
            "original_commit_id": "ab27ee5a2049b2551ae979ed2324a57e4e62df81",
            "original_line": 1001,
            "original_position": 51,
            "original_start_line": 997,
            "path": "src/nvim/insexpand.c",
            "position": null,
            "pull_request_review_id": 2604093484,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32377",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1947987676/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-02-09T01:42:18Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1947987676",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32377#discussion_r1947987768"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32377"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1947987768"
                }
            },
            "author_association": "MEMBER",
            "body": "`xstrdup()` never returns `NULL`\r\n```suggestion\r\n```",
            "commit_id": "6525c19ab000479adf7309aa5d79f7b815b83dec",
            "created_at": "2025-02-09T01:43:27Z",
            "diff_hunk": "@@ -3737,6 +3765,29 @@ void ins_compl_delete(bool new_leader)\n     curwin->w_cursor.col = compl_ins_end_col;\n   }\n \n+  char *remaining = NULL;\n+  if (curwin->w_cursor.lnum > compl_lnum) {\n+    if (curwin->w_cursor.col < get_cursor_line_len()) {\n+      char *line = get_cursor_line_ptr();\n+      remaining = xstrdup(line + curwin->w_cursor.col);\n+      if (remaining == NULL) {\n+        return;\n+      }",
            "html_url": "https://github.com/neovim/neovim/pull/32377#discussion_r1947987768",
            "id": 1947987768,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM50G-84",
            "original_commit_id": "e4984bc0ea9d6ede0dcb6bdaa3a4cad235b3878e",
            "original_line": 3776,
            "original_position": 79,
            "original_start_line": 3773,
            "path": "src/nvim/insexpand.c",
            "position": null,
            "pull_request_review_id": 2604094347,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32377",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1947987768/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-02-09T01:44:35Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1947987768",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32377#discussion_r1947987790"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32377"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1947987790"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n/// Returns true if the current completion string contains newline characters,\r\n/// indicating it's a multi-line completion.\r\n```",
            "commit_id": "6525c19ab000479adf7309aa5d79f7b815b83dec",
            "created_at": "2025-02-09T01:43:41Z",
            "diff_hunk": "@@ -963,20 +964,46 @@ static void ins_compl_insert_bytes(char *p, int len)\n \n /// Checks if the column is within the currently inserted completion text\n /// column range. If it is, it returns a special highlight attribute.\n-/// -1 mean normal item.\n-int ins_compl_col_range_attr(int col)\n+/// -1 means normal item.\n+int ins_compl_col_range_attr(linenr_T lnum, int col)\n {\n-  if (get_cot_flags() & kOptCotFlagFuzzy) {\n+  int attr;\n+  if ((get_cot_flags() & kOptCotFlagFuzzy) || (attr = syn_name2attr(\"ComplMatchIns\")) == 0) {\n     return -1;\n   }\n \n-  if (col >= (compl_col + (int)ins_compl_leader_len()) && col < compl_ins_end_col) {\n-    return syn_name2attr(\"ComplMatchIns\");\n+  int start_col = compl_col + (int)ins_compl_leader_len();\n+  if (!ins_compl_has_multiple()) {\n+    return (col >= start_col && col < compl_ins_end_col) ? attr : -1;\n+  }\n+  // Multiple lines\n+  if ((lnum == compl_lnum && col >= start_col && col < MAXCOL)\n+      || (lnum > compl_lnum && lnum < curwin->w_cursor.lnum)\n+      || (lnum == curwin->w_cursor.lnum && col <= compl_ins_end_col)) {\n+    return attr;\n   }\n \n   return -1;\n }\n \n+// Returns TRUE if the current completion string contains newline characters,\n+// indicating it's a multi-line completion.",
            "html_url": "https://github.com/neovim/neovim/pull/32377#discussion_r1947987790",
            "id": 1947987790,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM50G-9O",
            "original_commit_id": "e4984bc0ea9d6ede0dcb6bdaa3a4cad235b3878e",
            "original_line": 991,
            "original_position": 40,
            "original_start_line": 989,
            "path": "src/nvim/insexpand.c",
            "position": null,
            "pull_request_review_id": 2604094347,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32377",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1947987790/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-02-09T01:44:02Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1947987790",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32377#discussion_r1947987807"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32377"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1947987807"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n/// Returns true if the given line number falls within the range of a multi-line\r\n/// completion, i.e. between the starting line (compl_lnum) and current cursor\r\n/// line. Always returns false for single-line completions.\r\n```",
            "commit_id": "6525c19ab000479adf7309aa5d79f7b815b83dec",
            "created_at": "2025-02-09T01:43:56Z",
            "diff_hunk": "@@ -963,20 +964,46 @@ static void ins_compl_insert_bytes(char *p, int len)\n \n /// Checks if the column is within the currently inserted completion text\n /// column range. If it is, it returns a special highlight attribute.\n-/// -1 mean normal item.\n-int ins_compl_col_range_attr(int col)\n+/// -1 means normal item.\n+int ins_compl_col_range_attr(linenr_T lnum, int col)\n {\n-  if (get_cot_flags() & kOptCotFlagFuzzy) {\n+  int attr;\n+  if ((get_cot_flags() & kOptCotFlagFuzzy) || (attr = syn_name2attr(\"ComplMatchIns\")) == 0) {\n     return -1;\n   }\n \n-  if (col >= (compl_col + (int)ins_compl_leader_len()) && col < compl_ins_end_col) {\n-    return syn_name2attr(\"ComplMatchIns\");\n+  int start_col = compl_col + (int)ins_compl_leader_len();\n+  if (!ins_compl_has_multiple()) {\n+    return (col >= start_col && col < compl_ins_end_col) ? attr : -1;\n+  }\n+  // Multiple lines\n+  if ((lnum == compl_lnum && col >= start_col && col < MAXCOL)\n+      || (lnum > compl_lnum && lnum < curwin->w_cursor.lnum)\n+      || (lnum == curwin->w_cursor.lnum && col <= compl_ins_end_col)) {\n+    return attr;\n   }\n \n   return -1;\n }\n \n+// Returns TRUE if the current completion string contains newline characters,\n+// indicating it's a multi-line completion.\n+static bool ins_compl_has_multiple(void)\n+{\n+  return vim_strchr(compl_shown_match->cp_str.data, '\\n') != NULL;\n+}\n+\n+// Returns TRUE if the given line number falls within the range of a multi-line\n+// completion, i.e. between the starting line (compl_lnum) and current cursor\n+// line. Always returns FALSE for single-line completions.",
            "html_url": "https://github.com/neovim/neovim/pull/32377#discussion_r1947987807",
            "id": 1947987807,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM50G-9f",
            "original_commit_id": "e4984bc0ea9d6ede0dcb6bdaa3a4cad235b3878e",
            "original_line": 999,
            "original_position": 48,
            "original_start_line": 996,
            "path": "src/nvim/insexpand.c",
            "position": null,
            "pull_request_review_id": 2604094347,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32377",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1947987807/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-02-09T01:44:02Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1947987807",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32377#discussion_r1947987938"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32377"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1947987938"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n/// Insert a completion string that contains newlines.\r\n/// The string is split and inserted line by line.\r\n```",
            "commit_id": "6525c19ab000479adf7309aa5d79f7b815b83dec",
            "created_at": "2025-02-09T01:45:39Z",
            "diff_hunk": "@@ -3745,13 +3797,48 @@ void ins_compl_delete(bool new_leader)\n     compl_ins_end_col = curwin->w_cursor.col;\n   }\n \n+  if (remaining != NULL) {\n+    orig_col = curwin->w_cursor.col;\n+    ins_str(remaining);\n+    curwin->w_cursor.col = orig_col;\n+    xfree(remaining);\n+  }\n+\n   // TODO(vim): is this sufficient for redrawing?  Redrawing everything\n   // causes flicker, thus we can't do that.\n   changed_cline_bef_curs(curwin);\n   // clear v:completed_item\n   set_vim_var_dict(VV_COMPLETED_ITEM, tv_dict_alloc_lock(VAR_FIXED));\n }\n \n+// Insert a completion string that contains newlines.\n+// The string is split and inserted line by line.",
            "html_url": "https://github.com/neovim/neovim/pull/32377#discussion_r1947987938",
            "id": 1947987938,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM50G-_i",
            "original_commit_id": "b4366959464540927e94066ce7f0d51eae31abb0",
            "original_line": 3815,
            "original_position": 118,
            "original_start_line": 3814,
            "path": "src/nvim/insexpand.c",
            "position": null,
            "pull_request_review_id": 2604094528,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32377",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1947987938/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-02-09T01:45:39Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1947987938",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32377#discussion_r1947988159"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32377"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1947988159"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n      it('multi-line completion', function()\r\n```",
            "commit_id": "6525c19ab000479adf7309aa5d79f7b815b83dec",
            "created_at": "2025-02-09T01:47:34Z",
            "diff_hunk": "@@ -5935,6 +5935,104 @@ describe('builtin popupmenu', function()\n         ]])\n         feed('<C-E><Esc>')\n       end)\n+\n+      -- oldtest: Test_pum_complete_with_special_characters()\n+      it('#expand multiple-line completion', function()",
            "html_url": "https://github.com/neovim/neovim/pull/32377#discussion_r1947988159",
            "id": 1947988159,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM50G_C_",
            "original_commit_id": "b4366959464540927e94066ce7f0d51eae31abb0",
            "original_line": 5940,
            "original_position": 6,
            "original_start_line": null,
            "path": "test/functional/ui/popupmenu_spec.lua",
            "position": null,
            "pull_request_review_id": 2604094691,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32377",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1947988159/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-02-09T01:47:35Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1947988159",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32377#discussion_r1947988852"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32377"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1947988852"
                }
            },
            "author_association": "MEMBER",
            "body": "There are three consecutive `<C-N>`s in the oldtest, but here there are only two.",
            "commit_id": "6525c19ab000479adf7309aa5d79f7b815b83dec",
            "created_at": "2025-02-09T01:51:17Z",
            "diff_hunk": "@@ -5935,6 +5935,104 @@ describe('builtin popupmenu', function()\n         ]])\n         feed('<C-E><Esc>')\n       end)\n+\n+      -- oldtest: Test_pum_complete_with_special_characters()\n+      it('multi-line completion', function()\n+        exec([[\n+          func Omni_test(findstart, base)\n+            if a:findstart\n+              return col(\".\")\n+            endif\n+            return [#{word: \"func ()\\n\\t\\nend\", abbr: \"function ()\",}, #{word: \"foobar\"}, #{word: \"‰Ω†Â•Ω\\n\\t\\nÊàëÂ•Ω\"}]\n+          endfunc\n+          set omnifunc=Omni_test\n+        ]])\n+\n+        feed('S<C-X><C-O>')\n+        screen:expect([[\n+          func ()                         |\n+                                          |\n+          end^                             |\n+          {s:function ()    }{1:                 }|\n+          {n:foobar         }{1:                 }|\n+          {n:‰Ω†Â•Ω^@  ^@ÊàëÂ•Ω }{1:                 }|\n+          {1:~                               }|*13\n+          {2:-- }{5:match 1 of 3}                 |\n+        ]])\n+\n+        feed('<C-N>')\n+        screen:expect([[\n+          foobar^                          |\n+          {n:function ()    }{1:                 }|\n+          {s:foobar         }{1:                 }|\n+          {n:‰Ω†Â•Ω^@  ^@ÊàëÂ•Ω }{1:                 }|\n+          {1:~                               }|*15\n+          {2:-- }{5:match 2 of 3}                 |\n+        ]])\n+        feed('<C-E><ESC>')\n+\n+        feed('Shello  hero<ESC>hhhhha<C-X><C-O>')\n+        screen:expect([[\n+          hello func ()                   |\n+                                          |\n+          end^ hero                        |\n+          {1:~    }{s: function ()    }{1:           }|\n+          {1:~    }{n: foobar         }{1:           }|\n+          {1:~    }{n: ‰Ω†Â•Ω^@  ^@ÊàëÂ•Ω }{1:           }|\n+          {1:~                               }|*13\n+          {2:-- }{5:match 1 of 3}                 |\n+        ]])\n+\n+        feed('<C-N>')\n+        screen:expect([[\n+          hello foobar^ hero               |\n+          {1:~    }{n: function ()    }{1:           }|\n+          {1:~    }{s: foobar         }{1:           }|\n+          {1:~    }{n: ‰Ω†Â•Ω^@  ^@ÊàëÂ•Ω }{1:           }|\n+          {1:~                               }|*15\n+          {2:-- }{5:match 2 of 3}                 |\n+        ]])\n+\n+        feed('<C-N>')\n+        screen:expect([[\n+          hello ‰Ω†Â•Ω                      |\n+                                          |\n+          ÊàëÂ•Ω^ hero                       |\n+          {1:~  }{n: function ()    }{1:             }|\n+          {1:~  }{n: foobar         }{1:             }|\n+          {1:~  }{s: ‰Ω†Â•Ω^@  ^@ÊàëÂ•Ω }{1:             }|\n+          {1:~                               }|*13\n+          {2:-- }{5:match 3 of 3}                 |\n+        ]])\n+        feed('<C-E><ESC>')",
            "html_url": "https://github.com/neovim/neovim/pull/32377#discussion_r1947988852",
            "id": 1947988852,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM50G_N0",
            "original_commit_id": "31693789fa4e7c17c4651ec7493e5ca9e507db61",
            "original_line": 6017,
            "original_position": 73,
            "original_start_line": 5986,
            "path": "test/functional/ui/popupmenu_spec.lua",
            "position": null,
            "pull_request_review_id": 2604095784,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32377",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1947988852/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-02-09T01:54:04Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1947988852",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32377#discussion_r1947989447"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32377"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1947989447"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n```",
            "commit_id": "6525c19ab000479adf7309aa5d79f7b815b83dec",
            "created_at": "2025-02-09T01:57:03Z",
            "diff_hunk": "@@ -5935,6 +5935,115 @@ describe('builtin popupmenu', function()\n         ]])\n         feed('<C-E><Esc>')\n       end)\n+\n+      -- oldtest: Test_pum_complete_with_special_characters()\n+      it('multi-line completion', function()\n+        exec([[\n+          func Omni_test(findstart, base)\n+            if a:findstart\n+              return col(\".\")\n+            endif\n+            return [#{word: \"func ()\\n\\t\\nend\", abbr: \"function ()\",}, #{word: \"foobar\"}, #{word: \"‰Ω†Â•Ω\\n\\t\\nÊàëÂ•Ω\"}]\n+          endfunc\n+          set omnifunc=Omni_test\n+        ]])\n+\n+        feed('S<C-X><C-O>')\n+        screen:expect([[\n+          func ()                         |\n+                                          |\n+          end^                             |\n+          {s:function ()    }{1:                 }|\n+          {n:foobar         }{1:                 }|\n+          {n:‰Ω†Â•Ω^@  ^@ÊàëÂ•Ω }{1:                 }|\n+          {1:~                               }|*13\n+          {2:-- }{5:match 1 of 3}                 |\n+        ]])\n+\n+        feed('<C-N>')\n+        screen:expect([[\n+          foobar^                          |\n+          {n:function ()    }{1:                 }|\n+          {s:foobar         }{1:                 }|\n+          {n:‰Ω†Â•Ω^@  ^@ÊàëÂ•Ω }{1:                 }|\n+          {1:~                               }|*15\n+          {2:-- }{5:match 2 of 3}                 |\n+        ]])\n+        feed('<C-E><ESC>')\n+\n+        feed('Shello  hero<ESC>hhhhha<C-X><C-O>')\n+        screen:expect([[\n+          hello func ()                   |\n+                                          |\n+          end^ hero                        |\n+          {1:~    }{s: function ()    }{1:           }|\n+          {1:~    }{n: foobar         }{1:           }|\n+          {1:~    }{n: ‰Ω†Â•Ω^@  ^@ÊàëÂ•Ω }{1:           }|\n+          {1:~                               }|*13\n+          {2:-- }{5:match 1 of 3}                 |\n+        ]])\n+\n+        feed('<C-N>')\n+        screen:expect([[\n+          hello foobar^ hero               |\n+          {1:~    }{n: function ()    }{1:           }|\n+          {1:~    }{s: foobar         }{1:           }|\n+          {1:~    }{n: ‰Ω†Â•Ω^@  ^@ÊàëÂ•Ω }{1:           }|\n+          {1:~                               }|*15\n+          {2:-- }{5:match 2 of 3}                 |\n+        ]])\n+\n+        feed('<C-N>')\n+        screen:expect([[\n+          hello ‰Ω†Â•Ω                      |\n+                                          |\n+          ÊàëÂ•Ω^ hero                       |\n+          {1:~  }{n: function ()    }{1:             }|\n+          {1:~  }{n: foobar         }{1:             }|\n+          {1:~  }{s: ‰Ω†Â•Ω^@  ^@ÊàëÂ•Ω }{1:             }|\n+          {1:~                               }|*13\n+          {2:-- }{5:match 3 of 3}                 |\n+        ]])\n+\n+        feed('<C-N>')\n+        screen:expect([[\n+          hello ^ hero                     |\n+          {1:~    }{n: function ()    }{1:           }|\n+          {1:~    }{n: foobar         }{1:           }|\n+          {1:~    }{n: ‰Ω†Â•Ω^@  ^@ÊàëÂ•Ω }{1:           }|\n+          {1:~                               }|*15\n+          {2:-- }{8:Back at original}             |\n+        ]])\n+        screen:snapshot_util()",
            "html_url": "https://github.com/neovim/neovim/pull/32377#discussion_r1947989447",
            "id": 1947989447,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM50G_XH",
            "original_commit_id": "a8382140a4c22ce15d96d8b5d5955c51789ecadd",
            "original_line": 6017,
            "original_position": 83,
            "original_start_line": null,
            "path": "test/functional/ui/popupmenu_spec.lua",
            "position": null,
            "pull_request_review_id": 2604097720,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32377",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1947989447/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-02-09T01:57:03Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1947989447",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32377#discussion_r1947989842"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32377"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1947989842"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n/// Returns true if the given line number falls within the range of a multi-line\r\n```",
            "commit_id": "6525c19ab000479adf7309aa5d79f7b815b83dec",
            "created_at": "2025-02-09T02:01:51Z",
            "diff_hunk": "@@ -963,20 +964,47 @@ static void ins_compl_insert_bytes(char *p, int len)\n \n /// Checks if the column is within the currently inserted completion text\n /// column range. If it is, it returns a special highlight attribute.\n-/// -1 mean normal item.\n-int ins_compl_col_range_attr(int col)\n+/// -1 means normal item.\n+int ins_compl_col_range_attr(linenr_T lnum, int col)\n {\n-  if (get_cot_flags() & kOptCotFlagFuzzy) {\n+  int attr;\n+  if ((get_cot_flags() & kOptCotFlagFuzzy) || (attr = syn_name2attr(\"ComplMatchIns\")) == 0) {\n     return -1;\n   }\n \n-  if (col >= (compl_col + (int)ins_compl_leader_len()) && col < compl_ins_end_col) {\n-    return syn_name2attr(\"ComplMatchIns\");\n+  int start_col = compl_col + (int)ins_compl_leader_len();\n+  if (!ins_compl_has_multiple()) {\n+    return (col >= start_col && col < compl_ins_end_col) ? attr : -1;\n+  }\n+\n+  // Multiple lines\n+  if ((lnum == compl_lnum && col >= start_col && col < MAXCOL)\n+      || (lnum > compl_lnum && lnum < curwin->w_cursor.lnum)\n+      || (lnum == curwin->w_cursor.lnum && col <= compl_ins_end_col)) {\n+    return attr;\n   }\n \n   return -1;\n }\n \n+/// Returns true if the current completion string contains newline characters,\n+/// indicating it's a multi-line completion.\n+static bool ins_compl_has_multiple(void)\n+{\n+  return vim_strchr(compl_shown_match->cp_str.data, '\\n') != NULL;\n+}\n+\n+/// Returns ture if the given line number falls within the range of a multi-line",
            "html_url": "https://github.com/neovim/neovim/pull/32377#discussion_r1947989842",
            "id": 1947989842,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM50G_dS",
            "original_commit_id": "04a2d795e2415915dd4df8face3c6727a1947302",
            "original_line": 997,
            "original_position": 47,
            "original_start_line": null,
            "path": "src/nvim/insexpand.c",
            "position": null,
            "pull_request_review_id": 2604098150,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32377",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1947989842/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-02-09T02:01:51Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1947989842",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32377#discussion_r1948127226"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32377"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1948127226"
                }
            },
            "author_association": "MEMBER",
            "body": "Why is it rendering as `^@` instead of linebreak? I thought the entire purpose of https://github.com/vim/vim/issues/2505 was to insert linebreaks.",
            "commit_id": "6525c19ab000479adf7309aa5d79f7b815b83dec",
            "created_at": "2025-02-09T15:00:08Z",
            "diff_hunk": "@@ -5935,6 +5935,114 @@ describe('builtin popupmenu', function()\n         ]])\n         feed('<C-E><Esc>')\n       end)\n+\n+      -- oldtest: Test_pum_complete_with_special_characters()\n+      it('multi-line completion', function()\n+        exec([[\n+          func Omni_test(findstart, base)\n+            if a:findstart\n+              return col(\".\")\n+            endif\n+            return [#{word: \"func ()\\n\\t\\nend\", abbr: \"function ()\",}, #{word: \"foobar\"}, #{word: \"‰Ω†Â•Ω\\n\\t\\nÊàëÂ•Ω\"}]\n+          endfunc\n+          set omnifunc=Omni_test\n+        ]])\n+\n+        feed('S<C-X><C-O>')\n+        screen:expect([[\n+          func ()                         |\n+                                          |\n+          end^                             |\n+          {s:function ()    }{1:                 }|\n+          {n:foobar         }{1:                 }|\n+          {n:‰Ω†Â•Ω^@  ^@ÊàëÂ•Ω }{1:                 }|",
            "html_url": "https://github.com/neovim/neovim/pull/32377#discussion_r1948127226",
            "id": 1948127226,
            "line": 5958,
            "node_id": "PRRC_kwDOAPphoM50Hg_6",
            "original_commit_id": "6525c19ab000479adf7309aa5d79f7b815b83dec",
            "original_line": 5958,
            "original_position": 24,
            "original_start_line": null,
            "path": "test/functional/ui/popupmenu_spec.lua",
            "position": 24,
            "pull_request_review_id": 2604284836,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32377",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1948127226/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-02-09T15:00:09Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1948127226",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32377#discussion_r1948261831"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32377"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1948261831"
                }
            },
            "author_association": "MEMBER",
            "body": "What is \"rendering as linebreak\"?",
            "commit_id": "6525c19ab000479adf7309aa5d79f7b815b83dec",
            "created_at": "2025-02-09T23:00:45Z",
            "diff_hunk": "@@ -5935,6 +5935,114 @@ describe('builtin popupmenu', function()\n         ]])\n         feed('<C-E><Esc>')\n       end)\n+\n+      -- oldtest: Test_pum_complete_with_special_characters()\n+      it('multi-line completion', function()\n+        exec([[\n+          func Omni_test(findstart, base)\n+            if a:findstart\n+              return col(\".\")\n+            endif\n+            return [#{word: \"func ()\\n\\t\\nend\", abbr: \"function ()\",}, #{word: \"foobar\"}, #{word: \"‰Ω†Â•Ω\\n\\t\\nÊàëÂ•Ω\"}]\n+          endfunc\n+          set omnifunc=Omni_test\n+        ]])\n+\n+        feed('S<C-X><C-O>')\n+        screen:expect([[\n+          func ()                         |\n+                                          |\n+          end^                             |\n+          {s:function ()    }{1:                 }|\n+          {n:foobar         }{1:                 }|\n+          {n:‰Ω†Â•Ω^@  ^@ÊàëÂ•Ω }{1:                 }|",
            "html_url": "https://github.com/neovim/neovim/pull/32377#discussion_r1948261831",
            "id": 1948261831,
            "in_reply_to_id": 1948127226,
            "line": 5958,
            "node_id": "PRRC_kwDOAPphoM50IB3H",
            "original_commit_id": "6525c19ab000479adf7309aa5d79f7b815b83dec",
            "original_line": 5958,
            "original_position": 24,
            "original_start_line": null,
            "path": "test/functional/ui/popupmenu_spec.lua",
            "position": 24,
            "pull_request_review_id": 2604483986,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32377",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1948261831/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-02-09T23:00:45Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1948261831",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32377#discussion_r1948266728"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32377"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1948266728"
                }
            },
            "author_association": "MEMBER",
            "body": "Oh I see these tests are checking the menu representation, not the inserted text. I was expecting a test that verifies the inserted text has multiple lines instead of one line with `^@` chars.",
            "commit_id": "6525c19ab000479adf7309aa5d79f7b815b83dec",
            "created_at": "2025-02-09T23:24:29Z",
            "diff_hunk": "@@ -5935,6 +5935,114 @@ describe('builtin popupmenu', function()\n         ]])\n         feed('<C-E><Esc>')\n       end)\n+\n+      -- oldtest: Test_pum_complete_with_special_characters()\n+      it('multi-line completion', function()\n+        exec([[\n+          func Omni_test(findstart, base)\n+            if a:findstart\n+              return col(\".\")\n+            endif\n+            return [#{word: \"func ()\\n\\t\\nend\", abbr: \"function ()\",}, #{word: \"foobar\"}, #{word: \"‰Ω†Â•Ω\\n\\t\\nÊàëÂ•Ω\"}]\n+          endfunc\n+          set omnifunc=Omni_test\n+        ]])\n+\n+        feed('S<C-X><C-O>')\n+        screen:expect([[\n+          func ()                         |\n+                                          |\n+          end^                             |\n+          {s:function ()    }{1:                 }|\n+          {n:foobar         }{1:                 }|\n+          {n:‰Ω†Â•Ω^@  ^@ÊàëÂ•Ω }{1:                 }|",
            "html_url": "https://github.com/neovim/neovim/pull/32377#discussion_r1948266728",
            "id": 1948266728,
            "in_reply_to_id": 1948127226,
            "line": 5958,
            "node_id": "PRRC_kwDOAPphoM50IDDo",
            "original_commit_id": "6525c19ab000479adf7309aa5d79f7b815b83dec",
            "original_line": 5958,
            "original_position": 24,
            "original_start_line": null,
            "path": "test/functional/ui/popupmenu_spec.lua",
            "position": 24,
            "pull_request_review_id": 2604490437,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32377",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1948266728/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-02-09T23:24:29Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1948266728",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/32377#discussion_r1948275449"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/32377"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1948275449"
                }
            },
            "author_association": "MEMBER",
            "body": "Isn't it right here?",
            "commit_id": "6525c19ab000479adf7309aa5d79f7b815b83dec",
            "created_at": "2025-02-10T00:04:30Z",
            "diff_hunk": "@@ -5935,6 +5935,114 @@ describe('builtin popupmenu', function()\n         ]])\n         feed('<C-E><Esc>')\n       end)\n+\n+      -- oldtest: Test_pum_complete_with_special_characters()\n+      it('multi-line completion', function()\n+        exec([[\n+          func Omni_test(findstart, base)\n+            if a:findstart\n+              return col(\".\")\n+            endif\n+            return [#{word: \"func ()\\n\\t\\nend\", abbr: \"function ()\",}, #{word: \"foobar\"}, #{word: \"‰Ω†Â•Ω\\n\\t\\nÊàëÂ•Ω\"}]\n+          endfunc\n+          set omnifunc=Omni_test\n+        ]])\n+\n+        feed('S<C-X><C-O>')\n+        screen:expect([[\n+          func ()                         |\n+                                          |\n+          end^                             |\n+          {s:function ()    }{1:                 }|\n+          {n:foobar         }{1:                 }|\n+          {n:‰Ω†Â•Ω^@  ^@ÊàëÂ•Ω }{1:                 }|",
            "html_url": "https://github.com/neovim/neovim/pull/32377#discussion_r1948275449",
            "id": 1948275449,
            "in_reply_to_id": 1948127226,
            "line": 5958,
            "node_id": "PRRC_kwDOAPphoM50IFL5",
            "original_commit_id": "6525c19ab000479adf7309aa5d79f7b815b83dec",
            "original_line": 5958,
            "original_position": 24,
            "original_start_line": null,
            "path": "test/functional/ui/popupmenu_spec.lua",
            "position": 24,
            "pull_request_review_id": 2604501162,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/32377",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1948275449/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-02-10T00:04:31Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1948275449",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        }
    ],
    "comment_regular_data": [
        {
            "author_association": "MEMBER",
            "body": "Thank you @zeertzjq and @glepnir !",
            "created_at": "2025-02-09T14:52:31Z",
            "html_url": "https://github.com/neovim/neovim/pull/32377#issuecomment-2646342072",
            "id": 2646342072,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32377",
            "node_id": "IC_kwDOAPphoM6du_m4",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2646342072/reactions"
            },
            "updated_at": "2025-02-09T14:52:31Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2646342072",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "coverity:\r\n\r\n```\r\n/src/nvim/insexpand.c: 3791 in ins_compl_delete()\r\n3785         // move cursor to end of line\r\n3786         curwin->w_cursor.col = get_cursor_line_len();\r\n3787       }\r\n3788     \r\n3789       if ((int)curwin->w_cursor.col > col) {\r\n3790         if (stop_arrow() == FAIL) {\r\n>>>     CID 533635:  Resource leaks  (RESOURCE_LEAK)\r\n>>>     Variable \"remaining\" going out of scope leaks the storage it points to.\r\n3791           return;\r\n3792         }\r\n3793         backspace_until_column(col);\r\n3794         compl_ins_end_col = curwin->w_cursor.col;\r\n3795       }\r\n```",
            "created_at": "2025-02-10T01:40:28Z",
            "html_url": "https://github.com/neovim/neovim/pull/32377#issuecomment-2646741016",
            "id": 2646741016,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32377",
            "node_id": "IC_kwDOAPphoM6dwhAY",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2646741016/reactions"
            },
            "updated_at": "2025-02-10T01:40:28Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2646741016",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "When 'autoindent' is set, the text is formatted badly. Doesn't look like the tests cover this case. When inserting the text, should it behave like 'paste' is set?",
            "created_at": "2025-02-11T15:21:21Z",
            "html_url": "https://github.com/neovim/neovim/pull/32377#issuecomment-2651140667",
            "id": 2651140667,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32377",
            "node_id": "IC_kwDOAPphoM6eBTI7",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2651140667/reactions"
            },
            "updated_at": "2025-02-11T15:21:21Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2651140667",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "already create a pr for this https://github.com/vim/vim/pull/16614",
            "created_at": "2025-02-12T03:28:31Z",
            "html_url": "https://github.com/neovim/neovim/pull/32377#issuecomment-2652574514",
            "id": 2652574514,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32377",
            "node_id": "IC_kwDOAPphoM6eGxMy",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 1,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2652574514/reactions"
            },
            "updated_at": "2025-02-12T03:28:31Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2652574514",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir",
                "user_view_type": "public"
            }
        }
    ],
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/32377/comments",
    "commits_url": "https://api.github.com/repos/neovim/neovim/pulls/32377/commits",
    "created_at": "2025-02-09T01:32:31Z",
    "diff_url": "https://github.com/neovim/neovim/pull/32377.diff",
    "draft": false,
    "head": {
        "label": "glepnir:vim-9.1.1086",
        "ref": "vim-9.1.1086",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/glepnir/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/glepnir/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/glepnir/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/glepnir/neovim/branches{/branch}",
            "clone_url": "https://github.com/glepnir/neovim.git",
            "collaborators_url": "https://api.github.com/repos/glepnir/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/glepnir/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/glepnir/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/glepnir/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/glepnir/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/glepnir/neovim/contributors",
            "created_at": "2022-07-17T05:15:58Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/glepnir/neovim/deployments",
            "description": "Vim-fork focused on extensibility and usability",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/glepnir/neovim/downloads",
            "events_url": "https://api.github.com/repos/glepnir/neovim/events",
            "fork": true,
            "forks": 1,
            "forks_count": 1,
            "forks_url": "https://api.github.com/repos/glepnir/neovim/forks",
            "full_name": "glepnir/neovim",
            "git_commits_url": "https://api.github.com/repos/glepnir/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/glepnir/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/glepnir/neovim/git/tags{/sha}",
            "git_url": "git://github.com/glepnir/neovim.git",
            "has_discussions": false,
            "has_downloads": true,
            "has_issues": false,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://neovim.io",
            "hooks_url": "https://api.github.com/repos/glepnir/neovim/hooks",
            "html_url": "https://github.com/glepnir/neovim",
            "id": 514752985,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/glepnir/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/glepnir/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/glepnir/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/glepnir/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/glepnir/neovim/labels{/name}",
            "language": "Vim Script",
            "languages_url": "https://api.github.com/repos/glepnir/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/glepnir/neovim/merges",
            "milestones_url": "https://api.github.com/repos/glepnir/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "R_kgDOHq6B2Q",
            "notifications_url": "https://api.github.com/repos/glepnir/neovim/notifications{?since,all,participating}",
            "open_issues": 0,
            "open_issues_count": 0,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir",
                "user_view_type": "public"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/glepnir/neovim/pulls{/number}",
            "pushed_at": "2025-02-17T12:16:07Z",
            "releases_url": "https://api.github.com/repos/glepnir/neovim/releases{/id}",
            "size": 304128,
            "ssh_url": "git@github.com:glepnir/neovim.git",
            "stargazers_count": 2,
            "stargazers_url": "https://api.github.com/repos/glepnir/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/glepnir/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/glepnir/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/glepnir/neovim/subscription",
            "svn_url": "https://github.com/glepnir/neovim",
            "tags_url": "https://api.github.com/repos/glepnir/neovim/tags",
            "teams_url": "https://api.github.com/repos/glepnir/neovim/teams",
            "topics": [],
            "trees_url": "https://api.github.com/repos/glepnir/neovim/git/trees{/sha}",
            "updated_at": "2025-02-15T06:06:08Z",
            "url": "https://api.github.com/repos/glepnir/neovim",
            "visibility": "public",
            "watchers": 2,
            "watchers_count": 2,
            "web_commit_signoff_required": false
        },
        "sha": "6525c19ab000479adf7309aa5d79f7b815b83dec",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
            "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
            "followers_url": "https://api.github.com/users/glepnir/followers",
            "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
            "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/glepnir",
            "id": 41671631,
            "login": "glepnir",
            "node_id": "MDQ6VXNlcjQxNjcxNjMx",
            "organizations_url": "https://api.github.com/users/glepnir/orgs",
            "received_events_url": "https://api.github.com/users/glepnir/received_events",
            "repos_url": "https://api.github.com/users/glepnir/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/glepnir",
            "user_view_type": "public"
        }
    },
    "html_url": "https://github.com/neovim/neovim/pull/32377",
    "id": 2324258654,
    "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32377",
    "labels": [
        {
            "color": "e6e6e6",
            "default": false,
            "description": "See https://neovim.io/doc/user/dev_vimpatch.html",
            "id": 843184430,
            "name": "vim-patch",
            "node_id": "MDU6TGFiZWw4NDMxODQ0MzA=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/vim-patch"
        }
    ],
    "locked": false,
    "merge_commit_sha": "53e737748e0e5c032fd6e2c2172c94bc5baf0cb7",
    "merged_at": "2025-02-09T02:43:02Z",
    "milestone": null,
    "node_id": "PR_kwDOAPphoM6KiV9e",
    "number": 32377,
    "patch_url": "https://github.com/neovim/neovim/pull/32377.patch",
    "requested_reviewers": [],
    "requested_teams": [],
    "review_comment_url": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}",
    "review_comments_url": "https://api.github.com/repos/neovim/neovim/pulls/32377/comments",
    "state": "closed",
    "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/6525c19ab000479adf7309aa5d79f7b815b83dec",
    "title": "vim-patch:9.1.1086: completion doesn't work with multi lines",
    "updated_at": "2025-02-12T03:28:32Z",
    "url": "https://api.github.com/repos/neovim/neovim/pulls/32377",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
        "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
        "followers_url": "https://api.github.com/users/glepnir/followers",
        "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
        "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/glepnir",
        "id": 41671631,
        "login": "glepnir",
        "node_id": "MDQ6VXNlcjQxNjcxNjMx",
        "organizations_url": "https://api.github.com/users/glepnir/orgs",
        "received_events_url": "https://api.github.com/users/glepnir/received_events",
        "repos_url": "https://api.github.com/users/glepnir/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/glepnir",
        "user_view_type": "public"
    }
}