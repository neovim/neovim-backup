{
    "_links": {
        "comments": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/31525/comments"
        },
        "commits": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/31525/commits"
        },
        "html": {
            "href": "https://github.com/neovim/neovim/pull/31525"
        },
        "issue": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/31525"
        },
        "review_comment": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}"
        },
        "review_comments": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/31525/comments"
        },
        "self": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/31525"
        },
        "statuses": {
            "href": "https://api.github.com/repos/neovim/neovim/statuses/777939af88d2474d64abf79346723712b11a4e47"
        }
    },
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "MEMBER",
    "auto_merge": null,
    "base": {
        "label": "neovim:master",
        "ref": "master",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/neovim/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/neovim/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/neovim/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/neovim/neovim/branches{/branch}",
            "clone_url": "https://github.com/neovim/neovim.git",
            "collaborators_url": "https://api.github.com/repos/neovim/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/neovim/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/neovim/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/neovim/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/neovim/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/neovim/neovim/contributors",
            "created_at": "2014-01-31T13:39:22Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/neovim/neovim/deployments",
            "description": "Vim-fork focused on extensibility and usability",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/neovim/neovim/downloads",
            "events_url": "https://api.github.com/repos/neovim/neovim/events",
            "fork": false,
            "forks": 5856,
            "forks_count": 5856,
            "forks_url": "https://api.github.com/repos/neovim/neovim/forks",
            "full_name": "neovim/neovim",
            "git_commits_url": "https://api.github.com/repos/neovim/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/neovim/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/neovim/neovim/git/tags{/sha}",
            "git_url": "git://github.com/neovim/neovim.git",
            "has_discussions": true,
            "has_downloads": true,
            "has_issues": true,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://neovim.io",
            "hooks_url": "https://api.github.com/repos/neovim/neovim/hooks",
            "html_url": "https://github.com/neovim/neovim",
            "id": 16408992,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/neovim/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/neovim/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/neovim/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/neovim/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/neovim/neovim/labels{/name}",
            "language": "Vim Script",
            "languages_url": "https://api.github.com/repos/neovim/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/neovim/neovim/merges",
            "milestones_url": "https://api.github.com/repos/neovim/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "MDEwOlJlcG9zaXRvcnkxNjQwODk5Mg==",
            "notifications_url": "https://api.github.com/repos/neovim/neovim/notifications{?since,all,participating}",
            "open_issues": 1849,
            "open_issues_count": 1849,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
                "events_url": "https://api.github.com/users/neovim/events{/privacy}",
                "followers_url": "https://api.github.com/users/neovim/followers",
                "following_url": "https://api.github.com/users/neovim/following{/other_user}",
                "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/neovim",
                "id": 6471485,
                "login": "neovim",
                "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
                "organizations_url": "https://api.github.com/users/neovim/orgs",
                "received_events_url": "https://api.github.com/users/neovim/received_events",
                "repos_url": "https://api.github.com/users/neovim/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
                "type": "Organization",
                "url": "https://api.github.com/users/neovim",
                "user_view_type": "public"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/neovim/neovim/pulls{/number}",
            "pushed_at": "2025-02-11T02:06:45Z",
            "releases_url": "https://api.github.com/repos/neovim/neovim/releases{/id}",
            "size": 307849,
            "ssh_url": "git@github.com:neovim/neovim.git",
            "stargazers_count": 86062,
            "stargazers_url": "https://api.github.com/repos/neovim/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/neovim/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/neovim/neovim/subscription",
            "svn_url": "https://github.com/neovim/neovim",
            "tags_url": "https://api.github.com/repos/neovim/neovim/tags",
            "teams_url": "https://api.github.com/repos/neovim/neovim/teams",
            "topics": [
                "api",
                "c",
                "lua",
                "neovim",
                "nvim",
                "text-editor",
                "vim"
            ],
            "trees_url": "https://api.github.com/repos/neovim/neovim/git/trees{/sha}",
            "updated_at": "2025-02-11T02:12:27Z",
            "url": "https://api.github.com/repos/neovim/neovim",
            "visibility": "public",
            "watchers": 86062,
            "watchers_count": 86062,
            "web_commit_signoff_required": false
        },
        "sha": "259573db831755ba55276f49f963679164dcb1b0",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
            "events_url": "https://api.github.com/users/neovim/events{/privacy}",
            "followers_url": "https://api.github.com/users/neovim/followers",
            "following_url": "https://api.github.com/users/neovim/following{/other_user}",
            "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/neovim",
            "id": 6471485,
            "login": "neovim",
            "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
            "organizations_url": "https://api.github.com/users/neovim/orgs",
            "received_events_url": "https://api.github.com/users/neovim/received_events",
            "repos_url": "https://api.github.com/users/neovim/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
            "type": "Organization",
            "url": "https://api.github.com/users/neovim",
            "user_view_type": "public"
        }
    },
    "body": "Problem:  Prompts are emitted as message events, where cmdline events\r\n          are more appropriate. The user input is also emitted as\r\n          message events in fast context, so cannot be displayed with\r\n          vim.ui_attach().\r\nSolution: Ask for user input through cmdline prompts.",
    "closed_at": "2025-01-02T13:51:03Z",
    "comment_data": [
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/31525#discussion_r1878655059"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/31525"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1878655059"
                }
            },
            "author_association": "MEMBER",
            "body": "This PR now also fixes mouse clicks for number prompts, which have been broken since 2019💀\r\n```\r\ncommit 1ce28d7d9b2fd0e6a81174769e30dc59ded93876\r\nDate:   Sun Jun 9 16:00:09 2019 -0400\r\n\r\n    vim-patch:8.0.1756: GUI: after prompting for a number the mouse shape is wrong\r\n```\r\n\r\nThe oldtests for this still passed because it bypasses the problem through `nvim_input_mouse()`.",
            "commit_id": "777939af88d2474d64abf79346723712b11a4e47",
            "created_at": "2024-12-10T18:53:35Z",
            "diff_hunk": "@@ -157,105 +147,60 @@ int get_keystroke(MultiQueue *events)\n   return n;\n }\n \n-/// Get a number from the user.\n-/// When \"mouse_used\" is not NULL allow using the mouse.",
            "html_url": "https://github.com/neovim/neovim/pull/31525#discussion_r1878655059",
            "id": 1878655059,
            "line": 159,
            "node_id": "PRRC_kwDOAPphoM5v-gBT",
            "original_commit_id": "3a305347de5d3a3e9cc5fa7931e9ab70c44d3720",
            "original_line": 159,
            "original_position": 66,
            "original_start_line": null,
            "path": "src/nvim/input.c",
            "position": 69,
            "pull_request_review_id": 2493297625,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/31525",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 2,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1878655059/reactions"
            },
            "side": "LEFT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-12-11T15:01:28Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1878655059",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/31525#discussion_r1880279052"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/31525"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1880279052"
                }
            },
            "author_association": "MEMBER",
            "body": "The point of this test was to make sure no unprintable characters are put on the screen, which I suppose still holds true. The actual display difference seems insignificant.",
            "commit_id": "777939af88d2474d64abf79346723712b11a4e47",
            "created_at": "2024-12-11T14:17:32Z",
            "diff_hunk": "@@ -361,25 +361,16 @@ describe('input non-printable chars', function()\n     ]])\n \n     feed('\\005')\n-    screen:expect([[\n-      foobar                                                      |\n-      {1:~                                                           }|\n-      {3:                                                            }|\n-      \"Xtest-overwrite\"                                           |\n-      {9:WARNING: The file has been changed since reading it!!!}      |\n-      {6:Do you really want to write to it (y/n)?}u                   |\n-      {6:Do you really want to write to it (y/n)?}                    |",
            "html_url": "https://github.com/neovim/neovim/pull/31525#discussion_r1880279052",
            "id": 1880279052,
            "line": 371,
            "node_id": "PRRC_kwDOAPphoM5wEsgM",
            "original_commit_id": "8ce796bbd0f4f3acf33531b859cc381c6e7e9ef8",
            "original_line": 371,
            "original_position": 11,
            "original_start_line": null,
            "path": "test/functional/ui/input_spec.lua",
            "position": 4,
            "pull_request_review_id": 2493297625,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/31525",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1880279052/reactions"
            },
            "side": "LEFT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-12-11T16:06:47Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1880279052",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/31525#discussion_r1880305567"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/31525"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1880305567"
                }
            },
            "author_association": "MEMBER",
            "body": "Can probably simplify this and remove the non-fast `msg_show` path once all prompt messages are followed by a `cmdline_show` event. Not sure it's worth the churn to move the \"return_prompt\" event there now (since it doesn't need to display user input). Probably best to leave that one alone and remove it altogether when we have a default UI that doesn't use it anymore. Heads up @folke.",
            "commit_id": "777939af88d2474d64abf79346723712b11a4e47",
            "created_at": "2024-12-11T14:27:50Z",
            "diff_hunk": "@@ -721,7 +721,7 @@ void ui_call_event(char *name, bool fast, Array args)\n   // Prompt messages should be shown immediately so must be safe\n   if (strcmp(name, \"msg_show\") == 0) {\n     char *kind = args.items[0].data.string.data;\n-    fast = !kind || ((strncmp(kind, \"confirm\", 7) != 0 && strstr(kind, \"_prompt\") == NULL));\n+    fast = !kind || ((strncmp(kind, \"confirm\", 7) != 0 && strcmp(kind, \"return_prompt\") != 0));",
            "html_url": "https://github.com/neovim/neovim/pull/31525#discussion_r1880305567",
            "id": 1880305567,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5wEy-f",
            "original_commit_id": "8ce796bbd0f4f3acf33531b859cc381c6e7e9ef8",
            "original_line": 724,
            "original_position": 5,
            "original_start_line": null,
            "path": "src/nvim/ui.c",
            "position": null,
            "pull_request_review_id": 2493297625,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/31525",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1880305567/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-12-11T15:01:28Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1880305567",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/31525#discussion_r1880502750"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/31525"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1880502750"
                }
            },
            "author_association": "MEMBER",
            "body": "For my understanding: why was only one of these \"prompts\"(?) removed?",
            "commit_id": "777939af88d2474d64abf79346723712b11a4e47",
            "created_at": "2024-12-11T16:20:01Z",
            "diff_hunk": "@@ -361,25 +361,16 @@ describe('input non-printable chars', function()\n     ]])\n \n     feed('\\005')\n-    screen:expect([[\n-      foobar                                                      |\n-      {1:~                                                           }|\n-      {3:                                                            }|\n-      \"Xtest-overwrite\"                                           |\n-      {9:WARNING: The file has been changed since reading it!!!}      |\n-      {6:Do you really want to write to it (y/n)?}u                   |\n-      {6:Do you really want to write to it (y/n)?}                    |\n-      {6:Do you really want to write to it (y/n)?}^                    |\n-    ]])\n+    screen:expect_unchanged()\n \n     feed('n')\n     screen:expect([[\n       foobar                                                      |\n+      {1:~                                                           }|\n       {3:                                                            }|\n       \"Xtest-overwrite\"                                           |\n       {9:WARNING: The file has been changed since reading it!!!}      |\n       {6:Do you really want to write to it (y/n)?}u                   |\n-      {6:Do you really want to write to it (y/n)?}                    |\n       {6:Do you really want to write to it (y/n)?}n                   |",
            "html_url": "https://github.com/neovim/neovim/pull/31525#discussion_r1880502750",
            "id": 1880502750,
            "line": 383,
            "node_id": "PRRC_kwDOAPphoM5wFjHe",
            "original_commit_id": "7692fc5956d7dfaf8d88f49f9e158e7fd4368f66",
            "original_line": 383,
            "original_position": 25,
            "original_start_line": null,
            "path": "test/functional/ui/input_spec.lua",
            "position": 15,
            "pull_request_review_id": 2496180276,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/31525",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1880502750/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-12-11T16:20:02Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1880502750",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/31525#discussion_r1880537718"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/31525"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1880537718"
                }
            },
            "author_association": "MEMBER",
            "body": "Old [implementation](https://github.com/neovim/neovim/pull/31525/files#diff-5134a5ea161c11fa8571f2cc0f9677d108ebda3e5741438147979ae504b7ef4aL58) emitted the message and pressed key on each invalid keypress. Now we stay inside the active cmdline state if the `command_line_handle_key()` switch returns early (which it does for the tested `feed('\\005')` here). Could probably make it behave the same if necessary.",
            "commit_id": "777939af88d2474d64abf79346723712b11a4e47",
            "created_at": "2024-12-11T16:40:53Z",
            "diff_hunk": "@@ -361,25 +361,16 @@ describe('input non-printable chars', function()\n     ]])\n \n     feed('\\005')\n-    screen:expect([[\n-      foobar                                                      |\n-      {1:~                                                           }|\n-      {3:                                                            }|\n-      \"Xtest-overwrite\"                                           |\n-      {9:WARNING: The file has been changed since reading it!!!}      |\n-      {6:Do you really want to write to it (y/n)?}u                   |\n-      {6:Do you really want to write to it (y/n)?}                    |\n-      {6:Do you really want to write to it (y/n)?}^                    |\n-    ]])\n+    screen:expect_unchanged()\n \n     feed('n')\n     screen:expect([[\n       foobar                                                      |\n+      {1:~                                                           }|\n       {3:                                                            }|\n       \"Xtest-overwrite\"                                           |\n       {9:WARNING: The file has been changed since reading it!!!}      |\n       {6:Do you really want to write to it (y/n)?}u                   |\n-      {6:Do you really want to write to it (y/n)?}                    |\n       {6:Do you really want to write to it (y/n)?}n                   |",
            "html_url": "https://github.com/neovim/neovim/pull/31525#discussion_r1880537718",
            "id": 1880537718,
            "in_reply_to_id": 1880502750,
            "line": 383,
            "node_id": "PRRC_kwDOAPphoM5wFrp2",
            "original_commit_id": "7692fc5956d7dfaf8d88f49f9e158e7fd4368f66",
            "original_line": 383,
            "original_position": 25,
            "original_start_line": null,
            "path": "test/functional/ui/input_spec.lua",
            "position": 15,
            "pull_request_review_id": 2496238108,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/31525",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1880537718/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-12-11T21:49:08Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1880537718",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/31525#discussion_r1884237518"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/31525"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1884237518"
                }
            },
            "author_association": "MEMBER",
            "body": "We now also return after keys that did not change the cmdline, so that the callers can still properly handle control characters. This test now displays `^E` rater than nothing.",
            "commit_id": "777939af88d2474d64abf79346723712b11a4e47",
            "created_at": "2024-12-13T17:10:09Z",
            "diff_hunk": "@@ -361,25 +361,16 @@ describe('input non-printable chars', function()\n     ]])\n \n     feed('\\005')\n-    screen:expect([[\n-      foobar                                                      |\n-      {1:~                                                           }|\n-      {3:                                                            }|\n-      \"Xtest-overwrite\"                                           |\n-      {9:WARNING: The file has been changed since reading it!!!}      |\n-      {6:Do you really want to write to it (y/n)?}u                   |\n-      {6:Do you really want to write to it (y/n)?}                    |\n-      {6:Do you really want to write to it (y/n)?}^                    |\n-    ]])\n+    screen:expect_unchanged()\n \n     feed('n')\n     screen:expect([[\n       foobar                                                      |\n+      {1:~                                                           }|\n       {3:                                                            }|\n       \"Xtest-overwrite\"                                           |\n       {9:WARNING: The file has been changed since reading it!!!}      |\n       {6:Do you really want to write to it (y/n)?}u                   |\n-      {6:Do you really want to write to it (y/n)?}                    |\n       {6:Do you really want to write to it (y/n)?}n                   |",
            "html_url": "https://github.com/neovim/neovim/pull/31525#discussion_r1884237518",
            "id": 1884237518,
            "in_reply_to_id": 1880502750,
            "line": 383,
            "node_id": "PRRC_kwDOAPphoM5wTy7O",
            "original_commit_id": "7692fc5956d7dfaf8d88f49f9e158e7fd4368f66",
            "original_line": 383,
            "original_position": 25,
            "original_start_line": null,
            "path": "test/functional/ui/input_spec.lua",
            "position": 15,
            "pull_request_review_id": 2502761261,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/31525",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1884237518/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-12-13T17:10:09Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1884237518",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/31525#discussion_r1884963665"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/31525"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1884963665"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n  \\ .. \" 2 \\\"bard\\\"\\n\"\r\n  \"\\ Nvim: Prompt message is sent to cmdline prompt.\r\n  \"\\ .. \"Type number and <Enter> or click with the mouse (q or empty cancels): \", a)\r\n  \\ , a)\r\n```",
            "commit_id": "777939af88d2474d64abf79346723712b11a4e47",
            "created_at": "2024-12-14T07:51:53Z",
            "diff_hunk": "@@ -470,8 +470,10 @@ func Test_spellsuggest_option_number()\n   \\    \"\\n\"\n   \\ .. \"Change \\\"baord\\\" to:\\n\"\n   \\ .. \" 1 \\\"board\\\"\\n\"\n-  \\ .. \" 2 \\\"bard\\\"\\n\"\n-  \\ .. \"Type number and <Enter> or click with the mouse (q or empty cancels): \", a)\n+  \"\\ Nvim: Prompt message is sent to cmdline prompt.\n+  \"\\ .. \" 2 \\\"bard\\\"\\n\"\n+  \\ .. \" 2 \\\"bard\\\"\\n\", a)\n+  \"\\ .. \"Type number and <Enter> or click with the mouse (q or empty cancels): \", a)",
            "html_url": "https://github.com/neovim/neovim/pull/31525#discussion_r1884963665",
            "id": 1884963665,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5wWkNR",
            "original_commit_id": "56e0b2aeb09a3599e82815692a5e3f96cca7ee03",
            "original_line": 475,
            "original_position": 9,
            "original_start_line": 473,
            "path": "test/old/testdir/test_spell.vim",
            "position": null,
            "pull_request_review_id": 2503737716,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/31525",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1884963665/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2024-12-14T07:53:34Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1884963665",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/31525#discussion_r1884964473"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/31525"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1884964473"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n  \\ .. \" 3 \\\"BROAD\\\"\\n\"\r\n  \"\\ Nvim: Prompt message is sent to cmdline prompt.\r\n  \"\\ .. \"Type number and <Enter> or click with the mouse (q or empty cancels): \", a)\r\n  \\ , a)\r\n```",
            "commit_id": "777939af88d2474d64abf79346723712b11a4e47",
            "created_at": "2024-12-14T07:53:04Z",
            "diff_hunk": "@@ -508,8 +510,10 @@ func Test_spellsuggest_option_expr()\n   \\ .. \"Change \\\"baord\\\" to:\\n\"\n   \\ .. \" 1 \\\"BARD\\\"\\n\"\n   \\ .. \" 2 \\\"BOARD\\\"\\n\"\n-  \\ .. \" 3 \\\"BROAD\\\"\\n\"\n-  \\ .. \"Type number and <Enter> or click with the mouse (q or empty cancels): \", a)\n+  \"\\ Nvim: Prompt message is sent to cmdline prompt.\n+  \"\\ .. \" 3 \\\"BROAD\\\"\\n\"\n+  \\ .. \" 3 \\\"BROAD\\\"\\n\", a)\n+  \"\\ .. \"Type number and <Enter> or click with the mouse (q or empty cancels): \", a)",
            "html_url": "https://github.com/neovim/neovim/pull/31525#discussion_r1884964473",
            "id": 1884964473,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5wWkZ5",
            "original_commit_id": "56e0b2aeb09a3599e82815692a5e3f96cca7ee03",
            "original_line": 515,
            "original_position": 22,
            "original_start_line": 513,
            "path": "test/old/testdir/test_spell.vim",
            "position": null,
            "pull_request_review_id": 2503737716,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/31525",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1884964473/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2024-12-14T07:53:34Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1884964473",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/31525#discussion_r1884964581"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/31525"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1884964581"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n  \\ .. \" 3 \\\"BROAD\\\"                     (5 - 0)\\n\"\r\n  \"\\ Nvim: Prompt message is sent to cmdline prompt.\r\n  \"\\ .. \"Type number and <Enter> or click with the mouse (q or empty cancels): \", a)\r\n  \\ , a)\r\n```",
            "commit_id": "777939af88d2474d64abf79346723712b11a4e47",
            "created_at": "2024-12-14T07:53:26Z",
            "diff_hunk": "@@ -520,8 +524,10 @@ func Test_spellsuggest_option_expr()\n   \\ .. \"Change \\\"baord\\\" to:\\n\"\n   \\ .. \" 1 \\\"BARD\\\"                      (4 - 0)\\n\"\n   \\ .. \" 2 \\\"BOARD\\\"                     (5 - 0)\\n\"\n-  \\ .. \" 3 \\\"BROAD\\\"                     (5 - 0)\\n\"\n-  \\ .. \"Type number and <Enter> or click with the mouse (q or empty cancels): \", a)\n+  \"\\ Nvim: Prompt message is sent to cmdline prompt.\n+  \"\\ .. \" 3 \\\"BROAD\\\"                     (5 - 0)\\n\"\n+  \\ .. \" 3 \\\"BROAD\\\"                     (5 - 0)\\n\", a)\n+  \"\\ .. \"Type number and <Enter> or click with the mouse (q or empty cancels): \", a)",
            "html_url": "https://github.com/neovim/neovim/pull/31525#discussion_r1884964581",
            "id": 1884964581,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5wWkbl",
            "original_commit_id": "56e0b2aeb09a3599e82815692a5e3f96cca7ee03",
            "original_line": 529,
            "original_position": 35,
            "original_start_line": 527,
            "path": "test/old/testdir/test_spell.vim",
            "position": null,
            "pull_request_review_id": 2503737716,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/31525",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1884964581/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2024-12-14T07:53:34Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1884964581",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/31525#discussion_r1884965336"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/31525"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1884965336"
                }
            },
            "author_association": "MEMBER",
            "body": "This function name is confusing. What does this have to do with `int`?",
            "commit_id": "777939af88d2474d64abf79346723712b11a4e47",
            "created_at": "2024-12-14T07:55:55Z",
            "diff_hunk": "@@ -1852,6 +1852,18 @@ static int command_line_browse_history(CommandLineState *s)\n   return CMDLINE_NOT_CHANGED;\n }\n \n+static void put_int_on_cmdline(CommandLineState *s)",
            "html_url": "https://github.com/neovim/neovim/pull/31525#discussion_r1884965336",
            "id": 1884965336,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5wWknY",
            "original_commit_id": "56e0b2aeb09a3599e82815692a5e3f96cca7ee03",
            "original_line": 1855,
            "original_position": 35,
            "original_start_line": null,
            "path": "src/nvim/ex_getln.c",
            "position": null,
            "pull_request_review_id": 2503738696,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/31525",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1884965336/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-12-14T07:55:55Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1884965336",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/31525#discussion_r1884967685"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/31525"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1884967685"
                }
            },
            "author_association": "MEMBER",
            "body": "Doing this in `command_line_not_changed()` is a bit strange, as the effect of a control character in cmdline mode still takes effect before this is reached. For Ctrl-E it's not very obvious as it just moves the cursor, but the behavior may be very strange if one presses some other keys (e.g Ctrl-R).",
            "commit_id": "777939af88d2474d64abf79346723712b11a4e47",
            "created_at": "2024-12-14T08:03:39Z",
            "diff_hunk": "@@ -2181,19 +2207,18 @@ static int command_line_handle_key(CommandLineState *s)\n     return command_line_changed(s);\n   }\n \n-  // put the character in the command line\n-  if (IS_SPECIAL(s->c) || mod_mask != 0) {\n-    put_on_cmdline(get_special_key_name(s->c, mod_mask), -1, true);\n-  } else {\n-    int j = utf_char2bytes(s->c, IObuff);\n-    IObuff[j] = NUL;                // exclude composing chars\n-    put_on_cmdline(IObuff, j, true);\n-  }\n-  return command_line_changed(s);\n+  put_int_on_cmdline(s);\n+  return ccline.one_key ? 0 : command_line_changed(s);\n }\n \n static int command_line_not_changed(CommandLineState *s)\n {\n+  // For one key prompt, put onto cmdline and exit.\n+  if (ccline.one_key) {\n+    put_int_on_cmdline(s);\n+    return 0;\n+  }\n+",
            "html_url": "https://github.com/neovim/neovim/pull/31525#discussion_r1884967685",
            "id": 1884967685,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5wWlMF",
            "original_commit_id": "56e0b2aeb09a3599e82815692a5e3f96cca7ee03",
            "original_line": 2221,
            "original_position": 102,
            "original_start_line": 2216,
            "path": "src/nvim/ex_getln.c",
            "position": null,
            "pull_request_review_id": 2503740955,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/31525",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1884967685/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2024-12-15T00:44:26Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1884967685",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/31525#discussion_r1885434211"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/31525"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1885434211"
                }
            },
            "author_association": "MEMBER",
            "body": "Agreed, I thought some of the logic in `command_line_handle_key()` could still be useful/necessary, but we shouldn't do any of it for one key prompts. (Except `Esc` and `Ctrl_C`, to avoid putting their control codes onto the cmdline.)",
            "commit_id": "777939af88d2474d64abf79346723712b11a4e47",
            "created_at": "2024-12-15T00:15:42Z",
            "diff_hunk": "@@ -2181,19 +2207,18 @@ static int command_line_handle_key(CommandLineState *s)\n     return command_line_changed(s);\n   }\n \n-  // put the character in the command line\n-  if (IS_SPECIAL(s->c) || mod_mask != 0) {\n-    put_on_cmdline(get_special_key_name(s->c, mod_mask), -1, true);\n-  } else {\n-    int j = utf_char2bytes(s->c, IObuff);\n-    IObuff[j] = NUL;                // exclude composing chars\n-    put_on_cmdline(IObuff, j, true);\n-  }\n-  return command_line_changed(s);\n+  put_int_on_cmdline(s);\n+  return ccline.one_key ? 0 : command_line_changed(s);\n }\n \n static int command_line_not_changed(CommandLineState *s)\n {\n+  // For one key prompt, put onto cmdline and exit.\n+  if (ccline.one_key) {\n+    put_int_on_cmdline(s);\n+    return 0;\n+  }\n+",
            "html_url": "https://github.com/neovim/neovim/pull/31525#discussion_r1885434211",
            "id": 1885434211,
            "in_reply_to_id": 1884967685,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5wYXFj",
            "original_commit_id": "56e0b2aeb09a3599e82815692a5e3f96cca7ee03",
            "original_line": 2221,
            "original_position": 102,
            "original_start_line": 2216,
            "path": "src/nvim/ex_getln.c",
            "position": null,
            "pull_request_review_id": 2504273168,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/31525",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1885434211/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2024-12-15T00:15:42Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1885434211",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/31525#discussion_r1885789619"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/31525"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1885789619"
                }
            },
            "author_association": "MEMBER",
            "body": "@bfredl `cmdline_show` events do not receive this prompt hl_id, so ext_cmdline cannot highlight the prompt accordingly. Is adding this hl_id as an additional parameter warranted?",
            "commit_id": "777939af88d2474d64abf79346723712b11a4e47",
            "created_at": "2024-12-15T18:00:19Z",
            "diff_hunk": "@@ -2767,11 +2791,13 @@ char *getcmdline(int firstc, int count, int indent, bool do_concat FUNC_ATTR_UNU\n /// @param[in]  xp_context  Type of expansion.\n /// @param[in]  xp_arg  User-defined expansion argument.\n /// @param[in]  highlight_callback  Callback used for highlighting user input.\n+/// @param[in]  one_key  Return after one key press for button prompt.\n+/// @param[in]  mouse_used  Set to true when returning after right mouse click.\n ///\n /// @return [allocated] Command line or NULL.\n char *getcmdline_prompt(const int firstc, const char *const prompt, const int hl_id,",
            "html_url": "https://github.com/neovim/neovim/pull/31525#discussion_r1885789619",
            "id": 1885789619,
            "line": 2792,
            "node_id": "PRRC_kwDOAPphoM5wZt2z",
            "original_commit_id": "75d83f8b61c065ec9f7b67dfcedc1acb5728cc4d",
            "original_line": 2792,
            "original_position": 111,
            "original_start_line": null,
            "path": "src/nvim/ex_getln.c",
            "position": 111,
            "pull_request_review_id": 2504630440,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/31525",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1885789619/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-12-15T18:00:19Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1885789619",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/31525#discussion_r1895108890"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/31525"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1895108890"
                }
            },
            "author_association": "MEMBER",
            "body": "Added in #31661.",
            "commit_id": "777939af88d2474d64abf79346723712b11a4e47",
            "created_at": "2024-12-23T00:14:55Z",
            "diff_hunk": "@@ -2767,11 +2791,13 @@ char *getcmdline(int firstc, int count, int indent, bool do_concat FUNC_ATTR_UNU\n /// @param[in]  xp_context  Type of expansion.\n /// @param[in]  xp_arg  User-defined expansion argument.\n /// @param[in]  highlight_callback  Callback used for highlighting user input.\n+/// @param[in]  one_key  Return after one key press for button prompt.\n+/// @param[in]  mouse_used  Set to true when returning after right mouse click.\n ///\n /// @return [allocated] Command line or NULL.\n char *getcmdline_prompt(const int firstc, const char *const prompt, const int hl_id,",
            "html_url": "https://github.com/neovim/neovim/pull/31525#discussion_r1895108890",
            "id": 1895108890,
            "in_reply_to_id": 1885789619,
            "line": 2792,
            "node_id": "PRRC_kwDOAPphoM5w9REa",
            "original_commit_id": "75d83f8b61c065ec9f7b67dfcedc1acb5728cc4d",
            "original_line": 2792,
            "original_position": 111,
            "original_start_line": null,
            "path": "src/nvim/ex_getln.c",
            "position": 111,
            "pull_request_review_id": 2519730567,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/31525",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1895108890/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-12-23T00:14:55Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1895108890",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/31525#discussion_r1895660663"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/31525"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1895660663"
                }
            },
            "author_association": "MEMBER",
            "body": "Small regression in this test simply because the message is now a cmdline prompt. This triggers a `:set cmdheight=0` issue that happens somewhere in the incsearch path. Whenever cmdheight == 0 and we type `/foo`, `?foo` or `:%s/foo` where foo exceeds the number of `Columns` we get a `cmdline/msg_row` conflict, resulting in the cleared row and extra scrolled line here. I think it's related to:\r\nhttps://github.com/neovim/neovim/blob/adcd9360dfefc7b1e1edb0e86df460e074991c8d/src/nvim/message.c#L237-L240\r\n\r\nI could attempt to fix this but that work will be in vain assuming we remove the message grid after #27855 (and issue is not present with ext_cmdline (obviously)).",
            "commit_id": "777939af88d2474d64abf79346723712b11a4e47",
            "created_at": "2024-12-23T11:46:45Z",
            "diff_hunk": "@@ -1485,31 +1485,28 @@ describe('cmdheight=0', function()\n   it('when substitute text', function()\n     command('set cmdheight=0 noruler laststatus=3')\n     feed('ifoo<ESC>')\n-    screen:expect {\n-      grid = [[\n+    screen:try_resize(screen._width, 6)\n+    screen:expect([[\n       fo^o                      |\n-      {1:~                        }|*3\n+      {1:~                        }|*4\n       {3:[No Name] [+]            }|\n-    ]],\n-    }\n+    ]])\n \n     feed(':%s/foo/bar/gc<CR>')\n-    screen:expect {\n-      grid = [[\n+    screen:expect([[\n       {2:foo}                      |\n-      {1:~                        }|*3\n-      {6:replace wi...q/l/^E/^Y)?}^ |\n-    ]],\n-    }\n+      {3:                         }|\n+                               |*2",
            "html_url": "https://github.com/neovim/neovim/pull/31525#discussion_r1895660663",
            "id": 1895660663,
            "line": 1499,
            "node_id": "PRRC_kwDOAPphoM5w_Xx3",
            "original_commit_id": "fe7be7ae95d7627fc7e0f0cb7d778803ba2424d7",
            "original_line": 1499,
            "original_position": 26,
            "original_start_line": null,
            "path": "test/functional/ui/cmdline_spec.lua",
            "position": 26,
            "pull_request_review_id": 2520457453,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/31525",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1895660663/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-12-24T15:04:02Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1895660663",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/31525#discussion_r1895674884"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/31525"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1895674884"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "I probably had to reproduce and report the issue with \"multi-line\" (rather longer than columns number) commands (maybe substitute commands) and broken redraw (when switching between command line history e.g. by `<C-Up>`) a few days/weeks ago, but it wasn't necessarily related to this pull request. I am still not sure if you're talking about the same thing. I forgot about it, focused on other things and in the meantime I didn't encounter this problem so it still remains on my todo list.",
            "commit_id": "777939af88d2474d64abf79346723712b11a4e47",
            "created_at": "2024-12-23T12:03:03Z",
            "diff_hunk": "@@ -1485,31 +1485,28 @@ describe('cmdheight=0', function()\n   it('when substitute text', function()\n     command('set cmdheight=0 noruler laststatus=3')\n     feed('ifoo<ESC>')\n-    screen:expect {\n-      grid = [[\n+    screen:try_resize(screen._width, 6)\n+    screen:expect([[\n       fo^o                      |\n-      {1:~                        }|*3\n+      {1:~                        }|*4\n       {3:[No Name] [+]            }|\n-    ]],\n-    }\n+    ]])\n \n     feed(':%s/foo/bar/gc<CR>')\n-    screen:expect {\n-      grid = [[\n+    screen:expect([[\n       {2:foo}                      |\n-      {1:~                        }|*3\n-      {6:replace wi...q/l/^E/^Y)?}^ |\n-    ]],\n-    }\n+      {3:                         }|\n+                               |*2",
            "html_url": "https://github.com/neovim/neovim/pull/31525#discussion_r1895674884",
            "id": 1895674884,
            "in_reply_to_id": 1895660663,
            "line": 1499,
            "node_id": "PRRC_kwDOAPphoM5w_bQE",
            "original_commit_id": "fe7be7ae95d7627fc7e0f0cb7d778803ba2424d7",
            "original_line": 1499,
            "original_position": 26,
            "original_start_line": null,
            "path": "test/functional/ui/cmdline_spec.lua",
            "position": 26,
            "pull_request_review_id": 2520478290,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/31525",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1895674884/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-12-24T15:04:17Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1895674884",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11404453?v=4",
                "events_url": "https://api.github.com/users/przepompownia/events{/privacy}",
                "followers_url": "https://api.github.com/users/przepompownia/followers",
                "following_url": "https://api.github.com/users/przepompownia/following{/other_user}",
                "gists_url": "https://api.github.com/users/przepompownia/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/przepompownia",
                "id": 11404453,
                "login": "przepompownia",
                "node_id": "MDQ6VXNlcjExNDA0NDUz",
                "organizations_url": "https://api.github.com/users/przepompownia/orgs",
                "received_events_url": "https://api.github.com/users/przepompownia/received_events",
                "repos_url": "https://api.github.com/users/przepompownia/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/przepompownia/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/przepompownia/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/przepompownia",
                "user_view_type": "public"
            }
        }
    ],
    "comment_regular_data": [
        {
            "author_association": "CONTRIBUTOR",
            "body": "Please run the case\r\n\r\n```lua\r\nlocal api = vim.api\r\nlocal ns = api.nvim_create_namespace('messageRedirection')\r\n\r\nlocal function log(msg)\r\n  if 0 == #vim.trim(msg) then\r\n    return\r\n  end\r\n  api.nvim_buf_set_lines(1, -1, -1, true, vim.split(msg, '\\n'))\r\n  vim.cmd.normal 'G'\r\nend\r\n\r\nlocal function redraw()\r\n  vim.schedule(function ()\r\n    vim.cmd.redraw()\r\n  end)\r\nend\r\n\r\napi.nvim_create_autocmd('CmdlineEnter', {\r\n  callback = function ()\r\n    vim.ui_detach(ns)\r\n    redraw()\r\n  end\r\n})\r\n\r\nlocal qMsgs = {}\r\n\r\nlocal function consumeQMsgs()\r\n  for _, qmsg in ipairs(qMsgs) do\r\n    log(vim.inspect(qmsg))\r\n  end\r\n  qMsgs = {}\r\nend\r\n\r\nlocal function attach()\r\n  vim.ui_attach(ns, {ext_messages = true, ext_cmdline = false}, function (event, kind, content, replace_last)\r\n    if event ~= 'msg_show' then\r\n      return\r\n    end\r\n    if kind == 'return_prompt' then\r\n      api.nvim_input('\\r')\r\n    end\r\n\r\n    local msg = {\r\n      time = vim.uv.hrtime() / 1000000,\r\n      fast = vim.in_fast_event(),\r\n      e = event or 'none',\r\n      k = kind or 'none',\r\n      c = content or 'none',\r\n      r = replace_last or 'none',\r\n    }\r\n    if not vim.in_fast_event() then\r\n      consumeQMsgs()\r\n      log(vim.inspect(msg))\r\n      redraw()\r\n      return\r\n    end\r\n\r\n    qMsgs[#qMsgs + 1] = msg\r\n    vim.schedule(function ()\r\n      consumeQMsgs()\r\n    end)\r\n  end)\r\nend\r\n\r\napi.nvim_create_autocmd({'CmdlineLeave'}, {callback = attach})\r\n\r\napi.nvim_create_autocmd({'UIEnter'}, {\r\n  callback = function ()\r\n    attach()\r\n    vim.fn.inputlist({'Select: ', 1, 2})\r\n  end\r\n})\r\n```\r\n(similar to https://github.com/neovim/neovim/discussions/31522). \r\n\r\n\r\nFor some reason I don't see the message from `inputlist` called right after `ui_attach`. It probably doesn't matter in practice but worth checking. \r\n\r\nIf I `:call inputlist([])` manually, I see `number_prompt`, which is a step forward.\r\n\r\nWhy not to display `list_cmd` above too? Not sure how it could affect external UIs. ",
            "created_at": "2024-12-09T12:14:35Z",
            "html_url": "https://github.com/neovim/neovim/pull/31525#issuecomment-2527763168",
            "id": 2527763168,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/31525",
            "node_id": "IC_kwDOAPphoM6Wqprg",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2527763168/reactions"
            },
            "updated_at": "2024-12-09T12:29:11Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2527763168",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11404453?v=4",
                "events_url": "https://api.github.com/users/przepompownia/events{/privacy}",
                "followers_url": "https://api.github.com/users/przepompownia/followers",
                "following_url": "https://api.github.com/users/przepompownia/following{/other_user}",
                "gists_url": "https://api.github.com/users/przepompownia/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/przepompownia",
                "id": 11404453,
                "login": "przepompownia",
                "node_id": "MDQ6VXNlcjExNDA0NDUz",
                "organizations_url": "https://api.github.com/users/przepompownia/orgs",
                "received_events_url": "https://api.github.com/users/przepompownia/received_events",
                "repos_url": "https://api.github.com/users/przepompownia/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/przepompownia/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/przepompownia/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/przepompownia",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Hoping to make this incremental change while leaving what is displayed on the current message grid unaffected. Invoking a cmdline prompt affects the message grid globals however, which makes that tricky. Nearly there now but spending a lot of time trying to make it work; might have to leave this until after the message grid is hopefully removed...",
            "created_at": "2024-12-10T16:08:52Z",
            "html_url": "https://github.com/neovim/neovim/pull/31525#issuecomment-2532168430",
            "id": 2532168430,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/31525",
            "node_id": "IC_kwDOAPphoM6W7dLu",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 1,
                "heart": 1,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2532168430/reactions"
            },
            "updated_at": "2024-12-10T16:42:14Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2532168430",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I haven't looked at the code, just did a quick check and this doesn't work too well with firenvim - `:%s/x/y/gc` results in an empty command line popping up without additional information for the user to know what state they're in (i.e., the message saying `replace with b? (y/n)` is gone).\r\nThis might just be an issue with Firenvim itself though, I'll let you know once I've figured it out.",
            "created_at": "2024-12-11T17:08:01Z",
            "html_url": "https://github.com/neovim/neovim/pull/31525#issuecomment-2536579837",
            "id": 2536579837,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/31525",
            "node_id": "IC_kwDOAPphoM6XMSL9",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 1,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2536579837/reactions"
            },
            "updated_at": "2024-12-11T17:08:17Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2536579837",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11534587?v=4",
                "events_url": "https://api.github.com/users/glacambre/events{/privacy}",
                "followers_url": "https://api.github.com/users/glacambre/followers",
                "following_url": "https://api.github.com/users/glacambre/following{/other_user}",
                "gists_url": "https://api.github.com/users/glacambre/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glacambre",
                "id": 11534587,
                "login": "glacambre",
                "node_id": "MDQ6VXNlcjExNTM0NTg3",
                "organizations_url": "https://api.github.com/users/glacambre/orgs",
                "received_events_url": "https://api.github.com/users/glacambre/received_events",
                "repos_url": "https://api.github.com/users/glacambre/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glacambre/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glacambre/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glacambre",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I just rebased my default ext_ui branch on top of this (which I admittedly hadn't done yet, just looked at the affected ext_ui tests which seemed to show correct state). Seems to work as expected if  you display the prompt message in the cmdline.",
            "created_at": "2024-12-11T17:17:49Z",
            "html_url": "https://github.com/neovim/neovim/pull/31525#issuecomment-2536601024",
            "id": 2536601024,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/31525",
            "node_id": "IC_kwDOAPphoM6XMXXA",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2536601024/reactions"
            },
            "updated_at": "2024-12-11T17:17:49Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2536601024",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I think this is dangerous. Any code can be executed in cmdline mode, so this can lead to potential segfaults, and defeat the point of #27874.",
            "created_at": "2024-12-12T00:58:18Z",
            "html_url": "https://github.com/neovim/neovim/pull/31525#issuecomment-2537514411",
            "id": 2537514411,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/31525",
            "node_id": "IC_kwDOAPphoM6XP2Wr",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2537514411/reactions"
            },
            "updated_at": "2024-12-12T01:02:21Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2537514411",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Well the same reasoning from #31224 still holds. Prompt events simply must be (made) safe. Whether we emit a non-fast message, or cmdline event doesn't really matter.\n\nThe risk for prompts is smaller than messages, which are used all over the place. So I don't think it defeats the point of #27874.",
            "created_at": "2024-12-12T01:11:47Z",
            "html_url": "https://github.com/neovim/neovim/pull/31525#issuecomment-2537528374",
            "id": 2537528374,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/31525",
            "node_id": "IC_kwDOAPphoM6XP5w2",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2537528374/reactions"
            },
            "updated_at": "2024-12-12T01:11:47Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2537528374",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> Whether we emit a non-fast message, or cmdline event doesn't really matter.\r\n\r\nIt does matter. With a non-fast message the executed code is limited to the callback. With a cmdline prompt there can be autocommands from unrelated plugins.",
            "created_at": "2024-12-12T14:29:49Z",
            "html_url": "https://github.com/neovim/neovim/pull/31525#issuecomment-2539114209",
            "id": 2539114209,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/31525",
            "node_id": "IC_kwDOAPphoM6XV87h",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2539114209/reactions"
            },
            "updated_at": "2024-12-12T14:30:22Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2539114209",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> With a non-fast message the executed code is limited to the callback. With a cmdline prompt there can be autocommands from unrelated plugins.\r\n\r\nYeah I realized that while typing my reply; if that's your concern we can avoid firing autocommands when inside a cmdline prompt. The point remains that if we encounter prompts in places where calling API functions results in problems, we need to fix that anyhow.\r\n\r\n",
            "created_at": "2024-12-12T15:01:12Z",
            "html_url": "https://github.com/neovim/neovim/pull/31525#issuecomment-2539206479",
            "id": 2539206479,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/31525",
            "node_id": "IC_kwDOAPphoM6XWTdP",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2539206479/reactions"
            },
            "updated_at": "2024-12-12T15:12:48Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2539206479",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Actually some of these crashes may happen in Vim as well, because Vim processes timers when waiting for a character.\r\n\r\nAlso, `prompt_for_key()` cannot return Ctrl-E, which is an possible key in the substitution prompt. It cannot return some other control characters like Ctrl-C and Esc either, despite them being checked for in the return value.",
            "created_at": "2024-12-13T14:24:28Z",
            "html_url": "https://github.com/neovim/neovim/pull/31525#issuecomment-2541573065",
            "id": 2541573065,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/31525",
            "node_id": "IC_kwDOAPphoM6XfVPJ",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2541573065/reactions"
            },
            "updated_at": "2024-12-13T14:24:28Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2541573065",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> Also, prompt_for_key() cannot return Ctrl-E, which is an possible key in the substitution prompt. It cannot return some other control characters like Ctrl-C and Esc either, despite them being checked for in the return value.\r\n\r\nRight, I can go over these. So if timer callbacks can be executed in Vim during prompts, are we okay with processing cmdline autocmds/scheduled events as well, until we run into actual problems? Or should we preemptively avoid doing that?",
            "created_at": "2024-12-13T14:40:44Z",
            "html_url": "https://github.com/neovim/neovim/pull/31525#issuecomment-2541606319",
            "id": 2541606319,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/31525",
            "node_id": "IC_kwDOAPphoM6XfdWv",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2541606319/reactions"
            },
            "updated_at": "2024-12-13T23:18:32Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2541606319",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "One key prompts now always return early even if the cmdline did not change, so that callers can still handle control characters. Also further simplified this a bit by merging the number and one key prompts into a prompt_for_input().",
            "created_at": "2024-12-13T17:12:42Z",
            "html_url": "https://github.com/neovim/neovim/pull/31525#issuecomment-2541891043",
            "id": 2541891043,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/31525",
            "node_id": "IC_kwDOAPphoM6Xgi3j",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 1,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2541891043/reactions"
            },
            "updated_at": "2024-12-13T17:13:13Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2541891043",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Should mappings still be disabled at these prompts (especially one-key prompts)? Allowing mappings is technically backward-incompatible, as if the user has some of the required keys mapped in cmdline mode, they may have to press different keys.",
            "created_at": "2024-12-15T08:45:02Z",
            "html_url": "https://github.com/neovim/neovim/pull/31525#issuecomment-2543561155",
            "id": 2543561155,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/31525",
            "node_id": "IC_kwDOAPphoM6Xm6nD",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2543561155/reactions"
            },
            "updated_at": "2024-12-15T22:19:20Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2543561155",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "fyi, I'll be on vacation till January 1, so would be great not to merge this till I'm back, since this will break some things in noice, which are easy to fix, but will need to be fixed. ty",
            "created_at": "2024-12-20T14:03:45Z",
            "html_url": "https://github.com/neovim/neovim/pull/31525#issuecomment-2557077452",
            "id": 2557077452,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/31525",
            "node_id": "IC_kwDOAPphoM6YaefM",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 2,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2557077452/reactions"
            },
            "updated_at": "2024-12-20T14:03:45Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2557077452",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/292349?v=4",
                "events_url": "https://api.github.com/users/folke/events{/privacy}",
                "followers_url": "https://api.github.com/users/folke/followers",
                "following_url": "https://api.github.com/users/folke/following{/other_user}",
                "gists_url": "https://api.github.com/users/folke/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/folke",
                "id": 292349,
                "login": "folke",
                "node_id": "MDQ6VXNlcjI5MjM0OQ==",
                "organizations_url": "https://api.github.com/users/folke/orgs",
                "received_events_url": "https://api.github.com/users/folke/received_events",
                "repos_url": "https://api.github.com/users/folke/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/folke/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/folke/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/folke",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Fine by me @folke. FYI (if we consider https://github.com/neovim/neovim/pull/31525#issuecomment-2541606319 to be resolved); after this PR you would no longer have to keep track of an internal message queue for prompt messages, scheduled messages will be displayed when Nvim enters the cmdline state (@przepompownia).",
            "created_at": "2024-12-20T14:46:01Z",
            "html_url": "https://github.com/neovim/neovim/pull/31525#issuecomment-2557149276",
            "id": 2557149276,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/31525",
            "node_id": "IC_kwDOAPphoM6YawBc",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2557149276/reactions"
            },
            "updated_at": "2024-12-20T14:46:01Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2557149276",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "After several hours of working without a queue on this PR, I did not encounter any of the previously observed issues, especially with `inputlist`.",
            "created_at": "2024-12-20T21:08:09Z",
            "html_url": "https://github.com/neovim/neovim/pull/31525#issuecomment-2557718412",
            "id": 2557718412,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/31525",
            "node_id": "IC_kwDOAPphoM6Yc6-M",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2557718412/reactions"
            },
            "updated_at": "2024-12-20T21:08:09Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2557718412",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11404453?v=4",
                "events_url": "https://api.github.com/users/przepompownia/events{/privacy}",
                "followers_url": "https://api.github.com/users/przepompownia/followers",
                "following_url": "https://api.github.com/users/przepompownia/following{/other_user}",
                "gists_url": "https://api.github.com/users/przepompownia/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/przepompownia",
                "id": 11404453,
                "login": "przepompownia",
                "node_id": "MDQ6VXNlcjExNDA0NDUz",
                "organizations_url": "https://api.github.com/users/przepompownia/orgs",
                "received_events_url": "https://api.github.com/users/przepompownia/received_events",
                "repos_url": "https://api.github.com/users/przepompownia/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/przepompownia/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/przepompownia/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/przepompownia",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I tested this with Neovide, and didn't see any obvious problems, neither in practice nor when reviewing the code.  So, this LGTM.",
            "created_at": "2024-12-23T10:06:58Z",
            "html_url": "https://github.com/neovim/neovim/pull/31525#issuecomment-2559354419",
            "id": 2559354419,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/31525",
            "node_id": "IC_kwDOAPphoM6YjKYz",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2559354419/reactions"
            },
            "updated_at": "2024-12-23T10:06:58Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2559354419",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I think it fits the \"EVENTS\" section in `news-breaking`? Those items need updating anyhow for this change, and what is shown to the user is largely unchanged as a result of this change.",
            "created_at": "2024-12-30T21:52:10Z",
            "html_url": "https://github.com/neovim/neovim/pull/31525#issuecomment-2565950078",
            "id": 2565950078,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/31525",
            "node_id": "IC_kwDOAPphoM6Y8Up-",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2565950078/reactions"
            },
            "updated_at": "2024-12-30T22:28:22Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2565950078",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "@luukvbaal was just looking into fixing noice, but I'm seeing some weird behavior.\r\n\r\nI'm testing with:\r\n\r\n```lua\r\nvim.fn.confirm(\"Save changes?\", \"&Yes\\n&No\\n&Cancel\")\r\n```\r\n\r\nWhen executing this:\r\n- I receive a `msg_show` `confirm` event immediately\r\n- No `cmdline_show` events yet\r\n- Only after I type an invalid option, like `l`, I then get `cmdline_show` events with the prompt.\r\n\r\nI assume the `cmdline_show` event should also come in immediately and right after the `msg_show`?\r\n\r\nAdditionally, it also seems no longer possible to know that the `cmdline_show` event is part of a `confirm`.\r\nPreviously I used that in noice, to show a different ui, with buttons based on the prompt text.\r\n",
            "created_at": "2025-01-04T14:56:56Z",
            "html_url": "https://github.com/neovim/neovim/pull/31525#issuecomment-2571325988",
            "id": 2571325988,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/31525",
            "node_id": "IC_kwDOAPphoM6ZQ1Ik",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2571325988/reactions"
            },
            "updated_at": "2025-01-04T14:58:26Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2571325988",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/292349?v=4",
                "events_url": "https://api.github.com/users/folke/events{/privacy}",
                "followers_url": "https://api.github.com/users/folke/followers",
                "following_url": "https://api.github.com/users/folke/following{/other_user}",
                "gists_url": "https://api.github.com/users/folke/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/folke",
                "id": 292349,
                "login": "folke",
                "node_id": "MDQ6VXNlcjI5MjM0OQ==",
                "organizations_url": "https://api.github.com/users/folke/orgs",
                "received_events_url": "https://api.github.com/users/folke/received_events",
                "repos_url": "https://api.github.com/users/folke/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/folke/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/folke/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/folke",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> I assume the cmdline_show event should also come in immediately and right after the msg_show?\r\n\r\nIt should, and that's precisely the behavior I'm seeing. I can try to reproduce with noice later.\r\n\r\n> Additionally, it also seems no longer possible to know that the cmdline_show event is part of a confirm.\r\nPreviously I used that in noice, to show a different ui, with buttons based on the prompt text.\r\n\r\nI think you can use the `cmdline_show->prompt` arg for that now.\r\n",
            "created_at": "2025-01-04T15:47:53Z",
            "html_url": "https://github.com/neovim/neovim/pull/31525#issuecomment-2571338585",
            "id": 2571338585,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/31525",
            "node_id": "IC_kwDOAPphoM6ZQ4NZ",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2571338585/reactions"
            },
            "updated_at": "2025-01-04T15:47:53Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2571338585",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Ok, thanks for confirming the behavior. Will see if I can create a repro without Noice.",
            "created_at": "2025-01-04T15:52:50Z",
            "html_url": "https://github.com/neovim/neovim/pull/31525#issuecomment-2571339990",
            "id": 2571339990,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/31525",
            "node_id": "IC_kwDOAPphoM6ZQ4jW",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2571339990/reactions"
            },
            "updated_at": "2025-01-04T15:52:50Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2571339990",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/292349?v=4",
                "events_url": "https://api.github.com/users/folke/events{/privacy}",
                "followers_url": "https://api.github.com/users/folke/followers",
                "following_url": "https://api.github.com/users/folke/following{/other_user}",
                "gists_url": "https://api.github.com/users/folke/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/folke",
                "id": 292349,
                "login": "folke",
                "node_id": "MDQ6VXNlcjI5MjM0OQ==",
                "organizations_url": "https://api.github.com/users/folke/orgs",
                "received_events_url": "https://api.github.com/users/folke/received_events",
                "repos_url": "https://api.github.com/users/folke/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/folke/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/folke/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/folke",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "And yes, noice shows the prompt, which is fine, but knowing it's a prompt triggered by a confirm would be a nice to have, but not that important.",
            "created_at": "2025-01-04T15:56:41Z",
            "html_url": "https://github.com/neovim/neovim/pull/31525#issuecomment-2571340886",
            "id": 2571340886,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/31525",
            "node_id": "IC_kwDOAPphoM6ZQ4xW",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2571340886/reactions"
            },
            "updated_at": "2025-01-04T15:56:41Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2571340886",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/292349?v=4",
                "events_url": "https://api.github.com/users/folke/events{/privacy}",
                "followers_url": "https://api.github.com/users/folke/followers",
                "following_url": "https://api.github.com/users/folke/following{/other_user}",
                "gists_url": "https://api.github.com/users/folke/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/folke",
                "id": 292349,
                "login": "folke",
                "node_id": "MDQ6VXNlcjI5MjM0OQ==",
                "organizations_url": "https://api.github.com/users/folke/orgs",
                "received_events_url": "https://api.github.com/users/folke/received_events",
                "repos_url": "https://api.github.com/users/folke/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/folke/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/folke/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/folke",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Ok, figured it out. The `cmdline_show` is not shown when triggered from a keymap with `silent=true`.\r\nWhich makes sense I guess, but probably not wanted for `confirm` messages?\r\n\r\n```lua\r\nvim.keymap.set(\"n\", \"T\", function()\r\n\tvim.fn.confirm(\"Save changes?\", \"&Yes\\n&No\\n&Cancel\")\r\nend, { silent = true })\r\n```",
            "created_at": "2025-01-04T16:03:29Z",
            "html_url": "https://github.com/neovim/neovim/pull/31525#issuecomment-2571342673",
            "id": 2571342673,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/31525",
            "node_id": "IC_kwDOAPphoM6ZQ5NR",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2571342673/reactions"
            },
            "updated_at": "2025-01-04T16:03:38Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2571342673",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/292349?v=4",
                "events_url": "https://api.github.com/users/folke/events{/privacy}",
                "followers_url": "https://api.github.com/users/folke/followers",
                "following_url": "https://api.github.com/users/folke/following{/other_user}",
                "gists_url": "https://api.github.com/users/folke/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/folke",
                "id": 292349,
                "login": "folke",
                "node_id": "MDQ6VXNlcjI5MjM0OQ==",
                "organizations_url": "https://api.github.com/users/folke/orgs",
                "received_events_url": "https://api.github.com/users/folke/received_events",
                "repos_url": "https://api.github.com/users/folke/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/folke/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/folke/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/folke",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "After further testing, the behavior without `ui_attach`, so regular TUI also seems a bit off.\r\n\r\nWith my example, and without using a keymap and with `cmdheight=5` only the `save changes?` is printed, not the `yes/no` message.\r\n\r\n> Yeah maybe, but that mapping yields the same behavior without ext_cmdline right?\r\n\r\n~~Nope, without `ext_cmdline`, it shows just the `yes/no` with `silent=true`.~~\r\nIt shows just the message indeed",
            "created_at": "2025-01-04T16:15:32Z",
            "html_url": "https://github.com/neovim/neovim/pull/31525#issuecomment-2571345586",
            "id": 2571345586,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/31525",
            "node_id": "IC_kwDOAPphoM6ZQ56y",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2571345586/reactions"
            },
            "updated_at": "2025-01-04T16:16:37Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2571345586",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/292349?v=4",
                "events_url": "https://api.github.com/users/folke/events{/privacy}",
                "followers_url": "https://api.github.com/users/folke/followers",
                "following_url": "https://api.github.com/users/folke/following{/other_user}",
                "gists_url": "https://api.github.com/users/folke/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/folke",
                "id": 292349,
                "login": "folke",
                "node_id": "MDQ6VXNlcjI5MjM0OQ==",
                "organizations_url": "https://api.github.com/users/folke/orgs",
                "received_events_url": "https://api.github.com/users/folke/received_events",
                "repos_url": "https://api.github.com/users/folke/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/folke/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/folke/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/folke",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Yeah I meant the same broken behavior. That is a regression that should be fixed.\r\nNot sure how, didn't consider `silent` mappings for this PR. I guess this being a prompt we should just ignore that it is `silent`.",
            "created_at": "2025-01-04T16:16:32Z",
            "html_url": "https://github.com/neovim/neovim/pull/31525#issuecomment-2571345844",
            "id": 2571345844,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/31525",
            "node_id": "IC_kwDOAPphoM6ZQ5-0",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2571345844/reactions"
            },
            "updated_at": "2025-01-05T00:17:50Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2571345844",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal",
                "user_view_type": "public"
            }
        }
    ],
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/31525/comments",
    "commits_url": "https://api.github.com/repos/neovim/neovim/pulls/31525/commits",
    "created_at": "2024-12-09T09:40:22Z",
    "diff_url": "https://github.com/neovim/neovim/pull/31525.diff",
    "draft": false,
    "head": {
        "label": "luukvbaal:cmdnumber",
        "ref": "cmdnumber",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/luukvbaal/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/luukvbaal/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/luukvbaal/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/luukvbaal/neovim/branches{/branch}",
            "clone_url": "https://github.com/luukvbaal/neovim.git",
            "collaborators_url": "https://api.github.com/repos/luukvbaal/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/luukvbaal/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/luukvbaal/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/luukvbaal/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/luukvbaal/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/luukvbaal/neovim/contributors",
            "created_at": "2022-07-05T23:21:47Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/luukvbaal/neovim/deployments",
            "description": "Vim-fork focused on extensibility and usability",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/luukvbaal/neovim/downloads",
            "events_url": "https://api.github.com/repos/luukvbaal/neovim/events",
            "fork": true,
            "forks": 0,
            "forks_count": 0,
            "forks_url": "https://api.github.com/repos/luukvbaal/neovim/forks",
            "full_name": "luukvbaal/neovim",
            "git_commits_url": "https://api.github.com/repos/luukvbaal/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/luukvbaal/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/luukvbaal/neovim/git/tags{/sha}",
            "git_url": "git://github.com/luukvbaal/neovim.git",
            "has_discussions": false,
            "has_downloads": true,
            "has_issues": false,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://neovim.io",
            "hooks_url": "https://api.github.com/repos/luukvbaal/neovim/hooks",
            "html_url": "https://github.com/luukvbaal/neovim",
            "id": 510922471,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/luukvbaal/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/luukvbaal/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/luukvbaal/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/luukvbaal/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/luukvbaal/neovim/labels{/name}",
            "language": "Vim Script",
            "languages_url": "https://api.github.com/repos/luukvbaal/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/luukvbaal/neovim/merges",
            "milestones_url": "https://api.github.com/repos/luukvbaal/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "R_kgDOHnQO5w",
            "notifications_url": "https://api.github.com/repos/luukvbaal/neovim/notifications{?since,all,participating}",
            "open_issues": 0,
            "open_issues_count": 0,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal",
                "user_view_type": "public"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/luukvbaal/neovim/pulls{/number}",
            "pushed_at": "2025-02-10T13:41:13Z",
            "releases_url": "https://api.github.com/repos/luukvbaal/neovim/releases{/id}",
            "size": 305348,
            "ssh_url": "git@github.com:luukvbaal/neovim.git",
            "stargazers_count": 0,
            "stargazers_url": "https://api.github.com/repos/luukvbaal/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/luukvbaal/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/luukvbaal/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/luukvbaal/neovim/subscription",
            "svn_url": "https://github.com/luukvbaal/neovim",
            "tags_url": "https://api.github.com/repos/luukvbaal/neovim/tags",
            "teams_url": "https://api.github.com/repos/luukvbaal/neovim/teams",
            "topics": [],
            "trees_url": "https://api.github.com/repos/luukvbaal/neovim/git/trees{/sha}",
            "updated_at": "2025-02-10T09:57:53Z",
            "url": "https://api.github.com/repos/luukvbaal/neovim",
            "visibility": "public",
            "watchers": 0,
            "watchers_count": 0,
            "web_commit_signoff_required": false
        },
        "sha": "777939af88d2474d64abf79346723712b11a4e47",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
            "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
            "followers_url": "https://api.github.com/users/luukvbaal/followers",
            "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
            "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/luukvbaal",
            "id": 31730729,
            "login": "luukvbaal",
            "node_id": "MDQ6VXNlcjMxNzMwNzI5",
            "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
            "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
            "repos_url": "https://api.github.com/users/luukvbaal/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/luukvbaal",
            "user_view_type": "public"
        }
    },
    "html_url": "https://github.com/neovim/neovim/pull/31525",
    "id": 2223133577,
    "issue_url": "https://api.github.com/repos/neovim/neovim/issues/31525",
    "labels": [
        {
            "color": "c5def5",
            "default": false,
            "description": "",
            "id": 113026979,
            "name": "ui",
            "node_id": "MDU6TGFiZWwxMTMwMjY5Nzk=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/ui"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "UI extensibility, events, protocol, externalized UI",
            "id": 640132777,
            "name": "ui-extensibility",
            "node_id": "MDU6TGFiZWw2NDAxMzI3Nzc=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/ui-extensibility"
        },
        {
            "color": "C5DEF5",
            "default": false,
            "description": "command line, also cmdwin",
            "id": 5826989442,
            "name": "cmdline-mode",
            "node_id": "LA_kwDOAPphoM8AAAABW1DNgg",
            "url": "https://api.github.com/repos/neovim/neovim/labels/cmdline-mode"
        }
    ],
    "locked": false,
    "merge_commit_sha": "48e2a73610ca5639408f79b3d8eebd3e5f57a327",
    "merged_at": "2025-01-02T13:51:03Z",
    "milestone": {
        "closed_at": null,
        "closed_issues": 157,
        "created_at": "2023-12-07T23:09:35Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
            "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
            "followers_url": "https://api.github.com/users/justinmk/followers",
            "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/justinmk",
            "id": 1359421,
            "login": "justinmk",
            "node_id": "MDQ6VXNlcjEzNTk0MjE=",
            "organizations_url": "https://api.github.com/users/justinmk/orgs",
            "received_events_url": "https://api.github.com/users/justinmk/received_events",
            "repos_url": "https://api.github.com/users/justinmk/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/justinmk",
            "user_view_type": "public"
        },
        "description": "",
        "due_on": "2025-03-15T07:00:00Z",
        "html_url": "https://github.com/neovim/neovim/milestone/41",
        "id": 10283236,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/41/labels",
        "node_id": "MI_kwDOAPphoM4AnOjk",
        "number": 41,
        "open_issues": 35,
        "state": "open",
        "title": "0.11",
        "updated_at": "2025-02-10T18:21:49Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/41"
    },
    "node_id": "PR_kwDOAPphoM6EglOJ",
    "number": 31525,
    "patch_url": "https://github.com/neovim/neovim/pull/31525.patch",
    "requested_reviewers": [],
    "requested_teams": [],
    "review_comment_url": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}",
    "review_comments_url": "https://api.github.com/repos/neovim/neovim/pulls/31525/comments",
    "state": "closed",
    "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/777939af88d2474d64abf79346723712b11a4e47",
    "title": "feat(ui)!: emit prompt \"messages\" as cmdline events",
    "updated_at": "2025-02-04T06:07:16Z",
    "url": "https://api.github.com/repos/neovim/neovim/pulls/31525",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
        "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
        "followers_url": "https://api.github.com/users/luukvbaal/followers",
        "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
        "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/luukvbaal",
        "id": 31730729,
        "login": "luukvbaal",
        "node_id": "MDQ6VXNlcjMxNzMwNzI5",
        "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
        "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
        "repos_url": "https://api.github.com/users/luukvbaal/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/luukvbaal",
        "user_view_type": "public"
    }
}