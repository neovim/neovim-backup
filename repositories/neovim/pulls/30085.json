{
    "_links": {
        "comments": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/30085/comments"
        },
        "commits": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/30085/commits"
        },
        "html": {
            "href": "https://github.com/neovim/neovim/pull/30085"
        },
        "issue": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/30085"
        },
        "review_comment": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}"
        },
        "review_comments": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/30085/comments"
        },
        "self": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/30085"
        },
        "statuses": {
            "href": "https://api.github.com/repos/neovim/neovim/statuses/f0ea38a4bcb37aa6c68d498864c3c83f2867c4ad"
        }
    },
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "MEMBER",
    "auto_merge": null,
    "base": {
        "label": "neovim:master",
        "ref": "master",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/neovim/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/neovim/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/neovim/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/neovim/neovim/branches{/branch}",
            "clone_url": "https://github.com/neovim/neovim.git",
            "collaborators_url": "https://api.github.com/repos/neovim/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/neovim/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/neovim/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/neovim/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/neovim/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/neovim/neovim/contributors",
            "created_at": "2014-01-31T13:39:22Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/neovim/neovim/deployments",
            "description": "Vim-fork focused on extensibility and usability",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/neovim/neovim/downloads",
            "events_url": "https://api.github.com/repos/neovim/neovim/events",
            "fork": false,
            "forks": 5732,
            "forks_count": 5732,
            "forks_url": "https://api.github.com/repos/neovim/neovim/forks",
            "full_name": "neovim/neovim",
            "git_commits_url": "https://api.github.com/repos/neovim/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/neovim/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/neovim/neovim/git/tags{/sha}",
            "git_url": "git://github.com/neovim/neovim.git",
            "has_discussions": true,
            "has_downloads": true,
            "has_issues": true,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://neovim.io",
            "hooks_url": "https://api.github.com/repos/neovim/neovim/hooks",
            "html_url": "https://github.com/neovim/neovim",
            "id": 16408992,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/neovim/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/neovim/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/neovim/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/neovim/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/neovim/neovim/labels{/name}",
            "language": "Vim Script",
            "languages_url": "https://api.github.com/repos/neovim/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/neovim/neovim/merges",
            "milestones_url": "https://api.github.com/repos/neovim/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "MDEwOlJlcG9zaXRvcnkxNjQwODk5Mg==",
            "notifications_url": "https://api.github.com/repos/neovim/neovim/notifications{?since,all,participating}",
            "open_issues": 1845,
            "open_issues_count": 1845,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
                "events_url": "https://api.github.com/users/neovim/events{/privacy}",
                "followers_url": "https://api.github.com/users/neovim/followers",
                "following_url": "https://api.github.com/users/neovim/following{/other_user}",
                "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/neovim",
                "id": 6471485,
                "login": "neovim",
                "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
                "organizations_url": "https://api.github.com/users/neovim/orgs",
                "received_events_url": "https://api.github.com/users/neovim/received_events",
                "repos_url": "https://api.github.com/users/neovim/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
                "type": "Organization",
                "url": "https://api.github.com/users/neovim",
                "user_view_type": "public"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/neovim/neovim/pulls{/number}",
            "pushed_at": "2024-12-10T00:27:40Z",
            "releases_url": "https://api.github.com/repos/neovim/neovim/releases{/id}",
            "size": 298178,
            "ssh_url": "git@github.com:neovim/neovim.git",
            "stargazers_count": 83978,
            "stargazers_url": "https://api.github.com/repos/neovim/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/neovim/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/neovim/neovim/subscription",
            "svn_url": "https://github.com/neovim/neovim",
            "tags_url": "https://api.github.com/repos/neovim/neovim/tags",
            "teams_url": "https://api.github.com/repos/neovim/neovim/teams",
            "topics": [
                "api",
                "c",
                "lua",
                "neovim",
                "nvim",
                "text-editor",
                "vim"
            ],
            "trees_url": "https://api.github.com/repos/neovim/neovim/git/trees{/sha}",
            "updated_at": "2024-12-10T01:06:50Z",
            "url": "https://api.github.com/repos/neovim/neovim",
            "visibility": "public",
            "watchers": 83978,
            "watchers_count": 83978,
            "web_commit_signoff_required": false
        },
        "sha": "e8e3b443f8040329bd833fcc945d5dbf3adb832c",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
            "events_url": "https://api.github.com/users/neovim/events{/privacy}",
            "followers_url": "https://api.github.com/users/neovim/followers",
            "following_url": "https://api.github.com/users/neovim/following{/other_user}",
            "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/neovim",
            "id": 6471485,
            "login": "neovim",
            "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
            "organizations_url": "https://api.github.com/users/neovim/orgs",
            "received_events_url": "https://api.github.com/users/neovim/received_events",
            "repos_url": "https://api.github.com/users/neovim/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
            "type": "Organization",
            "url": "https://api.github.com/users/neovim",
            "user_view_type": "public"
        }
    },
    "body": "This commit also implements more generic trimming, acting on all\r\nwhitespace (charwise) rather than just empty lines.\r\n\r\nIt will unblock\r\nhttps://github.com/nvim-treesitter/nvim-treesitter/pull/3442 and allow\r\nfor properly concealing markdown bullet markers regardless of indent\r\nwidth, e.g.",
    "closed_at": "2024-12-06T18:08:21Z",
    "comment_data": [
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/30085#discussion_r1739141856"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/30085"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1739141856"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n    it('trims only empty lines by default (backwards compatible)', function()\r\n```",
            "commit_id": "f0ea38a4bcb37aa6c68d498864c3c83f2867c4ad",
            "created_at": "2024-08-30T17:03:05Z",
            "diff_hunk": "@@ -649,6 +649,109 @@ print()\n     end)\n   end)\n \n+  describe('when using the trim! directive', function()\n+    it('trims all whitespace from both sides of the node', function()\n+      -- luacheck: push ignore 611\n+      insert([=[\n+        print([[\n+\n+                  f\n+           helllo\n+        there\n+        asdf\n+        asdfassd\n+\n+\n+\n+        ]])\n+        print([[\n+              \n+              \n+              \n+        ]])\n+\n+        print([[]])\n+\n+        print([[\n+        ]])\n+\n+        print([[     hello ðŸ˜ƒ    ]])\n+      ]=])\n+      -- luacheck: pop\n+\n+      local query_text = [[\n+        ; query\n+        ((string_content) @str\n+          (#trim! @str 1))\n+      ]]\n+\n+      exec_lua(function()\n+        vim.treesitter.start(0, 'lua')\n+      end)\n+\n+      local function run_query()\n+        return exec_lua(function(query_str)\n+          local query = vim.treesitter.query.parse('lua', query_str)\n+          local parser = vim.treesitter.get_parser()\n+          local tree = parser:parse()[1]\n+          local res = {}\n+          for id, _, metadata in query:iter_captures(tree:root(), 0) do\n+            table.insert(res, { query.captures[id], metadata[id].range })\n+          end\n+          return res\n+        end, query_text)\n+      end\n+\n+      eq({\n+        { 'str', { 2, 12, 6, 10 } },\n+        { 'str', { 11, 10, 11, 10 } },\n+        { 'str', { 17, 10, 17, 10 } },\n+        { 'str', { 19, 10, 19, 10 } },\n+        { 'str', { 22, 15, 22, 25 } },\n+      }, run_query())\n+    end)\n+\n+    it('retains backward compatibility', function()",
            "html_url": "https://github.com/neovim/neovim/pull/30085#discussion_r1739141856",
            "id": 1739141856,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5nqTLg",
            "original_commit_id": "b9f7dba4a12ed675ea49b359475950471064f054",
            "original_line": 714,
            "original_position": 66,
            "original_start_line": null,
            "path": "test/functional/treesitter/parser_spec.lua",
            "position": null,
            "pull_request_review_id": 2273088490,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/30085",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1739141856/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-08-30T17:03:06Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1739141856",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/30085#discussion_r1739142497"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/30085"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1739142497"
                }
            },
            "author_association": "MEMBER",
            "body": "duplicate code w/ the other test, worth factoring into a local function?",
            "commit_id": "f0ea38a4bcb37aa6c68d498864c3c83f2867c4ad",
            "created_at": "2024-08-30T17:03:28Z",
            "diff_hunk": "@@ -649,6 +649,109 @@ print()\n     end)\n   end)\n \n+  describe('when using the trim! directive', function()\n+    it('trims all whitespace from both sides of the node', function()\n+      -- luacheck: push ignore 611\n+      insert([=[\n+        print([[\n+\n+                  f\n+           helllo\n+        there\n+        asdf\n+        asdfassd\n+\n+\n+\n+        ]])\n+        print([[\n+              \n+              \n+              \n+        ]])\n+\n+        print([[]])\n+\n+        print([[\n+        ]])\n+\n+        print([[     hello ðŸ˜ƒ    ]])\n+      ]=])\n+      -- luacheck: pop\n+\n+      local query_text = [[\n+        ; query\n+        ((string_content) @str\n+          (#trim! @str 1))\n+      ]]\n+\n+      exec_lua(function()\n+        vim.treesitter.start(0, 'lua')\n+      end)\n+\n+      local function run_query()\n+        return exec_lua(function(query_str)\n+          local query = vim.treesitter.query.parse('lua', query_str)\n+          local parser = vim.treesitter.get_parser()\n+          local tree = parser:parse()[1]\n+          local res = {}\n+          for id, _, metadata in query:iter_captures(tree:root(), 0) do\n+            table.insert(res, { query.captures[id], metadata[id].range })\n+          end\n+          return res\n+        end, query_text)\n+      end\n+\n+      eq({\n+        { 'str', { 2, 12, 6, 10 } },\n+        { 'str', { 11, 10, 11, 10 } },\n+        { 'str', { 17, 10, 17, 10 } },\n+        { 'str', { 19, 10, 19, 10 } },\n+        { 'str', { 22, 15, 22, 25 } },\n+      }, run_query())\n+    end)\n+\n+    it('retains backward compatibility', function()\n+      insert [[\n+        ## Heading\n+\n+        With some text\n+\n+        ## And another\n+\n+        With some more\n+      ]]\n+\n+      local query_text = [[\n+        ; query\n+        ((section) @fold\n+          (#trim! @fold))\n+      ]]\n+\n+      exec_lua(function()\n+        vim.treesitter.start(0, 'markdown')\n+      end)\n+\n+      local function run_query()\n+        return exec_lua(function(query_str)\n+          local query = vim.treesitter.query.parse('markdown', query_str)\n+          local parser = vim.treesitter.get_parser()\n+          local tree = parser:parse()[1]\n+          local res = {}\n+          for id, _, metadata in query:iter_captures(tree:root(), 0) do\n+            table.insert(res, { query.captures[id], metadata[id].range })\n+          end\n+          return res\n+        end, query_text)\n+      end",
            "html_url": "https://github.com/neovim/neovim/pull/30085#discussion_r1739142497",
            "id": 1739142497,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5nqTVh",
            "original_commit_id": "b9f7dba4a12ed675ea49b359475950471064f054",
            "original_line": 746,
            "original_position": 98,
            "original_start_line": 735,
            "path": "test/functional/treesitter/parser_spec.lua",
            "position": null,
            "pull_request_review_id": 2273089424,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/30085",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1739142497/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2024-08-30T17:03:28Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1739142497",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/30085#discussion_r1739143982"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/30085"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1739143982"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n    it('trims all whitespace if arg is given', function()\r\n```",
            "commit_id": "f0ea38a4bcb37aa6c68d498864c3c83f2867c4ad",
            "created_at": "2024-08-30T17:04:33Z",
            "diff_hunk": "@@ -649,6 +649,109 @@ print()\n     end)\n   end)\n \n+  describe('when using the trim! directive', function()\n+    it('trims all whitespace from both sides of the node', function()",
            "html_url": "https://github.com/neovim/neovim/pull/30085#discussion_r1739143982",
            "id": 1739143982,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5nqTsu",
            "original_commit_id": "b9f7dba4a12ed675ea49b359475950471064f054",
            "original_line": 653,
            "original_position": 5,
            "original_start_line": null,
            "path": "test/functional/treesitter/parser_spec.lua",
            "position": null,
            "pull_request_review_id": 2273091730,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/30085",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1739143982/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-08-30T17:04:48Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1739143982",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/30085#discussion_r1739147164"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/30085"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1739147164"
                }
            },
            "author_association": "MEMBER",
            "body": "ternary avoids the need for a `---@type` annotation and is less verbose\r\n```suggestion\r\n    local start_row, start_col, end_row, end_col = full_trim\r\n        and node_trim_all_whitespace(node, bufnr)\r\n        or node_trim_trailing_blank_lines(node, bufnr)\r\n```\r\n\r\n",
            "commit_id": "f0ea38a4bcb37aa6c68d498864c3c83f2867c4ad",
            "created_at": "2024-08-30T17:07:20Z",
            "diff_hunk": "@@ -587,22 +657,11 @@ local directive_handlers = {\n     assert(#nodes == 1, '#trim! does not support captures on multiple nodes')\n     local node = nodes[1]\n \n-    local start_row, start_col, end_row, end_col = node:range()\n-\n-    -- Don't trim if region ends in middle of a line\n-    if end_col ~= 0 then\n-      return\n-    end\n-\n-    while end_row >= start_row do\n-      -- As we only care when end_col == 0, always inspect one line above end_row.\n-      local end_line = api.nvim_buf_get_lines(bufnr, end_row - 1, end_row, true)[1]\n-\n-      if end_line ~= '' then\n-        break\n-      end\n-\n-      end_row = end_row - 1\n+    local start_row, start_col, end_row, end_col ---@type integer, integer, integer, integer\n+    if full_trim then\n+      start_row, start_col, end_row, end_col = node_trim_all_whitespace(node, bufnr)\n+    else\n+      start_row, start_col, end_row, end_col = node_trim_trailing_blank_lines(node, bufnr)",
            "html_url": "https://github.com/neovim/neovim/pull/30085#discussion_r1739147164",
            "id": 1739147164,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5nqUec",
            "original_commit_id": "b9f7dba4a12ed675ea49b359475950471064f054",
            "original_line": 664,
            "original_position": 115,
            "original_start_line": 660,
            "path": "runtime/lua/vim/treesitter/query.lua",
            "position": null,
            "pull_request_review_id": 2273097168,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/30085",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1739147164/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2024-08-30T17:08:12Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1739147164",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/30085#discussion_r1739151066"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/30085"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1739151066"
                }
            },
            "author_association": "MEMBER",
            "body": "can we generalize this? would using `vim.fn.trim()` reduce the code?\r\n\r\n```suggestion\r\n---@param lines_only boolean\r\nlocal function node_trim(node, bufnr, lines_only)\r\n```\r\n",
            "commit_id": "f0ea38a4bcb37aa6c68d498864c3c83f2867c4ad",
            "created_at": "2024-08-30T17:11:27Z",
            "diff_hunk": "@@ -184,6 +184,76 @@ local function read_query_files(filenames)\n   return table.concat(contents, '')\n end\n \n+---@param node TSNode\n+---@param bufnr integer\n+---@return integer, integer, integer, integer\n+local function node_trim_trailing_blank_lines(node, bufnr)\n+  local start_row, start_col, end_row, end_col = node:range()\n+\n+  -- Don't trim if region ends in middle of a line\n+  if end_col == 0 then\n+    while end_row >= start_row do\n+      -- As we only care when end_col == 0, always inspect one line above end_row.\n+      local end_line = api.nvim_buf_get_lines(bufnr, end_row - 1, end_row, true)[1]\n+\n+      if end_line ~= '' then\n+        break\n+      end\n+\n+      end_row = end_row - 1\n+    end\n+  end\n+\n+  return start_row, start_col, end_row, end_col\n+end\n+\n+---@param node TSNode\n+---@param bufnr integer\n+---@return integer, integer, integer, integer\n+local function node_trim_all_whitespace(node, bufnr)",
            "html_url": "https://github.com/neovim/neovim/pull/30085#discussion_r1739151066",
            "id": 1739151066,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5nqVba",
            "original_commit_id": "b9f7dba4a12ed675ea49b359475950471064f054",
            "original_line": 213,
            "original_position": 30,
            "original_start_line": null,
            "path": "runtime/lua/vim/treesitter/query.lua",
            "position": null,
            "pull_request_review_id": 2273104786,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/30085",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1739151066/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-08-30T17:11:27Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1739151066",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/30085#discussion_r1739189701"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/30085"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1739189701"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n        `metadata[capture_id].range`. Trims blank lines from the end of the node\r\n        by default (for backwards compatibility). Trims all whitespace from both\r\n        sides of the node if the optional parameter \"1\" is given.\r\n```",
            "commit_id": "f0ea38a4bcb37aa6c68d498864c3c83f2867c4ad",
            "created_at": "2024-08-30T17:42:10Z",
            "diff_hunk": "@@ -385,14 +385,19 @@ The following directives are built in:\n             (#gsub! @_node \".*%.(.*)\" \"%1\")\n <\n     `trim!`                                          *treesitter-directive-trim!*\n-        Trim blank lines from the end of the node. This will set a new\n-        `metadata[capture_id].range`.\n+        Trim whitespace from the node. This will set a new\n+        `metadata[capture_id].range`. The directive takes an optional\n+        parameter following the capture group to determine whether to trim all\n+        whitespace from both sides of the node (when set to `1`), or to only\n+        trim blank lines from the end of the node (this is the default, for\n+        backwards compatibility).",
            "html_url": "https://github.com/neovim/neovim/pull/30085#discussion_r1739189701",
            "id": 1739189701,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5nqe3F",
            "original_commit_id": "b9f7dba4a12ed675ea49b359475950471064f054",
            "original_line": 393,
            "original_position": 11,
            "original_start_line": 389,
            "path": "runtime/doc/treesitter.txt",
            "position": null,
            "pull_request_review_id": 2273170746,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/30085",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1739189701/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2024-08-30T17:42:10Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1739189701",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/30085#discussion_r1739190326"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/30085"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1739190326"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\nâ€¢ |treesitter-directive-trim!| can trim all whitespace (not just empty lines)\r\n```",
            "commit_id": "f0ea38a4bcb37aa6c68d498864c3c83f2867c4ad",
            "created_at": "2024-08-30T17:42:50Z",
            "diff_hunk": "@@ -174,6 +174,8 @@ TREESITTER\n â€¢ |LanguageTree:node_for_range()| gets anonymous and named nodes for a range\n â€¢ |vim.treesitter.get_node()| now takes an option `include_anonymous`, default\n   false, which allows it to return anonymous nodes as well as named nodes.\n+â€¢ |treesitter-directive-trim!| now trims all whitespace (not just empty lines)",
            "html_url": "https://github.com/neovim/neovim/pull/30085#discussion_r1739190326",
            "id": 1739190326,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5nqfA2",
            "original_commit_id": "b9f7dba4a12ed675ea49b359475950471064f054",
            "original_line": 177,
            "original_position": 4,
            "original_start_line": null,
            "path": "runtime/doc/news.txt",
            "position": null,
            "pull_request_review_id": 2273171611,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/30085",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1739190326/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-08-30T17:42:50Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1739190326",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/30085#discussion_r1739563011"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/30085"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1739563011"
                }
            },
            "author_association": "MEMBER",
            "body": "nice!",
            "commit_id": "f0ea38a4bcb37aa6c68d498864c3c83f2867c4ad",
            "created_at": "2024-08-31T01:08:45Z",
            "diff_hunk": "@@ -587,22 +657,11 @@ local directive_handlers = {\n     assert(#nodes == 1, '#trim! does not support captures on multiple nodes')\n     local node = nodes[1]\n \n-    local start_row, start_col, end_row, end_col = node:range()\n-\n-    -- Don't trim if region ends in middle of a line\n-    if end_col ~= 0 then\n-      return\n-    end\n-\n-    while end_row >= start_row do\n-      -- As we only care when end_col == 0, always inspect one line above end_row.\n-      local end_line = api.nvim_buf_get_lines(bufnr, end_row - 1, end_row, true)[1]\n-\n-      if end_line ~= '' then\n-        break\n-      end\n-\n-      end_row = end_row - 1\n+    local start_row, start_col, end_row, end_col ---@type integer, integer, integer, integer\n+    if full_trim then\n+      start_row, start_col, end_row, end_col = node_trim_all_whitespace(node, bufnr)\n+    else\n+      start_row, start_col, end_row, end_col = node_trim_trailing_blank_lines(node, bufnr)",
            "html_url": "https://github.com/neovim/neovim/pull/30085#discussion_r1739563011",
            "id": 1739563011,
            "in_reply_to_id": 1739147164,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5nr6AD",
            "original_commit_id": "b9f7dba4a12ed675ea49b359475950471064f054",
            "original_line": 664,
            "original_position": 115,
            "original_start_line": 660,
            "path": "runtime/lua/vim/treesitter/query.lua",
            "position": null,
            "pull_request_review_id": 2273697820,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/30085",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1739563011/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2024-08-31T01:08:45Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1739563011",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/55766287?v=4",
                "events_url": "https://api.github.com/users/ribru17/events{/privacy}",
                "followers_url": "https://api.github.com/users/ribru17/followers",
                "following_url": "https://api.github.com/users/ribru17/following{/other_user}",
                "gists_url": "https://api.github.com/users/ribru17/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ribru17",
                "id": 55766287,
                "login": "ribru17",
                "node_id": "MDQ6VXNlcjU1NzY2Mjg3",
                "organizations_url": "https://api.github.com/users/ribru17/orgs",
                "received_events_url": "https://api.github.com/users/ribru17/received_events",
                "repos_url": "https://api.github.com/users/ribru17/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ribru17/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ribru17/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ribru17",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/30085#discussion_r1739563592"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/30085"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1739563592"
                }
            },
            "author_association": "MEMBER",
            "body": "sure",
            "commit_id": "f0ea38a4bcb37aa6c68d498864c3c83f2867c4ad",
            "created_at": "2024-08-31T01:11:48Z",
            "diff_hunk": "@@ -649,6 +649,109 @@ print()\n     end)\n   end)\n \n+  describe('when using the trim! directive', function()\n+    it('trims all whitespace from both sides of the node', function()\n+      -- luacheck: push ignore 611\n+      insert([=[\n+        print([[\n+\n+                  f\n+           helllo\n+        there\n+        asdf\n+        asdfassd\n+\n+\n+\n+        ]])\n+        print([[\n+              \n+              \n+              \n+        ]])\n+\n+        print([[]])\n+\n+        print([[\n+        ]])\n+\n+        print([[     hello ðŸ˜ƒ    ]])\n+      ]=])\n+      -- luacheck: pop\n+\n+      local query_text = [[\n+        ; query\n+        ((string_content) @str\n+          (#trim! @str 1))\n+      ]]\n+\n+      exec_lua(function()\n+        vim.treesitter.start(0, 'lua')\n+      end)\n+\n+      local function run_query()\n+        return exec_lua(function(query_str)\n+          local query = vim.treesitter.query.parse('lua', query_str)\n+          local parser = vim.treesitter.get_parser()\n+          local tree = parser:parse()[1]\n+          local res = {}\n+          for id, _, metadata in query:iter_captures(tree:root(), 0) do\n+            table.insert(res, { query.captures[id], metadata[id].range })\n+          end\n+          return res\n+        end, query_text)\n+      end\n+\n+      eq({\n+        { 'str', { 2, 12, 6, 10 } },\n+        { 'str', { 11, 10, 11, 10 } },\n+        { 'str', { 17, 10, 17, 10 } },\n+        { 'str', { 19, 10, 19, 10 } },\n+        { 'str', { 22, 15, 22, 25 } },\n+      }, run_query())\n+    end)\n+\n+    it('retains backward compatibility', function()\n+      insert [[\n+        ## Heading\n+\n+        With some text\n+\n+        ## And another\n+\n+        With some more\n+      ]]\n+\n+      local query_text = [[\n+        ; query\n+        ((section) @fold\n+          (#trim! @fold))\n+      ]]\n+\n+      exec_lua(function()\n+        vim.treesitter.start(0, 'markdown')\n+      end)\n+\n+      local function run_query()\n+        return exec_lua(function(query_str)\n+          local query = vim.treesitter.query.parse('markdown', query_str)\n+          local parser = vim.treesitter.get_parser()\n+          local tree = parser:parse()[1]\n+          local res = {}\n+          for id, _, metadata in query:iter_captures(tree:root(), 0) do\n+            table.insert(res, { query.captures[id], metadata[id].range })\n+          end\n+          return res\n+        end, query_text)\n+      end",
            "html_url": "https://github.com/neovim/neovim/pull/30085#discussion_r1739563592",
            "id": 1739563592,
            "in_reply_to_id": 1739142497,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5nr6JI",
            "original_commit_id": "b9f7dba4a12ed675ea49b359475950471064f054",
            "original_line": 746,
            "original_position": 98,
            "original_start_line": 735,
            "path": "test/functional/treesitter/parser_spec.lua",
            "position": null,
            "pull_request_review_id": 2273698255,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/30085",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1739563592/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2024-08-31T01:11:48Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1739563592",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/55766287?v=4",
                "events_url": "https://api.github.com/users/ribru17/events{/privacy}",
                "followers_url": "https://api.github.com/users/ribru17/followers",
                "following_url": "https://api.github.com/users/ribru17/following{/other_user}",
                "gists_url": "https://api.github.com/users/ribru17/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ribru17",
                "id": 55766287,
                "login": "ribru17",
                "node_id": "MDQ6VXNlcjU1NzY2Mjg3",
                "organizations_url": "https://api.github.com/users/ribru17/orgs",
                "received_events_url": "https://api.github.com/users/ribru17/received_events",
                "repos_url": "https://api.github.com/users/ribru17/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ribru17/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ribru17/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ribru17",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/30085#discussion_r1739586917"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/30085"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1739586917"
                }
            },
            "author_association": "MEMBER",
            "body": "Hmm, how do you think this should work? I can see the trimming itself being helpful but the main logic we need is the \"trimming\" of the range values, and I don't know how `vim(.fn).trim` would be able to help with that",
            "commit_id": "f0ea38a4bcb37aa6c68d498864c3c83f2867c4ad",
            "created_at": "2024-08-31T02:29:45Z",
            "diff_hunk": "@@ -184,6 +184,76 @@ local function read_query_files(filenames)\n   return table.concat(contents, '')\n end\n \n+---@param node TSNode\n+---@param bufnr integer\n+---@return integer, integer, integer, integer\n+local function node_trim_trailing_blank_lines(node, bufnr)\n+  local start_row, start_col, end_row, end_col = node:range()\n+\n+  -- Don't trim if region ends in middle of a line\n+  if end_col == 0 then\n+    while end_row >= start_row do\n+      -- As we only care when end_col == 0, always inspect one line above end_row.\n+      local end_line = api.nvim_buf_get_lines(bufnr, end_row - 1, end_row, true)[1]\n+\n+      if end_line ~= '' then\n+        break\n+      end\n+\n+      end_row = end_row - 1\n+    end\n+  end\n+\n+  return start_row, start_col, end_row, end_col\n+end\n+\n+---@param node TSNode\n+---@param bufnr integer\n+---@return integer, integer, integer, integer\n+local function node_trim_all_whitespace(node, bufnr)",
            "html_url": "https://github.com/neovim/neovim/pull/30085#discussion_r1739586917",
            "id": 1739586917,
            "in_reply_to_id": 1739151066,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5nr_1l",
            "original_commit_id": "b9f7dba4a12ed675ea49b359475950471064f054",
            "original_line": 213,
            "original_position": 30,
            "original_start_line": null,
            "path": "runtime/lua/vim/treesitter/query.lua",
            "position": null,
            "pull_request_review_id": 2273726552,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/30085",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1739586917/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-08-31T02:29:45Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1739586917",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/55766287?v=4",
                "events_url": "https://api.github.com/users/ribru17/events{/privacy}",
                "followers_url": "https://api.github.com/users/ribru17/followers",
                "following_url": "https://api.github.com/users/ribru17/following{/other_user}",
                "gists_url": "https://api.github.com/users/ribru17/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ribru17",
                "id": 55766287,
                "login": "ribru17",
                "node_id": "MDQ6VXNlcjU1NzY2Mjg3",
                "organizations_url": "https://api.github.com/users/ribru17/orgs",
                "received_events_url": "https://api.github.com/users/ribru17/received_events",
                "repos_url": "https://api.github.com/users/ribru17/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ribru17/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ribru17/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ribru17",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/30085#discussion_r1739587125"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/30085"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1739587125"
                }
            },
            "author_association": "MEMBER",
            "body": "As for the generalization, I did that initially but the two code paths are pretty different, I couldn't really reuse much code so to me it just felt like separating them completely was easier on the eyes",
            "commit_id": "f0ea38a4bcb37aa6c68d498864c3c83f2867c4ad",
            "created_at": "2024-08-31T02:31:34Z",
            "diff_hunk": "@@ -184,6 +184,76 @@ local function read_query_files(filenames)\n   return table.concat(contents, '')\n end\n \n+---@param node TSNode\n+---@param bufnr integer\n+---@return integer, integer, integer, integer\n+local function node_trim_trailing_blank_lines(node, bufnr)\n+  local start_row, start_col, end_row, end_col = node:range()\n+\n+  -- Don't trim if region ends in middle of a line\n+  if end_col == 0 then\n+    while end_row >= start_row do\n+      -- As we only care when end_col == 0, always inspect one line above end_row.\n+      local end_line = api.nvim_buf_get_lines(bufnr, end_row - 1, end_row, true)[1]\n+\n+      if end_line ~= '' then\n+        break\n+      end\n+\n+      end_row = end_row - 1\n+    end\n+  end\n+\n+  return start_row, start_col, end_row, end_col\n+end\n+\n+---@param node TSNode\n+---@param bufnr integer\n+---@return integer, integer, integer, integer\n+local function node_trim_all_whitespace(node, bufnr)",
            "html_url": "https://github.com/neovim/neovim/pull/30085#discussion_r1739587125",
            "id": 1739587125,
            "in_reply_to_id": 1739151066,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5nr_41",
            "original_commit_id": "b9f7dba4a12ed675ea49b359475950471064f054",
            "original_line": 213,
            "original_position": 30,
            "original_start_line": null,
            "path": "runtime/lua/vim/treesitter/query.lua",
            "position": null,
            "pull_request_review_id": 2273726711,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/30085",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1739587125/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-08-31T02:31:34Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1739587125",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/55766287?v=4",
                "events_url": "https://api.github.com/users/ribru17/events{/privacy}",
                "followers_url": "https://api.github.com/users/ribru17/followers",
                "following_url": "https://api.github.com/users/ribru17/following{/other_user}",
                "gists_url": "https://api.github.com/users/ribru17/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ribru17",
                "id": 55766287,
                "login": "ribru17",
                "node_id": "MDQ6VXNlcjU1NzY2Mjg3",
                "organizations_url": "https://api.github.com/users/ribru17/orgs",
                "received_events_url": "https://api.github.com/users/ribru17/received_events",
                "repos_url": "https://api.github.com/users/ribru17/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ribru17/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ribru17/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ribru17",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/30085#discussion_r1739632146"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/30085"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1739632146"
                }
            },
            "author_association": "MEMBER",
            "body": "Keep in mind vim.fn.* functions that work with strings have problems with the vimscript bridge and are less efficient since the string gets copied multiple times. Both of those could be a problem here.",
            "commit_id": "f0ea38a4bcb37aa6c68d498864c3c83f2867c4ad",
            "created_at": "2024-08-31T07:39:05Z",
            "diff_hunk": "@@ -184,6 +184,76 @@ local function read_query_files(filenames)\n   return table.concat(contents, '')\n end\n \n+---@param node TSNode\n+---@param bufnr integer\n+---@return integer, integer, integer, integer\n+local function node_trim_trailing_blank_lines(node, bufnr)\n+  local start_row, start_col, end_row, end_col = node:range()\n+\n+  -- Don't trim if region ends in middle of a line\n+  if end_col == 0 then\n+    while end_row >= start_row do\n+      -- As we only care when end_col == 0, always inspect one line above end_row.\n+      local end_line = api.nvim_buf_get_lines(bufnr, end_row - 1, end_row, true)[1]\n+\n+      if end_line ~= '' then\n+        break\n+      end\n+\n+      end_row = end_row - 1\n+    end\n+  end\n+\n+  return start_row, start_col, end_row, end_col\n+end\n+\n+---@param node TSNode\n+---@param bufnr integer\n+---@return integer, integer, integer, integer\n+local function node_trim_all_whitespace(node, bufnr)",
            "html_url": "https://github.com/neovim/neovim/pull/30085#discussion_r1739632146",
            "id": 1739632146,
            "in_reply_to_id": 1739151066,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5nsK4S",
            "original_commit_id": "b9f7dba4a12ed675ea49b359475950471064f054",
            "original_line": 213,
            "original_position": 30,
            "original_start_line": null,
            "path": "runtime/lua/vim/treesitter/query.lua",
            "position": null,
            "pull_request_review_id": 2273782873,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/30085",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1739632146/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-08-31T07:39:05Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1739632146",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/7904185?v=4",
                "events_url": "https://api.github.com/users/lewis6991/events{/privacy}",
                "followers_url": "https://api.github.com/users/lewis6991/followers",
                "following_url": "https://api.github.com/users/lewis6991/following{/other_user}",
                "gists_url": "https://api.github.com/users/lewis6991/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/lewis6991",
                "id": 7904185,
                "login": "lewis6991",
                "node_id": "MDQ6VXNlcjc5MDQxODU=",
                "organizations_url": "https://api.github.com/users/lewis6991/orgs",
                "received_events_url": "https://api.github.com/users/lewis6991/received_events",
                "repos_url": "https://api.github.com/users/lewis6991/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/lewis6991/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lewis6991/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/lewis6991",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/30085#discussion_r1739745031"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/30085"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1739745031"
                }
            },
            "author_association": "MEMBER",
            "body": "I'm just surprised this requires so much code. Can it be simplified",
            "commit_id": "f0ea38a4bcb37aa6c68d498864c3c83f2867c4ad",
            "created_at": "2024-08-31T15:13:03Z",
            "diff_hunk": "@@ -184,6 +184,76 @@ local function read_query_files(filenames)\n   return table.concat(contents, '')\n end\n \n+---@param node TSNode\n+---@param bufnr integer\n+---@return integer, integer, integer, integer\n+local function node_trim_trailing_blank_lines(node, bufnr)\n+  local start_row, start_col, end_row, end_col = node:range()\n+\n+  -- Don't trim if region ends in middle of a line\n+  if end_col == 0 then\n+    while end_row >= start_row do\n+      -- As we only care when end_col == 0, always inspect one line above end_row.\n+      local end_line = api.nvim_buf_get_lines(bufnr, end_row - 1, end_row, true)[1]\n+\n+      if end_line ~= '' then\n+        break\n+      end\n+\n+      end_row = end_row - 1\n+    end\n+  end\n+\n+  return start_row, start_col, end_row, end_col\n+end\n+\n+---@param node TSNode\n+---@param bufnr integer\n+---@return integer, integer, integer, integer\n+local function node_trim_all_whitespace(node, bufnr)",
            "html_url": "https://github.com/neovim/neovim/pull/30085#discussion_r1739745031",
            "id": 1739745031,
            "in_reply_to_id": 1739151066,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5nsmcH",
            "original_commit_id": "b9f7dba4a12ed675ea49b359475950471064f054",
            "original_line": 213,
            "original_position": 30,
            "original_start_line": null,
            "path": "runtime/lua/vim/treesitter/query.lua",
            "position": null,
            "pull_request_review_id": 2273882932,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/30085",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1739745031/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-08-31T15:13:03Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1739745031",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/30085#discussion_r1739745483"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/30085"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1739745483"
                }
            },
            "author_association": "MEMBER",
            "body": "Ideally yeah... I tried some variations but sadly one reason it's difficult is the old behavior doesn't even trim whitespace lines, it trims specifically empty (zero text on them) lines. So I couldn't even reuse one of the conditional branches in the \"full trim\" code. I think the only other generalized code that could be abstracted (since it is shared between the two) is `local start_row, start_col, end_row, end_col = node:range()`, but one line seems trivial at that point",
            "commit_id": "f0ea38a4bcb37aa6c68d498864c3c83f2867c4ad",
            "created_at": "2024-08-31T15:16:28Z",
            "diff_hunk": "@@ -184,6 +184,76 @@ local function read_query_files(filenames)\n   return table.concat(contents, '')\n end\n \n+---@param node TSNode\n+---@param bufnr integer\n+---@return integer, integer, integer, integer\n+local function node_trim_trailing_blank_lines(node, bufnr)\n+  local start_row, start_col, end_row, end_col = node:range()\n+\n+  -- Don't trim if region ends in middle of a line\n+  if end_col == 0 then\n+    while end_row >= start_row do\n+      -- As we only care when end_col == 0, always inspect one line above end_row.\n+      local end_line = api.nvim_buf_get_lines(bufnr, end_row - 1, end_row, true)[1]\n+\n+      if end_line ~= '' then\n+        break\n+      end\n+\n+      end_row = end_row - 1\n+    end\n+  end\n+\n+  return start_row, start_col, end_row, end_col\n+end\n+\n+---@param node TSNode\n+---@param bufnr integer\n+---@return integer, integer, integer, integer\n+local function node_trim_all_whitespace(node, bufnr)",
            "html_url": "https://github.com/neovim/neovim/pull/30085#discussion_r1739745483",
            "id": 1739745483,
            "in_reply_to_id": 1739151066,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5nsmjL",
            "original_commit_id": "b9f7dba4a12ed675ea49b359475950471064f054",
            "original_line": 213,
            "original_position": 30,
            "original_start_line": null,
            "path": "runtime/lua/vim/treesitter/query.lua",
            "position": null,
            "pull_request_review_id": 2273883327,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/30085",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1739745483/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-08-31T15:16:45Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1739745483",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/55766287?v=4",
                "events_url": "https://api.github.com/users/ribru17/events{/privacy}",
                "followers_url": "https://api.github.com/users/ribru17/followers",
                "following_url": "https://api.github.com/users/ribru17/following{/other_user}",
                "gists_url": "https://api.github.com/users/ribru17/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ribru17",
                "id": 55766287,
                "login": "ribru17",
                "node_id": "MDQ6VXNlcjU1NzY2Mjg3",
                "organizations_url": "https://api.github.com/users/ribru17/orgs",
                "received_events_url": "https://api.github.com/users/ribru17/received_events",
                "repos_url": "https://api.github.com/users/ribru17/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ribru17/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ribru17/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ribru17",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/30085#discussion_r1741747554"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/30085"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1741747554"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n    start_col = (start_idx == 1 and start_col or 0) + whitespace_end\r\n```",
            "commit_id": "f0ea38a4bcb37aa6c68d498864c3c83f2867c4ad",
            "created_at": "2024-09-03T09:34:50Z",
            "diff_hunk": "@@ -184,6 +184,76 @@ local function read_query_files(filenames)\n   return table.concat(contents, '')\n end\n \n+---@param node TSNode\n+---@param bufnr integer\n+---@return integer, integer, integer, integer\n+local function node_trim_trailing_blank_lines(node, bufnr)\n+  local start_row, start_col, end_row, end_col = node:range()\n+\n+  -- Don't trim if region ends in middle of a line\n+  if end_col == 0 then\n+    while end_row >= start_row do\n+      -- As we only care when end_col == 0, always inspect one line above end_row.\n+      local end_line = api.nvim_buf_get_lines(bufnr, end_row - 1, end_row, true)[1]\n+\n+      if end_line ~= '' then\n+        break\n+      end\n+\n+      end_row = end_row - 1\n+    end\n+  end\n+\n+  return start_row, start_col, end_row, end_col\n+end\n+\n+---@param node TSNode\n+---@param bufnr integer\n+---@return integer, integer, integer, integer\n+local function node_trim_all_whitespace(node, bufnr)\n+  local start_row, start_col, end_row, end_col = node:range()\n+\n+  local node_text = api.nvim_buf_get_text(bufnr, start_row, start_col, end_row, end_col, {})\n+  local end_idx = #node_text\n+  local start_idx = 1\n+\n+  -- Trim the end of the node linewise\n+  while end_idx > 0 and node_text[end_idx]:find('^%s*$') do\n+    end_idx = end_idx - 1\n+    end_row = end_row - 1\n+  end\n+  -- Trim the end of the node charwise\n+  if end_idx == 0 then\n+    end_row = start_row\n+    end_col = start_col\n+  else\n+    local whitespace_start = node_text[end_idx]:find('(%s*)$')\n+    end_col = whitespace_start - 1\n+\n+    if end_idx == 1 then\n+      end_col = start_col + end_col\n+    end\n+  end\n+\n+  -- Trim the beginning of the node linewise\n+  while start_idx <= end_idx and node_text[start_idx]:find('^%s*$') do\n+    start_idx = start_idx + 1\n+    start_row = start_row + 1\n+  end\n+  -- Trim the beginning of the node charwise\n+  if node_text[start_idx] then\n+    local _, whitespace_end = node_text[start_idx]:find('^(%s*)')\n+    whitespace_end = whitespace_end or 0\n+    if start_idx == 1 then\n+      start_col = start_col + whitespace_end\n+    else\n+      start_col = whitespace_end\n+    end",
            "html_url": "https://github.com/neovim/neovim/pull/30085#discussion_r1741747554",
            "id": 1741747554,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5n0PVi",
            "original_commit_id": "bad7896a4eb33c21c38e62e38b36d3cd692f5902",
            "original_line": 251,
            "original_position": 68,
            "original_start_line": 247,
            "path": "runtime/lua/vim/treesitter/query.lua",
            "position": null,
            "pull_request_review_id": 2276914729,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/30085",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1741747554/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2024-09-03T11:46:08Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1741747554",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/30085#discussion_r1741749543"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/30085"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1741749543"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n  -- Example: (#trim! @fold 1)\r\n```",
            "commit_id": "f0ea38a4bcb37aa6c68d498864c3c83f2867c4ad",
            "created_at": "2024-09-03T09:36:16Z",
            "diff_hunk": "@@ -573,11 +643,11 @@ local directive_handlers = {\n \n     metadata[id].text = text:gsub(pattern, replacement)\n   end,\n-  -- Trim blank lines from end of the node\n+  -- Trim whitespace from both sides of the node\n   -- Example: (#trim! @fold)",
            "html_url": "https://github.com/neovim/neovim/pull/30085#discussion_r1741749543",
            "id": 1741749543,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5n0P0n",
            "original_commit_id": "bad7896a4eb33c21c38e62e38b36d3cd692f5902",
            "original_line": 647,
            "original_position": 83,
            "original_start_line": null,
            "path": "runtime/lua/vim/treesitter/query.lua",
            "position": null,
            "pull_request_review_id": 2276917823,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/30085",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1741749543/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-09-03T09:36:16Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1741749543",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/30085#discussion_r1741751660"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/30085"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1741751660"
                }
            },
            "author_association": "MEMBER",
            "body": "\"blank\" includes lines with whitespace. Based on your comment, it sounds like it only empty lines are trimmed?\r\n```suggestion\r\nlocal function node_trim_trailing_empty_lines(node, bufnr)\r\n```",
            "commit_id": "f0ea38a4bcb37aa6c68d498864c3c83f2867c4ad",
            "created_at": "2024-09-03T09:37:47Z",
            "diff_hunk": "@@ -184,6 +184,76 @@ local function read_query_files(filenames)\n   return table.concat(contents, '')\n end\n \n+---@param node TSNode\n+---@param bufnr integer\n+---@return integer, integer, integer, integer\n+local function node_trim_trailing_blank_lines(node, bufnr)",
            "html_url": "https://github.com/neovim/neovim/pull/30085#discussion_r1741751660",
            "id": 1741751660,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5n0QVs",
            "original_commit_id": "bad7896a4eb33c21c38e62e38b36d3cd692f5902",
            "original_line": 190,
            "original_position": 7,
            "original_start_line": null,
            "path": "runtime/lua/vim/treesitter/query.lua",
            "position": null,
            "pull_request_review_id": 2276921228,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/30085",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1741751660/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-09-03T09:37:47Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1741751660",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/30085#discussion_r1741758151"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/30085"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1741758151"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n    end_col = (whitespace_start - 1) + (end_idx == 1 and start_col or 0)\r\n```\r\n",
            "commit_id": "f0ea38a4bcb37aa6c68d498864c3c83f2867c4ad",
            "created_at": "2024-09-03T09:42:12Z",
            "diff_hunk": "@@ -184,6 +184,76 @@ local function read_query_files(filenames)\n   return table.concat(contents, '')\n end\n \n+---@param node TSNode\n+---@param bufnr integer\n+---@return integer, integer, integer, integer\n+local function node_trim_trailing_blank_lines(node, bufnr)\n+  local start_row, start_col, end_row, end_col = node:range()\n+\n+  -- Don't trim if region ends in middle of a line\n+  if end_col == 0 then\n+    while end_row >= start_row do\n+      -- As we only care when end_col == 0, always inspect one line above end_row.\n+      local end_line = api.nvim_buf_get_lines(bufnr, end_row - 1, end_row, true)[1]\n+\n+      if end_line ~= '' then\n+        break\n+      end\n+\n+      end_row = end_row - 1\n+    end\n+  end\n+\n+  return start_row, start_col, end_row, end_col\n+end\n+\n+---@param node TSNode\n+---@param bufnr integer\n+---@return integer, integer, integer, integer\n+local function node_trim_all_whitespace(node, bufnr)\n+  local start_row, start_col, end_row, end_col = node:range()\n+\n+  local node_text = api.nvim_buf_get_text(bufnr, start_row, start_col, end_row, end_col, {})\n+  local end_idx = #node_text\n+  local start_idx = 1\n+\n+  -- Trim the end of the node linewise\n+  while end_idx > 0 and node_text[end_idx]:find('^%s*$') do\n+    end_idx = end_idx - 1\n+    end_row = end_row - 1\n+  end\n+  -- Trim the end of the node charwise\n+  if end_idx == 0 then\n+    end_row = start_row\n+    end_col = start_col\n+  else\n+    local whitespace_start = node_text[end_idx]:find('(%s*)$')\n+    end_col = whitespace_start - 1\n+\n+    if end_idx == 1 then\n+      end_col = start_col + end_col\n+    end",
            "html_url": "https://github.com/neovim/neovim/pull/30085#discussion_r1741758151",
            "id": 1741758151,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5n0R7H",
            "original_commit_id": "bad7896a4eb33c21c38e62e38b36d3cd692f5902",
            "original_line": 235,
            "original_position": 52,
            "original_start_line": 231,
            "path": "runtime/lua/vim/treesitter/query.lua",
            "position": null,
            "pull_request_review_id": 2276931204,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/30085",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1741758151/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2024-09-03T09:44:51Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1741758151",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/30085#discussion_r1741759902"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/30085"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1741759902"
                }
            },
            "author_association": "MEMBER",
            "body": "I was actually envisioning this to work like the `#offset!` directive, where you can control each of the four(!) sides individually.",
            "commit_id": "f0ea38a4bcb37aa6c68d498864c3c83f2867c4ad",
            "created_at": "2024-09-03T09:43:25Z",
            "diff_hunk": "@@ -385,14 +385,17 @@ The following directives are built in:\n             (#gsub! @_node \".*%.(.*)\" \"%1\")\n <\n     `trim!`                                          *treesitter-directive-trim!*\n-        Trim blank lines from the end of the node. This will set a new\n-        `metadata[capture_id].range`.\n+        Trim whitespace from the node. This will set a new\n+        `metadata[capture_id].range`. Trims blank lines from the end of the node\n+        by default (for backwards compatibility). Trims all whitespace from both\n+        sides of the node if the optional parameter \"1\" is given.",
            "html_url": "https://github.com/neovim/neovim/pull/30085#discussion_r1741759902",
            "id": 1741759902,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5n0SWe",
            "original_commit_id": "bad7896a4eb33c21c38e62e38b36d3cd692f5902",
            "original_line": 396,
            "original_position": 9,
            "original_start_line": null,
            "path": "runtime/doc/treesitter.txt",
            "position": null,
            "pull_request_review_id": 2276934142,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/30085",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1741759902/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-09-03T09:43:29Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1741759902",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/30085#discussion_r1741765179"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/30085"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1741765179"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n  describe('trim! directive', function()\r\n```",
            "commit_id": "f0ea38a4bcb37aa6c68d498864c3c83f2867c4ad",
            "created_at": "2024-09-03T09:47:18Z",
            "diff_hunk": "@@ -649,6 +651,83 @@ print()\n     end)\n   end)\n \n+  describe('when using the trim! directive', function()",
            "html_url": "https://github.com/neovim/neovim/pull/30085#discussion_r1741765179",
            "id": 1741765179,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5n0To7",
            "original_commit_id": "bad7896a4eb33c21c38e62e38b36d3cd692f5902",
            "original_line": 654,
            "original_position": 19,
            "original_start_line": null,
            "path": "test/functional/treesitter/parser_spec.lua",
            "position": null,
            "pull_request_review_id": 2276942703,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/30085",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1741765179/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-09-03T09:47:18Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1741765179",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/30085#discussion_r1741767850"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/30085"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1741767850"
                }
            },
            "author_association": "MEMBER",
            "body": "(not a blocker) is this something that would be generally useful in the `vim.treesitter` stdlib?\r\n\r\na `@returns` shape would be helpful too.",
            "commit_id": "f0ea38a4bcb37aa6c68d498864c3c83f2867c4ad",
            "created_at": "2024-09-03T09:49:09Z",
            "diff_hunk": "@@ -0,0 +1,25 @@\n+local n = require('test.functional.testnvim')()\n+\n+local exec_lua = n.exec_lua\n+\n+local M = {}\n+\n+---@param language string\n+---@param query_string string\n+function M.run_query(language, query_string)",
            "html_url": "https://github.com/neovim/neovim/pull/30085#discussion_r1741767850",
            "id": 1741767850,
            "line": 9,
            "node_id": "PRRC_kwDOAPphoM5n0USq",
            "original_commit_id": "bad7896a4eb33c21c38e62e38b36d3cd692f5902",
            "original_line": 9,
            "original_position": 9,
            "original_start_line": null,
            "path": "test/functional/treesitter/testutil.lua",
            "position": 9,
            "pull_request_review_id": 2276947023,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/30085",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1741767850/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-09-03T09:49:41Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1741767850",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/30085#discussion_r1741772160"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/30085"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1741772160"
                }
            },
            "author_association": "MEMBER",
            "body": "It would be worth checking if that difference is meaningful -- what would break if whitespace lines are trimmed as well? The `#trim!` directive is currently only used in (four, _not_ including Python ;)) folding queries, so arguably that would even be an improvement.",
            "commit_id": "f0ea38a4bcb37aa6c68d498864c3c83f2867c4ad",
            "created_at": "2024-09-03T09:52:15Z",
            "diff_hunk": "@@ -184,6 +184,76 @@ local function read_query_files(filenames)\n   return table.concat(contents, '')\n end\n \n+---@param node TSNode\n+---@param bufnr integer\n+---@return integer, integer, integer, integer\n+local function node_trim_trailing_blank_lines(node, bufnr)\n+  local start_row, start_col, end_row, end_col = node:range()\n+\n+  -- Don't trim if region ends in middle of a line\n+  if end_col == 0 then\n+    while end_row >= start_row do\n+      -- As we only care when end_col == 0, always inspect one line above end_row.\n+      local end_line = api.nvim_buf_get_lines(bufnr, end_row - 1, end_row, true)[1]\n+\n+      if end_line ~= '' then\n+        break\n+      end\n+\n+      end_row = end_row - 1\n+    end\n+  end\n+\n+  return start_row, start_col, end_row, end_col\n+end\n+\n+---@param node TSNode\n+---@param bufnr integer\n+---@return integer, integer, integer, integer\n+local function node_trim_all_whitespace(node, bufnr)",
            "html_url": "https://github.com/neovim/neovim/pull/30085#discussion_r1741772160",
            "id": 1741772160,
            "in_reply_to_id": 1739151066,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5n0VWA",
            "original_commit_id": "b9f7dba4a12ed675ea49b359475950471064f054",
            "original_line": 213,
            "original_position": 30,
            "original_start_line": null,
            "path": "runtime/lua/vim/treesitter/query.lua",
            "position": null,
            "pull_request_review_id": 2276954393,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/30085",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1741772160/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-09-03T09:52:33Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1741772160",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/30085#discussion_r1741869280"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/30085"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1741869280"
                }
            },
            "author_association": "MEMBER",
            "body": "The useful code here would be:\r\n\r\n```lua\r\n    local query = vim.treesitter.query.parse(lang, query_str)\r\n    local parser = vim.treesitter.get_parser()\r\n    local tree = parser:parse()[1]\r\n    for id, node, metadata in query:iter_captures(tree:root(), 0) do\r\n       ...\r\n    end\r\n```\r\n\r\nAnd could potentially be used in `runtime/lua/vim/vimhelp.lua`.\r\n\r\nBut, tbh, I don't think this is useful enough to justify the surface area, as any one of these lines could be changed depending on the application. Do we allow buffer number, lang or parser to be an input, or all 3? Do we want to pass in a query string or a query file path, or both? What kind of iterator do we want to return; iter_matches or iter_captures?",
            "commit_id": "f0ea38a4bcb37aa6c68d498864c3c83f2867c4ad",
            "created_at": "2024-09-03T11:07:54Z",
            "diff_hunk": "@@ -0,0 +1,25 @@\n+local n = require('test.functional.testnvim')()\n+\n+local exec_lua = n.exec_lua\n+\n+local M = {}\n+\n+---@param language string\n+---@param query_string string\n+function M.run_query(language, query_string)",
            "html_url": "https://github.com/neovim/neovim/pull/30085#discussion_r1741869280",
            "id": 1741869280,
            "in_reply_to_id": 1741767850,
            "line": 9,
            "node_id": "PRRC_kwDOAPphoM5n0tDg",
            "original_commit_id": "bad7896a4eb33c21c38e62e38b36d3cd692f5902",
            "original_line": 9,
            "original_position": 9,
            "original_start_line": null,
            "path": "test/functional/treesitter/testutil.lua",
            "position": 9,
            "pull_request_review_id": 2277120441,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/30085",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 1,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1741869280/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-09-03T11:07:55Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1741869280",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/7904185?v=4",
                "events_url": "https://api.github.com/users/lewis6991/events{/privacy}",
                "followers_url": "https://api.github.com/users/lewis6991/followers",
                "following_url": "https://api.github.com/users/lewis6991/following{/other_user}",
                "gists_url": "https://api.github.com/users/lewis6991/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/lewis6991",
                "id": 7904185,
                "login": "lewis6991",
                "node_id": "MDQ6VXNlcjc5MDQxODU=",
                "organizations_url": "https://api.github.com/users/lewis6991/orgs",
                "received_events_url": "https://api.github.com/users/lewis6991/received_events",
                "repos_url": "https://api.github.com/users/lewis6991/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/lewis6991/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lewis6991/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/lewis6991",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/30085#discussion_r1747854762"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/30085"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1747854762"
                }
            },
            "author_association": "MEMBER",
            "body": "Sure gimme a sec- I assume startline startcols endline endcols?",
            "commit_id": "f0ea38a4bcb37aa6c68d498864c3c83f2867c4ad",
            "created_at": "2024-09-07T01:25:15Z",
            "diff_hunk": "@@ -385,14 +385,17 @@ The following directives are built in:\n             (#gsub! @_node \".*%.(.*)\" \"%1\")\n <\n     `trim!`                                          *treesitter-directive-trim!*\n-        Trim blank lines from the end of the node. This will set a new\n-        `metadata[capture_id].range`.\n+        Trim whitespace from the node. This will set a new\n+        `metadata[capture_id].range`. Trims blank lines from the end of the node\n+        by default (for backwards compatibility). Trims all whitespace from both\n+        sides of the node if the optional parameter \"1\" is given.",
            "html_url": "https://github.com/neovim/neovim/pull/30085#discussion_r1747854762",
            "id": 1747854762,
            "in_reply_to_id": 1741759902,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5oLiWq",
            "original_commit_id": "bad7896a4eb33c21c38e62e38b36d3cd692f5902",
            "original_line": 396,
            "original_position": 9,
            "original_start_line": null,
            "path": "runtime/doc/treesitter.txt",
            "position": null,
            "pull_request_review_id": 2287305814,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/30085",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1747854762/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-09-07T01:25:16Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1747854762",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/55766287?v=4",
                "events_url": "https://api.github.com/users/ribru17/events{/privacy}",
                "followers_url": "https://api.github.com/users/ribru17/followers",
                "following_url": "https://api.github.com/users/ribru17/following{/other_user}",
                "gists_url": "https://api.github.com/users/ribru17/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ribru17",
                "id": 55766287,
                "login": "ribru17",
                "node_id": "MDQ6VXNlcjU1NzY2Mjg3",
                "organizations_url": "https://api.github.com/users/ribru17/orgs",
                "received_events_url": "https://api.github.com/users/ribru17/received_events",
                "repos_url": "https://api.github.com/users/ribru17/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ribru17/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ribru17/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ribru17",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/30085#discussion_r1748979724"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/30085"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1748979724"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n        Trims whitespace from the node. Sets a new\r\n```",
            "commit_id": "f0ea38a4bcb37aa6c68d498864c3c83f2867c4ad",
            "created_at": "2024-09-07T21:59:23Z",
            "diff_hunk": "@@ -390,14 +390,17 @@ The following directives are built in:\n             (#gsub! @_node \".*%.(.*)\" \"%1\")\n <\n     `trim!`                                          *treesitter-directive-trim!*\n-        Trim blank lines from the end of the node. This will set a new\n-        `metadata[capture_id].range`.\n+        Trim whitespace from the node. This will set a new",
            "html_url": "https://github.com/neovim/neovim/pull/30085#discussion_r1748979724",
            "id": 1748979724,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5oP1AM",
            "original_commit_id": "8ba631330f2d45223e9e67cf958a8ce0fe22a5eb",
            "original_line": 393,
            "original_position": 6,
            "original_start_line": null,
            "path": "runtime/doc/treesitter.txt",
            "position": null,
            "pull_request_review_id": 2288415531,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/30085",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1748979724/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-09-07T21:59:29Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1748979724",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/30085#discussion_r1748980041"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/30085"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1748980041"
                }
            },
            "author_association": "MEMBER",
            "body": "this doc needs to be updated now, right?\r\n```suggestion\r\n        sides of the node if parameters are given.\r\n```",
            "commit_id": "f0ea38a4bcb37aa6c68d498864c3c83f2867c4ad",
            "created_at": "2024-09-07T22:00:27Z",
            "diff_hunk": "@@ -390,14 +390,17 @@ The following directives are built in:\n             (#gsub! @_node \".*%.(.*)\" \"%1\")\n <\n     `trim!`                                          *treesitter-directive-trim!*\n-        Trim blank lines from the end of the node. This will set a new\n-        `metadata[capture_id].range`.\n+        Trim whitespace from the node. This will set a new\n+        `metadata[capture_id].range`. Trims blank lines from the end of the node\n+        by default (for backwards compatibility). Trims all whitespace from both\n+        sides of the node if the optional parameter \"1\" is given.",
            "html_url": "https://github.com/neovim/neovim/pull/30085#discussion_r1748980041",
            "id": 1748980041,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5oP1FJ",
            "original_commit_id": "8ba631330f2d45223e9e67cf958a8ce0fe22a5eb",
            "original_line": 396,
            "original_position": 9,
            "original_start_line": null,
            "path": "runtime/doc/treesitter.txt",
            "position": null,
            "pull_request_review_id": 2288415636,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/30085",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1748980041/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-09-07T22:00:27Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1748980041",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/30085#discussion_r1748982653"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/30085"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1748982653"
                }
            },
            "author_association": "MEMBER",
            "body": "It does; sorry maybe I should mark as draft (even though this is 90% done?)- still working through a test failure which is causing me headache",
            "commit_id": "f0ea38a4bcb37aa6c68d498864c3c83f2867c4ad",
            "created_at": "2024-09-07T22:09:48Z",
            "diff_hunk": "@@ -390,14 +390,17 @@ The following directives are built in:\n             (#gsub! @_node \".*%.(.*)\" \"%1\")\n <\n     `trim!`                                          *treesitter-directive-trim!*\n-        Trim blank lines from the end of the node. This will set a new\n-        `metadata[capture_id].range`.\n+        Trim whitespace from the node. This will set a new\n+        `metadata[capture_id].range`. Trims blank lines from the end of the node\n+        by default (for backwards compatibility). Trims all whitespace from both\n+        sides of the node if the optional parameter \"1\" is given.",
            "html_url": "https://github.com/neovim/neovim/pull/30085#discussion_r1748982653",
            "id": 1748982653,
            "in_reply_to_id": 1748980041,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5oP1t9",
            "original_commit_id": "8ba631330f2d45223e9e67cf958a8ce0fe22a5eb",
            "original_line": 396,
            "original_position": 9,
            "original_start_line": null,
            "path": "runtime/doc/treesitter.txt",
            "position": null,
            "pull_request_review_id": 2288416504,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/30085",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1748982653/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-09-07T22:09:48Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1748982653",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/55766287?v=4",
                "events_url": "https://api.github.com/users/ribru17/events{/privacy}",
                "followers_url": "https://api.github.com/users/ribru17/followers",
                "following_url": "https://api.github.com/users/ribru17/following{/other_user}",
                "gists_url": "https://api.github.com/users/ribru17/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ribru17",
                "id": 55766287,
                "login": "ribru17",
                "node_id": "MDQ6VXNlcjU1NzY2Mjg3",
                "organizations_url": "https://api.github.com/users/ribru17/orgs",
                "received_events_url": "https://api.github.com/users/ribru17/received_events",
                "repos_url": "https://api.github.com/users/ribru17/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ribru17/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ribru17/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ribru17",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/30085#discussion_r1749293082"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/30085"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1749293082"
                }
            },
            "author_association": "MEMBER",
            "body": "is it blank lines or only empty lines?\r\n```suggestion\r\n        `metadata[capture_id].range`. Trims empty lines from the end of the\r\n```",
            "commit_id": "f0ea38a4bcb37aa6c68d498864c3c83f2867c4ad",
            "created_at": "2024-09-08T16:49:20Z",
            "diff_hunk": "@@ -390,14 +390,21 @@ The following directives are built in:\n             (#gsub! @_node \".*%.(.*)\" \"%1\")\n <\n     `trim!`                                          *treesitter-directive-trim!*\n-        Trim blank lines from the end of the node. This will set a new\n-        `metadata[capture_id].range`.\n+        Trims whitespace from the node. Sets a new\n+        `metadata[capture_id].range`. Trims blank lines from the end of the",
            "html_url": "https://github.com/neovim/neovim/pull/30085#discussion_r1749293082",
            "id": 1749293082,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5oRBga",
            "original_commit_id": "eb39462de3465d756301d80c61a94556cf6a9aa9",
            "original_line": 394,
            "original_position": 7,
            "original_start_line": null,
            "path": "runtime/doc/treesitter.txt",
            "position": null,
            "pull_request_review_id": 2288570872,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/30085",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1749293082/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-09-08T16:49:20Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1749293082",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/30085#discussion_r1749293420"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/30085"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1749293420"
                }
            },
            "author_association": "MEMBER",
            "body": "Whichever can contain (only) whitespace ;)",
            "commit_id": "f0ea38a4bcb37aa6c68d498864c3c83f2867c4ad",
            "created_at": "2024-09-08T16:50:33Z",
            "diff_hunk": "@@ -390,14 +390,21 @@ The following directives are built in:\n             (#gsub! @_node \".*%.(.*)\" \"%1\")\n <\n     `trim!`                                          *treesitter-directive-trim!*\n-        Trim blank lines from the end of the node. This will set a new\n-        `metadata[capture_id].range`.\n+        Trims whitespace from the node. Sets a new\n+        `metadata[capture_id].range`. Trims blank lines from the end of the",
            "html_url": "https://github.com/neovim/neovim/pull/30085#discussion_r1749293420",
            "id": 1749293420,
            "in_reply_to_id": 1749293082,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5oRBls",
            "original_commit_id": "eb39462de3465d756301d80c61a94556cf6a9aa9",
            "original_line": 394,
            "original_position": 7,
            "original_start_line": null,
            "path": "runtime/doc/treesitter.txt",
            "position": null,
            "pull_request_review_id": 2288571035,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/30085",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1749293420/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-09-08T16:50:33Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1749293420",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/30085#discussion_r1749294237"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/30085"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1749294237"
                }
            },
            "author_association": "MEMBER",
            "body": "Yes, so blank- I'll clarify here",
            "commit_id": "f0ea38a4bcb37aa6c68d498864c3c83f2867c4ad",
            "created_at": "2024-09-08T16:53:31Z",
            "diff_hunk": "@@ -390,14 +390,21 @@ The following directives are built in:\n             (#gsub! @_node \".*%.(.*)\" \"%1\")\n <\n     `trim!`                                          *treesitter-directive-trim!*\n-        Trim blank lines from the end of the node. This will set a new\n-        `metadata[capture_id].range`.\n+        Trims whitespace from the node. Sets a new\n+        `metadata[capture_id].range`. Trims blank lines from the end of the",
            "html_url": "https://github.com/neovim/neovim/pull/30085#discussion_r1749294237",
            "id": 1749294237,
            "in_reply_to_id": 1749293082,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5oRByd",
            "original_commit_id": "eb39462de3465d756301d80c61a94556cf6a9aa9",
            "original_line": 394,
            "original_position": 7,
            "original_start_line": null,
            "path": "runtime/doc/treesitter.txt",
            "position": null,
            "pull_request_review_id": 2288571451,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/30085",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1749294237/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-09-08T16:53:31Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1749294237",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/55766287?v=4",
                "events_url": "https://api.github.com/users/ribru17/events{/privacy}",
                "followers_url": "https://api.github.com/users/ribru17/followers",
                "following_url": "https://api.github.com/users/ribru17/following{/other_user}",
                "gists_url": "https://api.github.com/users/ribru17/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ribru17",
                "id": 55766287,
                "login": "ribru17",
                "node_id": "MDQ6VXNlcjU1NzY2Mjg3",
                "organizations_url": "https://api.github.com/users/ribru17/orgs",
                "received_events_url": "https://api.github.com/users/ribru17/received_events",
                "repos_url": "https://api.github.com/users/ribru17/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ribru17/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ribru17/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ribru17",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/30085#discussion_r1873252385"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/30085"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1873252385"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n            {trim_end_linewise} (default `1` if only given {capture_id})\r\n```\r\n\r\nThis is a bit hard to parse, especially given that the example only comes afterwards. (Suggestion: move it before the parameter list and add one or two more variants: at least the \"capture only\" case and a \"only horizontal\" or \"only vertical\" case.) I would also suggest explaining the default explicitly before the list, e.g., \"takes either a capture id and a set of four integers (`1` trim, `0` don't trim) or only a capture id for backward compatibility (only trim empty lines at the end)\" (exact wording TBD).\r\n\r\n",
            "commit_id": "f0ea38a4bcb37aa6c68d498864c3c83f2867c4ad",
            "created_at": "2024-12-06T12:19:46Z",
            "diff_hunk": "@@ -245,14 +245,22 @@ The following directives are built in:\n             (#gsub! @_node \".*%.(.*)\" \"%1\")\n <\n     `trim!`                                          *treesitter-directive-trim!*\n-        Trim blank lines from the end of the node. This will set a new\n-        `metadata[capture_id].range`.\n+        Trims whitespace from the node. Sets a new\n+        `metadata[capture_id].range`. Trims blank lines (lines that contain\n+        only whitespace, or are empty) from the end of the node by default\n+        (for backwards compatibility). Trims all whitespace from both sides of\n+        the node if parameters are given.\n \n         Parameters: ~\n             {capture_id}\n+            {trim_start_linewise}\n+            {trim_start_charwise}\n+            {trim_end_linewise} (default `true` if only given {capture_id})",
            "html_url": "https://github.com/neovim/neovim/pull/30085#discussion_r1873252385",
            "id": 1873252385,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5vp5Ah",
            "original_commit_id": "1d5ec45e75990af1afeb093a0bbac4a37e263e5d",
            "original_line": 258,
            "original_position": 16,
            "original_start_line": null,
            "path": "runtime/doc/treesitter.txt",
            "position": null,
            "pull_request_review_id": 2484699843,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/30085",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1873252385/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-12-06T12:19:47Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1873252385",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/30085#discussion_r1873678409"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/30085"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1873678409"
                }
            },
            "author_association": "MEMBER",
            "body": "I think docs are in a good spot now, lmk if you disagree",
            "commit_id": "f0ea38a4bcb37aa6c68d498864c3c83f2867c4ad",
            "created_at": "2024-12-06T16:42:24Z",
            "diff_hunk": "@@ -245,14 +245,22 @@ The following directives are built in:\n             (#gsub! @_node \".*%.(.*)\" \"%1\")\n <\n     `trim!`                                          *treesitter-directive-trim!*\n-        Trim blank lines from the end of the node. This will set a new\n-        `metadata[capture_id].range`.\n+        Trims whitespace from the node. Sets a new\n+        `metadata[capture_id].range`. Trims blank lines (lines that contain\n+        only whitespace, or are empty) from the end of the node by default\n+        (for backwards compatibility). Trims all whitespace from both sides of\n+        the node if parameters are given.\n \n         Parameters: ~\n             {capture_id}\n+            {trim_start_linewise}\n+            {trim_start_charwise}\n+            {trim_end_linewise} (default `true` if only given {capture_id})",
            "html_url": "https://github.com/neovim/neovim/pull/30085#discussion_r1873678409",
            "id": 1873678409,
            "in_reply_to_id": 1873252385,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5vrhBJ",
            "original_commit_id": "1d5ec45e75990af1afeb093a0bbac4a37e263e5d",
            "original_line": 258,
            "original_position": 16,
            "original_start_line": null,
            "path": "runtime/doc/treesitter.txt",
            "position": null,
            "pull_request_review_id": 2485371916,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/30085",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1873678409/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-12-06T16:42:25Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1873678409",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/55766287?v=4",
                "events_url": "https://api.github.com/users/ribru17/events{/privacy}",
                "followers_url": "https://api.github.com/users/ribru17/followers",
                "following_url": "https://api.github.com/users/ribru17/following{/other_user}",
                "gists_url": "https://api.github.com/users/ribru17/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ribru17",
                "id": 55766287,
                "login": "ribru17",
                "node_id": "MDQ6VXNlcjU1NzY2Mjg3",
                "organizations_url": "https://api.github.com/users/ribru17/orgs",
                "received_events_url": "https://api.github.com/users/ribru17/received_events",
                "repos_url": "https://api.github.com/users/ribru17/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ribru17/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ribru17/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ribru17",
                "user_view_type": "public"
            }
        }
    ],
    "comment_regular_data": [
        {
            "author_association": "MEMBER",
            "body": "Won't that be backward-incompatible? Maybe we can make the trim configurable with parameters?",
            "created_at": "2024-08-18T15:58:45Z",
            "html_url": "https://github.com/neovim/neovim/pull/30085#issuecomment-2295309903",
            "id": 2295309903,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30085",
            "node_id": "IC_kwDOAPphoM6Iz6ZP",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2295309903/reactions"
            },
            "updated_at": "2024-08-18T15:58:45Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2295309903",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "sure I can do that. Also is there a way to ignore linter errors for lines containing only whitespace? with a comment or something",
            "created_at": "2024-08-18T16:04:53Z",
            "html_url": "https://github.com/neovim/neovim/pull/30085#issuecomment-2295311573",
            "id": 2295311573,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30085",
            "node_id": "IC_kwDOAPphoM6Iz6zV",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2295311573/reactions"
            },
            "updated_at": "2024-08-18T16:04:53Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2295311573",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/55766287?v=4",
                "events_url": "https://api.github.com/users/ribru17/events{/privacy}",
                "followers_url": "https://api.github.com/users/ribru17/followers",
                "following_url": "https://api.github.com/users/ribru17/following{/other_user}",
                "gists_url": "https://api.github.com/users/ribru17/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ribru17",
                "id": 55766287,
                "login": "ribru17",
                "node_id": "MDQ6VXNlcjU1NzY2Mjg3",
                "organizations_url": "https://api.github.com/users/ribru17/orgs",
                "received_events_url": "https://api.github.com/users/ribru17/received_events",
                "repos_url": "https://api.github.com/users/ribru17/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ribru17/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ribru17/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ribru17",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": ">  with a comment or something\r\n\r\nYes but I don't remember exactly how (with stylua). For luacheck, you just `push` the error number (and `pop` afterwards).",
            "created_at": "2024-08-18T16:06:32Z",
            "html_url": "https://github.com/neovim/neovim/pull/30085#issuecomment-2295312120",
            "id": 2295312120,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30085",
            "node_id": "IC_kwDOAPphoM6Iz674",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 1,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2295312120/reactions"
            },
            "updated_at": "2024-08-18T16:06:32Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2295312120",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Is the backwards compatibility option a dealbreaker here? Seems like there aren't [too many](https://github.com/search?q=lang%3Ascheme+%23trim%21&type=code&p=2) instances of this (at least on github) and having two different trim functions / options might make maintenance more difficult ",
            "created_at": "2024-08-18T16:29:40Z",
            "html_url": "https://github.com/neovim/neovim/pull/30085#issuecomment-2295318422",
            "id": 2295318422,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30085",
            "node_id": "IC_kwDOAPphoM6Iz8eW",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2295318422/reactions"
            },
            "updated_at": "2024-08-18T16:29:40Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2295318422",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/55766287?v=4",
                "events_url": "https://api.github.com/users/ribru17/events{/privacy}",
                "followers_url": "https://api.github.com/users/ribru17/followers",
                "following_url": "https://api.github.com/users/ribru17/following{/other_user}",
                "gists_url": "https://api.github.com/users/ribru17/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ribru17",
                "id": 55766287,
                "login": "ribru17",
                "node_id": "MDQ6VXNlcjU1NzY2Mjg3",
                "organizations_url": "https://api.github.com/users/ribru17/orgs",
                "received_events_url": "https://api.github.com/users/ribru17/received_events",
                "repos_url": "https://api.github.com/users/ribru17/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ribru17/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ribru17/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ribru17",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "What is this for?",
            "created_at": "2024-08-18T16:30:15Z",
            "html_url": "https://github.com/neovim/neovim/pull/30085#issuecomment-2295318603",
            "id": 2295318603,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30085",
            "node_id": "IC_kwDOAPphoM6Iz8hL",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2295318603/reactions"
            },
            "updated_at": "2024-08-18T16:30:15Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2295318603",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/7904185?v=4",
                "events_url": "https://api.github.com/users/lewis6991/events{/privacy}",
                "followers_url": "https://api.github.com/users/lewis6991/followers",
                "following_url": "https://api.github.com/users/lewis6991/following{/other_user}",
                "gists_url": "https://api.github.com/users/lewis6991/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/lewis6991",
                "id": 7904185,
                "login": "lewis6991",
                "node_id": "MDQ6VXNlcjc5MDQxODU=",
                "organizations_url": "https://api.github.com/users/lewis6991/orgs",
                "received_events_url": "https://api.github.com/users/lewis6991/received_events",
                "repos_url": "https://api.github.com/users/lewis6991/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/lewis6991/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lewis6991/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/lewis6991",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "For anything that requires proper charwise trimming, e.g. it would fix https://github.com/nvim-treesitter/nvim-treesitter/pull/3442 and would allow for properly concealing markdown bullet markers regardless of indent width, e.g.",
            "created_at": "2024-08-18T16:33:39Z",
            "html_url": "https://github.com/neovim/neovim/pull/30085#issuecomment-2295319566",
            "id": 2295319566,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30085",
            "node_id": "IC_kwDOAPphoM6Iz8wO",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2295319566/reactions"
            },
            "updated_at": "2024-08-18T16:33:39Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2295319566",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/55766287?v=4",
                "events_url": "https://api.github.com/users/ribru17/events{/privacy}",
                "followers_url": "https://api.github.com/users/ribru17/followers",
                "following_url": "https://api.github.com/users/ribru17/following{/other_user}",
                "gists_url": "https://api.github.com/users/ribru17/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ribru17",
                "id": 55766287,
                "login": "ribru17",
                "node_id": "MDQ6VXNlcjU1NzY2Mjg3",
                "organizations_url": "https://api.github.com/users/ribru17/orgs",
                "received_events_url": "https://api.github.com/users/ribru17/received_events",
                "repos_url": "https://api.github.com/users/ribru17/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ribru17/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ribru17/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ribru17",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> Is the backwards compatibility option a dealbreaker here? \r\n\r\nKinda, yes -- it's used extensively in fold queries, and these have to work across different Neovim versions. But adding (a) parameter(s) that control additional trimming and defaulting to the old behavior if these are omitted would be fine.",
            "created_at": "2024-08-18T16:35:02Z",
            "html_url": "https://github.com/neovim/neovim/pull/30085#issuecomment-2295319881",
            "id": 2295319881,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30085",
            "node_id": "IC_kwDOAPphoM6Iz81J",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2295319881/reactions"
            },
            "updated_at": "2024-08-18T16:35:45Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2295319881",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> For anything that requires proper charwise trimming, e.g. it would fix [nvim-treesitter/nvim-treesitter#3442](https://github.com/nvim-treesitter/nvim-treesitter/pull/3442) and would allow for properly concealing markdown bullet markers regardless of indent width, e.g.\r\n\r\nThis kind of information needs to be included in the OP, and probably in the commit message too.",
            "created_at": "2024-08-18T18:35:47Z",
            "html_url": "https://github.com/neovim/neovim/pull/30085#issuecomment-2295351925",
            "id": 2295351925,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30085",
            "node_id": "IC_kwDOAPphoM6I0Ep1",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2295351925/reactions"
            },
            "updated_at": "2024-08-18T18:35:47Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2295351925",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/7904185?v=4",
                "events_url": "https://api.github.com/users/lewis6991/events{/privacy}",
                "followers_url": "https://api.github.com/users/lewis6991/followers",
                "following_url": "https://api.github.com/users/lewis6991/following{/other_user}",
                "gists_url": "https://api.github.com/users/lewis6991/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/lewis6991",
                "id": 7904185,
                "login": "lewis6991",
                "node_id": "MDQ6VXNlcjc5MDQxODU=",
                "organizations_url": "https://api.github.com/users/lewis6991/orgs",
                "received_events_url": "https://api.github.com/users/lewis6991/received_events",
                "repos_url": "https://api.github.com/users/lewis6991/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/lewis6991/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lewis6991/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/lewis6991",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Done",
            "created_at": "2024-08-21T02:30:03Z",
            "html_url": "https://github.com/neovim/neovim/pull/30085#issuecomment-2300323171",
            "id": 2300323171,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30085",
            "node_id": "IC_kwDOAPphoM6JHCVj",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2300323171/reactions"
            },
            "updated_at": "2024-08-21T02:30:03Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2300323171",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/55766287?v=4",
                "events_url": "https://api.github.com/users/ribru17/events{/privacy}",
                "followers_url": "https://api.github.com/users/ribru17/followers",
                "following_url": "https://api.github.com/users/ribru17/following{/other_user}",
                "gists_url": "https://api.github.com/users/ribru17/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ribru17",
                "id": 55766287,
                "login": "ribru17",
                "node_id": "MDQ6VXNlcjU1NzY2Mjg3",
                "organizations_url": "https://api.github.com/users/ribru17/orgs",
                "received_events_url": "https://api.github.com/users/ribru17/received_events",
                "repos_url": "https://api.github.com/users/ribru17/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ribru17/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ribru17/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ribru17",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Should I add a `TODO` for myself to remove the old trimming functionality after a future release?",
            "created_at": "2024-08-31T15:18:26Z",
            "html_url": "https://github.com/neovim/neovim/pull/30085#issuecomment-2322929655",
            "id": 2322929655,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30085",
            "node_id": "IC_kwDOAPphoM6KdRf3",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2322929655/reactions"
            },
            "updated_at": "2024-08-31T15:18:26Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2322929655",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/55766287?v=4",
                "events_url": "https://api.github.com/users/ribru17/events{/privacy}",
                "followers_url": "https://api.github.com/users/ribru17/followers",
                "following_url": "https://api.github.com/users/ribru17/following{/other_user}",
                "gists_url": "https://api.github.com/users/ribru17/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ribru17",
                "id": 55766287,
                "login": "ribru17",
                "node_id": "MDQ6VXNlcjU1NzY2Mjg3",
                "organizations_url": "https://api.github.com/users/ribru17/orgs",
                "received_events_url": "https://api.github.com/users/ribru17/received_events",
                "repos_url": "https://api.github.com/users/ribru17/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ribru17/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ribru17/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ribru17",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> Should I add a `TODO` for myself to remove the old trimming functionality after a future release?\r\n\r\nNot sure that's necessary -- isn't the old functionality a strict subset of the new functionality (`#trim! 0 0 0 1`)?",
            "created_at": "2024-09-03T09:50:03Z",
            "html_url": "https://github.com/neovim/neovim/pull/30085#issuecomment-2326088844",
            "id": 2326088844,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30085",
            "node_id": "IC_kwDOAPphoM6KpUyM",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2326088844/reactions"
            },
            "updated_at": "2024-09-03T09:50:03Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2326088844",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "~Not strictly speaking (`#trim! 0 0 0 1` would trim all trailing *blank* lines (may contain whitespace) and the old `#trim!` just trimmed *empty* lines (must == `\"\"`)). But I think the difference would be so subtle that it's probably still fine not to add a TODO~\r\n\r\nEdit: based on your above comment I am just going to make the old trim a true subset of this (so it does trim blank lines, not just empty ones) and I'm sure like you say it will just be an improvement",
            "created_at": "2024-09-07T01:28:22Z",
            "html_url": "https://github.com/neovim/neovim/pull/30085#issuecomment-2334987911",
            "id": 2334987911,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30085",
            "node_id": "IC_kwDOAPphoM6LLRaH",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2334987911/reactions"
            },
            "updated_at": "2024-09-07T01:30:39Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2334987911",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/55766287?v=4",
                "events_url": "https://api.github.com/users/ribru17/events{/privacy}",
                "followers_url": "https://api.github.com/users/ribru17/followers",
                "following_url": "https://api.github.com/users/ribru17/following{/other_user}",
                "gists_url": "https://api.github.com/users/ribru17/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ribru17",
                "id": 55766287,
                "login": "ribru17",
                "node_id": "MDQ6VXNlcjU1NzY2Mjg3",
                "organizations_url": "https://api.github.com/users/ribru17/orgs",
                "received_events_url": "https://api.github.com/users/ribru17/received_events",
                "repos_url": "https://api.github.com/users/ribru17/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ribru17/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ribru17/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ribru17",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Alright comments have mostly been addressed, I still need to document the new directive parameters, but now the backwards compatibility test fails due to an index out of bound error ~and I have no clue why~",
            "created_at": "2024-09-07T19:20:53Z",
            "html_url": "https://github.com/neovim/neovim/pull/30085#issuecomment-2336411931",
            "id": 2336411931,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30085",
            "node_id": "IC_kwDOAPphoM6LQtEb",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2336411931/reactions"
            },
            "updated_at": "2024-09-07T23:47:40Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2336411931",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/55766287?v=4",
                "events_url": "https://api.github.com/users/ribru17/events{/privacy}",
                "followers_url": "https://api.github.com/users/ribru17/followers",
                "following_url": "https://api.github.com/users/ribru17/following{/other_user}",
                "gists_url": "https://api.github.com/users/ribru17/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ribru17",
                "id": 55766287,
                "login": "ribru17",
                "node_id": "MDQ6VXNlcjU1NzY2Mjg3",
                "organizations_url": "https://api.github.com/users/ribru17/orgs",
                "received_events_url": "https://api.github.com/users/ribru17/received_events",
                "repos_url": "https://api.github.com/users/ribru17/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ribru17/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ribru17/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ribru17",
                "user_view_type": "public"
            }
        }
    ],
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/30085/comments",
    "commits_url": "https://api.github.com/repos/neovim/neovim/pulls/30085/commits",
    "created_at": "2024-08-18T15:55:55Z",
    "diff_url": "https://github.com/neovim/neovim/pull/30085.diff",
    "draft": false,
    "head": {
        "label": "ribru17:fix_trim_directive",
        "ref": "fix_trim_directive",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/ribru17/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/ribru17/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/ribru17/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/ribru17/neovim/branches{/branch}",
            "clone_url": "https://github.com/ribru17/neovim.git",
            "collaborators_url": "https://api.github.com/repos/ribru17/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/ribru17/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/ribru17/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/ribru17/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/ribru17/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/ribru17/neovim/contributors",
            "created_at": "2023-12-31T05:02:30Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/ribru17/neovim/deployments",
            "description": "Vim-fork focused on extensibility and usability",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/ribru17/neovim/downloads",
            "events_url": "https://api.github.com/repos/ribru17/neovim/events",
            "fork": true,
            "forks": 0,
            "forks_count": 0,
            "forks_url": "https://api.github.com/repos/ribru17/neovim/forks",
            "full_name": "ribru17/neovim",
            "git_commits_url": "https://api.github.com/repos/ribru17/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/ribru17/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/ribru17/neovim/git/tags{/sha}",
            "git_url": "git://github.com/ribru17/neovim.git",
            "has_discussions": false,
            "has_downloads": true,
            "has_issues": false,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://neovim.io",
            "hooks_url": "https://api.github.com/repos/ribru17/neovim/hooks",
            "html_url": "https://github.com/ribru17/neovim",
            "id": 737455179,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/ribru17/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/ribru17/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/ribru17/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/ribru17/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/ribru17/neovim/labels{/name}",
            "language": "Vim Script",
            "languages_url": "https://api.github.com/repos/ribru17/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/ribru17/neovim/merges",
            "milestones_url": "https://api.github.com/repos/ribru17/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "R_kgDOK_SsSw",
            "notifications_url": "https://api.github.com/repos/ribru17/neovim/notifications{?since,all,participating}",
            "open_issues": 0,
            "open_issues_count": 0,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/55766287?v=4",
                "events_url": "https://api.github.com/users/ribru17/events{/privacy}",
                "followers_url": "https://api.github.com/users/ribru17/followers",
                "following_url": "https://api.github.com/users/ribru17/following{/other_user}",
                "gists_url": "https://api.github.com/users/ribru17/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ribru17",
                "id": 55766287,
                "login": "ribru17",
                "node_id": "MDQ6VXNlcjU1NzY2Mjg3",
                "organizations_url": "https://api.github.com/users/ribru17/orgs",
                "received_events_url": "https://api.github.com/users/ribru17/received_events",
                "repos_url": "https://api.github.com/users/ribru17/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ribru17/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ribru17/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ribru17",
                "user_view_type": "public"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/ribru17/neovim/pulls{/number}",
            "pushed_at": "2024-12-07T17:47:19Z",
            "releases_url": "https://api.github.com/repos/ribru17/neovim/releases{/id}",
            "size": 290857,
            "ssh_url": "git@github.com:ribru17/neovim.git",
            "stargazers_count": 0,
            "stargazers_url": "https://api.github.com/repos/ribru17/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/ribru17/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/ribru17/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/ribru17/neovim/subscription",
            "svn_url": "https://github.com/ribru17/neovim",
            "tags_url": "https://api.github.com/repos/ribru17/neovim/tags",
            "teams_url": "https://api.github.com/repos/ribru17/neovim/teams",
            "topics": [],
            "trees_url": "https://api.github.com/repos/ribru17/neovim/git/trees{/sha}",
            "updated_at": "2024-12-07T17:47:24Z",
            "url": "https://api.github.com/repos/ribru17/neovim",
            "visibility": "public",
            "watchers": 0,
            "watchers_count": 0,
            "web_commit_signoff_required": false
        },
        "sha": "f0ea38a4bcb37aa6c68d498864c3c83f2867c4ad",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/55766287?v=4",
            "events_url": "https://api.github.com/users/ribru17/events{/privacy}",
            "followers_url": "https://api.github.com/users/ribru17/followers",
            "following_url": "https://api.github.com/users/ribru17/following{/other_user}",
            "gists_url": "https://api.github.com/users/ribru17/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/ribru17",
            "id": 55766287,
            "login": "ribru17",
            "node_id": "MDQ6VXNlcjU1NzY2Mjg3",
            "organizations_url": "https://api.github.com/users/ribru17/orgs",
            "received_events_url": "https://api.github.com/users/ribru17/received_events",
            "repos_url": "https://api.github.com/users/ribru17/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/ribru17/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/ribru17/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/ribru17",
            "user_view_type": "public"
        }
    },
    "html_url": "https://github.com/neovim/neovim/pull/30085",
    "id": 2024440068,
    "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30085",
    "labels": [
        {
            "color": "c5def5",
            "default": false,
            "description": "",
            "id": 1799626557,
            "name": "treesitter",
            "node_id": "MDU6TGFiZWwxNzk5NjI2NTU3",
            "url": "https://api.github.com/repos/neovim/neovim/labels/treesitter"
        }
    ],
    "locked": false,
    "merge_commit_sha": "ba7370a902abc1ca533f8ebf70f708e16a2a64c2",
    "merged_at": "2024-12-06T18:08:21Z",
    "milestone": null,
    "node_id": "PR_kwDOAPphoM54qoEE",
    "number": 30085,
    "patch_url": "https://github.com/neovim/neovim/pull/30085.patch",
    "requested_reviewers": [],
    "requested_teams": [],
    "review_comment_url": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}",
    "review_comments_url": "https://api.github.com/repos/neovim/neovim/pulls/30085/comments",
    "state": "closed",
    "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/f0ea38a4bcb37aa6c68d498864c3c83f2867c4ad",
    "title": "feat(treesitter): #trim! can trim all whitespace",
    "updated_at": "2024-12-06T18:08:35Z",
    "url": "https://api.github.com/repos/neovim/neovim/pulls/30085",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/55766287?v=4",
        "events_url": "https://api.github.com/users/ribru17/events{/privacy}",
        "followers_url": "https://api.github.com/users/ribru17/followers",
        "following_url": "https://api.github.com/users/ribru17/following{/other_user}",
        "gists_url": "https://api.github.com/users/ribru17/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/ribru17",
        "id": 55766287,
        "login": "ribru17",
        "node_id": "MDQ6VXNlcjU1NzY2Mjg3",
        "organizations_url": "https://api.github.com/users/ribru17/orgs",
        "received_events_url": "https://api.github.com/users/ribru17/received_events",
        "repos_url": "https://api.github.com/users/ribru17/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/ribru17/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/ribru17/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/ribru17",
        "user_view_type": "public"
    }
}