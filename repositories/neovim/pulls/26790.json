{
    "_links": {
        "comments": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/26790/comments"
        },
        "commits": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/26790/commits"
        },
        "html": {
            "href": "https://github.com/neovim/neovim/pull/26790"
        },
        "issue": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/26790"
        },
        "review_comment": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}"
        },
        "review_comments": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/26790/comments"
        },
        "self": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/26790"
        },
        "statuses": {
            "href": "https://api.github.com/repos/neovim/neovim/statuses/af582524e9118d2734f229e730d6e9e6c2c1c282"
        }
    },
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "auto_merge": null,
    "base": {
        "label": "neovim:master",
        "ref": "master",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/neovim/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/neovim/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/neovim/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/neovim/neovim/branches{/branch}",
            "clone_url": "https://github.com/neovim/neovim.git",
            "collaborators_url": "https://api.github.com/repos/neovim/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/neovim/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/neovim/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/neovim/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/neovim/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/neovim/neovim/contributors",
            "created_at": "2014-01-31T13:39:22Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/neovim/neovim/deployments",
            "description": "Vim-fork focused on extensibility and usability",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/neovim/neovim/downloads",
            "events_url": "https://api.github.com/repos/neovim/neovim/events",
            "fork": false,
            "forks": 5201,
            "forks_count": 5201,
            "forks_url": "https://api.github.com/repos/neovim/neovim/forks",
            "full_name": "neovim/neovim",
            "git_commits_url": "https://api.github.com/repos/neovim/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/neovim/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/neovim/neovim/git/tags{/sha}",
            "git_url": "git://github.com/neovim/neovim.git",
            "has_discussions": true,
            "has_downloads": true,
            "has_issues": true,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://neovim.io",
            "hooks_url": "https://api.github.com/repos/neovim/neovim/hooks",
            "html_url": "https://github.com/neovim/neovim",
            "id": 16408992,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/neovim/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/neovim/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/neovim/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/neovim/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/neovim/neovim/labels{/name}",
            "language": "Vim Script",
            "languages_url": "https://api.github.com/repos/neovim/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/neovim/neovim/merges",
            "milestones_url": "https://api.github.com/repos/neovim/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "MDEwOlJlcG9zaXRvcnkxNjQwODk5Mg==",
            "notifications_url": "https://api.github.com/repos/neovim/neovim/notifications{?since,all,participating}",
            "open_issues": 1728,
            "open_issues_count": 1728,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
                "events_url": "https://api.github.com/users/neovim/events{/privacy}",
                "followers_url": "https://api.github.com/users/neovim/followers",
                "following_url": "https://api.github.com/users/neovim/following{/other_user}",
                "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/neovim",
                "id": 6471485,
                "login": "neovim",
                "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
                "organizations_url": "https://api.github.com/users/neovim/orgs",
                "received_events_url": "https://api.github.com/users/neovim/received_events",
                "repos_url": "https://api.github.com/users/neovim/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
                "type": "Organization",
                "url": "https://api.github.com/users/neovim"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/neovim/neovim/pulls{/number}",
            "pushed_at": "2024-02-12T23:38:13Z",
            "releases_url": "https://api.github.com/repos/neovim/neovim/releases{/id}",
            "size": 252813,
            "ssh_url": "git@github.com:neovim/neovim.git",
            "stargazers_count": 73720,
            "stargazers_url": "https://api.github.com/repos/neovim/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/neovim/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/neovim/neovim/subscription",
            "svn_url": "https://github.com/neovim/neovim",
            "tags_url": "https://api.github.com/repos/neovim/neovim/tags",
            "teams_url": "https://api.github.com/repos/neovim/neovim/teams",
            "topics": [
                "api",
                "c",
                "lua",
                "neovim",
                "nvim",
                "text-editor",
                "vim"
            ],
            "trees_url": "https://api.github.com/repos/neovim/neovim/git/trees{/sha}",
            "updated_at": "2024-02-13T01:34:21Z",
            "url": "https://api.github.com/repos/neovim/neovim",
            "visibility": "public",
            "watchers": 73720,
            "watchers_count": 73720,
            "web_commit_signoff_required": false
        },
        "sha": "44ec4b5b18d1ba856dc3305d8dfb0e8d9507dd50",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
            "events_url": "https://api.github.com/users/neovim/events{/privacy}",
            "followers_url": "https://api.github.com/users/neovim/followers",
            "following_url": "https://api.github.com/users/neovim/following{/other_user}",
            "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/neovim",
            "id": 6471485,
            "login": "neovim",
            "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
            "organizations_url": "https://api.github.com/users/neovim/orgs",
            "received_events_url": "https://api.github.com/users/neovim/received_events",
            "repos_url": "https://api.github.com/users/neovim/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
            "type": "Organization",
            "url": "https://api.github.com/users/neovim"
        }
    },
    "body": "Running the TUI as an external process (commit https://github.com/neovim/neovim/commit/24488169564c39a506c235bf6a33b8e23a8cb528) causes issues with the reporting of startup times (`--startuptime`), as there are now two different processes running concurrently, each writing its relative times to the same file simultaneously (see issue #23036).\r\n\r\nThis can potentially mess up the formatting of the file and makes its interpretation very hard as it interleaves two startup sequences into the same timeline.\r\n\r\nThere are multiple solutions to this problem:\r\n\r\n### 1. Only report the startup times of the \"main\" process (recognized by `--embed` flag)\r\n\r\nPros:\r\n* The output file will contain a single timeline (only main process writes to the file)\r\n* Easiest to implement\r\n\r\nCons:\r\n* we will lose the startup times of the TUI process\r\n\r\n### 2. Combine the output of both processes into single timeline\r\n\r\nPros:\r\n* single timeline for both processes\r\n\r\nCons:\r\n* hard two implement as each process starts at a different time and has a different clock (hence, can't be modelled by same timeline)\r\n\r\n```\r\nclock  event\r\n0.0     main startes\r\n0.5     main does something\r\n0.0     tui starts\r\n0.7     main does something\r\n0.3     tui does something\r\n```\r\n\r\n### 3. Each process has its own timeline\r\n\r\nPros:\r\n* relatively easy to implement\r\n* no loss of information\r\n\r\nCons:\r\n* Multiple timelines instead of one\r\n\r\nThis MR implements option 3, meaning that we report the timeline of each process independently.\r\nIt introduces the following changes:\r\n\r\n1. each process writes the startup times to a memory buffer first *no concurrent writing takes place)\r\n2. when the process has finished with the initialization the buffer is flushed and appended to the report\r\n3. the report now consists of different sections, one for each process\r\n\r\nThe new report looks like this:\r\n\r\n```\r\n--- Startup times for TUI process ---\r\n\r\ntimes in msec\r\n clock   self+sourced   self:  sourced script\r\n clock   elapsed:              other lines\r\n\r\n000.006  000.006: --- NVIM STARTING ---\r\n000.428  000.422: event init\r\n000.728  000.301: early init\r\n...\r\n005.880  000.713: init highlight\r\n005.882  000.002: --- NVIM STARTED ---\r\n\r\n--- Startup times for Main process ---\r\n\r\ntimes in msec\r\n clock   self+sourced   self:  sourced script\r\n clock   elapsed:              other lines\r\n\r\n000.006  000.006: --- NVIM STARTING ---\r\n000.409  000.403: event init\r\n000.557  000.148: early init\r\n000.633  000.077: locale set\r\n...\r\n014.383  000.430: first screen update\r\n014.387  000.003: --- NVIM STARTED ---\r\n```\r\n\r\n### Implementation notes\r\n\r\nOriginally I tried to use [open_memstream](https://man7.org/linux/man-pages/man3/open_memstream.3.html) which allocates a dynamic memory buffer where each process can write its the startup times, but I had the sad realization that it doesn't exist on windows....\r\n\r\nHowever, if we can assume that all timings fit in a large enough buffer (currently set to 8k) we can use controlled buffering (setvbuf) to delay the flushing only after the initialization has concluded.\r\n\r\nFix #23036",
    "closed_at": "2024-02-09T22:56:52Z",
    "comment_data": [
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/26790#discussion_r1438595935"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/26790"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1438595935"
                }
            },
            "author_association": "MEMBER",
            "body": "Better name these `startuptime_init()` and `startuptime_finish()`",
            "commit_id": "af582524e9118d2734f229e730d6e9e6c2c1c282",
            "created_at": "2023-12-30T13:14:53Z",
            "diff_hunk": "@@ -943,3 +943,43 @@ void time_msg(const char *mesg, const proftime_T *start)\n   g_prev_time = now;\n   fprintf(time_fd, \": %s\\n\", mesg);\n }\n+\n+/// Initializes the time time_fd stream used to write startup times\n+///\n+/// @param startup_time_file the startuptime report file path\n+/// @param process_name the name of the current process to write in the report. Example: \"Main\" or \"TUI\"\n+void time_init(const char *startup_time_file, const char *process_name)",
            "html_url": "https://github.com/neovim/neovim/pull/26790#discussion_r1438595935",
            "id": 1438595935,
            "line": 952,
            "node_id": "PRRC_kwDOAPphoM5Vvztf",
            "original_commit_id": "1cfa8d63137f8c00ba9714d41c025d464510ea0c",
            "original_line": 952,
            "original_position": 18,
            "original_start_line": null,
            "path": "src/nvim/profile.c",
            "position": 18,
            "pull_request_review_id": 1799557227,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/26790",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1438595935/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-12-30T13:14:53Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1438595935",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/26790#discussion_r1438773586"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/26790"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1438773586"
                }
            },
            "author_association": "MEMBER",
            "body": "Update: I didn't realize there are already many other functions with `time_` prefix. Maybe `time_` prefix is fine then. (although not straightforward enough)",
            "commit_id": "af582524e9118d2734f229e730d6e9e6c2c1c282",
            "created_at": "2023-12-31T01:44:25Z",
            "diff_hunk": "@@ -943,3 +943,43 @@ void time_msg(const char *mesg, const proftime_T *start)\n   g_prev_time = now;\n   fprintf(time_fd, \": %s\\n\", mesg);\n }\n+\n+/// Initializes the time time_fd stream used to write startup times\n+///\n+/// @param startup_time_file the startuptime report file path\n+/// @param process_name the name of the current process to write in the report. Example: \"Main\" or \"TUI\"\n+void time_init(const char *startup_time_file, const char *process_name)",
            "html_url": "https://github.com/neovim/neovim/pull/26790#discussion_r1438773586",
            "id": 1438773586,
            "in_reply_to_id": 1438595935,
            "line": 952,
            "node_id": "PRRC_kwDOAPphoM5VwfFS",
            "original_commit_id": "1cfa8d63137f8c00ba9714d41c025d464510ea0c",
            "original_line": 952,
            "original_position": 18,
            "original_start_line": null,
            "path": "src/nvim/profile.c",
            "position": 18,
            "pull_request_review_id": 1799601846,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/26790",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1438773586/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-12-31T01:44:32Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1438773586",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/26790#discussion_r1438857634"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/26790"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1438857634"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "yeah, I agree. Just reverted.",
            "commit_id": "af582524e9118d2734f229e730d6e9e6c2c1c282",
            "created_at": "2023-12-31T10:03:39Z",
            "diff_hunk": "@@ -943,3 +943,43 @@ void time_msg(const char *mesg, const proftime_T *start)\n   g_prev_time = now;\n   fprintf(time_fd, \": %s\\n\", mesg);\n }\n+\n+/// Initializes the time time_fd stream used to write startup times\n+///\n+/// @param startup_time_file the startuptime report file path\n+/// @param process_name the name of the current process to write in the report. Example: \"Main\" or \"TUI\"\n+void time_init(const char *startup_time_file, const char *process_name)",
            "html_url": "https://github.com/neovim/neovim/pull/26790#discussion_r1438857634",
            "id": 1438857634,
            "in_reply_to_id": 1438595935,
            "line": 952,
            "node_id": "PRRC_kwDOAPphoM5Vwzmi",
            "original_commit_id": "1cfa8d63137f8c00ba9714d41c025d464510ea0c",
            "original_line": 952,
            "original_position": 18,
            "original_start_line": null,
            "path": "src/nvim/profile.c",
            "position": 18,
            "pull_request_review_id": 1799633551,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/26790",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1438857634/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-12-31T10:03:40Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1438857634",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/20794509?v=4",
                "events_url": "https://api.github.com/users/pabloariasal/events{/privacy}",
                "followers_url": "https://api.github.com/users/pabloariasal/followers",
                "following_url": "https://api.github.com/users/pabloariasal/following{/other_user}",
                "gists_url": "https://api.github.com/users/pabloariasal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/pabloariasal",
                "id": 20794509,
                "login": "pabloariasal",
                "node_id": "MDQ6VXNlcjIwNzk0NTA5",
                "organizations_url": "https://api.github.com/users/pabloariasal/orgs",
                "received_events_url": "https://api.github.com/users/pabloariasal/received_events",
                "repos_url": "https://api.github.com/users/pabloariasal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/pabloariasal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/pabloariasal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/pabloariasal"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/26790#discussion_r1452823297"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/26790"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1452823297"
                }
            },
            "author_association": "MEMBER",
            "body": "This will recognize a headless instance as the TUI process.",
            "commit_id": "af582524e9118d2734f229e730d6e9e6c2c1c282",
            "created_at": "2024-01-16T00:40:16Z",
            "diff_hunk": "@@ -1494,9 +1498,18 @@ static void init_params(mparm_T *paramp, int argc, char **argv)\n /// Initialize global startuptime file if \"--startuptime\" passed as an argument.\n static void init_startuptime(mparm_T *paramp)\n {\n+  // check if we are currently running as the tui or the main process\n+  // the main process is always called with the --embed flag\n+  bool is_main_process = false;\n+  for (int i = 1; i < paramp->argc - 1; i++) {\n+    if (STRICMP(paramp->argv[i], \"--embed\") == 0) {\n+      is_main_process = true;\n+      break;\n+    }\n+  }",
            "html_url": "https://github.com/neovim/neovim/pull/26790#discussion_r1452823297",
            "id": 1452823297,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5WmFMB",
            "original_commit_id": "8515dfdec8ebb5dec50c1d7f5fe26e17281ed63a",
            "original_line": 1508,
            "original_position": 30,
            "original_start_line": 1501,
            "path": "src/nvim/main.c",
            "position": null,
            "pull_request_review_id": 1822377160,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/26790",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1452823297/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2024-01-16T00:40:16Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1452823297",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/26790#discussion_r1452866902"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/26790"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1452866902"
                }
            },
            "author_association": "MEMBER",
            "body": "Meanwhile it's hard to decide whether Nvim will be launched in headless mode without parsing arguments, so maybe it's necessary to parse arguments earlier?",
            "commit_id": "af582524e9118d2734f229e730d6e9e6c2c1c282",
            "created_at": "2024-01-16T02:31:53Z",
            "diff_hunk": "@@ -1494,9 +1498,18 @@ static void init_params(mparm_T *paramp, int argc, char **argv)\n /// Initialize global startuptime file if \"--startuptime\" passed as an argument.\n static void init_startuptime(mparm_T *paramp)\n {\n+  // check if we are currently running as the tui or the main process\n+  // the main process is always called with the --embed flag\n+  bool is_main_process = false;\n+  for (int i = 1; i < paramp->argc - 1; i++) {\n+    if (STRICMP(paramp->argv[i], \"--embed\") == 0) {\n+      is_main_process = true;\n+      break;\n+    }\n+  }",
            "html_url": "https://github.com/neovim/neovim/pull/26790#discussion_r1452866902",
            "id": 1452866902,
            "in_reply_to_id": 1452823297,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5WmP1W",
            "original_commit_id": "8515dfdec8ebb5dec50c1d7f5fe26e17281ed63a",
            "original_line": 1508,
            "original_position": 30,
            "original_start_line": 1501,
            "path": "src/nvim/main.c",
            "position": null,
            "pull_request_review_id": 1822438735,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/26790",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1452866902/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2024-01-16T02:31:53Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1452866902",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/26790#discussion_r1456450903"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/26790"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1456450903"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "good point. Can't we just explicitly search for the `--headless` option here?\r\n\r\n```\r\nbool is_main_process = hasFlagBeenSet(\"--headless\") || hasFlagBeedSet(\"--embed\");\r\n```",
            "commit_id": "af582524e9118d2734f229e730d6e9e6c2c1c282",
            "created_at": "2024-01-17T20:35:36Z",
            "diff_hunk": "@@ -1494,9 +1498,18 @@ static void init_params(mparm_T *paramp, int argc, char **argv)\n /// Initialize global startuptime file if \"--startuptime\" passed as an argument.\n static void init_startuptime(mparm_T *paramp)\n {\n+  // check if we are currently running as the tui or the main process\n+  // the main process is always called with the --embed flag\n+  bool is_main_process = false;\n+  for (int i = 1; i < paramp->argc - 1; i++) {\n+    if (STRICMP(paramp->argv[i], \"--embed\") == 0) {\n+      is_main_process = true;\n+      break;\n+    }\n+  }",
            "html_url": "https://github.com/neovim/neovim/pull/26790#discussion_r1456450903",
            "id": 1456450903,
            "in_reply_to_id": 1452823297,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5Wz61X",
            "original_commit_id": "8515dfdec8ebb5dec50c1d7f5fe26e17281ed63a",
            "original_line": 1508,
            "original_position": 30,
            "original_start_line": 1501,
            "path": "src/nvim/main.c",
            "position": null,
            "pull_request_review_id": 1828138671,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/26790",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1456450903/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2024-01-17T20:35:37Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1456450903",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/20794509?v=4",
                "events_url": "https://api.github.com/users/pabloariasal/events{/privacy}",
                "followers_url": "https://api.github.com/users/pabloariasal/followers",
                "following_url": "https://api.github.com/users/pabloariasal/following{/other_user}",
                "gists_url": "https://api.github.com/users/pabloariasal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/pabloariasal",
                "id": 20794509,
                "login": "pabloariasal",
                "node_id": "MDQ6VXNlcjIwNzk0NTA5",
                "organizations_url": "https://api.github.com/users/pabloariasal/orgs",
                "received_events_url": "https://api.github.com/users/pabloariasal/received_events",
                "repos_url": "https://api.github.com/users/pabloariasal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/pabloariasal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/pabloariasal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/pabloariasal"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/26790#discussion_r1456571886"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/26790"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1456571886"
                }
            },
            "author_association": "MEMBER",
            "body": "No, there are other flags that imply headless mode.",
            "commit_id": "af582524e9118d2734f229e730d6e9e6c2c1c282",
            "created_at": "2024-01-17T22:32:53Z",
            "diff_hunk": "@@ -1494,9 +1498,18 @@ static void init_params(mparm_T *paramp, int argc, char **argv)\n /// Initialize global startuptime file if \"--startuptime\" passed as an argument.\n static void init_startuptime(mparm_T *paramp)\n {\n+  // check if we are currently running as the tui or the main process\n+  // the main process is always called with the --embed flag\n+  bool is_main_process = false;\n+  for (int i = 1; i < paramp->argc - 1; i++) {\n+    if (STRICMP(paramp->argv[i], \"--embed\") == 0) {\n+      is_main_process = true;\n+      break;\n+    }\n+  }",
            "html_url": "https://github.com/neovim/neovim/pull/26790#discussion_r1456571886",
            "id": 1456571886,
            "in_reply_to_id": 1452823297,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5W0YXu",
            "original_commit_id": "8515dfdec8ebb5dec50c1d7f5fe26e17281ed63a",
            "original_line": 1508,
            "original_position": 30,
            "original_start_line": 1501,
            "path": "src/nvim/main.c",
            "position": null,
            "pull_request_review_id": 1828330465,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/26790",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1456571886/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2024-01-17T22:32:53Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1456571886",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/26790#discussion_r1459611151"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/26790"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1459611151"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "In that case the easiest solution would probably be to rename the process in the report to something like \"Primary/TUI\". In that case in case of headless mode this will be the primary process, otherwise its the TUI process.",
            "commit_id": "af582524e9118d2734f229e730d6e9e6c2c1c282",
            "created_at": "2024-01-19T19:26:36Z",
            "diff_hunk": "@@ -1494,9 +1498,18 @@ static void init_params(mparm_T *paramp, int argc, char **argv)\n /// Initialize global startuptime file if \"--startuptime\" passed as an argument.\n static void init_startuptime(mparm_T *paramp)\n {\n+  // check if we are currently running as the tui or the main process\n+  // the main process is always called with the --embed flag\n+  bool is_main_process = false;\n+  for (int i = 1; i < paramp->argc - 1; i++) {\n+    if (STRICMP(paramp->argv[i], \"--embed\") == 0) {\n+      is_main_process = true;\n+      break;\n+    }\n+  }",
            "html_url": "https://github.com/neovim/neovim/pull/26790#discussion_r1459611151",
            "id": 1459611151,
            "in_reply_to_id": 1452823297,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5W_-YP",
            "original_commit_id": "8515dfdec8ebb5dec50c1d7f5fe26e17281ed63a",
            "original_line": 1508,
            "original_position": 30,
            "original_start_line": 1501,
            "path": "src/nvim/main.c",
            "position": null,
            "pull_request_review_id": 1833531106,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/26790",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1459611151/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2024-01-19T19:26:36Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1459611151",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/20794509?v=4",
                "events_url": "https://api.github.com/users/pabloariasal/events{/privacy}",
                "followers_url": "https://api.github.com/users/pabloariasal/followers",
                "following_url": "https://api.github.com/users/pabloariasal/following{/other_user}",
                "gists_url": "https://api.github.com/users/pabloariasal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/pabloariasal",
                "id": 20794509,
                "login": "pabloariasal",
                "node_id": "MDQ6VXNlcjIwNzk0NTA5",
                "organizations_url": "https://api.github.com/users/pabloariasal/orgs",
                "received_events_url": "https://api.github.com/users/pabloariasal/received_events",
                "repos_url": "https://api.github.com/users/pabloariasal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/pabloariasal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/pabloariasal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/pabloariasal"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/26790#discussion_r1460112981"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/26790"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1460112981"
                }
            },
            "author_association": "MEMBER",
            "body": "Then the variable should be called `is_embedded_process` instead of `is_main_process`.",
            "commit_id": "af582524e9118d2734f229e730d6e9e6c2c1c282",
            "created_at": "2024-01-20T01:14:15Z",
            "diff_hunk": "@@ -1494,9 +1498,18 @@ static void init_params(mparm_T *paramp, int argc, char **argv)\n /// Initialize global startuptime file if \"--startuptime\" passed as an argument.\n static void init_startuptime(mparm_T *paramp)\n {\n+  // check if we are currently running as the tui or the main process\n+  // the main process is always called with the --embed flag\n+  bool is_main_process = false;\n+  for (int i = 1; i < paramp->argc - 1; i++) {\n+    if (STRICMP(paramp->argv[i], \"--embed\") == 0) {\n+      is_main_process = true;\n+      break;\n+    }\n+  }",
            "html_url": "https://github.com/neovim/neovim/pull/26790#discussion_r1460112981",
            "id": 1460112981,
            "in_reply_to_id": 1452823297,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5XB45V",
            "original_commit_id": "8515dfdec8ebb5dec50c1d7f5fe26e17281ed63a",
            "original_line": 1508,
            "original_position": 30,
            "original_start_line": 1501,
            "path": "src/nvim/main.c",
            "position": null,
            "pull_request_review_id": 1834197384,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/26790",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1460112981/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2024-01-20T01:14:16Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1460112981",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/26790#discussion_r1460317795"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/26790"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1460317795"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "yes, agree with you",
            "commit_id": "af582524e9118d2734f229e730d6e9e6c2c1c282",
            "created_at": "2024-01-20T09:16:21Z",
            "diff_hunk": "@@ -1494,9 +1498,18 @@ static void init_params(mparm_T *paramp, int argc, char **argv)\n /// Initialize global startuptime file if \"--startuptime\" passed as an argument.\n static void init_startuptime(mparm_T *paramp)\n {\n+  // check if we are currently running as the tui or the main process\n+  // the main process is always called with the --embed flag\n+  bool is_main_process = false;\n+  for (int i = 1; i < paramp->argc - 1; i++) {\n+    if (STRICMP(paramp->argv[i], \"--embed\") == 0) {\n+      is_main_process = true;\n+      break;\n+    }\n+  }",
            "html_url": "https://github.com/neovim/neovim/pull/26790#discussion_r1460317795",
            "id": 1460317795,
            "in_reply_to_id": 1452823297,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5XCq5j",
            "original_commit_id": "8515dfdec8ebb5dec50c1d7f5fe26e17281ed63a",
            "original_line": 1508,
            "original_position": 30,
            "original_start_line": 1501,
            "path": "src/nvim/main.c",
            "position": null,
            "pull_request_review_id": 1834649020,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/26790",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1460317795/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2024-01-20T09:16:21Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1460317795",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/20794509?v=4",
                "events_url": "https://api.github.com/users/pabloariasal/events{/privacy}",
                "followers_url": "https://api.github.com/users/pabloariasal/followers",
                "following_url": "https://api.github.com/users/pabloariasal/following{/other_user}",
                "gists_url": "https://api.github.com/users/pabloariasal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/pabloariasal",
                "id": 20794509,
                "login": "pabloariasal",
                "node_id": "MDQ6VXNlcjIwNzk0NTA5",
                "organizations_url": "https://api.github.com/users/pabloariasal/orgs",
                "received_events_url": "https://api.github.com/users/pabloariasal/received_events",
                "repos_url": "https://api.github.com/users/pabloariasal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/pabloariasal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/pabloariasal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/pabloariasal"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/26790#discussion_r1460338481"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/26790"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1460338481"
                }
            },
            "author_association": "MEMBER",
            "body": "It's \"embedded\", not \"embeded\"",
            "commit_id": "af582524e9118d2734f229e730d6e9e6c2c1c282",
            "created_at": "2024-01-20T09:56:06Z",
            "diff_hunk": "@@ -1494,9 +1498,18 @@ static void init_params(mparm_T *paramp, int argc, char **argv)\n /// Initialize global startuptime file if \"--startuptime\" passed as an argument.\n static void init_startuptime(mparm_T *paramp)\n {\n+  // check if we are currently running as the tui or the main process\n+  // the main process is always called with the --embed flag\n+  bool is_main_process = false;\n+  for (int i = 1; i < paramp->argc - 1; i++) {\n+    if (STRICMP(paramp->argv[i], \"--embed\") == 0) {\n+      is_main_process = true;\n+      break;\n+    }\n+  }",
            "html_url": "https://github.com/neovim/neovim/pull/26790#discussion_r1460338481",
            "id": 1460338481,
            "in_reply_to_id": 1452823297,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5XCv8x",
            "original_commit_id": "8515dfdec8ebb5dec50c1d7f5fe26e17281ed63a",
            "original_line": 1508,
            "original_position": 30,
            "original_start_line": 1501,
            "path": "src/nvim/main.c",
            "position": null,
            "pull_request_review_id": 1834652925,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/26790",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1460338481/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2024-01-20T09:56:06Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1460338481",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/26790#discussion_r1460418374"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/26790"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1460418374"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "oops, english is hard ;)",
            "commit_id": "af582524e9118d2734f229e730d6e9e6c2c1c282",
            "created_at": "2024-01-20T12:40:04Z",
            "diff_hunk": "@@ -1494,9 +1498,18 @@ static void init_params(mparm_T *paramp, int argc, char **argv)\n /// Initialize global startuptime file if \"--startuptime\" passed as an argument.\n static void init_startuptime(mparm_T *paramp)\n {\n+  // check if we are currently running as the tui or the main process\n+  // the main process is always called with the --embed flag\n+  bool is_main_process = false;\n+  for (int i = 1; i < paramp->argc - 1; i++) {\n+    if (STRICMP(paramp->argv[i], \"--embed\") == 0) {\n+      is_main_process = true;\n+      break;\n+    }\n+  }",
            "html_url": "https://github.com/neovim/neovim/pull/26790#discussion_r1460418374",
            "id": 1460418374,
            "in_reply_to_id": 1452823297,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5XDDdG",
            "original_commit_id": "8515dfdec8ebb5dec50c1d7f5fe26e17281ed63a",
            "original_line": 1508,
            "original_position": 30,
            "original_start_line": 1501,
            "path": "src/nvim/main.c",
            "position": null,
            "pull_request_review_id": 1834671043,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/26790",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1460418374/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2024-01-20T12:40:04Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1460418374",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/20794509?v=4",
                "events_url": "https://api.github.com/users/pabloariasal/events{/privacy}",
                "followers_url": "https://api.github.com/users/pabloariasal/followers",
                "following_url": "https://api.github.com/users/pabloariasal/following{/other_user}",
                "gists_url": "https://api.github.com/users/pabloariasal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/pabloariasal",
                "id": 20794509,
                "login": "pabloariasal",
                "node_id": "MDQ6VXNlcjIwNzk0NTA5",
                "organizations_url": "https://api.github.com/users/pabloariasal/orgs",
                "received_events_url": "https://api.github.com/users/pabloariasal/received_events",
                "repos_url": "https://api.github.com/users/pabloariasal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/pabloariasal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/pabloariasal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/pabloariasal"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/26790#discussion_r1460424525"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/26790"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1460424525"
                }
            },
            "author_association": "MEMBER",
            "body": "I think this comment can just be deleted. It's quite obvious what the code does.",
            "commit_id": "af582524e9118d2734f229e730d6e9e6c2c1c282",
            "created_at": "2024-01-20T12:53:49Z",
            "diff_hunk": "@@ -1494,9 +1498,18 @@ static void init_params(mparm_T *paramp, int argc, char **argv)\n /// Initialize global startuptime file if \"--startuptime\" passed as an argument.\n static void init_startuptime(mparm_T *paramp)\n {\n+  // check if we are currently running as the tui or the main process\n+  // the main process is always called with the --embed flag",
            "html_url": "https://github.com/neovim/neovim/pull/26790#discussion_r1460424525",
            "id": 1460424525,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5XDE9N",
            "original_commit_id": "a3253c83c1c6daabc0241d35083e5344590adf93",
            "original_line": 1502,
            "original_position": 23,
            "original_start_line": 1501,
            "path": "src/nvim/main.c",
            "position": null,
            "pull_request_review_id": 1834672425,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/26790",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1460424525/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2024-01-20T12:53:49Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1460424525",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/26790#discussion_r1460424739"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/26790"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1460424739"
                }
            },
            "author_association": "MEMBER",
            "body": "This comment now also needs change.",
            "commit_id": "af582524e9118d2734f229e730d6e9e6c2c1c282",
            "created_at": "2024-01-20T12:54:11Z",
            "diff_hunk": "@@ -944,3 +944,43 @@ void time_msg(const char *mesg, const proftime_T *start)\n   g_prev_time = now;\n   fprintf(time_fd, \": %s\\n\", mesg);\n }\n+\n+/// Initializes the time time_fd stream used to write startup times\n+///\n+/// @param startup_time_file the startuptime report file path\n+/// @param process_name the name of the current process to write in the report. Example: \"Main\" or \"TUI\"",
            "html_url": "https://github.com/neovim/neovim/pull/26790#discussion_r1460424739",
            "id": 1460424739,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5XDFAj",
            "original_commit_id": "a3253c83c1c6daabc0241d35083e5344590adf93",
            "original_line": 951,
            "original_position": 17,
            "original_start_line": null,
            "path": "src/nvim/profile.c",
            "position": null,
            "pull_request_review_id": 1834672453,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/26790",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1460424739/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-01-20T12:54:11Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1460424739",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/26790#discussion_r1460972610"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/26790"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1460972610"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "done",
            "commit_id": "af582524e9118d2734f229e730d6e9e6c2c1c282",
            "created_at": "2024-01-21T16:18:09Z",
            "diff_hunk": "@@ -1494,9 +1498,18 @@ static void init_params(mparm_T *paramp, int argc, char **argv)\n /// Initialize global startuptime file if \"--startuptime\" passed as an argument.\n static void init_startuptime(mparm_T *paramp)\n {\n+  // check if we are currently running as the tui or the main process\n+  // the main process is always called with the --embed flag",
            "html_url": "https://github.com/neovim/neovim/pull/26790#discussion_r1460972610",
            "id": 1460972610,
            "in_reply_to_id": 1460424525,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5XFKxC",
            "original_commit_id": "a3253c83c1c6daabc0241d35083e5344590adf93",
            "original_line": 1502,
            "original_position": 23,
            "original_start_line": 1501,
            "path": "src/nvim/main.c",
            "position": null,
            "pull_request_review_id": 1835373390,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/26790",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1460972610/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2024-01-21T16:18:09Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1460972610",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/20794509?v=4",
                "events_url": "https://api.github.com/users/pabloariasal/events{/privacy}",
                "followers_url": "https://api.github.com/users/pabloariasal/followers",
                "following_url": "https://api.github.com/users/pabloariasal/following{/other_user}",
                "gists_url": "https://api.github.com/users/pabloariasal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/pabloariasal",
                "id": 20794509,
                "login": "pabloariasal",
                "node_id": "MDQ6VXNlcjIwNzk0NTA5",
                "organizations_url": "https://api.github.com/users/pabloariasal/orgs",
                "received_events_url": "https://api.github.com/users/pabloariasal/received_events",
                "repos_url": "https://api.github.com/users/pabloariasal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/pabloariasal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/pabloariasal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/pabloariasal"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/26790#discussion_r1460973272"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/26790"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1460973272"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "done",
            "commit_id": "af582524e9118d2734f229e730d6e9e6c2c1c282",
            "created_at": "2024-01-21T16:19:26Z",
            "diff_hunk": "@@ -944,3 +944,43 @@ void time_msg(const char *mesg, const proftime_T *start)\n   g_prev_time = now;\n   fprintf(time_fd, \": %s\\n\", mesg);\n }\n+\n+/// Initializes the time time_fd stream used to write startup times\n+///\n+/// @param startup_time_file the startuptime report file path\n+/// @param process_name the name of the current process to write in the report. Example: \"Main\" or \"TUI\"",
            "html_url": "https://github.com/neovim/neovim/pull/26790#discussion_r1460973272",
            "id": 1460973272,
            "in_reply_to_id": 1460424739,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5XFK7Y",
            "original_commit_id": "a3253c83c1c6daabc0241d35083e5344590adf93",
            "original_line": 951,
            "original_position": 17,
            "original_start_line": null,
            "path": "src/nvim/profile.c",
            "position": null,
            "pull_request_review_id": 1835373569,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/26790",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1460973272/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-01-21T16:19:26Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1460973272",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/20794509?v=4",
                "events_url": "https://api.github.com/users/pabloariasal/events{/privacy}",
                "followers_url": "https://api.github.com/users/pabloariasal/followers",
                "following_url": "https://api.github.com/users/pabloariasal/following{/other_user}",
                "gists_url": "https://api.github.com/users/pabloariasal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/pabloariasal",
                "id": 20794509,
                "login": "pabloariasal",
                "node_id": "MDQ6VXNlcjIwNzk0NTA5",
                "organizations_url": "https://api.github.com/users/pabloariasal/orgs",
                "received_events_url": "https://api.github.com/users/pabloariasal/received_events",
                "repos_url": "https://api.github.com/users/pabloariasal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/pabloariasal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/pabloariasal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/pabloariasal"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/26790#discussion_r1461147772"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/26790"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1461147772"
                }
            },
            "author_association": "MEMBER",
            "body": "Avoid unnecessary entropy. The option is named `--startuptime`.\r\n```suggestion\r\nEXTERN char *startuptime_buf INIT(= NULL); // --startuptime buffer\r\n```",
            "commit_id": "af582524e9118d2734f229e730d6e9e6c2c1c282",
            "created_at": "2024-01-21T21:38:14Z",
            "diff_hunk": "@@ -977,6 +977,8 @@ EXTERN const char bot_top_msg[] INIT(= N_(\"search hit BOTTOM, continuing at TOP\"\n EXTERN const char line_msg[] INIT(= N_(\" line \"));\n \n EXTERN FILE *time_fd INIT(= NULL);  // where to write startup timing\n+#define STARTUP_TIME_BUF_SIZE 8192\n+EXTERN char *startup_time_buf INIT(= NULL); // startup timing buffer",
            "html_url": "https://github.com/neovim/neovim/pull/26790#discussion_r1461147772",
            "id": 1461147772,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5XF1h8",
            "original_commit_id": "33ba30854d9a509fc10637aa2daf22196fad3599",
            "original_line": 981,
            "original_position": 5,
            "original_start_line": null,
            "path": "src/nvim/globals.h",
            "position": null,
            "pull_request_review_id": 1835456959,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/26790",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1461147772/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-01-21T21:38:15Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1461147772",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/26790#discussion_r1461148014"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/26790"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1461148014"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n |--startuptime| reports the startup times for both processes (TUI + server) as separate sections.\r\n```",
            "commit_id": "af582524e9118d2734f229e730d6e9e6c2c1c282",
            "created_at": "2024-01-21T21:38:36Z",
            "diff_hunk": "@@ -393,6 +393,8 @@ The following changes to existing APIs or features add new behavior.\n  |:checkhealth| buffer can now be opened in a split window using modifiers like\n   |:vertical|, |:horizontal| and |:botright|.\n \n+ `--startuptime` now reports the startup times per process individually.",
            "html_url": "https://github.com/neovim/neovim/pull/26790#discussion_r1461148014",
            "id": 1461148014,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5XF1lu",
            "original_commit_id": "33ba30854d9a509fc10637aa2daf22196fad3599",
            "original_line": 396,
            "original_position": 4,
            "original_start_line": null,
            "path": "runtime/doc/news.txt",
            "position": null,
            "pull_request_review_id": 1835456992,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/26790",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1461148014/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-01-21T21:39:29Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1461148014",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/26790#discussion_r1461149911"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/26790"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1461149911"
                }
            },
            "author_association": "MEMBER",
            "body": "`init_startuptime` is called after `init_params`. Can you use the existing `embedded_mode` instead of re-scanning the args?",
            "commit_id": "af582524e9118d2734f229e730d6e9e6c2c1c282",
            "created_at": "2024-01-21T21:41:44Z",
            "diff_hunk": "@@ -1494,9 +1498,16 @@ static void init_params(mparm_T *paramp, int argc, char **argv)\n /// Initialize global startuptime file if \"--startuptime\" passed as an argument.\n static void init_startuptime(mparm_T *paramp)\n {\n+  bool is_embedded_process = false;\n+  for (int i = 1; i < paramp->argc - 1; i++) {\n+    if (STRICMP(paramp->argv[i], \"--embed\") == 0) {\n+      is_embedded_process = true;",
            "html_url": "https://github.com/neovim/neovim/pull/26790#discussion_r1461149911",
            "id": 1461149911,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5XF2DX",
            "original_commit_id": "33ba30854d9a509fc10637aa2daf22196fad3599",
            "original_line": 1504,
            "original_position": 25,
            "original_start_line": null,
            "path": "src/nvim/main.c",
            "position": null,
            "pull_request_review_id": 1835457441,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/26790",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1461149911/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-01-21T21:41:44Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1461149911",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/26790#discussion_r1461150141"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/26790"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1461150141"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n      time_init(paramp->argv[i + 1], embedded_mode ? \"Embedded\" : \"Primary/TUI\");\r\n```",
            "commit_id": "af582524e9118d2734f229e730d6e9e6c2c1c282",
            "created_at": "2024-01-21T21:42:05Z",
            "diff_hunk": "@@ -1494,9 +1498,16 @@ static void init_params(mparm_T *paramp, int argc, char **argv)\n /// Initialize global startuptime file if \"--startuptime\" passed as an argument.\n static void init_startuptime(mparm_T *paramp)\n {\n+  bool is_embedded_process = false;\n+  for (int i = 1; i < paramp->argc - 1; i++) {\n+    if (STRICMP(paramp->argv[i], \"--embed\") == 0) {\n+      is_embedded_process = true;\n+      break;\n+    }\n+  }\n   for (int i = 1; i < paramp->argc - 1; i++) {\n     if (STRICMP(paramp->argv[i], \"--startuptime\") == 0) {\n-      time_fd = fopen(paramp->argv[i + 1], \"a\");\n+      time_init(paramp->argv[i + 1], is_embedded_process ? \"Embedded\" : \"Primary/TUI\");",
            "html_url": "https://github.com/neovim/neovim/pull/26790#discussion_r1461150141",
            "id": 1461150141,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5XF2G9",
            "original_commit_id": "33ba30854d9a509fc10637aa2daf22196fad3599",
            "original_line": 1510,
            "original_position": 32,
            "original_start_line": null,
            "path": "src/nvim/main.c",
            "position": null,
            "pull_request_review_id": 1835457756,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/26790",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1461150141/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-01-21T21:42:05Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1461150141",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/26790#discussion_r1461151431"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/26790"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1461151431"
                }
            },
            "author_association": "MEMBER",
            "body": "Is there any more insight (in the code comment) that can be given in the comment here about how `setvbuf` is being leveraged? It's somewhat subtle (and not common in the codebase).",
            "commit_id": "af582524e9118d2734f229e730d6e9e6c2c1c282",
            "created_at": "2024-01-21T21:44:40Z",
            "diff_hunk": "@@ -944,3 +944,43 @@ void time_msg(const char *mesg, const proftime_T *start)\n   g_prev_time = now;\n   fprintf(time_fd, \": %s\\n\", mesg);\n }\n+\n+/// Initializes the time time_fd stream used to write startup times\n+///\n+/// @param startup_time_file the startuptime report file path\n+/// @param process_name the name of the current process to write in the report.\n+void time_init(const char *startup_time_file, const char *process_name)\n+{\n+  time_fd = fopen(startup_time_file, \"a\");\n+  if (time_fd == NULL) {\n+    semsg(_(e_notopen), startup_time_file);\n+    return;\n+  }\n+  startup_time_buf = xmalloc(sizeof(char) * (STARTUP_TIME_BUF_SIZE + 1));\n+  // set a large buffer so that flushing only happens after initialization\n+  if (setvbuf(time_fd, startup_time_buf, _IOFBF, STARTUP_TIME_BUF_SIZE + 1) != 0) {",
            "html_url": "https://github.com/neovim/neovim/pull/26790#discussion_r1461151431",
            "id": 1461151431,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5XF2bH",
            "original_commit_id": "33ba30854d9a509fc10637aa2daf22196fad3599",
            "original_line": 961,
            "original_position": 27,
            "original_start_line": null,
            "path": "src/nvim/profile.c",
            "position": null,
            "pull_request_review_id": 1835458422,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/26790",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1461151431/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-01-21T21:44:57Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1461151431",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/26790#discussion_r1461156240"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/26790"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1461156240"
                }
            },
            "author_association": "MEMBER",
            "body": "might as well move this into `time_finish` also? But leave the comment lines here.",
            "commit_id": "af582524e9118d2734f229e730d6e9e6c2c1c282",
            "created_at": "2024-01-21T21:49:18Z",
            "diff_hunk": "@@ -1455,9 +1455,7 @@ static int normal_check(VimState *state)\n     // has been done, close any file for startup messages.\n     if (time_fd != NULL) {\n       TIME_MSG(\"first screen update\");",
            "html_url": "https://github.com/neovim/neovim/pull/26790#discussion_r1461156240",
            "id": 1461156240,
            "line": 1453,
            "node_id": "PRRC_kwDOAPphoM5XF3mQ",
            "original_commit_id": "33ba30854d9a509fc10637aa2daf22196fad3599",
            "original_line": 1453,
            "original_position": 3,
            "original_start_line": 1456,
            "path": "src/nvim/normal.c",
            "position": 3,
            "pull_request_review_id": 1835460812,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/26790",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1461156240/reactions"
            },
            "side": "RIGHT",
            "start_line": 1452,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2024-01-21T21:49:33Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1461156240",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/26790#discussion_r1462447386"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/26790"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1462447386"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "just for my own understanding, `|foo|` is a link to the help, right? How can I know when I need to use `|foo|`?  ",
            "commit_id": "af582524e9118d2734f229e730d6e9e6c2c1c282",
            "created_at": "2024-01-22T21:33:11Z",
            "diff_hunk": "@@ -393,6 +393,8 @@ The following changes to existing APIs or features add new behavior.\n  |:checkhealth| buffer can now be opened in a split window using modifiers like\n   |:vertical|, |:horizontal| and |:botright|.\n \n+ `--startuptime` now reports the startup times per process individually.",
            "html_url": "https://github.com/neovim/neovim/pull/26790#discussion_r1462447386",
            "id": 1462447386,
            "in_reply_to_id": 1461148014,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5XKy0a",
            "original_commit_id": "33ba30854d9a509fc10637aa2daf22196fad3599",
            "original_line": 396,
            "original_position": 4,
            "original_start_line": null,
            "path": "runtime/doc/news.txt",
            "position": null,
            "pull_request_review_id": 1837414826,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/26790",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1462447386/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-01-22T21:33:11Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1462447386",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/20794509?v=4",
                "events_url": "https://api.github.com/users/pabloariasal/events{/privacy}",
                "followers_url": "https://api.github.com/users/pabloariasal/followers",
                "following_url": "https://api.github.com/users/pabloariasal/following{/other_user}",
                "gists_url": "https://api.github.com/users/pabloariasal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/pabloariasal",
                "id": 20794509,
                "login": "pabloariasal",
                "node_id": "MDQ6VXNlcjIwNzk0NTA5",
                "organizations_url": "https://api.github.com/users/pabloariasal/orgs",
                "received_events_url": "https://api.github.com/users/pabloariasal/received_events",
                "repos_url": "https://api.github.com/users/pabloariasal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/pabloariasal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/pabloariasal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/pabloariasal"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/26790#discussion_r1463781471"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/26790"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1463781471"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "maybe I'm confused but `init_params` just initializes the `paramp` struct to default values and doesn't actually parse anything.\r\n\r\n```\r\nstatic void init_params(mparm_T *paramp, int argc, char **argv)\r\n{\r\n  CLEAR_POINTER(paramp);\r\n  paramp->argc = argc;\r\n  paramp->argv = argv;\r\n  paramp->use_debug_break_level = -1;\r\n  paramp->window_count = -1;\r\n  paramp->listen_addr = NULL;\r\n  paramp->server_addr = NULL;\r\n  paramp->remote = 0;\r\n  paramp->luaf = NULL;\r\n  paramp->lua_arg0 = -1;\r\n}\r\n```\r\nhttps://github.com/pabloariasal/neovim/blob/fix_startup_time/src/nvim/main.c#L1484",
            "commit_id": "af582524e9118d2734f229e730d6e9e6c2c1c282",
            "created_at": "2024-01-23T18:27:18Z",
            "diff_hunk": "@@ -1494,9 +1498,16 @@ static void init_params(mparm_T *paramp, int argc, char **argv)\n /// Initialize global startuptime file if \"--startuptime\" passed as an argument.\n static void init_startuptime(mparm_T *paramp)\n {\n+  bool is_embedded_process = false;\n+  for (int i = 1; i < paramp->argc - 1; i++) {\n+    if (STRICMP(paramp->argv[i], \"--embed\") == 0) {\n+      is_embedded_process = true;",
            "html_url": "https://github.com/neovim/neovim/pull/26790#discussion_r1463781471",
            "id": 1463781471,
            "in_reply_to_id": 1461149911,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5XP4hf",
            "original_commit_id": "33ba30854d9a509fc10637aa2daf22196fad3599",
            "original_line": 1504,
            "original_position": 25,
            "original_start_line": null,
            "path": "src/nvim/main.c",
            "position": null,
            "pull_request_review_id": 1839591535,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/26790",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1463781471/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-01-23T18:27:18Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1463781471",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/20794509?v=4",
                "events_url": "https://api.github.com/users/pabloariasal/events{/privacy}",
                "followers_url": "https://api.github.com/users/pabloariasal/followers",
                "following_url": "https://api.github.com/users/pabloariasal/following{/other_user}",
                "gists_url": "https://api.github.com/users/pabloariasal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/pabloariasal",
                "id": 20794509,
                "login": "pabloariasal",
                "node_id": "MDQ6VXNlcjIwNzk0NTA5",
                "organizations_url": "https://api.github.com/users/pabloariasal/orgs",
                "received_events_url": "https://api.github.com/users/pabloariasal/received_events",
                "repos_url": "https://api.github.com/users/pabloariasal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/pabloariasal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/pabloariasal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/pabloariasal"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/26790#discussion_r1463802573"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/26790"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1463802573"
                }
            },
            "author_association": "MEMBER",
            "body": "Ah sorry I was thinking of `command_line_scan`. \r\n\r\nI guess we can't move this down, since the profiling needs to start here. We could set `embedded_mode` here and remove the duplicate logic from `command_line_scan` ... not sure if that helps anything. \r\n\r\nCan leave this as-is for now.",
            "commit_id": "af582524e9118d2734f229e730d6e9e6c2c1c282",
            "created_at": "2024-01-23T18:32:49Z",
            "diff_hunk": "@@ -1494,9 +1498,16 @@ static void init_params(mparm_T *paramp, int argc, char **argv)\n /// Initialize global startuptime file if \"--startuptime\" passed as an argument.\n static void init_startuptime(mparm_T *paramp)\n {\n+  bool is_embedded_process = false;\n+  for (int i = 1; i < paramp->argc - 1; i++) {\n+    if (STRICMP(paramp->argv[i], \"--embed\") == 0) {\n+      is_embedded_process = true;",
            "html_url": "https://github.com/neovim/neovim/pull/26790#discussion_r1463802573",
            "id": 1463802573,
            "in_reply_to_id": 1461149911,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5XP9rN",
            "original_commit_id": "33ba30854d9a509fc10637aa2daf22196fad3599",
            "original_line": 1504,
            "original_position": 25,
            "original_start_line": null,
            "path": "src/nvim/main.c",
            "position": null,
            "pull_request_review_id": 1839620823,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/26790",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1463802573/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-01-23T18:32:50Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1463802573",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/26790#discussion_r1463804653"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/26790"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1463804653"
                }
            },
            "author_association": "MEMBER",
            "body": "Is \"primary\" used anywhere else? Don't think that will help anyone by introducing extra jargon.\r\n```suggestion\r\n      time_init(paramp->argv[i + 1], embedded_mode ? \"Embedded/server\" : \"TUI/client\");\r\n```",
            "commit_id": "af582524e9118d2734f229e730d6e9e6c2c1c282",
            "created_at": "2024-01-23T18:33:44Z",
            "diff_hunk": "@@ -1494,9 +1498,16 @@ static void init_params(mparm_T *paramp, int argc, char **argv)\n /// Initialize global startuptime file if \"--startuptime\" passed as an argument.\n static void init_startuptime(mparm_T *paramp)\n {\n+  bool is_embedded_process = false;\n+  for (int i = 1; i < paramp->argc - 1; i++) {\n+    if (STRICMP(paramp->argv[i], \"--embed\") == 0) {\n+      is_embedded_process = true;\n+      break;\n+    }\n+  }\n   for (int i = 1; i < paramp->argc - 1; i++) {\n     if (STRICMP(paramp->argv[i], \"--startuptime\") == 0) {\n-      time_fd = fopen(paramp->argv[i + 1], \"a\");\n+      time_init(paramp->argv[i + 1], embedded_mode ? \"Embedded\" : \"Primary/TUI\");",
            "html_url": "https://github.com/neovim/neovim/pull/26790#discussion_r1463804653",
            "id": 1463804653,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5XP-Lt",
            "original_commit_id": "6c8741e65d6f72c6ee259abc3165e14302f93715",
            "original_line": 1510,
            "original_position": 32,
            "original_start_line": null,
            "path": "src/nvim/main.c",
            "position": null,
            "pull_request_review_id": 1839624077,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/26790",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1463804653/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-01-23T18:34:23Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1463804653",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/26790#discussion_r1463809292"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/26790"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1463809292"
                }
            },
            "author_association": "MEMBER",
            "body": "the help docs give lots of examples :) \r\n\r\nuse `|tag|` whenever there is a `*tag*` defined somewhere.",
            "commit_id": "af582524e9118d2734f229e730d6e9e6c2c1c282",
            "created_at": "2024-01-23T18:35:37Z",
            "diff_hunk": "@@ -393,6 +393,8 @@ The following changes to existing APIs or features add new behavior.\n  |:checkhealth| buffer can now be opened in a split window using modifiers like\n   |:vertical|, |:horizontal| and |:botright|.\n \n+ `--startuptime` now reports the startup times per process individually.",
            "html_url": "https://github.com/neovim/neovim/pull/26790#discussion_r1463809292",
            "id": 1463809292,
            "in_reply_to_id": 1461148014,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5XP_UM",
            "original_commit_id": "33ba30854d9a509fc10637aa2daf22196fad3599",
            "original_line": 396,
            "original_position": 4,
            "original_start_line": null,
            "path": "runtime/doc/news.txt",
            "position": null,
            "pull_request_review_id": 1839630898,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/26790",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1463809292/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-01-23T18:35:37Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1463809292",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/26790#discussion_r1463850317"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/26790"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1463850317"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "yes, I was very unsure on how to call the processes in the report. My first approach was to name \"TUI\" the client process and \"Main\" the server, however @zeertzjq correctly realized that the name \"TUI\" breaks the moment nvim is invoked in headless mode. That's why I started to think in more general terms like, \"primary\" or \"secondary\" process, to account for the headless scenario.",
            "commit_id": "af582524e9118d2734f229e730d6e9e6c2c1c282",
            "created_at": "2024-01-23T18:58:15Z",
            "diff_hunk": "@@ -1494,9 +1498,16 @@ static void init_params(mparm_T *paramp, int argc, char **argv)\n /// Initialize global startuptime file if \"--startuptime\" passed as an argument.\n static void init_startuptime(mparm_T *paramp)\n {\n+  bool is_embedded_process = false;\n+  for (int i = 1; i < paramp->argc - 1; i++) {\n+    if (STRICMP(paramp->argv[i], \"--embed\") == 0) {\n+      is_embedded_process = true;\n+      break;\n+    }\n+  }\n   for (int i = 1; i < paramp->argc - 1; i++) {\n     if (STRICMP(paramp->argv[i], \"--startuptime\") == 0) {\n-      time_fd = fopen(paramp->argv[i + 1], \"a\");\n+      time_init(paramp->argv[i + 1], embedded_mode ? \"Embedded\" : \"Primary/TUI\");",
            "html_url": "https://github.com/neovim/neovim/pull/26790#discussion_r1463850317",
            "id": 1463850317,
            "in_reply_to_id": 1463804653,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5XQJVN",
            "original_commit_id": "6c8741e65d6f72c6ee259abc3165e14302f93715",
            "original_line": 1510,
            "original_position": 32,
            "original_start_line": null,
            "path": "src/nvim/main.c",
            "position": null,
            "pull_request_review_id": 1839693568,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/26790",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1463850317/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-01-23T18:58:15Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1463850317",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/20794509?v=4",
                "events_url": "https://api.github.com/users/pabloariasal/events{/privacy}",
                "followers_url": "https://api.github.com/users/pabloariasal/followers",
                "following_url": "https://api.github.com/users/pabloariasal/following{/other_user}",
                "gists_url": "https://api.github.com/users/pabloariasal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/pabloariasal",
                "id": 20794509,
                "login": "pabloariasal",
                "node_id": "MDQ6VXNlcjIwNzk0NTA5",
                "organizations_url": "https://api.github.com/users/pabloariasal/orgs",
                "received_events_url": "https://api.github.com/users/pabloariasal/received_events",
                "repos_url": "https://api.github.com/users/pabloariasal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/pabloariasal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/pabloariasal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/pabloariasal"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/26790#discussion_r1463897555"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/26790"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1463897555"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "tried to give more information in the comment",
            "commit_id": "af582524e9118d2734f229e730d6e9e6c2c1c282",
            "created_at": "2024-01-23T19:33:25Z",
            "diff_hunk": "@@ -944,3 +944,43 @@ void time_msg(const char *mesg, const proftime_T *start)\n   g_prev_time = now;\n   fprintf(time_fd, \": %s\\n\", mesg);\n }\n+\n+/// Initializes the time time_fd stream used to write startup times\n+///\n+/// @param startup_time_file the startuptime report file path\n+/// @param process_name the name of the current process to write in the report.\n+void time_init(const char *startup_time_file, const char *process_name)\n+{\n+  time_fd = fopen(startup_time_file, \"a\");\n+  if (time_fd == NULL) {\n+    semsg(_(e_notopen), startup_time_file);\n+    return;\n+  }\n+  startup_time_buf = xmalloc(sizeof(char) * (STARTUP_TIME_BUF_SIZE + 1));\n+  // set a large buffer so that flushing only happens after initialization\n+  if (setvbuf(time_fd, startup_time_buf, _IOFBF, STARTUP_TIME_BUF_SIZE + 1) != 0) {",
            "html_url": "https://github.com/neovim/neovim/pull/26790#discussion_r1463897555",
            "id": 1463897555,
            "in_reply_to_id": 1461151431,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5XQU3T",
            "original_commit_id": "33ba30854d9a509fc10637aa2daf22196fad3599",
            "original_line": 961,
            "original_position": 27,
            "original_start_line": null,
            "path": "src/nvim/profile.c",
            "position": null,
            "pull_request_review_id": 1839771313,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/26790",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1463897555/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-01-23T19:33:25Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1463897555",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/20794509?v=4",
                "events_url": "https://api.github.com/users/pabloariasal/events{/privacy}",
                "followers_url": "https://api.github.com/users/pabloariasal/followers",
                "following_url": "https://api.github.com/users/pabloariasal/following{/other_user}",
                "gists_url": "https://api.github.com/users/pabloariasal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/pabloariasal",
                "id": 20794509,
                "login": "pabloariasal",
                "node_id": "MDQ6VXNlcjIwNzk0NTA5",
                "organizations_url": "https://api.github.com/users/pabloariasal/orgs",
                "received_events_url": "https://api.github.com/users/pabloariasal/received_events",
                "repos_url": "https://api.github.com/users/pabloariasal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/pabloariasal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/pabloariasal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/pabloariasal"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/26790#discussion_r1468248707"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/26790"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1468248707"
                }
            },
            "author_association": "MEMBER",
            "body": "`TUI/client` addresses that edge-case.",
            "commit_id": "af582524e9118d2734f229e730d6e9e6c2c1c282",
            "created_at": "2024-01-26T23:59:39Z",
            "diff_hunk": "@@ -1494,9 +1498,16 @@ static void init_params(mparm_T *paramp, int argc, char **argv)\n /// Initialize global startuptime file if \"--startuptime\" passed as an argument.\n static void init_startuptime(mparm_T *paramp)\n {\n+  bool is_embedded_process = false;\n+  for (int i = 1; i < paramp->argc - 1; i++) {\n+    if (STRICMP(paramp->argv[i], \"--embed\") == 0) {\n+      is_embedded_process = true;\n+      break;\n+    }\n+  }\n   for (int i = 1; i < paramp->argc - 1; i++) {\n     if (STRICMP(paramp->argv[i], \"--startuptime\") == 0) {\n-      time_fd = fopen(paramp->argv[i + 1], \"a\");\n+      time_init(paramp->argv[i + 1], embedded_mode ? \"Embedded\" : \"Primary/TUI\");",
            "html_url": "https://github.com/neovim/neovim/pull/26790#discussion_r1468248707",
            "id": 1468248707,
            "in_reply_to_id": 1463804653,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5Xg7KD",
            "original_commit_id": "6c8741e65d6f72c6ee259abc3165e14302f93715",
            "original_line": 1510,
            "original_position": 32,
            "original_start_line": null,
            "path": "src/nvim/main.c",
            "position": null,
            "pull_request_review_id": 1846744111,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/26790",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1468248707/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-01-26T23:59:39Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1468248707",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/26790#discussion_r1468249424"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/26790"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1468249424"
                }
            },
            "author_association": "MEMBER",
            "body": "variables in small scopes really don't need such verbose names.\r\n```suggestion\r\n  bool is_embed = false;\r\n```",
            "commit_id": "af582524e9118d2734f229e730d6e9e6c2c1c282",
            "created_at": "2024-01-27T00:02:00Z",
            "diff_hunk": "@@ -1494,9 +1498,16 @@ static void init_params(mparm_T *paramp, int argc, char **argv)\n /// Initialize global startuptime file if \"--startuptime\" passed as an argument.\n static void init_startuptime(mparm_T *paramp)\n {\n+  bool is_embedded_process = false;",
            "html_url": "https://github.com/neovim/neovim/pull/26790#discussion_r1468249424",
            "id": 1468249424,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5Xg7VQ",
            "original_commit_id": "a99be151985901300b89b36c10fa04727706f0a5",
            "original_line": 1501,
            "original_position": 22,
            "original_start_line": null,
            "path": "src/nvim/main.c",
            "position": null,
            "pull_request_review_id": 1846745173,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/26790",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1468249424/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-01-27T00:02:01Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1468249424",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/26790#discussion_r1468259927"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/26790"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1468259927"
                }
            },
            "author_association": "MEMBER",
            "body": "I don't think it's \"client\" as headless instance are usually servers.",
            "commit_id": "af582524e9118d2734f229e730d6e9e6c2c1c282",
            "created_at": "2024-01-27T00:34:24Z",
            "diff_hunk": "@@ -1494,9 +1498,16 @@ static void init_params(mparm_T *paramp, int argc, char **argv)\n /// Initialize global startuptime file if \"--startuptime\" passed as an argument.\n static void init_startuptime(mparm_T *paramp)\n {\n+  bool is_embedded_process = false;\n+  for (int i = 1; i < paramp->argc - 1; i++) {\n+    if (STRICMP(paramp->argv[i], \"--embed\") == 0) {\n+      is_embedded_process = true;\n+      break;\n+    }\n+  }\n   for (int i = 1; i < paramp->argc - 1; i++) {\n     if (STRICMP(paramp->argv[i], \"--startuptime\") == 0) {\n-      time_fd = fopen(paramp->argv[i + 1], \"a\");\n+      time_init(paramp->argv[i + 1], embedded_mode ? \"Embedded\" : \"Primary/TUI\");",
            "html_url": "https://github.com/neovim/neovim/pull/26790#discussion_r1468259927",
            "id": 1468259927,
            "in_reply_to_id": 1463804653,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5Xg95X",
            "original_commit_id": "6c8741e65d6f72c6ee259abc3165e14302f93715",
            "original_line": 1510,
            "original_position": 32,
            "original_start_line": null,
            "path": "src/nvim/main.c",
            "position": null,
            "pull_request_review_id": 1846759255,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/26790",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1468259927/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-01-27T00:34:24Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1468259927",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/26790#discussion_r1471226436"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/26790"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1471226436"
                }
            },
            "author_association": "MEMBER",
            "body": "True. I retract my request in that case. The old code LGTM:\r\n\r\n    time_init(paramp->argv[i + 1], is_embed ? \"Embedded\" : \"Primary/TUI\");",
            "commit_id": "af582524e9118d2734f229e730d6e9e6c2c1c282",
            "created_at": "2024-01-30T13:35:12Z",
            "diff_hunk": "@@ -1494,9 +1498,16 @@ static void init_params(mparm_T *paramp, int argc, char **argv)\n /// Initialize global startuptime file if \"--startuptime\" passed as an argument.\n static void init_startuptime(mparm_T *paramp)\n {\n+  bool is_embedded_process = false;\n+  for (int i = 1; i < paramp->argc - 1; i++) {\n+    if (STRICMP(paramp->argv[i], \"--embed\") == 0) {\n+      is_embedded_process = true;\n+      break;\n+    }\n+  }\n   for (int i = 1; i < paramp->argc - 1; i++) {\n     if (STRICMP(paramp->argv[i], \"--startuptime\") == 0) {\n-      time_fd = fopen(paramp->argv[i + 1], \"a\");\n+      time_init(paramp->argv[i + 1], embedded_mode ? \"Embedded\" : \"Primary/TUI\");",
            "html_url": "https://github.com/neovim/neovim/pull/26790#discussion_r1471226436",
            "id": 1471226436,
            "in_reply_to_id": 1463804653,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5XsSJE",
            "original_commit_id": "6c8741e65d6f72c6ee259abc3165e14302f93715",
            "original_line": 1510,
            "original_position": 32,
            "original_start_line": null,
            "path": "src/nvim/main.c",
            "position": null,
            "pull_request_review_id": 1851292232,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/26790",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1471226436/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-01-30T13:35:45Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1471226436",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/26790#discussion_r1471243470"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/26790"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1471243470"
                }
            },
            "author_association": "MEMBER",
            "body": "- correct punctuation in code comments, reduces ambiguity and increases consistency, at negligible cost.\r\n- there were typos and the comment was verbose, so I condensed it (without losing information).\r\n\r\nplease consider these guidelines in the future.\r\n\r\n```suggestion\r\n  // The startuptime file is (potentially) written by multiple nvim processes concurrently. So\r\n  // startuptime info is buffered, and flushed to disk only after startup completed. To achieve that\r\n  // we set a buffer big enough to store all startup times. The `_IOFBF` mode ensures the buffer is\r\n  // not auto-flushed (\"controlled buffering\").\r\n```\r\n",
            "commit_id": "af582524e9118d2734f229e730d6e9e6c2c1c282",
            "created_at": "2024-01-30T13:45:48Z",
            "diff_hunk": "@@ -944,3 +944,50 @@ void time_msg(const char *mesg, const proftime_T *start)\n   g_prev_time = now;\n   fprintf(time_fd, \": %s\\n\", mesg);\n }\n+\n+/// Initializes the time time_fd stream used to write startup times\n+///\n+/// @param startup_time_file the startuptime report file path\n+/// @param process_name the name of the current process to write in the report.\n+void time_init(const char *startup_time_file, const char *process_name)\n+{\n+  time_fd = fopen(startup_time_file, \"a\");\n+  if (time_fd == NULL) {\n+    semsg(_(e_notopen), startup_time_file);\n+    return;\n+  }\n+  startuptime_buf = xmalloc(sizeof(char) * (STARTUP_TIME_BUF_SIZE + 1));\n+  // the startuptime file is (potentially) bein written by several nvim processes concurrently.\n+  // in order to avoid messing up the file with concurrent writes all startuptimes are written\n+  // to a memory buffer first and flushed to disk only after the process is done with the\n+  // is done with the initialization.\n+  // in order to achieve this we set a large-enough buffer to the file stream, big enough to store\n+  // all startup times. The _IOFBF mode makes sure that the buffer is not automatically flushed\n+  // (\"controlled buffering\").",
            "html_url": "https://github.com/neovim/neovim/pull/26790#discussion_r1471243470",
            "id": 1471243470,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5XsWTO",
            "original_commit_id": "f2201fadfb1c3be93dc01875bb7fbf8d2460fcdf",
            "original_line": 966,
            "original_position": 32,
            "original_start_line": 960,
            "path": "src/nvim/profile.c",
            "position": null,
            "pull_request_review_id": 1851317298,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/26790",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1471243470/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2024-01-30T13:45:48Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1471243470",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/26790#discussion_r1471259969"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/26790"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1471259969"
                }
            },
            "author_association": "MEMBER",
            "body": "untested but should work:\r\n\r\n```suggestion\r\n  int r = setvbuf(time_fd, startuptime_buf, _IOFBF, STARTUP_TIME_BUF_SIZE + 1);\r\n  if (r != 0) {\r\n    xfree(startuptime_buf);\r\n    fclose(time_fd);\r\n    time_fd = NULL;\r\n    // Might as well ELOG also I guess.\r\n    ELOG(\"time_init: setvbuf failed: %d %s\", r, uv_err_name(r));\r\n    semsg(\"time_init: setvbuf failed: %d %s\", r, uv_err_name(r));\r\n    return;\r\n```\r\n\r\n",
            "commit_id": "af582524e9118d2734f229e730d6e9e6c2c1c282",
            "created_at": "2024-01-30T13:54:36Z",
            "diff_hunk": "@@ -944,3 +944,50 @@ void time_msg(const char *mesg, const proftime_T *start)\n   g_prev_time = now;\n   fprintf(time_fd, \": %s\\n\", mesg);\n }\n+\n+/// Initializes the time time_fd stream used to write startup times\n+///\n+/// @param startup_time_file the startuptime report file path\n+/// @param process_name the name of the current process to write in the report.\n+void time_init(const char *startup_time_file, const char *process_name)\n+{\n+  time_fd = fopen(startup_time_file, \"a\");\n+  if (time_fd == NULL) {\n+    semsg(_(e_notopen), startup_time_file);\n+    return;\n+  }\n+  startuptime_buf = xmalloc(sizeof(char) * (STARTUP_TIME_BUF_SIZE + 1));\n+  // the startuptime file is (potentially) bein written by several nvim processes concurrently.\n+  // in order to avoid messing up the file with concurrent writes all startuptimes are written\n+  // to a memory buffer first and flushed to disk only after the process is done with the\n+  // is done with the initialization.\n+  // in order to achieve this we set a large-enough buffer to the file stream, big enough to store\n+  // all startup times. The _IOFBF mode makes sure that the buffer is not automatically flushed\n+  // (\"controlled buffering\").\n+  // The times are flushed to disk manually when \"time_finish\" is called.\n+  if (setvbuf(time_fd, startuptime_buf, _IOFBF, STARTUP_TIME_BUF_SIZE + 1) != 0) {\n+    xfree(startuptime_buf);\n+    fclose(time_fd);\n+    time_fd = NULL;\n+    semsg(\"Error initializing startup time\");\n+    return;",
            "html_url": "https://github.com/neovim/neovim/pull/26790#discussion_r1471259969",
            "id": 1471259969,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5XsaVB",
            "original_commit_id": "f2201fadfb1c3be93dc01875bb7fbf8d2460fcdf",
            "original_line": 973,
            "original_position": 39,
            "original_start_line": 968,
            "path": "src/nvim/profile.c",
            "position": null,
            "pull_request_review_id": 1851340903,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/26790",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1471259969/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2024-01-30T13:54:36Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1471259969",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/26790#discussion_r1471262226"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/26790"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1471262226"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n  XFREE_CLEAR(startuptime_buf);\r\n```",
            "commit_id": "af582524e9118d2734f229e730d6e9e6c2c1c282",
            "created_at": "2024-01-30T13:56:07Z",
            "diff_hunk": "@@ -944,3 +944,50 @@ void time_msg(const char *mesg, const proftime_T *start)\n   g_prev_time = now;\n   fprintf(time_fd, \": %s\\n\", mesg);\n }\n+\n+/// Initializes the time time_fd stream used to write startup times\n+///\n+/// @param startup_time_file the startuptime report file path\n+/// @param process_name the name of the current process to write in the report.\n+void time_init(const char *startup_time_file, const char *process_name)\n+{\n+  time_fd = fopen(startup_time_file, \"a\");\n+  if (time_fd == NULL) {\n+    semsg(_(e_notopen), startup_time_file);\n+    return;\n+  }\n+  startuptime_buf = xmalloc(sizeof(char) * (STARTUP_TIME_BUF_SIZE + 1));\n+  // the startuptime file is (potentially) bein written by several nvim processes concurrently.\n+  // in order to avoid messing up the file with concurrent writes all startuptimes are written\n+  // to a memory buffer first and flushed to disk only after the process is done with the\n+  // is done with the initialization.\n+  // in order to achieve this we set a large-enough buffer to the file stream, big enough to store\n+  // all startup times. The _IOFBF mode makes sure that the buffer is not automatically flushed\n+  // (\"controlled buffering\").\n+  // The times are flushed to disk manually when \"time_finish\" is called.\n+  if (setvbuf(time_fd, startuptime_buf, _IOFBF, STARTUP_TIME_BUF_SIZE + 1) != 0) {\n+    xfree(startuptime_buf);\n+    fclose(time_fd);\n+    time_fd = NULL;\n+    semsg(\"Error initializing startup time\");\n+    return;\n+  }\n+  fprintf(time_fd, \"--- Startup times for process: %s ---\\n\", process_name);\n+}\n+\n+/// Flushes the startuptimes to disk for the current process\n+void time_finish(void)\n+{\n+  if (time_fd == NULL) {\n+    return;\n+  }\n+  assert(startuptime_buf != NULL);\n+  TIME_MSG(\"--- NVIM STARTED ---\\n\");\n+\n+  // flush buffer to disk\n+  fclose(time_fd);\n+  time_fd = NULL;\n+\n+  xfree(startuptime_buf);\n+  startuptime_buf = NULL;",
            "html_url": "https://github.com/neovim/neovim/pull/26790#discussion_r1471262226",
            "id": 1471262226,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5Xsa4S",
            "original_commit_id": "f2201fadfb1c3be93dc01875bb7fbf8d2460fcdf",
            "original_line": 992,
            "original_position": 58,
            "original_start_line": 991,
            "path": "src/nvim/profile.c",
            "position": null,
            "pull_request_review_id": 1851344270,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/26790",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1471262226/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2024-01-30T13:56:07Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1471262226",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/26790#discussion_r1471795272"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/26790"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1471795272"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "changed",
            "commit_id": "af582524e9118d2734f229e730d6e9e6c2c1c282",
            "created_at": "2024-01-30T18:58:53Z",
            "diff_hunk": "@@ -1494,9 +1498,16 @@ static void init_params(mparm_T *paramp, int argc, char **argv)\n /// Initialize global startuptime file if \"--startuptime\" passed as an argument.\n static void init_startuptime(mparm_T *paramp)\n {\n+  bool is_embedded_process = false;\n+  for (int i = 1; i < paramp->argc - 1; i++) {\n+    if (STRICMP(paramp->argv[i], \"--embed\") == 0) {\n+      is_embedded_process = true;\n+      break;\n+    }\n+  }\n   for (int i = 1; i < paramp->argc - 1; i++) {\n     if (STRICMP(paramp->argv[i], \"--startuptime\") == 0) {\n-      time_fd = fopen(paramp->argv[i + 1], \"a\");\n+      time_init(paramp->argv[i + 1], embedded_mode ? \"Embedded\" : \"Primary/TUI\");",
            "html_url": "https://github.com/neovim/neovim/pull/26790#discussion_r1471795272",
            "id": 1471795272,
            "in_reply_to_id": 1463804653,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5XudBI",
            "original_commit_id": "6c8741e65d6f72c6ee259abc3165e14302f93715",
            "original_line": 1510,
            "original_position": 32,
            "original_start_line": null,
            "path": "src/nvim/main.c",
            "position": null,
            "pull_request_review_id": 1852120397,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/26790",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1471795272/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-01-30T18:58:53Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1471795272",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/20794509?v=4",
                "events_url": "https://api.github.com/users/pabloariasal/events{/privacy}",
                "followers_url": "https://api.github.com/users/pabloariasal/followers",
                "following_url": "https://api.github.com/users/pabloariasal/following{/other_user}",
                "gists_url": "https://api.github.com/users/pabloariasal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/pabloariasal",
                "id": 20794509,
                "login": "pabloariasal",
                "node_id": "MDQ6VXNlcjIwNzk0NTA5",
                "organizations_url": "https://api.github.com/users/pabloariasal/orgs",
                "received_events_url": "https://api.github.com/users/pabloariasal/received_events",
                "repos_url": "https://api.github.com/users/pabloariasal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/pabloariasal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/pabloariasal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/pabloariasal"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/26790#discussion_r1471795442"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/26790"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1471795442"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "changed",
            "commit_id": "af582524e9118d2734f229e730d6e9e6c2c1c282",
            "created_at": "2024-01-30T18:58:59Z",
            "diff_hunk": "@@ -1494,9 +1498,16 @@ static void init_params(mparm_T *paramp, int argc, char **argv)\n /// Initialize global startuptime file if \"--startuptime\" passed as an argument.\n static void init_startuptime(mparm_T *paramp)\n {\n+  bool is_embedded_process = false;",
            "html_url": "https://github.com/neovim/neovim/pull/26790#discussion_r1471795442",
            "id": 1471795442,
            "in_reply_to_id": 1468249424,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5XudDy",
            "original_commit_id": "a99be151985901300b89b36c10fa04727706f0a5",
            "original_line": 1501,
            "original_position": 22,
            "original_start_line": null,
            "path": "src/nvim/main.c",
            "position": null,
            "pull_request_review_id": 1852120791,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/26790",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1471795442/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-01-30T18:58:59Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1471795442",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/20794509?v=4",
                "events_url": "https://api.github.com/users/pabloariasal/events{/privacy}",
                "followers_url": "https://api.github.com/users/pabloariasal/followers",
                "following_url": "https://api.github.com/users/pabloariasal/following{/other_user}",
                "gists_url": "https://api.github.com/users/pabloariasal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/pabloariasal",
                "id": 20794509,
                "login": "pabloariasal",
                "node_id": "MDQ6VXNlcjIwNzk0NTA5",
                "organizations_url": "https://api.github.com/users/pabloariasal/orgs",
                "received_events_url": "https://api.github.com/users/pabloariasal/received_events",
                "repos_url": "https://api.github.com/users/pabloariasal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/pabloariasal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/pabloariasal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/pabloariasal"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/26790#discussion_r1471796544"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/26790"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1471796544"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "done",
            "commit_id": "af582524e9118d2734f229e730d6e9e6c2c1c282",
            "created_at": "2024-01-30T18:59:46Z",
            "diff_hunk": "@@ -944,3 +944,50 @@ void time_msg(const char *mesg, const proftime_T *start)\n   g_prev_time = now;\n   fprintf(time_fd, \": %s\\n\", mesg);\n }\n+\n+/// Initializes the time time_fd stream used to write startup times\n+///\n+/// @param startup_time_file the startuptime report file path\n+/// @param process_name the name of the current process to write in the report.\n+void time_init(const char *startup_time_file, const char *process_name)\n+{\n+  time_fd = fopen(startup_time_file, \"a\");\n+  if (time_fd == NULL) {\n+    semsg(_(e_notopen), startup_time_file);\n+    return;\n+  }\n+  startuptime_buf = xmalloc(sizeof(char) * (STARTUP_TIME_BUF_SIZE + 1));\n+  // the startuptime file is (potentially) bein written by several nvim processes concurrently.\n+  // in order to avoid messing up the file with concurrent writes all startuptimes are written\n+  // to a memory buffer first and flushed to disk only after the process is done with the\n+  // is done with the initialization.\n+  // in order to achieve this we set a large-enough buffer to the file stream, big enough to store\n+  // all startup times. The _IOFBF mode makes sure that the buffer is not automatically flushed\n+  // (\"controlled buffering\").",
            "html_url": "https://github.com/neovim/neovim/pull/26790#discussion_r1471796544",
            "id": 1471796544,
            "in_reply_to_id": 1471243470,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5XudVA",
            "original_commit_id": "f2201fadfb1c3be93dc01875bb7fbf8d2460fcdf",
            "original_line": 966,
            "original_position": 32,
            "original_start_line": 960,
            "path": "src/nvim/profile.c",
            "position": null,
            "pull_request_review_id": 1852123120,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/26790",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1471796544/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2024-01-30T18:59:46Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1471796544",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/20794509?v=4",
                "events_url": "https://api.github.com/users/pabloariasal/events{/privacy}",
                "followers_url": "https://api.github.com/users/pabloariasal/followers",
                "following_url": "https://api.github.com/users/pabloariasal/following{/other_user}",
                "gists_url": "https://api.github.com/users/pabloariasal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/pabloariasal",
                "id": 20794509,
                "login": "pabloariasal",
                "node_id": "MDQ6VXNlcjIwNzk0NTA5",
                "organizations_url": "https://api.github.com/users/pabloariasal/orgs",
                "received_events_url": "https://api.github.com/users/pabloariasal/received_events",
                "repos_url": "https://api.github.com/users/pabloariasal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/pabloariasal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/pabloariasal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/pabloariasal"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/26790#discussion_r1484856311"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/26790"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1484856311"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n |--startuptime| reports the startup times for both processes (TUI + server) as separate sections.\r\n\r\n==============================================================================\r\n```",
            "commit_id": "af582524e9118d2734f229e730d6e9e6c2c1c282",
            "created_at": "2024-02-09T22:20:40Z",
            "diff_hunk": "@@ -415,6 +415,7 @@ The following changes to existing APIs or features add new behavior.\n \n  'errorfile' (|-q|) accepts `-` as an alias for stdin.\n \n+ |--startuptime| reports the startup times for both processes (TUI + server) as separate sections.\n ==============================================================================",
            "html_url": "https://github.com/neovim/neovim/pull/26790#discussion_r1484856311",
            "id": 1484856311,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5YgRv3",
            "original_commit_id": "a1b556d01c35aa4081837c18c4e0f9ebd29075d3",
            "original_line": 419,
            "original_position": 5,
            "original_start_line": 418,
            "path": "runtime/doc/news.txt",
            "position": null,
            "pull_request_review_id": 1873279263,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/26790",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1484856311/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2024-02-09T22:20:40Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1484856311",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        }
    ],
    "comment_regular_data": [
        {
            "author_association": "MEMBER",
            "body": "Is there an extra assert you can add to the existing test for `--startuptime`, to cover the change in this PR : https://github.com/neovim/neovim/blob/95cbedaa1798a7c1489b68dd60380a41443ed34b/test/functional/core/startup_spec.lua#L70-L78",
            "created_at": "2024-01-21T21:51:25Z",
            "html_url": "https://github.com/neovim/neovim/pull/26790#issuecomment-1902777956",
            "id": 1902777956,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/26790",
            "node_id": "IC_kwDOAPphoM5xahZk",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1902777956/reactions"
            },
            "updated_at": "2024-01-21T21:51:48Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1902777956",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        }
    ],
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/26790/comments",
    "commits_url": "https://api.github.com/repos/neovim/neovim/pulls/26790/commits",
    "created_at": "2023-12-29T13:35:52Z",
    "diff_url": "https://github.com/neovim/neovim/pull/26790.diff",
    "draft": false,
    "head": {
        "label": "pabloariasal:fix_startup_time",
        "ref": "fix_startup_time",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/pabloariasal/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/pabloariasal/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/pabloariasal/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/pabloariasal/neovim/branches{/branch}",
            "clone_url": "https://github.com/pabloariasal/neovim.git",
            "collaborators_url": "https://api.github.com/repos/pabloariasal/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/pabloariasal/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/pabloariasal/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/pabloariasal/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/pabloariasal/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/pabloariasal/neovim/contributors",
            "created_at": "2023-12-11T21:15:38Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/pabloariasal/neovim/deployments",
            "description": "Vim-fork focused on extensibility and usability",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/pabloariasal/neovim/downloads",
            "events_url": "https://api.github.com/repos/pabloariasal/neovim/events",
            "fork": true,
            "forks": 0,
            "forks_count": 0,
            "forks_url": "https://api.github.com/repos/pabloariasal/neovim/forks",
            "full_name": "pabloariasal/neovim",
            "git_commits_url": "https://api.github.com/repos/pabloariasal/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/pabloariasal/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/pabloariasal/neovim/git/tags{/sha}",
            "git_url": "git://github.com/pabloariasal/neovim.git",
            "has_discussions": false,
            "has_downloads": true,
            "has_issues": false,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://neovim.io",
            "hooks_url": "https://api.github.com/repos/pabloariasal/neovim/hooks",
            "html_url": "https://github.com/pabloariasal/neovim",
            "id": 730404424,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/pabloariasal/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/pabloariasal/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/pabloariasal/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/pabloariasal/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/pabloariasal/neovim/labels{/name}",
            "language": "Vim Script",
            "languages_url": "https://api.github.com/repos/pabloariasal/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/pabloariasal/neovim/merges",
            "milestones_url": "https://api.github.com/repos/pabloariasal/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "R_kgDOK4kWSA",
            "notifications_url": "https://api.github.com/repos/pabloariasal/neovim/notifications{?since,all,participating}",
            "open_issues": 0,
            "open_issues_count": 0,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/20794509?v=4",
                "events_url": "https://api.github.com/users/pabloariasal/events{/privacy}",
                "followers_url": "https://api.github.com/users/pabloariasal/followers",
                "following_url": "https://api.github.com/users/pabloariasal/following{/other_user}",
                "gists_url": "https://api.github.com/users/pabloariasal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/pabloariasal",
                "id": 20794509,
                "login": "pabloariasal",
                "node_id": "MDQ6VXNlcjIwNzk0NTA5",
                "organizations_url": "https://api.github.com/users/pabloariasal/orgs",
                "received_events_url": "https://api.github.com/users/pabloariasal/received_events",
                "repos_url": "https://api.github.com/users/pabloariasal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/pabloariasal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/pabloariasal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/pabloariasal"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/pabloariasal/neovim/pulls{/number}",
            "pushed_at": "2024-02-11T13:03:11Z",
            "releases_url": "https://api.github.com/repos/pabloariasal/neovim/releases{/id}",
            "size": 247446,
            "ssh_url": "git@github.com:pabloariasal/neovim.git",
            "stargazers_count": 0,
            "stargazers_url": "https://api.github.com/repos/pabloariasal/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/pabloariasal/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/pabloariasal/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/pabloariasal/neovim/subscription",
            "svn_url": "https://github.com/pabloariasal/neovim",
            "tags_url": "https://api.github.com/repos/pabloariasal/neovim/tags",
            "teams_url": "https://api.github.com/repos/pabloariasal/neovim/teams",
            "topics": [],
            "trees_url": "https://api.github.com/repos/pabloariasal/neovim/git/trees{/sha}",
            "updated_at": "2023-12-22T16:54:40Z",
            "url": "https://api.github.com/repos/pabloariasal/neovim",
            "visibility": "public",
            "watchers": 0,
            "watchers_count": 0,
            "web_commit_signoff_required": false
        },
        "sha": "af582524e9118d2734f229e730d6e9e6c2c1c282",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/20794509?v=4",
            "events_url": "https://api.github.com/users/pabloariasal/events{/privacy}",
            "followers_url": "https://api.github.com/users/pabloariasal/followers",
            "following_url": "https://api.github.com/users/pabloariasal/following{/other_user}",
            "gists_url": "https://api.github.com/users/pabloariasal/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/pabloariasal",
            "id": 20794509,
            "login": "pabloariasal",
            "node_id": "MDQ6VXNlcjIwNzk0NTA5",
            "organizations_url": "https://api.github.com/users/pabloariasal/orgs",
            "received_events_url": "https://api.github.com/users/pabloariasal/received_events",
            "repos_url": "https://api.github.com/users/pabloariasal/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/pabloariasal/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/pabloariasal/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/pabloariasal"
        }
    },
    "html_url": "https://github.com/neovim/neovim/pull/26790",
    "id": 1659903643,
    "issue_url": "https://api.github.com/repos/neovim/neovim/issues/26790",
    "labels": [
        {
            "color": "c5def5",
            "default": false,
            "description": "Nvim startup sequence (`:h startup`)",
            "id": 870629450,
            "name": "startup",
            "node_id": "MDU6TGFiZWw4NzA2Mjk0NTA=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/startup"
        }
    ],
    "locked": false,
    "merge_commit_sha": "8e739af064dec28886694aa448f60a570acd2173",
    "merged_at": "2024-02-09T22:56:52Z",
    "milestone": null,
    "node_id": "PR_kwDOAPphoM5i8B6b",
    "number": 26790,
    "patch_url": "https://github.com/neovim/neovim/pull/26790.patch",
    "requested_reviewers": [],
    "requested_teams": [],
    "review_comment_url": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}",
    "review_comments_url": "https://api.github.com/repos/neovim/neovim/pulls/26790/comments",
    "state": "closed",
    "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/af582524e9118d2734f229e730d6e9e6c2c1c282",
    "title": "fix(startuptime): multiprocess startuptime",
    "updated_at": "2024-02-09T22:58:49Z",
    "url": "https://api.github.com/repos/neovim/neovim/pulls/26790",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/20794509?v=4",
        "events_url": "https://api.github.com/users/pabloariasal/events{/privacy}",
        "followers_url": "https://api.github.com/users/pabloariasal/followers",
        "following_url": "https://api.github.com/users/pabloariasal/following{/other_user}",
        "gists_url": "https://api.github.com/users/pabloariasal/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/pabloariasal",
        "id": 20794509,
        "login": "pabloariasal",
        "node_id": "MDQ6VXNlcjIwNzk0NTA5",
        "organizations_url": "https://api.github.com/users/pabloariasal/orgs",
        "received_events_url": "https://api.github.com/users/pabloariasal/received_events",
        "repos_url": "https://api.github.com/users/pabloariasal/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/pabloariasal/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/pabloariasal/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/pabloariasal"
    }
}