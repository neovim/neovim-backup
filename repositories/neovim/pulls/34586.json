{
    "_links": {
        "comments": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/34586/comments"
        },
        "commits": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/34586/commits"
        },
        "html": {
            "href": "https://github.com/neovim/neovim/pull/34586"
        },
        "issue": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/34586"
        },
        "review_comment": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}"
        },
        "review_comments": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/34586/comments"
        },
        "self": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
        },
        "statuses": {
            "href": "https://api.github.com/repos/neovim/neovim/statuses/efdcfdf8545981faf4f78f8f06d8f34a60a65dfe"
        }
    },
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "auto_merge": null,
    "base": {
        "label": "neovim:master",
        "ref": "master",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/neovim/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/neovim/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/neovim/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/neovim/neovim/branches{/branch}",
            "clone_url": "https://github.com/neovim/neovim.git",
            "collaborators_url": "https://api.github.com/repos/neovim/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/neovim/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/neovim/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/neovim/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/neovim/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/neovim/neovim/contributors",
            "created_at": "2014-01-31T13:39:22Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/neovim/neovim/deployments",
            "description": "Vim-fork focused on extensibility and usability",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/neovim/neovim/downloads",
            "events_url": "https://api.github.com/repos/neovim/neovim/events",
            "fork": false,
            "forks": 6392,
            "forks_count": 6392,
            "forks_url": "https://api.github.com/repos/neovim/neovim/forks",
            "full_name": "neovim/neovim",
            "git_commits_url": "https://api.github.com/repos/neovim/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/neovim/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/neovim/neovim/git/tags{/sha}",
            "git_url": "git://github.com/neovim/neovim.git",
            "has_discussions": true,
            "has_downloads": true,
            "has_issues": true,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://neovim.io",
            "hooks_url": "https://api.github.com/repos/neovim/neovim/hooks",
            "html_url": "https://github.com/neovim/neovim",
            "id": 16408992,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/neovim/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/neovim/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/neovim/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/neovim/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/neovim/neovim/labels{/name}",
            "language": "Vim Script",
            "languages_url": "https://api.github.com/repos/neovim/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/neovim/neovim/merges",
            "milestones_url": "https://api.github.com/repos/neovim/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "MDEwOlJlcG9zaXRvcnkxNjQwODk5Mg==",
            "notifications_url": "https://api.github.com/repos/neovim/neovim/notifications{?since,all,participating}",
            "open_issues": 2048,
            "open_issues_count": 2048,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
                "events_url": "https://api.github.com/users/neovim/events{/privacy}",
                "followers_url": "https://api.github.com/users/neovim/followers",
                "following_url": "https://api.github.com/users/neovim/following{/other_user}",
                "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/neovim",
                "id": 6471485,
                "login": "neovim",
                "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
                "organizations_url": "https://api.github.com/users/neovim/orgs",
                "received_events_url": "https://api.github.com/users/neovim/received_events",
                "repos_url": "https://api.github.com/users/neovim/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
                "type": "Organization",
                "url": "https://api.github.com/users/neovim",
                "user_view_type": "public"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/neovim/neovim/pulls{/number}",
            "pushed_at": "2025-11-03T06:23:46Z",
            "releases_url": "https://api.github.com/repos/neovim/neovim/releases{/id}",
            "size": 350066,
            "ssh_url": "git@github.com:neovim/neovim.git",
            "stargazers_count": 93940,
            "stargazers_url": "https://api.github.com/repos/neovim/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/neovim/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/neovim/neovim/subscription",
            "svn_url": "https://github.com/neovim/neovim",
            "tags_url": "https://api.github.com/repos/neovim/neovim/tags",
            "teams_url": "https://api.github.com/repos/neovim/neovim/teams",
            "topics": [
                "api",
                "c",
                "lua",
                "neovim",
                "nvim",
                "text-editor",
                "vim"
            ],
            "trees_url": "https://api.github.com/repos/neovim/neovim/git/trees{/sha}",
            "updated_at": "2025-11-04T02:32:33Z",
            "url": "https://api.github.com/repos/neovim/neovim",
            "visibility": "public",
            "watchers": 93940,
            "watchers_count": 93940,
            "web_commit_signoff_required": false
        },
        "sha": "38986188ba0f57c48065ad430706435d622911a1",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
            "events_url": "https://api.github.com/users/neovim/events{/privacy}",
            "followers_url": "https://api.github.com/users/neovim/followers",
            "following_url": "https://api.github.com/users/neovim/following{/other_user}",
            "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/neovim",
            "id": 6471485,
            "login": "neovim",
            "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
            "organizations_url": "https://api.github.com/users/neovim/orgs",
            "received_events_url": "https://api.github.com/users/neovim/received_events",
            "repos_url": "https://api.github.com/users/neovim/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
            "type": "Organization",
            "url": "https://api.github.com/users/neovim",
            "user_view_type": "public"
        }
    },
    "body": "Add the `:connect <address>` command which connects the currently running TUI to the server running at the given address.\r\n\r\nReference issue: \r\n\r\n- https://github.com/neovim/neovim/issues/5035\r\n- #34257",
    "closed_at": "2025-08-14T22:58:10Z",
    "comment_data": [
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2166555575"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166555575"
                }
            },
            "author_association": "MEMBER",
            "body": "This doesn't look correct.",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-06-25T12:06:48Z",
            "diff_hunk": "@@ -85,6 +85,21 @@ Restart Nvim\n :restart!\n                 Force restarts the Nvim server, abandoning unsaved buffers.\n \n+------------------------------------------------------------------------------\n+Connect UI to a different server\n+\n+                                                *:connect*\n+\n+:connect {address}\n+                Detaches the UI from the server it is currently attached to\n+                and attaches it to the server at {address} instead.\n+                Note: If the current UI hasn't implemented the \"restart\" UI\n+                event, this command is equivalent to `:qall`.",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2166555575",
            "id": 2166555575,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6BIwO3",
            "original_commit_id": "5bba27837dc5156c691f0628e18ce3b69b3c8657",
            "original_line": 97,
            "original_position": 13,
            "original_start_line": 96,
            "path": "runtime/doc/gui.txt",
            "position": 1,
            "pull_request_review_id": 2957892785,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166555575/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-06-25T12:06:48Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166555575",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2166558419"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166558419"
                }
            },
            "author_association": "MEMBER",
            "body": "`ui_active` already gives this info https://github.com/neovim/neovim/blob/efd0fa55c8b1ba78692382c52a9d644fdd5488c8/src/nvim/ui.c#L186-L187",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-06-25T12:08:26Z",
            "diff_hunk": "@@ -66,6 +66,11 @@ static void mpack_str_small(char **buf, const char *str, size_t len)\n   *buf += len;\n }\n \n+uint64_t get_ui_number(void)",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2166558419",
            "id": 2166558419,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6BIw7T",
            "original_commit_id": "5bba27837dc5156c691f0628e18ce3b69b3c8657",
            "original_line": 69,
            "original_position": 4,
            "original_start_line": null,
            "path": "src/nvim/api/ui.c",
            "position": 1,
            "pull_request_review_id": 2957897327,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166558419/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-06-25T12:08:26Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166558419",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2166571800"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166571800"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n/// \":connect <address>\" detaches the current UI and connects to the given server.\r\n/// \":connect! <address>\" stops the current server if no other UIs are attached, then connects to the given server.\r\n```",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-06-25T12:15:44Z",
            "diff_hunk": "@@ -5600,6 +5600,42 @@ static void ex_detach(exarg_T *eap)\n   }\n }\n \n+/// \":connect\"\n+///\n+/// Connects the current UI to a different server\n+///\n+/// \":connect <address>\" connects the currently running TUI to the server at the\n+/// given address and detaches the connected server\n+/// \":connect! <address>\" (with the bang (!)) connects the currently running TUI\n+/// to the server at the given address and stops the connected server if no\n+/// other UIs are attached to it",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2166571800",
            "id": 2166571800,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6BI0MY",
            "original_commit_id": "5bba27837dc5156c691f0628e18ce3b69b3c8657",
            "original_line": 5611,
            "original_position": 12,
            "original_start_line": 5607,
            "path": "src/nvim/ex_docmd.c",
            "position": 1,
            "pull_request_review_id": 2957920139,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166571800/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-06-25T12:15:44Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166571800",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2166576427"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166576427"
                }
            },
            "author_association": "MEMBER",
            "body": "Please check if there's a flag that ensures that \"%\", \"#\", etc. are not treated specially. They should be treated literally in the server arg. E.g. \"%\" should not be expanded to the current buffer name, it should be treated as a literal \"%\". And we need a test for this.",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-06-25T12:18:15Z",
            "diff_hunk": "@@ -582,6 +582,12 @@ M.cmds = {\n     addr_type = 'ADDR_OTHER',\n     func = 'ex_menu',\n   },\n+  {\n+    command = 'connect',\n+    flags = bit.bor(BANG, EXTRA, NOSPC, NEEDARG),",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2166576427",
            "id": 2166576427,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6BI1Ur",
            "original_commit_id": "5bba27837dc5156c691f0628e18ce3b69b3c8657",
            "original_line": 587,
            "original_position": 6,
            "original_start_line": null,
            "path": "src/nvim/ex_cmds.lua",
            "position": 1,
            "pull_request_review_id": 2957928802,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166576427/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-06-25T12:18:15Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166576427",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2166578637"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166578637"
                }
            },
            "author_association": "MEMBER",
            "body": "i think this is usually handled by the flags in `src/nvim/ex_cmds.lua` ?",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-06-25T12:19:22Z",
            "diff_hunk": "@@ -5600,6 +5600,42 @@ static void ex_detach(exarg_T *eap)\n   }\n }\n \n+/// \":connect\"\n+///\n+/// Connects the current UI to a different server\n+///\n+/// \":connect <address>\" connects the currently running TUI to the server at the\n+/// given address and detaches the connected server\n+/// \":connect! <address>\" (with the bang (!)) connects the currently running TUI\n+/// to the server at the given address and stops the connected server if no\n+/// other UIs are attached to it\n+static void ex_connect(exarg_T *eap)\n+{\n+  if (eap->argc > 1) {\n+    emsg(\"connect: only one argument is allowed\");",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2166578637",
            "id": 2166578637,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6BI13N",
            "original_commit_id": "5bba27837dc5156c691f0628e18ce3b69b3c8657",
            "original_line": 5612,
            "original_position": 16,
            "original_start_line": null,
            "path": "src/nvim/ex_docmd.c",
            "position": 1,
            "pull_request_review_id": 2957932093,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166578637/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-06-25T12:19:22Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166578637",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2166579423"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166579423"
                }
            },
            "author_association": "MEMBER",
            "body": "use a ternary",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-06-25T12:19:47Z",
            "diff_hunk": "@@ -5600,6 +5600,42 @@ static void ex_detach(exarg_T *eap)\n   }\n }\n \n+/// \":connect\"\n+///\n+/// Connects the current UI to a different server\n+///\n+/// \":connect <address>\" connects the currently running TUI to the server at the\n+/// given address and detaches the connected server\n+/// \":connect! <address>\" (with the bang (!)) connects the currently running TUI\n+/// to the server at the given address and stops the connected server if no\n+/// other UIs are attached to it\n+static void ex_connect(exarg_T *eap)\n+{\n+  if (eap->argc > 1) {\n+    emsg(\"connect: only one argument is allowed\");\n+    return;\n+  }\n+\n+  bool stop_server = false;\n+  if (eap->forceit) {\n+    stop_server = (get_ui_number() == 1);",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2166579423",
            "id": 2166579423,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6BI2Df",
            "original_commit_id": "5bba27837dc5156c691f0628e18ce3b69b3c8657",
            "original_line": 5621,
            "original_position": 22,
            "original_start_line": 5619,
            "path": "src/nvim/ex_docmd.c",
            "position": 1,
            "pull_request_review_id": 2957933261,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166579423/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-06-25T12:19:48Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166579423",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2166585741"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166585741"
                }
            },
            "author_association": "MEMBER",
            "body": "detach should probably happen before `remote_ui_connect` ? seems wrong to emit a \"connect\" event followed by \"detach\".",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-06-25T12:22:45Z",
            "diff_hunk": "@@ -5600,6 +5600,42 @@ static void ex_detach(exarg_T *eap)\n   }\n }\n \n+/// \":connect\"\n+///\n+/// Connects the current UI to a different server\n+///\n+/// \":connect <address>\" connects the currently running TUI to the server at the\n+/// given address and detaches the connected server\n+/// \":connect! <address>\" (with the bang (!)) connects the currently running TUI\n+/// to the server at the given address and stops the connected server if no\n+/// other UIs are attached to it\n+static void ex_connect(exarg_T *eap)\n+{\n+  if (eap->argc > 1) {\n+    emsg(\"connect: only one argument is allowed\");\n+    return;\n+  }\n+\n+  bool stop_server = false;\n+  if (eap->forceit) {\n+    stop_server = (get_ui_number() == 1);\n+  }\n+\n+  Error err = ERROR_INIT;\n+  remote_ui_connect(current_ui, eap->arg, &err);\n+  if (ERROR_SET(&err)) {\n+    emsg(err.msg);\n+    api_clear_error(&err);\n+  }\n+\n+  if (stop_server) {\n+    exiting = true;\n+    getout(0);\n+  } else {\n+    ex_detach(NULL);",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2166585741",
            "id": 2166585741,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6BI3mN",
            "original_commit_id": "5bba27837dc5156c691f0628e18ce3b69b3c8657",
            "original_line": 5624,
            "original_position": 36,
            "original_start_line": null,
            "path": "src/nvim/ex_docmd.c",
            "position": 1,
            "pull_request_review_id": 2957944341,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166585741/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-06-25T12:22:46Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166585741",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2166588362"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166588362"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "There's a `EX_XFILE` flag which says `expand wildcards in extra part`, currently as is, special characters are treated literally in the server arg.",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-06-25T12:24:06Z",
            "diff_hunk": "@@ -582,6 +582,12 @@ M.cmds = {\n     addr_type = 'ADDR_OTHER',\n     func = 'ex_menu',\n   },\n+  {\n+    command = 'connect',\n+    flags = bit.bor(BANG, EXTRA, NOSPC, NEEDARG),",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2166588362",
            "id": 2166588362,
            "in_reply_to_id": 2166576427,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6BI4PK",
            "original_commit_id": "5bba27837dc5156c691f0628e18ce3b69b3c8657",
            "original_line": 587,
            "original_position": 6,
            "original_start_line": null,
            "path": "src/nvim/ex_cmds.lua",
            "position": 1,
            "pull_request_review_id": 2957948303,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166588362/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-06-25T12:24:06Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166588362",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/68201519?v=4",
                "events_url": "https://api.github.com/users/siddhantdev/events{/privacy}",
                "followers_url": "https://api.github.com/users/siddhantdev/followers",
                "following_url": "https://api.github.com/users/siddhantdev/following{/other_user}",
                "gists_url": "https://api.github.com/users/siddhantdev/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/siddhantdev",
                "id": 68201519,
                "login": "siddhantdev",
                "node_id": "MDQ6VXNlcjY4MjAxNTE5",
                "organizations_url": "https://api.github.com/users/siddhantdev/orgs",
                "received_events_url": "https://api.github.com/users/siddhantdev/received_events",
                "repos_url": "https://api.github.com/users/siddhantdev/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/siddhantdev/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/siddhantdev/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/siddhantdev",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2166595819"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166595819"
                }
            },
            "author_association": "MEMBER",
            "body": "Now we have both `restart_pending` and `connect_pending`. That's not good. There should be only 1 flag, and if it is set and we handle another event that would set it, that should be an error of some kind. For example, if a `restart` event is handled while handling a `connect` event, either we should log-and-ignore or we should raise an error somehow.\r\n\r\nI also don't think we need separate `connect_args` and `restart_args`.\r\n\r\n`connect_successful` also looks suspicious. \r\n\r\nPlease think about how we can avoid state where possible, and reduce the number of edge cases and conflicting states.",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-06-25T12:27:53Z",
            "diff_hunk": "@@ -283,6 +283,62 @@ void ui_client_event_raw_line(GridLineEvent *g)\n                (const schar_T *)grid_line_buf_char, grid_line_buf_attr);\n }\n \n+/// When a \"connect\" UI event is received, its arguments are saved here when\n+/// waiting for the server to exit.\n+static Array connect_args;\n+static bool connect_pending = false;\n+static bool connect_successful = false;",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2166595819",
            "id": 2166595819,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6BI6Dr",
            "original_commit_id": "5bba27837dc5156c691f0628e18ce3b69b3c8657",
            "original_line": 290,
            "original_position": 8,
            "original_start_line": null,
            "path": "src/nvim/ui_client.c",
            "position": 1,
            "pull_request_review_id": 2957959850,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166595819/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-06-25T12:29:19Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166595819",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2166627336"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166627336"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "I thought that `EXTRA` and `NOSPC` together were supposed to handle the case but neovim crashes if I call connect with more than one argument so the test is still required.",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-06-25T12:43:52Z",
            "diff_hunk": "@@ -5600,6 +5600,42 @@ static void ex_detach(exarg_T *eap)\n   }\n }\n \n+/// \":connect\"\n+///\n+/// Connects the current UI to a different server\n+///\n+/// \":connect <address>\" connects the currently running TUI to the server at the\n+/// given address and detaches the connected server\n+/// \":connect! <address>\" (with the bang (!)) connects the currently running TUI\n+/// to the server at the given address and stops the connected server if no\n+/// other UIs are attached to it\n+static void ex_connect(exarg_T *eap)\n+{\n+  if (eap->argc > 1) {\n+    emsg(\"connect: only one argument is allowed\");",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2166627336",
            "id": 2166627336,
            "in_reply_to_id": 2166578637,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6BJBwI",
            "original_commit_id": "5bba27837dc5156c691f0628e18ce3b69b3c8657",
            "original_line": 5612,
            "original_position": 16,
            "original_start_line": null,
            "path": "src/nvim/ex_docmd.c",
            "position": 1,
            "pull_request_review_id": 2958009921,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166627336/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-06-25T12:43:52Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166627336",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/68201519?v=4",
                "events_url": "https://api.github.com/users/siddhantdev/events{/privacy}",
                "followers_url": "https://api.github.com/users/siddhantdev/followers",
                "following_url": "https://api.github.com/users/siddhantdev/following{/other_user}",
                "gists_url": "https://api.github.com/users/siddhantdev/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/siddhantdev",
                "id": 68201519,
                "login": "siddhantdev",
                "node_id": "MDQ6VXNlcjY4MjAxNTE5",
                "organizations_url": "https://api.github.com/users/siddhantdev/orgs",
                "received_events_url": "https://api.github.com/users/siddhantdev/received_events",
                "repos_url": "https://api.github.com/users/siddhantdev/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/siddhantdev/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/siddhantdev/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/siddhantdev",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2166639838"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166639838"
                }
            },
            "author_association": "MEMBER",
            "body": "why isn't this check needed in any other `ex_foo` implementation ? maybe there's another flag  that can be set in ex_cmds.lua",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-06-25T12:50:04Z",
            "diff_hunk": "@@ -5600,6 +5600,42 @@ static void ex_detach(exarg_T *eap)\n   }\n }\n \n+/// \":connect\"\n+///\n+/// Connects the current UI to a different server\n+///\n+/// \":connect <address>\" connects the currently running TUI to the server at the\n+/// given address and detaches the connected server\n+/// \":connect! <address>\" (with the bang (!)) connects the currently running TUI\n+/// to the server at the given address and stops the connected server if no\n+/// other UIs are attached to it\n+static void ex_connect(exarg_T *eap)\n+{\n+  if (eap->argc > 1) {\n+    emsg(\"connect: only one argument is allowed\");",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2166639838",
            "id": 2166639838,
            "in_reply_to_id": 2166578637,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6BJEze",
            "original_commit_id": "5bba27837dc5156c691f0628e18ce3b69b3c8657",
            "original_line": 5612,
            "original_position": 16,
            "original_start_line": null,
            "path": "src/nvim/ex_docmd.c",
            "position": 1,
            "pull_request_review_id": 2958029230,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166639838/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-06-25T12:50:05Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166639838",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2166648064"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166648064"
                }
            },
            "author_association": "MEMBER",
            "body": "You should not use `eap->argc` here at all. Just use `eap->arg` directly.",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-06-25T12:54:08Z",
            "diff_hunk": "@@ -5600,6 +5600,42 @@ static void ex_detach(exarg_T *eap)\n   }\n }\n \n+/// \":connect\"\n+///\n+/// Connects the current UI to a different server\n+///\n+/// \":connect <address>\" connects the currently running TUI to the server at the\n+/// given address and detaches the connected server\n+/// \":connect! <address>\" (with the bang (!)) connects the currently running TUI\n+/// to the server at the given address and stops the connected server if no\n+/// other UIs are attached to it\n+static void ex_connect(exarg_T *eap)\n+{\n+  if (eap->argc > 1) {\n+    emsg(\"connect: only one argument is allowed\");",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2166648064",
            "id": 2166648064,
            "in_reply_to_id": 2166578637,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6BJG0A",
            "original_commit_id": "5bba27837dc5156c691f0628e18ce3b69b3c8657",
            "original_line": 5612,
            "original_position": 16,
            "original_start_line": null,
            "path": "src/nvim/ex_docmd.c",
            "position": 1,
            "pull_request_review_id": 2958041815,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166648064/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-06-25T12:54:09Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166648064",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2166654542"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166654542"
                }
            },
            "author_association": "MEMBER",
            "body": "How can a UI receive a `connect` event when it's already detached?",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-06-25T12:57:13Z",
            "diff_hunk": "@@ -5600,6 +5600,42 @@ static void ex_detach(exarg_T *eap)\n   }\n }\n \n+/// \":connect\"\n+///\n+/// Connects the current UI to a different server\n+///\n+/// \":connect <address>\" connects the currently running TUI to the server at the\n+/// given address and detaches the connected server\n+/// \":connect! <address>\" (with the bang (!)) connects the currently running TUI\n+/// to the server at the given address and stops the connected server if no\n+/// other UIs are attached to it\n+static void ex_connect(exarg_T *eap)\n+{\n+  if (eap->argc > 1) {\n+    emsg(\"connect: only one argument is allowed\");\n+    return;\n+  }\n+\n+  bool stop_server = false;\n+  if (eap->forceit) {\n+    stop_server = (get_ui_number() == 1);\n+  }\n+\n+  Error err = ERROR_INIT;\n+  remote_ui_connect(current_ui, eap->arg, &err);\n+  if (ERROR_SET(&err)) {\n+    emsg(err.msg);\n+    api_clear_error(&err);\n+  }\n+\n+  if (stop_server) {\n+    exiting = true;\n+    getout(0);\n+  } else {\n+    ex_detach(NULL);",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2166654542",
            "id": 2166654542,
            "in_reply_to_id": 2166585741,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6BJIZO",
            "original_commit_id": "5bba27837dc5156c691f0628e18ce3b69b3c8657",
            "original_line": 5624,
            "original_position": 36,
            "original_start_line": null,
            "path": "src/nvim/ex_docmd.c",
            "position": 1,
            "pull_request_review_id": 2958051975,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166654542/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-06-25T12:57:13Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166654542",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2166669792"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166669792"
                }
            },
            "author_association": "MEMBER",
            "body": "True. Actually, do we need an explicit \"detach\" event? I guess doing it this way allows the UIs to be simpler.",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-06-25T13:04:21Z",
            "diff_hunk": "@@ -5600,6 +5600,42 @@ static void ex_detach(exarg_T *eap)\n   }\n }\n \n+/// \":connect\"\n+///\n+/// Connects the current UI to a different server\n+///\n+/// \":connect <address>\" connects the currently running TUI to the server at the\n+/// given address and detaches the connected server\n+/// \":connect! <address>\" (with the bang (!)) connects the currently running TUI\n+/// to the server at the given address and stops the connected server if no\n+/// other UIs are attached to it\n+static void ex_connect(exarg_T *eap)\n+{\n+  if (eap->argc > 1) {\n+    emsg(\"connect: only one argument is allowed\");\n+    return;\n+  }\n+\n+  bool stop_server = false;\n+  if (eap->forceit) {\n+    stop_server = (get_ui_number() == 1);\n+  }\n+\n+  Error err = ERROR_INIT;\n+  remote_ui_connect(current_ui, eap->arg, &err);\n+  if (ERROR_SET(&err)) {\n+    emsg(err.msg);\n+    api_clear_error(&err);\n+  }\n+\n+  if (stop_server) {\n+    exiting = true;\n+    getout(0);\n+  } else {\n+    ex_detach(NULL);",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2166669792",
            "id": 2166669792,
            "in_reply_to_id": 2166585741,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6BJMHg",
            "original_commit_id": "5bba27837dc5156c691f0628e18ce3b69b3c8657",
            "original_line": 5624,
            "original_position": 36,
            "original_start_line": null,
            "path": "src/nvim/ex_docmd.c",
            "position": 1,
            "pull_request_review_id": 2958078696,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166669792/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-06-25T13:04:21Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166669792",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2166673996"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166673996"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "do you mean directly check if the string (`eap->arg`) has any spaces because setting the appropriate flags in `ex_cmds.lua` doesn't seem to help.",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-06-25T13:06:29Z",
            "diff_hunk": "@@ -5600,6 +5600,42 @@ static void ex_detach(exarg_T *eap)\n   }\n }\n \n+/// \":connect\"\n+///\n+/// Connects the current UI to a different server\n+///\n+/// \":connect <address>\" connects the currently running TUI to the server at the\n+/// given address and detaches the connected server\n+/// \":connect! <address>\" (with the bang (!)) connects the currently running TUI\n+/// to the server at the given address and stops the connected server if no\n+/// other UIs are attached to it\n+static void ex_connect(exarg_T *eap)\n+{\n+  if (eap->argc > 1) {\n+    emsg(\"connect: only one argument is allowed\");",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2166673996",
            "id": 2166673996,
            "in_reply_to_id": 2166578637,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6BJNJM",
            "original_commit_id": "5bba27837dc5156c691f0628e18ce3b69b3c8657",
            "original_line": 5612,
            "original_position": 16,
            "original_start_line": null,
            "path": "src/nvim/ex_docmd.c",
            "position": 1,
            "pull_request_review_id": 2958085811,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166673996/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-06-25T13:09:10Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166673996",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/68201519?v=4",
                "events_url": "https://api.github.com/users/siddhantdev/events{/privacy}",
                "followers_url": "https://api.github.com/users/siddhantdev/followers",
                "following_url": "https://api.github.com/users/siddhantdev/following{/other_user}",
                "gists_url": "https://api.github.com/users/siddhantdev/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/siddhantdev",
                "id": 68201519,
                "login": "siddhantdev",
                "node_id": "MDQ6VXNlcjY4MjAxNTE5",
                "organizations_url": "https://api.github.com/users/siddhantdev/orgs",
                "received_events_url": "https://api.github.com/users/siddhantdev/received_events",
                "repos_url": "https://api.github.com/users/siddhantdev/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/siddhantdev/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/siddhantdev/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/siddhantdev",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2166684335"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166684335"
                }
            },
            "author_association": "MEMBER",
            "body": "Hmm, what is the crash? Is it actually the server that crashes, or is it the client?",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-06-25T13:11:33Z",
            "diff_hunk": "@@ -5600,6 +5600,42 @@ static void ex_detach(exarg_T *eap)\n   }\n }\n \n+/// \":connect\"\n+///\n+/// Connects the current UI to a different server\n+///\n+/// \":connect <address>\" connects the currently running TUI to the server at the\n+/// given address and detaches the connected server\n+/// \":connect! <address>\" (with the bang (!)) connects the currently running TUI\n+/// to the server at the given address and stops the connected server if no\n+/// other UIs are attached to it\n+static void ex_connect(exarg_T *eap)\n+{\n+  if (eap->argc > 1) {\n+    emsg(\"connect: only one argument is allowed\");",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2166684335",
            "id": 2166684335,
            "in_reply_to_id": 2166578637,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6BJPqv",
            "original_commit_id": "5bba27837dc5156c691f0628e18ce3b69b3c8657",
            "original_line": 5612,
            "original_position": 16,
            "original_start_line": null,
            "path": "src/nvim/ex_docmd.c",
            "position": 1,
            "pull_request_review_id": 2958102964,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166684335/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-06-25T13:12:20Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166684335",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2166689604"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166689604"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Just the client. It seems like all of `eap->arg` including spaces is treated as the argument. For some reason `eap->argc` is `0` and even this test does not work, so I might have to manually check for spaces.",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-06-25T13:13:59Z",
            "diff_hunk": "@@ -5600,6 +5600,42 @@ static void ex_detach(exarg_T *eap)\n   }\n }\n \n+/// \":connect\"\n+///\n+/// Connects the current UI to a different server\n+///\n+/// \":connect <address>\" connects the currently running TUI to the server at the\n+/// given address and detaches the connected server\n+/// \":connect! <address>\" (with the bang (!)) connects the currently running TUI\n+/// to the server at the given address and stops the connected server if no\n+/// other UIs are attached to it\n+static void ex_connect(exarg_T *eap)\n+{\n+  if (eap->argc > 1) {\n+    emsg(\"connect: only one argument is allowed\");",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2166689604",
            "id": 2166689604,
            "in_reply_to_id": 2166578637,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6BJQ9E",
            "original_commit_id": "5bba27837dc5156c691f0628e18ce3b69b3c8657",
            "original_line": 5612,
            "original_position": 16,
            "original_start_line": null,
            "path": "src/nvim/ex_docmd.c",
            "position": 1,
            "pull_request_review_id": 2958111542,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166689604/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-06-25T13:21:29Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166689604",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/68201519?v=4",
                "events_url": "https://api.github.com/users/siddhantdev/events{/privacy}",
                "followers_url": "https://api.github.com/users/siddhantdev/followers",
                "following_url": "https://api.github.com/users/siddhantdev/following{/other_user}",
                "gists_url": "https://api.github.com/users/siddhantdev/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/siddhantdev",
                "id": 68201519,
                "login": "siddhantdev",
                "node_id": "MDQ6VXNlcjY4MjAxNTE5",
                "organizations_url": "https://api.github.com/users/siddhantdev/orgs",
                "received_events_url": "https://api.github.com/users/siddhantdev/received_events",
                "repos_url": "https://api.github.com/users/siddhantdev/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/siddhantdev/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/siddhantdev/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/siddhantdev",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2166707329"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166707329"
                }
            },
            "author_association": "MEMBER",
            "body": "Then you shouldn't add this check. An address containing spaces isn't the only kind of invalid address.",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-06-25T13:22:01Z",
            "diff_hunk": "@@ -5600,6 +5600,42 @@ static void ex_detach(exarg_T *eap)\n   }\n }\n \n+/// \":connect\"\n+///\n+/// Connects the current UI to a different server\n+///\n+/// \":connect <address>\" connects the currently running TUI to the server at the\n+/// given address and detaches the connected server\n+/// \":connect! <address>\" (with the bang (!)) connects the currently running TUI\n+/// to the server at the given address and stops the connected server if no\n+/// other UIs are attached to it\n+static void ex_connect(exarg_T *eap)\n+{\n+  if (eap->argc > 1) {\n+    emsg(\"connect: only one argument is allowed\");",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2166707329",
            "id": 2166707329,
            "in_reply_to_id": 2166578637,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6BJVSB",
            "original_commit_id": "5bba27837dc5156c691f0628e18ce3b69b3c8657",
            "original_line": 5612,
            "original_position": 16,
            "original_start_line": null,
            "path": "src/nvim/ex_docmd.c",
            "position": 1,
            "pull_request_review_id": 2958140729,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166707329/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-06-25T13:22:01Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2166707329",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2169868393"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2169868393"
                }
            },
            "author_association": "MEMBER",
            "body": "can use `get_ui_or_err` now (see other functions for example) :)",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-06-26T19:55:58Z",
            "diff_hunk": "@@ -305,6 +305,22 @@ bool remote_ui_restart(uint64_t channel_id, Error *err)\n   return true;\n }\n \n+// Returns true if the 'connect' event was successfully sent to the UI\n+void remote_ui_connect(uint64_t channel_id, char *server_address, Error *err)\n+{\n+  RemoteUI *ui = pmap_get(uint64_t)(&connected_uis, channel_id);\n+  if (!ui) {\n+    api_set_error(err, kErrorTypeException,\n+                  \"UI not attached to channel: %\" PRId64, channel_id);",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2169868393",
            "id": 2169868393,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6BVZBp",
            "original_commit_id": "29e10fe18681bfa998ccb19cd795411bb3eccbc9",
            "original_line": 314,
            "original_position": 10,
            "original_start_line": 311,
            "path": "src/nvim/api/ui.c",
            "position": 1,
            "pull_request_review_id": 2963419975,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2169868393/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-06-26T19:55:59Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2169868393",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2169881849"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2169881849"
                }
            },
            "author_association": "MEMBER",
            "body": "Something to think about later. Because this address is passed along without modification, users can `:connect <local>` even if they are currently connected to a remote machine. And that's good.\r\n\r\nBut something we need to think about for the \"remote ssh\", is can we present a useful menu that shows both local and remote addresses, even when connected to a remote machine? One way to do this might be for the UI to pass along locally-discovered addresses when it first connects to a remote.",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-06-26T20:03:24Z",
            "diff_hunk": "@@ -305,6 +305,22 @@ bool remote_ui_restart(uint64_t channel_id, Error *err)\n   return true;\n }\n \n+// Returns true if the 'connect' event was successfully sent to the UI\n+void remote_ui_connect(uint64_t channel_id, char *server_address, Error *err)\n+{\n+  RemoteUI *ui = pmap_get(uint64_t)(&connected_uis, channel_id);\n+  if (!ui) {\n+    api_set_error(err, kErrorTypeException,\n+                  \"UI not attached to channel: %\" PRId64, channel_id);\n+    return;\n+  }\n+\n+  MAXSIZE_TEMP_ARRAY(args, 1);\n+  ADD_C(args, CSTR_AS_OBJ(server_address));",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2169881849",
            "id": 2169881849,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6BVcT5",
            "original_commit_id": "29e10fe18681bfa998ccb19cd795411bb3eccbc9",
            "original_line": 317,
            "original_position": 15,
            "original_start_line": null,
            "path": "src/nvim/api/ui.c",
            "position": 1,
            "pull_request_review_id": 2963442140,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2169881849/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-06-26T20:03:41Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2169881849",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2169884963"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2169884963"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Passing along the local addresses when it first connects would only do half the job right? If another server is started after connecting to a remote then it won't show up on the list.",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-06-26T20:05:20Z",
            "diff_hunk": "@@ -305,6 +305,22 @@ bool remote_ui_restart(uint64_t channel_id, Error *err)\n   return true;\n }\n \n+// Returns true if the 'connect' event was successfully sent to the UI\n+void remote_ui_connect(uint64_t channel_id, char *server_address, Error *err)\n+{\n+  RemoteUI *ui = pmap_get(uint64_t)(&connected_uis, channel_id);\n+  if (!ui) {\n+    api_set_error(err, kErrorTypeException,\n+                  \"UI not attached to channel: %\" PRId64, channel_id);\n+    return;\n+  }\n+\n+  MAXSIZE_TEMP_ARRAY(args, 1);\n+  ADD_C(args, CSTR_AS_OBJ(server_address));",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2169884963",
            "id": 2169884963,
            "in_reply_to_id": 2169881849,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6BVdEj",
            "original_commit_id": "29e10fe18681bfa998ccb19cd795411bb3eccbc9",
            "original_line": 317,
            "original_position": 15,
            "original_start_line": null,
            "path": "src/nvim/api/ui.c",
            "position": 1,
            "pull_request_review_id": 2963447179,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2169884963/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-06-26T20:05:20Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2169884963",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/68201519?v=4",
                "events_url": "https://api.github.com/users/siddhantdev/events{/privacy}",
                "followers_url": "https://api.github.com/users/siddhantdev/followers",
                "following_url": "https://api.github.com/users/siddhantdev/following{/other_user}",
                "gists_url": "https://api.github.com/users/siddhantdev/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/siddhantdev",
                "id": 68201519,
                "login": "siddhantdev",
                "node_id": "MDQ6VXNlcjY4MjAxNTE5",
                "organizations_url": "https://api.github.com/users/siddhantdev/orgs",
                "received_events_url": "https://api.github.com/users/siddhantdev/received_events",
                "repos_url": "https://api.github.com/users/siddhantdev/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/siddhantdev/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/siddhantdev/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/siddhantdev",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2169895174"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2169895174"
                }
            },
            "author_association": "MEMBER",
            "body": "> If another server is started after connecting to a remote then it won't show up on the list.\r\n\r\nyeah, that's definitely out of scope for this project :) but we could support that by having local Nvims make rpc calls to remote Nvims when they startup.",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-06-26T20:10:47Z",
            "diff_hunk": "@@ -305,6 +305,22 @@ bool remote_ui_restart(uint64_t channel_id, Error *err)\n   return true;\n }\n \n+// Returns true if the 'connect' event was successfully sent to the UI\n+void remote_ui_connect(uint64_t channel_id, char *server_address, Error *err)\n+{\n+  RemoteUI *ui = pmap_get(uint64_t)(&connected_uis, channel_id);\n+  if (!ui) {\n+    api_set_error(err, kErrorTypeException,\n+                  \"UI not attached to channel: %\" PRId64, channel_id);\n+    return;\n+  }\n+\n+  MAXSIZE_TEMP_ARRAY(args, 1);\n+  ADD_C(args, CSTR_AS_OBJ(server_address));",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2169895174",
            "id": 2169895174,
            "in_reply_to_id": 2169881849,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6BVfkG",
            "original_commit_id": "29e10fe18681bfa998ccb19cd795411bb3eccbc9",
            "original_line": 317,
            "original_position": 15,
            "original_start_line": null,
            "path": "src/nvim/api/ui.c",
            "position": 1,
            "pull_request_review_id": 2963464676,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2169895174/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-06-26T20:10:47Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2169895174",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2169898521"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2169898521"
                }
            },
            "author_association": "MEMBER",
            "body": "Added these ideas to \"out of scope\" [section](https://github.com/neovim/neovim/issues/34257#issuecomment-2927420708).",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-06-26T20:12:42Z",
            "diff_hunk": "@@ -305,6 +305,22 @@ bool remote_ui_restart(uint64_t channel_id, Error *err)\n   return true;\n }\n \n+// Returns true if the 'connect' event was successfully sent to the UI\n+void remote_ui_connect(uint64_t channel_id, char *server_address, Error *err)\n+{\n+  RemoteUI *ui = pmap_get(uint64_t)(&connected_uis, channel_id);\n+  if (!ui) {\n+    api_set_error(err, kErrorTypeException,\n+                  \"UI not attached to channel: %\" PRId64, channel_id);\n+    return;\n+  }\n+\n+  MAXSIZE_TEMP_ARRAY(args, 1);\n+  ADD_C(args, CSTR_AS_OBJ(server_address));",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2169898521",
            "id": 2169898521,
            "in_reply_to_id": 2169881849,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6BVgYZ",
            "original_commit_id": "29e10fe18681bfa998ccb19cd795411bb3eccbc9",
            "original_line": 317,
            "original_position": 15,
            "original_start_line": null,
            "path": "src/nvim/api/ui.c",
            "position": 1,
            "pull_request_review_id": 2963469639,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2169898521/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-06-26T20:12:43Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2169898521",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2169945888"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2169945888"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "added a test for this.",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-06-26T20:29:22Z",
            "diff_hunk": "@@ -582,6 +582,12 @@ M.cmds = {\n     addr_type = 'ADDR_OTHER',\n     func = 'ex_menu',\n   },\n+  {\n+    command = 'connect',\n+    flags = bit.bor(BANG, EXTRA, NOSPC, NEEDARG),",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2169945888",
            "id": 2169945888,
            "in_reply_to_id": 2166576427,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6BVr8g",
            "original_commit_id": "5bba27837dc5156c691f0628e18ce3b69b3c8657",
            "original_line": 587,
            "original_position": 6,
            "original_start_line": null,
            "path": "src/nvim/ex_cmds.lua",
            "position": 1,
            "pull_request_review_id": 2963541818,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2169945888/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-06-26T20:29:22Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2169945888",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/68201519?v=4",
                "events_url": "https://api.github.com/users/siddhantdev/events{/privacy}",
                "followers_url": "https://api.github.com/users/siddhantdev/followers",
                "following_url": "https://api.github.com/users/siddhantdev/following{/other_user}",
                "gists_url": "https://api.github.com/users/siddhantdev/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/siddhantdev",
                "id": 68201519,
                "login": "siddhantdev",
                "node_id": "MDQ6VXNlcjY4MjAxNTE5",
                "organizations_url": "https://api.github.com/users/siddhantdev/orgs",
                "received_events_url": "https://api.github.com/users/siddhantdev/received_events",
                "repos_url": "https://api.github.com/users/siddhantdev/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/siddhantdev/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/siddhantdev/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/siddhantdev",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2170143748"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2170143748"
                }
            },
            "author_association": "MEMBER",
            "body": "if connected=true we would never want to call `ui_client_may_restart_server`, right?\r\n\r\nnot a blocker for this pr, but just a reminder",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-06-26T22:24:37Z",
            "diff_hunk": "@@ -449,8 +449,9 @@ static void on_proc_exit(Proc *proc)\n         && proc == &server_chan->stream.proc) {\n       // Need to call ui_client_may_restart_server() here as well, as sometimes\n       // rpc_close_event() hasn't been called yet (also see comments above).\n+      bool connected = ui_client_may_connect();\n       ui_client_may_restart_server();",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2170143748",
            "id": 2170143748,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6BWcQE",
            "original_commit_id": "dd0f8047bd5994877603eb88b182a0b2c34dd2a8",
            "original_line": 450,
            "original_position": 5,
            "original_start_line": null,
            "path": "src/nvim/event/proc.c",
            "position": 1,
            "pull_request_review_id": 2963888243,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2170143748/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-06-26T22:24:37Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2170143748",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2170276345"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2170276345"
                }
            },
            "author_association": "MEMBER",
            "body": "I don't think this postponing is needed. Unlike `:restart` which requires the new server to be started after the old server exits, `:connect` has no such requirements as the new server is already there, so you can just handle the `connect` UI event immediately.",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-06-26T23:40:30Z",
            "diff_hunk": "@@ -283,6 +283,62 @@ void ui_client_event_raw_line(GridLineEvent *g)\n                (const schar_T *)grid_line_buf_char, grid_line_buf_attr);\n }\n \n+/// When a \"connect\" UI event is received, its arguments are saved here when\n+/// waiting for the server to exit.\n+static Array connect_args;\n+static bool connect_pending = false;\n+static bool connect_successful = false;\n+\n+void ui_client_event_connect(Array args)\n+{\n+  api_free_array(connect_args);\n+  connect_args = copy_array(args, NULL);\n+  connect_pending = true;\n+}",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2170276345",
            "id": 2170276345,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6BW8n5",
            "original_commit_id": "dd0f8047bd5994877603eb88b182a0b2c34dd2a8",
            "original_line": 293,
            "original_position": 15,
            "original_start_line": 286,
            "path": "src/nvim/ui_client.c",
            "position": 1,
            "pull_request_review_id": 2964086826,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2170276345/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-06-26T23:41:36Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2170276345",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2170281489"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2170281489"
                }
            },
            "author_association": "MEMBER",
            "body": "I think this entire postponing isn't needed at all. See my comment below.",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-06-26T23:42:06Z",
            "diff_hunk": "@@ -283,6 +283,62 @@ void ui_client_event_raw_line(GridLineEvent *g)\n                (const schar_T *)grid_line_buf_char, grid_line_buf_attr);\n }\n \n+/// When a \"connect\" UI event is received, its arguments are saved here when\n+/// waiting for the server to exit.\n+static Array connect_args;\n+static bool connect_pending = false;\n+static bool connect_successful = false;",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2170281489",
            "id": 2170281489,
            "in_reply_to_id": 2166595819,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6BW94R",
            "original_commit_id": "5bba27837dc5156c691f0628e18ce3b69b3c8657",
            "original_line": 290,
            "original_position": 8,
            "original_start_line": null,
            "path": "src/nvim/ui_client.c",
            "position": 1,
            "pull_request_review_id": 2964092868,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2170281489/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-06-26T23:42:06Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2170281489",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2171387754"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2171387754"
                }
            },
            "author_association": "MEMBER",
            "body": "use `PRId64`, see other ILOG in this file for example\r\n\r\n```\r\nsrc/nvim/ui_client.c:337:36: warning: format specifies type 'unsigned long' but the argument has type 'uint64_t' (aka 'unsigned long long') [-\r\nWformat]\r\n  ILOG(\"Connected to channel %lu\", ui_client_channel_id);\r\n                             ~~~   ^~~~~~~~~~~~~~~~~~~~\r\n                             %llu\r\n```",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-06-27T09:29:06Z",
            "diff_hunk": "@@ -283,6 +283,62 @@ void ui_client_event_raw_line(GridLineEvent *g)\n                (const schar_T *)grid_line_buf_char, grid_line_buf_attr);\n }\n \n+/// When a \"connect\" UI event is received, its arguments are saved here when\n+/// waiting for the server to exit.\n+static Array connect_args;\n+static bool connect_pending = false;\n+static bool connect_successful = false;\n+\n+void ui_client_event_connect(Array args)\n+{\n+  api_free_array(connect_args);\n+  connect_args = copy_array(args, NULL);\n+  connect_pending = true;\n+}\n+\n+/// Called when the current server has exited.\n+bool ui_client_may_connect(void)\n+{\n+  if (!connect_pending) {\n+    return false;\n+  }\n+  if (connect_successful) {\n+    return true;\n+  }\n+  connect_pending = false;\n+  if (connect_args.size < 1 || connect_args.items[0].type != kObjectTypeString) {\n+    ELOG(\"Error handling UI event 'connect'\");\n+    api_free_array(connect_args);\n+    connect_args = (Array)ARRAY_DICT_INIT;\n+    return false;\n+  }\n+\n+  char *server_address = connect_args.items[0].data.string.data;\n+  // connect a channel to server at server_address\n+  CallbackReader on_data = CALLBACK_READER_INIT;\n+  const char *error = NULL;\n+  bool is_tcp = strrchr(server_address, ':') ? true : false;\n+  uint64_t chan = channel_connect(is_tcp, server_address, true, on_data, 50, &error);\n+  if (error) {\n+    api_free_array(connect_args);\n+    connect_args = (Array)ARRAY_DICT_INIT;\n+    ELOG(\"Error handling UI event 'connect': %s\", error);\n+    return false;\n+  }\n+\n+  // attach the UI to the new channel\n+  ui_client_channel_id = chan;\n+  ui_client_is_remote = true;\n+  ui_client_attach(tui_width, tui_height, tui_term, tui_rgb);\n+\n+  api_free_array(connect_args);\n+  connect_args = (Array)ARRAY_DICT_INIT;\n+\n+  ILOG(\"Connected to channel %lu\", ui_client_channel_id);",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2171387754",
            "id": 2171387754,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6BbL9q",
            "original_commit_id": "dd0f8047bd5994877603eb88b182a0b2c34dd2a8",
            "original_line": 337,
            "original_position": 55,
            "original_start_line": null,
            "path": "src/nvim/ui_client.c",
            "position": 1,
            "pull_request_review_id": 2965646021,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2171387754/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-06-27T09:29:06Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2171387754",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2171397435"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2171397435"
                }
            },
            "author_association": "MEMBER",
            "body": "Side-note: not a blocker for this PR, but need think about how to show an error if this logic fails. E.g. `:connect bogus` currently just exits without saying why.",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-06-27T09:32:20Z",
            "diff_hunk": "@@ -283,6 +283,62 @@ void ui_client_event_raw_line(GridLineEvent *g)\n                (const schar_T *)grid_line_buf_char, grid_line_buf_attr);\n }\n \n+/// When a \"connect\" UI event is received, its arguments are saved here when\n+/// waiting for the server to exit.\n+static Array connect_args;\n+static bool connect_pending = false;\n+static bool connect_successful = false;\n+\n+void ui_client_event_connect(Array args)\n+{\n+  api_free_array(connect_args);\n+  connect_args = copy_array(args, NULL);\n+  connect_pending = true;\n+}",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2171397435",
            "id": 2171397435,
            "in_reply_to_id": 2170276345,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6BbOU7",
            "original_commit_id": "dd0f8047bd5994877603eb88b182a0b2c34dd2a8",
            "original_line": 293,
            "original_position": 15,
            "original_start_line": 286,
            "path": "src/nvim/ui_client.c",
            "position": 1,
            "pull_request_review_id": 2965661200,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2171397435/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-06-27T09:32:21Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2171397435",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2172016451"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2172016451"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "The problem I encountered when trying to handle `connect` immediately was that the UI client can only connect to one server at a time, so it needs to be detached first. If it first connects and then detaches, the UI just stops, so the connection needs to happen after the channel has closed but before the UI stops, hence the delay.\r\n\r\nSince we want to avoid multiple states, I one way I thought of was to just maintain one value which maintains the state: not pending, restart pending or connect pending and an array which contains the related args. Then instead of two different functions which checks for each possible type, it's managed in one place, `process_pending_events()` or something similar.",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-06-27T13:09:32Z",
            "diff_hunk": "@@ -283,6 +283,62 @@ void ui_client_event_raw_line(GridLineEvent *g)\n                (const schar_T *)grid_line_buf_char, grid_line_buf_attr);\n }\n \n+/// When a \"connect\" UI event is received, its arguments are saved here when\n+/// waiting for the server to exit.\n+static Array connect_args;\n+static bool connect_pending = false;\n+static bool connect_successful = false;\n+\n+void ui_client_event_connect(Array args)\n+{\n+  api_free_array(connect_args);\n+  connect_args = copy_array(args, NULL);\n+  connect_pending = true;\n+}",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2172016451",
            "id": 2172016451,
            "in_reply_to_id": 2170276345,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6BdldD",
            "original_commit_id": "dd0f8047bd5994877603eb88b182a0b2c34dd2a8",
            "original_line": 293,
            "original_position": 15,
            "original_start_line": 286,
            "path": "src/nvim/ui_client.c",
            "position": 1,
            "pull_request_review_id": 2966536457,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2172016451/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-06-27T13:10:20Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2172016451",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/68201519?v=4",
                "events_url": "https://api.github.com/users/siddhantdev/events{/privacy}",
                "followers_url": "https://api.github.com/users/siddhantdev/followers",
                "following_url": "https://api.github.com/users/siddhantdev/following{/other_user}",
                "gists_url": "https://api.github.com/users/siddhantdev/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/siddhantdev",
                "id": 68201519,
                "login": "siddhantdev",
                "node_id": "MDQ6VXNlcjY4MjAxNTE5",
                "organizations_url": "https://api.github.com/users/siddhantdev/orgs",
                "received_events_url": "https://api.github.com/users/siddhantdev/received_events",
                "repos_url": "https://api.github.com/users/siddhantdev/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/siddhantdev/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/siddhantdev/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/siddhantdev",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2172021333"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2172021333"
                }
            },
            "author_association": "MEMBER",
            "body": "> If it first connects and then detaches, the UI just stops\r\n\r\nIf you set the value of `ui_client_channel_id` to the new server after connecting, this shouldn't happen.",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-06-27T13:12:15Z",
            "diff_hunk": "@@ -283,6 +283,62 @@ void ui_client_event_raw_line(GridLineEvent *g)\n                (const schar_T *)grid_line_buf_char, grid_line_buf_attr);\n }\n \n+/// When a \"connect\" UI event is received, its arguments are saved here when\n+/// waiting for the server to exit.\n+static Array connect_args;\n+static bool connect_pending = false;\n+static bool connect_successful = false;\n+\n+void ui_client_event_connect(Array args)\n+{\n+  api_free_array(connect_args);\n+  connect_args = copy_array(args, NULL);\n+  connect_pending = true;\n+}",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2172021333",
            "id": 2172021333,
            "in_reply_to_id": 2170276345,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6BdmpV",
            "original_commit_id": "dd0f8047bd5994877603eb88b182a0b2c34dd2a8",
            "original_line": 293,
            "original_position": 15,
            "original_start_line": 286,
            "path": "src/nvim/ui_client.c",
            "position": 1,
            "pull_request_review_id": 2966544321,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2172021333/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-06-27T13:12:39Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2172021333",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2193315295"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2193315295"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "I've tried a few different things, but the problem always ends up being this:\r\n\r\nI tried to connect to the new server before pushing the `connect` event and passing along the channel id, but this creates a channel between the current server and the new one, not the UI client and the new server like we want.\r\n\r\nSo, you need to connect to the new server from the UI client. When connecting to the new server from the UI client, `loop_uv_run` (from `src/nvim/event/loop.c`) is called from `channel_connect` (with a few different functions in between).\r\n\r\nIn `loop_uv_run`, there is a condition `if (loop->recursive++)` which gets triggered and aborts the program, causing the crash. The only comment in the if statement states: `Should not re-enter uv_run`.\r\n\r\nI'm not sure what this is protecting against, but when the server connection stuff is done with the postponement, I think the server and ui client get disconnected and then this part of the code is run, so probably it's preventing the ui client from connecting to two different servers. I understand that we want to avoid multiple states as much as possible, but I'm not sure if it's possible here.\r\n\r\nRelevant code:\r\n`loop_uv_run`: https://github.com/neovim/neovim/blob/435f03ee106a548c2e5fd6c10005f5ae2a29a5a4/src/nvim/event/loop.c#L43-L47",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-07-08T19:42:22Z",
            "diff_hunk": "@@ -283,6 +283,62 @@ void ui_client_event_raw_line(GridLineEvent *g)\n                (const schar_T *)grid_line_buf_char, grid_line_buf_attr);\n }\n \n+/// When a \"connect\" UI event is received, its arguments are saved here when\n+/// waiting for the server to exit.\n+static Array connect_args;\n+static bool connect_pending = false;\n+static bool connect_successful = false;\n+\n+void ui_client_event_connect(Array args)\n+{\n+  api_free_array(connect_args);\n+  connect_args = copy_array(args, NULL);\n+  connect_pending = true;\n+}",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2193315295",
            "id": 2193315295,
            "in_reply_to_id": 2170276345,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6Cu1Xf",
            "original_commit_id": "dd0f8047bd5994877603eb88b182a0b2c34dd2a8",
            "original_line": 293,
            "original_position": 15,
            "original_start_line": 286,
            "path": "src/nvim/ui_client.c",
            "position": 1,
            "pull_request_review_id": 2998912064,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2193315295/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-07-08T19:42:23Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2193315295",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/68201519?v=4",
                "events_url": "https://api.github.com/users/siddhantdev/events{/privacy}",
                "followers_url": "https://api.github.com/users/siddhantdev/followers",
                "following_url": "https://api.github.com/users/siddhantdev/following{/other_user}",
                "gists_url": "https://api.github.com/users/siddhantdev/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/siddhantdev",
                "id": 68201519,
                "login": "siddhantdev",
                "node_id": "MDQ6VXNlcjY4MjAxNTE5",
                "organizations_url": "https://api.github.com/users/siddhantdev/orgs",
                "received_events_url": "https://api.github.com/users/siddhantdev/received_events",
                "repos_url": "https://api.github.com/users/siddhantdev/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/siddhantdev/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/siddhantdev/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/siddhantdev",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2193547083"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2193547083"
                }
            },
            "author_association": "MEMBER",
            "body": "Ah, I didn't realize that `channel_connect()` has a timeout. However, in this case you can just use `multiqueue_put()` to schedule the the `channel_connect()` on `main_loop.fast_events` (which allows carrying arguments along with the event), and do not have to wait for the server to disconnect.",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-07-08T22:36:39Z",
            "diff_hunk": "@@ -283,6 +283,62 @@ void ui_client_event_raw_line(GridLineEvent *g)\n                (const schar_T *)grid_line_buf_char, grid_line_buf_attr);\n }\n \n+/// When a \"connect\" UI event is received, its arguments are saved here when\n+/// waiting for the server to exit.\n+static Array connect_args;\n+static bool connect_pending = false;\n+static bool connect_successful = false;\n+\n+void ui_client_event_connect(Array args)\n+{\n+  api_free_array(connect_args);\n+  connect_args = copy_array(args, NULL);\n+  connect_pending = true;\n+}",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2193547083",
            "id": 2193547083,
            "in_reply_to_id": 2170276345,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6Cvt9L",
            "original_commit_id": "dd0f8047bd5994877603eb88b182a0b2c34dd2a8",
            "original_line": 293,
            "original_position": 15,
            "original_start_line": 286,
            "path": "src/nvim/ui_client.c",
            "position": 1,
            "pull_request_review_id": 2999252808,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2193547083/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-07-08T22:36:39Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2193547083",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2197857820"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2197857820"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "This worked, thanks! There's some issues now with the order of code execution but I should be able to work it out. Specifically, the `detach` / `getout` calls are executed before the `channel_connect` can be reached. This is fine for `detach`, but `getout` stops the ui client before it can connect to the new server.",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-07-10T14:11:39Z",
            "diff_hunk": "@@ -283,6 +283,62 @@ void ui_client_event_raw_line(GridLineEvent *g)\n                (const schar_T *)grid_line_buf_char, grid_line_buf_attr);\n }\n \n+/// When a \"connect\" UI event is received, its arguments are saved here when\n+/// waiting for the server to exit.\n+static Array connect_args;\n+static bool connect_pending = false;\n+static bool connect_successful = false;\n+\n+void ui_client_event_connect(Array args)\n+{\n+  api_free_array(connect_args);\n+  connect_args = copy_array(args, NULL);\n+  connect_pending = true;\n+}",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2197857820",
            "id": 2197857820,
            "in_reply_to_id": 2170276345,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6DAKYc",
            "original_commit_id": "dd0f8047bd5994877603eb88b182a0b2c34dd2a8",
            "original_line": 293,
            "original_position": 15,
            "original_start_line": 286,
            "path": "src/nvim/ui_client.c",
            "position": 1,
            "pull_request_review_id": 3005894608,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 2,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2197857820/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-07-10T17:08:05Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2197857820",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/68201519?v=4",
                "events_url": "https://api.github.com/users/siddhantdev/events{/privacy}",
                "followers_url": "https://api.github.com/users/siddhantdev/followers",
                "following_url": "https://api.github.com/users/siddhantdev/following{/other_user}",
                "gists_url": "https://api.github.com/users/siddhantdev/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/siddhantdev",
                "id": 68201519,
                "login": "siddhantdev",
                "node_id": "MDQ6VXNlcjY4MjAxNTE5",
                "organizations_url": "https://api.github.com/users/siddhantdev/orgs",
                "received_events_url": "https://api.github.com/users/siddhantdev/received_events",
                "repos_url": "https://api.github.com/users/siddhantdev/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/siddhantdev/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/siddhantdev/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/siddhantdev",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2203577999"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2203577999"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n                Note: If the current UI hasn't implemented the \"connect\" UI\r\n                event, this command is equivalent to |:detach|.\r\n```",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-07-13T22:45:42Z",
            "diff_hunk": "@@ -85,6 +85,22 @@ Restart Nvim\n :restart!\n                 Force restarts the Nvim server, abandoning unsaved buffers.\n \n+------------------------------------------------------------------------------\n+Connect UI to a different server\n+\n+                                                *:connect*\n+\n+:connect {address}\n+                Detaches the UI from the server it is currently attached to\n+                and attaches it to the server at {address} instead.\n+\n+                Note: If the curennt UI hasn't implemented the \"connect\" UI\n+                event, this command is equivalent to |:detach|",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2203577999",
            "id": 2203577999,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6DV-6P",
            "original_commit_id": "1c696d157b26975226b9786bf00b26e9ca1adbab",
            "original_line": 98,
            "original_position": 14,
            "original_start_line": 97,
            "path": "runtime/doc/gui.txt",
            "position": 1,
            "pull_request_review_id": 3014379701,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2203577999/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-07-13T22:45:42Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2203577999",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2203579181"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2203579181"
                }
            },
            "author_association": "MEMBER",
            "body": "Why is the error message printed here when there is already proper handling in `ex_connect()`?",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-07-13T22:47:25Z",
            "diff_hunk": "@@ -305,6 +305,21 @@ bool remote_ui_restart(uint64_t channel_id, Error *err)\n   return true;\n }\n \n+// Returns true if the 'connect' event was successfully sent to the UI\n+void remote_ui_connect(uint64_t channel_id, char *server_address, Error *err)\n+{\n+  RemoteUI *ui = get_ui_or_err(channel_id, err);\n+  if (!ui) {\n+    emsg(err->msg);\n+    return;\n+  }",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2203579181",
            "id": 2203579181,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6DV_Mt",
            "original_commit_id": "1c696d157b26975226b9786bf00b26e9ca1adbab",
            "original_line": 328,
            "original_position": 11,
            "original_start_line": 312,
            "path": "src/nvim/api/ui.c",
            "position": 1,
            "pull_request_review_id": 3014381108,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2203579181/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-07-13T22:47:25Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2203579181",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2204370790"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2204370790"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "When I was changing the code to connect without, I thought it would be better to handle the error in `ex_connect()`, must have forgotten to remove it from here. Fixed it!",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-07-14T09:37:29Z",
            "diff_hunk": "@@ -305,6 +305,21 @@ bool remote_ui_restart(uint64_t channel_id, Error *err)\n   return true;\n }\n \n+// Returns true if the 'connect' event was successfully sent to the UI\n+void remote_ui_connect(uint64_t channel_id, char *server_address, Error *err)\n+{\n+  RemoteUI *ui = get_ui_or_err(channel_id, err);\n+  if (!ui) {\n+    emsg(err->msg);\n+    return;\n+  }",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2204370790",
            "id": 2204370790,
            "in_reply_to_id": 2203579181,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6DZAdm",
            "original_commit_id": "1c696d157b26975226b9786bf00b26e9ca1adbab",
            "original_line": 328,
            "original_position": 11,
            "original_start_line": 312,
            "path": "src/nvim/api/ui.c",
            "position": 1,
            "pull_request_review_id": 3015555517,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2204370790/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-07-14T09:37:30Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2204370790",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/68201519?v=4",
                "events_url": "https://api.github.com/users/siddhantdev/events{/privacy}",
                "followers_url": "https://api.github.com/users/siddhantdev/followers",
                "following_url": "https://api.github.com/users/siddhantdev/following{/other_user}",
                "gists_url": "https://api.github.com/users/siddhantdev/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/siddhantdev",
                "id": 68201519,
                "login": "siddhantdev",
                "node_id": "MDQ6VXNlcjY4MjAxNTE5",
                "organizations_url": "https://api.github.com/users/siddhantdev/orgs",
                "received_events_url": "https://api.github.com/users/siddhantdev/received_events",
                "repos_url": "https://api.github.com/users/siddhantdev/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/siddhantdev/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/siddhantdev/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/siddhantdev",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2234546923"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2234546923"
                }
            },
            "author_association": "MEMBER",
            "body": "the docstring looks wrong, it doesn't return anything",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-07-28T03:17:57Z",
            "diff_hunk": "@@ -305,6 +305,20 @@ bool remote_ui_restart(uint64_t channel_id, Error *err)\n   return true;\n }\n \n+// Returns true if the 'connect' event was successfully sent to the UI\n+void remote_ui_connect(uint64_t channel_id, char *server_address, Error *err)",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2234546923",
            "id": 2234546923,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6FMHrr",
            "original_commit_id": "8d11ae79bacac213f8728c79f1608512d8953d38",
            "original_line": 309,
            "original_position": 5,
            "original_start_line": null,
            "path": "src/nvim/api/ui.c",
            "position": 1,
            "pull_request_review_id": 3060181690,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2234546923/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-07-28T03:17:57Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2234546923",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2234610801"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2234610801"
                }
            },
            "author_association": "MEMBER",
            "body": "Does it fix the ASAN issue (and possibly other race conditions) if you move this logic into the client? Note: set [chan->detach = true](https://github.com/neovim/neovim/blob/d08b265111548a40924acdbc2dcb2e4cbd901188/src/nvim/ex_docmd.c#L5598-L5603) before calling `remote_ui_connect` above.\n\nIt's valuable for logic to live in the sever where possible, because that simplifies the clients (e.g. `:detach` works without explicit client support). But `:connect` can't work without client support, so we don't gain much here.",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-07-28T04:05:49Z",
            "diff_hunk": "@@ -5600,6 +5600,32 @@ static void ex_detach(exarg_T *eap)\n   }\n }\n \n+/// \":connect\"\n+///\n+/// Connects the current UI to a different server\n+///\n+/// \":connect <address>\" detaches the current UI and connects to the given server.\n+/// \":connect! <address>\" stops the current server if no other UIs are attached, then connects to the given server.\n+static void ex_connect(exarg_T *eap)\n+{\n+  bool stop_server = eap->forceit ? (ui_active() == 1) : false;\n+\n+  Error err = ERROR_INIT;\n+  remote_ui_connect(current_ui, eap->arg, &err);\n+\n+  if (ERROR_SET(&err)) {\n+    emsg(err.msg);\n+    api_clear_error(&err);\n+    return;\n+  }\n+\n+  ex_detach(NULL);\n+  if (stop_server) {\n+    exiting = true;\n+    getout(0);",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2234610801",
            "id": 2234610801,
            "line": 5674,
            "node_id": "PRRC_kwDOAPphoM6FMXRx",
            "original_commit_id": "8d11ae79bacac213f8728c79f1608512d8953d38",
            "original_line": 5674,
            "original_position": 26,
            "original_start_line": 5622,
            "path": "src/nvim/ex_docmd.c",
            "position": 26,
            "pull_request_review_id": 3060267050,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2234610801/reactions"
            },
            "side": "RIGHT",
            "start_line": 5671,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-07-28T04:05:49Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2234610801",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2234614024"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2234614024"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\n  bool is_tcp = !!strrchr(server_address, ':');\n```",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-07-28T04:07:21Z",
            "diff_hunk": "@@ -283,6 +283,38 @@ void ui_client_event_raw_line(GridLineEvent *g)\n                (const schar_T *)grid_line_buf_char, grid_line_buf_attr);\n }\n \n+void ui_client_event_connect(Array args)\n+{\n+  if (args.size < 1 || args.items[0].type != kObjectTypeString) {\n+    ELOG(\"Error handling UI event 'connect'\");\n+    return;\n+  }\n+\n+  char *server_address = args.items[0].data.string.data;\n+  multiqueue_put(main_loop.fast_events, channel_connect_event, server_address);\n+}\n+\n+static void channel_connect_event(void **argv)\n+{\n+  char *server_address = argv[0];\n+\n+  const char *error = \"\";\n+  bool is_tcp = strrchr(server_address, ':') ? true : false;",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2234614024",
            "id": 2234614024,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6FMYEI",
            "original_commit_id": "8d11ae79bacac213f8728c79f1608512d8953d38",
            "original_line": 302,
            "original_position": 20,
            "original_start_line": null,
            "path": "src/nvim/ui_client.c",
            "position": 1,
            "pull_request_review_id": 3060271700,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2234614024/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-07-28T04:07:21Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2234614024",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2234614879"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2234614879"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\n  char *server_addr = argv[0];\n```",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-07-28T04:07:56Z",
            "diff_hunk": "@@ -283,6 +283,38 @@ void ui_client_event_raw_line(GridLineEvent *g)\n                (const schar_T *)grid_line_buf_char, grid_line_buf_attr);\n }\n \n+void ui_client_event_connect(Array args)\n+{\n+  if (args.size < 1 || args.items[0].type != kObjectTypeString) {\n+    ELOG(\"Error handling UI event 'connect'\");\n+    return;\n+  }\n+\n+  char *server_address = args.items[0].data.string.data;\n+  multiqueue_put(main_loop.fast_events, channel_connect_event, server_address);\n+}\n+\n+static void channel_connect_event(void **argv)\n+{\n+  char *server_address = argv[0];",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2234614879",
            "id": 2234614879,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6FMYRf",
            "original_commit_id": "8d11ae79bacac213f8728c79f1608512d8953d38",
            "original_line": 299,
            "original_position": 17,
            "original_start_line": null,
            "path": "src/nvim/ui_client.c",
            "position": 1,
            "pull_request_review_id": 3060273071,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2234614879/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-07-28T04:07:56Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2234614879",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2234615175"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2234615175"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\n  const char *err = \"\";\n```",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-07-28T04:08:04Z",
            "diff_hunk": "@@ -283,6 +283,38 @@ void ui_client_event_raw_line(GridLineEvent *g)\n                (const schar_T *)grid_line_buf_char, grid_line_buf_attr);\n }\n \n+void ui_client_event_connect(Array args)\n+{\n+  if (args.size < 1 || args.items[0].type != kObjectTypeString) {\n+    ELOG(\"Error handling UI event 'connect'\");\n+    return;\n+  }\n+\n+  char *server_address = args.items[0].data.string.data;\n+  multiqueue_put(main_loop.fast_events, channel_connect_event, server_address);\n+}\n+\n+static void channel_connect_event(void **argv)\n+{\n+  char *server_address = argv[0];\n+\n+  const char *error = \"\";",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2234615175",
            "id": 2234615175,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6FMYWH",
            "original_commit_id": "8d11ae79bacac213f8728c79f1608512d8953d38",
            "original_line": 301,
            "original_position": 19,
            "original_start_line": null,
            "path": "src/nvim/ui_client.c",
            "position": 1,
            "pull_request_review_id": 3060273347,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2234615175/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-07-28T04:08:05Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2234615175",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2234626945"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2234626945"
                }
            },
            "author_association": "MEMBER",
            "body": "test is too verbose just to check that a commmand requires an argument. that only requires ~2 lines to check. also rename this to: \n```suggestion\n  it('validation', function()\n```\n\nthen we can add more validation later.",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-07-28T04:17:21Z",
            "diff_hunk": "@@ -320,6 +320,128 @@ describe('TUI :restart', function()\n   end)\n end)\n \n+describe('TUI :connect', function()\n+  if is_os('win') then\n+    -- :connect relies on :detach which currently doesn't work on windows\n+    return\n+  end\n+\n+  it('requires an argument', function()",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2234626945",
            "id": 2234626945,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6FMbOB",
            "original_commit_id": "8d11ae79bacac213f8728c79f1608512d8953d38",
            "original_line": 329,
            "original_position": 10,
            "original_start_line": null,
            "path": "test/functional/terminal/tui_spec.lua",
            "position": 1,
            "pull_request_review_id": 3060292324,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2234626945/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-07-28T04:17:21Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2234626945",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2234627318"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2234627318"
                }
            },
            "author_association": "MEMBER",
            "body": "this is not needed just to test validation.",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-07-28T04:17:44Z",
            "diff_hunk": "@@ -320,6 +320,128 @@ describe('TUI :restart', function()\n   end)\n end)\n \n+describe('TUI :connect', function()\n+  if is_os('win') then\n+    -- :connect relies on :detach which currently doesn't work on windows\n+    return\n+  end\n+\n+  it('requires an argument', function()\n+    n.clear()\n+    finally(function()\n+      n.check_close()\n+    end)\n+\n+    local server1 = new_pipename()\n+    local screen = tt.setup_child_nvim({",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2234627318",
            "id": 2234627318,
            "line": 380,
            "node_id": "PRRC_kwDOAPphoM6FMbT2",
            "original_commit_id": "8d11ae79bacac213f8728c79f1608512d8953d38",
            "original_line": 380,
            "original_position": 17,
            "original_start_line": null,
            "path": "test/functional/terminal/tui_spec.lua",
            "position": 16,
            "pull_request_review_id": 3060293075,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2234627318/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-07-28T04:17:44Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2234627318",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2234630500"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2234630500"
                }
            },
            "author_association": "MEMBER",
            "body": "this test starts 3 other nvim instances , they all need to be stopped ",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-07-28T04:20:01Z",
            "diff_hunk": "@@ -320,6 +320,128 @@ describe('TUI :restart', function()\n   end)\n end)\n \n+describe('TUI :connect', function()\n+  if is_os('win') then\n+    -- :connect relies on :detach which currently doesn't work on windows\n+    return\n+  end\n+\n+  it('requires an argument', function()\n+    n.clear()\n+    finally(function()\n+      n.check_close()\n+    end)\n+\n+    local server1 = new_pipename()\n+    local screen = tt.setup_child_nvim({\n+      '--listen',\n+      server1,\n+      '-u',\n+      'NONE',\n+    })\n+    tt.feed_data(':connect\\013')\n+    screen:expect([[\n+      ^                                                  |\n+      ~                                                 |*3\n+      [No Name]                       0,0-1          All|\n+      E471: Argument required                           |\n+      {5:-- TERMINAL --}                                    |\n+    ]])\n+\n+    screen:detach()\n+  end)\n+  it('leaves the current server running', function()\n+    n.clear()\n+    finally(function()\n+      n.check_close()\n+    end)",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2234630500",
            "id": 2234630500,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6FMcFk",
            "original_commit_id": "8d11ae79bacac213f8728c79f1608512d8953d38",
            "original_line": 357,
            "original_position": 38,
            "original_start_line": null,
            "path": "test/functional/terminal/tui_spec.lua",
            "position": 1,
            "pull_request_review_id": 3060297787,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2234630500/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-07-28T04:20:01Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2234630500",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2234633302"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2234633302"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\n  it('\"!\" stops the current server', function()\n```",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-07-28T04:21:21Z",
            "diff_hunk": "@@ -320,6 +320,128 @@ describe('TUI :restart', function()\n   end)\n end)\n \n+describe('TUI :connect', function()\n+  if is_os('win') then\n+    -- :connect relies on :detach which currently doesn't work on windows\n+    return\n+  end\n+\n+  it('requires an argument', function()\n+    n.clear()\n+    finally(function()\n+      n.check_close()\n+    end)\n+\n+    local server1 = new_pipename()\n+    local screen = tt.setup_child_nvim({\n+      '--listen',\n+      server1,\n+      '-u',\n+      'NONE',\n+    })\n+    tt.feed_data(':connect\\013')\n+    screen:expect([[\n+      ^                                                  |\n+      ~                                                 |*3\n+      [No Name]                       0,0-1          All|\n+      E471: Argument required                           |\n+      {5:-- TERMINAL --}                                    |\n+    ]])\n+\n+    screen:detach()\n+  end)\n+  it('leaves the current server running', function()\n+    n.clear()\n+    finally(function()\n+      n.check_close()\n+    end)\n+\n+    local server1 = new_pipename()\n+    local screen = tt.setup_child_nvim({\n+      '--listen',\n+      server1,\n+      '-u',\n+      'NONE',\n+    })\n+    screen:detach()\n+\n+    local server2 = new_pipename()\n+    local screen2 = tt.setup_child_nvim({\n+      '--listen',\n+      server2,\n+      '-u',\n+      'NONE',\n+    })\n+    tt.feed_data('iThis is server 2.\\027')\n+    tt.feed_data(':connect ' .. server1 .. '\\013')\n+\n+    screen2:expect({\n+      any = [[Process exited]],\n+    })\n+\n+    screen2:detach()\n+\n+    local screen3 = tt.setup_child_nvim({\n+      '--remote-ui',\n+      '--server',\n+      server2,\n+    })\n+    screen3:expect([[\n+      This is server 2^.                                 |\n+      ~                                                 |*3\n+      {2:[No Name] [+]                   1,17           All}|\n+                                                        |\n+      {5:-- TERMINAL --}                                    |\n+    ]])\n+\n+    screen3:detach()\n+  end)\n+  it('connect! connects to a different server and stops the current one', function()",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2234633302",
            "id": 2234633302,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6FMcxW",
            "original_commit_id": "8d11ae79bacac213f8728c79f1608512d8953d38",
            "original_line": 399,
            "original_position": 80,
            "original_start_line": null,
            "path": "test/functional/terminal/tui_spec.lua",
            "position": 1,
            "pull_request_review_id": 3060301038,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2234633302/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-07-28T04:21:22Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2234633302",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2234634599"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2234634599"
                }
            },
            "author_association": "MEMBER",
            "body": "also stop the other 3 nvims after the test ends",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-07-28T04:21:58Z",
            "diff_hunk": "@@ -320,6 +320,128 @@ describe('TUI :restart', function()\n   end)\n end)\n \n+describe('TUI :connect', function()\n+  if is_os('win') then\n+    -- :connect relies on :detach which currently doesn't work on windows\n+    return\n+  end\n+\n+  it('requires an argument', function()\n+    n.clear()\n+    finally(function()\n+      n.check_close()\n+    end)\n+\n+    local server1 = new_pipename()\n+    local screen = tt.setup_child_nvim({\n+      '--listen',\n+      server1,\n+      '-u',\n+      'NONE',\n+    })\n+    tt.feed_data(':connect\\013')\n+    screen:expect([[\n+      ^                                                  |\n+      ~                                                 |*3\n+      [No Name]                       0,0-1          All|\n+      E471: Argument required                           |\n+      {5:-- TERMINAL --}                                    |\n+    ]])\n+\n+    screen:detach()\n+  end)\n+  it('leaves the current server running', function()\n+    n.clear()\n+    finally(function()\n+      n.check_close()\n+    end)\n+\n+    local server1 = new_pipename()\n+    local screen = tt.setup_child_nvim({\n+      '--listen',\n+      server1,\n+      '-u',\n+      'NONE',\n+    })\n+    screen:detach()\n+\n+    local server2 = new_pipename()\n+    local screen2 = tt.setup_child_nvim({\n+      '--listen',\n+      server2,\n+      '-u',\n+      'NONE',\n+    })\n+    tt.feed_data('iThis is server 2.\\027')\n+    tt.feed_data(':connect ' .. server1 .. '\\013')\n+\n+    screen2:expect({\n+      any = [[Process exited]],\n+    })\n+\n+    screen2:detach()\n+\n+    local screen3 = tt.setup_child_nvim({\n+      '--remote-ui',\n+      '--server',\n+      server2,\n+    })\n+    screen3:expect([[\n+      This is server 2^.                                 |\n+      ~                                                 |*3\n+      {2:[No Name] [+]                   1,17           All}|\n+                                                        |\n+      {5:-- TERMINAL --}                                    |\n+    ]])\n+\n+    screen3:detach()\n+  end)\n+  it('connect! connects to a different server and stops the current one', function()\n+    n.clear()\n+    finally(function()\n+      n.check_close()\n+    end)\n+\n+    local server1 = new_pipename()\n+    local screen1 = tt.setup_child_nvim({\n+      '--listen',\n+      server1,\n+    })",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2234634599",
            "id": 2234634599,
            "line": 445,
            "node_id": "PRRC_kwDOAPphoM6FMdFn",
            "original_commit_id": "8d11ae79bacac213f8728c79f1608512d8953d38",
            "original_line": 445,
            "original_position": 90,
            "original_start_line": null,
            "path": "test/functional/terminal/tui_spec.lua",
            "position": 81,
            "pull_request_review_id": 3060302693,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2234634599/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-07-28T04:21:59Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2234634599",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2236326612"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2236326612"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "I've tried moving the logic to the client, but it always results in the `channel_connect` step failing with a connection refused for some reason. Not sure what is causing this.",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-07-28T12:53:43Z",
            "diff_hunk": "@@ -5600,6 +5600,32 @@ static void ex_detach(exarg_T *eap)\n   }\n }\n \n+/// \":connect\"\n+///\n+/// Connects the current UI to a different server\n+///\n+/// \":connect <address>\" detaches the current UI and connects to the given server.\n+/// \":connect! <address>\" stops the current server if no other UIs are attached, then connects to the given server.\n+static void ex_connect(exarg_T *eap)\n+{\n+  bool stop_server = eap->forceit ? (ui_active() == 1) : false;\n+\n+  Error err = ERROR_INIT;\n+  remote_ui_connect(current_ui, eap->arg, &err);\n+\n+  if (ERROR_SET(&err)) {\n+    emsg(err.msg);\n+    api_clear_error(&err);\n+    return;\n+  }\n+\n+  ex_detach(NULL);\n+  if (stop_server) {\n+    exiting = true;\n+    getout(0);",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2236326612",
            "id": 2236326612,
            "in_reply_to_id": 2234610801,
            "line": 5674,
            "node_id": "PRRC_kwDOAPphoM6FS6LU",
            "original_commit_id": "8d11ae79bacac213f8728c79f1608512d8953d38",
            "original_line": 5674,
            "original_position": 26,
            "original_start_line": 5622,
            "path": "src/nvim/ex_docmd.c",
            "position": 26,
            "pull_request_review_id": 3060222072,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2236326612/reactions"
            },
            "side": "RIGHT",
            "start_line": 5671,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-07-28T12:54:13Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2236326612",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/68201519?v=4",
                "events_url": "https://api.github.com/users/siddhantdev/events{/privacy}",
                "followers_url": "https://api.github.com/users/siddhantdev/followers",
                "following_url": "https://api.github.com/users/siddhantdev/following{/other_user}",
                "gists_url": "https://api.github.com/users/siddhantdev/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/siddhantdev",
                "id": 68201519,
                "login": "siddhantdev",
                "node_id": "MDQ6VXNlcjY4MjAxNTE5",
                "organizations_url": "https://api.github.com/users/siddhantdev/orgs",
                "received_events_url": "https://api.github.com/users/siddhantdev/received_events",
                "repos_url": "https://api.github.com/users/siddhantdev/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/siddhantdev/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/siddhantdev/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/siddhantdev",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2236425437"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2236425437"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Since the eventual plan is to support `connect` without any arguments anyway, I have moved the validation to a different test (the first `connect` test) for now. We can remove it later when it's not needed.",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-07-28T13:17:29Z",
            "diff_hunk": "@@ -320,6 +320,128 @@ describe('TUI :restart', function()\n   end)\n end)\n \n+describe('TUI :connect', function()\n+  if is_os('win') then\n+    -- :connect relies on :detach which currently doesn't work on windows\n+    return\n+  end\n+\n+  it('requires an argument', function()",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2236425437",
            "id": 2236425437,
            "in_reply_to_id": 2234626945,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6FTSTd",
            "original_commit_id": "8d11ae79bacac213f8728c79f1608512d8953d38",
            "original_line": 329,
            "original_position": 10,
            "original_start_line": null,
            "path": "test/functional/terminal/tui_spec.lua",
            "position": 1,
            "pull_request_review_id": 3062675399,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2236425437/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-07-28T13:17:30Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2236425437",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/68201519?v=4",
                "events_url": "https://api.github.com/users/siddhantdev/events{/privacy}",
                "followers_url": "https://api.github.com/users/siddhantdev/followers",
                "following_url": "https://api.github.com/users/siddhantdev/following{/other_user}",
                "gists_url": "https://api.github.com/users/siddhantdev/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/siddhantdev",
                "id": 68201519,
                "login": "siddhantdev",
                "node_id": "MDQ6VXNlcjY4MjAxNTE5",
                "organizations_url": "https://api.github.com/users/siddhantdev/orgs",
                "received_events_url": "https://api.github.com/users/siddhantdev/received_events",
                "repos_url": "https://api.github.com/users/siddhantdev/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/siddhantdev/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/siddhantdev/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/siddhantdev",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2236430096"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2236430096"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "The test starts two nvim instances (`server1` and `server2`), I've added `qall!` commands to stop them.",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-07-28T13:18:36Z",
            "diff_hunk": "@@ -320,6 +320,128 @@ describe('TUI :restart', function()\n   end)\n end)\n \n+describe('TUI :connect', function()\n+  if is_os('win') then\n+    -- :connect relies on :detach which currently doesn't work on windows\n+    return\n+  end\n+\n+  it('requires an argument', function()\n+    n.clear()\n+    finally(function()\n+      n.check_close()\n+    end)\n+\n+    local server1 = new_pipename()\n+    local screen = tt.setup_child_nvim({\n+      '--listen',\n+      server1,\n+      '-u',\n+      'NONE',\n+    })\n+    tt.feed_data(':connect\\013')\n+    screen:expect([[\n+      ^                                                  |\n+      ~                                                 |*3\n+      [No Name]                       0,0-1          All|\n+      E471: Argument required                           |\n+      {5:-- TERMINAL --}                                    |\n+    ]])\n+\n+    screen:detach()\n+  end)\n+  it('leaves the current server running', function()\n+    n.clear()\n+    finally(function()\n+      n.check_close()\n+    end)",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2236430096",
            "id": 2236430096,
            "in_reply_to_id": 2234630500,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6FTTcQ",
            "original_commit_id": "8d11ae79bacac213f8728c79f1608512d8953d38",
            "original_line": 357,
            "original_position": 38,
            "original_start_line": null,
            "path": "test/functional/terminal/tui_spec.lua",
            "position": 1,
            "pull_request_review_id": 3062681011,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2236430096/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-07-28T13:18:36Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2236430096",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/68201519?v=4",
                "events_url": "https://api.github.com/users/siddhantdev/events{/privacy}",
                "followers_url": "https://api.github.com/users/siddhantdev/followers",
                "following_url": "https://api.github.com/users/siddhantdev/following{/other_user}",
                "gists_url": "https://api.github.com/users/siddhantdev/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/siddhantdev",
                "id": 68201519,
                "login": "siddhantdev",
                "node_id": "MDQ6VXNlcjY4MjAxNTE5",
                "organizations_url": "https://api.github.com/users/siddhantdev/orgs",
                "received_events_url": "https://api.github.com/users/siddhantdev/received_events",
                "repos_url": "https://api.github.com/users/siddhantdev/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/siddhantdev/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/siddhantdev/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/siddhantdev",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2237755255"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2237755255"
                }
            },
            "author_association": "MEMBER",
            "body": "Did you set `chan->detach=true` from the server side as I mentioned above?",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-07-28T20:05:11Z",
            "diff_hunk": "@@ -5600,6 +5600,32 @@ static void ex_detach(exarg_T *eap)\n   }\n }\n \n+/// \":connect\"\n+///\n+/// Connects the current UI to a different server\n+///\n+/// \":connect <address>\" detaches the current UI and connects to the given server.\n+/// \":connect! <address>\" stops the current server if no other UIs are attached, then connects to the given server.\n+static void ex_connect(exarg_T *eap)\n+{\n+  bool stop_server = eap->forceit ? (ui_active() == 1) : false;\n+\n+  Error err = ERROR_INIT;\n+  remote_ui_connect(current_ui, eap->arg, &err);\n+\n+  if (ERROR_SET(&err)) {\n+    emsg(err.msg);\n+    api_clear_error(&err);\n+    return;\n+  }\n+\n+  ex_detach(NULL);\n+  if (stop_server) {\n+    exiting = true;\n+    getout(0);",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2237755255",
            "id": 2237755255,
            "in_reply_to_id": 2234610801,
            "line": 5674,
            "node_id": "PRRC_kwDOAPphoM6FYW93",
            "original_commit_id": "8d11ae79bacac213f8728c79f1608512d8953d38",
            "original_line": 5674,
            "original_position": 26,
            "original_start_line": 5622,
            "path": "src/nvim/ex_docmd.c",
            "position": 26,
            "pull_request_review_id": 3064473524,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2237755255/reactions"
            },
            "side": "RIGHT",
            "start_line": 5671,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-07-28T20:05:11Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2237755255",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2237782595"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2237782595"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Yeah, I set it in `ex_docmd.c` (like it's done in `ex_detach`) before calling `remote_ui_connect`.",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-07-28T20:17:14Z",
            "diff_hunk": "@@ -5600,6 +5600,32 @@ static void ex_detach(exarg_T *eap)\n   }\n }\n \n+/// \":connect\"\n+///\n+/// Connects the current UI to a different server\n+///\n+/// \":connect <address>\" detaches the current UI and connects to the given server.\n+/// \":connect! <address>\" stops the current server if no other UIs are attached, then connects to the given server.\n+static void ex_connect(exarg_T *eap)\n+{\n+  bool stop_server = eap->forceit ? (ui_active() == 1) : false;\n+\n+  Error err = ERROR_INIT;\n+  remote_ui_connect(current_ui, eap->arg, &err);\n+\n+  if (ERROR_SET(&err)) {\n+    emsg(err.msg);\n+    api_clear_error(&err);\n+    return;\n+  }\n+\n+  ex_detach(NULL);\n+  if (stop_server) {\n+    exiting = true;\n+    getout(0);",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2237782595",
            "id": 2237782595,
            "in_reply_to_id": 2234610801,
            "line": 5674,
            "node_id": "PRRC_kwDOAPphoM6FYdpD",
            "original_commit_id": "8d11ae79bacac213f8728c79f1608512d8953d38",
            "original_line": 5674,
            "original_position": 26,
            "original_start_line": 5622,
            "path": "src/nvim/ex_docmd.c",
            "position": 26,
            "pull_request_review_id": 3064513087,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2237782595/reactions"
            },
            "side": "RIGHT",
            "start_line": 5671,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-07-28T20:17:14Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2237782595",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/68201519?v=4",
                "events_url": "https://api.github.com/users/siddhantdev/events{/privacy}",
                "followers_url": "https://api.github.com/users/siddhantdev/followers",
                "following_url": "https://api.github.com/users/siddhantdev/following{/other_user}",
                "gists_url": "https://api.github.com/users/siddhantdev/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/siddhantdev",
                "id": 68201519,
                "login": "siddhantdev",
                "node_id": "MDQ6VXNlcjY4MjAxNTE5",
                "organizations_url": "https://api.github.com/users/siddhantdev/orgs",
                "received_events_url": "https://api.github.com/users/siddhantdev/received_events",
                "repos_url": "https://api.github.com/users/siddhantdev/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/siddhantdev/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/siddhantdev/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/siddhantdev",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2237787042"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2237787042"
                }
            },
            "author_association": "MEMBER",
            "body": "can you link to the patch/commit ",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-07-28T20:19:18Z",
            "diff_hunk": "@@ -5600,6 +5600,32 @@ static void ex_detach(exarg_T *eap)\n   }\n }\n \n+/// \":connect\"\n+///\n+/// Connects the current UI to a different server\n+///\n+/// \":connect <address>\" detaches the current UI and connects to the given server.\n+/// \":connect! <address>\" stops the current server if no other UIs are attached, then connects to the given server.\n+static void ex_connect(exarg_T *eap)\n+{\n+  bool stop_server = eap->forceit ? (ui_active() == 1) : false;\n+\n+  Error err = ERROR_INIT;\n+  remote_ui_connect(current_ui, eap->arg, &err);\n+\n+  if (ERROR_SET(&err)) {\n+    emsg(err.msg);\n+    api_clear_error(&err);\n+    return;\n+  }\n+\n+  ex_detach(NULL);\n+  if (stop_server) {\n+    exiting = true;\n+    getout(0);",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2237787042",
            "id": 2237787042,
            "in_reply_to_id": 2234610801,
            "line": 5674,
            "node_id": "PRRC_kwDOAPphoM6FYeui",
            "original_commit_id": "8d11ae79bacac213f8728c79f1608512d8953d38",
            "original_line": 5674,
            "original_position": 26,
            "original_start_line": 5622,
            "path": "src/nvim/ex_docmd.c",
            "position": 26,
            "pull_request_review_id": 3064518945,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2237787042/reactions"
            },
            "side": "RIGHT",
            "start_line": 5671,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-07-28T20:19:18Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2237787042",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2237819837"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2237819837"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "I'm not sure how to do that without updating this PR.",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-07-28T20:37:58Z",
            "diff_hunk": "@@ -5600,6 +5600,32 @@ static void ex_detach(exarg_T *eap)\n   }\n }\n \n+/// \":connect\"\n+///\n+/// Connects the current UI to a different server\n+///\n+/// \":connect <address>\" detaches the current UI and connects to the given server.\n+/// \":connect! <address>\" stops the current server if no other UIs are attached, then connects to the given server.\n+static void ex_connect(exarg_T *eap)\n+{\n+  bool stop_server = eap->forceit ? (ui_active() == 1) : false;\n+\n+  Error err = ERROR_INIT;\n+  remote_ui_connect(current_ui, eap->arg, &err);\n+\n+  if (ERROR_SET(&err)) {\n+    emsg(err.msg);\n+    api_clear_error(&err);\n+    return;\n+  }\n+\n+  ex_detach(NULL);\n+  if (stop_server) {\n+    exiting = true;\n+    getout(0);",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2237819837",
            "id": 2237819837,
            "in_reply_to_id": 2234610801,
            "line": 5674,
            "node_id": "PRRC_kwDOAPphoM6FYmu9",
            "original_commit_id": "8d11ae79bacac213f8728c79f1608512d8953d38",
            "original_line": 5674,
            "original_position": 26,
            "original_start_line": 5622,
            "path": "src/nvim/ex_docmd.c",
            "position": 26,
            "pull_request_review_id": 3064561597,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2237819837/reactions"
            },
            "side": "RIGHT",
            "start_line": 5671,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-07-28T20:37:58Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2237819837",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/68201519?v=4",
                "events_url": "https://api.github.com/users/siddhantdev/events{/privacy}",
                "followers_url": "https://api.github.com/users/siddhantdev/followers",
                "following_url": "https://api.github.com/users/siddhantdev/following{/other_user}",
                "gists_url": "https://api.github.com/users/siddhantdev/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/siddhantdev",
                "id": 68201519,
                "login": "siddhantdev",
                "node_id": "MDQ6VXNlcjY4MjAxNTE5",
                "organizations_url": "https://api.github.com/users/siddhantdev/orgs",
                "received_events_url": "https://api.github.com/users/siddhantdev/received_events",
                "repos_url": "https://api.github.com/users/siddhantdev/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/siddhantdev/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/siddhantdev/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/siddhantdev",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2237838123"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2237838123"
                }
            },
            "author_association": "MEMBER",
            "body": "push a separate branch to your repo and just link to it from here",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-07-28T20:49:19Z",
            "diff_hunk": "@@ -5600,6 +5600,32 @@ static void ex_detach(exarg_T *eap)\n   }\n }\n \n+/// \":connect\"\n+///\n+/// Connects the current UI to a different server\n+///\n+/// \":connect <address>\" detaches the current UI and connects to the given server.\n+/// \":connect! <address>\" stops the current server if no other UIs are attached, then connects to the given server.\n+static void ex_connect(exarg_T *eap)\n+{\n+  bool stop_server = eap->forceit ? (ui_active() == 1) : false;\n+\n+  Error err = ERROR_INIT;\n+  remote_ui_connect(current_ui, eap->arg, &err);\n+\n+  if (ERROR_SET(&err)) {\n+    emsg(err.msg);\n+    api_clear_error(&err);\n+    return;\n+  }\n+\n+  ex_detach(NULL);\n+  if (stop_server) {\n+    exiting = true;\n+    getout(0);",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2237838123",
            "id": 2237838123,
            "in_reply_to_id": 2234610801,
            "line": 5674,
            "node_id": "PRRC_kwDOAPphoM6FYrMr",
            "original_commit_id": "8d11ae79bacac213f8728c79f1608512d8953d38",
            "original_line": 5674,
            "original_position": 26,
            "original_start_line": 5622,
            "path": "src/nvim/ex_docmd.c",
            "position": 26,
            "pull_request_review_id": 3064585661,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2237838123/reactions"
            },
            "side": "RIGHT",
            "start_line": 5671,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-07-28T20:49:19Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2237838123",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2237845101"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2237845101"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Here: https://github.com/siddhantdev/neovim/commit/43d89249b9d3e9c35e362372d8910dd8d3b508b3",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-07-28T20:53:30Z",
            "diff_hunk": "@@ -5600,6 +5600,32 @@ static void ex_detach(exarg_T *eap)\n   }\n }\n \n+/// \":connect\"\n+///\n+/// Connects the current UI to a different server\n+///\n+/// \":connect <address>\" detaches the current UI and connects to the given server.\n+/// \":connect! <address>\" stops the current server if no other UIs are attached, then connects to the given server.\n+static void ex_connect(exarg_T *eap)\n+{\n+  bool stop_server = eap->forceit ? (ui_active() == 1) : false;\n+\n+  Error err = ERROR_INIT;\n+  remote_ui_connect(current_ui, eap->arg, &err);\n+\n+  if (ERROR_SET(&err)) {\n+    emsg(err.msg);\n+    api_clear_error(&err);\n+    return;\n+  }\n+\n+  ex_detach(NULL);\n+  if (stop_server) {\n+    exiting = true;\n+    getout(0);",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2237845101",
            "id": 2237845101,
            "in_reply_to_id": 2234610801,
            "line": 5674,
            "node_id": "PRRC_kwDOAPphoM6FYs5t",
            "original_commit_id": "8d11ae79bacac213f8728c79f1608512d8953d38",
            "original_line": 5674,
            "original_position": 26,
            "original_start_line": 5622,
            "path": "src/nvim/ex_docmd.c",
            "position": 26,
            "pull_request_review_id": 3064594500,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2237845101/reactions"
            },
            "side": "RIGHT",
            "start_line": 5671,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-07-28T20:53:49Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2237845101",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/68201519?v=4",
                "events_url": "https://api.github.com/users/siddhantdev/events{/privacy}",
                "followers_url": "https://api.github.com/users/siddhantdev/followers",
                "following_url": "https://api.github.com/users/siddhantdev/following{/other_user}",
                "gists_url": "https://api.github.com/users/siddhantdev/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/siddhantdev",
                "id": 68201519,
                "login": "siddhantdev",
                "node_id": "MDQ6VXNlcjY4MjAxNTE5",
                "organizations_url": "https://api.github.com/users/siddhantdev/orgs",
                "received_events_url": "https://api.github.com/users/siddhantdev/received_events",
                "repos_url": "https://api.github.com/users/siddhantdev/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/siddhantdev/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/siddhantdev/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/siddhantdev",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2237863147"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2237863147"
                }
            },
            "author_association": "MEMBER",
            "body": "Let's try some experiments:\r\n\r\n1. just for troubleshooting, try removing `getout` from this current PR, does it fix the asan issue?\r\n2. I left some comments on https://github.com/siddhantdev/neovim/commit/43d89249b9d3e9c35e362372d8910dd8d3b508b3 which you can also try. (Perhaps worth opening a 2nd PR)",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-07-28T21:04:38Z",
            "diff_hunk": "@@ -5600,6 +5600,32 @@ static void ex_detach(exarg_T *eap)\n   }\n }\n \n+/// \":connect\"\n+///\n+/// Connects the current UI to a different server\n+///\n+/// \":connect <address>\" detaches the current UI and connects to the given server.\n+/// \":connect! <address>\" stops the current server if no other UIs are attached, then connects to the given server.\n+static void ex_connect(exarg_T *eap)\n+{\n+  bool stop_server = eap->forceit ? (ui_active() == 1) : false;\n+\n+  Error err = ERROR_INIT;\n+  remote_ui_connect(current_ui, eap->arg, &err);\n+\n+  if (ERROR_SET(&err)) {\n+    emsg(err.msg);\n+    api_clear_error(&err);\n+    return;\n+  }\n+\n+  ex_detach(NULL);\n+  if (stop_server) {\n+    exiting = true;\n+    getout(0);",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2237863147",
            "id": 2237863147,
            "in_reply_to_id": 2234610801,
            "line": 5674,
            "node_id": "PRRC_kwDOAPphoM6FYxTr",
            "original_commit_id": "8d11ae79bacac213f8728c79f1608512d8953d38",
            "original_line": 5674,
            "original_position": 26,
            "original_start_line": 5622,
            "path": "src/nvim/ex_docmd.c",
            "position": 26,
            "pull_request_review_id": 3064617696,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2237863147/reactions"
            },
            "side": "RIGHT",
            "start_line": 5671,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-07-28T21:05:02Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2237863147",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2237876809"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2237876809"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Removing `getout` from this PR doesn't help, the invalid read still happens.",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-07-28T21:13:51Z",
            "diff_hunk": "@@ -5600,6 +5600,32 @@ static void ex_detach(exarg_T *eap)\n   }\n }\n \n+/// \":connect\"\n+///\n+/// Connects the current UI to a different server\n+///\n+/// \":connect <address>\" detaches the current UI and connects to the given server.\n+/// \":connect! <address>\" stops the current server if no other UIs are attached, then connects to the given server.\n+static void ex_connect(exarg_T *eap)\n+{\n+  bool stop_server = eap->forceit ? (ui_active() == 1) : false;\n+\n+  Error err = ERROR_INIT;\n+  remote_ui_connect(current_ui, eap->arg, &err);\n+\n+  if (ERROR_SET(&err)) {\n+    emsg(err.msg);\n+    api_clear_error(&err);\n+    return;\n+  }\n+\n+  ex_detach(NULL);\n+  if (stop_server) {\n+    exiting = true;\n+    getout(0);",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2237876809",
            "id": 2237876809,
            "in_reply_to_id": 2234610801,
            "line": 5674,
            "node_id": "PRRC_kwDOAPphoM6FY0pJ",
            "original_commit_id": "8d11ae79bacac213f8728c79f1608512d8953d38",
            "original_line": 5674,
            "original_position": 26,
            "original_start_line": 5622,
            "path": "src/nvim/ex_docmd.c",
            "position": 26,
            "pull_request_review_id": 3064635931,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2237876809/reactions"
            },
            "side": "RIGHT",
            "start_line": 5671,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-07-28T21:13:52Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2237876809",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/68201519?v=4",
                "events_url": "https://api.github.com/users/siddhantdev/events{/privacy}",
                "followers_url": "https://api.github.com/users/siddhantdev/followers",
                "following_url": "https://api.github.com/users/siddhantdev/following{/other_user}",
                "gists_url": "https://api.github.com/users/siddhantdev/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/siddhantdev",
                "id": 68201519,
                "login": "siddhantdev",
                "node_id": "MDQ6VXNlcjY4MjAxNTE5",
                "organizations_url": "https://api.github.com/users/siddhantdev/orgs",
                "received_events_url": "https://api.github.com/users/siddhantdev/received_events",
                "repos_url": "https://api.github.com/users/siddhantdev/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/siddhantdev/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/siddhantdev/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/siddhantdev",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2271510488"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2271510488"
                }
            },
            "author_association": "MEMBER",
            "body": "Use `t.skip`",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-08-12T22:59:30Z",
            "diff_hunk": "@@ -365,6 +365,124 @@ describe('TUI :restart', function()\n   end)\n end)\n \n+describe('TUI :connect', function()\n+  if is_os('win') then\n+    -- :connect relies on :detach which currently doesn't work on windows\n+    return\n+  end",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2271510488",
            "id": 2271510488,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6HZH_Y",
            "original_commit_id": "d4449a0b88510d1dc7af17d2e5e5eecc6f1c79e1",
            "original_line": 371,
            "original_position": 8,
            "original_start_line": 369,
            "path": "test/functional/terminal/tui_spec.lua",
            "position": 1,
            "pull_request_review_id": 3113164734,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2271510488/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-08-12T22:59:30Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2271510488",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2277884675"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2277884675"
                }
            },
            "author_association": "MEMBER",
            "body": "Are these the changes that fixed the asan issue? Always call out non-obvious changes. And ideally, explain the root cause and why these changes are needed.",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-08-14T22:55:58Z",
            "diff_hunk": "@@ -155,10 +155,10 @@ static void rstream_close_cb(uv_handle_t *handle)\n static void close_cb(uv_handle_t *handle)\n {\n   Stream *stream = handle->data;\n-  if (stream->close_cb) {\n+  if (stream && stream->close_cb) {\n     stream->close_cb(stream, stream->close_cb_data);\n   }\n-  if (stream->internal_close_cb) {\n+  if (stream && stream->internal_close_cb) {",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2277884675",
            "id": 2277884675,
            "line": 161,
            "node_id": "PRRC_kwDOAPphoM6HxcMD",
            "original_commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "original_line": 161,
            "original_position": 18,
            "original_start_line": 158,
            "path": "src/nvim/event/stream.c",
            "position": 18,
            "pull_request_review_id": 3122330624,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2277884675/reactions"
            },
            "side": "RIGHT",
            "start_line": 158,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-08-14T22:55:58Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2277884675",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2277891596"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2277891596"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Yes, it seems that `stream` is deleted by the time the execution gets here which was causing the ASAN error, maybe adding a comment here would help? Something like:\r\n\r\n```\r\n// check if stream is active before closing it to avoid reading from empty memory\r\n```\r\n\r\nI see that you have merged this PR, so maybe in the next docs PR?",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-08-14T22:59:31Z",
            "diff_hunk": "@@ -155,10 +155,10 @@ static void rstream_close_cb(uv_handle_t *handle)\n static void close_cb(uv_handle_t *handle)\n {\n   Stream *stream = handle->data;\n-  if (stream->close_cb) {\n+  if (stream && stream->close_cb) {\n     stream->close_cb(stream, stream->close_cb_data);\n   }\n-  if (stream->internal_close_cb) {\n+  if (stream && stream->internal_close_cb) {",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2277891596",
            "id": 2277891596,
            "in_reply_to_id": 2277884675,
            "line": 161,
            "node_id": "PRRC_kwDOAPphoM6Hxd4M",
            "original_commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "original_line": 161,
            "original_position": 18,
            "original_start_line": 158,
            "path": "src/nvim/event/stream.c",
            "position": 18,
            "pull_request_review_id": 3122341951,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2277891596/reactions"
            },
            "side": "RIGHT",
            "start_line": 158,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-08-14T22:59:31Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2277891596",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/68201519?v=4",
                "events_url": "https://api.github.com/users/siddhantdev/events{/privacy}",
                "followers_url": "https://api.github.com/users/siddhantdev/followers",
                "following_url": "https://api.github.com/users/siddhantdev/following{/other_user}",
                "gists_url": "https://api.github.com/users/siddhantdev/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/siddhantdev",
                "id": 68201519,
                "login": "siddhantdev",
                "node_id": "MDQ6VXNlcjY4MjAxNTE5",
                "organizations_url": "https://api.github.com/users/siddhantdev/orgs",
                "received_events_url": "https://api.github.com/users/siddhantdev/received_events",
                "repos_url": "https://api.github.com/users/siddhantdev/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/siddhantdev/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/siddhantdev/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/siddhantdev",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2277894671"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2277894671"
                }
            },
            "author_association": "MEMBER",
            "body": "Can you add it in one of your other PRs?",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-08-14T23:01:24Z",
            "diff_hunk": "@@ -155,10 +155,10 @@ static void rstream_close_cb(uv_handle_t *handle)\n static void close_cb(uv_handle_t *handle)\n {\n   Stream *stream = handle->data;\n-  if (stream->close_cb) {\n+  if (stream && stream->close_cb) {\n     stream->close_cb(stream, stream->close_cb_data);\n   }\n-  if (stream->internal_close_cb) {\n+  if (stream && stream->internal_close_cb) {",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2277894671",
            "id": 2277894671,
            "in_reply_to_id": 2277884675,
            "line": 161,
            "node_id": "PRRC_kwDOAPphoM6HxeoP",
            "original_commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "original_line": 161,
            "original_position": 18,
            "original_start_line": 158,
            "path": "src/nvim/event/stream.c",
            "position": 18,
            "pull_request_review_id": 3122347445,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2277894671/reactions"
            },
            "side": "RIGHT",
            "start_line": 158,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-08-14T23:01:24Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2277894671",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2277897189"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2277897189"
                }
            },
            "author_association": "MEMBER",
            "body": "I would expect whatever freed/cleared this data to have also destroyed the `rstream_close_cb` handler, etc...",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-08-14T23:02:48Z",
            "diff_hunk": "@@ -155,10 +155,10 @@ static void rstream_close_cb(uv_handle_t *handle)\n static void close_cb(uv_handle_t *handle)\n {\n   Stream *stream = handle->data;\n-  if (stream->close_cb) {\n+  if (stream && stream->close_cb) {\n     stream->close_cb(stream, stream->close_cb_data);\n   }\n-  if (stream->internal_close_cb) {\n+  if (stream && stream->internal_close_cb) {",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2277897189",
            "id": 2277897189,
            "in_reply_to_id": 2277884675,
            "line": 161,
            "node_id": "PRRC_kwDOAPphoM6HxfPl",
            "original_commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "original_line": 161,
            "original_position": 18,
            "original_start_line": 158,
            "path": "src/nvim/event/stream.c",
            "position": 18,
            "pull_request_review_id": 3122352051,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2277897189/reactions"
            },
            "side": "RIGHT",
            "start_line": 158,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-08-14T23:02:49Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2277897189",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34586#discussion_r2277924635"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34586"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2277924635"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "> Can you add it in one of your other PRs?\r\n\r\nYeah, there will be a PR to add the functionality where the user does not pass an address to connect and we show a list of options, I'll add it to that.\r\n\r\n> I would expect whatever freed/cleared this data to have also destroyed the `rstream_close_cb` handler, etc...\r\n\r\nThe handlers are probably destroyed, just trying to read `stream` was causing the ASAN error, the method is still getting called by `detach` but when it sees that stream is deleted, no action is taken.\r\n",
            "commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "created_at": "2025-08-14T23:17:21Z",
            "diff_hunk": "@@ -155,10 +155,10 @@ static void rstream_close_cb(uv_handle_t *handle)\n static void close_cb(uv_handle_t *handle)\n {\n   Stream *stream = handle->data;\n-  if (stream->close_cb) {\n+  if (stream && stream->close_cb) {\n     stream->close_cb(stream, stream->close_cb_data);\n   }\n-  if (stream->internal_close_cb) {\n+  if (stream && stream->internal_close_cb) {",
            "html_url": "https://github.com/neovim/neovim/pull/34586#discussion_r2277924635",
            "id": 2277924635,
            "in_reply_to_id": 2277884675,
            "line": 161,
            "node_id": "PRRC_kwDOAPphoM6Hxl8b",
            "original_commit_id": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
            "original_line": 161,
            "original_position": 18,
            "original_start_line": 158,
            "path": "src/nvim/event/stream.c",
            "position": 18,
            "pull_request_review_id": 3122400700,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2277924635/reactions"
            },
            "side": "RIGHT",
            "start_line": 158,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2025-08-14T23:17:22Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2277924635",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/68201519?v=4",
                "events_url": "https://api.github.com/users/siddhantdev/events{/privacy}",
                "followers_url": "https://api.github.com/users/siddhantdev/followers",
                "following_url": "https://api.github.com/users/siddhantdev/following{/other_user}",
                "gists_url": "https://api.github.com/users/siddhantdev/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/siddhantdev",
                "id": 68201519,
                "login": "siddhantdev",
                "node_id": "MDQ6VXNlcjY4MjAxNTE5",
                "organizations_url": "https://api.github.com/users/siddhantdev/orgs",
                "received_events_url": "https://api.github.com/users/siddhantdev/received_events",
                "repos_url": "https://api.github.com/users/siddhantdev/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/siddhantdev/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/siddhantdev/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/siddhantdev",
                "user_view_type": "public"
            }
        }
    ],
    "comment_regular_data": [
        {
            "author_association": "CONTRIBUTOR",
            "body": "There's some documentation and name changing to do, but the command works.",
            "created_at": "2025-06-20T16:56:13Z",
            "html_url": "https://github.com/neovim/neovim/pull/34586#issuecomment-2992260420",
            "id": 2992260420,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34586",
            "node_id": "IC_kwDOAPphoM6yWkVE",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 6,
                "laugh": 0,
                "rocket": 0,
                "total_count": 6,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2992260420/reactions"
            },
            "updated_at": "2025-06-20T16:56:13Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2992260420",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/68201519?v=4",
                "events_url": "https://api.github.com/users/siddhantdev/events{/privacy}",
                "followers_url": "https://api.github.com/users/siddhantdev/followers",
                "following_url": "https://api.github.com/users/siddhantdev/following{/other_user}",
                "gists_url": "https://api.github.com/users/siddhantdev/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/siddhantdev",
                "id": 68201519,
                "login": "siddhantdev",
                "node_id": "MDQ6VXNlcjY4MjAxNTE5",
                "organizations_url": "https://api.github.com/users/siddhantdev/orgs",
                "received_events_url": "https://api.github.com/users/siddhantdev/received_events",
                "repos_url": "https://api.github.com/users/siddhantdev/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/siddhantdev/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/siddhantdev/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/siddhantdev",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Added the documentation for `:connect`.",
            "created_at": "2025-06-21T15:44:57Z",
            "html_url": "https://github.com/neovim/neovim/pull/34586#issuecomment-2993642967",
            "id": 2993642967,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34586",
            "node_id": "IC_kwDOAPphoM6yb13X",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2993642967/reactions"
            },
            "updated_at": "2025-06-21T15:44:57Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2993642967",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/68201519?v=4",
                "events_url": "https://api.github.com/users/siddhantdev/events{/privacy}",
                "followers_url": "https://api.github.com/users/siddhantdev/followers",
                "following_url": "https://api.github.com/users/siddhantdev/following{/other_user}",
                "gists_url": "https://api.github.com/users/siddhantdev/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/siddhantdev",
                "id": 68201519,
                "login": "siddhantdev",
                "node_id": "MDQ6VXNlcjY4MjAxNTE5",
                "organizations_url": "https://api.github.com/users/siddhantdev/orgs",
                "received_events_url": "https://api.github.com/users/siddhantdev/received_events",
                "repos_url": "https://api.github.com/users/siddhantdev/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/siddhantdev/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/siddhantdev/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/siddhantdev",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Added the test for `:connect`",
            "created_at": "2025-06-24T15:36:11Z",
            "html_url": "https://github.com/neovim/neovim/pull/34586#issuecomment-3000991641",
            "id": 3000991641,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34586",
            "node_id": "IC_kwDOAPphoM6y33-Z",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3000991641/reactions"
            },
            "updated_at": "2025-06-24T15:36:11Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3000991641",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/68201519?v=4",
                "events_url": "https://api.github.com/users/siddhantdev/events{/privacy}",
                "followers_url": "https://api.github.com/users/siddhantdev/followers",
                "following_url": "https://api.github.com/users/siddhantdev/following{/other_user}",
                "gists_url": "https://api.github.com/users/siddhantdev/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/siddhantdev",
                "id": 68201519,
                "login": "siddhantdev",
                "node_id": "MDQ6VXNlcjY4MjAxNTE5",
                "organizations_url": "https://api.github.com/users/siddhantdev/orgs",
                "received_events_url": "https://api.github.com/users/siddhantdev/received_events",
                "repos_url": "https://api.github.com/users/siddhantdev/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/siddhantdev/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/siddhantdev/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/siddhantdev",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Why does `:connect` stop the server? https://github.com/neovim/neovim/issues/5035#issuecomment-2343537003 says:\r\n> \"hot swap\": `:connect [address]` (or `:attach`?) detaches the current UI and attaches to `[address]`. If `[address]` is not given, present a menu of known servers.\r\n\r\nSo it should behave more like having the UI `:detach` + attaching to another server, and shouldn't stop the current server.",
            "created_at": "2025-06-25T00:23:58Z",
            "html_url": "https://github.com/neovim/neovim/pull/34586#issuecomment-3002230122",
            "id": 3002230122,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34586",
            "node_id": "IC_kwDOAPphoM6y8mVq",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3002230122/reactions"
            },
            "updated_at": "2025-06-25T00:24:06Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3002230122",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I was trying to follow the guideline outlined here: https://github.com/neovim/neovim/issues/34257#issuecomment-2927420708 but I realise now that this would stop the server even if other UIs are connected to it.\r\nI'll re-implement it to just detach the UI instead, without stopping the server.",
            "created_at": "2025-06-25T07:40:05Z",
            "html_url": "https://github.com/neovim/neovim/pull/34586#issuecomment-3003716747",
            "id": 3003716747,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34586",
            "node_id": "IC_kwDOAPphoM6zCRSL",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3003716747/reactions"
            },
            "updated_at": "2025-06-25T07:40:05Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3003716747",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/68201519?v=4",
                "events_url": "https://api.github.com/users/siddhantdev/events{/privacy}",
                "followers_url": "https://api.github.com/users/siddhantdev/followers",
                "following_url": "https://api.github.com/users/siddhantdev/following{/other_user}",
                "gists_url": "https://api.github.com/users/siddhantdev/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/siddhantdev",
                "id": 68201519,
                "login": "siddhantdev",
                "node_id": "MDQ6VXNlcjY4MjAxNTE5",
                "organizations_url": "https://api.github.com/users/siddhantdev/orgs",
                "received_events_url": "https://api.github.com/users/siddhantdev/received_events",
                "repos_url": "https://api.github.com/users/siddhantdev/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/siddhantdev/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/siddhantdev/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/siddhantdev",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> it should behave more like having the UI `:detach` + attaching to another server, and shouldn't stop the current server\r\n\r\nTrue, but there is a special case: when the server was started by the current UI, the common case is that the server is no longer needed. This will often be the case when a user is just trying to connect to an ssh host, so the current \"embedded\" server is just a temporary throwaway.\r\n\r\n~~For `:connect` I suggest this behavior:~~\r\n\r\n- ~~detach (don't stop server) if more than 1 UI is connected~~\r\n- ~~stop the server if it was started by the current UI (common case) and no other UIs are attached~~\r\n\r\nOTOH that's somewhat complicated to document and for users to remember, so here's an alternative proposal:\r\n\r\n- `:connect` always detaches\r\n- `:connect!` stops the server if no other UIs are attached",
            "created_at": "2025-06-25T10:18:08Z",
            "html_url": "https://github.com/neovim/neovim/pull/34586#issuecomment-3004225897",
            "id": 3004225897,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34586",
            "node_id": "IC_kwDOAPphoM6zENlp",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3004225897/reactions"
            },
            "updated_at": "2025-06-25T10:21:47Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3004225897",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "The command works like this now:\r\n\r\n> * `:connect` always detaches\r\n> * `:connect!` stops the server if no other UIs are attached\r\n\r\nbut I'm not sure how to write a test specifically for the case where multiple UIs are attached to a server and `:connect!` is called on one of them.",
            "created_at": "2025-06-25T11:31:32Z",
            "html_url": "https://github.com/neovim/neovim/pull/34586#issuecomment-3004437678",
            "id": 3004437678,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34586",
            "node_id": "IC_kwDOAPphoM6zFBSu",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3004437678/reactions"
            },
            "updated_at": "2025-06-25T11:31:32Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3004437678",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/68201519?v=4",
                "events_url": "https://api.github.com/users/siddhantdev/events{/privacy}",
                "followers_url": "https://api.github.com/users/siddhantdev/followers",
                "following_url": "https://api.github.com/users/siddhantdev/following{/other_user}",
                "gists_url": "https://api.github.com/users/siddhantdev/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/siddhantdev",
                "id": 68201519,
                "login": "siddhantdev",
                "node_id": "MDQ6VXNlcjY4MjAxNTE5",
                "organizations_url": "https://api.github.com/users/siddhantdev/orgs",
                "received_events_url": "https://api.github.com/users/siddhantdev/received_events",
                "repos_url": "https://api.github.com/users/siddhantdev/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/siddhantdev/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/siddhantdev/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/siddhantdev",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> not sure how to write a test specifically for the case where multiple UIs are attached to a server and `:connect!` is called on one of them.\r\n\r\nthe :detach tests have an example. though :detach might not work on Windows, thus might need to skip the test on Windows, currently.",
            "created_at": "2025-06-25T12:31:25Z",
            "html_url": "https://github.com/neovim/neovim/pull/34586#issuecomment-3004603410",
            "id": 3004603410,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34586",
            "node_id": "IC_kwDOAPphoM6zFpwS",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3004603410/reactions"
            },
            "updated_at": "2025-06-25T12:31:25Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3004603410",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "asan\r\n\r\n```\r\n= ==22829==ERROR: AddressSanitizer: SEGV on unknown address 0x000000000180 (pc 0x557e1dd9f6ea bp 0x7ffcc40aa330 sp 0x7ffcc40aa2f0 T0)\r\n= ==22829==The signal is caused by a READ memory access.\r\n= ==22829==Hint: address points to the zero page.\r\n=     #0 0x557e1dd9f6ea in rstream_close_cb /home/runner/work/neovim/neovim/src/nvim/event/stream.c:151:7\r\n=     #1 0x557e1ef0a1af in uv__finish_close /home/runner/work/neovim/neovim/.deps/build/src/libuv/src/unix/core.c:363:5\r\n=     #2 0x557e1ef07785 in uv__run_closing_handles /home/runner/work/neovim/neovim/.deps/build/src/libuv/src/unix/core.c:377:5\r\n=     #3 0x557e1ef07629 in uv_run /home/runner/work/neovim/neovim/.deps/build/src/libuv/src/unix/core.c:475:5\r\n=     #4 0x557e1dd8439d in loop_uv_run /home/runner/work/neovim/neovim/src/nvim/event/loop.c:61:3\r\n=     #5 0x557e1dd84004 in loop_poll_events /home/runner/work/neovim/neovim/src/nvim/event/loop.c:82:26\r\n=     #6 0x557e1dd90bff in proc_teardown /home/runner/work/neovim/neovim/src/nvim/event/proc.c:148:3\r\n=     #7 0x557e1e172d6d in event_teardown /home/runner/work/neovim/neovim/src/nvim/main.c:179:3\r\n=     #8 0x557e1e16cef8 in os_exit /home/runner/work/neovim/neovim/src/nvim/main.c:678:8\r\n=     #9 0x557e1dd937fd in exit_event /home/runner/work/neovim/neovim/src/nvim/event/proc.c:421:7\r\n=     #10 0x557e1dd89406 in multiqueue_process_events /home/runner/work/neovim/neovim/src/nvim/event/multiqueue.c:161:7\r\n=     #11 0x557e1dd84096 in loop_poll_events /home/runner/work/neovim/neovim/src/nvim/event/loop.c:83:3\r\n=     #12 0x557e1dd9d42d in socket_connect /home/runner/work/neovim/neovim/src/nvim/event/socket.c:246:3\r\n=     #13 0x557e1d976832 in channel_connect /home/runner/work/neovim/neovim/src/nvim/channel.c:480:8\r\n=     #14 0x557e1eb2056c in channel_connect_event /home/runner/work/neovim/neovim/src/nvim/ui_client.c:304:19\r\n=     #15 0x557e1dd89406 in multiqueue_process_events /home/runner/work/neovim/neovim/src/nvim/event/multiqueue.c:161:7\r\n=     #16 0x557e1dd84096 in loop_poll_events /home/runner/work/neovim/neovim/src/nvim/event/loop.c:83:3\r\n=     #17 0x557e1eb1dfb2 in ui_client_run /home/runner/work/neovim/neovim/src/nvim/ui_client.c:180:5\r\n=     #18 0x557e1e15d126 in main /home/runner/work/neovim/neovim/src/nvim/main.c:348:5\r\n=     #19 0x7fa4e9a2a1c9 in __libc_start_call_main csu/../sysdeps/nptl/libc_start_call_main.h:58:16\r\n=     #20 0x7fa4e9a2a28a in __libc_start_main csu/../csu/libc-start.c:360:3\r\n=     #21 0x557e1d5e5f64 in _start (/home/runner/work/neovim/neovim/build/bin/nvim+0xc7af64) (BuildId: 5e5397973103f77e80884051960cf7d7f3d875d9)\r\n= \r\n= ==22829==Register values:\r\n= rax = 0x0000000000000180  rbx = 0x00007ffcc40aa500  rcx = 0x0000000000000001  rdx = 0x0000000000000000  \r\n= rdi = 0x00007ffcc40a9648  rsi = 0x0000000000000000  rbp = 0x00007ffcc40aa330  rsp = 0x00007ffcc40aa2f0  \r\n=  r8 = 0x000000000000007c   r9 = 0x0000000000000000  r10 = 0xafffff00000fffff  r11 = 0x0000000000000246  \r\n= r12 = 0x0000000000000005  r13 = 0x0000000000000000  r14 = 0x0000557e1f1d3e00  r15 = 0x00007fa4e9f2f000  \r\n= AddressSanitizer can not provide additional info.\r\n= SUMMARY: AddressSanitizer: SEGV /home/runner/work/neovim/neovim/src/nvim/event/stream.c:151:7 in \r\n```",
            "created_at": "2025-07-24T02:35:57Z",
            "html_url": "https://github.com/neovim/neovim/pull/34586#issuecomment-3111755649",
            "id": 3111755649,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34586",
            "node_id": "IC_kwDOAPphoM65eZ-B",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3111755649/reactions"
            },
            "updated_at": "2025-07-24T02:35:57Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3111755649",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "The ASAN error seems to be caused due to the server and ui being separate processes. Since the `ui_client` and the `server` processes are separate, it seems like some times the exit is triggered while the connect is happening and as a result some channel pointer is left dangling. I'm not sure if this can be fixed without having some sort of state (`has_connected` or something similar)",
            "created_at": "2025-07-25T11:06:03Z",
            "html_url": "https://github.com/neovim/neovim/pull/34586#issuecomment-3117374184",
            "id": 3117374184,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34586",
            "node_id": "IC_kwDOAPphoM65z1ro",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3117374184/reactions"
            },
            "updated_at": "2025-07-25T11:06:03Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3117374184",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/68201519?v=4",
                "events_url": "https://api.github.com/users/siddhantdev/events{/privacy}",
                "followers_url": "https://api.github.com/users/siddhantdev/followers",
                "following_url": "https://api.github.com/users/siddhantdev/following{/other_user}",
                "gists_url": "https://api.github.com/users/siddhantdev/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/siddhantdev",
                "id": 68201519,
                "login": "siddhantdev",
                "node_id": "MDQ6VXNlcjY4MjAxNTE5",
                "organizations_url": "https://api.github.com/users/siddhantdev/orgs",
                "received_events_url": "https://api.github.com/users/siddhantdev/received_events",
                "repos_url": "https://api.github.com/users/siddhantdev/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/siddhantdev/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/siddhantdev/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/siddhantdev",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Nice work finding a solution, let's merge and continue iterating.",
            "created_at": "2025-08-14T22:56:52Z",
            "html_url": "https://github.com/neovim/neovim/pull/34586#issuecomment-3190099991",
            "id": 3190099991,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34586",
            "node_id": "IC_kwDOAPphoM6-JRAX",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3190099991/reactions"
            },
            "updated_at": "2025-08-14T22:56:52Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3190099991",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> it seems like some times the exit is triggered while the connect is happening and as a result some channel pointer is left dangling.\r\n\r\nI've been looking into this recently and I don't think this is what causes the ASAN error. This is a NULL pointer dereference, not a heap-use-after-free. The ASAN error happens because Nvim exits between the `uv_tcp_init()` and `stream_init()` calls, where `stream->s.uvstream` isn't set yet, so when `stream_close_handle()` is called during `channel_teardown()` it attempts to close `stream->s.uv.idle` which shares the same address as `stream->s.uv.tcp` whose `data` field is `NULL`.",
            "created_at": "2025-10-31T02:58:47Z",
            "html_url": "https://github.com/neovim/neovim/pull/34586#issuecomment-3471112970",
            "id": 3471112970,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34586",
            "node_id": "IC_kwDOAPphoM7O5PsK",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 2,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3471112970/reactions"
            },
            "updated_at": "2025-10-31T03:06:03Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3471112970",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Thanks for pointing this out. I don't think I fully understand the problem, its been very long since I looked at code because of college. The solution that's currently in place is just to check if the pointer is null or not before attempting to close it. Do you think that would have other unintended side effects or is it fine?",
            "created_at": "2025-10-31T03:10:41Z",
            "html_url": "https://github.com/neovim/neovim/pull/34586#issuecomment-3471130927",
            "id": 3471130927,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34586",
            "node_id": "IC_kwDOAPphoM7O5UEv",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3471130927/reactions"
            },
            "updated_at": "2025-10-31T03:10:41Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3471130927",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/68201519?v=4",
                "events_url": "https://api.github.com/users/siddhantdev/events{/privacy}",
                "followers_url": "https://api.github.com/users/siddhantdev/followers",
                "following_url": "https://api.github.com/users/siddhantdev/following{/other_user}",
                "gists_url": "https://api.github.com/users/siddhantdev/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/siddhantdev",
                "id": 68201519,
                "login": "siddhantdev",
                "node_id": "MDQ6VXNlcjY4MjAxNTE5",
                "organizations_url": "https://api.github.com/users/siddhantdev/orgs",
                "received_events_url": "https://api.github.com/users/siddhantdev/received_events",
                "repos_url": "https://api.github.com/users/siddhantdev/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/siddhantdev/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/siddhantdev/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/siddhantdev",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I think the current solution is fine, as `stream->s.uv.tcp` does need to be closed.",
            "created_at": "2025-10-31T03:28:46Z",
            "html_url": "https://github.com/neovim/neovim/pull/34586#issuecomment-3471179645",
            "id": 3471179645,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34586",
            "node_id": "IC_kwDOAPphoM7O5f99",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3471179645/reactions"
            },
            "updated_at": "2025-10-31T03:28:46Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3471179645",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        }
    ],
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/34586/comments",
    "commits_url": "https://api.github.com/repos/neovim/neovim/pulls/34586/commits",
    "created_at": "2025-06-20T16:55:03Z",
    "diff_url": "https://github.com/neovim/neovim/pull/34586.diff",
    "draft": false,
    "head": {
        "label": "siddhantdev:connect",
        "ref": "connect",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/siddhantdev/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/siddhantdev/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/siddhantdev/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/siddhantdev/neovim/branches{/branch}",
            "clone_url": "https://github.com/siddhantdev/neovim.git",
            "collaborators_url": "https://api.github.com/repos/siddhantdev/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/siddhantdev/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/siddhantdev/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/siddhantdev/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/siddhantdev/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/siddhantdev/neovim/contributors",
            "created_at": "2024-12-25T05:21:52Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/siddhantdev/neovim/deployments",
            "description": "Vim-fork focused on extensibility and usability",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/siddhantdev/neovim/downloads",
            "events_url": "https://api.github.com/repos/siddhantdev/neovim/events",
            "fork": true,
            "forks": 0,
            "forks_count": 0,
            "forks_url": "https://api.github.com/repos/siddhantdev/neovim/forks",
            "full_name": "siddhantdev/neovim",
            "git_commits_url": "https://api.github.com/repos/siddhantdev/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/siddhantdev/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/siddhantdev/neovim/git/tags{/sha}",
            "git_url": "git://github.com/siddhantdev/neovim.git",
            "has_discussions": false,
            "has_downloads": true,
            "has_issues": false,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://neovim.io",
            "hooks_url": "https://api.github.com/repos/siddhantdev/neovim/hooks",
            "html_url": "https://github.com/siddhantdev/neovim",
            "id": 908089530,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/siddhantdev/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/siddhantdev/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/siddhantdev/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/siddhantdev/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/siddhantdev/neovim/labels{/name}",
            "language": "Vim Script",
            "languages_url": "https://api.github.com/repos/siddhantdev/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/siddhantdev/neovim/merges",
            "milestones_url": "https://api.github.com/repos/siddhantdev/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "R_kgDONiBYug",
            "notifications_url": "https://api.github.com/repos/siddhantdev/neovim/notifications{?since,all,participating}",
            "open_issues": 0,
            "open_issues_count": 0,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/68201519?v=4",
                "events_url": "https://api.github.com/users/siddhantdev/events{/privacy}",
                "followers_url": "https://api.github.com/users/siddhantdev/followers",
                "following_url": "https://api.github.com/users/siddhantdev/following{/other_user}",
                "gists_url": "https://api.github.com/users/siddhantdev/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/siddhantdev",
                "id": 68201519,
                "login": "siddhantdev",
                "node_id": "MDQ6VXNlcjY4MjAxNTE5",
                "organizations_url": "https://api.github.com/users/siddhantdev/orgs",
                "received_events_url": "https://api.github.com/users/siddhantdev/received_events",
                "repos_url": "https://api.github.com/users/siddhantdev/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/siddhantdev/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/siddhantdev/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/siddhantdev",
                "user_view_type": "public"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/siddhantdev/neovim/pulls{/number}",
            "pushed_at": "2025-10-09T21:09:55Z",
            "releases_url": "https://api.github.com/repos/siddhantdev/neovim/releases{/id}",
            "size": 343264,
            "ssh_url": "git@github.com:siddhantdev/neovim.git",
            "stargazers_count": 0,
            "stargazers_url": "https://api.github.com/repos/siddhantdev/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/siddhantdev/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/siddhantdev/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/siddhantdev/neovim/subscription",
            "svn_url": "https://github.com/siddhantdev/neovim",
            "tags_url": "https://api.github.com/repos/siddhantdev/neovim/tags",
            "teams_url": "https://api.github.com/repos/siddhantdev/neovim/teams",
            "topics": [],
            "trees_url": "https://api.github.com/repos/siddhantdev/neovim/git/trees{/sha}",
            "updated_at": "2025-10-09T21:10:09Z",
            "url": "https://api.github.com/repos/siddhantdev/neovim",
            "visibility": "public",
            "watchers": 0,
            "watchers_count": 0,
            "web_commit_signoff_required": false
        },
        "sha": "efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/68201519?v=4",
            "events_url": "https://api.github.com/users/siddhantdev/events{/privacy}",
            "followers_url": "https://api.github.com/users/siddhantdev/followers",
            "following_url": "https://api.github.com/users/siddhantdev/following{/other_user}",
            "gists_url": "https://api.github.com/users/siddhantdev/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/siddhantdev",
            "id": 68201519,
            "login": "siddhantdev",
            "node_id": "MDQ6VXNlcjY4MjAxNTE5",
            "organizations_url": "https://api.github.com/users/siddhantdev/orgs",
            "received_events_url": "https://api.github.com/users/siddhantdev/received_events",
            "repos_url": "https://api.github.com/users/siddhantdev/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/siddhantdev/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/siddhantdev/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/siddhantdev",
            "user_view_type": "public"
        }
    },
    "html_url": "https://github.com/neovim/neovim/pull/34586",
    "id": 2607999420,
    "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34586",
    "labels": [
        {
            "color": "c5def5",
            "default": false,
            "description": "",
            "id": 113026979,
            "name": "ui",
            "node_id": "MDU6TGFiZWwxMTMwMjY5Nzk=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/ui"
        },
        {
            "color": "F3A62E",
            "default": false,
            "description": "community: Google Summer of Code project",
            "id": 834483397,
            "name": "gsoc",
            "node_id": "MDU6TGFiZWw4MzQ0ODMzOTc=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/gsoc"
        }
    ],
    "locked": false,
    "merge_commit_sha": "649bb372f66591c8349a4d3117f05e9f02549a1b",
    "merged_at": "2025-08-14T22:58:10Z",
    "milestone": null,
    "node_id": "PR_kwDOAPphoM6bcum8",
    "number": 34586,
    "patch_url": "https://github.com/neovim/neovim/pull/34586.patch",
    "requested_reviewers": [],
    "requested_teams": [],
    "review_comment_url": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}",
    "review_comments_url": "https://api.github.com/repos/neovim/neovim/pulls/34586/comments",
    "state": "closed",
    "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/efdcfdf8545981faf4f78f8f06d8f34a60a65dfe",
    "title": "feat(ui): :connect command",
    "updated_at": "2025-10-31T03:28:46Z",
    "url": "https://api.github.com/repos/neovim/neovim/pulls/34586",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/68201519?v=4",
        "events_url": "https://api.github.com/users/siddhantdev/events{/privacy}",
        "followers_url": "https://api.github.com/users/siddhantdev/followers",
        "following_url": "https://api.github.com/users/siddhantdev/following{/other_user}",
        "gists_url": "https://api.github.com/users/siddhantdev/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/siddhantdev",
        "id": 68201519,
        "login": "siddhantdev",
        "node_id": "MDQ6VXNlcjY4MjAxNTE5",
        "organizations_url": "https://api.github.com/users/siddhantdev/orgs",
        "received_events_url": "https://api.github.com/users/siddhantdev/received_events",
        "repos_url": "https://api.github.com/users/siddhantdev/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/siddhantdev/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/siddhantdev/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/siddhantdev",
        "user_view_type": "public"
    }
}