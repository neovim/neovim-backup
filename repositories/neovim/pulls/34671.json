{
    "_links": {
        "comments": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/34671/comments"
        },
        "commits": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/34671/commits"
        },
        "html": {
            "href": "https://github.com/neovim/neovim/pull/34671"
        },
        "issue": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/34671"
        },
        "review_comment": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}"
        },
        "review_comments": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/34671/comments"
        },
        "self": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/34671"
        },
        "statuses": {
            "href": "https://api.github.com/repos/neovim/neovim/statuses/dd72b33fefda51ac4318c0322efa95b960f30851"
        }
    },
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "auto_merge": null,
    "base": {
        "label": "neovim:master",
        "ref": "master",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/neovim/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/neovim/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/neovim/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/neovim/neovim/branches{/branch}",
            "clone_url": "https://github.com/neovim/neovim.git",
            "collaborators_url": "https://api.github.com/repos/neovim/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/neovim/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/neovim/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/neovim/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/neovim/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/neovim/neovim/contributors",
            "created_at": "2014-01-31T13:39:22Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/neovim/neovim/deployments",
            "description": "Vim-fork focused on extensibility and usability",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/neovim/neovim/downloads",
            "events_url": "https://api.github.com/repos/neovim/neovim/events",
            "fork": false,
            "forks": 6150,
            "forks_count": 6150,
            "forks_url": "https://api.github.com/repos/neovim/neovim/forks",
            "full_name": "neovim/neovim",
            "git_commits_url": "https://api.github.com/repos/neovim/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/neovim/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/neovim/neovim/git/tags{/sha}",
            "git_url": "git://github.com/neovim/neovim.git",
            "has_discussions": true,
            "has_downloads": true,
            "has_issues": true,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://neovim.io",
            "hooks_url": "https://api.github.com/repos/neovim/neovim/hooks",
            "html_url": "https://github.com/neovim/neovim",
            "id": 16408992,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/neovim/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/neovim/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/neovim/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/neovim/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/neovim/neovim/labels{/name}",
            "language": "Vim Script",
            "languages_url": "https://api.github.com/repos/neovim/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/neovim/neovim/merges",
            "milestones_url": "https://api.github.com/repos/neovim/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "MDEwOlJlcG9zaXRvcnkxNjQwODk5Mg==",
            "notifications_url": "https://api.github.com/repos/neovim/neovim/notifications{?since,all,participating}",
            "open_issues": 1963,
            "open_issues_count": 1963,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
                "events_url": "https://api.github.com/users/neovim/events{/privacy}",
                "followers_url": "https://api.github.com/users/neovim/followers",
                "following_url": "https://api.github.com/users/neovim/following{/other_user}",
                "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/neovim",
                "id": 6471485,
                "login": "neovim",
                "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
                "organizations_url": "https://api.github.com/users/neovim/orgs",
                "received_events_url": "https://api.github.com/users/neovim/received_events",
                "repos_url": "https://api.github.com/users/neovim/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
                "type": "Organization",
                "url": "https://api.github.com/users/neovim",
                "user_view_type": "public"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/neovim/neovim/pulls{/number}",
            "pushed_at": "2025-06-30T23:58:06Z",
            "releases_url": "https://api.github.com/repos/neovim/neovim/releases{/id}",
            "size": 330464,
            "ssh_url": "git@github.com:neovim/neovim.git",
            "stargazers_count": 90708,
            "stargazers_url": "https://api.github.com/repos/neovim/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/neovim/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/neovim/neovim/subscription",
            "svn_url": "https://github.com/neovim/neovim",
            "tags_url": "https://api.github.com/repos/neovim/neovim/tags",
            "teams_url": "https://api.github.com/repos/neovim/neovim/teams",
            "topics": [
                "api",
                "c",
                "lua",
                "neovim",
                "nvim",
                "text-editor",
                "vim"
            ],
            "trees_url": "https://api.github.com/repos/neovim/neovim/git/trees{/sha}",
            "updated_at": "2025-07-01T02:27:30Z",
            "url": "https://api.github.com/repos/neovim/neovim",
            "visibility": "public",
            "watchers": 90708,
            "watchers_count": 90708,
            "web_commit_signoff_required": false
        },
        "sha": "2b4c1127ad1c8cff38f562d71f411c35ec6ba8d6",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
            "events_url": "https://api.github.com/users/neovim/events{/privacy}",
            "followers_url": "https://api.github.com/users/neovim/followers",
            "following_url": "https://api.github.com/users/neovim/following{/other_user}",
            "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/neovim",
            "id": 6471485,
            "login": "neovim",
            "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
            "organizations_url": "https://api.github.com/users/neovim/orgs",
            "received_events_url": "https://api.github.com/users/neovim/received_events",
            "repos_url": "https://api.github.com/users/neovim/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
            "type": "Organization",
            "url": "https://api.github.com/users/neovim",
            "user_view_type": "public"
        }
    },
    "body": "<!--\r\n  Thank you for contributing to Neovim!\r\n  If this is your first time, check out https://github.com/neovim/neovim/blob/master/CONTRIBUTING.md#pull-requests-prs\r\n  for our PR guidelines.\r\n-->\r\nFixes cases where we are creating new prompts due to useredits in prompt_callback and through api but not adjusting the pormpt location mark properly.\r\n\r\nref\r\nhttps://github.com/neovim/neovim/issues/34561#issuecomment-2993530641\r\nhttps://github.com/neovim/neovim/issues/34561#issuecomment-3007749608\r\n",
    "closed_at": "2025-06-30T10:19:44Z",
    "comment_data": [
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34671#discussion_r2171712419"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34671"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2171712419"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n  it('programmatic (non-user) edits', function()\r\n```",
            "commit_id": "dd72b33fefda51ac4318c0322efa95b960f30851",
            "created_at": "2025-06-27T11:31:42Z",
            "diff_hunk": "@@ -596,4 +597,79 @@ describe('prompt buffer', function()\n       eq('', fn('prompt_getinput', bufnr))\n     end)\n   end)\n+\n+  it(\"text-edit with api handled correctly\", function()",
            "html_url": "https://github.com/neovim/neovim/pull/34671#discussion_r2171712419",
            "id": 2171712419,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6BcbOj",
            "original_commit_id": "6c884b2dd4bcb0db660d779ce5bc939cd1006b5c",
            "original_line": 601,
            "original_position": 13,
            "original_start_line": null,
            "path": "test/functional/legacy/prompt_buffer_spec.lua",
            "position": null,
            "pull_request_review_id": 2966143244,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34671",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2171712419/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-06-27T11:31:43Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2171712419",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/34671#discussion_r2171713387"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/34671"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/2171713387"
                }
            },
            "author_association": "MEMBER",
            "body": "ctrl-f \"mutli\" => \"multi\"",
            "commit_id": "dd72b33fefda51ac4318c0322efa95b960f30851",
            "created_at": "2025-06-27T11:32:22Z",
            "diff_hunk": "@@ -596,4 +597,79 @@ describe('prompt buffer', function()\n       eq('', fn('prompt_getinput', bufnr))\n     end)\n   end)\n+\n+  it(\"text-edit with api handled correctly\", function()\n+    api.nvim_set_option_value('buftype', 'prompt', { buf = 0 })\n+\n+    -- with nvim_buf_set_lines\n+    exec_lua([[\n+      local buf = vim.api.nvim_get_current_buf()\n+      vim.fn.prompt_setcallback(buf, function(text)\n+        vim.api.nvim_buf_set_lines(buf, -2, -2, true, vim.split(text, '\\n'))\n+      end)\n+    ]])\n+    feed('iset_lines<cr>')\n+    feed('set_lines2<cr>')\n+    screen:expect([[\n+      % set_lines              |\n+      set_lines                |\n+      % set_lines2             |\n+      set_lines2               |\n+      % ^                       |\n+      {1:~                        }|*4\n+      {5:-- INSERT --}             |\n+    ]])\n+\n+    feed('set_lines3(mutli-1)<s-cr>set_lines3(mutli-2)<cr>')",
            "html_url": "https://github.com/neovim/neovim/pull/34671#discussion_r2171713387",
            "id": 2171713387,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM6Bcbdr",
            "original_commit_id": "6c884b2dd4bcb0db660d779ce5bc939cd1006b5c",
            "original_line": 623,
            "original_position": 35,
            "original_start_line": null,
            "path": "test/functional/legacy/prompt_buffer_spec.lua",
            "position": null,
            "pull_request_review_id": 2966144829,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/34671",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2171713387/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2025-06-27T11:32:22Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/2171713387",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        }
    ],
    "comment_regular_data": [
        {
            "author_association": "MEMBER",
            "body": "> @mfussenegger can you check if https://github.com/neovim/neovim/pull/34671 fixes the issues you were facing or if you found any else.\r\n\r\nAs far as I can tell this fixes the cases I had posted. One case that still causes trouble is:\r\n\r\n```\r\napi = vim.api\r\napi.nvim_create_user_command(\"Prompt\", function(args)\r\n  vim.cmd(\"new\")\r\n  local buf = api.nvim_get_current_buf()\r\n  vim.bo[buf].buftype = \"prompt\"\r\n  local prompt = \"> \"\r\n\r\n  local function execute(text)\r\n    vim.schedule(function()\r\n      api.nvim_buf_set_lines(buf, -1, -1, true, {\"Hello\"})\r\n      api.nvim_buf_set_lines(buf, -1, -1, true, vim.split(text, \"\\n\"))\r\n    end)\r\n  end\r\n\r\n  vim.fn.prompt_setprompt(buf, prompt)\r\n  vim.fn.prompt_setcallback(buf, execute)\r\nend, {})\r\n```\r\n\r\nBut I suspect this is now one scenario where I need to update the logic to use the `:` mark?",
            "created_at": "2025-06-27T08:01:45Z",
            "html_url": "https://github.com/neovim/neovim/pull/34671#issuecomment-3012103930",
            "id": 3012103930,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34671",
            "node_id": "IC_kwDOAPphoM6ziQ76",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3012103930/reactions"
            },
            "updated_at": "2025-06-27T08:01:45Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3012103930",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/38700?v=4",
                "events_url": "https://api.github.com/users/mfussenegger/events{/privacy}",
                "followers_url": "https://api.github.com/users/mfussenegger/followers",
                "following_url": "https://api.github.com/users/mfussenegger/following{/other_user}",
                "gists_url": "https://api.github.com/users/mfussenegger/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mfussenegger",
                "id": 38700,
                "login": "mfussenegger",
                "node_id": "MDQ6VXNlcjM4NzAw",
                "organizations_url": "https://api.github.com/users/mfussenegger/orgs",
                "received_events_url": "https://api.github.com/users/mfussenegger/received_events",
                "repos_url": "https://api.github.com/users/mfussenegger/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mfussenegger/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mfussenegger/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mfussenegger",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "That script is a good test case to include (maybe in this PR).\r\n\r\nResult of hitting Enter twice, before multiline prompt support (i.e. before 286371b4d22a):\r\n\r\n```\r\n> \r\n> \r\nHello\r\n> \r\n> \r\nHello\r\n> \r\n```\r\n\r\nResult of hitting Enter twice, on current master:\r\n\r\n```\r\n> \r\n> \r\nHello\r\n\r\n> \r\nHello\r\n\r\nHello\r\n```\r\n\r\nWhen the 2nd prompt is submitted, Nvim treats the script-inserted \"Hello\" text as part of the multiline user-input (anything below the start of the `':` mark).\r\n\r\nIn the old behavior, the `>` prompt is placed *after* the script-inserted \"Hello\". Was there an order-of-operations change? If current master placed the `>` prompt after the script-inserted \"Hello\", there would be no problem?",
            "created_at": "2025-06-27T09:17:37Z",
            "html_url": "https://github.com/neovim/neovim/pull/34671#issuecomment-3012313420",
            "id": 3012313420,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34671",
            "node_id": "IC_kwDOAPphoM6zjEFM",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3012313420/reactions"
            },
            "updated_at": "2025-06-27T09:17:37Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3012313420",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "When you're setting lines with -1 it's basically creating a new line at the bottom of the buffer beyond last line. Because this edit is coming after we're done processing `prompt-callback` we can't really tell if it's coming from side-effect of previous prompt or some other edit operation.\r\n\r\nBasically this is what happening.\r\n- on submit:\r\n1. add a new line to buffer\r\n2. call prompt callback with prompt text\r\n3. add a new prompt to the end of buffer.\r\n----------------------------------------------------------\r\n- At this point your edit comes in as it's being processed in different event\r\n----------------------------------------------------------\r\n4. you create a line at buttom of the buffer after current prompt\r\n----------------------------------------------\r\n- Here's the divergence\r\n---------------------------------------------\r\nBefore multiline support we'd always treat only the last line as input. So when you added a newline without the prompt we used to just create another prompt below. As input could never be multiline\r\n\r\nBut, now since inputs can be multiline this newline falls in editable region and is treated as input-edit.\r\n\r\nI think another side-effect of previous behavior is say, your response came in async a bit late and the user wrote something on the prompt after your edit it'd be lost in the readonly region.\r\n\r\nFor-example:\r\n```lua\r\napi = vim.api\r\napi.nvim_create_user_command(\"Prompt\", function(args)\r\n  vim.cmd(\"new\")\r\n  local buf = api.nvim_get_current_buf()\r\n  vim.bo[buf].buftype = \"prompt\"\r\n  local prompt = \"> \"\r\n\r\n  local function execute(text)\r\n    vim.defer_fn(vim.schedule_wrap(function()\r\n      api.nvim_buf_set_lines(buf, -1, -1, true, {\"Hello\"})\r\n      api.nvim_buf_set_lines(buf, -1, -1, true, vim.split(text, \"\\n\"))\r\n    end), 2000)\r\n  end\r\n\r\n  vim.fn.prompt_setprompt(buf, prompt)\r\n  vim.fn.prompt_setcallback(buf, execute)\r\nend, {})\r\n```\r\n\r\nIf we delay the write by 2s. Say you press enter and type in some text in that 2s window. As the edit comes in your entered text will be in readonly region.\r\n\r\nThat's also a buggy behavior that we couldn't fix before this.\r\n\r\nI believe current behavior is appropriate. We are treating edits in editable region through api as prompt-text. And ignoring stuff in readonly region.\r\n\r\n> But I suspect this is now one scenario where I need to update the logic to use the : mark?\r\n\r\nProper, fix would definitely be to use ':' mark to insert text in the readonly region. Especially, when you're not making the edit in prompt-callback.\r\n\r\n\r\n",
            "created_at": "2025-06-27T11:13:47Z",
            "html_url": "https://github.com/neovim/neovim/pull/34671#issuecomment-3012641573",
            "id": 3012641573,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34671",
            "node_id": "IC_kwDOAPphoM6zkUMl",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3012641573/reactions"
            },
            "updated_at": "2025-06-27T11:15:01Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3012641573",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/13149513?v=4",
                "events_url": "https://api.github.com/users/shadmansaleh/events{/privacy}",
                "followers_url": "https://api.github.com/users/shadmansaleh/followers",
                "following_url": "https://api.github.com/users/shadmansaleh/following{/other_user}",
                "gists_url": "https://api.github.com/users/shadmansaleh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/shadmansaleh",
                "id": 13149513,
                "login": "shadmansaleh",
                "node_id": "MDQ6VXNlcjEzMTQ5NTEz",
                "organizations_url": "https://api.github.com/users/shadmansaleh/orgs",
                "received_events_url": "https://api.github.com/users/shadmansaleh/received_events",
                "repos_url": "https://api.github.com/users/shadmansaleh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/shadmansaleh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/shadmansaleh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/shadmansaleh",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> When you're setting lines with -1 it's basically creating a new line at the bottom of the buffer beyond last line. Because this edit is coming after we're done processing `prompt-callback`\r\n\r\nBut how was the old impl able to place the prompt `>` after the inserted line?",
            "created_at": "2025-06-27T11:29:54Z",
            "html_url": "https://github.com/neovim/neovim/pull/34671#issuecomment-3012682062",
            "id": 3012682062,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34671",
            "node_id": "IC_kwDOAPphoM6zkeFO",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3012682062/reactions"
            },
            "updated_at": "2025-06-27T11:29:54Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3012682062",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "> But how was the old impl able to place the prompt > after the inserted line?\r\n\r\n`init_prompt()` would just add a new prompt if the last line of the buffer doesn't start with 'prompt'. It now does it too. But only if the line marked by our `prompt_start` mark doesn't start with 'prompt'\r\n\r\nhttps://github.com/neovim/neovim/blob/496691f985a1aacd9a0977c558ff4ce6980e13c8/src/nvim/edit.c#L1537-L1547",
            "created_at": "2025-06-27T11:35:08Z",
            "html_url": "https://github.com/neovim/neovim/pull/34671#issuecomment-3012694939",
            "id": 3012694939,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34671",
            "node_id": "IC_kwDOAPphoM6zkhOb",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3012694939/reactions"
            },
            "updated_at": "2025-06-27T11:44:42Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3012694939",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/13149513?v=4",
                "events_url": "https://api.github.com/users/shadmansaleh/events{/privacy}",
                "followers_url": "https://api.github.com/users/shadmansaleh/followers",
                "following_url": "https://api.github.com/users/shadmansaleh/following{/other_user}",
                "gists_url": "https://api.github.com/users/shadmansaleh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/shadmansaleh",
                "id": 13149513,
                "login": "shadmansaleh",
                "node_id": "MDQ6VXNlcjEzMTQ5NTEz",
                "organizations_url": "https://api.github.com/users/shadmansaleh/orgs",
                "received_events_url": "https://api.github.com/users/shadmansaleh/received_events",
                "repos_url": "https://api.github.com/users/shadmansaleh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/shadmansaleh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/shadmansaleh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/shadmansaleh",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "What is the recommended way (i.e., sample code) for plugins to add lines to the prompt-buffer, using `nvim_buf_set_lines` for example? Will the `':` mark be correct during the `prompt_setcallback`, or is it required to use `vim.schedule` ?",
            "created_at": "2025-06-27T12:01:45Z",
            "html_url": "https://github.com/neovim/neovim/pull/34671#issuecomment-3012777754",
            "id": 3012777754,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34671",
            "node_id": "IC_kwDOAPphoM6zk1ca",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3012777754/reactions"
            },
            "updated_at": "2025-06-27T13:43:34Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3012777754",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "> What is the recommended way for plugins to add lines to the prompt-buffer, using `nvim_buf_set_lines` for example? Will the `':` mark be correct during the `prompt_setcallback`, or is it required to use `vim.schedule` ?\r\n\r\nBoth should work if inserted with respect to ':' mark.\r\n\r\nAfter this pr we do this on submit\r\n1. add a line after prompt.\r\n2. push the ':' mark one line ahead to new line\r\n3. call prompt-callback\r\n4. put the ':' mark at end of buffer\r\n\r\n\r\nSo, if plugins modify the buffer inside prompt callback it should find ':' at new expected prompt location. So line before ':' is where they should insert. Whatever they may do when we start the next prompt it's set at the last line of buffer so any edits inside the prompt-callback whould be accounted for.\r\n\r\nNow if edits are done out of the prompt-callback. ':' would still be at the prompt line. So plugins should still make edits to line before ':' (consistent with being inside prompt-callback) . As lines are inserted before ':' mark. The mark should get adjusted by neovim. And it shouldn't effect user's input or what gets submitted to prompt-callback. That's how things should work in theory atleast unless there are bugs :] . So, plugins should be able to choose whichever they prefer. Technically, edits in prompt-callback is less likely to encounter bug if there's one. But with async stuff it might not always be feasible. ",
            "created_at": "2025-06-27T12:18:52Z",
            "html_url": "https://github.com/neovim/neovim/pull/34671#issuecomment-3012833972",
            "id": 3012833972,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34671",
            "node_id": "IC_kwDOAPphoM6zlDK0",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3012833972/reactions"
            },
            "updated_at": "2025-06-27T12:18:52Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3012833972",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/13149513?v=4",
                "events_url": "https://api.github.com/users/shadmansaleh/events{/privacy}",
                "followers_url": "https://api.github.com/users/shadmansaleh/followers",
                "following_url": "https://api.github.com/users/shadmansaleh/following{/other_user}",
                "gists_url": "https://api.github.com/users/shadmansaleh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/shadmansaleh",
                "id": 13149513,
                "login": "shadmansaleh",
                "node_id": "MDQ6VXNlcjEzMTQ5NTEz",
                "organizations_url": "https://api.github.com/users/shadmansaleh/orgs",
                "received_events_url": "https://api.github.com/users/shadmansaleh/received_events",
                "repos_url": "https://api.github.com/users/shadmansaleh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/shadmansaleh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/shadmansaleh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/shadmansaleh",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> What is the recommended way for plugins to add lines to the prompt-buffer, using `nvim_buf_set_lines` for example?\r\n\r\nlooking for sample code",
            "created_at": "2025-06-27T13:44:13Z",
            "html_url": "https://github.com/neovim/neovim/pull/34671#issuecomment-3013140336",
            "id": 3013140336,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34671",
            "node_id": "IC_kwDOAPphoM6zmN9w",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3013140336/reactions"
            },
            "updated_at": "2025-06-27T13:44:13Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3013140336",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "> looking for sample code\r\n\r\nfrom callback without-mark:\r\n```lua\r\nvim.fn.prompt_setcallback(buf, function(txt)\r\n  vim.api.nvim_buf_set_lines(buf, -2, -2, true, vim.split(txt, '\\n'))\r\nend)\r\n```\r\nfrom callback with-mark:\r\n```lua\r\nvim.fn.prompt_setcallback(buf, function(txt)\r\n  local cur_prompt = vim.api.nvim_buf_get_mark(buf, ':')[1]\r\n  vim.api.nvim_buf_set_lines(buf, cur_prompt-1, cur_prompt-1, true, vim.split(txt, '\\n'))\r\nend)\r\n```\r\n\r\nfrom scheduled function:\r\n```lua\r\nvim.fn.prompt_setcallback(buf, function(txt)\r\n  vim.schedule(function ()\r\n    local cur_prompt = vim.api.nvim_buf_get_mark(buf, ':')[1]\r\n    vim.api.nvim_buf_set_lines(buf, cur_prompt-1, cur_prompt-1, true, vim.split(txt, '\\n'))\r\n  end)\r\nend)\r\n```\r\n\r\nOther api functions `nvim_buf_set_text`, vim functions `append`, `appendbufline` can be used too.\r\n\r\n\r\nAmong all the options. I'd say using `nvim_buf_set_lines` directly inside the prompt-callback is recommended. And is least likely to face any issues. Basically you can think example 1 is least likely to face any bugs.",
            "created_at": "2025-06-27T14:25:42Z",
            "html_url": "https://github.com/neovim/neovim/pull/34671#issuecomment-3013265415",
            "id": 3013265415,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34671",
            "node_id": "IC_kwDOAPphoM6zmsgH",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3013265415/reactions"
            },
            "updated_at": "2025-06-27T14:30:59Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3013265415",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/13149513?v=4",
                "events_url": "https://api.github.com/users/shadmansaleh/events{/privacy}",
                "followers_url": "https://api.github.com/users/shadmansaleh/followers",
                "following_url": "https://api.github.com/users/shadmansaleh/following{/other_user}",
                "gists_url": "https://api.github.com/users/shadmansaleh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/shadmansaleh",
                "id": 13149513,
                "login": "shadmansaleh",
                "node_id": "MDQ6VXNlcjEzMTQ5NTEz",
                "organizations_url": "https://api.github.com/users/shadmansaleh/orgs",
                "received_events_url": "https://api.github.com/users/shadmansaleh/received_events",
                "repos_url": "https://api.github.com/users/shadmansaleh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/shadmansaleh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/shadmansaleh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/shadmansaleh",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I think I've got nvim-dap mostly working now with the changes in this PR, so from my side +1",
            "created_at": "2025-06-27T20:12:00Z",
            "html_url": "https://github.com/neovim/neovim/pull/34671#issuecomment-3014252991",
            "id": 3014252991,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34671",
            "node_id": "IC_kwDOAPphoM6zqdm_",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3014252991/reactions"
            },
            "updated_at": "2025-06-27T20:12:00Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3014252991",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/38700?v=4",
                "events_url": "https://api.github.com/users/mfussenegger/events{/privacy}",
                "followers_url": "https://api.github.com/users/mfussenegger/followers",
                "following_url": "https://api.github.com/users/mfussenegger/following{/other_user}",
                "gists_url": "https://api.github.com/users/mfussenegger/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mfussenegger",
                "id": 38700,
                "login": "mfussenegger",
                "node_id": "MDQ6VXNlcjM4NzAw",
                "organizations_url": "https://api.github.com/users/mfussenegger/orgs",
                "received_events_url": "https://api.github.com/users/mfussenegger/received_events",
                "repos_url": "https://api.github.com/users/mfussenegger/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mfussenegger/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mfussenegger/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mfussenegger",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> Basically you can think example 1 is least likely to face any bugs.\r\n\r\nThe example *without* the mark is the most reliable? That somewhat of defeats the purpose of the `':` mark...",
            "created_at": "2025-06-30T09:55:25Z",
            "html_url": "https://github.com/neovim/neovim/pull/34671#issuecomment-3018526356",
            "id": 3018526356,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34671",
            "node_id": "IC_kwDOAPphoM6z6w6U",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3018526356/reactions"
            },
            "updated_at": "2025-06-30T09:55:25Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3018526356",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> The example without the mark is the most reliable? That somewhat of defeats the purpose of the ': mark...\r\n\r\nThat example is limited to synchronous code executed _within_ the callback. It won't work for anything asynchronous/running after the callback finished.\r\nThe mark is required to get the asynchronous variant working. \r\n",
            "created_at": "2025-06-30T10:14:45Z",
            "html_url": "https://github.com/neovim/neovim/pull/34671#issuecomment-3018586153",
            "id": 3018586153,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34671",
            "node_id": "IC_kwDOAPphoM6z6_gp",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3018586153/reactions"
            },
            "updated_at": "2025-06-30T10:14:45Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3018586153",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/38700?v=4",
                "events_url": "https://api.github.com/users/mfussenegger/events{/privacy}",
                "followers_url": "https://api.github.com/users/mfussenegger/followers",
                "following_url": "https://api.github.com/users/mfussenegger/following{/other_user}",
                "gists_url": "https://api.github.com/users/mfussenegger/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mfussenegger",
                "id": 38700,
                "login": "mfussenegger",
                "node_id": "MDQ6VXNlcjM4NzAw",
                "organizations_url": "https://api.github.com/users/mfussenegger/orgs",
                "received_events_url": "https://api.github.com/users/mfussenegger/received_events",
                "repos_url": "https://api.github.com/users/mfussenegger/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mfussenegger/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mfussenegger/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mfussenegger",
                "user_view_type": "public"
            }
        }
    ],
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/34671/comments",
    "commits_url": "https://api.github.com/repos/neovim/neovim/pulls/34671/commits",
    "created_at": "2025-06-27T04:35:08Z",
    "diff_url": "https://github.com/neovim/neovim/pull/34671.diff",
    "draft": false,
    "head": {
        "label": "shadmansaleh:fix/pb1",
        "ref": "fix/pb1",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/shadmansaleh/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/shadmansaleh/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/shadmansaleh/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/shadmansaleh/neovim/branches{/branch}",
            "clone_url": "https://github.com/shadmansaleh/neovim.git",
            "collaborators_url": "https://api.github.com/repos/shadmansaleh/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/shadmansaleh/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/shadmansaleh/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/shadmansaleh/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/shadmansaleh/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/shadmansaleh/neovim/contributors",
            "created_at": "2021-03-16T15:07:33Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/shadmansaleh/neovim/deployments",
            "description": "Vim-fork focused on extensibility and usability",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/shadmansaleh/neovim/downloads",
            "events_url": "https://api.github.com/repos/shadmansaleh/neovim/events",
            "fork": true,
            "forks": 0,
            "forks_count": 0,
            "forks_url": "https://api.github.com/repos/shadmansaleh/neovim/forks",
            "full_name": "shadmansaleh/neovim",
            "git_commits_url": "https://api.github.com/repos/shadmansaleh/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/shadmansaleh/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/shadmansaleh/neovim/git/tags{/sha}",
            "git_url": "git://github.com/shadmansaleh/neovim.git",
            "has_discussions": false,
            "has_downloads": true,
            "has_issues": false,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://neovim.io",
            "hooks_url": "https://api.github.com/repos/shadmansaleh/neovim/hooks",
            "html_url": "https://github.com/shadmansaleh/neovim",
            "id": 348391941,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/shadmansaleh/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/shadmansaleh/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/shadmansaleh/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/shadmansaleh/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/shadmansaleh/neovim/labels{/name}",
            "language": "Vim Script",
            "languages_url": "https://api.github.com/repos/shadmansaleh/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/shadmansaleh/neovim/merges",
            "milestones_url": "https://api.github.com/repos/shadmansaleh/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "MDEwOlJlcG9zaXRvcnkzNDgzOTE5NDE=",
            "notifications_url": "https://api.github.com/repos/shadmansaleh/neovim/notifications{?since,all,participating}",
            "open_issues": 0,
            "open_issues_count": 0,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/13149513?v=4",
                "events_url": "https://api.github.com/users/shadmansaleh/events{/privacy}",
                "followers_url": "https://api.github.com/users/shadmansaleh/followers",
                "following_url": "https://api.github.com/users/shadmansaleh/following{/other_user}",
                "gists_url": "https://api.github.com/users/shadmansaleh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/shadmansaleh",
                "id": 13149513,
                "login": "shadmansaleh",
                "node_id": "MDQ6VXNlcjEzMTQ5NTEz",
                "organizations_url": "https://api.github.com/users/shadmansaleh/orgs",
                "received_events_url": "https://api.github.com/users/shadmansaleh/received_events",
                "repos_url": "https://api.github.com/users/shadmansaleh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/shadmansaleh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/shadmansaleh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/shadmansaleh",
                "user_view_type": "public"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/shadmansaleh/neovim/pulls{/number}",
            "pushed_at": "2025-06-30T05:31:29Z",
            "releases_url": "https://api.github.com/repos/shadmansaleh/neovim/releases{/id}",
            "size": 321852,
            "ssh_url": "git@github.com:shadmansaleh/neovim.git",
            "stargazers_count": 0,
            "stargazers_url": "https://api.github.com/repos/shadmansaleh/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/shadmansaleh/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/shadmansaleh/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/shadmansaleh/neovim/subscription",
            "svn_url": "https://github.com/shadmansaleh/neovim",
            "tags_url": "https://api.github.com/repos/shadmansaleh/neovim/tags",
            "teams_url": "https://api.github.com/repos/shadmansaleh/neovim/teams",
            "topics": [],
            "trees_url": "https://api.github.com/repos/shadmansaleh/neovim/git/trees{/sha}",
            "updated_at": "2025-06-27T03:39:20Z",
            "url": "https://api.github.com/repos/shadmansaleh/neovim",
            "visibility": "public",
            "watchers": 0,
            "watchers_count": 0,
            "web_commit_signoff_required": false
        },
        "sha": "dd72b33fefda51ac4318c0322efa95b960f30851",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/13149513?v=4",
            "events_url": "https://api.github.com/users/shadmansaleh/events{/privacy}",
            "followers_url": "https://api.github.com/users/shadmansaleh/followers",
            "following_url": "https://api.github.com/users/shadmansaleh/following{/other_user}",
            "gists_url": "https://api.github.com/users/shadmansaleh/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/shadmansaleh",
            "id": 13149513,
            "login": "shadmansaleh",
            "node_id": "MDQ6VXNlcjEzMTQ5NTEz",
            "organizations_url": "https://api.github.com/users/shadmansaleh/orgs",
            "received_events_url": "https://api.github.com/users/shadmansaleh/received_events",
            "repos_url": "https://api.github.com/users/shadmansaleh/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/shadmansaleh/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/shadmansaleh/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/shadmansaleh",
            "user_view_type": "public"
        }
    },
    "html_url": "https://github.com/neovim/neovim/pull/34671",
    "id": 2623092907,
    "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34671",
    "labels": [
        {
            "color": "F3A62E",
            "default": false,
            "description": "community: Google Summer of Code project",
            "id": 834483397,
            "name": "gsoc",
            "node_id": "MDU6TGFiZWw4MzQ0ODMzOTc=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/gsoc"
        }
    ],
    "locked": false,
    "merge_commit_sha": "ed7ff848a02d37975dd56c2d67e0fe23e75f68dd",
    "merged_at": "2025-06-30T10:19:44Z",
    "milestone": null,
    "node_id": "PR_kwDOAPphoM6cWTir",
    "number": 34671,
    "patch_url": "https://github.com/neovim/neovim/pull/34671.patch",
    "requested_reviewers": [],
    "requested_teams": [],
    "review_comment_url": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}",
    "review_comments_url": "https://api.github.com/repos/neovim/neovim/pulls/34671/comments",
    "state": "closed",
    "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/dd72b33fefda51ac4318c0322efa95b960f30851",
    "title": "fix(prompt): prompt mark not placed after text edits correctly",
    "updated_at": "2025-06-30T10:19:44Z",
    "url": "https://api.github.com/repos/neovim/neovim/pulls/34671",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/13149513?v=4",
        "events_url": "https://api.github.com/users/shadmansaleh/events{/privacy}",
        "followers_url": "https://api.github.com/users/shadmansaleh/followers",
        "following_url": "https://api.github.com/users/shadmansaleh/following{/other_user}",
        "gists_url": "https://api.github.com/users/shadmansaleh/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/shadmansaleh",
        "id": 13149513,
        "login": "shadmansaleh",
        "node_id": "MDQ6VXNlcjEzMTQ5NTEz",
        "organizations_url": "https://api.github.com/users/shadmansaleh/orgs",
        "received_events_url": "https://api.github.com/users/shadmansaleh/received_events",
        "repos_url": "https://api.github.com/users/shadmansaleh/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/shadmansaleh/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/shadmansaleh/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/shadmansaleh",
        "user_view_type": "public"
    }
}