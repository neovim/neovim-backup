{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\n\nWhen attempting to set up typescript-language-server, I ran into a problem when attempting completions against builtin types. When trying to trigger `omnifunc` via `<C-x><C-o>` during partial completion of an object attribute or method, the completion menu does not populate properly. For example\n\n```\nconst x: number[] = [1,2,3]\nx.  // <-- triggering omnifunc here works as expected, bringing up the completion menu\nx.fi // <-- triggering omnifunc here does not work, no completion menu is present despite multiple functions (filter, find, etc)\n```\nThe LSP server does respond with completion results, although it is missing the textEdit field. If you look at the response from a successful textDocument/completion request, each item in the result array has a \"textEdit\" field, indicating what the new text should be for the buffer.\n\n```\n{\n      \"timestamp\": \"2025-10-27 15:57:34\",\n      \"source\": \"lsp/rpc.lua:391\",\n      \"event\": \"rpc.receive\",\n      \"data\": {\n        \"id\": 10,\n        \"jsonrpc\": \"2.0\",\n        \"result\": {\n          \"isIncomplete\": false,\n          \"items\": [\n            {\n              \"data\": {\"cacheId\": 1},\n              \"filterText\": \".concat\",\n              \"insertTextFormat\": 2,\n              \"kind\": 2,\n              \"label\": \"concat\",\n              \"sortText\": \"11\",\n              \"textEdit\": {\n                \"newText\": \".concat\",\n                \"range\": {\n                  \"end\": {\"character\": 2, \"line\": 2},\n                  \"start\": {\"character\": 1, \"line\": 2}\n                }\n              }\n            },\n    ...\n```\nIn certain instances, like the one I described above, typescript-language-server will omit this, and the response will look something like so:\n```\n{\n  \"id\": 8,\n  \"jsonrpc\": \"2.0\",\n  \"result\": {\n    \"isIncomplete\": false,\n    \"items\": [\n      {\n        \"data\": {\n          \"cacheId\": 1\n        },\n        \"insertTextFormat\": 2,\n        \"kind\": 2,\n        \"label\": \"concat\",\n        \"sortText\": \"11\"\n      }\n    ]\n  }\n}\n```\nIn this event, I'm unsure if the LSP specification indicates any fallback field for the client, but I would assume \"label\" is some sort of default fallback. \n\n### Steps to reproduce using \"nvim -u minimal_init.lua\"\n\n```\nvim.lsp.set_log_level('debug')\n\nvim.opt.completeopt = {'menu', 'menuone', 'noselect'}\n\nvim.lsp.config.ts_ls = {\n\tinit_options = { hostInfo = 'neovim', },\n\tcmd = { 'typescript-language-server', '--stdio' },\n\ton_attach = on_attach,\n\tfiletypes = {\n\t\t'javascript',\n\t\t'javascriptreact',\n\t\t'javascript.jsx',\n\t\t'typescript',\n\t\t'typescriptreact',\n\t\t'typescript.tsx',\n\t},\n\troot_markers = {\n\t\t'tsconfig.json', 'jsconfig.json', 'package.json', '.git'\n\t},\n\tsingle_file_support = true,\n\tsettings = {\n\t\tcompletions = {\n\t\t\tcompleteFunctionCalls = true\n\t\t}\n\t},\n\n}\n\nvim.lsp.enable({ 'ts_ls' })\n\n```\nThis does not include the installation and setup of typescript-language-server. In order to do this, either Mason must be installed, or typescript-language-server along with \"typescript\" must be installed\n\n### Expected behavior\n\nI expect the completion menu to be populated with potential completion results, maybe using label as the inputs to the completion menu\n\n### Nvim version (nvim -v)\n\n0.11.0\n\n### Language server name/version\n\ntypescript-language-server 5.0.1\n\n### Operating system/version\n\nMacOS Sanoma 14.1\n\n### Log file\n\nhttps://gist.github.com/Jack-Gitter/cf42f633b3acbe3f2da77d76cc8acbdb",
    "closed_at": "2025-10-30T12:40:46Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/64998723?v=4",
        "events_url": "https://api.github.com/users/Jack-Gitter/events{/privacy}",
        "followers_url": "https://api.github.com/users/Jack-Gitter/followers",
        "following_url": "https://api.github.com/users/Jack-Gitter/following{/other_user}",
        "gists_url": "https://api.github.com/users/Jack-Gitter/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/Jack-Gitter",
        "id": 64998723,
        "login": "Jack-Gitter",
        "node_id": "MDQ6VXNlcjY0OTk4NzIz",
        "organizations_url": "https://api.github.com/users/Jack-Gitter/orgs",
        "received_events_url": "https://api.github.com/users/Jack-Gitter/received_events",
        "repos_url": "https://api.github.com/users/Jack-Gitter/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/Jack-Gitter/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Jack-Gitter/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/Jack-Gitter",
        "user_view_type": "public"
    },
    "comment_data": [
        {
            "author_association": "NONE",
            "body": "Upon closer inspection of the source code, it seems like the label might be used as a backup already? In this case, I'm not sure that I've properly identified the root cause, but my minimal repro config should still suffice for debugging\n\n```\nlocal function apply_defaults(item, defaults)\n  if not defaults then\n    return\n  end\n\n  item.insertTextFormat = item.insertTextFormat or defaults.insertTextFormat\n  item.insertTextMode = item.insertTextMode or defaults.insertTextMode\n  item.data = item.data or defaults.data\n  if defaults.editRange then\n    local textEdit = item.textEdit or {}\n    item.textEdit = textEdit\n    textEdit.newText = textEdit.newText or item.textEditText or item.insertText or item.label\n    if defaults.editRange.start then\n      textEdit.range = textEdit.range or defaults.editRange\n    elseif defaults.editRange.insert then\n      textEdit.insert = defaults.editRange.insert\n      textEdit.replace = defaults.editRange.replace\n    end\n  end\nend\n```",
            "created_at": "2025-10-27T20:34:48Z",
            "html_url": "https://github.com/neovim/neovim/issues/36355#issuecomment-3453202419",
            "id": 3453202419,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36355",
            "node_id": "IC_kwDOAPphoM7N06_z",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3453202419/reactions"
            },
            "updated_at": "2025-10-27T20:34:48Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3453202419",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/64998723?v=4",
                "events_url": "https://api.github.com/users/Jack-Gitter/events{/privacy}",
                "followers_url": "https://api.github.com/users/Jack-Gitter/followers",
                "following_url": "https://api.github.com/users/Jack-Gitter/following{/other_user}",
                "gists_url": "https://api.github.com/users/Jack-Gitter/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Jack-Gitter",
                "id": 64998723,
                "login": "Jack-Gitter",
                "node_id": "MDQ6VXNlcjY0OTk4NzIz",
                "organizations_url": "https://api.github.com/users/Jack-Gitter/orgs",
                "received_events_url": "https://api.github.com/users/Jack-Gitter/received_events",
                "repos_url": "https://api.github.com/users/Jack-Gitter/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Jack-Gitter/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Jack-Gitter/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Jack-Gitter",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Please test the latest development version. The [Releases](https://github.com/neovim/neovim/releases/tag/nightly) page has pre-built archives for Linux/Windows/macOS. Check `:version` to confirm the version.\n\n> I'm unsure if the LSP specification indicates any fallback field for the client, but I would assume \"label\" is some sort of default fallback.\n\nwe do what the LSP spec says\n",
            "created_at": "2025-10-27T21:03:13Z",
            "html_url": "https://github.com/neovim/neovim/issues/36355#issuecomment-3453330364",
            "id": 3453330364,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36355",
            "node_id": "IC_kwDOAPphoM7N1aO8",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3453330364/reactions"
            },
            "updated_at": "2025-10-27T21:06:10Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3453330364",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "@justinmk I just built from source the latest version, and upon some debugging it seems as though the \"defaults\" \nwhich get passed to this function\n```\nlocal function apply_defaults(item, defaults)\n  if not defaults then\n    return\n  end\n\n  item.insertTextFormat = item.insertTextFormat or defaults.insertTextFormat\n  item.insertTextMode = item.insertTextMode or defaults.insertTextMode\n  item.data = item.data or defaults.data\n  if defaults.editRange then\n    local textEdit = item.textEdit or {}\n    item.textEdit = textEdit\n    textEdit.newText = textEdit.newText or item.textEditText or item.insertText or item.label\n    if defaults.editRange.start then\n      textEdit.range = textEdit.range or defaults.editRange\n    elseif defaults.editRange.insert then\n      textEdit.insert = defaults.editRange.insert\n      textEdit.replace = defaults.editRange.replace\n    end\n  end\nend\n```\nare nil. It seems as though then the function returns early, which might be causing no completion results to be populated. Can you give more insight as to what these \"defaults\" are, and where they come from?",
            "created_at": "2025-10-27T21:25:56Z",
            "html_url": "https://github.com/neovim/neovim/issues/36355#issuecomment-3453399013",
            "id": 3453399013,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36355",
            "node_id": "IC_kwDOAPphoM7N1q_l",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3453399013/reactions"
            },
            "updated_at": "2025-10-27T21:25:56Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3453399013",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/64998723?v=4",
                "events_url": "https://api.github.com/users/Jack-Gitter/events{/privacy}",
                "followers_url": "https://api.github.com/users/Jack-Gitter/followers",
                "following_url": "https://api.github.com/users/Jack-Gitter/following{/other_user}",
                "gists_url": "https://api.github.com/users/Jack-Gitter/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Jack-Gitter",
                "id": 64998723,
                "login": "Jack-Gitter",
                "node_id": "MDQ6VXNlcjY0OTk4NzIz",
                "organizations_url": "https://api.github.com/users/Jack-Gitter/orgs",
                "received_events_url": "https://api.github.com/users/Jack-Gitter/received_events",
                "repos_url": "https://api.github.com/users/Jack-Gitter/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Jack-Gitter/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Jack-Gitter/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Jack-Gitter",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "The issue still remains after building the source code, if that was unclear\n",
            "created_at": "2025-10-27T21:26:54Z",
            "html_url": "https://github.com/neovim/neovim/issues/36355#issuecomment-3453401515",
            "id": 3453401515,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36355",
            "node_id": "IC_kwDOAPphoM7N1rmr",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3453401515/reactions"
            },
            "updated_at": "2025-10-27T21:26:54Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3453401515",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/64998723?v=4",
                "events_url": "https://api.github.com/users/Jack-Gitter/events{/privacy}",
                "followers_url": "https://api.github.com/users/Jack-Gitter/followers",
                "following_url": "https://api.github.com/users/Jack-Gitter/following{/other_user}",
                "gists_url": "https://api.github.com/users/Jack-Gitter/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Jack-Gitter",
                "id": 64998723,
                "login": "Jack-Gitter",
                "node_id": "MDQ6VXNlcjY0OTk4NzIz",
                "organizations_url": "https://api.github.com/users/Jack-Gitter/orgs",
                "received_events_url": "https://api.github.com/users/Jack-Gitter/received_events",
                "repos_url": "https://api.github.com/users/Jack-Gitter/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Jack-Gitter/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Jack-Gitter/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Jack-Gitter",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "For curiosity I tried simulated response (without textEdit) in the init file from https://github.com/neovim/neovim/issues/36337#issuecomment-3450727044 and still get completion result via omnifunc.",
            "created_at": "2025-10-27T22:01:43Z",
            "html_url": "https://github.com/neovim/neovim/issues/36355#issuecomment-3453494241",
            "id": 3453494241,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36355",
            "node_id": "IC_kwDOAPphoM7N2CPh",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3453494241/reactions"
            },
            "updated_at": "2025-10-27T22:04:41Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3453494241",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11404453?v=4",
                "events_url": "https://api.github.com/users/przepompownia/events{/privacy}",
                "followers_url": "https://api.github.com/users/przepompownia/followers",
                "following_url": "https://api.github.com/users/przepompownia/following{/other_user}",
                "gists_url": "https://api.github.com/users/przepompownia/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/przepompownia",
                "id": 11404453,
                "login": "przepompownia",
                "node_id": "MDQ6VXNlcjExNDA0NDUz",
                "organizations_url": "https://api.github.com/users/przepompownia/orgs",
                "received_events_url": "https://api.github.com/users/przepompownia/received_events",
                "repos_url": "https://api.github.com/users/przepompownia/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/przepompownia/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/przepompownia/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/przepompownia",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": " @przepompownia I do get omnifunc completion in most cases, its only specifically in situations after builtin types where I have gone past the \".\" separator, as described in the problem. Did you attempt to replicate this? Especially with typescript-language-server? It seems that file linked deals with the PHP language server. Additionally it is most likely because the defaults are populated, which is the main thing I'm confused about with typescript language server",
            "created_at": "2025-10-27T22:37:07Z",
            "html_url": "https://github.com/neovim/neovim/issues/36355#issuecomment-3453596770",
            "id": 3453596770,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36355",
            "node_id": "IC_kwDOAPphoM7N2bRi",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3453596770/reactions"
            },
            "updated_at": "2025-10-27T22:40:42Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3453596770",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/64998723?v=4",
                "events_url": "https://api.github.com/users/Jack-Gitter/events{/privacy}",
                "followers_url": "https://api.github.com/users/Jack-Gitter/followers",
                "following_url": "https://api.github.com/users/Jack-Gitter/following{/other_user}",
                "gists_url": "https://api.github.com/users/Jack-Gitter/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Jack-Gitter",
                "id": 64998723,
                "login": "Jack-Gitter",
                "node_id": "MDQ6VXNlcjY0OTk4NzIz",
                "organizations_url": "https://api.github.com/users/Jack-Gitter/orgs",
                "received_events_url": "https://api.github.com/users/Jack-Gitter/received_events",
                "repos_url": "https://api.github.com/users/Jack-Gitter/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Jack-Gitter/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Jack-Gitter/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Jack-Gitter",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "@Jack-Gitter  I can reproduce your example - only the title sounds too general which may be misleading. ",
            "created_at": "2025-10-27T22:58:24Z",
            "html_url": "https://github.com/neovim/neovim/issues/36355#issuecomment-3453647097",
            "id": 3453647097,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36355",
            "node_id": "IC_kwDOAPphoM7N2nj5",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3453647097/reactions"
            },
            "updated_at": "2025-10-27T22:58:24Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3453647097",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11404453?v=4",
                "events_url": "https://api.github.com/users/przepompownia/events{/privacy}",
                "followers_url": "https://api.github.com/users/przepompownia/followers",
                "following_url": "https://api.github.com/users/przepompownia/following{/other_user}",
                "gists_url": "https://api.github.com/users/przepompownia/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/przepompownia",
                "id": 11404453,
                "login": "przepompownia",
                "node_id": "MDQ6VXNlcjExNDA0NDUz",
                "organizations_url": "https://api.github.com/users/przepompownia/orgs",
                "received_events_url": "https://api.github.com/users/przepompownia/received_events",
                "repos_url": "https://api.github.com/users/przepompownia/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/przepompownia/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/przepompownia/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/przepompownia",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "@przepompownia This adjustment now gets the completions properly. I still don't understand what the \"defaults\" are, but it seems like when defaults for the language server are nil along with no \"textEdit\" field given from the language server, the completions do not work.  I'm going to try to step through the code to figure out where the defaults are, but in the mean time this generated code fixes the problem\n\n (WARNING, AI GENERATED CODE AND SHOULD NOT BE USED)    \n \n```\nlocal function apply_defaults(item, defaults) \n  defaults = defaults or {} -- fallback to empty table \n\n  -- Merge basic fields from defaults if missing\n  item.insertTextFormat = item.insertTextFormat or defaults.insertTextFormat\n  item.insertTextMode = item.insertTextMode or defaults.insertTextMode\n  item.data = item.data or defaults.data\n\n  -- Ensure textEdit table exists\n  local textEdit = item.textEdit or {}\n  item.textEdit = textEdit\n\n  -- Fill newText from item fields or label\n  textEdit.newText = textEdit.newText or item.textEditText or item.insertText or item.label or \"\"\n\n  -- Fill range if defaults.editRange exists\n  if defaults.editRange then\n    if defaults.editRange.start then\n      textEdit.range = textEdit.range or defaults.editRange\n    elseif defaults.editRange.insert then\n      textEdit.insert = textEdit.insert or defaults.editRange.insert\n      textEdit.replace = textEdit.replace or defaults.editRange.replace\n    end\n  end\n\n  -- Fallback range if still missing (insert at cursor)\n  if not textEdit.range and not (textEdit.insert and textEdit.replace) then\n    local row, col = unpack(vim.api.nvim_win_get_cursor(0))\n    textEdit.range = {\n      start = { line = row - 1, character = col }, \n      [\"end\"] = { line = row - 1, character = col },\n    }\n  end \nend\n``` ",
            "created_at": "2025-10-27T23:01:21Z",
            "html_url": "https://github.com/neovim/neovim/issues/36355#issuecomment-3453653771",
            "id": 3453653771,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36355",
            "node_id": "IC_kwDOAPphoM7N2pML",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3453653771/reactions"
            },
            "updated_at": "2025-10-27T23:12:08Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3453653771",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/64998723?v=4",
                "events_url": "https://api.github.com/users/Jack-Gitter/events{/privacy}",
                "followers_url": "https://api.github.com/users/Jack-Gitter/followers",
                "following_url": "https://api.github.com/users/Jack-Gitter/following{/other_user}",
                "gists_url": "https://api.github.com/users/Jack-Gitter/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Jack-Gitter",
                "id": 64998723,
                "login": "Jack-Gitter",
                "node_id": "MDQ6VXNlcjY0OTk4NzIz",
                "organizations_url": "https://api.github.com/users/Jack-Gitter/orgs",
                "received_events_url": "https://api.github.com/users/Jack-Gitter/received_events",
                "repos_url": "https://api.github.com/users/Jack-Gitter/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Jack-Gitter/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Jack-Gitter/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Jack-Gitter",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "@przepompownia Thanks for the feedback. I have added to the title, although I'm not 100% sure if is it the root cause of the problem",
            "created_at": "2025-10-27T23:02:43Z",
            "html_url": "https://github.com/neovim/neovim/issues/36355#issuecomment-3453657373",
            "id": 3453657373,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36355",
            "node_id": "IC_kwDOAPphoM7N2qEd",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3453657373/reactions"
            },
            "updated_at": "2025-10-27T23:02:43Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3453657373",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/64998723?v=4",
                "events_url": "https://api.github.com/users/Jack-Gitter/events{/privacy}",
                "followers_url": "https://api.github.com/users/Jack-Gitter/followers",
                "following_url": "https://api.github.com/users/Jack-Gitter/following{/other_user}",
                "gists_url": "https://api.github.com/users/Jack-Gitter/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Jack-Gitter",
                "id": 64998723,
                "login": "Jack-Gitter",
                "node_id": "MDQ6VXNlcjY0OTk4NzIz",
                "organizations_url": "https://api.github.com/users/Jack-Gitter/orgs",
                "received_events_url": "https://api.github.com/users/Jack-Gitter/received_events",
                "repos_url": "https://api.github.com/users/Jack-Gitter/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Jack-Gitter/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Jack-Gitter/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Jack-Gitter",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "send a pr",
            "created_at": "2025-10-27T23:09:08Z",
            "html_url": "https://github.com/neovim/neovim/issues/36355#issuecomment-3453673529",
            "id": 3453673529,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36355",
            "node_id": "IC_kwDOAPphoM7N2uA5",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3453673529/reactions"
            },
            "updated_at": "2025-10-27T23:09:08Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3453673529",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "@justinmk I'm not particularly sure if this solution is robust enough. I'll happily add a PR once I can make sure I know the root-cause, and am able to logically verify the solution. I probably won't get around to it right now though, not for a couple of days maybe",
            "created_at": "2025-10-27T23:16:24Z",
            "html_url": "https://github.com/neovim/neovim/issues/36355#issuecomment-3453701244",
            "id": 3453701244,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36355",
            "node_id": "IC_kwDOAPphoM7N20x8",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3453701244/reactions"
            },
            "updated_at": "2025-10-27T23:16:24Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3453701244",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/64998723?v=4",
                "events_url": "https://api.github.com/users/Jack-Gitter/events{/privacy}",
                "followers_url": "https://api.github.com/users/Jack-Gitter/followers",
                "following_url": "https://api.github.com/users/Jack-Gitter/following{/other_user}",
                "gists_url": "https://api.github.com/users/Jack-Gitter/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Jack-Gitter",
                "id": 64998723,
                "login": "Jack-Gitter",
                "node_id": "MDQ6VXNlcjY0OTk4NzIz",
                "organizations_url": "https://api.github.com/users/Jack-Gitter/orgs",
                "received_events_url": "https://api.github.com/users/Jack-Gitter/received_events",
                "repos_url": "https://api.github.com/users/Jack-Gitter/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Jack-Gitter/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Jack-Gitter/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Jack-Gitter",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "  I'm also happy if others who are more knowledgable about LSP and the specific implementation can chime in here",
            "created_at": "2025-10-27T23:27:22Z",
            "html_url": "https://github.com/neovim/neovim/issues/36355#issuecomment-3453753450",
            "id": 3453753450,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36355",
            "node_id": "IC_kwDOAPphoM7N3Bhq",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3453753450/reactions"
            },
            "updated_at": "2025-10-27T23:27:41Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3453753450",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/64998723?v=4",
                "events_url": "https://api.github.com/users/Jack-Gitter/events{/privacy}",
                "followers_url": "https://api.github.com/users/Jack-Gitter/followers",
                "following_url": "https://api.github.com/users/Jack-Gitter/following{/other_user}",
                "gists_url": "https://api.github.com/users/Jack-Gitter/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Jack-Gitter",
                "id": 64998723,
                "login": "Jack-Gitter",
                "node_id": "MDQ6VXNlcjY0OTk4NzIz",
                "organizations_url": "https://api.github.com/users/Jack-Gitter/orgs",
                "received_events_url": "https://api.github.com/users/Jack-Gitter/received_events",
                "repos_url": "https://api.github.com/users/Jack-Gitter/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Jack-Gitter/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Jack-Gitter/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Jack-Gitter",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "If I'm correct:\n\n- for some reason the server responds with lots of unrelated results like `concat` or `[Symbol]`. Filtering happens on the client side.\n- the mentioned `[Symbol]` is additionally a special case for this issue. It provides `textEdit` with `range.start.character = 1` which determines the return value (byte offset of the line) here:\n\nhttps://github.com/neovim/neovim/blob/7088441de41c468e22dc5daffd377c00211ce45b/runtime/lua/vim/lsp/completion.lua#L368-L383\n\nand then to get the prefix used to filter results from the response.\n\nhttps://github.com/neovim/neovim/blob/7088441de41c468e22dc5daffd377c00211ce45b/runtime/lua/vim/lsp/completion.lua#L420-L430\n\nAs the result the prefix becomes `.fi` and doesn't match to values given by label or filterText, so we get no menu items. \n\nIf no such value from `textEdit`, the prefix is based on `iskeyword` so becomes `fi`.\n\n\n```lua\nlocal function createServer(opts)\n  opts = opts or {}\n  local server = {}\n  server.messages = {}\n\n  function server.cmd(dispatchers)\n    local closing = false\n    local handlers = opts.handlers or {}\n    local srv = {}\n\n    function srv.request(method, params, callback)\n      table.insert(server.messages, {\n        method = method,\n        params = params,\n      })\n      local handler = handlers[method]\n      if handler then\n        handler(method, params, callback)\n      elseif method == 'initialize' then\n        callback(nil, {\n          capabilities = opts.capabilities or {},\n        })\n      elseif method == 'shutdown' then\n        callback(nil, nil)\n      end\n      local request_id = #server.messages\n      return true, request_id\n    end\n\n    function srv.notify(method, params)\n      table.insert(server.messages, {\n        method = method,\n        params = params,\n      })\n      if method == 'exit' then\n        dispatchers.on_exit(0, 15)\n      end\n    end\n\n    function srv.is_closing()\n      return closing\n    end\n\n    function srv.terminate()\n      closing = true\n    end\n\n    return srv\n  end\n\n  return server\nend\n\nlocal completionResultTs = {\n  isIncomplete = false,\n  items = {\n    {\n      insertTextFormat = 2,\n      kind = 2,\n      label = 'concat',\n    },\n    {\n      insertTextFormat = 2,\n      kind = 2,\n      label = 'fill',\n    },\n-- comment it out:\n    {\n      filterText = '[Symbol]',\n      kind = 6,\n      label = 'Symbol',\n      textEdit = {newText = '[Symbol]', range = {['end'] = {character = 2, line = 1}, start = {character = 1, line = 1}}},\n    },\n  }\n}\n\nlocal function createServerWithCompletionProvider(completionResult)\n  return createServer({\n    capabilities = {completionProvider = {}},\n    handlers = {\n      ['textDocument/completion'] = function (_, _, callback)\n        callback(nil, completionResult)\n      end,\n    },\n  })\nend\n\nlocal function startClient(name, completionResult)\n  vim.lsp.start({\n    name = name,\n    cmd = createServerWithCompletionProvider(completionResult).cmd,\n  })\nend\n\nvim.fn.complete = vim.schedule_wrap(vim.fn.complete)\n\nvim.o.completeopt = 'popup,menuone,noinsert,fuzzy'\nvim.o.autocomplete = true\nvim.opt.complete = 'o'\n\nvim.api.nvim_create_autocmd('UIEnter', {\n  callback = function ()\n    vim.api.nvim_buf_set_lines(0, 0, -1, true, {'const x: number[] = [1,2,3]', 'x.fi'})\n    vim.api.nvim_buf_set_name(0, 'x.ts')\n    vim.bo.filetype = 'typescript' \n\n    vim.cmd.normal 'G$'\n    startClient('fake-tsserver', completionResultTs)\n  end\n})\n```\n\n",
            "created_at": "2025-10-28T01:09:54Z",
            "html_url": "https://github.com/neovim/neovim/issues/36355#issuecomment-3453994012",
            "id": 3453994012,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36355",
            "node_id": "IC_kwDOAPphoM7N38Qc",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3453994012/reactions"
            },
            "updated_at": "2025-10-28T01:21:13Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3453994012",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11404453?v=4",
                "events_url": "https://api.github.com/users/przepompownia/events{/privacy}",
                "followers_url": "https://api.github.com/users/przepompownia/followers",
                "following_url": "https://api.github.com/users/przepompownia/following{/other_user}",
                "gists_url": "https://api.github.com/users/przepompownia/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/przepompownia",
                "id": 11404453,
                "login": "przepompownia",
                "node_id": "MDQ6VXNlcjExNDA0NDUz",
                "organizations_url": "https://api.github.com/users/przepompownia/orgs",
                "received_events_url": "https://api.github.com/users/przepompownia/received_events",
                "repos_url": "https://api.github.com/users/przepompownia/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/przepompownia/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/przepompownia/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/przepompownia",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Additional note after looking into that logic: add\n```lua\n    {\n      filterText = '[Symbol2]',\n      kind = 6,\n      label = 'Symbol2',\n      textEdit = {newText = '[Symbol]', range = {['end'] = {character = 2, line = 1}, start = {character = 2, line = 1}}},\n    },\n```\n(different start column) to discard computing based on textEdit in favor of the `isk` based prefix. ",
            "created_at": "2025-10-28T01:15:01Z",
            "html_url": "https://github.com/neovim/neovim/issues/36355#issuecomment-3454012623",
            "id": 3454012623,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36355",
            "node_id": "IC_kwDOAPphoM7N4AzP",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3454012623/reactions"
            },
            "updated_at": "2025-10-28T01:19:45Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3454012623",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11404453?v=4",
                "events_url": "https://api.github.com/users/przepompownia/events{/privacy}",
                "followers_url": "https://api.github.com/users/przepompownia/followers",
                "following_url": "https://api.github.com/users/przepompownia/following{/other_user}",
                "gists_url": "https://api.github.com/users/przepompownia/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/przepompownia",
                "id": 11404453,
                "login": "przepompownia",
                "node_id": "MDQ6VXNlcjExNDA0NDUz",
                "organizations_url": "https://api.github.com/users/przepompownia/orgs",
                "received_events_url": "https://api.github.com/users/przepompownia/received_events",
                "repos_url": "https://api.github.com/users/przepompownia/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/przepompownia/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/przepompownia/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/przepompownia",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Assuming the response is mismatching I doubt there is anything we can do on the Nvim side. \n\n@MariaSolOs what do you think about this case?",
            "created_at": "2025-10-28T01:43:46Z",
            "html_url": "https://github.com/neovim/neovim/issues/36355#issuecomment-3454095514",
            "id": 3454095514,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36355",
            "node_id": "IC_kwDOAPphoM7N4VCa",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3454095514/reactions"
            },
            "updated_at": "2025-10-28T01:43:46Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3454095514",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11404453?v=4",
                "events_url": "https://api.github.com/users/przepompownia/events{/privacy}",
                "followers_url": "https://api.github.com/users/przepompownia/followers",
                "following_url": "https://api.github.com/users/przepompownia/following{/other_user}",
                "gists_url": "https://api.github.com/users/przepompownia/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/przepompownia",
                "id": 11404453,
                "login": "przepompownia",
                "node_id": "MDQ6VXNlcjExNDA0NDUz",
                "organizations_url": "https://api.github.com/users/przepompownia/orgs",
                "received_events_url": "https://api.github.com/users/przepompownia/received_events",
                "repos_url": "https://api.github.com/users/przepompownia/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/przepompownia/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/przepompownia/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/przepompownia",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "@przepompownia I agree with you. It sounds like the server is returning inconsistent completion items.\n\n@Jack-Gitter have you tried using https://github.com/microsoft/typescript-go? Given how it is the official LSP for TypeScript (still in development tho) if the bug still happens with it then I would feel more confident about this being a Neovim bug.",
            "created_at": "2025-10-28T02:29:34Z",
            "html_url": "https://github.com/neovim/neovim/issues/36355#issuecomment-3454217032",
            "id": 3454217032,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36355",
            "node_id": "IC_kwDOAPphoM7N4ytI",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3454217032/reactions"
            },
            "updated_at": "2025-10-28T02:29:34Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3454217032",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/62502207?v=4",
                "events_url": "https://api.github.com/users/MariaSolOs/events{/privacy}",
                "followers_url": "https://api.github.com/users/MariaSolOs/followers",
                "following_url": "https://api.github.com/users/MariaSolOs/following{/other_user}",
                "gists_url": "https://api.github.com/users/MariaSolOs/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/MariaSolOs",
                "id": 62502207,
                "login": "MariaSolOs",
                "node_id": "MDQ6VXNlcjYyNTAyMjA3",
                "organizations_url": "https://api.github.com/users/MariaSolOs/orgs",
                "received_events_url": "https://api.github.com/users/MariaSolOs/received_events",
                "repos_url": "https://api.github.com/users/MariaSolOs/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/MariaSolOs/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/MariaSolOs/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/MariaSolOs",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "fwiw, i can repro this with `<c-x><c-o>` after `x.fi` as described (with `typescript-language-server`).",
            "created_at": "2025-10-28T02:31:56Z",
            "html_url": "https://github.com/neovim/neovim/issues/36355#issuecomment-3454239750",
            "id": 3454239750,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36355",
            "node_id": "IC_kwDOAPphoM7N44QG",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3454239750/reactions"
            },
            "updated_at": "2025-10-28T02:43:25Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3454239750",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> fwiw, i can repro this with `<c-x><c-o>` after `x.fi` as described.\n\nI can't repro this with `tsgo`.",
            "created_at": "2025-10-28T02:38:57Z",
            "html_url": "https://github.com/neovim/neovim/issues/36355#issuecomment-3454283508",
            "id": 3454283508,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36355",
            "node_id": "IC_kwDOAPphoM7N5C70",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3454283508/reactions"
            },
            "updated_at": "2025-10-28T02:38:57Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3454283508",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/62502207?v=4",
                "events_url": "https://api.github.com/users/MariaSolOs/events{/privacy}",
                "followers_url": "https://api.github.com/users/MariaSolOs/followers",
                "following_url": "https://api.github.com/users/MariaSolOs/following{/other_user}",
                "gists_url": "https://api.github.com/users/MariaSolOs/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/MariaSolOs",
                "id": 62502207,
                "login": "MariaSolOs",
                "node_id": "MDQ6VXNlcjYyNTAyMjA3",
                "organizations_url": "https://api.github.com/users/MariaSolOs/orgs",
                "received_events_url": "https://api.github.com/users/MariaSolOs/received_events",
                "repos_url": "https://api.github.com/users/MariaSolOs/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/MariaSolOs/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/MariaSolOs/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/MariaSolOs",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "@MariaSolOs I will give it a shot later today!",
            "created_at": "2025-10-28T11:54:22Z",
            "html_url": "https://github.com/neovim/neovim/issues/36355#issuecomment-3456088608",
            "id": 3456088608,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36355",
            "node_id": "IC_kwDOAPphoM7N_7og",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3456088608/reactions"
            },
            "updated_at": "2025-10-28T11:54:22Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3456088608",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/64998723?v=4",
                "events_url": "https://api.github.com/users/Jack-Gitter/events{/privacy}",
                "followers_url": "https://api.github.com/users/Jack-Gitter/followers",
                "following_url": "https://api.github.com/users/Jack-Gitter/following{/other_user}",
                "gists_url": "https://api.github.com/users/Jack-Gitter/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Jack-Gitter",
                "id": 64998723,
                "login": "Jack-Gitter",
                "node_id": "MDQ6VXNlcjY0OTk4NzIz",
                "organizations_url": "https://api.github.com/users/Jack-Gitter/orgs",
                "received_events_url": "https://api.github.com/users/Jack-Gitter/received_events",
                "repos_url": "https://api.github.com/users/Jack-Gitter/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Jack-Gitter/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Jack-Gitter/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Jack-Gitter",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Good to know about tsgo, however it also responses with lots of unrelated results. What may be important for reproduction is providing `itemDefaults`:\n\n```\n[DEBUG][2025-10-28 11:45:25] ...ilds/from-src-dev/share/nvim/runtime/lua/vim/lsp/log.lua:151\t\"rpc.receive\"\t{ id = 4, jsonrpc = \"2.0\", result = { isIncomplete = false, itemDefaults = { editRange = { insert = { [\"end\"] = { character = 4, line = 1 }, start = { character = 2, line = 1 } }, replace = { [\"end\"] = { character = 4, line = 1 }, start = { character = 2, line = 1 } } } }, items = { { data = { fileName = \"/tmp/x.ts\", name = \"at\", position = 32 }, kind = 2, label = \"at\", sortText = \"11\" }, { data = { fileName = \"/tmp/x.ts\", name = \"concat\", position = 32 }, kind = 2, label = \"concat\", sortText = \"11\" }, { data = { fileName = \"/tmp/x.ts\", name = \"copyWithin\", position = 32 }, kind = 2, label = \"copyWithin\", sortText = \"11\" }, { data = { fileName = \"/tmp/x.ts\", name = \"entries\", position = 32 }, kind = 2, label = \"entries\", sortText = \"11\" }, { data = { fileName = \"/tmp/x.ts\", name = \"every\", position = 32 }, kind = 2, label = \"every\", sortText = \"11\" }, { data = { fileName = \"/tmp/x.ts\", name = \"fill\", position = 32 }, kind = 2, label = \"fill\", sortText = \"11\" }, { data = { fileName = \"/tmp/x.ts\", name = \"filter\", position = 32 }, kind = 2, label = \"filter\", sortText = \"11\" }, { data = { fileName = \"/tmp/x.ts\", name = \"find\", position = 32 }, kind = 2, label = \"find\", sortText = \"11\" }, { data = { fileName = \"/tmp/x.ts\", name = \"findIndex\", position = 32 }, kind = 2, label = \"findIndex\", sortText = \"11\" }, { data = { fileName = \"/tmp/x.ts\", name = \"flat\", position = 32 }, kind = 2, label = \"flat\", sortText = \"11\" }, { data = { fileName = \"/tmp/x.ts\", name = \"flatMap\", position = 32 }, kind = 2, label = \"flatMap\", sortText = \"11\" }, { data = { fileName = \"/tmp/x.ts\", name = \"forEach\", position = 32 }, kind = 2, label = \"forEach\", sortText = \"11\" }, { data = { fileName = \"/tmp/x.ts\", name = \"includes\", position = 32 }, kind = 2, label = \"includes\", sortText = \"11\" }, { data = { fileName = \"/tmp/x.ts\", name = \"indexOf\", position = 32 }, kind = 2, label = \"indexOf\", sortText = \"11\" }, { data = { fileName = \"/tmp/x.ts\", name = \"join\", position = 32 }, kind = 2, label = \"join\", sortText = \"11\" }, { data = { fileName = \"/tmp/x.ts\", name = \"keys\", position = 32 }, kind = 2, label = \"keys\", sortText = \"11\" }, { data = { fileName = \"/tmp/x.ts\", name = \"lastIndexOf\", position = 32 }, kind = 2, label = \"lastIndexOf\", sortText = \"11\" }, { data = { fileName = \"/tmp/x.ts\", name = \"length\", position = 32 }, kind = 5, label = \"length\", sortText = \"11\" }, { data = { fileName = \"/tmp/x.ts\", name = \"map\", position = 32 }, kind = 2, label = \"map\", sortText = \"11\" }, { data = { fileName = \"/tmp/x.ts\", name = \"pop\", position = 32 }, kind = 2, label = \"pop\", sortText = \"11\" }, { data = { fileName = \"/tmp/x.ts\", name = \"push\", position = 32 }, kind = 2, label = \"push\", sortText = \"11\" }, { data = { fileName = \"/tmp/x.ts\", name = \"reduce\", position = 32 }, kind = 2, label = \"reduce\", sortText = \"11\" }, { data = { fileName = \"/tmp/x.ts\", name = \"reduceRight\", position = 32 }, kind = 2, label = \"reduceRight\", sortText = \"11\" }, { data = { fileName = \"/tmp/x.ts\", name = \"reverse\", position = 32 }, kind = 2, label = \"reverse\", sortText = \"11\" }, { data = { fileName = \"/tmp/x.ts\", name = \"shift\", position = 32 }, kind = 2, label = \"shift\", sortText = \"11\" }, { data = { fileName = \"/tmp/x.ts\", name = \"slice\", position = 32 }, kind = 2, label = \"slice\", sortText = \"11\" }, { data = { fileName = \"/tmp/x.ts\", name = \"some\", position = 32 }, kind = 2, label = \"some\", sortText = \"11\" }, { data = { fileName = \"/tmp/x.ts\", name = \"sort\", position = 32 }, kind = 2, label = \"sort\", sortText = \"11\" }, { data = { fileName = \"/tmp/x.ts\", name = \"splice\", position = 32 }, kind = 2, label = \"splice\", sortText = \"11\" }, { data = { fileName = \"/tmp/x.ts\", name = \"toLocaleString\", position = 32 }, kind = 2, label = \"toLocaleString\", sortText = \"11\" }, { data = { fileName = \"/tmp/x.ts\", name = \"toString\", position = 32 }, kind = 2, label = \"toString\", sortText = \"11\" }, { data = { fileName = \"/tmp/x.ts\", name = \"unshift\", position = 32 }, kind = 2, label = \"unshift\", sortText = \"11\" }, { data = { fileName = \"/tmp/x.ts\", name = \"values\", position = 32 }, kind = 2, label = \"values\", sortText = \"11\" }, { data = { fileName = \"/tmp/x.ts\", name = \"Symbol\", position = 32 }, filterText = \".Symbol\", insertText = \"[Symbol]\", kind = 6, label = \"Symbol\", sortText = \"15\", textEdit = { newText = \"[Symbol]\", range = { [\"end\"] = { character = 2, line = 1 }, start = { character = 1, line = 1 } } } } } } }\n```\nThe result is far from expected (at least for me): the prefix becomes `.fi` as previously, but it doesn't seem to matter for filtering, because each item becomes provided with a `textEdit` field from `itemDefaults` and the client doesn't perform further filtering on it:\n\nhttps://github.com/neovim/neovim/blob/7088441de41c468e22dc5daffd377c00211ce45b/runtime/lua/vim/lsp/completion.lua#L286-L311\n\nso we get `fill`, but additionally all that redundant results. \n\nThis is not the end: I get incorrectly applied edit (dot is replaced):\n\n<img width=\"248\" height=\"54\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/4c0464de-ba3b-487a-996b-44b4f283a96d\" />\n\nand I haven't analyzed why yet (after adding call `vim.lsp.completion.enable()` to perform needed autocommands and remembering about submitting by `<C-y>`).\n\n<details>\n\n<summary>init.lua</summary>\n\n````lua\n\nlocal function createServer(opts)\n  opts = opts or {}\n  local server = {}\n  server.messages = {}\n\n  function server.cmd(dispatchers)\n    local closing = false\n    local handlers = opts.handlers or {}\n    local srv = {}\n\n    function srv.request(method, params, callback)\n      table.insert(server.messages, {\n        method = method,\n        params = params,\n      })\n      local handler = handlers[method]\n      if handler then\n        handler(method, params, callback)\n      elseif method == 'initialize' then\n        callback(nil, {\n          capabilities = opts.capabilities or {},\n        })\n      elseif method == 'shutdown' then\n        callback(nil, nil)\n      end\n      local request_id = #server.messages\n      return true, request_id\n    end\n\n    function srv.notify(method, params)\n      table.insert(server.messages, {\n        method = method,\n        params = params,\n      })\n      if method == 'exit' then\n        dispatchers.on_exit(0, 15)\n      end\n    end\n\n    function srv.is_closing()\n      return closing\n    end\n\n    function srv.terminate()\n      closing = true\n    end\n\n    return srv\n  end\n\n  return server\nend\n\nlocal completionResultTs = {\n  isIncomplete = false,\n  itemDefaults = {\n    editRange = {\n      insert = {['end'] = {character = 4, line = 1}, start = {character = 2, line = 1}},\n      replace = {['end'] = {character = 4, line = 1}, start = {character = 2, line = 1}},\n    },\n  },\n  items = {\n    {\n      insertTextFormat = 2,\n      kind = 2,\n      label = 'concat',\n    },\n    {\n      insertTextFormat = 2,\n      kind = 2,\n      label = 'fill',\n    },\n    {\n      filterText = '[Symbol]',\n      kind = 6,\n      label = 'Symbol',\n      textEdit = {newText = '[Symbol]', range = {['end'] = {character = 2, line = 1}, start = {character = 1, line = 1}}},\n    },\n    -- {\n    --   filterText = '[Symbol2]',\n    --   kind = 6,\n    --   label = 'Symbol2',\n    --   textEdit = {newText = '[Symbol]', range = {['end'] = {character = 2, line = 1}, start = {character = 2, line = 1}}},\n    -- },\n  }\n}\n\nlocal function createServerWithCompletionProvider(completionResult)\n  return createServer({\n    capabilities = {completionProvider = {}},\n    handlers = {\n      ['textDocument/completion'] = function (_, _, callback)\n        callback(nil, completionResult)\n      end,\n    },\n  })\nend\n\nlocal function startClient(name, completionResult)\n  vim.lsp.start({\n    name = name,\n    cmd = createServerWithCompletionProvider(completionResult).cmd,\n    on_attach = function (client, bufnr0)\n      vim.lsp.completion.enable(true, client.id, bufnr0, {autotrigger = false})\n    end,\n  })\nend\n\nvim.fn.complete = vim.schedule_wrap(vim.fn.complete)\n\nvim.o.completeopt = 'popup,menuone,noinsert,fuzzy'\nvim.o.autocomplete = true\nvim.opt.complete = 'o'\n\nvim.api.nvim_create_autocmd('UIEnter', {\n  callback = function ()\n    vim.api.nvim_buf_set_lines(0, 0, -1, true, {'const x: number[] = [1,2,3]', 'x.fi'})\n    vim.api.nvim_buf_set_name(0, 'x.ts')\n    vim.bo.filetype = 'typescript'\n\n    vim.cmd.normal 'G$'\n    startClient('fake-tsserver', completionResultTs)\n  end\n})\n````\n\n</details>\n",
            "created_at": "2025-10-28T12:17:55Z",
            "html_url": "https://github.com/neovim/neovim/issues/36355#issuecomment-3456188121",
            "id": 3456188121,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36355",
            "node_id": "IC_kwDOAPphoM7OAT7Z",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3456188121/reactions"
            },
            "updated_at": "2025-10-28T12:42:35Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3456188121",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11404453?v=4",
                "events_url": "https://api.github.com/users/przepompownia/events{/privacy}",
                "followers_url": "https://api.github.com/users/przepompownia/followers",
                "following_url": "https://api.github.com/users/przepompownia/following{/other_user}",
                "gists_url": "https://api.github.com/users/przepompownia/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/przepompownia",
                "id": 11404453,
                "login": "przepompownia",
                "node_id": "MDQ6VXNlcjExNDA0NDUz",
                "organizations_url": "https://api.github.com/users/przepompownia/orgs",
                "received_events_url": "https://api.github.com/users/przepompownia/received_events",
                "repos_url": "https://api.github.com/users/przepompownia/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/przepompownia/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/przepompownia/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/przepompownia",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": " @MariaSolOs I'm not able to repro using tsgo, thanks for the suggestion! Didn't realize it was already available, even if in pre-release. I'm not sure if that indicates we should be closing this out, as @przepompownia seems to still be investigating things?  Something I did notice though is that with ts-go lsp, the sorting of completion menu items does not seem to be correct, nor does it do proper filtering. This might be on the lsp responses though? It was my understanding looking through the code that filtering is done client side",
            "created_at": "2025-10-28T12:48:33Z",
            "html_url": "https://github.com/neovim/neovim/issues/36355#issuecomment-3456310727",
            "id": 3456310727,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36355",
            "node_id": "IC_kwDOAPphoM7OAx3H",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3456310727/reactions"
            },
            "updated_at": "2025-10-28T12:59:24Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3456310727",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/64998723?v=4",
                "events_url": "https://api.github.com/users/Jack-Gitter/events{/privacy}",
                "followers_url": "https://api.github.com/users/Jack-Gitter/followers",
                "following_url": "https://api.github.com/users/Jack-Gitter/following{/other_user}",
                "gists_url": "https://api.github.com/users/Jack-Gitter/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Jack-Gitter",
                "id": 64998723,
                "login": "Jack-Gitter",
                "node_id": "MDQ6VXNlcjY0OTk4NzIz",
                "organizations_url": "https://api.github.com/users/Jack-Gitter/orgs",
                "received_events_url": "https://api.github.com/users/Jack-Gitter/received_events",
                "repos_url": "https://api.github.com/users/Jack-Gitter/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Jack-Gitter/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Jack-Gitter/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Jack-Gitter",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "@MariaSolOs I'm also seeing some inconsistencies with the completion, specifically around builtin types. Selection of an item from the completion menu does not insert where expected with of members or functions. For example, the following seems to be buggy with ts-go\n\n```\nconst x = [1,2,3]\nx.fi <-- overwrites even the \".\" character when selecting an item from the completion menu\n```\n\nHere is my language configuration\n\n\n```\nvim.lsp.config.ts_go_ls = {\n\tinit_options = { hostInfo = 'neovim', },\n\tcmd = { 'tsgo', '--lsp', '--stdio' },\n\ton_attach = on_attach,\n\tfiletypes = {\n\t\t'javascript',\n\t\t'javascriptreact',\n\t\t'javascript.jsx',\n\t\t'typescript',\n\t\t'typescriptreact',\n\t\t'typescript.tsx',\n\t},\n\troot_markers = {\n\t\t'tsconfig.json', 'jsconfig.json', 'package.json', '.git'\n\t},\n\tsingle_file_support = true,\n}\n```",
            "created_at": "2025-10-28T13:46:09Z",
            "html_url": "https://github.com/neovim/neovim/issues/36355#issuecomment-3456561505",
            "id": 3456561505,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36355",
            "node_id": "IC_kwDOAPphoM7OBvFh",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3456561505/reactions"
            },
            "updated_at": "2025-10-28T13:46:09Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3456561505",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/64998723?v=4",
                "events_url": "https://api.github.com/users/Jack-Gitter/events{/privacy}",
                "followers_url": "https://api.github.com/users/Jack-Gitter/followers",
                "following_url": "https://api.github.com/users/Jack-Gitter/following{/other_user}",
                "gists_url": "https://api.github.com/users/Jack-Gitter/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Jack-Gitter",
                "id": 64998723,
                "login": "Jack-Gitter",
                "node_id": "MDQ6VXNlcjY0OTk4NzIz",
                "organizations_url": "https://api.github.com/users/Jack-Gitter/orgs",
                "received_events_url": "https://api.github.com/users/Jack-Gitter/received_events",
                "repos_url": "https://api.github.com/users/Jack-Gitter/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Jack-Gitter/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Jack-Gitter/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Jack-Gitter",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "@Jack-Gitter ~are you getting the correct result on confirmation?~ you responsed before I sent this comment :)\n\n```lua\nvim.lsp.log.set_level('debug')\n\nvim.opt.completeopt = { 'menu', 'menuone', 'noselect' }\n\nvim.lsp.config.tsgo = {\n  cmd = { 'tsgo', '--lsp', '--stdio' },\n  filetypes = {\n    'javascript',\n    'javascriptreact',\n    'javascript.jsx',\n    'typescript',\n    'typescriptreact',\n    'typescript.tsx',\n  },\n  root_markers = {\n    'tsconfig.json', 'jsconfig.json', 'package.json', '.git'\n  },\n  single_file_support = true,\n  settings = {\n    completions = {\n      completeFunctionCalls = true\n    }\n  },\n\n}\n\nvim.lsp.enable({ 'tsgo' })\nvim.api.nvim_create_autocmd('LspAttach', {\n  callback = function(ev)\n    vim.lsp.completion.enable(true, ev.data.client_id, ev.buf, { autotrigger = false })\n  end\n})\n```\n\nBoth with the above repro and my recent simulation I get incorrect snippet expansion, probably because:\n\n- like in my previous comment, `server_start_boundary = curstartbyte` which is `1` from the startCharacter\n- at the end of trigger, just before calling `vim.fn.complete()` this value determines the column of `Context.cursor`:\n\nhttps://github.com/neovim/neovim/blob/7088441de41c468e22dc5daffd377c00211ce45b/runtime/lua/vim/lsp/completion.lua#L555-L557\n\n- then (`CompleteDone` callback) the buffer line is trimmed starting from that column (only `x` remains):\n\nhttps://github.com/neovim/neovim/blob/7088441de41c468e22dc5daffd377c00211ce45b/runtime/lua/vim/lsp/completion.lua#L652-L659\n\nso later that trivial snippet is expanded on wrong position.\n\nSimilarly: removing `Symbol` entry from completion results or adding a copy modified on the start column (see the repro at the end of my previous comment) hides that behavior.\n\n~It suggests that `adjust_start_col()` may need fix.~",
            "created_at": "2025-10-28T13:46:14Z",
            "html_url": "https://github.com/neovim/neovim/issues/36355#issuecomment-3456562119",
            "id": 3456562119,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36355",
            "node_id": "IC_kwDOAPphoM7OBvPH",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3456562119/reactions"
            },
            "updated_at": "2025-10-28T14:36:08Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3456562119",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11404453?v=4",
                "events_url": "https://api.github.com/users/przepompownia/events{/privacy}",
                "followers_url": "https://api.github.com/users/przepompownia/followers",
                "following_url": "https://api.github.com/users/przepompownia/following{/other_user}",
                "gists_url": "https://api.github.com/users/przepompownia/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/przepompownia",
                "id": 11404453,
                "login": "przepompownia",
                "node_id": "MDQ6VXNlcjExNDA0NDUz",
                "organizations_url": "https://api.github.com/users/przepompownia/orgs",
                "received_events_url": "https://api.github.com/users/przepompownia/received_events",
                "repos_url": "https://api.github.com/users/przepompownia/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/przepompownia/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/przepompownia/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/przepompownia",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "@przepompownia Just left another comment, the completion expansion is not correct with tsgo. I gave an example as well, does that seem to cause problems for you as well?",
            "created_at": "2025-10-28T13:47:31Z",
            "html_url": "https://github.com/neovim/neovim/issues/36355#issuecomment-3456568989",
            "id": 3456568989,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36355",
            "node_id": "IC_kwDOAPphoM7OBw6d",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3456568989/reactions"
            },
            "updated_at": "2025-10-28T13:47:31Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3456568989",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/64998723?v=4",
                "events_url": "https://api.github.com/users/Jack-Gitter/events{/privacy}",
                "followers_url": "https://api.github.com/users/Jack-Gitter/followers",
                "following_url": "https://api.github.com/users/Jack-Gitter/following{/other_user}",
                "gists_url": "https://api.github.com/users/Jack-Gitter/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Jack-Gitter",
                "id": 64998723,
                "login": "Jack-Gitter",
                "node_id": "MDQ6VXNlcjY0OTk4NzIz",
                "organizations_url": "https://api.github.com/users/Jack-Gitter/orgs",
                "received_events_url": "https://api.github.com/users/Jack-Gitter/received_events",
                "repos_url": "https://api.github.com/users/Jack-Gitter/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Jack-Gitter/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Jack-Gitter/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Jack-Gitter",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "@Jack-Gitter I wanted to encourage you to using `vim.lsp.completion.enable()` in your repro to get `CompleteDone` and `<C-y>` to expand snippets after confirmation\n\n```lua\nvim.lsp.log.set_level('debug')\n\nvim.opt.completeopt = { 'menu', 'menuone', 'noselect' }\n\nvim.lsp.config.tsgo = {\n  cmd = { 'tsgo', '--lsp', '--stdio' },\n  filetypes = { 'typescript' },\n  single_file_support = true,\n}\n\nvim.lsp.enable({ 'tsgo' })\nvim.api.nvim_create_autocmd('LspAttach', {\n  callback = function(ev)\n    vim.lsp.completion.enable(true, ev.data.client_id, ev.buf, { autotrigger = false })\n  end\n})\nvim.api.nvim_create_autocmd('UIEnter', {\n  callback = function()\n    vim.api.nvim_buf_set_lines(0, 0, -1, true, { 'const x: number[] = [1,2,3]', 'x.fi' })\n    vim.api.nvim_buf_set_name(0, 'x.ts')\n    vim.bo.filetype = 'typescript'\n\n    vim.cmd.normal 'G$'\n  end\n})\n```\n\nbut we don't need it here because `vim.fn.complete()` uses wrong `start_col` value before. ",
            "created_at": "2025-10-28T14:01:50Z",
            "html_url": "https://github.com/neovim/neovim/issues/36355#issuecomment-3456639107",
            "id": 3456639107,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36355",
            "node_id": "IC_kwDOAPphoM7OCCCD",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3456639107/reactions"
            },
            "updated_at": "2025-10-28T14:23:15Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3456639107",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11404453?v=4",
                "events_url": "https://api.github.com/users/przepompownia/events{/privacy}",
                "followers_url": "https://api.github.com/users/przepompownia/followers",
                "following_url": "https://api.github.com/users/przepompownia/following{/other_user}",
                "gists_url": "https://api.github.com/users/przepompownia/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/przepompownia",
                "id": 11404453,
                "login": "przepompownia",
                "node_id": "MDQ6VXNlcjExNDA0NDUz",
                "organizations_url": "https://api.github.com/users/przepompownia/orgs",
                "received_events_url": "https://api.github.com/users/przepompownia/received_events",
                "repos_url": "https://api.github.com/users/przepompownia/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/przepompownia/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/przepompownia/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/przepompownia",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I was curious what happens when using `tsgo`, but after zooming out from details I am again inclined to doubt that we have anything to change on the Nvim side.\n\n- `itemDefaults` contents prevent only from filtering the mess from the server, so we get `fill` too,\n- the completion prefix and the start column remain bad, because of existence of a single item (`Symbol`) that not only makes this mess of choice bigger, but provides invalid data to `adjust_start_col`.\n\nIn general: can there be a correct response when some single item can make the start column incorrect for other items in that way?",
            "created_at": "2025-10-28T15:08:52Z",
            "html_url": "https://github.com/neovim/neovim/issues/36355#issuecomment-3456977007",
            "id": 3456977007,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36355",
            "node_id": "IC_kwDOAPphoM7ODUhv",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3456977007/reactions"
            },
            "updated_at": "2025-10-28T15:11:32Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3456977007",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11404453?v=4",
                "events_url": "https://api.github.com/users/przepompownia/events{/privacy}",
                "followers_url": "https://api.github.com/users/przepompownia/followers",
                "following_url": "https://api.github.com/users/przepompownia/following{/other_user}",
                "gists_url": "https://api.github.com/users/przepompownia/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/przepompownia",
                "id": 11404453,
                "login": "przepompownia",
                "node_id": "MDQ6VXNlcjExNDA0NDUz",
                "organizations_url": "https://api.github.com/users/przepompownia/orgs",
                "received_events_url": "https://api.github.com/users/przepompownia/received_events",
                "repos_url": "https://api.github.com/users/przepompownia/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/przepompownia/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/przepompownia/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/przepompownia",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "@przepompownia Im really not sure, Im no expert on LSP unfortunately :) I just figured that if both neovim and typescript obey the LSP spec, then the omnifunc should operate as expected. Im wondering really which aspect of the spec is not followed, whether it be client or server side",
            "created_at": "2025-10-28T22:51:27Z",
            "html_url": "https://github.com/neovim/neovim/issues/36355#issuecomment-3458868962",
            "id": 3458868962,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36355",
            "node_id": "IC_kwDOAPphoM7OKibi",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3458868962/reactions"
            },
            "updated_at": "2025-10-28T22:51:27Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3458868962",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/64998723?v=4",
                "events_url": "https://api.github.com/users/Jack-Gitter/events{/privacy}",
                "followers_url": "https://api.github.com/users/Jack-Gitter/followers",
                "following_url": "https://api.github.com/users/Jack-Gitter/following{/other_user}",
                "gists_url": "https://api.github.com/users/Jack-Gitter/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Jack-Gitter",
                "id": 64998723,
                "login": "Jack-Gitter",
                "node_id": "MDQ6VXNlcjY0OTk4NzIz",
                "organizations_url": "https://api.github.com/users/Jack-Gitter/orgs",
                "received_events_url": "https://api.github.com/users/Jack-Gitter/received_events",
                "repos_url": "https://api.github.com/users/Jack-Gitter/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Jack-Gitter/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Jack-Gitter/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Jack-Gitter",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "@przepompownia I had a bit more time to look at what you're saying with regards to the symbol response from typescript-language-server, and how it impacts the prefix and therefore the completion menu items. I decided to just try a simple test\n\n```\nconst x = [1,2,3]\nx. <-- select \"Symbol\" from the completion menu\nx[Symbol] <-- result! \n```\n\nI'm not sure how familiar you are with Typescript, but this is correct. In Typescript, you can do something like\n\n```\nconst x = [1,2,3]\n\nx[Symbol.iterator]\n```\n\nWhich is totally valid, and in this case is actually supposed to replace the \".\" operator. This is why the language server responds with [Symbol] in the first place, and sets the start position in such a way that it would replace the \".\". My mind has now come back around, can we adjust the filtering in such a way that makes it \"smarter\"? i.e. \".fi\" does not filter out \"fi\" from the results? This would require additional logic to recalculate the starting position for the completion if the prefix used for filtering does not exactly match the prefix of the selected completion item. \n\n@MariaSolOs @justinmk I would also be interested to hear your thoughts on the matter",
            "created_at": "2025-10-29T21:34:09Z",
            "html_url": "https://github.com/neovim/neovim/issues/36355#issuecomment-3464175085",
            "id": 3464175085,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36355",
            "node_id": "IC_kwDOAPphoM7Oex3t",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3464175085/reactions"
            },
            "updated_at": "2025-10-29T21:34:28Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3464175085",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/64998723?v=4",
                "events_url": "https://api.github.com/users/Jack-Gitter/events{/privacy}",
                "followers_url": "https://api.github.com/users/Jack-Gitter/followers",
                "following_url": "https://api.github.com/users/Jack-Gitter/following{/other_user}",
                "gists_url": "https://api.github.com/users/Jack-Gitter/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Jack-Gitter",
                "id": 64998723,
                "login": "Jack-Gitter",
                "node_id": "MDQ6VXNlcjY0OTk4NzIz",
                "organizations_url": "https://api.github.com/users/Jack-Gitter/orgs",
                "received_events_url": "https://api.github.com/users/Jack-Gitter/received_events",
                "repos_url": "https://api.github.com/users/Jack-Gitter/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Jack-Gitter/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Jack-Gitter/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Jack-Gitter",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Probably related: https://github.com/neovim/neovim/issues/36076.\n\n\n\nI tested this in Helix, and it works correctly there. Code snippet:\n```ts\nfunction foo() {\n\targuments.c|\n}\n```\n\nThe responses are actually different:\n\n<details>\n<summary>Responses</summary>\n\nNeovim:\n```json\n{\n    \"isIncomplete\": false,\n    \"items\": [\n      {\n        \"data\": {\n          \"cacheId\": 1\n        },\n        \"kind\": 5,\n        \"label\": \"callee\",\n        \"sortText\": \"11\"\n      },\n      {\n        \"data\": {\n          \"cacheId\": 2\n        },\n        \"kind\": 5,\n        \"label\": \"length\",\n        \"sortText\": \"11\"\n      },\n      {\n        \"data\": {\n          \"cacheId\": 3\n        },\n        \"filterText\": \"[Symbol]\",\n        \"kind\": 6,\n        \"label\": \"Symbol\",\n        \"sortText\": \"15\",\n        \"textEdit\": {\n          \"newText\": \"[Symbol]\",\n          \"range\": {\n            \"end\": {\n              \"character\": 11,\n              \"line\": 1\n            },\n            \"start\": {\n              \"character\": 10,\n              \"line\": 1\n            }\n          }\n        }\n      }\n    ]\n  }\n```\n\nHelix:\n```json\n{\n    \"isIncomplete\": false,\n    \"items\": [\n      {\n        \"data\": {\n          \"cacheId\": 1\n        },\n        \"kind\": 5,\n        \"label\": \"callee\",\n        \"sortText\": \"11\",\n        \"textEdit\": {\n          \"insert\": {\n            \"end\": {\n              \"character\": 12,\n              \"line\": 1\n            },\n            \"start\": {\n              \"character\": 11,\n              \"line\": 1\n            }\n          },\n          \"newText\": \"callee\",\n          \"replace\": {\n            \"end\": {\n              \"character\": 12,\n              \"line\": 1\n            },\n            \"start\": {\n              \"character\": 11,\n              \"line\": 1\n            }\n          }\n        }\n      },\n      {\n        \"data\": {\n          \"cacheId\": 2\n        },\n        \"kind\": 5,\n        \"label\": \"length\",\n        \"sortText\": \"11\",\n        \"textEdit\": {\n          \"insert\": {\n            \"end\": {\n              \"character\": 12,\n              \"line\": 1\n            },\n            \"start\": {\n              \"character\": 11,\n              \"line\": 1\n            }\n          },\n          \"newText\": \"length\",\n          \"replace\": {\n            \"end\": {\n              \"character\": 12,\n              \"line\": 1\n            },\n            \"start\": {\n              \"character\": 11,\n              \"line\": 1\n            }\n          }\n        }\n      },\n      {\n        \"data\": {\n          \"cacheId\": 3\n        },\n        \"filterText\": \"[Symbol]\",\n        \"kind\": 6,\n        \"label\": \"Symbol\",\n        \"sortText\": \"15\",\n        \"textEdit\": {\n          \"newText\": \"[Symbol]\",\n          \"range\": {\n            \"end\": {\n              \"character\": 11,\n              \"line\": 1\n            },\n            \"start\": {\n              \"character\": 10,\n              \"line\": 1\n            }\n          }\n        }\n      }\n    ]\n  }\n```\n\n</details>\n\nThe only difference is that, in Helix, the server sends an [insertReplaceEdit](https://microsoft.github.io/language-server-protocol/specifications/lsp/3.18/specification/#insertReplaceEdit) in \"textEdit\" field, because the client provided `textDocument.completion.completionItem.insertReplaceSupport` capability.\n\nThe simplest solution would be for Neovim to support this capability as well. That way, the server could compute the ranges itself, and client wouldn't need to account different ranges for each filtered completion item. However, the current response doesn't violate the LSP specification and should still be supported.\n\nThe main issue seems to be that `complete-items` doesn't allow specifying different `startcol` values per item. A possible workaround would be to prepend the missing prefix to all completion items so they align with the leftmost start position. In this case, that would result in the items `{ \".callee\", \".length\", \"[Symbol]\" }`.\n\n> [@przepompownia](https://github.com/przepompownia) I had a bit more time to look at what you're saying with regards to the symbol response from typescript-language-server, and how it impacts the prefix and therefore the completion menu items. I decided to just try a simple test\n> \n> ```\n> const x = [1,2,3]\n> x. <-- select \"Symbol\" from the completion menu\n> x[Symbol] <-- result! \n> ```\n\nThis works because tsserver returns completion labels exactly as `{ \".callee\", \".length\", \"[Symbol]\" }` (with \".\" prefix) in this case.",
            "created_at": "2025-10-29T22:09:59Z",
            "html_url": "https://github.com/neovim/neovim/issues/36355#issuecomment-3464384126",
            "id": 3464384126,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36355",
            "node_id": "IC_kwDOAPphoM7Ofk5-",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 2,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 1,
                "total_count": 3,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3464384126/reactions"
            },
            "updated_at": "2025-10-29T22:54:41Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3464384126",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/101928759?v=4",
                "events_url": "https://api.github.com/users/skewb1k/events{/privacy}",
                "followers_url": "https://api.github.com/users/skewb1k/followers",
                "following_url": "https://api.github.com/users/skewb1k/following{/other_user}",
                "gists_url": "https://api.github.com/users/skewb1k/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/skewb1k",
                "id": 101928759,
                "login": "skewb1k",
                "node_id": "U_kgDOBhNPNw",
                "organizations_url": "https://api.github.com/users/skewb1k/orgs",
                "received_events_url": "https://api.github.com/users/skewb1k/received_events",
                "repos_url": "https://api.github.com/users/skewb1k/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/skewb1k/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/skewb1k/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/skewb1k",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "@Jack-Gitter Yes, I'm not too familiar with TS - having some dusty experience with JS I only guess various ways of property access in our example but tried to understand when suggesting `[Symbol]` would be correct. \n\nDo I understand correctly that you are suggesting that `concat`, `[Symbol]` etc. should be suggested at `x.fi|`? It's hard for me to imagine this, but I'm asking just to be sure.",
            "created_at": "2025-10-29T22:52:50Z",
            "html_url": "https://github.com/neovim/neovim/issues/36355#issuecomment-3464703642",
            "id": 3464703642,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36355",
            "node_id": "IC_kwDOAPphoM7Ogy6a",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3464703642/reactions"
            },
            "updated_at": "2025-10-29T22:52:50Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3464703642",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11404453?v=4",
                "events_url": "https://api.github.com/users/przepompownia/events{/privacy}",
                "followers_url": "https://api.github.com/users/przepompownia/followers",
                "following_url": "https://api.github.com/users/przepompownia/following{/other_user}",
                "gists_url": "https://api.github.com/users/przepompownia/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/przepompownia",
                "id": 11404453,
                "login": "przepompownia",
                "node_id": "MDQ6VXNlcjExNDA0NDUz",
                "organizations_url": "https://api.github.com/users/przepompownia/orgs",
                "received_events_url": "https://api.github.com/users/przepompownia/received_events",
                "repos_url": "https://api.github.com/users/przepompownia/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/przepompownia/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/przepompownia/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/przepompownia",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "\n> [@MariaSolOs](https://github.com/MariaSolOs) [@justinmk](https://github.com/justinmk) I would also be interested to hear your thoughts on the matter\n\nmy thoughts are \"pr welcome\"",
            "created_at": "2025-10-29T23:39:12Z",
            "html_url": "https://github.com/neovim/neovim/issues/36355#issuecomment-3465141369",
            "id": 3465141369,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36355",
            "node_id": "IC_kwDOAPphoM7Oidx5",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3465141369/reactions"
            },
            "updated_at": "2025-10-29T23:39:12Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3465141369",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "@przepompownia With Neovim doing client side filtering, Im assuming that the it is expected that the server doesnt necessarily respond with pre-filtered responses. Because of this, [Symbol] is technically a valid response on an array, and it being the only response where the start col differs due to the expectation the completion WILL remove the ., it is the only one with a textEdit field. This causes the prefix to be incorrect, meaning that Neovim might need adjusted logic in the event the LSP server responds with a completions array where some of the completions contain the textEdit field, and others dont ",
            "created_at": "2025-10-30T00:12:14Z",
            "html_url": "https://github.com/neovim/neovim/issues/36355#issuecomment-3465418367",
            "id": 3465418367,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36355",
            "node_id": "IC_kwDOAPphoM7OjhZ_",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3465418367/reactions"
            },
            "updated_at": "2025-10-30T00:12:14Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3465418367",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/64998723?v=4",
                "events_url": "https://api.github.com/users/Jack-Gitter/events{/privacy}",
                "followers_url": "https://api.github.com/users/Jack-Gitter/followers",
                "following_url": "https://api.github.com/users/Jack-Gitter/following{/other_user}",
                "gists_url": "https://api.github.com/users/Jack-Gitter/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Jack-Gitter",
                "id": 64998723,
                "login": "Jack-Gitter",
                "node_id": "MDQ6VXNlcjY0OTk4NzIz",
                "organizations_url": "https://api.github.com/users/Jack-Gitter/orgs",
                "received_events_url": "https://api.github.com/users/Jack-Gitter/received_events",
                "repos_url": "https://api.github.com/users/Jack-Gitter/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Jack-Gitter/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Jack-Gitter/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Jack-Gitter",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "@skewb1k Thanks for the response! Thats actually pretty eye opening, I hadn't considered testing it out in Helix. Especially useful is the other issue that you had linked to, which is certainly the same thing I am seeing here. I was wondering though, it does seem like a limitation on the client side to me. Both because `complete-items` doesn't allow for specifying varying start columns, and technically, the start column response from the LSP is correct for the `[Symbol]` completion item (and for the rest, as no custom start column was defined). ",
            "created_at": "2025-10-30T00:42:32Z",
            "html_url": "https://github.com/neovim/neovim/issues/36355#issuecomment-3465636268",
            "id": 3465636268,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36355",
            "node_id": "IC_kwDOAPphoM7OkWms",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3465636268/reactions"
            },
            "updated_at": "2025-10-30T00:42:32Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3465636268",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/64998723?v=4",
                "events_url": "https://api.github.com/users/Jack-Gitter/events{/privacy}",
                "followers_url": "https://api.github.com/users/Jack-Gitter/followers",
                "following_url": "https://api.github.com/users/Jack-Gitter/following{/other_user}",
                "gists_url": "https://api.github.com/users/Jack-Gitter/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Jack-Gitter",
                "id": 64998723,
                "login": "Jack-Gitter",
                "node_id": "MDQ6VXNlcjY0OTk4NzIz",
                "organizations_url": "https://api.github.com/users/Jack-Gitter/orgs",
                "received_events_url": "https://api.github.com/users/Jack-Gitter/received_events",
                "repos_url": "https://api.github.com/users/Jack-Gitter/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Jack-Gitter/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Jack-Gitter/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Jack-Gitter",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "@Jack-Gitter the server get the current cursor position and can avoid include (imagine hundreds) unrelated results.\n\nPerhaps there is a reason why it is worth returning everything (like for `.` only) and assuming the client (or The Client ) will cache it and won't call again for completion while the prefix is modified within some range.\n\nThis seems to be a separate topic so rather let's not continue it here. ",
            "created_at": "2025-10-30T11:41:32Z",
            "html_url": "https://github.com/neovim/neovim/issues/36355#issuecomment-3467589056",
            "id": 3467589056,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36355",
            "node_id": "IC_kwDOAPphoM7OrzXA",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3467589056/reactions"
            },
            "updated_at": "2025-10-30T11:42:50Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3467589056",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11404453?v=4",
                "events_url": "https://api.github.com/users/przepompownia/events{/privacy}",
                "followers_url": "https://api.github.com/users/przepompownia/followers",
                "following_url": "https://api.github.com/users/przepompownia/following{/other_user}",
                "gists_url": "https://api.github.com/users/przepompownia/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/przepompownia",
                "id": 11404453,
                "login": "przepompownia",
                "node_id": "MDQ6VXNlcjExNDA0NDUz",
                "organizations_url": "https://api.github.com/users/przepompownia/orgs",
                "received_events_url": "https://api.github.com/users/przepompownia/received_events",
                "repos_url": "https://api.github.com/users/przepompownia/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/przepompownia/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/przepompownia/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/przepompownia",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "Ok, sounds good then. It seems to be like it would be on the language server then for bad completion results based on what we've discussed. I think its safe to close it out. Thanks @przepompownia for the help!",
            "created_at": "2025-10-30T12:40:46Z",
            "html_url": "https://github.com/neovim/neovim/issues/36355#issuecomment-3467795971",
            "id": 3467795971,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36355",
            "node_id": "IC_kwDOAPphoM7Osl4D",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3467795971/reactions"
            },
            "updated_at": "2025-10-30T12:40:46Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3467795971",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/64998723?v=4",
                "events_url": "https://api.github.com/users/Jack-Gitter/events{/privacy}",
                "followers_url": "https://api.github.com/users/Jack-Gitter/followers",
                "following_url": "https://api.github.com/users/Jack-Gitter/following{/other_user}",
                "gists_url": "https://api.github.com/users/Jack-Gitter/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Jack-Gitter",
                "id": 64998723,
                "login": "Jack-Gitter",
                "node_id": "MDQ6VXNlcjY0OTk4NzIz",
                "organizations_url": "https://api.github.com/users/Jack-Gitter/orgs",
                "received_events_url": "https://api.github.com/users/Jack-Gitter/received_events",
                "repos_url": "https://api.github.com/users/Jack-Gitter/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Jack-Gitter/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Jack-Gitter/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Jack-Gitter",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Since a lot of effort was expended here (thank you ) to root cause this, what's a summary of the takeaways? We could potentially add this to the docs (as a \"faq\" or similar). Especially looking for \"The response should contain X, look for Y in the logs, ...\".",
            "created_at": "2025-10-30T23:26:31Z",
            "html_url": "https://github.com/neovim/neovim/issues/36355#issuecomment-3470697050",
            "id": 3470697050,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36355",
            "node_id": "IC_kwDOAPphoM7O3qJa",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3470697050/reactions"
            },
            "updated_at": "2025-10-30T23:31:11Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3470697050",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I tried to summarize the actual behavior [here](https://github.com/neovim/neovim/issues/36355#issuecomment-3456977007), but have no idea what to do (and didn't found additional time yet), especially:\n\n- didn't found any example (or test case) for which `adjust_start_col()` should behave as described here,\n- only have read the docs about `insertReplaceEdit`, but without checking what it could look in our case and would help solve the problem if supported by Nvim.",
            "created_at": "2025-10-31T09:04:42Z",
            "html_url": "https://github.com/neovim/neovim/issues/36355#issuecomment-3472001883",
            "id": 3472001883,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36355",
            "node_id": "IC_kwDOAPphoM7O8otb",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3472001883/reactions"
            },
            "updated_at": "2025-10-31T09:04:42Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3472001883",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11404453?v=4",
                "events_url": "https://api.github.com/users/przepompownia/events{/privacy}",
                "followers_url": "https://api.github.com/users/przepompownia/followers",
                "following_url": "https://api.github.com/users/przepompownia/following{/other_user}",
                "gists_url": "https://api.github.com/users/przepompownia/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/przepompownia",
                "id": 11404453,
                "login": "przepompownia",
                "node_id": "MDQ6VXNlcjExNDA0NDUz",
                "organizations_url": "https://api.github.com/users/przepompownia/orgs",
                "received_events_url": "https://api.github.com/users/przepompownia/received_events",
                "repos_url": "https://api.github.com/users/przepompownia/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/przepompownia/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/przepompownia/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/przepompownia",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 37,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/36355/comments",
    "created_at": "2025-10-27T20:24:57Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/36355/events",
    "html_url": "https://github.com/neovim/neovim/issues/36355",
    "id": 3558511637,
    "issue_dependencies_summary": {
        "blocked_by": 0,
        "blocking": 0,
        "total_blocked_by": 0,
        "total_blocking": 0
    },
    "labels": [
        {
            "color": "c5def5",
            "default": false,
            "description": null,
            "id": 662566370,
            "name": "lsp",
            "node_id": "MDU6TGFiZWw2NjI1NjYzNzA=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/lsp"
        },
        {
            "color": "C5DEF5",
            "default": false,
            "description": "Nvim built-in (omni)completion",
            "id": 3214348835,
            "name": "completion",
            "node_id": "MDU6TGFiZWwzMjE0MzQ4ODM1",
            "url": "https://api.github.com/repos/neovim/neovim/labels/completion"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/36355/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM7UGpQV",
    "number": 36355,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/36355/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "completed",
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/36355/timeline",
    "title": "LSP: vim.lsp.omnifunc() does not populate completion menu when LSP \"textDocument/completion\" response does not include \"textEdit\" field (and others?) and defaults are nil",
    "type": {
        "color": "red",
        "created_at": "2024-01-25T10:10:19Z",
        "description": "An unexpected problem or behavior",
        "id": 597163,
        "is_enabled": true,
        "name": "Bug",
        "node_id": "IT_kwDOAGK_Pc4ACRyr",
        "updated_at": "2024-07-26T10:12:30Z"
    },
    "updated_at": "2025-10-31T09:04:43Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/36355",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/64998723?v=4",
        "events_url": "https://api.github.com/users/Jack-Gitter/events{/privacy}",
        "followers_url": "https://api.github.com/users/Jack-Gitter/followers",
        "following_url": "https://api.github.com/users/Jack-Gitter/following{/other_user}",
        "gists_url": "https://api.github.com/users/Jack-Gitter/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/Jack-Gitter",
        "id": 64998723,
        "login": "Jack-Gitter",
        "node_id": "MDQ6VXNlcjY0OTk4NzIz",
        "organizations_url": "https://api.github.com/users/Jack-Gitter/orgs",
        "received_events_url": "https://api.github.com/users/Jack-Gitter/received_events",
        "repos_url": "https://api.github.com/users/Jack-Gitter/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/Jack-Gitter/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Jack-Gitter/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/Jack-Gitter",
        "user_view_type": "public"
    }
}