{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "body": "### Problem\n\nThe test `diff mode overlapped diff blocks will be merged` [fails on Alpine Linux aarch64](https://gitlab.alpinelinux.org/alpine/aports/-/jobs/1842918). It appears to pass on x86_64.\n```\nFAILED   1 test, listed below:\nFAILED   test/functional/ui/diff_spec.lua @ 1525: diff mode overlapped diff blocks will be merged\ntest/functional/ui/diff_spec.lua:1648: Row 1 did not match.\nExpected:\n  |*{7:  }a        │{7:  }a        │{7:  }^a        |\n  |{7:  }{27:b}{4:        }│{7:  }{27:x}{4:        }│{7:  }{27:y}{4:        }|\n  |*{7:  }{27:c}{4:        }│{7:  }{27:c}{4:        }│{7:  }{27:y}{4:        }|\n  |{1:~          }│{1:~          }│{1:~          }|\n  |{1:~          }│{1:~          }│{1:~          }|\n  |{1:~          }│{1:~          }│{1:~          }|\n  |{1:~          }│{1:~          }│{1:~          }|\n  |{1:~          }│{1:~          }│{1:~          }|\n  |{1:~          }│{1:~          }│{1:~          }|\n  |{1:~          }│{1:~          }│{1:~          }|\n  |{1:~          }│{1:~          }│{1:~          }|\n  |{1:~          }│{1:~          }│{1:~          }|\n  |{1:~          }│{1:~          }│{1:~          }|\n  |{1:~          }│{1:~          }│{1:~          }|\n  |{1:~          }│{1:~          }│{1:~          }|\n  |{1:~          }│{1:~          }│{1:~          }|\n  |{1:~          }│{1:~          }│{1:~          }|\n  |{1:~          }│{1:~          }│{1:~          }|\n  |{2:Xdifile1    Xdifile2    }{3:Xdifile3   }|\n  |                                   |\nActual:\n  |*{7:  }{27:a}{4:        }│{7:  }{27:a}{4:        }│{7:  }{27:^y}{4:        }|\n  |{7:  }{27:b}{4:        }│{7:  }{27:x}{4:        }│{7:  }{27:y}{4:        }|\n  |*{7:  }c        │{7:  }c        │{7:  }c        |\n  |{1:~          }│{1:~          }│{1:~          }|\n  |{1:~          }│{1:~          }│{1:~          }|\n  |{1:~          }│{1:~          }│{1:~          }|\n  |{1:~          }│{1:~          }│{1:~          }|\n  |{1:~          }│{1:~          }│{1:~          }|\n  |{1:~          }│{1:~          }│{1:~          }|\n  |{1:~          }│{1:~          }│{1:~          }|\n  |{1:~          }│{1:~          }│{1:~          }|\n  |{1:~          }│{1:~          }│{1:~          }|\n  |{1:~          }│{1:~          }│{1:~          }|\n  |{1:~          }│{1:~          }│{1:~          }|\n  |{1:~          }│{1:~          }│{1:~          }|\n  |{1:~          }│{1:~          }│{1:~          }|\n  |{1:~          }│{1:~          }│{1:~          }|\n  |{1:~          }│{1:~          }│{1:~          }|\n  |{2:Xdifile1    Xdifile2    }{3:Xdifile3   }|\n  |                                   |\nTo print the expect() call that would assert the current screen state, use\nscreen:snapshot_util(). In case of non-deterministic failures, use\nscreen:redraw_debug() to show all intermediate screen states.\nSnapshot:\nscreen:expect([[\n  {7:  }{27:a}{4:        }│{7:  }{27:a}{4:        }│{7:  }{27:^y}{4:        }|\n  {7:  }{27:b}{4:        }│{7:  }{27:x}{4:        }│{7:  }{27:y}{4:        }|\n  {7:  }c        │{7:  }c        │{7:  }c        |\n  {1:~          }│{1:~          }│{1:~          }|*15\n  {2:Xdifile1    Xdifile2    }{3:Xdifile3   }|\n                                     |\n]])\nstack traceback:\n\ttest/functional/ui/screen.lua:852: in function '_wait'\n\ttest/functional/ui/screen.lua:517: in function 'expect'\n\ttest/functional/ui/diff_spec.lua:1648: in function <test/functional/ui/diff_spec.lua:1525>\nERROR    2 errors, listed below:\nERROR    test/functional/options/defaults_spec.lua @ 961: stdpath() $NVIM_APPNAME relative path\ntest/testutil.lua:155: Pattern does not match.\nPattern:\n[/\\\\]relative%-appname.[^/\\\\]+\nActual:\nstack traceback:\n\ttest/testutil.lua:155: in function 'matches'\n\ttest/functional/options/defaults_spec.lua:977: in function <test/functional/options/defaults_spec.lua:961>\nERROR    test/functional/terminal/tui_spec.lua @ 3621: TUI client throws error when no server exists\ntest/functional/testterm.lua:178: terminal job failed to start\nstack traceback:\n\ttest/functional/testterm.lua:178: in function 'setup_child_nvim'\n\ttest/functional/terminal/tui_spec.lua:3623: in function <test/functional/terminal/tui_spec.lua:3621>\n 56 SKIPPED TESTS\n 1 FAILED TEST\n 2 ERRORS\n------------------------------------------------------------------------------\n$NVIM_LOG_FILE: /builds/alpine/aports/community/neovim/src/neovim-0.11.1/build/.nvimlog\n(last 10 lines)\nERR 2025-05-08T10:44:44.481 ui/c/T5278.15113.0 tui_stop:617: TUI already stopped (race?)\nERR 2025-05-08T10:44:44.622 ui/c/T5279.15116.0 tui_stop:617: TUI already stopped (race?)\nERR 2025-05-08T10:44:44.914 ui/c/T5281.15122.0 tui_stop:617: TUI already stopped (race?)\nERR 2025-05-08T10:44:45.056 ui/c/T5282.15125.0 tui_stop:617: TUI already stopped (race?)\nERR 2025-05-08T10:44:45.181 ui/c/T5283.15128.0 tui_stop:617: TUI already stopped (race?)\nERR 2025-05-08T10:44:45.231 ui/c/T5284.15131.0 tui_stop:617: TUI already stopped (race?)\nERR 2025-05-08T10:44:45.351 ui/c/T5285.15134.0 tui_stop:617: TUI already stopped (race?)\nERR 2025-05-08T10:44:45.656 ui/c/T5286.15137.0 tui_stop:617: TUI already stopped (race?)\nERR 2025-05-08T10:47:47.510 ui/c/T6613.16530.0 tui_stop:617: TUI already stopped (race?)\nERR 2025-05-08T10:47:48.080 ui/c/T6614.16534.0 tui_stop:617: TUI already stopped (race?)\n------------------------------------------------------------------------------\n-- Tests exited non-zero: 1\n-- Output to stderr:\nsh: invalid number '--'\nsh: invalid number '--'\nsh: invalid number '--'\nsh: invalid number '--'\nE5113: Error while calling lua chunk: \nCMake Error at /builds/alpine/aports/community/neovim/src/neovim-0.11.1/cmake/RunTests.cmake:104 (message):\n  functional tests failed with error: 1\nninja: job failed: cd /builds/alpine/aports/community/neovim/src/neovim-0.11.1/build/test && /usr/bin/cmake -D TEST_TYPE=functional -D BUILD_DIR=/builds/alpine/aports/community/neovim/src/neovim-0.11.1/build -D CIRRUS_CI= -D CI_BUILD=OFF -D DEPS_INSTALL_DIR=/builds/alpine/aports/community/neovim/src/neovim-0.11.1/build/usr -D NVIM_PRG=/builds/alpine/aports/community/neovim/src/neovim-0.11.1/build/bin/nvim -D TEST_DIR=/builds/alpine/aports/community/neovim/src/neovim-0.11.1/test -D WORKING_DIR=/builds/alpine/aports/community/neovim/src/neovim-0.11.1 -P /builds/alpine/aports/community/neovim/src/neovim-0.11.1/cmake/RunTests.cmake\nninja: subcommand failed\n```\n\n### Steps to reproduce\n\n```sh\nbuild() {\n\tlocal cmakeoptions=\n\tcase \"$CARCH\" in\n\t\tppc64le | riscv64 | s390x | loongarch64) cmakeoptions=\"-DPREFER_LUA=ON\" ;;\n\tesac\n\n\t# DCI_BUILD: See https://github.com/neovim/neovim/issues/22932\n\tcmake -B build -G Ninja \\\n\t\t-DCMAKE_BUILD_TYPE=MinSizeRel \\\n\t\t-DCMAKE_INSTALL_PREFIX=/usr \\\n\t\t-DCMAKE_INSTALL_LIBDIR=lib \\\n\t\t-DENABLE_LTO=TRUE \\\n\t\t-DCMAKE_VERBOSE_MAKEFILE=TRUE \\\n\t\t-DCI_BUILD=OFF \\\n\t\t-DENABLE_TRANSLATIONS=ON \\\n\t\t$cmakeoptions\n\tcmake --build build\n}\n\ncheck() {\n\t# Required by the unit tests but not set on the Alpine GitLab CI.\n\texport USER=\"$(id -un)\"\n\n\t# Without this, the temp directory for the tests exceeds the sun_path\n\t# buffer in sockaddr_un, causing test failures due to path trunctation.\n\texport XDG_RUNTIME_DIR=/tmp\n\n\t# Needed to ensure that neovim finds the tree-parser grammars.\n\tln -Tfs /usr/lib/tree-sitter \"$builddir\"/runtime/parser\n\n\texport TEST_TIMEOUT=12000\n\n\tmsg \"Running unit tests\"\n\tcmake --build build --target unittest\n\n\t# The functional tests are known to fail on 32-bit arches.\n\t# See: https://github.com/neovim/neovim/issues/32230\n\tcase \"$CARCH\" in\n\tarm*|x86) return ;;\n\tesac\n\n\texport TEST_SKIP_FRAGILE=1\n\t# fails on x86_64\n\texport BUSTED_ARGS=\"--filter-out quitting.swapfile.dialog.on.startup\"\n\tmsg \"Running functional tests\"\n\tcmake --build build --target functionaltest\n}\n```\n\n### Expected behavior\n\ntest pass\n\n### Nvim version (nvim -v)\n\n0.11.1\n\n### Vim (not Nvim) behaves the same?\n\nn/a\n\n### Operating system/version\n\nAlpine Linux edge (aarch64)\n\n### Terminal name/version\n\ndont know. gitlab CI\n\n### $TERM environment variable\n\ndont know. gitlab CI\n\n### Installation\n\nhappens when building neovim package for alpine linux",
    "closed_at": "2025-05-08T14:00:23Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/66357?v=4",
        "events_url": "https://api.github.com/users/ncopa/events{/privacy}",
        "followers_url": "https://api.github.com/users/ncopa/followers",
        "following_url": "https://api.github.com/users/ncopa/following{/other_user}",
        "gists_url": "https://api.github.com/users/ncopa/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/ncopa",
        "id": 66357,
        "login": "ncopa",
        "node_id": "MDQ6VXNlcjY2MzU3",
        "organizations_url": "https://api.github.com/users/ncopa/orgs",
        "received_events_url": "https://api.github.com/users/ncopa/received_events",
        "repos_url": "https://api.github.com/users/ncopa/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/ncopa/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/ncopa/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/ncopa",
        "user_view_type": "public"
    },
    "comment_data": [
        {
            "author_association": "CONTRIBUTOR",
            "body": "this is a dupe of https://github.com/neovim/neovim/issues/31818",
            "created_at": "2025-05-08T14:00:23Z",
            "html_url": "https://github.com/neovim/neovim/issues/33908#issuecomment-2863181113",
            "id": 2863181113,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33908",
            "node_id": "IC_kwDOAPphoM6qqK05",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2863181113/reactions"
            },
            "updated_at": "2025-05-08T14:00:23Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2863181113",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/66357?v=4",
                "events_url": "https://api.github.com/users/ncopa/events{/privacy}",
                "followers_url": "https://api.github.com/users/ncopa/followers",
                "following_url": "https://api.github.com/users/ncopa/following{/other_user}",
                "gists_url": "https://api.github.com/users/ncopa/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ncopa",
                "id": 66357,
                "login": "ncopa",
                "node_id": "MDQ6VXNlcjY2MzU3",
                "organizations_url": "https://api.github.com/users/ncopa/orgs",
                "received_events_url": "https://api.github.com/users/ncopa/received_events",
                "repos_url": "https://api.github.com/users/ncopa/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ncopa/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ncopa/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ncopa",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 1,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/33908/comments",
    "created_at": "2025-05-08T11:15:45Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/33908/events",
    "html_url": "https://github.com/neovim/neovim/issues/33908",
    "id": 3048671953,
    "labels": [
        {
            "color": "c5def5",
            "default": false,
            "description": "",
            "id": 110418643,
            "name": "test",
            "node_id": "MDU6TGFiZWwxMTA0MTg2NDM=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/test"
        },
        {
            "color": "e6e6e6",
            "default": false,
            "description": "issues that are closed as duplicates of other issues",
            "id": 3221613764,
            "name": "closed:duplicate",
            "node_id": "MDU6TGFiZWwzMjIxNjEzNzY0",
            "url": "https://api.github.com/repos/neovim/neovim/labels/closed:duplicate"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/33908/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM61twrR",
    "number": 33908,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/33908/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "completed",
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/33908/timeline",
    "title": "functional test \"diff mode overlapped diff blocks will be merged\" fails on Alpine Linux aarch64",
    "type": null,
    "updated_at": "2025-05-08T22:23:16Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/33908",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/66357?v=4",
        "events_url": "https://api.github.com/users/ncopa/events{/privacy}",
        "followers_url": "https://api.github.com/users/ncopa/followers",
        "following_url": "https://api.github.com/users/ncopa/following{/other_user}",
        "gists_url": "https://api.github.com/users/ncopa/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/ncopa",
        "id": 66357,
        "login": "ncopa",
        "node_id": "MDQ6VXNlcjY2MzU3",
        "organizations_url": "https://api.github.com/users/ncopa/orgs",
        "received_events_url": "https://api.github.com/users/ncopa/received_events",
        "repos_url": "https://api.github.com/users/ncopa/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/ncopa/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/ncopa/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/ncopa",
        "user_view_type": "public"
    }
}