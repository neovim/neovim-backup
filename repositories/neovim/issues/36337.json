{
    "active_lock_reason": null,
    "assignee": {
        "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
        "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
        "followers_url": "https://api.github.com/users/glepnir/followers",
        "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
        "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/glepnir",
        "id": 41671631,
        "login": "glepnir",
        "node_id": "MDQ6VXNlcjQxNjcxNjMx",
        "organizations_url": "https://api.github.com/users/glepnir/orgs",
        "received_events_url": "https://api.github.com/users/glepnir/received_events",
        "repos_url": "https://api.github.com/users/glepnir/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/glepnir",
        "user_view_type": "public"
    },
    "assignees": [
        {
            "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
            "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
            "followers_url": "https://api.github.com/users/glepnir/followers",
            "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
            "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/glepnir",
            "id": 41671631,
            "login": "glepnir",
            "node_id": "MDQ6VXNlcjQxNjcxNjMx",
            "organizations_url": "https://api.github.com/users/glepnir/orgs",
            "received_events_url": "https://api.github.com/users/glepnir/received_events",
            "repos_url": "https://api.github.com/users/glepnir/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/glepnir",
            "user_view_type": "public"
        }
    ],
    "author_association": "CONTRIBUTOR",
    "body": "### Problem\n\nI still cannot create any working minimal repro. Let me collect what I can describe till now.\n\n```\n1 <?php\n2 array_intersect_key($x, nvim: .../src/nvim/grid.c:672: grid_put_linebuf: Assertion `0 <= row && row < grid->rows' failed.\n~                         ╭────────────────╮\n$\n~                         │ arrays:  Field │\n~                         ╰────────────────╯\n\n```\n\n```cpp\n#0  __pthread_kill_implementation (threadid=<optimized out>, signo=signo@entry=6, no_tid=no_tid@entry=0) at ./nptl/pthread_kill.c:44\n#1  0x00007fdb5e77e9ff in __pthread_kill_internal (threadid=<optimized out>, signo=6) at ./nptl/pthread_kill.c:89\n#2  0x00007fdb5e729cc2 in __GI_raise (sig=sig@entry=6) at ../sysdeps/posix/raise.c:26\n#3  0x00007fdb5e7124ac in __GI_abort () at ./stdlib/abort.c:73\n#4  0x00007fdb5e712420 in __assert_fail_base (fmt=<optimized out>, assertion=<optimized out>, file=<optimized out>, line=672, function=<optimized out>)\n    at ./assert/assert.c:118\n#5  0x0000557b20e72e7e in grid_put_linebuf (grid=0x557b21341880 <pum_grid>, row=4, coloff=0, col=1, endcol=18, clear_width=18, bg_attr=0, clear_attr=0, last_vcol=-1, \n    flags=0) at .../src/nvim/grid.c:672\n#6  0x0000557b20e72c3d in grid_line_flush () at .../src/nvim/grid.c:600\n#7  0x0000557b20f84165 in pum_redraw () at .../src/nvim/popupmenu.c:904\n#8  0x0000557b20f82676 in pum_display (array=0x557b4ace7b60, size=4, selected=0, array_changed=true, cmd_startcol=0)\n    at .../src/nvim/popupmenu.c:431\n#9  0x0000557b20e944cc in ins_compl_show_pum () at .../src/nvim/insexpand.c:1736\n#10 0x0000557b20e9eff4 in show_pum (prev_w_wrow=2, prev_w_leftcol=0) at .../src/nvim/insexpand.c:6363\n#11 0x0000557b20e97e86 in set_completion (startcol=24, list=0x557b4adeff30) at .../src/nvim/insexpand.c:3430\n#12 0x0000557b20e97f47 in f_complete (argvars=0x7ffc2c25f400, rettv=0x7ffc2c25f380, fptr=...) at .../src/nvim/insexpand.c:3456\n#13 0x0000557b20dde42a in call_internal_func (fname=0x557b4ae48310 \"complete\", argcount=2, argvars=0x7ffc2c25f400, rettv=0x7ffc2c25f380)\n    at .../src/nvim/eval/funcs.c:281\n#14 0x0000557b20e03aec in call_func (funcname=0x7fdb5e66d670 \"complete\", len=8, rettv=0x7ffc2c25f380, argcount_in=2, argvars_in=0x7ffc2c25f400, funcexe=0x7ffc2c25f3c0)\n    at .../src/nvim/eval/userfunc.c:1774\n--Type <RET> for more, q to quit, c to continue without paging-- c\n#15 0x0000557b20ecc84b in nlua_call (lstate=0x7fdb5e6c8380) at .../src/nvim/lua/executor.c:1216\n#16 0x0000557b21154336 in lj_BC_FUNCC ()\n#17 0x0000557b2113f711 in lua_pcall (L=0x7fdb5e6c8380, nargs=<optimized out>, nresults=0, errfunc=<optimized out>) at lj_api.c:1122\n#18 0x0000557b20ec981c in nlua_pcall (lstate=0x7fdb5e6c8380, nargs=0, nresults=0) at .../src/nvim/lua/executor.c:179\n#19 0x0000557b20eca205 in nlua_schedule_event (argv=0x7ffc2c25f688) at .../src/nvim/lua/executor.c:381\n#20 0x0000557b210213e9 in state_handle_k_event () at .../src/nvim/state.c:118\n#21 0x0000557b20dacbf5 in insert_handle_key (s=0x7ffc2c25f840) at .../src/nvim/edit.c:977\n#22 0x0000557b20dabed1 in insert_execute (state=0x7ffc2c25f840, key=-26365) at .../src/nvim/edit.c:751\n#23 0x0000557b2102137d in state_enter (s=0x7ffc2c25f840) at .../src/nvim/state.c:100\n#24 0x0000557b20dab26a in insert_enter (s=0x7ffc2c25f840) at .../src/nvim/edit.c:364\n#25 0x0000557b20dad4cf in edit (cmdchar=105, startln=false, count=1) at .../src/nvim/edit.c:1372\n#26 0x0000557b20f47370 in invoke_edit (cap=0x7ffc2c25fa20, repl=0, cmd=105, startln=0) at .../src/nvim/normal.c:6282\n#27 0x0000557b20f472c8 in nv_edit (cap=0x7ffc2c25fa20) at .../src/nvim/normal.c:6254\n#28 0x0000557b20f3b1f7 in normal_execute (state=0x7ffc2c25f9b0, key=105) at .../src/nvim/normal.c:1253\n#29 0x0000557b2102137d in state_enter (s=0x7ffc2c25f9b0) at .../src/nvim/state.c:100\n#30 0x0000557b20f39316 in normal_enter (cmdwin=false, noexmode=false) at .../src/nvim/normal.c:523\n#31 0x0000557b20edabc5 in main (argc=5, argv=0x7ffc2c25fda8) at .../src/nvim/main.c:656\n```\n\nThe above crash occurs with `pumborder=single`, `autocomplete` and `cpt` containing `o` (omnifunc) and when the LSP server (after typing `, ` after `$x`) suggests two results first, then adds two another results. The grid shown above looks for me like a failure at recalculation of the new menu size. \n\n```\n672       assert(0 <= row && row < grid->rows);\n(gdb) print grid->rows\n$1 = 4\n```\n\nNo crash with `:set pumborder=`:\n```\n┆1 <?php\n┆2 array_intersect_key($x, )\n~                          match    Keyword\n~                          throw    Keyword\n~                          array:   Field\n~                          arrays:  Field\n~\n```\n\ncc: @glepnir \n\n### Steps to reproduce\n\nNo repro at the moment. \n\n### Expected behavior\n\nNo crash\n\n### Nvim version (nvim -v)\n\nv0.12.0-dev-1501+g2407833ba1 \n\n### Vim (not Nvim) behaves the same?\n\nn/a\n\n### Operating system/version\n\nDebian Sid\n\n### Terminal name/version\n\nalacritty\n\n### $TERM environment variable\n\nalacritty\n\n### Installation\n\nfrom repo, ",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [
        {
            "author_association": "CONTRIBUTOR",
            "body": "Not yet minimal, still depends on Phpactor (php, composer executable), but allows reproduce:\n```lua\nlocal thisInitFile = debug.getinfo(1).source:sub(2)\nlocal cwd = vim.fs.dirname(thisInitFile)\nlocal appname = vim.env.NVIM_APPNAME or 'nvim'\n\nvim.env.XDG_CONFIG_HOME = cwd\nvim.env.XDG_DATA_HOME = vim.fs.joinpath(cwd, '.xdg', 'data')\nvim.env.XDG_STATE_HOME = vim.fs.joinpath(cwd, '.xdg', 'state')\nvim.env.XDG_CACHE_HOME = vim.fs.joinpath(cwd, '.xdg', 'cache')\nvim.fn.mkdir(vim.fs.joinpath(vim.env.XDG_CACHE_HOME, appname), 'p')\n\nvim.opt.packpath:prepend(vim.fs.joinpath(vim.fn.stdpath('data'), 'site'))\n\nlocal hooks = function (ev)\n  local name, kind = ev.data.spec.name, ev.data.kind\n\n  if name == 'phpactor' and (kind == 'install' or kind == 'update') then\n    vim.system({'composer', 'install'}, {cwd = ev.data.path})\n  end\nend\n\nvim.api.nvim_create_autocmd('PackChanged', {callback = hooks})\n\nvim.pack.add({\n  {src = 'https://github.com/przepompownia/phpactor', version = 'experimental'}\n})\n\nvim.lsp.config.phpactor = {\n  cmd = {'phpactor', 'language-server'},\n  filetypes = {'php'},\n  root_markers = {'.git', 'composer.json', '.phpactor.json', '.phpactor.yml'},\n  workspace_required = true,\n}\nvim.lsp.enable('phpactor', true)\nvim.api.nvim_create_autocmd('LspAttach', {\n  callback = function (ev)\n    local ns = vim.lsp.diagnostic.get_namespace(ev.data.client_id)\n    vim.diagnostic.enable(false, {ns_id = ns, bufnr = ev.buf})\n  end,\n})\n\nvim.keymap.set('n', 'i', function ()\n  vim.api.nvim_feedkeys(('i%s'):format(vim.keycode('<C-f>')), 'n', false)\nend)\n\nvim.o.completeopt = 'popup,menuone,noinsert,fuzzy'\nvim.o.autocomplete = true\nvim.opt.complete = 'o'\nvim.o.pumborder = 'rounded'\nvim.wo.number = true\n\nfunction _G.Indent()\n  return 0\nend\n\nlocal function init()\n  vim.api.nvim_buf_set_lines(0, 0, -1, true, {'<?php', 'array_intersect_key($x)'})\n  vim.api.nvim_buf_set_name(0, 'x.php')\n  vim.bo.filetype = 'php'\n  vim.bo.indentexpr = 'v:lua.Indent'\n  vim.api.nvim_feedkeys('G$', 'n', false)\nend\n\nvim.api.nvim_create_autocmd('UIEnter', {\n  once = true,\n  callback = init,\n})\n```\n\n- type `i, ` (space at the end)\n\n(edit: reduced `indentexpr`).",
            "created_at": "2025-10-27T01:01:35Z",
            "html_url": "https://github.com/neovim/neovim/issues/36337#issuecomment-3449122493",
            "id": 3449122493,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36337",
            "node_id": "IC_kwDOAPphoM7NlW69",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3449122493/reactions"
            },
            "updated_at": "2025-10-30T10:52:50Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3449122493",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11404453?v=4",
                "events_url": "https://api.github.com/users/przepompownia/events{/privacy}",
                "followers_url": "https://api.github.com/users/przepompownia/followers",
                "following_url": "https://api.github.com/users/przepompownia/following{/other_user}",
                "gists_url": "https://api.github.com/users/przepompownia/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/przepompownia",
                "id": 11404453,
                "login": "przepompownia",
                "node_id": "MDQ6VXNlcjExNDA0NDUz",
                "organizations_url": "https://api.github.com/users/przepompownia/orgs",
                "received_events_url": "https://api.github.com/users/przepompownia/received_events",
                "repos_url": "https://api.github.com/users/przepompownia/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/przepompownia/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/przepompownia/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/przepompownia",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "```log\n[DEBUG][2025-10-27 11:52:32] ...ilds/from-src-dev/share/nvim/runtime/lua/vim/lsp/log.lua:151\t\"rpc.receive\"\t{ id = 2, jsonrpc = \"2.0\", result = { isIncomplete = true, items = { { data = 0, insertText = \"array: \", insertTextFormat = 1, kind = 5, label = \"array: \", sortText = \"0064-array: \" }, { data = 1, insertText = \"arrays: \", insertTextFormat = 1, kind = 5, label = \"arrays: \", sortText = \"0064-arrays: \" } } } }\n[DEBUG][2025-10-27 11:52:32] ...ilds/from-src-dev/share/nvim/runtime/lua/vim/lsp/log.lua:151\t\"rpc.receive\"\t{ id = 3, jsonrpc = \"2.0\", result = { isIncomplete = true, items = { { data = 0, insertText = \"array: \", insertTextFormat = 1, kind = 5, label = \"array: \", sortText = \"0064-array: \" }, { data = 1, insertText = \"arrays: \", insertTextFormat = 1, kind = 5, label = \"arrays: \", sortText = \"0064-arrays: \" }, { data = 2, insertText = \"match ($1) {$0\\n}\", insertTextFormat = 2, kind = 14, label = \"match \", sortText = \"-255-match \" }, { data = 3, insertText = \"throw $1\", insertTextFormat = 2, kind = 14, label = \"throw \", sortText = \"-255-throw \" } } } }\n```\nI tried to simulate this behavior with\n```lua\nlocal function createServer(opts)\n  opts = opts or {}\n  local server = {}\n  server.messages = {}\n\n  function server.cmd(dispatchers)\n    local closing = false\n    local handlers = opts.handlers or {}\n    local srv = {}\n\n    function srv.request(method, params, callback)\n      table.insert(server.messages, {\n        method = method,\n        params = params,\n      })\n      local handler = handlers[method]\n      if handler then\n        handler(method, params, callback)\n      elseif method == 'initialize' then\n        callback(nil, {\n          capabilities = opts.capabilities or {},\n        })\n      elseif method == 'shutdown' then\n        callback(nil, nil)\n      end\n      local request_id = #server.messages\n      return true, request_id\n    end\n\n    function srv.notify(method, params)\n      table.insert(server.messages, {\n        method = method,\n        params = params,\n      })\n      if method == 'exit' then\n        dispatchers.on_exit(0, 15)\n      end\n    end\n\n    function srv.is_closing()\n      return closing\n    end\n\n    function srv.terminate()\n      closing = true\n    end\n\n    return srv\n  end\n\n  return server\nend\n\nlocal completionResultPhp = {\n  isIncomplete = true,\n  items = {\n    {\n      label = 'array:',\n      insertText = 'array:',\n      kind = vim.lsp.protocol.CompletionItemKind.Field,\n      insertTextFormat = vim.lsp.protocol.InsertTextFormat.PlainText,\n      sortText = '0064-array: ',\n    },\n    {\n      label = 'arrays:',\n      insertText = 'arrays:',\n      kind = vim.lsp.protocol.CompletionItemKind.Field,\n      insertTextFormat = vim.lsp.protocol.InsertTextFormat.PlainText,\n      sortText = '0064-arrays: ',\n    },\n    {\n      label = 'match',\n      insertText = 'match ($1) {$0\\n}',\n      kind = vim.lsp.protocol.CompletionItemKind.Keyword,\n      insertTextFormat = vim.lsp.protocol.InsertTextFormat.Snippet,\n      sortText = '-255-match ',\n    },\n    {\n      label = 'throw',\n      insertText = 'throw $1',\n      kind = vim.lsp.protocol.CompletionItemKind.Keyword,\n      insertTextFormat = vim.lsp.protocol.InsertTextFormat.Snippet,\n      sortText = '-255-throw ',\n    },\n  },\n}\n\nlocal i = 0\n\nlocal function createServerWithCompletionProvider(completionResult)\n  return createServer({\n    capabilities = {completionProvider = {}},\n    handlers = {\n      ['textDocument/completion'] = function (_, _, callback)\n        -- callback(nil, completionResult)\n        -- Cycle through partial results on each request\n        i = (i % 4) + 2\n        local partialResult = {\n          isIncomplete = true,\n          items = {unpack(completionResult.items, 1, i)}\n        }\n        local result = partialResult\n        vim.defer_fn(function ()\n          callback(nil, result)\n        end, math.floor(math.random(300, 400)))\n      end,\n    },\n  })\nend\n\nlocal function startClient(name, completionResult)\n  vim.lsp.start({\n    name = name,\n    cmd = createServerWithCompletionProvider(completionResult).cmd,\n  })\nend\n\nvim.keymap.set('n', 'i', function ()\n  assert('' ~= vim.opt.indentexpr:get())\n  vim.api.nvim_feedkeys(('i%s'):format(vim.keycode('<C-f>')), 'n', false)\nend)\nvim.fn.complete = vim.schedule_wrap(vim.fn.complete)\n\nvim.o.completeopt = 'popup,menuone,noinsert,fuzzy'\nvim.o.autocomplete = true\nvim.opt.complete = 'o'\nvim.o.pumborder = 'rounded'\nvim.wo.number = true\n\nvim.api.nvim_create_autocmd('UIEnter', {\n  callback = function ()\n    vim.api.nvim_buf_set_lines(0, 0, -1, true, {'<?php', 'array_intersect_key($x)'})\n    vim.api.nvim_buf_set_name(0, 'x.php')\n    vim.bo.filetype = 'php'\n    vim.cmd.normal 'G$'\n    startClient('fake-phpactor', completionResultPhp)\n  end\n})\n```\nto get rid of the dependency on Phpactor, but something is still missing.",
            "created_at": "2025-10-27T11:05:29Z",
            "html_url": "https://github.com/neovim/neovim/issues/36337#issuecomment-3450727044",
            "id": 3450727044,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36337",
            "node_id": "IC_kwDOAPphoM7NreqE",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3450727044/reactions"
            },
            "updated_at": "2025-10-27T11:05:29Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3450727044",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11404453?v=4",
                "events_url": "https://api.github.com/users/przepompownia/events{/privacy}",
                "followers_url": "https://api.github.com/users/przepompownia/followers",
                "following_url": "https://api.github.com/users/przepompownia/following{/other_user}",
                "gists_url": "https://api.github.com/users/przepompownia/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/przepompownia",
                "id": 11404453,
                "login": "przepompownia",
                "node_id": "MDQ6VXNlcjExNDA0NDUz",
                "organizations_url": "https://api.github.com/users/przepompownia/orgs",
                "received_events_url": "https://api.github.com/users/przepompownia/received_events",
                "repos_url": "https://api.github.com/users/przepompownia/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/przepompownia/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/przepompownia/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/przepompownia",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Don’t worry, I can try setting up a PHP environment myself… though it’s been many years since I last worked with it.",
            "created_at": "2025-10-29T11:26:41Z",
            "html_url": "https://github.com/neovim/neovim/issues/36337#issuecomment-3461028576",
            "id": 3461028576,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36337",
            "node_id": "IC_kwDOAPphoM7OSxrg",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 1,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3461028576/reactions"
            },
            "updated_at": "2025-10-29T11:26:41Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3461028576",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "emm it doesn't crash for me  what's value of `lines` and `columns` and seems like I missing `throw` `match` keyword completion .. maybe still missing something ?\n\n<img width=\"1460\" height=\"530\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/219d13a7-b630-4d7a-91d6-af9b3f6f2f8e\" />",
            "created_at": "2025-10-30T06:33:39Z",
            "html_url": "https://github.com/neovim/neovim/issues/36337#issuecomment-3466316288",
            "id": 3466316288,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36337",
            "node_id": "IC_kwDOAPphoM7Om8oA",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3466316288/reactions"
            },
            "updated_at": "2025-10-30T08:05:50Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3466316288",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "OK, it looks like you used the master branch of Phpactor, because the response is not spammed by `match` and `throw`. Please switch to `experimental` on my fork or try to use my repro directly in some new directory to get also those not necessary useful results (but useful to show this issue). ",
            "created_at": "2025-10-30T10:05:00Z",
            "html_url": "https://github.com/neovim/neovim/issues/36337#issuecomment-3467107073",
            "id": 3467107073,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36337",
            "node_id": "IC_kwDOAPphoM7Op9sB",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3467107073/reactions"
            },
            "updated_at": "2025-10-30T10:11:40Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3467107073",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11404453?v=4",
                "events_url": "https://api.github.com/users/przepompownia/events{/privacy}",
                "followers_url": "https://api.github.com/users/przepompownia/followers",
                "following_url": "https://api.github.com/users/przepompownia/following{/other_user}",
                "gists_url": "https://api.github.com/users/przepompownia/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/przepompownia",
                "id": 11404453,
                "login": "przepompownia",
                "node_id": "MDQ6VXNlcjExNDA0NDUz",
                "organizations_url": "https://api.github.com/users/przepompownia/orgs",
                "received_events_url": "https://api.github.com/users/przepompownia/received_events",
                "repos_url": "https://api.github.com/users/przepompownia/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/przepompownia/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/przepompownia/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/przepompownia",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "still worsk fine  for me \n\n<img width=\"1270\" height=\"456\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/1be4515c-4dfc-4737-8c0a-4665761b329e\" />",
            "created_at": "2025-10-30T10:14:43Z",
            "html_url": "https://github.com/neovim/neovim/issues/36337#issuecomment-3467154892",
            "id": 3467154892,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36337",
            "node_id": "IC_kwDOAPphoM7OqJXM",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3467154892/reactions"
            },
            "updated_at": "2025-10-30T10:14:43Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3467154892",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Hmm, I noticed that I haven't used `--clean` (first wondering if you use it too - darkblue bg is rather not default)! I cannot reproduce it with --clean. \n\nAlthough I have empty `~/.config/nvim` I need to inspect other possible reasons and maybe add it here.",
            "created_at": "2025-10-30T10:31:05Z",
            "html_url": "https://github.com/neovim/neovim/issues/36337#issuecomment-3467236974",
            "id": 3467236974,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36337",
            "node_id": "IC_kwDOAPphoM7OqdZu",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3467236974/reactions"
            },
            "updated_at": "2025-10-30T10:31:28Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3467236974",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11404453?v=4",
                "events_url": "https://api.github.com/users/przepompownia/events{/privacy}",
                "followers_url": "https://api.github.com/users/przepompownia/followers",
                "following_url": "https://api.github.com/users/przepompownia/following{/other_user}",
                "gists_url": "https://api.github.com/users/przepompownia/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/przepompownia",
                "id": 11404453,
                "login": "przepompownia",
                "node_id": "MDQ6VXNlcjExNDA0NDUz",
                "organizations_url": "https://api.github.com/users/przepompownia/orgs",
                "received_events_url": "https://api.github.com/users/przepompownia/received_events",
                "repos_url": "https://api.github.com/users/przepompownia/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/przepompownia/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/przepompownia/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/przepompownia",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> (first wondering if you use it too - darkblue bg is rather not default)!\n\nemm when use `nvim --clean -u your_snippet.lua` it will use terminal background color  and I test it on a clean remote server ",
            "created_at": "2025-10-30T10:32:34Z",
            "html_url": "https://github.com/neovim/neovim/issues/36337#issuecomment-3467244638",
            "id": 3467244638,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36337",
            "node_id": "IC_kwDOAPphoM7OqfRe",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3467244638/reactions"
            },
            "updated_at": "2025-10-30T10:39:57Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3467244638",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Now I'm a bit confused (I got it with --clean): \n\n[![asciicast](https://asciinema.org/a/hmMuIWjRGuDipO0Or7pENOu2p.svg)](https://asciinema.org/a/hmMuIWjRGuDipO0Or7pENOu2p)\n\nOne thing: do you type the comma and space \"enough\" quickly? Nvim does not crash for me when the period between typing both characters is \"long\".",
            "created_at": "2025-10-30T10:44:00Z",
            "html_url": "https://github.com/neovim/neovim/issues/36337#issuecomment-3467296279",
            "id": 3467296279,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36337",
            "node_id": "IC_kwDOAPphoM7Oqr4X",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3467296279/reactions"
            },
            "updated_at": "2025-10-30T10:46:51Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3467296279",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11404453?v=4",
                "events_url": "https://api.github.com/users/przepompownia/events{/privacy}",
                "followers_url": "https://api.github.com/users/przepompownia/followers",
                "following_url": "https://api.github.com/users/przepompownia/following{/other_user}",
                "gists_url": "https://api.github.com/users/przepompownia/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/przepompownia",
                "id": 11404453,
                "login": "przepompownia",
                "node_id": "MDQ6VXNlcjExNDA0NDUz",
                "organizations_url": "https://api.github.com/users/przepompownia/orgs",
                "received_events_url": "https://api.github.com/users/przepompownia/received_events",
                "repos_url": "https://api.github.com/users/przepompownia/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/przepompownia/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/przepompownia/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/przepompownia",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "In https://github.com/neovim/neovim/issues/36337#issuecomment-3449122493 I replaced the default `indentexpr` value by the trivial function that returns zero and still get the failure.\n",
            "created_at": "2025-10-30T10:56:42Z",
            "html_url": "https://github.com/neovim/neovim/issues/36337#issuecomment-3467357498",
            "id": 3467357498,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36337",
            "node_id": "IC_kwDOAPphoM7Oq606",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3467357498/reactions"
            },
            "updated_at": "2025-10-30T10:56:42Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3467357498",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11404453?v=4",
                "events_url": "https://api.github.com/users/przepompownia/events{/privacy}",
                "followers_url": "https://api.github.com/users/przepompownia/followers",
                "following_url": "https://api.github.com/users/przepompownia/following{/other_user}",
                "gists_url": "https://api.github.com/users/przepompownia/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/przepompownia",
                "id": 11404453,
                "login": "przepompownia",
                "node_id": "MDQ6VXNlcjExNDA0NDUz",
                "organizations_url": "https://api.github.com/users/przepompownia/orgs",
                "received_events_url": "https://api.github.com/users/przepompownia/received_events",
                "repos_url": "https://api.github.com/users/przepompownia/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/przepompownia/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/przepompownia/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/przepompownia",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> One thing: do you type the comma and space \"enough\" quickly? Nvim does not crash for me when the period between typing both characters is \"long\".\n\nOkay now reproduced with **enuough quickly**",
            "created_at": "2025-10-30T11:29:15Z",
            "html_url": "https://github.com/neovim/neovim/issues/36337#issuecomment-3467530746",
            "id": 3467530746,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36337",
            "node_id": "IC_kwDOAPphoM7OrlH6",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 1,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3467530746/reactions"
            },
            "updated_at": "2025-10-30T11:30:14Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3467530746",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 11,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/36337/comments",
    "created_at": "2025-10-26T19:01:03Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/36337/events",
    "html_url": "https://github.com/neovim/neovim/issues/36337",
    "id": 3554327341,
    "issue_dependencies_summary": {
        "blocked_by": 0,
        "blocking": 0,
        "total_blocked_by": 0,
        "total_blocking": 0
    },
    "labels": [
        {
            "color": "0E8A16",
            "default": false,
            "description": "issue contains a stacktrace/ASAN log",
            "id": 435854079,
            "name": "has:backtrace",
            "node_id": "MDU6TGFiZWw0MzU4NTQwNzk=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/has:backtrace"
        },
        {
            "color": "F9D0C4",
            "default": false,
            "description": "issue reporting a crash or segfault",
            "id": 435854234,
            "name": "bug-crash",
            "node_id": "MDU6TGFiZWw0MzU4NTQyMzQ=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug-crash"
        },
        {
            "color": "C5DEF5",
            "default": false,
            "description": "Nvim built-in (omni)completion",
            "id": 3214348835,
            "name": "completion",
            "node_id": "MDU6TGFiZWwzMjE0MzQ4ODM1",
            "url": "https://api.github.com/repos/neovim/neovim/labels/completion"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/36337/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM7T2rst",
    "number": 36337,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/36337/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/36337/timeline",
    "title": "pumborder: grid_put_linebuf: Assertion `0 <= row && row < grid->rows' failed",
    "type": {
        "color": "red",
        "created_at": "2024-01-25T10:10:19Z",
        "description": "An unexpected problem or behavior",
        "id": 597163,
        "is_enabled": true,
        "name": "Bug",
        "node_id": "IT_kwDOAGK_Pc4ACRyr",
        "updated_at": "2024-07-26T10:12:30Z"
    },
    "updated_at": "2025-10-30T11:30:14Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/36337",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/11404453?v=4",
        "events_url": "https://api.github.com/users/przepompownia/events{/privacy}",
        "followers_url": "https://api.github.com/users/przepompownia/followers",
        "following_url": "https://api.github.com/users/przepompownia/following{/other_user}",
        "gists_url": "https://api.github.com/users/przepompownia/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/przepompownia",
        "id": 11404453,
        "login": "przepompownia",
        "node_id": "MDQ6VXNlcjExNDA0NDUz",
        "organizations_url": "https://api.github.com/users/przepompownia/orgs",
        "received_events_url": "https://api.github.com/users/przepompownia/received_events",
        "repos_url": "https://api.github.com/users/przepompownia/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/przepompownia/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/przepompownia/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/przepompownia",
        "user_view_type": "public"
    }
}