{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "body": "### Problem\n\nHello,\n\nWhen saving terminals inside sessions, they get restored with their \"original\" working directory. There's no way to \"update\" the directory once a term is created. To be clear, I'm not referring to `cd` - it changes the directory within the shell, but vim \"can't see it\" (to the extent of updating that buffer's `cwd`), and that's exactly the point of this issue.\n\nAdditionally, an API for getting the working directory would also be useful. Currently, one has to parse the buffer's URI. My concern with this solution is mostly cross compatibility across Unix and windows (though might not be a big deal in practice...)\n\nRelated issues:\n- https://github.com/neovim/neovim/issues/3294\n- https://github.com/neovim/neovim/issues/3278\n\nTo be 100% clear with the scenario I'm talking about:\n1. `nvim --clean`\n2. `:terminal`\n3. `:mksession`\n4. `cd foo/bar` inside terminal\n5. `mksession!` - Oh no, the terminal does not get saved with `foo/bar` as its directory!\n\n### Expected behavior\n\n- `cwd` (?) could be a buffer local variable for terminals\n- Assigning it to a value would somehow update the buffer's `cwd` (and its URI (?), so it can be restored)\n- Would allow creating an autocmd to update the `cwd` with `TermRequest` + `OSC 7`\n\nAlternatively, an API function could be exposed (creating functions just for that sounds awkward, but I'm not familiar with the terminal internals to make a competent proposal)",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [
        {
            "author_association": "NONE",
            "body": "I remembered seeing an escape sequence that notified the terminal emulator of the current working directory, but it looks like it is iTerm2-specific ([iTerm2 escape codes](https://iterm2.com/documentation-escape-codes.html), search for \"Set current directory\")\n\n```\nOSC 1337 ; CurrentDir=[current directory] ST\n```",
            "created_at": "2026-01-05T17:51:00Z",
            "html_url": "https://github.com/neovim/neovim/issues/37246#issuecomment-3711472436",
            "id": 3711472436,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/37246",
            "node_id": "IC_kwDOAPphoM7dOJM0",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3711472436/reactions"
            },
            "updated_at": "2026-01-05T17:51:00Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3711472436",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/116777388?v=4",
                "events_url": "https://api.github.com/users/eamonburns/events{/privacy}",
                "followers_url": "https://api.github.com/users/eamonburns/followers",
                "following_url": "https://api.github.com/users/eamonburns/following{/other_user}",
                "gists_url": "https://api.github.com/users/eamonburns/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/eamonburns",
                "id": 116777388,
                "login": "eamonburns",
                "node_id": "U_kgDOBvXhrA",
                "organizations_url": "https://api.github.com/users/eamonburns/orgs",
                "received_events_url": "https://api.github.com/users/eamonburns/received_events",
                "repos_url": "https://api.github.com/users/eamonburns/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/eamonburns/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/eamonburns/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/eamonburns",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "Related: https://github.com/neovim/neovim/issues/2252\n\nIt looks like there is a more wide-spread escape sequence, OSC 7, that Neovim supports.\n\nSee `:help terminal-events`, sepecifically `:help terminal-osc7`",
            "created_at": "2026-01-05T18:52:27Z",
            "html_url": "https://github.com/neovim/neovim/issues/37246#issuecomment-3711686421",
            "id": 3711686421,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/37246",
            "node_id": "IC_kwDOAPphoM7dO9cV",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3711686421/reactions"
            },
            "updated_at": "2026-01-05T18:52:27Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3711686421",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/116777388?v=4",
                "events_url": "https://api.github.com/users/eamonburns/events{/privacy}",
                "followers_url": "https://api.github.com/users/eamonburns/followers",
                "following_url": "https://api.github.com/users/eamonburns/following{/other_user}",
                "gists_url": "https://api.github.com/users/eamonburns/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/eamonburns",
                "id": 116777388,
                "login": "eamonburns",
                "node_id": "U_kgDOBvXhrA",
                "organizations_url": "https://api.github.com/users/eamonburns/orgs",
                "received_events_url": "https://api.github.com/users/eamonburns/received_events",
                "repos_url": "https://api.github.com/users/eamonburns/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/eamonburns/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/eamonburns/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/eamonburns",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 2,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/37246/comments",
    "created_at": "2026-01-05T04:35:06Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/37246/events",
    "html_url": "https://github.com/neovim/neovim/issues/37246",
    "id": 3780139996,
    "issue_dependencies_summary": {
        "blocked_by": 0,
        "blocking": 0,
        "total_blocked_by": 0,
        "total_blocking": 0
    },
    "labels": [
        {
            "color": "c5def5",
            "default": false,
            "description": "libnvim, Nvim RPC API",
            "id": 103819671,
            "name": "api",
            "node_id": "MDU6TGFiZWwxMDM4MTk2NzE=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/api"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "built-in :terminal or :shell",
            "id": 212696822,
            "name": "terminal",
            "node_id": "MDU6TGFiZWwyMTI2OTY4MjI=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/terminal"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/37246/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM7hUFvc",
    "number": 37246,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 1,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 1,
        "url": "https://api.github.com/repos/neovim/neovim/issues/37246/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/37246/timeline",
    "title": "API for getting and updating the `cwd` of a terminal buffer",
    "type": {
        "color": "blue",
        "created_at": "2024-01-25T10:10:19Z",
        "description": "A request, idea, or new functionality",
        "id": 597167,
        "is_enabled": true,
        "name": "Enhancement",
        "node_id": "IT_kwDOAGK_Pc4ACRyv",
        "updated_at": "2024-07-26T10:12:30Z"
    },
    "updated_at": "2026-01-05T18:52:27Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/37246",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/84649544?v=4",
        "events_url": "https://api.github.com/users/igorlfs/events{/privacy}",
        "followers_url": "https://api.github.com/users/igorlfs/followers",
        "following_url": "https://api.github.com/users/igorlfs/following{/other_user}",
        "gists_url": "https://api.github.com/users/igorlfs/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/igorlfs",
        "id": 84649544,
        "login": "igorlfs",
        "node_id": "MDQ6VXNlcjg0NjQ5NTQ0",
        "organizations_url": "https://api.github.com/users/igorlfs/orgs",
        "received_events_url": "https://api.github.com/users/igorlfs/received_events",
        "repos_url": "https://api.github.com/users/igorlfs/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/igorlfs/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/igorlfs/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/igorlfs",
        "user_view_type": "public"
    }
}