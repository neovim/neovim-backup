{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\n\nBuilding from source (tried `v0.11.0` and master 95a255a548401e1fbcca2934ceed040305046d11) on macOS builds and it gets stuck in last phases, specifically \"Generating doc/tags\".\n\n```\nApple clang version 17.0.0 (clang-1700.0.13.3)\nTarget: arm64-apple-darwin24.4.0\nThread model: posix\nInstalledDir: /Library/Developer/CommandLineTools/usr/bin\n```\n\nOn a Linux machine I was able to build it without problems (that's why I specified macOS in the issue title)\n\n### Steps to reproduce\n\nI was building it from source using spack (just for convenience)\n\n### Expected behavior\n\nbuild should finish without problems ðŸ˜„ \n\n### Nvim version (nvim -v)\n\n95a255a548401e1fbcca2934ceed040305046d11\n\n### Vim (not Nvim) behaves the same?\n\nnot applicable\n\n### Operating system/version\n\nmacOS 15.4 Sequoia\n\n### Terminal name/version\n\niTerm\n\n### $TERM environment variable\n\nxterm-256color\n\n### Installation\n\nfrom source (using spack)",
    "closed_at": "2025-04-17T08:30:21Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/9337627?v=4",
        "events_url": "https://api.github.com/users/albestro/events{/privacy}",
        "followers_url": "https://api.github.com/users/albestro/followers",
        "following_url": "https://api.github.com/users/albestro/following{/other_user}",
        "gists_url": "https://api.github.com/users/albestro/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/albestro",
        "id": 9337627,
        "login": "albestro",
        "node_id": "MDQ6VXNlcjkzMzc2Mjc=",
        "organizations_url": "https://api.github.com/users/albestro/orgs",
        "received_events_url": "https://api.github.com/users/albestro/received_events",
        "repos_url": "https://api.github.com/users/albestro/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/albestro/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/albestro/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/albestro",
        "user_view_type": "public"
    },
    "comment_data": [
        {
            "author_association": "NONE",
            "body": "I tried running the `nvim` executable from within the build folder, somehow replicating what the build step does, and it gets stuck. This means that the produced executable does not work (even just `nvim -u NONE`).\n\nThis issue/PR look similar/related:\n- https://github.com/neovim/neovim/issues/31664\n- https://github.com/neovim/neovim/pull/29548",
            "created_at": "2025-04-17T06:59:15Z",
            "html_url": "https://github.com/neovim/neovim/issues/33506#issuecomment-2811984360",
            "id": 2811984360,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33506",
            "node_id": "IC_kwDOAPphoM6nm3no",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2811984360/reactions"
            },
            "updated_at": "2025-04-17T07:01:39Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2811984360",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9337627?v=4",
                "events_url": "https://api.github.com/users/albestro/events{/privacy}",
                "followers_url": "https://api.github.com/users/albestro/followers",
                "following_url": "https://api.github.com/users/albestro/following{/other_user}",
                "gists_url": "https://api.github.com/users/albestro/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/albestro",
                "id": 9337627,
                "login": "albestro",
                "node_id": "MDQ6VXNlcjkzMzc2Mjc=",
                "organizations_url": "https://api.github.com/users/albestro/orgs",
                "received_events_url": "https://api.github.com/users/albestro/received_events",
                "repos_url": "https://api.github.com/users/albestro/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/albestro/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/albestro/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/albestro",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "From a quick check with `lldb` it seems it is not exactly stuck, but it is always inside `lj_ffh_string_sub` which should be related to `LuaJIT` (probably [this](https://github.com/LuaJIT/LuaJIT/blame/e76bb50d44702f601ec5dd167b03b475ed53860c/src/lib_string.c#L78-L84))\n\n```\n* thread #1, queue = 'com.apple.main-thread', stop reason = signal SIGSTOP\n  * frame #0: 0x00000001000b771c nvim`lj_lib_optint(L=<unavailable>, narg=<unavailable>, def=<unavailable>) at lj_lib.c:259:3 [opt]\n    frame #1: 0x00000001000bc934 nvim`lj_ffh_string_sub(L=0x00000001009a0380) at lib_string.c:83:22 [opt]\n    frame #2: 0x000000010005ddb8 nvim`lj_fff_fallback + 48\n    frame #3: 0x00000001002cddc8 nvim`nlua_module_preloader + 336\n    frame #4: 0x000000010005c66c nvim`lj_BC_FUNCC + 44\n    frame #5: 0x00000001000c1854 nvim`lj_cf_package_require(L=0x00000001009a0380) at lib_package.c:464:3 [opt]\n    frame #6: 0x000000010005c66c nvim`lj_BC_FUNCC + 44\n    frame #7: 0x0000000100074a20 nvim`lua_pcall(L=<unavailable>, nargs=<unavailable>, nresults=<unavailable>, errfunc=<unavailable>) at lj_api.c:1151:12 [opt]\n    frame #8: 0x00000001002cd370 nvim`nlua_init_packages + 796\n    frame #9: 0x00000001002c74a8 nvim`nlua_init + 1092\n    frame #10: 0x00000001002d8618 nvim`main + 5524\n    frame #11: 0x000000019782eb4c dyld`start + 6000\n```\n\nIt might easily be a LuaJIT problem, so I'm probably going to open an issue there too.",
            "created_at": "2025-04-17T07:14:54Z",
            "html_url": "https://github.com/neovim/neovim/issues/33506#issuecomment-2812014306",
            "id": 2812014306,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33506",
            "node_id": "IC_kwDOAPphoM6nm-7i",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2812014306/reactions"
            },
            "updated_at": "2025-04-17T07:14:54Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2812014306",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9337627?v=4",
                "events_url": "https://api.github.com/users/albestro/events{/privacy}",
                "followers_url": "https://api.github.com/users/albestro/followers",
                "following_url": "https://api.github.com/users/albestro/following{/other_user}",
                "gists_url": "https://api.github.com/users/albestro/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/albestro",
                "id": 9337627,
                "login": "albestro",
                "node_id": "MDQ6VXNlcjkzMzc2Mjc=",
                "organizations_url": "https://api.github.com/users/albestro/orgs",
                "received_events_url": "https://api.github.com/users/albestro/received_events",
                "repos_url": "https://api.github.com/users/albestro/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/albestro/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/albestro/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/albestro",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "First try without spack: just `git clone` the repo and then do `make`.",
            "created_at": "2025-04-17T07:30:02Z",
            "html_url": "https://github.com/neovim/neovim/issues/33506#issuecomment-2812042732",
            "id": 2812042732,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33506",
            "node_id": "IC_kwDOAPphoM6nnF3s",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2812042732/reactions"
            },
            "updated_at": "2025-04-17T07:30:02Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2812042732",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "@clason I had already started another try before you wrote.\n\nLooking at commits in LuaJIT implementations (mainly https://github.com/LuaJIT/LuaJIT and https://github.com/openresty/luajit2) I found out that very recently they introduced fixes for ARM64/macOS/clang.\n\nI gave a try to the latest commit of `luajit-openresty` (namely [ba1626](https://github.com/openresty/luajit2/tree/ba1626825f981b58065f96010739c62209b54c42) from 2 days ago), and linked `neovim` to it.\n\nAnd it works! ðŸ¾",
            "created_at": "2025-04-17T08:16:02Z",
            "html_url": "https://github.com/neovim/neovim/issues/33506#issuecomment-2812141484",
            "id": 2812141484,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33506",
            "node_id": "IC_kwDOAPphoM6nnd-s",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2812141484/reactions"
            },
            "updated_at": "2025-04-17T08:16:02Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2812141484",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9337627?v=4",
                "events_url": "https://api.github.com/users/albestro/events{/privacy}",
                "followers_url": "https://api.github.com/users/albestro/followers",
                "following_url": "https://api.github.com/users/albestro/following{/other_user}",
                "gists_url": "https://api.github.com/users/albestro/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/albestro",
                "id": 9337627,
                "login": "albestro",
                "node_id": "MDQ6VXNlcjkzMzc2Mjc=",
                "organizations_url": "https://api.github.com/users/albestro/orgs",
                "received_events_url": "https://api.github.com/users/albestro/received_events",
                "repos_url": "https://api.github.com/users/albestro/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/albestro/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/albestro/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/albestro",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": ">  I found out that very recently they introduced fixes for ARM64/macOS/clang.\n\nYes, and we deliberately do not use the latest commit of LuaJIT but pin to the one before. Hence my request to try using _our_ build scripts, which pin to known-good versions of our dependencies.",
            "created_at": "2025-04-17T08:19:00Z",
            "html_url": "https://github.com/neovim/neovim/issues/33506#issuecomment-2812148079",
            "id": 2812148079,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33506",
            "node_id": "IC_kwDOAPphoM6nnflv",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2812148079/reactions"
            },
            "updated_at": "2025-04-17T08:19:00Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2812148079",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "Yep, I was not trying to avoid your suggestion ðŸ˜„ I was going to check that too.\n\n\nAnd actually it works too!\n\n```\n...\n[84/112] Performing download step (download, verify and extract) for 'luajit'\n-- Downloading...\n   dst='/Users/ialberto/workspace/repos/neovim.git/.deps/build/downloads/luajit/51d4c26ec7805d77bfc3470fdf99b73c4ef2faec.tar.gz'\n   timeout='none'\n   inactivity timeout='none'\n-- Using src='https://github.com/luajit/luajit/archive/51d4c26ec7805d77bfc3470fdf99b73c4ef2faec.tar.gz'\n-- verifying file...\n       file='/Users/ialberto/workspace/repos/neovim.git/.deps/build/downloads/luajit/51d4c26ec7805d77bfc3470fdf99b73c4ef2faec.tar.gz'\n-- Downloading... done\n-- extracting...\n     src='/Users/ialberto/workspace/repos/neovim.git/.deps/build/downloads/luajit/51d4c26ec7805d77bfc3470fdf99b73c4ef2faec.tar.gz'\n     dst='/Users/ialberto/workspace/repos/neovim.git/.deps/build/src/luajit'\n-- extracting... [tar xfz]\n-- extracting... [analysis]\n-- extracting... [rename]\n-- extracting... [clean up]\n-- extracting... done\n...\n==== Building LuaJIT 2.1 ====\n...\n==== Successfully installed LuaJIT 2.1.1744317938 to /Users/ialberto/workspace/repos/neovim.git/.deps/usr ====\n...\n-- Found Luajit: /Users/ialberto/workspace/repos/neovim.git/.deps/usr/lib/libluajit-5.1.a\n...\n-- Using NVIM_VERSION: v0.12.0-dev-157+g95a255a548\n```",
            "created_at": "2025-04-17T08:29:44Z",
            "html_url": "https://github.com/neovim/neovim/issues/33506#issuecomment-2812171372",
            "id": 2812171372,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33506",
            "node_id": "IC_kwDOAPphoM6nnlRs",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2812171372/reactions"
            },
            "updated_at": "2025-04-17T08:29:44Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2812171372",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9337627?v=4",
                "events_url": "https://api.github.com/users/albestro/events{/privacy}",
                "followers_url": "https://api.github.com/users/albestro/followers",
                "following_url": "https://api.github.com/users/albestro/following{/other_user}",
                "gists_url": "https://api.github.com/users/albestro/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/albestro",
                "id": 9337627,
                "login": "albestro",
                "node_id": "MDQ6VXNlcjkzMzc2Mjc=",
                "organizations_url": "https://api.github.com/users/albestro/orgs",
                "received_events_url": "https://api.github.com/users/albestro/received_events",
                "repos_url": "https://api.github.com/users/albestro/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/albestro/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/albestro/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/albestro",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "I think that at this point the issue can be closed. I hope it is worth at least for future reference.\n\nThanks @clason!",
            "created_at": "2025-04-17T08:30:21Z",
            "html_url": "https://github.com/neovim/neovim/issues/33506#issuecomment-2812172717",
            "id": 2812172717,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33506",
            "node_id": "IC_kwDOAPphoM6nnlmt",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2812172717/reactions"
            },
            "updated_at": "2025-04-17T08:30:21Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2812172717",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9337627?v=4",
                "events_url": "https://api.github.com/users/albestro/events{/privacy}",
                "followers_url": "https://api.github.com/users/albestro/followers",
                "following_url": "https://api.github.com/users/albestro/following{/other_user}",
                "gists_url": "https://api.github.com/users/albestro/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/albestro",
                "id": 9337627,
                "login": "albestro",
                "node_id": "MDQ6VXNlcjkzMzc2Mjc=",
                "organizations_url": "https://api.github.com/users/albestro/orgs",
                "received_events_url": "https://api.github.com/users/albestro/received_events",
                "repos_url": "https://api.github.com/users/albestro/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/albestro/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/albestro/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/albestro",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 7,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/33506/comments",
    "created_at": "2025-04-17T06:56:33Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/33506/events",
    "html_url": "https://github.com/neovim/neovim/issues/33506",
    "id": 3001611373,
    "labels": [
        {
            "color": "c5def5",
            "default": false,
            "description": "building and installing Neovim using the provided scripts",
            "id": 84723321,
            "name": "build",
            "node_id": "MDU6TGFiZWw4NDcyMzMyMQ==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/build"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/33506/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM6y6PRt",
    "number": 33506,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/33506/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "completed",
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/33506/timeline",
    "title": "Build stuck at \"Generating doc/tags\" (on macOS)",
    "type": {
        "color": "red",
        "created_at": "2024-01-25T10:10:19Z",
        "description": "An unexpected problem or behavior",
        "id": 597163,
        "is_enabled": true,
        "name": "Bug",
        "node_id": "IT_kwDOAGK_Pc4ACRyr",
        "updated_at": "2024-07-26T10:12:30Z"
    },
    "updated_at": "2025-04-17T14:15:01Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/33506",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/9337627?v=4",
        "events_url": "https://api.github.com/users/albestro/events{/privacy}",
        "followers_url": "https://api.github.com/users/albestro/followers",
        "following_url": "https://api.github.com/users/albestro/following{/other_user}",
        "gists_url": "https://api.github.com/users/albestro/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/albestro",
        "id": 9337627,
        "login": "albestro",
        "node_id": "MDQ6VXNlcjkzMzc2Mjc=",
        "organizations_url": "https://api.github.com/users/albestro/orgs",
        "received_events_url": "https://api.github.com/users/albestro/received_events",
        "repos_url": "https://api.github.com/users/albestro/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/albestro/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/albestro/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/albestro",
        "user_view_type": "public"
    }
}