{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\r\n\r\nWhen switching between buffers in a window using `<C-6>`, the `topline` of the buffers is not preserved and the `lnum` position is reset to the middle of the window. This creates an uncomfortable experience when working with multiple buffers.\r\n\r\nThis issue is present in neovim 0.9.4 and the latest nightly release version. It happens when using a custom `init.lua`, with `-u NORC`, and with `-u NONE`. The code mentioned in a [fandom wiki page](https://vim.fandom.com/wiki/Avoid_scrolling_when_switch_buffers) about this issue doesn't seem to work on the latest nightly release. I wrote [some Lua code](https://0x0.st/Hgkc.lua) myself but that doesn't work reliably either. I posted [a thread on the Neovim Discourse forum](https://neovim.discourse.group/t/restore-view-and-position-of-window-when-switching-buffers/) but received no response.\r\n\r\n### Steps to reproduce\r\n\r\n1. Open two buffers in a window with at least as many lines as the maximum number of lines that can displayed at a time in a window\r\n2. Scroll down in the 1st buffer at one of the last lines in a window (say 47th line if 52 lines are being shown in a window at a time)\r\n3. Switch to the 2nd buffer.\r\n4. Switch back to the 1st buffer\r\n5. The `topline` is not preserved and `lnum` position is moved to the middle of the window\r\n6. The same behavior is observed if a custom position is taken in the 2nd buffer.\r\n\r\n### Expected behavior\r\n\r\nThe `topline` value should be preserved and the position of `lnum` in a buffer should be the same where it was left when switching back to it in a window. \r\n\r\nI hope this expected behavior is seen as sensible enough to land a fix in the neovim repository itself rather than fixing it with Lua code although any kind of reliable solution is welcome.\r\n\r\n### Neovim version (nvim -v)\r\n\r\nv0.9.4 and the latest nightly from GitHub\r\n\r\n### Vim (not Nvim) behaves the same?\r\n\r\nbehaves similarly, vim 9.0.2167, the `topline` of only of one the buffers seems to be preserved\r\n\r\n### Operating system/version\r\n\r\nArch Linux\r\n\r\n### Terminal name/version\r\n\r\nfoot version 1.16.2 +pgo +ime +graphemes -assertions\r\n\r\n### $TERM environment variable\r\n\r\nfoot-extra\r\n\r\n### Installation\r\n\r\npacman package manager on Arch Linux, the latest nightly was grabbed from GitHub releases",
    "closed_at": "2025-12-15T06:45:12Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
        "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
        "followers_url": "https://api.github.com/users/zeertzjq/followers",
        "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
        "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/zeertzjq",
        "id": 35768171,
        "login": "zeertzjq",
        "node_id": "MDQ6VXNlcjM1NzY4MTcx",
        "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
        "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
        "repos_url": "https://api.github.com/users/zeertzjq/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/zeertzjq",
        "user_view_type": "public"
    },
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "Does `:set jumpoptions=view` improve anything?",
            "created_at": "2024-01-02T23:56:01Z",
            "html_url": "https://github.com/neovim/neovim/issues/26828#issuecomment-1874699123",
            "id": 1874699123,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/26828",
            "node_id": "IC_kwDOAPphoM5vvaNz",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1874699123/reactions"
            },
            "updated_at": "2024-01-02T23:56:01Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1874699123",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "It does! The `topline` of buffers is preserved when switching between alternate buffers using `<C-6>`. However, the `topline` is still not preserved when switching to other buffers in the same window and the `lnum` is moved to the center of the window.",
            "created_at": "2024-01-03T04:38:11Z",
            "html_url": "https://github.com/neovim/neovim/issues/26828#issuecomment-1874840552",
            "id": 1874840552,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/26828",
            "node_id": "IC_kwDOAPphoM5vv8vo",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 3,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 3,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1874840552/reactions"
            },
            "updated_at": "2024-01-03T04:38:11Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1874840552",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/79408161?v=4",
                "events_url": "https://api.github.com/users/ayushnix/events{/privacy}",
                "followers_url": "https://api.github.com/users/ayushnix/followers",
                "following_url": "https://api.github.com/users/ayushnix/following{/other_user}",
                "gists_url": "https://api.github.com/users/ayushnix/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ayushnix",
                "id": 79408161,
                "login": "ayushnix",
                "node_id": "MDQ6VXNlcjc5NDA4MTYx",
                "organizations_url": "https://api.github.com/users/ayushnix/orgs",
                "received_events_url": "https://api.github.com/users/ayushnix/received_events",
                "repos_url": "https://api.github.com/users/ayushnix/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ayushnix/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ayushnix/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ayushnix",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "Found a/the correspoding issue on vim's github [here](https://github.com/vim/vim/issues/7954) . It refers to some workaround [here](https://vim.fandom.com/wiki/Avoid_scrolling_when_switch_buffers) which I will try since I am using bufferline to work with buffers as if they were tabs. Another way could for me otherwise be to reconsider using vim tabs in place of buffers. I understood that the viewport position is a property of the window, not the buffer. ",
            "created_at": "2024-05-11T15:04:51Z",
            "html_url": "https://github.com/neovim/neovim/issues/26828#issuecomment-2105926910",
            "id": 2105926910,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/26828",
            "node_id": "IC_kwDOAPphoM59heT-",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2105926910/reactions"
            },
            "updated_at": "2024-05-11T15:04:51Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2105926910",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59018120?v=4",
                "events_url": "https://api.github.com/users/tipa40/events{/privacy}",
                "followers_url": "https://api.github.com/users/tipa40/followers",
                "following_url": "https://api.github.com/users/tipa40/following{/other_user}",
                "gists_url": "https://api.github.com/users/tipa40/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/tipa40",
                "id": 59018120,
                "login": "tipa40",
                "node_id": "MDQ6VXNlcjU5MDE4MTIw",
                "organizations_url": "https://api.github.com/users/tipa40/orgs",
                "received_events_url": "https://api.github.com/users/tipa40/received_events",
                "repos_url": "https://api.github.com/users/tipa40/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/tipa40/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/tipa40/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/tipa40",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "It would be great to have a builtin option to fix this behavior when switching buffers via any method (`:bn`, `:bp`, `<C-6>`, etc.). For me, @justinmk's solution of `:set jumpoptions=view` only fixes the issue for switching with `<C-6>`, but not the other buffer switching methods. Is there any possibility of getting this scheduled on the roadmap?\n\nEdit: The https://vim.fandom.com/wiki/Avoid_scrolling_when_switch_buffers workaround seems to work for me after a few quick tests, though the comments note some possible issues with that approach. Regardless, it would be great to get a similar solution added to neovim as a builtin option.",
            "created_at": "2025-12-13T20:24:11Z",
            "html_url": "https://github.com/neovim/neovim/issues/26828#issuecomment-3649777471",
            "id": 3649777471,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/26828",
            "node_id": "IC_kwDOAPphoM7Ziy8_",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3649777471/reactions"
            },
            "updated_at": "2025-12-15T00:08:09Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3649777471",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/19476938?v=4",
                "events_url": "https://api.github.com/users/jtherrmann/events{/privacy}",
                "followers_url": "https://api.github.com/users/jtherrmann/followers",
                "following_url": "https://api.github.com/users/jtherrmann/following{/other_user}",
                "gists_url": "https://api.github.com/users/jtherrmann/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/jtherrmann",
                "id": 19476938,
                "login": "jtherrmann",
                "node_id": "MDQ6VXNlcjE5NDc2OTM4",
                "organizations_url": "https://api.github.com/users/jtherrmann/orgs",
                "received_events_url": "https://api.github.com/users/jtherrmann/received_events",
                "repos_url": "https://api.github.com/users/jtherrmann/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/jtherrmann/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jtherrmann/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/jtherrmann",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> `:set jumpoptions=view` only fixes the issue for switching with `<C-6>`, but not `:bn`, `:bp`\n\nSounds like a bug that needs to be fixed. \n\n> Is there any possibility of getting this scheduled on the roadmap?\n\nWaiting for a PR.",
            "created_at": "2025-12-15T00:07:55Z",
            "html_url": "https://github.com/neovim/neovim/issues/26828#issuecomment-3652412106",
            "id": 3652412106,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/26828",
            "node_id": "IC_kwDOAPphoM7Zs2LK",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 1,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3652412106/reactions"
            },
            "updated_at": "2025-12-15T00:07:55Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3652412106",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "@justinmk @zeertzjq Ah, I did not realize that the list of commands respected by `jumpoptions` had to be explicitly specified. I haven't yet tested the changes from https://github.com/neovim/neovim/pull/36969 (waiting for the next nightly build), but it looks like only `bprevious` and `bnext` were added. This would not include `:buffer <buffer_name>`, which is the main way I switch buffers. Can we reopen this issue until that's resolved?\n\nEdit: Apologies, I think I was just reading the test case that was added with that PR. I'll test this with the next nightly build and confirm that `:buffer` works.",
            "created_at": "2025-12-15T20:16:01Z",
            "html_url": "https://github.com/neovim/neovim/issues/26828#issuecomment-3657414448",
            "id": 3657414448,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/26828",
            "node_id": "IC_kwDOAPphoM7Z_7cw",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3657414448/reactions"
            },
            "updated_at": "2025-12-15T20:19:16Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3657414448",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/19476938?v=4",
                "events_url": "https://api.github.com/users/jtherrmann/events{/privacy}",
                "followers_url": "https://api.github.com/users/jtherrmann/followers",
                "following_url": "https://api.github.com/users/jtherrmann/following{/other_user}",
                "gists_url": "https://api.github.com/users/jtherrmann/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/jtherrmann",
                "id": 19476938,
                "login": "jtherrmann",
                "node_id": "MDQ6VXNlcjE5NDc2OTM4",
                "organizations_url": "https://api.github.com/users/jtherrmann/orgs",
                "received_events_url": "https://api.github.com/users/jtherrmann/received_events",
                "repos_url": "https://api.github.com/users/jtherrmann/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/jtherrmann/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jtherrmann/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/jtherrmann",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 6,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/26828/comments",
    "created_at": "2023-12-31T19:13:55Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/26828/events",
    "html_url": "https://github.com/neovim/neovim/issues/26828",
    "id": 2061148346,
    "issue_dependencies_summary": {
        "blocked_by": 0,
        "blocking": 0,
        "total_blocked_by": 0,
        "total_blocking": 0
    },
    "labels": [
        {
            "color": "F9D0C4",
            "default": false,
            "description": "wrong behavior inherited from vim",
            "id": 154310492,
            "name": "bug-vim",
            "node_id": "MDU6TGFiZWwxNTQzMTA0OTI=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug-vim"
        },
        {
            "color": "C5DEF5",
            "default": false,
            "description": "",
            "id": 6993871329,
            "name": "jumps-navigation",
            "node_id": "LA_kwDOAPphoM8AAAABoN4B4Q",
            "url": "https://api.github.com/repos/neovim/neovim/labels/jumps-navigation"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/26828/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 762,
        "created_at": "2014-05-10T20:43:04Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
            "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
            "followers_url": "https://api.github.com/users/justinmk/followers",
            "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/justinmk",
            "id": 1359421,
            "login": "justinmk",
            "node_id": "MDQ6VXNlcjEzNTk0MjE=",
            "organizations_url": "https://api.github.com/users/justinmk/orgs",
            "received_events_url": "https://api.github.com/users/justinmk/received_events",
            "repos_url": "https://api.github.com/users/justinmk/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/justinmk",
            "user_view_type": "public"
        },
        "description": "Low priority items. We plan to work on this but don't have a target date.",
        "due_on": null,
        "html_url": "https://github.com/neovim/neovim/milestone/6",
        "id": 655037,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/6/labels",
        "node_id": "MDk6TWlsZXN0b25lNjU1MDM3",
        "number": 6,
        "open_issues": 641,
        "state": "open",
        "title": "backlog",
        "updated_at": "2025-12-15T19:01:37Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/6"
    },
    "node_id": "I_kwDOAPphoM562qC6",
    "number": 26828,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/26828/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "completed",
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/26828/timeline",
    "title": "window view topline is not preserved when switching buffers via `:bnext`, `:bprevious` (with `jumpoptions=view`)",
    "type": {
        "color": "red",
        "created_at": "2024-01-25T10:10:19Z",
        "description": "An unexpected problem or behavior",
        "id": 597163,
        "is_enabled": true,
        "name": "Bug",
        "node_id": "IT_kwDOAGK_Pc4ACRyr",
        "updated_at": "2024-07-26T10:12:30Z"
    },
    "updated_at": "2025-12-15T20:19:16Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/26828",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/79408161?v=4",
        "events_url": "https://api.github.com/users/ayushnix/events{/privacy}",
        "followers_url": "https://api.github.com/users/ayushnix/followers",
        "following_url": "https://api.github.com/users/ayushnix/following{/other_user}",
        "gists_url": "https://api.github.com/users/ayushnix/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/ayushnix",
        "id": 79408161,
        "login": "ayushnix",
        "node_id": "MDQ6VXNlcjc5NDA4MTYx",
        "organizations_url": "https://api.github.com/users/ayushnix/orgs",
        "received_events_url": "https://api.github.com/users/ayushnix/received_events",
        "repos_url": "https://api.github.com/users/ayushnix/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/ayushnix/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/ayushnix/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/ayushnix",
        "user_view_type": "public"
    }
}