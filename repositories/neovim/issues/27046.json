{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "body": "### Problem\r\n\r\nFrom few days I get crashes when updating the buffer e.g. undo. \r\n\r\n```cpp\r\n#0  __pthread_kill_implementation (threadid=<optimized out>, signo=signo@entry=6, no_tid=no_tid@entry=0) at ./nptl/pthread_kill.c:44\r\n#1  0x00007fea9eef315f in __pthread_kill_internal (signo=6, threadid=<optimized out>) at ./nptl/pthread_kill.c:78\r\n#2  0x00007fea9eea5472 in __GI_raise (sig=sig@entry=6) at ../sysdeps/posix/raise.c:26\r\n#3  0x00007fea9ee8f4b2 in __GI_abort () at ./stdlib/abort.c:79\r\n#4  0x00007fea9ee8f3d5 in __assert_fail_base (fmt=0x7fea9f003dc8 \"%s%s%s:%u: %s%sAssertion `%s' failed.\\n%n\", assertion=assertion@entry=0x5565767fe960 \"buf->b_signcols.count[width - 1] >= 0\",\r\n    file=file@entry=0x5565767fe748 \".../src/nvim/decoration.c\", line=line@entry=848, function=function@entry=0x55657679f310 <__PRETTY_FUNCTION__.1.lto_priv.8> \"buf_signcols_count_range\") at ./assert/assert.c:92\r\n#5  0x00007fea9ee9e3a2 in __assert_fail (assertion=assertion@entry=0x5565767fe960 \"buf->b_signcols.count[width - 1] >= 0\", file=file@entry=0x5565767fe748 \".../src/nvim/decoration.c\", line=line@entry=848,\r\n    function=function@entry=0x55657679f310 <__PRETTY_FUNCTION__.1.lto_priv.8> \"buf_signcols_count_range\") at ./assert/assert.c:101\r\n#6  0x00005565764923be in buf_signcols_count_range (buf=0x55657a5cb7f0, row1=20, row2=20, add=-1, clear=kFalse) at .../src/nvim/decoration.c:848\r\n#7  0x000055657648f9c0 in buf_remove_decor_sh (buf=buf@entry=0x55657a5cb7f0, row1=row1@entry=20, row2=row2@entry=20, sh=sh@entry=0x556578824ac0) at .../src/nvim/decoration.c:258\r\n#8  0x000055657648fa46 in buf_decor_remove (buf=0x55657a5cb7f0, row1=20, row2=20, decor=..., free=true) at .../src/nvim/decoration.c:227\r\n#9  0x0000556576516e98 in extmark_del (buf=buf@entry=0x55657a5cb7f0, itr=itr@entry=0x7fff47f5d040, key=..., restore=restore@entry=true) at .../src/nvim/extmark.c:153\r\n#10 0x0000556576517558 in extmark_clear (buf=0x55657a5cb7f0, ns_id=53, l_row=0, l_col=<optimized out>, u_row=2147483646, u_col=2147483647) at .../src/nvim/extmark.c:189\r\n#11 0x0000556576444f04 in nvim_buf_clear_namespace (buffer=<optimized out>, ns_id=53, line_start=0, line_end=2147483647, err=0x7fff47f5d190) at .../src/nvim/api/extmark.c:973\r\n#12 0x0000556576429c02 in nlua_api_nvim_buf_clear_namespace (lstate=0x7fea8a4ac5f0) at .../build/src/nvim/auto/lua_api_c_bindings.generated.c:2922\r\n#13 0x0000556576726ed6 in lj_BC_FUNCC ()\r\n#14 0x0000556576727d32 in lj_ff_coroutine_resume ()\r\n#15 0x00005565767132a5 in lua_pcall (L=L@entry=0x7fea9ee47380, nargs=nargs@entry=0, nresults=nresults@entry=0, errfunc=errfunc@entry=-2) at lj_api.c:1121\r\n#16 0x000055657654d077 in nlua_pcall (lstate=lstate@entry=0x7fea9ee47380, nargs=nargs@entry=0, nresults=nresults@entry=0) at .../src/nvim/lua/executor.c:172\r\n#17 0x0000556576550cbc in nlua_schedule_event (argv=<optimized out>) at .../src/nvim/lua/executor.c:367\r\n#18 0x0000556576639898 in state_handle_k_event () at .../src/nvim/state.c:119\r\n#19 0x00005565765a1c99 in nv_event (cap=0x7fff47f5d460) at .../src/nvim/normal.c:6613\r\n#20 0x000055657659d9d1 in normal_execute (state=0x7fff47f5d3f0, key=<optimized out>) at .../src/nvim/normal.c:1227\r\n#21 0x000055657663973b in state_enter (s=0x7fff47f5d3f0) at .../src/nvim/state.c:101\r\n#22 0x000055657659735d in normal_enter (cmdwin=<optimized out>, noexmode=<optimized out>) at .../src/nvim/normal.c:516\r\n#23 0x00005565765601bd in main (argc=2, argv=<optimized out>) at .../src/nvim/main.c:651\r\n```\r\n\r\n@luukvbaal it looks like from https://github.com/neovim/neovim/commit/967c7abde3c6fa3210a4920a5848a54dc913d851#diff-6e7593afe2030cd8628b9a5a900e49accd4a9d7f3ff4b73ee022f06b4bd0f237R848\r\n\r\n### Steps to reproduce\r\n\r\nAt the moment I have no idea how to reproduce this bug. I use statuscol nvim on branch 0.10 with \r\n```lua\r\nlocal builtin = require('statuscol.builtin')\r\nrequire('statuscol').setup({\r\n  relculright = true,\r\n  segments = {\r\n    {\r\n      text = {builtin.foldfunc},\r\n      condition = {true},\r\n      click = 'v:lua.ScFa',\r\n    },\r\n    {\r\n      sign = {namespace = {'gitsigns*'}, maxwidth = 1, colwidth = 1, auto = true},\r\n      click = 'v:lua.ScSa',\r\n    },\r\n    {\r\n      sign = {namespace = {'arctgx.diagnostic.signs/diagnostic/signs'}, maxwidth = 2, colwidth = 2, auto = true},\r\n      click = 'v:lua.ScSa'\r\n    },\r\n    {\r\n      sign = {name = {'Dap.*'}, maxwidth = 2, colwidth = 2, auto = true},\r\n      click = 'v:lua.ScLa'\r\n    },\r\n    {\r\n      sign = {name = {'.*'}, maxwidth = 1, colwidth = 1, auto = true},\r\n      click = 'v:lua.ScSa'\r\n    },\r\n    {text = {builtin.lnumfunc, ' '}, click = 'v:lua.ScLa',},\r\n  },\r\n  ft_ignore = {\r\n    'NvimTree',\r\n  },\r\n})\r\n```\r\n\r\n### Expected behavior\r\n\r\nNo crash\r\n\r\n### Neovim version (nvim -v)\r\n\r\nNVIM v0.10.0-dev-2104+gfd2ed024c\r\n\r\n### Vim (not Nvim) behaves the same?\r\n\r\n-\r\n\r\n### Operating system/version\r\n\r\nDebian Sid\r\n\r\n### Terminal name/version\r\n\r\nalacritty 0.13.1\r\n\r\n### $TERM environment variable\r\n\r\nalacritty\r\n\r\n### Installation\r\n\r\nfrom repo",
    "closed_at": "2024-02-23T12:37:12Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
        "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
        "followers_url": "https://api.github.com/users/bfredl/followers",
        "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
        "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/bfredl",
        "id": 1363104,
        "login": "bfredl",
        "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
        "organizations_url": "https://api.github.com/users/bfredl/orgs",
        "received_events_url": "https://api.github.com/users/bfredl/received_events",
        "repos_url": "https://api.github.com/users/bfredl/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/bfredl",
        "user_view_type": "public"
    },
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "Possibly a side effect of #26898 ",
            "created_at": "2024-01-16T16:57:15Z",
            "html_url": "https://github.com/neovim/neovim/issues/27046#issuecomment-1894141687",
            "id": 1894141687,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27046",
            "node_id": "IC_kwDOAPphoM5w5k73",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 1,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1894141687/reactions"
            },
            "updated_at": "2024-01-16T16:57:15Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1894141687",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1009873?v=4",
                "events_url": "https://api.github.com/users/wookayin/events{/privacy}",
                "followers_url": "https://api.github.com/users/wookayin/followers",
                "following_url": "https://api.github.com/users/wookayin/following{/other_user}",
                "gists_url": "https://api.github.com/users/wookayin/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/wookayin",
                "id": 1009873,
                "login": "wookayin",
                "node_id": "MDQ6VXNlcjEwMDk4NzM=",
                "organizations_url": "https://api.github.com/users/wookayin/orgs",
                "received_events_url": "https://api.github.com/users/wookayin/received_events",
                "repos_url": "https://api.github.com/users/wookayin/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/wookayin/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/wookayin/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/wookayin",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Config for diagnostics include unicode chars:\r\n```lua\r\nvim.diagnostic.config({\r\n  virtual_text = false,\r\n  underline = false,\r\n  float = {\r\n    border = 'rounded',\r\n  },\r\n  signs = {\r\n    text = {\r\n      [vim.diagnostic.severity.ERROR] = '',\r\n      [vim.diagnostic.severity.WARN] = '⚠',\r\n      [vim.diagnostic.severity.INFO] = '',\r\n      [vim.diagnostic.severity.HINT] = '󰌶',\r\n    },\r\n  },\r\n})\r\n\r\nlocal ns = vim.api.nvim_create_namespace('arctgx.diagnostic.signs')\r\nlocal origSignsHandler = vim.diagnostic.handlers.signs\r\n\r\n-- from :help diagnostic-handlers-example\r\nvim.diagnostic.handlers.signs = {\r\n  show = function (_, bufnr, _, opts)\r\n    local diagnostics = vim.diagnostic.get(bufnr)\r\n\r\n    local maxSeverityPerLine = {}\r\n    for _, d in pairs(diagnostics) do\r\n      local m = maxSeverityPerLine[d.lnum]\r\n      if not m or d.severity < m.severity then\r\n        maxSeverityPerLine[d.lnum] = d\r\n      end\r\n    end\r\n\r\n    local filteredDiagnostics = vim.tbl_values(maxSeverityPerLine)\r\n    origSignsHandler.show(ns, bufnr, filteredDiagnostics, opts)\r\n  end,\r\n  hide = function (_, bufnr)\r\n    if vim.api.nvim_buf_is_valid(bufnr) then\r\n      origSignsHandler.hide(ns, bufnr)\r\n    end\r\n  end,\r\n}\r\n```",
            "created_at": "2024-01-16T16:57:24Z",
            "html_url": "https://github.com/neovim/neovim/issues/27046#issuecomment-1894141929",
            "id": 1894141929,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27046",
            "node_id": "IC_kwDOAPphoM5w5k_p",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1894141929/reactions"
            },
            "updated_at": "2024-01-16T16:57:24Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1894141929",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11404453?v=4",
                "events_url": "https://api.github.com/users/przepompownia/events{/privacy}",
                "followers_url": "https://api.github.com/users/przepompownia/followers",
                "following_url": "https://api.github.com/users/przepompownia/following{/other_user}",
                "gists_url": "https://api.github.com/users/przepompownia/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/przepompownia",
                "id": 11404453,
                "login": "przepompownia",
                "node_id": "MDQ6VXNlcjExNDA0NDUz",
                "organizations_url": "https://api.github.com/users/przepompownia/orgs",
                "received_events_url": "https://api.github.com/users/przepompownia/received_events",
                "repos_url": "https://api.github.com/users/przepompownia/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/przepompownia/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/przepompownia/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/przepompownia",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "> Possibly a side effect of #26898\r\n\r\nyes, I quoted it above too.",
            "created_at": "2024-01-16T16:58:14Z",
            "html_url": "https://github.com/neovim/neovim/issues/27046#issuecomment-1894143311",
            "id": 1894143311,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27046",
            "node_id": "IC_kwDOAPphoM5w5lVP",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1894143311/reactions"
            },
            "updated_at": "2024-01-16T16:58:14Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1894143311",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11404453?v=4",
                "events_url": "https://api.github.com/users/przepompownia/events{/privacy}",
                "followers_url": "https://api.github.com/users/przepompownia/followers",
                "following_url": "https://api.github.com/users/przepompownia/following{/other_user}",
                "gists_url": "https://api.github.com/users/przepompownia/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/przepompownia",
                "id": 11404453,
                "login": "przepompownia",
                "node_id": "MDQ6VXNlcjExNDA0NDUz",
                "organizations_url": "https://api.github.com/users/przepompownia/orgs",
                "received_events_url": "https://api.github.com/users/przepompownia/received_events",
                "repos_url": "https://api.github.com/users/przepompownia/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/przepompownia/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/przepompownia/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/przepompownia",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "A repro would be nice. The undo/redo part is tricky but I haven't hit the assert myself. \r\n\r\nI think it is worthwhile to keep trying to make the approach in #26898 work. The fact that `b_signcols.count` is decremented below 0 indicates an error in keeping track of the number of lines with a certain number of signs. In the meantime we could merge #27047, which might resolve the problem.\r\n\r\nDiagnostics/statuscol configs are irrelevant, this is just about keeping track of the placed signs.",
            "created_at": "2024-01-16T17:09:34Z",
            "html_url": "https://github.com/neovim/neovim/issues/27046#issuecomment-1894163343",
            "id": 1894163343,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27046",
            "node_id": "IC_kwDOAPphoM5w5qOP",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1894163343/reactions"
            },
            "updated_at": "2024-01-20T14:48:42Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1894163343",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I'll try to catch it in my free time. I don't get this failure very often and sometimes it's not easy to remember what edition has been made right before crash :wink: ",
            "created_at": "2024-01-16T17:21:52Z",
            "html_url": "https://github.com/neovim/neovim/issues/27046#issuecomment-1894183366",
            "id": 1894183366,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27046",
            "node_id": "IC_kwDOAPphoM5w5vHG",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1894183366/reactions"
            },
            "updated_at": "2024-01-16T17:21:52Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1894183366",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11404453?v=4",
                "events_url": "https://api.github.com/users/przepompownia/events{/privacy}",
                "followers_url": "https://api.github.com/users/przepompownia/followers",
                "following_url": "https://api.github.com/users/przepompownia/following{/other_user}",
                "gists_url": "https://api.github.com/users/przepompownia/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/przepompownia",
                "id": 11404453,
                "login": "przepompownia",
                "node_id": "MDQ6VXNlcjExNDA0NDUz",
                "organizations_url": "https://api.github.com/users/przepompownia/orgs",
                "received_events_url": "https://api.github.com/users/przepompownia/received_events",
                "repos_url": "https://api.github.com/users/przepompownia/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/przepompownia/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/przepompownia/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/przepompownia",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "Same issue here. With Noice installed, it happens every time I do `:S<crashes immediately>`",
            "created_at": "2024-01-17T06:39:53Z",
            "html_url": "https://github.com/neovim/neovim/issues/27046#issuecomment-1895088351",
            "id": 1895088351,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27046",
            "node_id": "IC_kwDOAPphoM5w9MDf",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1895088351/reactions"
            },
            "updated_at": "2024-01-17T06:39:53Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1895088351",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/21299126?v=4",
                "events_url": "https://api.github.com/users/b0o/events{/privacy}",
                "followers_url": "https://api.github.com/users/b0o/followers",
                "following_url": "https://api.github.com/users/b0o/following{/other_user}",
                "gists_url": "https://api.github.com/users/b0o/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/b0o",
                "id": 21299126,
                "login": "b0o",
                "node_id": "MDQ6VXNlcjIxMjk5MTI2",
                "organizations_url": "https://api.github.com/users/b0o/orgs",
                "received_events_url": "https://api.github.com/users/b0o/received_events",
                "repos_url": "https://api.github.com/users/b0o/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/b0o/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/b0o/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/b0o",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I haven't had any such crash with Noice so far and cannot reproduce it that way. Maybe configuration matters here. ",
            "created_at": "2024-01-17T10:15:48Z",
            "html_url": "https://github.com/neovim/neovim/issues/27046#issuecomment-1895500130",
            "id": 1895500130,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27046",
            "node_id": "IC_kwDOAPphoM5w-wli",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1895500130/reactions"
            },
            "updated_at": "2024-01-17T10:15:48Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1895500130",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11404453?v=4",
                "events_url": "https://api.github.com/users/przepompownia/events{/privacy}",
                "followers_url": "https://api.github.com/users/przepompownia/followers",
                "following_url": "https://api.github.com/users/przepompownia/following{/other_user}",
                "gists_url": "https://api.github.com/users/przepompownia/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/przepompownia",
                "id": 11404453,
                "login": "przepompownia",
                "node_id": "MDQ6VXNlcjExNDA0NDUz",
                "organizations_url": "https://api.github.com/users/przepompownia/orgs",
                "received_events_url": "https://api.github.com/users/przepompownia/received_events",
                "repos_url": "https://api.github.com/users/przepompownia/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/przepompownia/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/przepompownia/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/przepompownia",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "```lua\r\nlocal function setupNoice()\r\n  require('noice').setup({\r\n    messages = {\r\n      view = 'mini',\r\n      view_search = false,\r\n      view_error = 'mini',\r\n      view_warn = 'mini',\r\n    },\r\n    notify = {\r\n      enabled = true,\r\n      view = 'mini',\r\n    },\r\n    lsp = {\r\n      override = {},\r\n      signature = {\r\n        enabled = false,\r\n        auto_open = {\r\n          enabled = true,\r\n          trigger = true,\r\n          luasnip = true,\r\n          throttle = 50,\r\n        },\r\n        view = nil, \r\n      hover = {\r\n        enabled = false,\r\n        view = nil,\r\n        opts = {},\r\n      },\r\n    },\r\n    views = {\r\n      mini = {\r\n        timeout = 5000,\r\n      },\r\n    },\r\n    presets = {\r\n      lsp_doc_border = true,\r\n    },\r\n  })\r\nend\r\n```",
            "created_at": "2024-01-17T10:18:18Z",
            "html_url": "https://github.com/neovim/neovim/issues/27046#issuecomment-1895504143",
            "id": 1895504143,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27046",
            "node_id": "IC_kwDOAPphoM5w-xkP",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1895504143/reactions"
            },
            "updated_at": "2024-01-17T10:18:18Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1895504143",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11404453?v=4",
                "events_url": "https://api.github.com/users/przepompownia/events{/privacy}",
                "followers_url": "https://api.github.com/users/przepompownia/followers",
                "following_url": "https://api.github.com/users/przepompownia/following{/other_user}",
                "gists_url": "https://api.github.com/users/przepompownia/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/przepompownia",
                "id": 11404453,
                "login": "przepompownia",
                "node_id": "MDQ6VXNlcjExNDA0NDUz",
                "organizations_url": "https://api.github.com/users/przepompownia/orgs",
                "received_events_url": "https://api.github.com/users/przepompownia/received_events",
                "repos_url": "https://api.github.com/users/przepompownia/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/przepompownia/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/przepompownia/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/przepompownia",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> Same issue here. With Noice installed, it happens every time I do `:S<crashes immediately>`\r\n\r\nIs this still true? If so, are you able to produce a minimal config that shows the issue? I've tried to reproduce with noice but couldn't.\r\n\r\nAnd @przepompownia have you hit the assert after #27047?",
            "created_at": "2024-01-20T14:50:58Z",
            "html_url": "https://github.com/neovim/neovim/issues/27046#issuecomment-1902119100",
            "id": 1902119100,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27046",
            "node_id": "IC_kwDOAPphoM5xYAi8",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1902119100/reactions"
            },
            "updated_at": "2024-01-20T14:50:58Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1902119100",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Since #27047 I haven't this crash anymore. It's good moment to close this issue. Thanks @luukvbaal ",
            "created_at": "2024-01-20T15:49:55Z",
            "html_url": "https://github.com/neovim/neovim/issues/27046#issuecomment-1902141514",
            "id": 1902141514,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27046",
            "node_id": "IC_kwDOAPphoM5xYGBK",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1902141514/reactions"
            },
            "updated_at": "2024-01-20T15:49:55Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1902141514",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11404453?v=4",
                "events_url": "https://api.github.com/users/przepompownia/events{/privacy}",
                "followers_url": "https://api.github.com/users/przepompownia/followers",
                "following_url": "https://api.github.com/users/przepompownia/following{/other_user}",
                "gists_url": "https://api.github.com/users/przepompownia/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/przepompownia",
                "id": 11404453,
                "login": "przepompownia",
                "node_id": "MDQ6VXNlcjExNDA0NDUz",
                "organizations_url": "https://api.github.com/users/przepompownia/orgs",
                "received_events_url": "https://api.github.com/users/przepompownia/received_events",
                "repos_url": "https://api.github.com/users/przepompownia/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/przepompownia/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/przepompownia/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/przepompownia",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I was just hit by the same crash (same stacktrace) again (when doing undo). NVIM v0.10.0-dev-2139+g0c7ad223f; the equivalent base commit is fa9a85ae4 (the latest master which includes #27047).",
            "created_at": "2024-01-20T23:25:01Z",
            "html_url": "https://github.com/neovim/neovim/issues/27046#issuecomment-1902386474",
            "id": 1902386474,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27046",
            "node_id": "IC_kwDOAPphoM5xZB0q",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1902386474/reactions"
            },
            "updated_at": "2024-01-20T23:25:21Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1902386474",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1009873?v=4",
                "events_url": "https://api.github.com/users/wookayin/events{/privacy}",
                "followers_url": "https://api.github.com/users/wookayin/followers",
                "following_url": "https://api.github.com/users/wookayin/following{/other_user}",
                "gists_url": "https://api.github.com/users/wookayin/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/wookayin",
                "id": 1009873,
                "login": "wookayin",
                "node_id": "MDQ6VXNlcjEwMDk4NzM=",
                "organizations_url": "https://api.github.com/users/wookayin/orgs",
                "received_events_url": "https://api.github.com/users/wookayin/received_events",
                "repos_url": "https://api.github.com/users/wookayin/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/wookayin/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/wookayin/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/wookayin",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Found a semi-reliable reproducer, I'll look into it.",
            "created_at": "2024-01-21T00:33:58Z",
            "html_url": "https://github.com/neovim/neovim/issues/27046#issuecomment-1902462764",
            "id": 1902462764,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27046",
            "node_id": "IC_kwDOAPphoM5xZUcs",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1902462764/reactions"
            },
            "updated_at": "2024-01-21T00:37:44Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1902462764",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "Same error over here",
            "created_at": "2024-01-24T21:20:02Z",
            "html_url": "https://github.com/neovim/neovim/issues/27046#issuecomment-1908935248",
            "id": 1908935248,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27046",
            "node_id": "IC_kwDOAPphoM5xyApQ",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1908935248/reactions"
            },
            "updated_at": "2024-01-24T21:23:13Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1908935248",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/86387828?v=4",
                "events_url": "https://api.github.com/users/Armadillidiid/events{/privacy}",
                "followers_url": "https://api.github.com/users/Armadillidiid/followers",
                "following_url": "https://api.github.com/users/Armadillidiid/following{/other_user}",
                "gists_url": "https://api.github.com/users/Armadillidiid/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Armadillidiid",
                "id": 86387828,
                "login": "Armadillidiid",
                "node_id": "MDQ6VXNlcjg2Mzg3ODI4",
                "organizations_url": "https://api.github.com/users/Armadillidiid/orgs",
                "received_events_url": "https://api.github.com/users/Armadillidiid/received_events",
                "repos_url": "https://api.github.com/users/Armadillidiid/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Armadillidiid/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Armadillidiid/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Armadillidiid",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Today I got this failure on master before merging #27122. Let's observe nvim with that fix for some time. ",
            "created_at": "2024-02-01T18:48:00Z",
            "html_url": "https://github.com/neovim/neovim/issues/27046#issuecomment-1921997101",
            "id": 1921997101,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27046",
            "node_id": "IC_kwDOAPphoM5yj1kt",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1921997101/reactions"
            },
            "updated_at": "2024-02-01T18:48:00Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1921997101",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11404453?v=4",
                "events_url": "https://api.github.com/users/przepompownia/events{/privacy}",
                "followers_url": "https://api.github.com/users/przepompownia/followers",
                "following_url": "https://api.github.com/users/przepompownia/following{/other_user}",
                "gists_url": "https://api.github.com/users/przepompownia/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/przepompownia",
                "id": 11404453,
                "login": "przepompownia",
                "node_id": "MDQ6VXNlcjExNDA0NDUz",
                "organizations_url": "https://api.github.com/users/przepompownia/orgs",
                "received_events_url": "https://api.github.com/users/przepompownia/received_events",
                "repos_url": "https://api.github.com/users/przepompownia/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/przepompownia/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/przepompownia/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/przepompownia",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "Hi, I'm encountering the issue with the latest nightly release (video below). I attempted to reproduce it in my configuration, but it seems to be quite random. However, I experimented with LazyVim distro and found a pattern that can almost reproduce it.\r\n\r\nI'm still working on minimizing the reproducible code, and I'll likely post it here tomorrow.\r\n\r\n```sh\r\nNVIM v0.10.0-dev-2397+ga9f578b7a\r\nBuild type: RelWithDebInfo\r\nLuaJIT 2.1.1707061634\r\n```\r\n\r\nhttps://github.com/neovim/neovim/assets/105807570/c65a752b-b60a-4596-a93c-de1ffa60178a\r\n\r\n\r\n",
            "created_at": "2024-02-20T05:04:11Z",
            "html_url": "https://github.com/neovim/neovim/issues/27046#issuecomment-1953493443",
            "id": 1953493443,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27046",
            "node_id": "IC_kwDOAPphoM50b_HD",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1953493443/reactions"
            },
            "updated_at": "2024-02-20T05:04:11Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1953493443",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/105807570?v=4",
                "events_url": "https://api.github.com/users/bassamsdata/events{/privacy}",
                "followers_url": "https://api.github.com/users/bassamsdata/followers",
                "following_url": "https://api.github.com/users/bassamsdata/following{/other_user}",
                "gists_url": "https://api.github.com/users/bassamsdata/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bassamsdata",
                "id": 105807570,
                "login": "bassamsdata",
                "node_id": "U_kgDOBk5-0g",
                "organizations_url": "https://api.github.com/users/bassamsdata/orgs",
                "received_events_url": "https://api.github.com/users/bassamsdata/received_events",
                "repos_url": "https://api.github.com/users/bassamsdata/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bassamsdata/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bassamsdata/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bassamsdata",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "Alright, here is the reproducible code for this issue:\r\n\r\nSteps to reproduce it:\r\n\r\n1. Execute the following commands in your terminal:\r\n```sh\r\nmkdir ~/.config/min_sign\r\ncd ~/.config/min_sign\r\ntouch init.lua\r\n```\r\n\r\n2. Add the following code to the `init.lua` file then `NVIM_APPNAME=min_sign nvim`:\r\n\r\n<details>\r\n\r\n```lua\r\nlocal lazypath = vim.fn.stdpath(\"data\") .. \"/lazy/lazy.nvim\"\r\nif not vim.loop.fs_stat(lazypath) then\r\n\tvim.fn.system({\r\n\t\t\"git\",\r\n\t\t\"clone\",\r\n\t\t\"--filter=blob:none\",\r\n\t\t\"https://github.com/folke/lazy.nvim.git\",\r\n\t\t\"--branch=stable\", -- latest stable release\r\n\t\tlazypath,\r\n\t})\r\nend\r\nvim.opt.rtp:prepend(lazypath)\r\n\r\n\r\n-- this is from LazyVim distro (simplified version similar to statuscol plugin)\r\n-- https://github.com/LazyVim/LazyVim/blob/a50f92f7550fb6e9f21c0852e6cb190e6fcd50f5/lua/lazyvim/util/ui.lua\r\nlocal function get_signs(buf, lnum)\r\n\t-- Get regular signs\r\n\tlocal signs = {}\r\n\r\n\tif vim.fn.has(\"nvim-0.10\") == 0 then\r\n\t\t-- Only needed for Neovim <0.10\r\n\t\t-- Newer versions include legacy signs in nvim_buf_get_extmarks\r\n\t\tfor _, sign in ipairs(vim.fn.sign_getplaced(buf, { group = \"*\", lnum = lnum })[1].signs) do\r\n\t\t\tlocal ret = vim.fn.sign_getdefined(sign.name)[1]\r\n\t\t\tif ret then\r\n\t\t\t\tret.priority = sign.priority\r\n\t\t\t\tsigns[#signs + 1] = ret\r\n\t\t\tend\r\n\t\tend\r\n\tend\r\n\r\n\t-- Get extmark signs\r\n\tlocal extmarks = vim.api.nvim_buf_get_extmarks(\r\n\t\tbuf,\r\n\t\t-1,\r\n\t\t{ lnum - 1, 0 },\r\n\t\t{ lnum - 1, -1 },\r\n\t\t{ details = true, type = \"sign\" }\r\n\t)\r\n\tfor _, extmark in pairs(extmarks) do\r\n\t\tsigns[#signs + 1] = {\r\n\t\t\tname = extmark[4].sign_hl_group or \"\",\r\n\t\t\ttext = extmark[4].sign_text,\r\n\t\t\ttexthl = extmark[4].sign_hl_group,\r\n\t\t\tpriority = extmark[4].priority,\r\n\t\t}\r\n\tend\r\n\r\n\t-- Sort by priority\r\n\ttable.sort(signs, function(a, b)\r\n\t\treturn (a.priority or 0) < (b.priority or 0)\r\n\tend)\r\n\r\n\treturn signs\r\nend\r\n\r\nlocal function get_mark(buf, lnum)\r\n\tlocal marks = vim.fn.getmarklist(buf)\r\n\tvim.list_extend(marks, vim.fn.getmarklist())\r\n\tfor _, mark in ipairs(marks) do\r\n\t\tif mark.pos[1] == buf and mark.pos[2] == lnum and mark.mark:match(\"[a-zA-Z]\") then\r\n\t\t\treturn { text = mark.mark:sub(2), texthl = \"DiagnosticHint\" }\r\n\t\tend\r\n\tend\r\nend\r\n\r\nlocal function icon(sign, len)\r\n\tsign = sign or {}\r\n\tlen = len or 2\r\n\tlocal text = vim.fn.strcharpart(sign.text or \"\", 0, len) ---@type string\r\n\ttext = text .. string.rep(\" \", len - vim.fn.strchars(text))\r\n\treturn sign.texthl and (\"%#\" .. sign.texthl .. \"#\" .. text .. \"%*\") or text\r\nend\r\n\r\nlocal function foldtext()\r\n\tlocal start_line = vim.api.nvim_buf_get_lines(0, vim.v.foldstart - 1, vim.v.foldstart, false)[1]\r\n\tlocal end_line = vim.api.nvim_buf_get_lines(0, vim.v.foldend - 1, vim.v.foldend, false)[1]\r\n\r\n\t-- Replace tabs with spaces\r\n\tstart_line = start_line:gsub(\"\\t\", string.rep(\" \", vim.bo.tabstop))\r\n\r\n\t-- Trim whitespace\r\n\tend_line = end_line:gsub(\"^%s*(.-)%s*$\", \"%1\")\r\n\r\n\treturn start_line .. \" ... \" .. end_line\r\nend\r\n\r\nfunction Statuscolumn()\r\n\tlocal win = vim.g.statusline_winid\r\n\tlocal buf = vim.api.nvim_win_get_buf(win)\r\n\tlocal is_file = vim.bo[buf].buftype == \"\"\r\n\tlocal show_signs = vim.wo[win].signcolumn ~= \"no\"\r\n\r\n\tlocal components = { \"\", \"\", \"\" } -- left, middle, right\r\n\r\n\tif show_signs then\r\n\t\t-- -@type Sign?,Sign?,Sign?\r\n\t\tlocal left, right, fold\r\n\t\tfor _, s in ipairs(get_signs(buf, vim.v.lnum)) do\r\n\t\t\tif s.name and s.name:find(\"GitSign\") then\r\n\t\t\t\tright = s\r\n\t\t\telse\r\n\t\t\t\tleft = s\r\n\t\t\tend\r\n\t\tend\r\n\t\tif vim.v.virtnum ~= 0 then\r\n\t\t\tleft = nil\r\n\t\tend\r\n\t\tvim.api.nvim_win_call(win, function()\r\n\t\t\tif vim.fn.foldclosed(vim.v.lnum) >= 0 then\r\n\t\t\t\tfold = {\r\n\t\t\t\t\ttext = vim.opt.fillchars:get().foldclose or \"\",\r\n\t\t\t\t\ttexthl = \"Folded\",\r\n\t\t\t\t}\r\n\t\t\tend\r\n\t\tend)\r\n\t\t-- Left: mark or non-git sign\r\n\t\tcomponents[1] = icon(get_mark(buf, vim.v.lnum) or left)\r\n\t\t-- Right: fold icon or git sign (only if file)\r\n\t\tcomponents[3] = is_file and icon(fold or right) or \"\"\r\n\tend\r\n\r\n\t-- Numbers in Neovim are weird\r\n\t-- They show when either number or relativenumber is true\r\n\tlocal is_num = vim.wo[win].number\r\n\tlocal is_relnum = vim.wo[win].relativenumber\r\n\tif (is_num or is_relnum) and vim.v.virtnum == 0 then\r\n\t\tif vim.v.relnum == 0 then\r\n\t\t\tcomponents[2] = is_num and \"%l\" or \"%r\" -- the current line\r\n\t\telse\r\n\t\t\tcomponents[2] = is_relnum and \"%r\" or \"%l\" -- other lines\r\n\t\tend\r\n\t\tcomponents[2] = \"%=\" .. components[2] .. \" \" -- right align\r\n\tend\r\n\r\n\treturn table.concat(components, \"\")\r\nend\r\n\r\n-- TODO: this is important\r\nvim.opt.statuscolumn = [[%!v:lua.Statuscolumn()]]\r\n\r\n-- we need mini.hipatterns to add icons as sign text\r\nrequire(\"lazy\").setup({\r\n\t{\r\n\t\t\"echasnovski/mini.hipatterns\",\r\n\t\tconfig = function()\r\n\t\t\tlocal mini_hipatterns = require(\"mini.hipatterns\")\r\n\t\t\tif mini_hipatterns then\r\n\t\t\t\tlocal keywords = { \"NOTE\", \"BUG\", \"LOVE\", \"TODO\", \"TEST\", \"FIX\" }\r\n\t\t\t\tlocal icons = { \"󱑴\", \"󱑬\", \"󱑭\", \"󱑯\", \"󱑱\" }\r\n\t\t\t\tlocal highlighters = {}\r\n\t\t\t\tfor _, keyword in ipairs(keywords) do\r\n\t\t\t\t\tlocal lowerKeyword = string.lower(keyword)\r\n\t\t\t\t\thighlighters[lowerKeyword] = {\r\n\t\t\t\t\t\tpattern = string.format(\"%s:\", keyword),\r\n\t\t\t\t\t\tgroup = \"IncSearch\",\r\n\t\t\t\t\t\textmark_opts = {\r\n\t\t\t\t\t\t\tsign_text = icons[_],\r\n\t\t\t\t\t\t\tsign_hl_group = \"IncSearch\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t}\r\n\t\t\t\t\thighlighters[string.format(\"%s_trail\", lowerKeyword)] = {\r\n\t\t\t\t\t\tpattern = string.format(\"%s: ()%%S+.*()\", keyword),\r\n\t\t\t\t\t\tgroup = \"IncSearch\",\r\n\t\t\t\t\t}\r\n\t\t\t\tend\r\n\r\n\t\t\t\tmini_hipatterns.setup({ highlighters = highlighters })\r\n\t\t\tend\r\n\t\tend,\r\n\t},\r\n}, {})\r\n\r\nvim.wo.number = true\r\nvim.o.undofile = true\r\nvim.wo.signcolumn = \"yes\"\r\nvim.o.termguicolors = true\r\n\r\n```\r\n</details>\r\n\r\n4. Edit the file `:e init.lua`.\r\n5. Enter insert mode and write multiple TODOs in different lines (around 5 or six with multiple lines).\r\n6. Visual select all those TODOs and delete them all at once.\r\n7. The issue should occur.\r\n\r\nNote1: If the issue doesn't occur, try writing multiple far away TODOs and then visually selecting and deleting them.\r\n\r\nNote2: If the highlight doesn't have an sign text icon like `FIX:`, the issue won't happen. For example, writing `FIX: sometext` which doesn't have a sign text icon will not trigger the issue.\r\n\r\nNote3: The code section may seem lengthy, but it comprises only two main parts:\r\nOne: The LazyVim distro's minimal/simple implementation of statuscol, resembling the statuscol plugin.\r\nSecond: Mini.hipatterns plugin, responsible for adding sign text icons and highlights.\r\n\r\nNote4: in my own configuration, it doesn't happen like this, but it was so random, when sometimes I try to comment out some highlighted text that has icon sign text.\r\n\r\nI apologize for the non-perfect minimal repro, considering the randomness of this issue, this is the best I could do.\r\n\r\nhttps://github.com/neovim/neovim/assets/105807570/63d2c647-261b-4343-aa67-d39cf3ce4027\r\n\r\n\r\n(video shows that if only a couple of TODOs are deleted, the issue won't occur, but if multiple are deleted, it will happen).\r\n\r\nLet me know if you need further clarification.",
            "created_at": "2024-02-20T19:56:45Z",
            "html_url": "https://github.com/neovim/neovim/issues/27046#issuecomment-1954956587",
            "id": 1954956587,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27046",
            "node_id": "IC_kwDOAPphoM50hkUr",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1954956587/reactions"
            },
            "updated_at": "2024-02-20T19:56:45Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1954956587",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/105807570?v=4",
                "events_url": "https://api.github.com/users/bassamsdata/events{/privacy}",
                "followers_url": "https://api.github.com/users/bassamsdata/followers",
                "following_url": "https://api.github.com/users/bassamsdata/following{/other_user}",
                "gists_url": "https://api.github.com/users/bassamsdata/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bassamsdata",
                "id": 105807570,
                "login": "bassamsdata",
                "node_id": "U_kgDOBk5-0g",
                "organizations_url": "https://api.github.com/users/bassamsdata/orgs",
                "received_events_url": "https://api.github.com/users/bassamsdata/received_events",
                "repos_url": "https://api.github.com/users/bassamsdata/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bassamsdata/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bassamsdata/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bassamsdata",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Thanks @bassamsdata, I was able to reproduce. In the repro, immediately after deleting, more (paired) signs than actually present in the buffer are counted in the marktree iteration:\r\nhttps://github.com/neovim/neovim/blob/9bb046d1be5aa9ba0482b2cad050b286d4b78978/src/nvim/decoration.c#L800-L824\r\n\r\nThus incorrectly incrementing `b_signcols.count[<wrong>]`. After the deletion, when a callback deletes a sign, the correct number of signs is counted, and `b_signcols.count[<correct>]` is decremented below 0.\r\n\r\nI'm not sure if this is a bug in the marktree state/API after deleting, or if its used incorrectly @bfredl.",
            "created_at": "2024-02-21T03:06:34Z",
            "html_url": "https://github.com/neovim/neovim/issues/27046#issuecomment-1955793606",
            "id": 1955793606,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27046",
            "node_id": "IC_kwDOAPphoM50kwrG",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1955793606/reactions"
            },
            "updated_at": "2024-02-21T12:49:46Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1955793606",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Here is a test case which shows an unexpected amount of signs in the screen state and crashes upon deleting a sign.\r\n\r\n```lua\r\n  it('correct number of signs after deleting text(#27046)', function()\r\n    command('call setline(1, [\"foo\"]->repeat(31))')\r\n    api.nvim_buf_set_extmark(0, ns, 0, 0, {end_row = 0, sign_text = 'S1'})\r\n    api.nvim_buf_set_extmark(0, ns, 0, 0, {end_row = 0, end_col = 3, hl_group = 'Error'})\r\n    api.nvim_buf_set_extmark(0, ns, 9, 0, {end_row = 9,  sign_text = 'S2'})\r\n    api.nvim_buf_set_extmark(0, ns, 9, 0, {end_row = 9, end_col = 3, hl_group = 'Error'})\r\n    api.nvim_buf_set_extmark(0, ns, 19, 0, {end_row = 19, sign_text = 'S3'})\r\n    api.nvim_buf_set_extmark(0, ns, 19, 0, {end_row = 19, end_col = 3, hl_group = 'Error'})\r\n    api.nvim_buf_set_extmark(0, ns, 29, 0, {end_row = 29, sign_text = 'S4'})\r\n    api.nvim_buf_set_extmark(0, ns, 29, 0, {end_row = 29, end_col = 3, hl_group = 'Error'})\r\n    api.nvim_buf_set_extmark(0, ns, 30, 0, {end_row = 30, sign_text = 'S5'})\r\n    api.nvim_buf_set_extmark(0, ns, 30, 0, {end_row = 30, end_col = 3, hl_group = 'Error'})\r\n    command('0d29')\r\n\r\n    screen:expect{grid=[[\r\n      S1S3S4{4:^foo}                                 |\r\n      S5{1:      }{4:foo}                                 |\r\n      {2:~                                                 }|*7\r\n      29 fewer lines                                    |\r\n    ]]}\r\n    api.nvim_buf_clear_namespace(0, ns, 0, -1)\r\n  end)\r\n```",
            "created_at": "2024-02-21T12:30:40Z",
            "html_url": "https://github.com/neovim/neovim/issues/27046#issuecomment-1956548488",
            "id": 1956548488,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27046",
            "node_id": "IC_kwDOAPphoM50no-I",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1956548488/reactions"
            },
            "updated_at": "2024-02-21T12:57:49Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1956548488",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Thanks to all of you for investigating what happened here. ",
            "created_at": "2024-02-23T21:07:15Z",
            "html_url": "https://github.com/neovim/neovim/issues/27046#issuecomment-1961989996",
            "id": 1961989996,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27046",
            "node_id": "IC_kwDOAPphoM508Zds",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1961989996/reactions"
            },
            "updated_at": "2024-02-23T21:07:15Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1961989996",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11404453?v=4",
                "events_url": "https://api.github.com/users/przepompownia/events{/privacy}",
                "followers_url": "https://api.github.com/users/przepompownia/followers",
                "following_url": "https://api.github.com/users/przepompownia/following{/other_user}",
                "gists_url": "https://api.github.com/users/przepompownia/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/przepompownia",
                "id": 11404453,
                "login": "przepompownia",
                "node_id": "MDQ6VXNlcjExNDA0NDUz",
                "organizations_url": "https://api.github.com/users/przepompownia/orgs",
                "received_events_url": "https://api.github.com/users/przepompownia/received_events",
                "repos_url": "https://api.github.com/users/przepompownia/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/przepompownia/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/przepompownia/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/przepompownia",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "I have a source file that crashes today. Immediately when opening it as checked in, or if I delete all the content and add new lines it crashes after a while.\r\n\r\n> neovim-0.10.0~ubuntu1+git202404081538-978962f9a-971e32c87\r\nUsing statuscol with the 0.10 branch, if I copy the file it is fine so I think there are cached signs involved for that filepath.\r\nEverything is fine without statuscol - but then I do not have the nice gitsigns.\r\n\r\n![image](https://github.com/neovim/neovim/assets/1367522/683ab170-426e-4c75-8557-00976ea0078b)\r\n\r\nHere are some of the marks if that helps. I am a little foggy on how best to debug signs/extmarks so let me know what to run.\r\n\r\n<details>\r\n<summary>\r\n`lua print(vim.inspect(vim.fn.sign_getplaced(1, {group='*'})))`\r\n</summary>\r\n\r\n```\r\n{ {\r\n    bufnr = 1,\r\n    signs = { {\r\n        group = \"gitsigns_extmark_signs_\",\r\n        id = 1,\r\n        lnum = 1,\r\n        name = \"\",\r\n        priority = 6\r\n      }, {\r\n        group = \"gitsigns_extmark_signs_\",\r\n        id = 2,\r\n        lnum = 2,\r\n        name = \"\",\r\n        priority = 6\r\n      }, {\r\n        group = \"gitsigns_extmark_signs_\",\r\n        id = 4,\r\n        lnum = 4,\r\n        name = \"\",\r\n        priority = 6\r\n      }, {\r\n        group = \"gitsigns_extmark_signs_\",\r\n        id = 5,\r\n        lnum = 5,\r\n        name = \"\",\r\n        priority = 6\r\n      }, {\r\n        group = \"gitsigns_extmark_signs_\",\r\n        id = 6,\r\n        lnum = 6,\r\n        name = \"\",\r\n        priority = 6\r\n      }, {\r\n        group = \"gitsigns_extmark_signs_\",\r\n        id = 8,\r\n        lnum = 8,\r\n        name = \"\",\r\n        priority = 6\r\n      }, {\r\n        group = \"gitsigns_extmark_signs_\",\r\n        id = 9,\r\n        lnum = 9,\r\n        name = \"\",\r\n        priority = 6\r\n      }, {\r\n        group = \"\",\r\n        id = 104001,\r\n        lnum = 104,\r\n        name = \"Signature_j\",\r\n        priority = 10\r\n      }, {\r\n        group = \"\",\r\n        id = 96001,\r\n        lnum = 104,\r\n        name = \"Signature_j\",\r\n        priority = 10\r\n      } }\r\n  } }\r\n\r\n```\r\n</details>\r\n\r\nThe `Signature_j` signs are from: https://github.com/kshenoy/vim-signature",
            "created_at": "2024-04-09T11:25:20Z",
            "html_url": "https://github.com/neovim/neovim/issues/27046#issuecomment-2044816693",
            "id": 2044816693,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27046",
            "node_id": "IC_kwDOAPphoM554W01",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2044816693/reactions"
            },
            "updated_at": "2024-04-09T11:41:00Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2044816693",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1367522?v=4",
                "events_url": "https://api.github.com/users/stagnation/events{/privacy}",
                "followers_url": "https://api.github.com/users/stagnation/followers",
                "following_url": "https://api.github.com/users/stagnation/following{/other_user}",
                "gists_url": "https://api.github.com/users/stagnation/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/stagnation",
                "id": 1367522,
                "login": "stagnation",
                "node_id": "MDQ6VXNlcjEzNjc1MjI=",
                "organizations_url": "https://api.github.com/users/stagnation/orgs",
                "received_events_url": "https://api.github.com/users/stagnation/received_events",
                "repos_url": "https://api.github.com/users/stagnation/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/stagnation/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/stagnation/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/stagnation",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> Here are some of the marks if that helps.\r\n\r\nThanks, but no not really. What matters here is how the signs are placed/removed. Really need an exact reproducer at this point (with plugins is fine).",
            "created_at": "2024-04-09T11:40:12Z",
            "html_url": "https://github.com/neovim/neovim/issues/27046#issuecomment-2044879358",
            "id": 2044879358,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27046",
            "node_id": "IC_kwDOAPphoM554mH-",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2044879358/reactions"
            },
            "updated_at": "2024-04-09T11:40:26Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2044879358",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "Thanks. I'll see what I can do, is there any serialized state to be aware of? I see that as I add more and more lines I get more and more signs, so they seem to come from online parsing of git in this case. \r\n\r\n\r\n--------------\r\n\r\nUpdates: I will post a reply when I have something concrete to add.\r\n\r\n1) We must have the signture plugin as well as statuscol + gitsigns for it to reproduce.\r\nAn update time like 100 makes it reproduce much more easily.\r\n\r\nI also think we need to create a sign for Signature on a line outside the buffer. Which I have in the real file.\r\nThough I have not managed to create such a sign in my reproduction, it seems to be cleared away when I delete the marked line. Maybe we can just do a bare call to create that sign, and not worry about the plugin to do so for me and lose its garbage.\r\n\r\n2) I now have a quite small rc file that crashes reliably on a file in my repo, even without unstaged changes. But I cannot seem to construct a new reproduction file.\r\n\r\n```\r\n$ git diff <file/in/repo>\r\n<nothing>\r\n$ v -u ~/task/debug-nvim-markassertion/vimrc <file/in/repo> +'lua print(vim.inspect(vim.fn.sign_getplaced(1, {group=\"*\"})))'\r\n{ {\r\n    bufnr = 1,\r\n    signs = { {\r\n        group = \"\",\r\n        id = 344001,\r\n        lnum = 344,\r\n        name = \"Signature_j\",\r\n        priority = 10\r\n      } }\r\n  } }\r\n<crashes immediately>\r\n\r\n$ v -u ~/task/debug-nvim-markassertion/vimrc  -i NONE <file/in/repo> +'lua print(vim.inspect(vim.fn.sign_getplaced(1, {group=\"*\"})))'\r\n{ {\r\n    bufnr = 1,\r\n    signs = {}\r\n  } }\r\n<does not crash>\r\n```\r\nSo I do not need `gitsigns` for it to crash.\r\n\r\nIt seems to me that I also need some of the shada entries for the <file/in/repo> to reproduce the error.\r\nIs there a way to bisect or work with the .shada file for the reproduction?",
            "created_at": "2024-04-09T11:42:34Z",
            "html_url": "https://github.com/neovim/neovim/issues/27046#issuecomment-2044889408",
            "id": 2044889408,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27046",
            "node_id": "IC_kwDOAPphoM554olA",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2044889408/reactions"
            },
            "updated_at": "2024-04-10T14:08:05Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2044889408",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1367522?v=4",
                "events_url": "https://api.github.com/users/stagnation/events{/privacy}",
                "followers_url": "https://api.github.com/users/stagnation/followers",
                "following_url": "https://api.github.com/users/stagnation/following{/other_user}",
                "gists_url": "https://api.github.com/users/stagnation/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/stagnation",
                "id": 1367522,
                "login": "stagnation",
                "node_id": "MDQ6VXNlcjEzNjc1MjI=",
                "organizations_url": "https://api.github.com/users/stagnation/orgs",
                "received_events_url": "https://api.github.com/users/stagnation/received_events",
                "repos_url": "https://api.github.com/users/stagnation/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/stagnation/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/stagnation/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/stagnation",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "Hmm. I have a small rc file, but think we need to work on the shada file. As it only reproduces for the one file in my repos and the shada entries it has.",
            "created_at": "2024-04-10T14:07:01Z",
            "html_url": "https://github.com/neovim/neovim/issues/27046#issuecomment-2047650463",
            "id": 2047650463,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27046",
            "node_id": "IC_kwDOAPphoM56DKqf",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2047650463/reactions"
            },
            "updated_at": "2024-04-10T14:07:01Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2047650463",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1367522?v=4",
                "events_url": "https://api.github.com/users/stagnation/events{/privacy}",
                "followers_url": "https://api.github.com/users/stagnation/followers",
                "following_url": "https://api.github.com/users/stagnation/following{/other_user}",
                "gists_url": "https://api.github.com/users/stagnation/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/stagnation",
                "id": 1367522,
                "login": "stagnation",
                "node_id": "MDQ6VXNlcjEzNjc1MjI=",
                "organizations_url": "https://api.github.com/users/stagnation/orgs",
                "received_events_url": "https://api.github.com/users/stagnation/received_events",
                "repos_url": "https://api.github.com/users/stagnation/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/stagnation/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/stagnation/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/stagnation",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Thanks for working on this! I'm not sure how shada is relevant sorry, AFAIK it does not store extmarks :/ statuscol plugin should also not be needed to reproduce any crash, try `:set signcolumn=auto:2` instead.\r\n\r\nSign outside of buffer range might be a good clue, I'm not sure if that is handled properly.",
            "created_at": "2024-04-10T14:18:58Z",
            "html_url": "https://github.com/neovim/neovim/issues/27046#issuecomment-2047682290",
            "id": 2047682290,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27046",
            "node_id": "IC_kwDOAPphoM56DSby",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2047682290/reactions"
            },
            "updated_at": "2024-04-10T14:18:58Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2047682290",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "Yes! This reproduces and crashes immediately. Without updatetime it does not **seem to** crash.\r\nStill on my file and its shada stuff.\r\n\r\n```\r\nlet plug_location = '~/.local/share/nvim/plugged'\r\n\r\ncall plug#begin(plug_location)\r\n\r\nPlug 'kshenoy/vim-signature', { 'commit': '6bc3dd1294a2' }\r\n\r\ncall plug#end()\r\n\r\nset updatetime=100 \" Not strictly required but makes it crash much faster, with fewer user actions needed (sometimes no action).\r\nset noswapfile \" Not required but makes life less annoying\r\nset signcolumn=auto:2\r\n```\r\n-------------------------------------------------------------\r\n\r\nUpdate 2024-05: After some more rebasing of the file the shada state seems to have been kicked enough to stop crashing for me.\r\nSo I can no longer reproduce this error.\r\nAgain, thanks for the help.",
            "created_at": "2024-04-10T14:29:16Z",
            "html_url": "https://github.com/neovim/neovim/issues/27046#issuecomment-2047712422",
            "id": 2047712422,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27046",
            "node_id": "IC_kwDOAPphoM56DZym",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2047712422/reactions"
            },
            "updated_at": "2024-05-06T12:56:03Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2047712422",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1367522?v=4",
                "events_url": "https://api.github.com/users/stagnation/events{/privacy}",
                "followers_url": "https://api.github.com/users/stagnation/followers",
                "following_url": "https://api.github.com/users/stagnation/following{/other_user}",
                "gists_url": "https://api.github.com/users/stagnation/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/stagnation",
                "id": 1367522,
                "login": "stagnation",
                "node_id": "MDQ6VXNlcjEzNjc1MjI=",
                "organizations_url": "https://api.github.com/users/stagnation/orgs",
                "received_events_url": "https://api.github.com/users/stagnation/received_events",
                "repos_url": "https://api.github.com/users/stagnation/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/stagnation/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/stagnation/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/stagnation",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "@bfredl [your fix for this](https://github.com/neovim/neovim/commit/cb5ae22eab1fbb3162d0f7440a48ad49c7b3c48e) was merged in 0.10 already, but I have this crash consistently on neovim version 0.11:\r\n\r\n```\r\n$ nvim --version\r\nNVIM v0.11.0-dev-164+g3a1515bfe\r\nBuild type: RelWithDebInfo\r\nLuaJIT 2.1.1716656478\r\nRun \"nvim -V1 -v\" for more info\r\n```\r\n\r\nIt seems I can reproduce this consistently, by searching using this [ctrlsf](https://github.com/dyng/ctrlsf.vim) binding and then switching to the opened search window:\r\n\r\n```\r\nvmap <Leader>8 <Plug>CtrlSFVwordPath\r\n```\r\n\r\nBut I've done these same steps before with the same NeoVim and config, without it crashing. Let me know soon if you want more info, so I can do that before it magically disappears.",
            "created_at": "2024-06-06T16:25:54Z",
            "html_url": "https://github.com/neovim/neovim/issues/27046#issuecomment-2152936372",
            "id": 2152936372,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27046",
            "node_id": "IC_kwDOAPphoM6AUzO0",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2152936372/reactions"
            },
            "updated_at": "2024-06-06T16:25:54Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2152936372",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/5008897?v=4",
                "events_url": "https://api.github.com/users/TamaMcGlinn/events{/privacy}",
                "followers_url": "https://api.github.com/users/TamaMcGlinn/followers",
                "following_url": "https://api.github.com/users/TamaMcGlinn/following{/other_user}",
                "gists_url": "https://api.github.com/users/TamaMcGlinn/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/TamaMcGlinn",
                "id": 5008897,
                "login": "TamaMcGlinn",
                "node_id": "MDQ6VXNlcjUwMDg4OTc=",
                "organizations_url": "https://api.github.com/users/TamaMcGlinn/orgs",
                "received_events_url": "https://api.github.com/users/TamaMcGlinn/received_events",
                "repos_url": "https://api.github.com/users/TamaMcGlinn/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/TamaMcGlinn/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/TamaMcGlinn/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/TamaMcGlinn",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "@TamaMcGlinn there have been multiple fixes after the one you linked. But this is not much to go on. If you can still reproduce on the latest commit, please open an issue with minimal reproduction steps (plugins are fine for this issue but please try to reduce to a minimal list of plugins necessary, a text searching plugin seems completely unrelated).",
            "created_at": "2024-06-06T16:40:11Z",
            "html_url": "https://github.com/neovim/neovim/issues/27046#issuecomment-2152963055",
            "id": 2152963055,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27046",
            "node_id": "IC_kwDOAPphoM6AU5vv",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2152963055/reactions"
            },
            "updated_at": "2024-06-06T16:40:11Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2152963055",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "After updating to the latest nightly, I can still reproduce. Unfortunately, not just when I have that search plugin - I need to do some bisecting in my vimrc to find which part of the config is necessary. However, I do have 9 coredump files of the crash, if that helps.",
            "created_at": "2024-06-06T17:20:40Z",
            "html_url": "https://github.com/neovim/neovim/issues/27046#issuecomment-2153039123",
            "id": 2153039123,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27046",
            "node_id": "IC_kwDOAPphoM6AVMUT",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2153039123/reactions"
            },
            "updated_at": "2024-06-06T17:20:40Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2153039123",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/5008897?v=4",
                "events_url": "https://api.github.com/users/TamaMcGlinn/events{/privacy}",
                "followers_url": "https://api.github.com/users/TamaMcGlinn/followers",
                "following_url": "https://api.github.com/users/TamaMcGlinn/following{/other_user}",
                "gists_url": "https://api.github.com/users/TamaMcGlinn/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/TamaMcGlinn",
                "id": 5008897,
                "login": "TamaMcGlinn",
                "node_id": "MDQ6VXNlcjUwMDg4OTc=",
                "organizations_url": "https://api.github.com/users/TamaMcGlinn/orgs",
                "received_events_url": "https://api.github.com/users/TamaMcGlinn/received_events",
                "repos_url": "https://api.github.com/users/TamaMcGlinn/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/TamaMcGlinn/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/TamaMcGlinn/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/TamaMcGlinn",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> However, I do have 9 coredump files of the crash, if that helps.\r\n\r\nNot really. The assertion indicates an error in tracking placed signs. What matters is how those signs are placed/removed.",
            "created_at": "2024-06-06T17:35:53Z",
            "html_url": "https://github.com/neovim/neovim/issues/27046#issuecomment-2153063809",
            "id": 2153063809,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27046",
            "node_id": "IC_kwDOAPphoM6AVSWB",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2153063809/reactions"
            },
            "updated_at": "2024-06-06T17:35:53Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2153063809",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "After building from source and manually bisecting, it seems that [perf(column): only invalidate lines affected by added sign](https://github.com/neovim/neovim/commit/f4001d27efae44c6c07678ad2c72eed5f1a25ea8) introduces the problem, as I can reliably reproduce the issue on that commit, but not on its parent (Merge pull request #26292 from luukvbaal/decor).",
            "created_at": "2024-06-10T11:10:36Z",
            "html_url": "https://github.com/neovim/neovim/issues/27046#issuecomment-2158054315",
            "id": 2158054315,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27046",
            "node_id": "IC_kwDOAPphoM6AoUur",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2158054315/reactions"
            },
            "updated_at": "2024-06-10T11:10:36Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2158054315",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/5008897?v=4",
                "events_url": "https://api.github.com/users/TamaMcGlinn/events{/privacy}",
                "followers_url": "https://api.github.com/users/TamaMcGlinn/followers",
                "following_url": "https://api.github.com/users/TamaMcGlinn/following{/other_user}",
                "gists_url": "https://api.github.com/users/TamaMcGlinn/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/TamaMcGlinn",
                "id": 5008897,
                "login": "TamaMcGlinn",
                "node_id": "MDQ6VXNlcjUwMDg4OTc=",
                "organizations_url": "https://api.github.com/users/TamaMcGlinn/orgs",
                "received_events_url": "https://api.github.com/users/TamaMcGlinn/received_events",
                "repos_url": "https://api.github.com/users/TamaMcGlinn/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/TamaMcGlinn/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/TamaMcGlinn/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/TamaMcGlinn",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> it seems that [perf(column): only invalidate lines affected by added sign](https://github.com/neovim/neovim/commit/f4001d27efae44c6c07678ad2c72eed5f1a25ea8) introduces the problem\r\n\r\nIntroduces what problem? The signcolumn tracking was only added until later; as such the assert mentioned in this issue is not present in that commit. In fact most of the signcolumn logic in that commit was completely replaced so either you're bisecting incorrectly or you have identified a crash different from the one in this issue. Please try to open a new issue with reproduction steps.",
            "created_at": "2024-06-10T13:09:44Z",
            "html_url": "https://github.com/neovim/neovim/issues/27046#issuecomment-2158336695",
            "id": 2158336695,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27046",
            "node_id": "IC_kwDOAPphoM6ApZq3",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2158336695/reactions"
            },
            "updated_at": "2024-06-10T13:10:08Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2158336695",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Ok, I'll open a new issue since the steps to reproduce are different. But the reason I was commenting is that the exact same assert is failing as in this issue, so I was thinking that maybe it also has the same cause as in this issue.",
            "created_at": "2024-06-10T13:56:05Z",
            "html_url": "https://github.com/neovim/neovim/issues/27046#issuecomment-2158447962",
            "id": 2158447962,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27046",
            "node_id": "IC_kwDOAPphoM6Ap01a",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2158447962/reactions"
            },
            "updated_at": "2024-06-10T13:56:05Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2158447962",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/5008897?v=4",
                "events_url": "https://api.github.com/users/TamaMcGlinn/events{/privacy}",
                "followers_url": "https://api.github.com/users/TamaMcGlinn/followers",
                "following_url": "https://api.github.com/users/TamaMcGlinn/following{/other_user}",
                "gists_url": "https://api.github.com/users/TamaMcGlinn/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/TamaMcGlinn",
                "id": 5008897,
                "login": "TamaMcGlinn",
                "node_id": "MDQ6VXNlcjUwMDg4OTc=",
                "organizations_url": "https://api.github.com/users/TamaMcGlinn/orgs",
                "received_events_url": "https://api.github.com/users/TamaMcGlinn/received_events",
                "repos_url": "https://api.github.com/users/TamaMcGlinn/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/TamaMcGlinn/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/TamaMcGlinn/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/TamaMcGlinn",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> Sign outside of buffer range might be a good clue, I'm not sure if that is handled properly.\r\n\r\nFound a way to still hit this assert with legacy signs with the hint from @stagnation (never looked into it then sorry). The `:sign` API still allows placing signs beyond the end of the buffer. The signcolumn tracking and possibly other marktree related code does not account for that.\r\n\r\nSince they are now implemented as extmarks they can never actually become visible so maybe we should just error when trying to place signs beyond the end of the buffer like extmark API does @bfredl? Or allow it but place them at the end of the buffer instead, like `strict = false`. Easiest fix and probably backwards compatible enough to leave it undocumented.\r\n\r\nUnclear if this is causing the issue @TamaMcGlinn is facing. \r\n",
            "created_at": "2024-06-10T14:31:39Z",
            "html_url": "https://github.com/neovim/neovim/issues/27046#issuecomment-2158531077",
            "id": 2158531077,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27046",
            "node_id": "IC_kwDOAPphoM6AqJIF",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2158531077/reactions"
            },
            "updated_at": "2024-06-10T14:42:41Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2158531077",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "![Image](https://github.com/user-attachments/assets/db938b38-1d56-4e90-af5d-ef65209788ed)\nI have this issue again with save action\nthis is my nvim version\n```\nNVIM v0.12.0-dev-571+g7aafbca510\nBuild type: RelWithDebInfo\nLuaJIT 2.1.1748459687\nRun \"nvim -V1 -v\" for more info\n```",
            "created_at": "2025-06-18T10:19:51Z",
            "html_url": "https://github.com/neovim/neovim/issues/27046#issuecomment-2983614966",
            "id": 2983614966,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27046",
            "node_id": "IC_kwDOAPphoM6x1ln2",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2983614966/reactions"
            },
            "updated_at": "2025-06-18T10:19:51Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2983614966",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/71458213?v=4",
                "events_url": "https://api.github.com/users/fm39hz/events{/privacy}",
                "followers_url": "https://api.github.com/users/fm39hz/followers",
                "following_url": "https://api.github.com/users/fm39hz/following{/other_user}",
                "gists_url": "https://api.github.com/users/fm39hz/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fm39hz",
                "id": 71458213,
                "login": "fm39hz",
                "node_id": "MDQ6VXNlcjcxNDU4MjEz",
                "organizations_url": "https://api.github.com/users/fm39hz/orgs",
                "received_events_url": "https://api.github.com/users/fm39hz/received_events",
                "repos_url": "https://api.github.com/users/fm39hz/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fm39hz/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fm39hz/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fm39hz",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "@fm39hz would you mind trying latest nightly? There was a change very recently to adjust the assert.",
            "created_at": "2025-06-18T11:26:20Z",
            "html_url": "https://github.com/neovim/neovim/issues/27046#issuecomment-2983802407",
            "id": 2983802407,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27046",
            "node_id": "IC_kwDOAPphoM6x2TYn",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2983802407/reactions"
            },
            "updated_at": "2025-06-18T11:26:20Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2983802407",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
                "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
                "followers_url": "https://api.github.com/users/bfredl/followers",
                "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
                "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bfredl",
                "id": 1363104,
                "login": "bfredl",
                "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
                "organizations_url": "https://api.github.com/users/bfredl/orgs",
                "received_events_url": "https://api.github.com/users/bfredl/received_events",
                "repos_url": "https://api.github.com/users/bfredl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bfredl",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "It seems like `v0.12.0-dev-630+g8af2aea24f` didn't have this issue anymore!\nGlad that it has been fixed",
            "created_at": "2025-06-18T12:43:26Z",
            "html_url": "https://github.com/neovim/neovim/issues/27046#issuecomment-2984047468",
            "id": 2984047468,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27046",
            "node_id": "IC_kwDOAPphoM6x3PNs",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2984047468/reactions"
            },
            "updated_at": "2025-06-18T12:43:26Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2984047468",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/71458213?v=4",
                "events_url": "https://api.github.com/users/fm39hz/events{/privacy}",
                "followers_url": "https://api.github.com/users/fm39hz/followers",
                "following_url": "https://api.github.com/users/fm39hz/following{/other_user}",
                "gists_url": "https://api.github.com/users/fm39hz/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fm39hz",
                "id": 71458213,
                "login": "fm39hz",
                "node_id": "MDQ6VXNlcjcxNDU4MjEz",
                "organizations_url": "https://api.github.com/users/fm39hz/orgs",
                "received_events_url": "https://api.github.com/users/fm39hz/received_events",
                "repos_url": "https://api.github.com/users/fm39hz/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fm39hz/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fm39hz/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fm39hz",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 36,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/27046/comments",
    "created_at": "2024-01-16T16:50:20Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/27046/events",
    "html_url": "https://github.com/neovim/neovim/issues/27046",
    "id": 2084427221,
    "labels": [
        {
            "color": "0E8A16",
            "default": false,
            "description": "issue contains a stacktrace/ASAN log",
            "id": 435854079,
            "name": "has:backtrace",
            "node_id": "MDU6TGFiZWw0MzU4NTQwNzk=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/has:backtrace"
        },
        {
            "color": "F9D0C4",
            "default": false,
            "description": "issue reporting a crash or segfault",
            "id": 435854234,
            "name": "bug-crash",
            "node_id": "MDU6TGFiZWw0MzU4NTQyMzQ=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug-crash"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "marks, extmarks, decorations, virtual text",
            "id": 1680119719,
            "name": "marks",
            "node_id": "MDU6TGFiZWwxNjgwMTE5NzE5",
            "url": "https://api.github.com/repos/neovim/neovim/labels/marks"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/27046/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": "2024-05-16T14:11:42Z",
        "closed_issues": 440,
        "created_at": "2023-02-02T14:11:43Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
            "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
            "followers_url": "https://api.github.com/users/bfredl/followers",
            "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
            "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/bfredl",
            "id": 1363104,
            "login": "bfredl",
            "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
            "organizations_url": "https://api.github.com/users/bfredl/orgs",
            "received_events_url": "https://api.github.com/users/bfredl/received_events",
            "repos_url": "https://api.github.com/users/bfredl/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/bfredl",
            "user_view_type": "public"
        },
        "description": "",
        "due_on": "2024-05-12T07:00:00Z",
        "html_url": "https://github.com/neovim/neovim/milestone/36",
        "id": 8997654,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/36/labels",
        "node_id": "MI_kwDOAPphoM4AiUsW",
        "number": 36,
        "open_issues": 0,
        "state": "closed",
        "title": "0.10",
        "updated_at": "2025-01-05T13:24:13Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/36"
    },
    "node_id": "I_kwDOAPphoM58PdXV",
    "number": 27046,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 3,
        "-1": 0,
        "confused": 0,
        "eyes": 2,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 5,
        "url": "https://api.github.com/repos/neovim/neovim/issues/27046/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "completed",
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/27046/timeline",
    "title": "Assertion `buf->b_signcols.count[width - 1] >= 0` failed",
    "type": null,
    "updated_at": "2025-06-18T12:43:26Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/27046",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/11404453?v=4",
        "events_url": "https://api.github.com/users/przepompownia/events{/privacy}",
        "followers_url": "https://api.github.com/users/przepompownia/followers",
        "following_url": "https://api.github.com/users/przepompownia/following{/other_user}",
        "gists_url": "https://api.github.com/users/przepompownia/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/przepompownia",
        "id": 11404453,
        "login": "przepompownia",
        "node_id": "MDQ6VXNlcjExNDA0NDUz",
        "organizations_url": "https://api.github.com/users/przepompownia/orgs",
        "received_events_url": "https://api.github.com/users/przepompownia/received_events",
        "repos_url": "https://api.github.com/users/przepompownia/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/przepompownia/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/przepompownia/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/przepompownia",
        "user_view_type": "public"
    }
}