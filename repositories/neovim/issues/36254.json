{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\n\nwhen i use vim.pack.updata()\n<img width=\"1174\" height=\"189\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/4b838e0f-17b6-4323-a3b2-27c490f75dea\" />\n\n### Steps to reproduce\n\nnvim --clean\n:lua vim.pack.update()\n\n\n### Expected behavior\n\n<img width=\"833\" height=\"357\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/b64b29fa-3c8a-47cc-b320-cbced3b9aed9\" />\ndoc saied that  this cmd will update all packs\n\n### Nvim version (nvim -v)\n\nNVIM v0.12.0-dev-1471+gbe73c35943\n\n### Vim (not Nvim) behaves the same?\n\nno, vim doesn't have vim.pack\n\n### Operating system/version\n\nwindows & macOS\n\n### Terminal name/version\n\nwindows terminal \n\n### $TERM environment variable\n\nxterm-256color\n\n### Installation\n\nbuild from source",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "Hmm I can't reproduce this with `v0.12.0-dev-1471+gbe73c35943`. Could you also please share your `nvim-pack-lock.json` file?",
            "created_at": "2025-10-20T03:41:26Z",
            "html_url": "https://github.com/neovim/neovim/issues/36254#issuecomment-3420431085",
            "id": 3420431085,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36254",
            "node_id": "IC_kwDOAPphoM7L36Lt",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3420431085/reactions"
            },
            "updated_at": "2025-10-20T03:45:23Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3420431085",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/62502207?v=4",
                "events_url": "https://api.github.com/users/MariaSolOs/events{/privacy}",
                "followers_url": "https://api.github.com/users/MariaSolOs/followers",
                "following_url": "https://api.github.com/users/MariaSolOs/following{/other_user}",
                "gists_url": "https://api.github.com/users/MariaSolOs/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/MariaSolOs",
                "id": 62502207,
                "login": "MariaSolOs",
                "node_id": "MDQ6VXNlcjYyNTAyMjA3",
                "organizations_url": "https://api.github.com/users/MariaSolOs/orgs",
                "received_events_url": "https://api.github.com/users/MariaSolOs/received_events",
                "repos_url": "https://api.github.com/users/MariaSolOs/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/MariaSolOs/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/MariaSolOs/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/MariaSolOs",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "> Hmm I can't reproduce this with `v0.12.0-dev-1471+gbe73c35943`. Could you also please share your `nvim-pack-lock.json` file?\n\n```json\n{\n  \"plugins\": {\n    \"bufferline.nvim\": {\n      \"rev\": \"655133c\",\n      \"src\": \"https://github.com/akinsho/bufferline.nvim\"\n    },\n    \"bullets.nvim\": {\n      \"rev\": \"0163fac\",\n      \"src\": \"https://github.com/kaymmm/bullets.nvim\"\n    },\n    \"codecompanion.nvim\": {\n      \"rev\": \"946e186\",\n      \"src\": \"https://github.com/olimorris/codecompanion.nvim\"\n    },\n    \"csvview.nvim\": {\n      \"rev\": \"bbab4c2\",\n      \"src\": \"https://github.com/hat0uma/csvview.nvim\"\n    },\n    \"dashboard-nvim\": [],\n    \"dropbar.nvim\": {\n      \"rev\": \"ce20224\",\n      \"src\": \"https://github.com/Bekaboo/dropbar.nvim\"\n    },\n    \"faster.nvim\": {\n      \"rev\": \"2e7a50f\",\n      \"src\": \"https://github.com/pteroctopus/faster.nvim\"\n    },\n    \"floatty.nvim\": {\n      \"rev\": \"e82ae3b\",\n      \"src\": \"https://github.com/ingur/floatty.nvim\"\n    },\n    \"gitsigns.nvim\": {\n      \"rev\": \"1ee5c1f\"\n    },\n    \"hlchunk.nvim\": {\n      \"rev\": \"9371351\",\n      \"src\": \"https://github.com/shellRaining/hlchunk.nvim\"\n    },\n    \"im-select.nvim\": {\n      \"rev\": \"113a690\",\n      \"src\": \"https://github.com/keaising/im-select.nvim\"\n    },\n    \"lualine.nvim\": {\n      \"rev\": \"b8c2315\",\n      \"src\": \"https://github.com/nvim-lualine/lualine.nvim\"\n    },\n    \"mason-nvim-dap.nvim\": {\n      \"rev\": \"86389a3\",\n      \"src\": \"https://github.com/jay-babu/mason-nvim-dap.nvim\"\n    },\n    \"mason.nvim\": {\n      \"rev\": \"ad7146a\",\n      \"src\": \"https://github.com/williamboman/mason.nvim\"\n    },\n    \"mini.completion\": {\n      \"rev\": \"27483b0\"\n    },\n    \"mini.diff\": {\n      \"rev\": \"a2df2a9\"\n    },\n    \"mini.icons\": {\n      \"rev\": \"2847986\"\n    },\n    \"mini.keymap\": {\n      \"rev\": \"8849b59\",\n      \"src\": \"https://github.com/nvim-mini/mini.keymap\"\n    },\n    \"mini.notify\": {\n      \"rev\": \"7f3c4f0\",\n      \"src\": \"https://github.com/nvim-mini/mini.notify\"\n    },\n    \"mini.nvim\": {\n      \"rev\": \"57c1611\",\n      \"src\": \"https://github.com/nvim-mini/mini.nvim\"\n    },\n    \"mini.pairs\": {\n      \"rev\": \"b9aada8\",\n      \"src\": \"https://github.com/nvim-mini/mini.pairs\"\n    },\n    \"mini.snippets\": {\n      \"rev\": \"7610dc3\"\n    },\n    \"mini.starter\": {\n      \"rev\": \"b43df0b\",\n      \"src\": \"https://github.com/nvim-mini/mini.starter\"\n    },\n    \"mini.surround\": {\n      \"rev\": \"fc6fbc3\"\n    },\n    \"neo-tree.nvim\": {\n      \"rev\": \"0c29e37\"\n    },\n    \"noice.nvim\": {\n      \"rev\": \"38c702b\",\n      \"src\": \"https://github.com/folke/noice.nvim\"\n    },\n    \"nui.nvim\": {\n      \"rev\": \"de74099\",\n      \"src\": \"https://github.com/MunifTanjim/nui.nvim\"\n    },\n    \"nvim-autopairs\": [],\n    \"nvim-dap\": {\n      \"rev\": \"881f7dc\",\n      \"src\": \"https://github.com/mfussenegger/nvim-dap\"\n    },\n    \"nvim-dap-python\": {\n      \"rev\": \"64652d1\",\n      \"src\": \"https://github.com/mfussenegger/nvim-dap-python\"\n    },\n    \"nvim-dap-ui\": {\n      \"rev\": \"cf91d5e\",\n      \"src\": \"https://github.com/rcarriga/nvim-dap-ui\"\n    },\n    \"nvim-dap-virtual-text\": {\n      \"rev\": \"fbdb48c\",\n      \"src\": \"https://github.com/theHamsta/nvim-dap-virtual-text\"\n    },\n    \"nvim-lspconfig\": {\n      \"rev\": \"e688b48\",\n      \"src\": \"https://github.com/neovim/nvim-lspconfig\"\n    },\n    \"nvim-neoclip.lua\": {\n      \"rev\": \"831a97c\",\n      \"src\": \"https://github.com/AckslD/nvim-neoclip.lua\"\n    },\n    \"nvim-nio\": {\n      \"rev\": \"21f5324\",\n      \"src\": \"https://github.com/nvim-neotest/nvim-nio\"\n    },\n    \"nvim-notify\": {\n      \"rev\": \"8701bec\",\n      \"src\": \"https://github.com/rcarriga/nvim-notify\"\n    },\n    \"nvim-treesitter\": {\n      \"rev\": \"42fc28ba\",\n      \"src\": \"https://github.com/nvim-treesitter/nvim-treesitter\"\n    },\n    \"nvim-treesitter-context\": {\n      \"rev\": \"41847d3\",\n      \"src\": \"https://github.com/nvim-treesitter/nvim-treesitter-context\"\n    },\n    \"onedarkpro.nvim\": {\n      \"rev\": \"eeac884\",\n      \"src\": \"https://github.com/olimorris/onedarkpro.nvim\"\n    },\n    \"plenary.nvim\": {\n      \"rev\": \"b9fd522\",\n      \"src\": \"https://github.com/nvim-lua/plenary.nvim\"\n    },\n    \"render-markdown.nvim\": {\n      \"rev\": \"f3321d0\",\n      \"src\": \"https://github.com/MeanderingProgrammer/render-markdown.nvim\"\n    },\n    \"sqlite.lua\": {\n      \"rev\": \"50092d6\",\n      \"src\": \"https://github.com/kkharji/sqlite.lua\"\n    },\n    \"telescope-dap.nvim\": {\n      \"rev\": \"783366b\",\n      \"src\": \"https://github.com/nvim-telescope/telescope-dap.nvim\"\n    },\n    \"telescope-fzf-native.nvim\": {\n      \"rev\": \"1f08ed6\",\n      \"src\": \"https://github.com/nvim-telescope/telescope-fzf-native.nvim\"\n    },\n    \"telescope.nvim\": {\n      \"rev\": \"b4da76b\",\n      \"src\": \"https://github.com/nvim-telescope/telescope.nvim\"\n    },\n    \"tiny-inline-diagnostic.nvim\": {\n      \"rev\": \"6d8dc61\",\n      \"src\": \"https://github.com/rachartier/tiny-inline-diagnostic.nvim\"\n    },\n    \"todo-comments.nvim\": [],\n    \"translate.nvim\": {\n      \"rev\": \"1a841e5\",\n      \"src\": \"https://github.com/uga-rosa/translate.nvim\"\n    },\n    \"trouble.nvim\": {\n      \"rev\": \"c098362\",\n      \"src\": \"https://github.com/folke/trouble.nvim\"\n    },\n    \"undotree\": {\n      \"rev\": \"0f1c981\",\n      \"src\": \"https://github.com/mbbill/undotree\"\n    },\n    \"which-key.nvim\": {\n      \"rev\": \"b4177e3\",\n      \"src\": \"https://github.com/folke/which-key.nvim\"\n    },\n    \"yazi.nvim\": {\n      \"rev\": \"5127a44\",\n      \"src\": \"https://github.com/mikavilpas/yazi.nvim\"\n    }\n  }\n}\n```\nHere are the contents of my file.\nHowever, after I tried removing the nvim-pack-lock.json file, the error no longer occurred. May I ask what the reason for this is?\n\n\n",
            "created_at": "2025-10-20T05:26:40Z",
            "html_url": "https://github.com/neovim/neovim/issues/36254#issuecomment-3420618730",
            "id": 3420618730,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36254",
            "node_id": "IC_kwDOAPphoM7L4n_q",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3420618730/reactions"
            },
            "updated_at": "2025-10-20T05:26:40Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3420618730",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41811005?v=4",
                "events_url": "https://api.github.com/users/micsama/events{/privacy}",
                "followers_url": "https://api.github.com/users/micsama/followers",
                "following_url": "https://api.github.com/users/micsama/following{/other_user}",
                "gists_url": "https://api.github.com/users/micsama/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/micsama",
                "id": 41811005,
                "login": "micsama",
                "node_id": "MDQ6VXNlcjQxODExMDA1",
                "organizations_url": "https://api.github.com/users/micsama/orgs",
                "received_events_url": "https://api.github.com/users/micsama/received_events",
                "repos_url": "https://api.github.com/users/micsama/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/micsama/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/micsama/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/micsama",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "I just ran into this issue. The problem is that you have deleted a plugin from the list of strings installing plugins in `add()` but have not first run `del()` on the plugin, or deleted the plugin on disk. The plugin still exists in `site/pack/core/opt/`.\n\nI think this is a Neovim issue where it's trying to update a plugin it partially recognises, but which has never had `add()` called on it (in the current Neovim session, at least) because Neovim is reading outdated plugin data from somewhere. This issue may have started appearing in about the last week, since I think I had some plugins hanging around that I had removed from the `add()` call but had not explicitly deleted yet. I first noticed this problem a couple of days ago.\n\nTo fix your immediate problem, delete the offending plugin(s) from `~/.local/share/nvim/site/pack/core/opt/`.\n\nAfter a brief read this looks related, perhaps there's an unwanted interaction involving the pack lock file too:\nhttps://github.com/neovim/neovim/issues/36231\n",
            "created_at": "2025-10-20T09:18:17Z",
            "html_url": "https://github.com/neovim/neovim/issues/36254#issuecomment-3421187482",
            "id": 3421187482,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36254",
            "node_id": "IC_kwDOAPphoM7L6y2a",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3421187482/reactions"
            },
            "updated_at": "2025-10-20T09:38:15Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3421187482",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41450706?v=4",
                "events_url": "https://api.github.com/users/fin-w/events{/privacy}",
                "followers_url": "https://api.github.com/users/fin-w/followers",
                "following_url": "https://api.github.com/users/fin-w/following{/other_user}",
                "gists_url": "https://api.github.com/users/fin-w/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fin-w",
                "id": 41450706,
                "login": "fin-w",
                "node_id": "MDQ6VXNlcjQxNDUwNzA2",
                "organizations_url": "https://api.github.com/users/fin-w/orgs",
                "received_events_url": "https://api.github.com/users/fin-w/received_events",
                "repos_url": "https://api.github.com/users/fin-w/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fin-w/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fin-w/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fin-w",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> The problem is that you have deleted a plugin from the list of strings installing plugins in `add()` but have not first run `del()` on the plugin, or deleted the plugin on disk.\n\nConfirmed. At minimum we can at least show a more useful error, but probably worth the cost to actually handle this case somehow.",
            "created_at": "2025-10-20T21:53:31Z",
            "html_url": "https://github.com/neovim/neovim/issues/36254#issuecomment-3423866144",
            "id": 3423866144,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36254",
            "node_id": "IC_kwDOAPphoM7MFA0g",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3423866144/reactions"
            },
            "updated_at": "2025-10-20T21:53:31Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3423866144",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 4,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/36254/comments",
    "created_at": "2025-10-20T01:42:02Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/36254/events",
    "html_url": "https://github.com/neovim/neovim/issues/36254",
    "id": 3530724594,
    "issue_dependencies_summary": {
        "blocked_by": 0,
        "blocking": 0,
        "total_blocked_by": 0,
        "total_blocking": 0
    },
    "labels": [
        {
            "color": "bfd4f2",
            "default": false,
            "description": "vim.pack, start/opt packages, 'packpath'",
            "id": 8889050758,
            "name": "packages",
            "node_id": "LA_kwDOAPphoM8AAAACEdQmhg",
            "url": "https://api.github.com/repos/neovim/neovim/labels/packages"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/36254/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM7ScpTy",
    "number": 36254,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/36254/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/36254/timeline",
    "title": "vim.pack.update() -> expected non-empty string, got nil",
    "type": {
        "color": "red",
        "created_at": "2024-01-25T10:10:19Z",
        "description": "An unexpected problem or behavior",
        "id": 597163,
        "is_enabled": true,
        "name": "Bug",
        "node_id": "IT_kwDOAGK_Pc4ACRyr",
        "updated_at": "2024-07-26T10:12:30Z"
    },
    "updated_at": "2025-10-20T21:53:31Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/36254",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/41811005?v=4",
        "events_url": "https://api.github.com/users/micsama/events{/privacy}",
        "followers_url": "https://api.github.com/users/micsama/followers",
        "following_url": "https://api.github.com/users/micsama/following{/other_user}",
        "gists_url": "https://api.github.com/users/micsama/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/micsama",
        "id": 41811005,
        "login": "micsama",
        "node_id": "MDQ6VXNlcjQxODExMDA1",
        "organizations_url": "https://api.github.com/users/micsama/orgs",
        "received_events_url": "https://api.github.com/users/micsama/received_events",
        "repos_url": "https://api.github.com/users/micsama/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/micsama/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/micsama/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/micsama",
        "user_view_type": "public"
    }
}