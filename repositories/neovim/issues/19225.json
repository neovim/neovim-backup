{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Neovim version (nvim -v)\r\n\r\nNVIM v0.7.2\r\n\r\n### Vim (not Nvim) behaves the same?\r\n\r\nNO, VIM - Vi IMproved 9.0\r\n\r\n### Operating system/version\r\n\r\nArch Linux\r\n\r\n### Terminal name/version\r\n\r\nfoot version: 1.12.1, alacritty 0.10.1\r\n\r\n### $TERM environment variable\r\n\r\ntmux-256color when using foot, xterm-256color when using alacritty\r\n\r\n### Installation\r\n\r\n[Arch Linux Official Repositories](https://archlinux.org/packages/community/x86_64/neovim/)\r\n\r\n### How to reproduce the issue\r\n\r\n1. Open `nvim --clean sample.html` and select the entire text mentioned below and wrap it/format it using `gq`.\r\n\r\n```\r\n<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna\r\naliqua. Pellentesque habitant morbi tristique senectus. Volutpat blandit aliquam etiam erat velit scelerisque in\r\ndictum. Lorem ipsum dolor sit amet consectetur adipiscing. Mattis nunc sed blandit <code>volutpat sed</code> cras.\r\nUltrices dui sapien eget mi proin sed libero enim. Consectetur adipiscing elit ut aliquam purus sit. Id faucibus nisl\r\ntincidunt eget nullam non nisi est sit. Scelerisque purus <a href=\"/\">semper eget</a> duis at tellus\r\nat urna. Enim sit amet venenatis urna cursus eget nunc scelerisque. Eu non diam phasellus vestibulum lorem sed. Enim\r\nsit amet venenatis urna cursus eget. <a href=\"/\"><code>Scelerisque</code></a> varius morbi enim nunc\r\nfaucibus a pellentesque sit amet. Faucibus purus in massa tempor nec feugiat nisl pretium fusce. Enim tortor at auctor\r\nurna nunc id. Blandit massa enim nec dui nunc mattis. Arcu non odio euismod lacinia at quis risus. Donec adipiscing\r\n<mark>tristique risus</mark> nec feugiat in fermentum posuere. Magna eget est lorem ipsum dolor sit. Amet nisl suscipit\r\nadipiscing bibendum est ultricies integer quis.<sup><a href=\"https://sample.com\">note 1</a></sup></p>\r\n```\r\n\r\n2. The cursor shape will change from block to vertical.\r\n\r\n\r\nhttps://user-images.githubusercontent.com/79408161/177176429-4fe3bd8e-9b41-4b70-9f6c-7ba5c36db2b5.mp4\r\n\r\n\r\n\r\n### Expected behavior\r\n\r\nThe cursor shape shouldn't change from block to vertical. This is how `vim` behaves out of the box with `-u DEFAULTS` and `--clean` as well.\r\n\r\n\r\nhttps://user-images.githubusercontent.com/79408161/177176566-5de95b4f-3692-4532-aa59-e1ad7c160ad9.mp4\r\n\r\n\r\n\r\n### Actual behavior\r\n\r\nThe shape of the cursor changes from block to vertical bar.\r\n\r\nI tried changing `guicursor` from the nvim default of `guicursor=n-v-c-sm:block,i-ci-ve:ver25,r-cr-o:hor20` to the vim default of `guicursor=n-v-c:block,o:hor50,i-ci:hor15,r-cr:hor30,sm:block` but that didn't help.",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "Reproduced in GUI as well.",
            "created_at": "2022-07-04T14:44:18Z",
            "html_url": "https://github.com/neovim/neovim/issues/19225#issuecomment-1173900443",
            "id": 1173900443,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/19225",
            "node_id": "IC_kwDOAPphoM5F-Eyb",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1173900443/reactions"
            },
            "updated_at": "2022-07-04T14:44:24Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1173900443",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Seem to be a regression between v0.6.0 and v0.7.0.",
            "created_at": "2022-07-04T14:47:33Z",
            "html_url": "https://github.com/neovim/neovim/issues/19225#issuecomment-1173903468",
            "id": 1173903468,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/19225",
            "node_id": "IC_kwDOAPphoM5F-Fhs",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1173903468/reactions"
            },
            "updated_at": "2022-07-04T14:47:33Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1173903468",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 2,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/19225/comments",
    "created_at": "2022-07-04T14:40:52Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/19225/events",
    "html_url": "https://github.com/neovim/neovim/issues/19225",
    "id": 1293265723,
    "labels": [
        {
            "color": "f9d0c4",
            "default": false,
            "description": "wrong behavior that was introduced in a previous commit (please bisect)",
            "id": 619474658,
            "name": "bug-regression",
            "node_id": "MDU6TGFiZWw2MTk0NzQ2NTg=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug-regression"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/19225/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM5NFas7",
    "number": 19225,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/19225/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/19225/timeline",
    "title": "cursor shape changes after formatting HTML text with `gq`",
    "updated_at": "2025-01-19T11:51:34Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/19225",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/79408161?v=4",
        "events_url": "https://api.github.com/users/ayushnix/events{/privacy}",
        "followers_url": "https://api.github.com/users/ayushnix/followers",
        "following_url": "https://api.github.com/users/ayushnix/following{/other_user}",
        "gists_url": "https://api.github.com/users/ayushnix/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/ayushnix",
        "id": 79408161,
        "login": "ayushnix",
        "node_id": "MDQ6VXNlcjc5NDA4MTYx",
        "organizations_url": "https://api.github.com/users/ayushnix/orgs",
        "received_events_url": "https://api.github.com/users/ayushnix/received_events",
        "repos_url": "https://api.github.com/users/ayushnix/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/ayushnix/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/ayushnix/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/ayushnix",
        "user_view_type": "public"
    }
}