{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "MEMBER",
    "body": "### Problem\n\nThere is no way, not even programmatically, for a user or plugin to put multiline input into the prompt of a `buftype=prompt` buffer.\n\nAlso, pasting multiline input into a prompt buffer (via `nvim_paste` or insert-mode `<c-r>+`) is obviously broken.\n\nThis is not in vim's issue tracker, nor its todo list: https://github.com/vim/vim/blob/88ce0c546b54ecb0dc573b99cde6246f87b42687/runtime/doc/todo.txt#L230-L233\n\n### Expected behavior\n\n\n- Phase 1\n  - Allow the prompt \"invoke\" action to be remapped, e.g. instead of Enter it could be Shift-Enter.\n  - By default, when the user pastes or puts text (`p`, `i_ctrl-r`, cmd+v), Nvim replaces newlines with `<space>` char.\n  - Pasting (including `<c-r>+`) and \"put\" (`p`) should never invoke the prompt (by default). The prompt should invoke only when the user hits Enter.\n      - related: https://github.com/neovim/neovim/issues/15136\n- Phase 2\n  - Allow multiline input in a prompt (support multiline text without replacing newlines).\n     - The `prompt_setcallback()` handler gets the full multiline input, not only the last line.\n     - **Open question:** How can the user *edit* the full multiline input?\n",
    "closed_at": "2025-06-17T15:46:58Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
        "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
        "followers_url": "https://api.github.com/users/justinmk/followers",
        "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
        "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/justinmk",
        "id": 1359421,
        "login": "justinmk",
        "node_id": "MDQ6VXNlcjEzNTk0MjE=",
        "organizations_url": "https://api.github.com/users/justinmk/orgs",
        "received_events_url": "https://api.github.com/users/justinmk/received_events",
        "repos_url": "https://api.github.com/users/justinmk/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/justinmk",
        "user_view_type": "public"
    },
    "comment_data": [
        {
            "author_association": "CONTRIBUTOR",
            "body": "I would like to work on this. Is there anything I should be particularly careful about?\n\nI am thinking:\n - Enter can still be invoke by default\n - Shift + Enter enters a new line in the prompt",
            "created_at": "2025-02-12T17:29:07Z",
            "html_url": "https://github.com/neovim/neovim/issues/32420#issuecomment-2654400814",
            "id": 2654400814,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32420",
            "node_id": "IC_kwDOAPphoM6eNvEu",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 3,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 2,
                "laugh": 0,
                "rocket": 0,
                "total_count": 5,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2654400814/reactions"
            },
            "updated_at": "2025-02-12T17:29:07Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2654400814",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/68201519?v=4",
                "events_url": "https://api.github.com/users/siddhantdev/events{/privacy}",
                "followers_url": "https://api.github.com/users/siddhantdev/followers",
                "following_url": "https://api.github.com/users/siddhantdev/following{/other_user}",
                "gists_url": "https://api.github.com/users/siddhantdev/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/siddhantdev",
                "id": 68201519,
                "login": "siddhantdev",
                "node_id": "MDQ6VXNlcjY4MjAxNTE5",
                "organizations_url": "https://api.github.com/users/siddhantdev/orgs",
                "received_events_url": "https://api.github.com/users/siddhantdev/received_events",
                "repos_url": "https://api.github.com/users/siddhantdev/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/siddhantdev/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/siddhantdev/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/siddhantdev",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> Is there anything I should be particularly careful about?\n\nIn terms of implementation, my first thought is that instead of special-casing `<CR>` as in the current implementation, we should:\n\n- add a new `prompt_send()` function which does what `<CR>` currently does.\n- map `<CR>` to `prompt_send()` by default (to mimic the current behavior)",
            "created_at": "2025-02-12T18:09:19Z",
            "html_url": "https://github.com/neovim/neovim/issues/32420#issuecomment-2654490853",
            "id": 2654490853,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32420",
            "node_id": "IC_kwDOAPphoM6eOFDl",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2654490853/reactions"
            },
            "updated_at": "2025-02-12T18:09:19Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2654490853",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I attempted to implement a similar feature in mfussenegger/nvim-dap#773 you can look into it for details, it's important to note that Shift-Enter will not work in all terminals which could be problematic. Ctrl-C should work though for stopping multiline mode.\nI suggest looking into the repl mode for IPython and Node as reference of nice features to have. For example in IPython when you start with `def hello():<cr>` it automatically knows that you want to enter multiline mode and it also indents your next prompt.\n![Image](https://github.com/user-attachments/assets/ab3c70f9-4917-4a9a-81c0-84c81ffb80d4)\n\nNode also knows to enter multiline mode automatically, if you make a syntax error while in multiline mode, it will exit on the next <cr> letting you know what fails. Both also close multiline mode on their own.\n![Image](https://github.com/user-attachments/assets/d5cdb903-c60b-4159-ae3a-6a9a85dbf038)\n",
            "created_at": "2025-02-12T19:54:14Z",
            "html_url": "https://github.com/neovim/neovim/issues/32420#issuecomment-2654709976",
            "id": 2654709976,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32420",
            "node_id": "IC_kwDOAPphoM6eO6jY",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 3,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 3,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2654709976/reactions"
            },
            "updated_at": "2025-02-12T19:55:15Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2654709976",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/20954878?v=4",
                "events_url": "https://api.github.com/users/LiadOz/events{/privacy}",
                "followers_url": "https://api.github.com/users/LiadOz/followers",
                "following_url": "https://api.github.com/users/LiadOz/following{/other_user}",
                "gists_url": "https://api.github.com/users/LiadOz/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/LiadOz",
                "id": 20954878,
                "login": "LiadOz",
                "node_id": "MDQ6VXNlcjIwOTU0ODc4",
                "organizations_url": "https://api.github.com/users/LiadOz/orgs",
                "received_events_url": "https://api.github.com/users/LiadOz/received_events",
                "repos_url": "https://api.github.com/users/LiadOz/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/LiadOz/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/LiadOz/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/LiadOz",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> For example in IPython when you start with `def hello():<cr>` it automatically knows that you want to enter multiline mode and it also indents your next prompt.\n\nThat might already work for all we know, except we can't know until it becomes actually possible to... enter a linebreak in the prompt.",
            "created_at": "2025-02-12T21:52:21Z",
            "html_url": "https://github.com/neovim/neovim/issues/32420#issuecomment-2654922938",
            "id": 2654922938,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32420",
            "node_id": "IC_kwDOAPphoM6ePui6",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2654922938/reactions"
            },
            "updated_at": "2025-02-12T21:52:21Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2654922938",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 4,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/32420/comments",
    "created_at": "2025-02-12T17:06:51Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/32420/events",
    "html_url": "https://github.com/neovim/neovim/issues/32420",
    "id": 2848875179,
    "labels": [
        {
            "color": "c5def5",
            "default": false,
            "description": null,
            "id": 396626349,
            "name": "input",
            "node_id": "MDU6TGFiZWwzOTY2MjYzNDk=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/input"
        },
        {
            "color": "C5DEF5",
            "default": false,
            "description": "",
            "id": 7421978602,
            "name": "editor",
            "node_id": "LA_kwDOAPphoM8AAAABumJn6g",
            "url": "https://api.github.com/repos/neovim/neovim/labels/editor"
        },
        {
            "color": "C5DEF5",
            "default": false,
            "description": "buftype=prompt",
            "id": 8140369188,
            "name": "prompt-buffer",
            "node_id": "LA_kwDOAPphoM8AAAAB5TQtJA",
            "url": "https://api.github.com/repos/neovim/neovim/labels/prompt-buffer"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/32420/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 76,
        "created_at": "2024-05-16T14:11:54Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
            "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
            "followers_url": "https://api.github.com/users/justinmk/followers",
            "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/justinmk",
            "id": 1359421,
            "login": "justinmk",
            "node_id": "MDQ6VXNlcjEzNTk0MjE=",
            "organizations_url": "https://api.github.com/users/justinmk/orgs",
            "received_events_url": "https://api.github.com/users/justinmk/received_events",
            "repos_url": "https://api.github.com/users/justinmk/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/justinmk",
            "user_view_type": "public"
        },
        "description": "",
        "due_on": null,
        "html_url": "https://github.com/neovim/neovim/milestone/43",
        "id": 11063573,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/43/labels",
        "node_id": "MI_kwDOAPphoM4AqNEV",
        "number": 43,
        "open_issues": 68,
        "state": "open",
        "title": "0.12",
        "updated_at": "2025-06-23T23:48:57Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/43"
    },
    "node_id": "I_kwDOAPphoM6pzmKr",
    "number": 32420,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 7,
        "total_count": 7,
        "url": "https://api.github.com/repos/neovim/neovim/issues/32420/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "completed",
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/32420/timeline",
    "title": "prompt buffer supports multiline input",
    "type": {
        "color": "blue",
        "created_at": "2024-01-25T10:10:19Z",
        "description": "A request, idea, or new functionality",
        "id": 597167,
        "is_enabled": true,
        "name": "Enhancement",
        "node_id": "IT_kwDOAGK_Pc4ACRyv",
        "updated_at": "2024-07-26T10:12:30Z"
    },
    "updated_at": "2025-06-18T12:53:25Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/32420",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
        "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
        "followers_url": "https://api.github.com/users/justinmk/followers",
        "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
        "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/justinmk",
        "id": 1359421,
        "login": "justinmk",
        "node_id": "MDQ6VXNlcjEzNTk0MjE=",
        "organizations_url": "https://api.github.com/users/justinmk/orgs",
        "received_events_url": "https://api.github.com/users/justinmk/received_events",
        "repos_url": "https://api.github.com/users/justinmk/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/justinmk",
        "user_view_type": "public"
    }
}