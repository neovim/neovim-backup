{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\n\nI'm trying to add a `lastused` property to `vim.fn.getwininfo`, like in `vim.fn.getbufinfo`.\r\n\r\nIt's just a timestamp for when a windown was last entered into\r\n\r\nI've made a start: https://github.com/neovim/neovim/pull/28742 and for the most part it works, however, there's one case where it doesn't work as expected;\r\n\r\nIf a buffer is opened in multiple windows, the timestamp (`w_last_used`) won't get updated when you enter any of the other windows, apart from the first window that the buffer was opened in and all the windows display the same timestamp as the first window.\r\n\r\n**Please note** I'm completly new to this codebase and any help to pointing me to the right direction, or just any tips/guidance in general would be greatly appreciated\r\n\r\n## Background\r\nIn case anyone is curious as to why I want this;\r\n\r\nIt's to do with the qf window, specifically what happens when you select an item in the qf window that's open in multiple windows.\r\n\r\nWhen I'm developing, I may have multiple windows open of the same buffer (due to me jumping around the code).\r\n\r\nIf there's an item in the qf window that's open in multiple windows, I would like that item to open in the windown that was most reccently accessed, see; https://github.com/kevinhwang91/nvim-bqf/pull/140/files\n\n### Expected behavior\n\nI expect each window to have it's timestamp updated each time I enter it",
    "closed_at": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "This is related to a more general idea, which is that currently it's clumsy and unreliable to get a history of accesses (\"touches\"/\"last-used\"/\"recent\") to buffers/windows/tabpages.\r\n\r\nCross-posting from https://github.com/neovim/neovim/pull/28742#issuecomment-2110270197 : \r\n\r\n> I think we clearly want last-used history, and `last_used: datetime` could avoid maintaining an extra ringbuffer for each object type.\r\n> \r\n> So instead of:\r\n> \r\n> ```\r\n> histget('win')\r\n> histget('buf')\r\n> histget('tabpage')\r\n> ```\r\n> \r\n> users/plugins could get the last-used history by sorting on `last_used`. And even if we provide `histget('win')`, that could internally use the same approach.\r\n> \r\n> Use-cases: Having a history of last-used bufs/wins/tabs would\r\n> \r\n> * improve the behavior of `g<tab>`\r\n> * helps implement [ZB](https://github.com/neovim/neovim/issues/2434) (delete buffer without losing split)\r\n> * helps implement `histget('win')`, `histget('buf')`, etc.\r\n> \r\n> Caveat: multple windows could have the same `last_used` timestamp, then the \"history\" is not 100% reliable. But storing microsecond-granularity should be good enough.\r\n\r\n",
            "created_at": "2024-05-14T15:56:03Z",
            "html_url": "https://github.com/neovim/neovim/issues/28745#issuecomment-2110590449",
            "id": 2110590449,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/28745",
            "node_id": "IC_kwDOAPphoM59zQ3x",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2110590449/reactions"
            },
            "updated_at": "2024-05-14T15:56:03Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2110590449",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "author_association": "NONE",
            "body": "I've done some more digging into this and started to realize the scale of my naivety about this change....\r\n\r\nIn short, it looks like `entering_window()` https://github.com/neovim/neovim/blob/041b0f9202db08f1b6d0182ceb52ffc1077e0697/src/nvim/window.c#L2435 gets used **a lot**.\r\n\r\nI created a counter for each window to keep track when a `window_entered()` is called for any given window and it looks like when just writing a file alone `window_entered()` gets called 17 times!\r\n\r\nWhat's the likelihood that `entering_window()` can be extended to have an aditional parameter something like;\r\n\r\n`void entering_window(win_T *const win, user_command bool)`\r\n\r\nwhere `user_command bool` signifies that the call to `window_entered()` was as a result of a user action or not.\r\n\r\nDo you think this change or somerthing similar would be OK to make or do you think would I face objections to this?\r\n\r\n\r\n\r\n",
            "created_at": "2024-05-15T13:36:12Z",
            "html_url": "https://github.com/neovim/neovim/issues/28745#issuecomment-2112556063",
            "id": 2112556063,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/28745",
            "node_id": "IC_kwDOAPphoM596wwf",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2112556063/reactions"
            },
            "updated_at": "2024-05-15T13:36:12Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2112556063",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/66622793?v=4",
                "events_url": "https://api.github.com/users/kkrime/events{/privacy}",
                "followers_url": "https://api.github.com/users/kkrime/followers",
                "following_url": "https://api.github.com/users/kkrime/following{/other_user}",
                "gists_url": "https://api.github.com/users/kkrime/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/kkrime",
                "id": 66622793,
                "login": "kkrime",
                "node_id": "MDQ6VXNlcjY2NjIyNzkz",
                "organizations_url": "https://api.github.com/users/kkrime/orgs",
                "received_events_url": "https://api.github.com/users/kkrime/received_events",
                "repos_url": "https://api.github.com/users/kkrime/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/kkrime/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/kkrime/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/kkrime"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I don't think that's better than adding the code somewhere else outside that function.",
            "created_at": "2024-05-15T13:59:59Z",
            "html_url": "https://github.com/neovim/neovim/issues/28745#issuecomment-2112629448",
            "id": 2112629448,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/28745",
            "node_id": "IC_kwDOAPphoM597CrI",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2112629448/reactions"
            },
            "updated_at": "2024-05-15T13:59:59Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2112629448",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq"
            }
        },
        {
            "author_association": "NONE",
            "body": "@zeertzjq where do you think it would be best to add a `user_command` flag and set the `w_last_used` timestamp?",
            "created_at": "2024-05-15T14:09:14Z",
            "html_url": "https://github.com/neovim/neovim/issues/28745#issuecomment-2112656309",
            "id": 2112656309,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/28745",
            "node_id": "IC_kwDOAPphoM597JO1",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2112656309/reactions"
            },
            "updated_at": "2024-05-15T14:09:30Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2112656309",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/66622793?v=4",
                "events_url": "https://api.github.com/users/kkrime/events{/privacy}",
                "followers_url": "https://api.github.com/users/kkrime/followers",
                "following_url": "https://api.github.com/users/kkrime/following{/other_user}",
                "gists_url": "https://api.github.com/users/kkrime/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/kkrime",
                "id": 66622793,
                "login": "kkrime",
                "node_id": "MDQ6VXNlcjY2NjIyNzkz",
                "organizations_url": "https://api.github.com/users/kkrime/orgs",
                "received_events_url": "https://api.github.com/users/kkrime/received_events",
                "repos_url": "https://api.github.com/users/kkrime/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/kkrime/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/kkrime/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/kkrime"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I don't think that flag is needed if you move the code out of `entering_window()`.",
            "created_at": "2024-05-15T14:11:47Z",
            "html_url": "https://github.com/neovim/neovim/issues/28745#issuecomment-2112662464",
            "id": 2112662464,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/28745",
            "node_id": "IC_kwDOAPphoM597KvA",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2112662464/reactions"
            },
            "updated_at": "2024-05-15T14:11:47Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2112662464",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq"
            }
        }
    ],
    "comments": 5,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/28745/comments",
    "created_at": "2024-05-14T15:44:36Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/28745/events",
    "html_url": "https://github.com/neovim/neovim/issues/28745",
    "id": 2295822393,
    "labels": [
        {
            "color": "c2e0c6",
            "default": true,
            "description": "feature request",
            "id": 77997476,
            "name": "enhancement",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3Ng==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/enhancement"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/28745/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 621,
        "created_at": "2014-05-10T20:43:04Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
            "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
            "followers_url": "https://api.github.com/users/justinmk/followers",
            "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/justinmk",
            "id": 1359421,
            "login": "justinmk",
            "node_id": "MDQ6VXNlcjEzNTk0MjE=",
            "organizations_url": "https://api.github.com/users/justinmk/orgs",
            "received_events_url": "https://api.github.com/users/justinmk/received_events",
            "repos_url": "https://api.github.com/users/justinmk/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/justinmk"
        },
        "description": "Low priority. Not planned for the current target, may be reassigned.",
        "due_on": null,
        "html_url": "https://github.com/neovim/neovim/milestone/6",
        "id": 655037,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/6/labels",
        "node_id": "MDk6TWlsZXN0b25lNjU1MDM3",
        "number": 6,
        "open_issues": 535,
        "state": "open",
        "title": "backlog",
        "updated_at": "2024-05-17T18:53:34Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/6"
    },
    "node_id": "I_kwDOAPphoM6I13g5",
    "number": 28745,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 2,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 2,
        "url": "https://api.github.com/repos/neovim/neovim/issues/28745/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/28745/timeline",
    "title": "lastused property for windows/buffers/tabpages (\"MRU history\")",
    "updated_at": "2024-05-15T14:11:49Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/28745",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/66622793?v=4",
        "events_url": "https://api.github.com/users/kkrime/events{/privacy}",
        "followers_url": "https://api.github.com/users/kkrime/followers",
        "following_url": "https://api.github.com/users/kkrime/following{/other_user}",
        "gists_url": "https://api.github.com/users/kkrime/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/kkrime",
        "id": 66622793,
        "login": "kkrime",
        "node_id": "MDQ6VXNlcjY2NjIyNzkz",
        "organizations_url": "https://api.github.com/users/kkrime/orgs",
        "received_events_url": "https://api.github.com/users/kkrime/received_events",
        "repos_url": "https://api.github.com/users/kkrime/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/kkrime/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/kkrime/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/kkrime"
    }
}