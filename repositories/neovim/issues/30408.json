{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "MEMBER",
    "body": "### Problem\r\n\r\nRunning the test [server -> client connecting to its own pipe address does not deadlock](https://github.com/neovim/neovim/blob/5792546777332361a9ac49107e46149c703de90e/test/functional/api/server_requests_spec.lua#L387) deadlocks on macos when the environment has `XDG_RUNTIME_DIR=/tmp`.\r\n\r\nThe value is incorrect, but It still shouldn't deadlock.\r\n\r\n### Steps to reproduce\r\n\r\n```\r\nexport XDG_RUNTIME_DIR=/tmp\r\nTEST_FILE=test/functional/api/server_requests_spec.lua TEST_FILTER='deadlock' make test\r\n```\r\n\r\n### Expected behavior\r\n\r\nTest passes, it does not deadlock.\r\n\r\n### Neovim version (nvim -v)\r\n\r\nv0.11.0-dev-724+g439d03174\r\n\r\n### Vim (not Nvim) behaves the same?\r\n\r\ndoesn't apply\r\n\r\n### Operating system/version\r\n\r\nmacos 14.6.1\r\n\r\n### Terminal name/version\r\n\r\nKitty 0.36.2\r\n\r\n### $TERM environment variable\r\n\r\nxterm-256color\r\n\r\n### Installation\r\n\r\nbuild from repo",
    "closed_at": "2025-10-10T01:04:03Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
        "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
        "followers_url": "https://api.github.com/users/justinmk/followers",
        "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
        "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/justinmk",
        "id": 1359421,
        "login": "justinmk",
        "node_id": "MDQ6VXNlcjEzNTk0MjE=",
        "organizations_url": "https://api.github.com/users/justinmk/orgs",
        "received_events_url": "https://api.github.com/users/justinmk/received_events",
        "repos_url": "https://api.github.com/users/justinmk/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/justinmk",
        "user_view_type": "public"
    },
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "## Proposal\r\n\r\nDepending on the nature of the \"broken XDG\" or \"broken runtime dir\", Nvim should detect that issue and at least write a log message, or even fail to start.\r\n\r\nIf that's already the case, then the next problem is that the test runner should make this failure more visible, instead of just hanging.",
            "created_at": "2024-09-17T13:44:27Z",
            "html_url": "https://github.com/neovim/neovim/issues/30408#issuecomment-2355858624",
            "id": 2355858624,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30408",
            "node_id": "IC_kwDOAPphoM6Ma4zA",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2355858624/reactions"
            },
            "updated_at": "2024-09-17T13:44:27Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2355858624",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Seems related to https://github.com/neovim/neovim/issues/30282\r\n\r\nAs referenced in:\r\n\r\nhttps://github.com/neovim/neovim/blob/a0d8c2b86e788ce4273f0b8df258cd9e8e432d38/src/nvim/msgpack_rpc/server.c#L65-L69",
            "created_at": "2024-09-17T13:48:10Z",
            "html_url": "https://github.com/neovim/neovim/issues/30408#issuecomment-2355871385",
            "id": 2355871385,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30408",
            "node_id": "IC_kwDOAPphoM6Ma76Z",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2355871385/reactions"
            },
            "updated_at": "2024-09-17T13:48:10Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2355871385",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9699804?v=4",
                "events_url": "https://api.github.com/users/muniter/events{/privacy}",
                "followers_url": "https://api.github.com/users/muniter/followers",
                "following_url": "https://api.github.com/users/muniter/following{/other_user}",
                "gists_url": "https://api.github.com/users/muniter/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/muniter",
                "id": 9699804,
                "login": "muniter",
                "node_id": "MDQ6VXNlcjk2OTk4MDQ=",
                "organizations_url": "https://api.github.com/users/muniter/orgs",
                "received_events_url": "https://api.github.com/users/muniter/received_events",
                "repos_url": "https://api.github.com/users/muniter/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/muniter/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/muniter/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/muniter",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "I ran into a similar issue with error E5108 serverstart. It started happening when setting up fzf-lua plugin + session management. The XDG_RUNTIME_DIR variable got set at some point (probably related to my tmux/zsh config). \nXDG_RUNTIME_DIR=/run/user/1000\n\nFor a quick fix:\nEither unset the XDG_RUNTIME_DIR or create a dir at the specified path with permissions 700.",
            "created_at": "2025-02-17T16:42:19Z",
            "html_url": "https://github.com/neovim/neovim/issues/30408#issuecomment-2663620546",
            "id": 2663620546,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30408",
            "node_id": "IC_kwDOAPphoM6ew5_C",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2663620546/reactions"
            },
            "updated_at": "2025-02-17T17:57:02Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2663620546",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9157995?v=4",
                "events_url": "https://api.github.com/users/shawnfelix/events{/privacy}",
                "followers_url": "https://api.github.com/users/shawnfelix/followers",
                "following_url": "https://api.github.com/users/shawnfelix/following{/other_user}",
                "gists_url": "https://api.github.com/users/shawnfelix/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/shawnfelix",
                "id": 9157995,
                "login": "shawnfelix",
                "node_id": "MDQ6VXNlcjkxNTc5OTU=",
                "organizations_url": "https://api.github.com/users/shawnfelix/orgs",
                "received_events_url": "https://api.github.com/users/shawnfelix/received_events",
                "repos_url": "https://api.github.com/users/shawnfelix/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/shawnfelix/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/shawnfelix/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/shawnfelix",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 3,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/30408/comments",
    "created_at": "2024-09-17T13:36:28Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/30408/events",
    "html_url": "https://github.com/neovim/neovim/issues/30408",
    "id": 2531192305,
    "issue_dependencies_summary": {
        "blocked_by": 0,
        "blocking": 0,
        "total_blocked_by": 0,
        "total_blocking": 0
    },
    "labels": [
        {
            "color": "c5def5",
            "default": false,
            "description": "",
            "id": 110418643,
            "name": "test",
            "node_id": "MDU6TGFiZWwxMTA0MTg2NDM=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/test"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "user system environment (terminal, shell, tmux)",
            "id": 147354524,
            "name": "environment",
            "node_id": "MDU6TGFiZWwxNDczNTQ1MjQ=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/environment"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "listen",
            "id": 406104372,
            "name": "server",
            "node_id": "MDU6TGFiZWw0MDYxMDQzNzI=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/server"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "OS resources, pipes, streams",
            "id": 713599092,
            "name": "system",
            "node_id": "MDU6TGFiZWw3MTM1OTkwOTI=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/system"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "startup, shutdown, attach, detach",
            "id": 870629450,
            "name": "lifecycle",
            "node_id": "MDU6TGFiZWw4NzA2Mjk0NTA=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/lifecycle"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/30408/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 35,
        "created_at": "2025-09-02T15:27:06Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
            "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
            "followers_url": "https://api.github.com/users/justinmk/followers",
            "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/justinmk",
            "id": 1359421,
            "login": "justinmk",
            "node_id": "MDQ6VXNlcjEzNTk0MjE=",
            "organizations_url": "https://api.github.com/users/justinmk/orgs",
            "received_events_url": "https://api.github.com/users/justinmk/received_events",
            "repos_url": "https://api.github.com/users/justinmk/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/justinmk",
            "user_view_type": "public"
        },
        "description": "",
        "due_on": null,
        "html_url": "https://github.com/neovim/neovim/milestone/53",
        "id": 13605541,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/53/labels",
        "node_id": "MI_kwDOAPphoM4Az5ql",
        "number": 53,
        "open_issues": 18,
        "state": "open",
        "title": "0.11.5",
        "updated_at": "2025-10-11T06:03:02Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/53"
    },
    "node_id": "I_kwDOAPphoM6W3u3x",
    "number": 30408,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/30408/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "completed",
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/30408/timeline",
    "title": "test \"server -> client connecting to its own pipe address\" deadlocks under wrong XDG configuration",
    "type": {
        "color": "red",
        "created_at": "2024-01-25T10:10:19Z",
        "description": "An unexpected problem or behavior",
        "id": 597163,
        "is_enabled": true,
        "name": "Bug",
        "node_id": "IT_kwDOAGK_Pc4ACRyr",
        "updated_at": "2024-07-26T10:12:30Z"
    },
    "updated_at": "2025-10-10T01:04:03Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/30408",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/9699804?v=4",
        "events_url": "https://api.github.com/users/muniter/events{/privacy}",
        "followers_url": "https://api.github.com/users/muniter/followers",
        "following_url": "https://api.github.com/users/muniter/following{/other_user}",
        "gists_url": "https://api.github.com/users/muniter/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/muniter",
        "id": 9699804,
        "login": "muniter",
        "node_id": "MDQ6VXNlcjk2OTk4MDQ=",
        "organizations_url": "https://api.github.com/users/muniter/orgs",
        "received_events_url": "https://api.github.com/users/muniter/received_events",
        "repos_url": "https://api.github.com/users/muniter/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/muniter/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/muniter/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/muniter",
        "user_view_type": "public"
    }
}