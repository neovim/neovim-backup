{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\r\n\r\nNeovim(nvim) doesn't resize to full terminal width upon opening\r\n\r\n[Screenshot](https://imgur.com/a/GsOvnhm)\r\n\r\n\r\n```\r\nnvim --version NVIM v0.9.5 Build type: Release LuaJIT 2.1.1700206165\r\n\r\nsystem vimrc file: \"$VIM/sysinit.vim\" fall-back for $VIM: \"/usr/share/nvim\"\r\nRun :checkhealth for more info\r\n```\r\nHowever, If I run my old compiled version, it was doing the same(ie.doesn't resize to full terminal width ), but upon adding --> `autocmd VimEnter * :silent exec \"!kill -s SIGWINCH $PPID\"` to my .nvimrc it resizes properly on urxvt/alacritty/xterm etc. But addding the above to my .nvimrc for my new nvim(v0.9.5) it makes no difference and doesn't resize to full terminal width.\r\n\r\n\r\n\r\n**----- OLD Version -----**\r\n```\r\n$ nvim --version\r\n\r\nNVIM v0.5.0-dev+1074-ga7d9df996\r\n\r\nBuild type: Release\r\n\r\nLuaJIT 2.1.0-beta3\r\n\r\nCompilation: /usr/bin/cc -O2 -DNDEBUG -Wall -Wextra -pedantic -Wno-unused-parameter -Wstrict-prototypes -std=gnu99 -Wshadow -Wconversion -Wmissing-prototypes -Wimplicit-fallthrough -Wvla -fstack-protector-strong -fno-common -fdiagnostics-color=auto -DINCLUDE_GENERATED_DECLARATIONS -D_GNU_SOURCE -DNVIM_MSGPACK_HAS_FLOAT32 -DNVIM_UNIBI_HAS_VAR_FROM -DMIN_LOG_LEVEL=3 -I/home/H/HL/LAB/NEOVIM_COMPILE/neovim/build/config -I/home/H/HL/LAB/NEOVIM_COMPILE/neovim/src -I/home/H/HL/LAB/NEOVIM_COMPILE/neovim/.deps/usr/include -I/usr/include -I/home/H/HL/LAB/NEOVIM_COMPILE/neovim/build/src/nvim/auto -I/home/H/HL/LAB/NEOVIM_COMPILE/neovim/build/include Compiled by H@kali\r\n\r\nFeatures: +acl +iconv +tui See \":help feature-compile\"\r\n\r\nsystem vimrc file: \"$VIM/sysinit.vim\" fall-back for $VIM: \"/home/H/bin/NVIM_H_COMPILED/nvim/share/nvim\"\r\n\r\nRun :checkhealth for more info\r\n```\r\n**----- OLD Version -----**\r\n\r\n\r\nWindow Manager : DWM 6? OS : Kali\r\n\r\nAny help would be appreciated.. Thanks in advance..\r\n\r\n\r\n### Steps to reproduce\r\n\r\nOpen nvim on any terminal urxvt/alacritty/xterm. I use a Tiling window manager DWM .. when I open another instance of nvim/any other, and close the opened window.. Nvim then occupies full width of the terminal\r\n\r\n### Expected behavior\r\n\r\nNeovim resizes and occupies the full width of the opened terminal.\r\n\r\n### Neovim version (nvim -v)\r\n\r\nNVIM v0.9.5\r\n\r\n### Vim (not Nvim) behaves the same?\r\n\r\nVIM - Vi IMproved 9.1\r\n\r\n### Operating system/version\r\n\r\nLinux kali 5.7.0-kali1-amd64\r\n\r\n### Terminal name/version\r\n\r\nURXVT Alacritty Xterm\r\n\r\n### $TERM environment variable\r\n\r\nrxvt-unicode-256color , xterm-256color\r\n\r\n### Installation\r\n\r\nrepo\r\n\r\n\r\n--------------- Update : Added Later ---------------\r\n\r\nThanks! For now, I am switching back to my old compiled version(NVIM v0.5.0-dev+1074-ga7d9df996)  And adding --> autocmd VimEnter * :silent exec \"!kill -s SIGWINCH $PPID\" to my .nvimrc, the old [solution](https://github.com/neovim/neovim/issues/11330#issuecomment-723667383 ) . Thanks again!\r\n\r\n--------------- Update : Added Later ---------------",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "Hmm, it's strange that the height is correct, but the width is not.",
            "created_at": "2024-06-09T09:12:39Z",
            "html_url": "https://github.com/neovim/neovim/issues/29247#issuecomment-2156406943",
            "id": 2156406943,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/29247",
            "node_id": "IC_kwDOAPphoM6AiCif",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2156406943/reactions"
            },
            "updated_at": "2024-06-09T09:12:39Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2156406943",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Even if this bug is fixed, it can't be fixed for 0.9.5. Please test the latest stable release.",
            "created_at": "2024-06-10T00:21:27Z",
            "html_url": "https://github.com/neovim/neovim/issues/29247#issuecomment-2156921538",
            "id": 2156921538,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/29247",
            "node_id": "IC_kwDOAPphoM6AkALC",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2156921538/reactions"
            },
            "updated_at": "2024-06-10T00:21:27Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2156921538",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "This problem also occurs in the latest `v0.11.0` in my environment.\r\n\r\nterminal: wezterm, with tmux\r\n\r\n## hot to reproduce\r\n\r\n1. Execute ex cmd `:vsplit | term`\r\n2. Execute shell `stty -a`\r\n```\r\n$ stty -a | head -1\r\nspeed 0 baud; rows 26; columns 57; line = 0;\r\n```\r\n3. Press CTRL+\\ CTRL+N, then Execute ex cmd `redraw!`\r\n4. Execute shell `stty -a` again\r\n```\r\n# the columns is changing even though the window width is not changing.\r\n$ stty -a | head -1\r\nspeed 0 baud; rows 26; columns 55; line = 0;\r\n```\r\n\r\nFor this reason I have put redraw in the map to eliminate this problem.\r\n```\r\nvim.keymap.set(\"n\", \"<leader>ts\", \"<cmd> split | redraw! | terminal <cr>\", { desc = \"Horizontal terminal\" })\r\nvim.keymap.set(\"n\", \"<leader>tv\", \"<cmd> vsplit | redraw! | terminal <cr>\", { desc = \"Vertical terminal\" })\r\nvim.keymap.set(\"n\", \"<leader>tn\", \"<cmd> tabedit | redraw! | terminal <cr>\", { desc = \"Terminal in New tab\" })\r\n```\r\n\r\n\r\nPS: I'm sorry, My problem was due to the following autocmd\r\nRemoving setlocal nonumber fixed the problem.\r\n\r\n```\r\nlocal autoInsertTerminal = vim.api.nvim_create_augroup(\"auto_insert_terminal\", {})\r\n-- auto enter to insert mode in Terminal mode\r\nvim.api.nvim_create_autocmd(\"TermOpen\", {\r\n\tgroup = autoInsertTerminal,\r\n\tpattern = \"*\",\r\n\tcallback = function()\r\n\t\tvim.cmd([[\r\n\t\t\tsetlocal nonumber norelativenumber\r\n\t\t\tstartinsert\r\n\t\t]])\r\n\tend,\r\n})\r\n```\r\n\r\n",
            "created_at": "2024-06-10T02:50:52Z",
            "html_url": "https://github.com/neovim/neovim/issues/29247#issuecomment-2157095288",
            "id": 2157095288,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/29247",
            "node_id": "IC_kwDOAPphoM6Akql4",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2157095288/reactions"
            },
            "updated_at": "2024-06-10T02:59:13Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2157095288",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/20206121?v=4",
                "events_url": "https://api.github.com/users/umlx5h/events{/privacy}",
                "followers_url": "https://api.github.com/users/umlx5h/followers",
                "following_url": "https://api.github.com/users/umlx5h/following{/other_user}",
                "gists_url": "https://api.github.com/users/umlx5h/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/umlx5h",
                "id": 20206121,
                "login": "umlx5h",
                "node_id": "MDQ6VXNlcjIwMjA2MTIx",
                "organizations_url": "https://api.github.com/users/umlx5h/orgs",
                "received_events_url": "https://api.github.com/users/umlx5h/received_events",
                "repos_url": "https://api.github.com/users/umlx5h/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/umlx5h/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/umlx5h/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/umlx5h",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "> Even if this bug is fixed, it can't be fixed for 0.9.5. Please test the latest stable release.\r\n\r\nFYI :  The last \"working\" version ie. without the above mentioned resize issue is : [Nvim 0.8.3](https://github.com/neovim/neovim/releases/tag/v0.8.3) \r\n\r\nI downgraded to this version(v. 0.8.3) and included `autocmd VimEnter * :silent exec \"!kill -s SIGWINCH $PPID\"` in my .nvimrc, to resize nvim automatically on open. \r\n\r\n\r\nBTW: Tested the latest stable release : [Nvim v0.10.0](https://github.com/neovim/neovim/releases/tag/v0.10.0) and this issue still exists.\r\n\r\nThanks! for keeping this issue open. \r\n\r\nOnce again Thanks! All ...  ",
            "created_at": "2024-07-22T02:49:06Z",
            "html_url": "https://github.com/neovim/neovim/issues/29247#issuecomment-2241942281",
            "id": 2241942281,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/29247",
            "node_id": "IC_kwDOAPphoM6FoVMJ",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2241942281/reactions"
            },
            "updated_at": "2024-07-22T19:28:24Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2241942281",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/135051?v=4",
                "events_url": "https://api.github.com/users/har5ha/events{/privacy}",
                "followers_url": "https://api.github.com/users/har5ha/followers",
                "following_url": "https://api.github.com/users/har5ha/following{/other_user}",
                "gists_url": "https://api.github.com/users/har5ha/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/har5ha",
                "id": 135051,
                "login": "har5ha",
                "node_id": "MDQ6VXNlcjEzNTA1MQ==",
                "organizations_url": "https://api.github.com/users/har5ha/orgs",
                "received_events_url": "https://api.github.com/users/har5ha/received_events",
                "repos_url": "https://api.github.com/users/har5ha/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/har5ha/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/har5ha/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/har5ha",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "I did some investigation into this issue, and it appears to stem from the fact that bang commands are handled in a different process than Neovim. You can test this yourself by running `nvim .` in one terminal window and `ps aux | grep nvim` in another. Note that `ps aux` lists two different processes `nvim .` and `nvim --embed .` \n\nCalling `kill -s SIGWINCH some_pid_123` on the primary `nvim .` process triggers a redraw, and Neovim will render at the full, correct width. Calling the same command, but with the PID of the `nvim --embed .` process should fail. You can doubly confirm this by calling `:!echo $PPID` from inside Neovim and cross-reference the given PID with the PID of the secondary `nvim --embed .` process.\n\nHere's a solution -- in a couple different flavors -- that I devised to resolve/work around this (I added them at the end of my config, but idk if that matters):\n\nFirst, get the parent process ID and store it in some variable\n```lua\nif not vim.env.NVIM_PARENT_PID then\n  vim.env.NVIM_PARENT_PID = tostring(vim.loop.os_getppid()) \nend\n```\nThen, call sigwinch on the parent process ID in one of the following ways\n```lua\n-- option A:\nvim.cmd 'autocmd VimEnter * :silent exec \"!kill -s SIGWINCH \" . $NVIM_PARENT_PID'\n\n-- option B: (my preference)\nvim.loop.kill(tonumber(vim.env.NVIM_PARENT_PID), \"sigwinch\")\n```\n\nThis doesn't further fix the issue natively, but hopefully helps anyone who's sick of manually resizing their terminal window like I am. ",
            "created_at": "2025-02-17T05:12:22Z",
            "html_url": "https://github.com/neovim/neovim/issues/29247#issuecomment-2662074968",
            "id": 2662074968,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/29247",
            "node_id": "IC_kwDOAPphoM6erApY",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2662074968/reactions"
            },
            "updated_at": "2025-02-17T15:36:28Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2662074968",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/40328432?v=4",
                "events_url": "https://api.github.com/users/DZappala/events{/privacy}",
                "followers_url": "https://api.github.com/users/DZappala/followers",
                "following_url": "https://api.github.com/users/DZappala/following{/other_user}",
                "gists_url": "https://api.github.com/users/DZappala/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/DZappala",
                "id": 40328432,
                "login": "DZappala",
                "node_id": "MDQ6VXNlcjQwMzI4NDMy",
                "organizations_url": "https://api.github.com/users/DZappala/orgs",
                "received_events_url": "https://api.github.com/users/DZappala/received_events",
                "repos_url": "https://api.github.com/users/DZappala/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/DZappala/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/DZappala/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/DZappala",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 5,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/29247/comments",
    "created_at": "2024-06-09T09:08:00Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/29247/events",
    "html_url": "https://github.com/neovim/neovim/issues/29247",
    "id": 2342116687,
    "labels": [
        {
            "color": "f9d0c4",
            "default": true,
            "description": "issues reporting wrong behavior",
            "id": 77997474,
            "name": "bug",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3NA==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "Nvim startup sequence (`:h startup`)",
            "id": 870629450,
            "name": "startup",
            "node_id": "MDU6TGFiZWw4NzA2Mjk0NTA=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/startup"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/29247/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM6Lmd1P",
    "number": 29247,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/29247/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/29247/timeline",
    "title": "nvim doesn't resize to full terminal width upon opening",
    "updated_at": "2025-02-17T15:36:28Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/29247",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/135051?v=4",
        "events_url": "https://api.github.com/users/har5ha/events{/privacy}",
        "followers_url": "https://api.github.com/users/har5ha/followers",
        "following_url": "https://api.github.com/users/har5ha/following{/other_user}",
        "gists_url": "https://api.github.com/users/har5ha/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/har5ha",
        "id": 135051,
        "login": "har5ha",
        "node_id": "MDQ6VXNlcjEzNTA1MQ==",
        "organizations_url": "https://api.github.com/users/har5ha/orgs",
        "received_events_url": "https://api.github.com/users/har5ha/received_events",
        "repos_url": "https://api.github.com/users/har5ha/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/har5ha/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/har5ha/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/har5ha",
        "user_view_type": "public"
    }
}