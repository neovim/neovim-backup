{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "body": "- Neovim version: v0.1.3-361-g5730ad9\r\n- Vim behaves differently? No\r\n- Operating system/version: Arch Linux\r\n\r\nI've had my machine lock up hard while using Neovim (mouse could not be moved, SSHing did not work etc), and after restarting, an undo file for a rather important file was empty?!\r\n\r\n> E823: Not an undo file: /home/user/.local/share/vim/undo/...\r\n\r\nThe file itself is empty (0 bytes).\r\n\r\nThe file system is ext4.\r\n\r\nI could imagine that the behavior here could be improved by not re-writing the undofile, but `mv`ing it instead?  (similar to `backupcopy`?!)\r\n\r\nRelevant options I have set: `fsync` (default), `backup` (default), `backupcopy=yes` (default).\r\n",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": ">  the behavior here could be improved by not re-writing the undofile, but mving it instead?\n\nAFAIK that is what happens when neovim `:write`s a file, as well as shada/viminfo files. But inspecting  `u_write_undo()` shows that the undo file is deleted before a write is attempted, so this does seem like something that could be improved.\n\n@blueyed We didn't change that logic, so this is not a regression, correct?\n",
            "created_at": "2016-04-08T21:49:26Z",
            "html_url": "https://github.com/neovim/neovim/issues/4547#issuecomment-207621098",
            "id": 207621098,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/4547",
            "node_id": "MDEyOklzc3VlQ29tbWVudDIwNzYyMTA5OA==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/207621098/reactions"
            },
            "updated_at": "2016-04-08T21:50:23Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/207621098",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "@justinmk \nI don't know about how Vim behaves in that case - luckily those crashes are rare.. ;)\nSeems to be no regression then, yes.\n",
            "created_at": "2016-04-08T22:48:57Z",
            "html_url": "https://github.com/neovim/neovim/issues/4547#issuecomment-207638973",
            "id": 207638973,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/4547",
            "node_id": "MDEyOklzc3VlQ29tbWVudDIwNzYzODk3Mw==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/207638973/reactions"
            },
            "updated_at": "2016-04-08T22:48:57Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/207638973",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9766?v=4",
                "events_url": "https://api.github.com/users/blueyed/events{/privacy}",
                "followers_url": "https://api.github.com/users/blueyed/followers",
                "following_url": "https://api.github.com/users/blueyed/following{/other_user}",
                "gists_url": "https://api.github.com/users/blueyed/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/blueyed",
                "id": 9766,
                "login": "blueyed",
                "node_id": "MDQ6VXNlcjk3NjY=",
                "organizations_url": "https://api.github.com/users/blueyed/orgs",
                "received_events_url": "https://api.github.com/users/blueyed/received_events",
                "repos_url": "https://api.github.com/users/blueyed/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/blueyed/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/blueyed/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/blueyed",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I was thinking of taking a stab at this problem. It seems to me at there are three approaches to solving it:\n1. Copy the old undo file and give it some extension like `.bak`. If the same problem happens again (there is a .bak already, but we need to copy the current version of the undo file), delete the old .bak and move the current undo file to have the .bak extension.\n2. Copy the old undo file and give it some extension like `.bak0`. If the problem occurs again, create a `.bak1` and keep incrementing the number as many times as is necessary.\n3. Merge the old undo history file with the one that is about to be written. This is more complex, but prevents creating extra files.\n\nRegardless of how this problem is solved, I don't think that it's covered in the tests right now, so I should also create tests for this case, yes?\n\nWhich of the above (or any alternative) approaches seems like the right one for this problem?\n",
            "created_at": "2016-06-17T22:19:12Z",
            "html_url": "https://github.com/neovim/neovim/issues/4547#issuecomment-226894847",
            "id": 226894847,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/4547",
            "node_id": "MDEyOklzc3VlQ29tbWVudDIyNjg5NDg0Nw==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/226894847/reactions"
            },
            "updated_at": "2016-06-17T22:19:12Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/226894847",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3922125?v=4",
                "events_url": "https://api.github.com/users/whereswaldon/events{/privacy}",
                "followers_url": "https://api.github.com/users/whereswaldon/followers",
                "following_url": "https://api.github.com/users/whereswaldon/following{/other_user}",
                "gists_url": "https://api.github.com/users/whereswaldon/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/whereswaldon",
                "id": 3922125,
                "login": "whereswaldon",
                "node_id": "MDQ6VXNlcjM5MjIxMjU=",
                "organizations_url": "https://api.github.com/users/whereswaldon/orgs",
                "received_events_url": "https://api.github.com/users/whereswaldon/received_events",
                "repos_url": "https://api.github.com/users/whereswaldon/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/whereswaldon/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/whereswaldon/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/whereswaldon",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "@whereswaldon Instead of using a naming scheme like `.bak`, use the existing `vim_tempname` function to create a temporary file. See also the logic in `vim_rename()` which uses a temp file (see `use_tmp_file` variable).\n\n> I don't think that it's covered in the tests right now, so I should also create tests for this case, yes?\n\nYes, the change needs test coverage.\n",
            "created_at": "2016-06-18T17:25:47Z",
            "html_url": "https://github.com/neovim/neovim/issues/4547#issuecomment-226954296",
            "id": 226954296,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/4547",
            "node_id": "MDEyOklzc3VlQ29tbWVudDIyNjk1NDI5Ng==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/226954296/reactions"
            },
            "updated_at": "2016-06-18T17:25:47Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/226954296",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "@justinmk `vim_tempname` does not look like a good idea for the job like this: /tmp _is cleared upon system initialization_, so is absolutely useless for recovering anything on system crash. I actually do not know why most suggestions from previous message start with “copy the old undo file”: “do mv” from the first message looks better. Probably it makes sense to reuse ShaDa code for this, it already does “write new ShaDa file to {fname}.tmp.a, then rename upon success”.\n",
            "created_at": "2016-06-18T23:16:02Z",
            "html_url": "https://github.com/neovim/neovim/issues/4547#issuecomment-226970208",
            "id": 226970208,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/4547",
            "node_id": "MDEyOklzc3VlQ29tbWVudDIyNjk3MDIwOA==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/226970208/reactions"
            },
            "updated_at": "2016-06-18T23:16:02Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/226970208",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/322097?v=4",
                "events_url": "https://api.github.com/users/ZyX-I/events{/privacy}",
                "followers_url": "https://api.github.com/users/ZyX-I/followers",
                "following_url": "https://api.github.com/users/ZyX-I/following{/other_user}",
                "gists_url": "https://api.github.com/users/ZyX-I/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ZyX-I",
                "id": 322097,
                "login": "ZyX-I",
                "node_id": "MDQ6VXNlcjMyMjA5Nw==",
                "organizations_url": "https://api.github.com/users/ZyX-I/orgs",
                "received_events_url": "https://api.github.com/users/ZyX-I/received_events",
                "repos_url": "https://api.github.com/users/ZyX-I/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ZyX-I/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ZyX-I/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ZyX-I",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "`vim_rename` solves a different problem. It may be used as an example of code which generates unexisting temporary filename, but it is still worse then ShaDa code for this job: in ShaDa I use EAFP approach, so if valid temporary filename is found it is immediately claimed (in fact, EAFP means that I try to claim the file name and retry if it appears to be existing), `vim_rename` theoretically allows disturbing the process in the middle (between `os_file_exists` and `os_rename`).\n\n// BTW, it looks like `os_file_exists` should be named `os_path_exists`: if I am not mistaking, `os_stat(name, &statbuf)` is going to succeed if name is a directory and not a file. Not sure what if it is a broken symbolic link. And, of course, both cases are not tested.\n\n// If I am wrong here, then `vim_rename` has a bug: it will fail should code encounter directory or broken symbolic link, without trying further n’s.\n",
            "created_at": "2016-06-18T23:31:52Z",
            "html_url": "https://github.com/neovim/neovim/issues/4547#issuecomment-226970742",
            "id": 226970742,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/4547",
            "node_id": "MDEyOklzc3VlQ29tbWVudDIyNjk3MDc0Mg==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/226970742/reactions"
            },
            "updated_at": "2016-06-18T23:33:40Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/226970742",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/322097?v=4",
                "events_url": "https://api.github.com/users/ZyX-I/events{/privacy}",
                "followers_url": "https://api.github.com/users/ZyX-I/followers",
                "following_url": "https://api.github.com/users/ZyX-I/following{/other_user}",
                "gists_url": "https://api.github.com/users/ZyX-I/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ZyX-I",
                "id": 322097,
                "login": "ZyX-I",
                "node_id": "MDQ6VXNlcjMyMjA5Nw==",
                "organizations_url": "https://api.github.com/users/ZyX-I/orgs",
                "received_events_url": "https://api.github.com/users/ZyX-I/received_events",
                "repos_url": "https://api.github.com/users/ZyX-I/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ZyX-I/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ZyX-I/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ZyX-I",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I'm sorry for the abiguity\n\n> Copy the old undo file\n\nwas intended to be the equivalent of `mv`ing it, not having two. That was poorly worded.\n@ZyX-I Which part of the ShaDa code should I look at? It sounds like the functionality that I want already does exist.\n",
            "created_at": "2016-06-19T19:53:48Z",
            "html_url": "https://github.com/neovim/neovim/issues/4547#issuecomment-227016876",
            "id": 227016876,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/4547",
            "node_id": "MDEyOklzc3VlQ29tbWVudDIyNzAxNjg3Ng==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/227016876/reactions"
            },
            "updated_at": "2016-06-19T19:53:48Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/227016876",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3922125?v=4",
                "events_url": "https://api.github.com/users/whereswaldon/events{/privacy}",
                "followers_url": "https://api.github.com/users/whereswaldon/followers",
                "following_url": "https://api.github.com/users/whereswaldon/following{/other_user}",
                "gists_url": "https://api.github.com/users/whereswaldon/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/whereswaldon",
                "id": 3922125,
                "login": "whereswaldon",
                "node_id": "MDQ6VXNlcjM5MjIxMjU=",
                "organizations_url": "https://api.github.com/users/whereswaldon/orgs",
                "received_events_url": "https://api.github.com/users/whereswaldon/received_events",
                "repos_url": "https://api.github.com/users/whereswaldon/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/whereswaldon/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/whereswaldon/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/whereswaldon",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "@whereswaldon The idea of safe overwriting is\n1. Write new file to a temporary location.\n2. Upon successfull write move it onto a permanent location.\n\n(2) is atomic as long as files are on the same filesystem, and even otherwise is rather safe: depending on where process was interrupted you may get\n- Partial or absent new version in temporary location.\n- New (temporary location) and old (permament location) versions at once.\n- New version at permanent location which is what was intended.\n- Part of the new version in permanent location and full new version in temporary location (assuming that temporary file is in another file system).\n\nThis is used by ShaDa code, I also had some an impression that some combination of &backup* options will yield the same behaviour, but after rereading documentation am not sure that there exists such combination. Behaviour is coded in `shada_write_file()`, see `shada_write_file_open` label.\n",
            "created_at": "2016-06-19T20:04:51Z",
            "html_url": "https://github.com/neovim/neovim/issues/4547#issuecomment-227017445",
            "id": 227017445,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/4547",
            "node_id": "MDEyOklzc3VlQ29tbWVudDIyNzAxNzQ0NQ==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/227017445/reactions"
            },
            "updated_at": "2016-06-19T20:05:05Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/227017445",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/322097?v=4",
                "events_url": "https://api.github.com/users/ZyX-I/events{/privacy}",
                "followers_url": "https://api.github.com/users/ZyX-I/followers",
                "following_url": "https://api.github.com/users/ZyX-I/following{/other_user}",
                "gists_url": "https://api.github.com/users/ZyX-I/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ZyX-I",
                "id": 322097,
                "login": "ZyX-I",
                "node_id": "MDQ6VXNlcjMyMjA5Nw==",
                "organizations_url": "https://api.github.com/users/ZyX-I/orgs",
                "received_events_url": "https://api.github.com/users/ZyX-I/received_events",
                "repos_url": "https://api.github.com/users/ZyX-I/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ZyX-I/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ZyX-I/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ZyX-I",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Though ShaDa code has more then one reason to behave like it does: it not only needs to write a new version, it also needs to read the old one. Temporary file is not used if you have chosen to ignore the old file!\n",
            "created_at": "2016-06-19T20:06:48Z",
            "html_url": "https://github.com/neovim/neovim/issues/4547#issuecomment-227017532",
            "id": 227017532,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/4547",
            "node_id": "MDEyOklzc3VlQ29tbWVudDIyNzAxNzUzMg==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/227017532/reactions"
            },
            "updated_at": "2016-06-19T20:06:48Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/227017532",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/322097?v=4",
                "events_url": "https://api.github.com/users/ZyX-I/events{/privacy}",
                "followers_url": "https://api.github.com/users/ZyX-I/followers",
                "following_url": "https://api.github.com/users/ZyX-I/following{/other_user}",
                "gists_url": "https://api.github.com/users/ZyX-I/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ZyX-I",
                "id": 322097,
                "login": "ZyX-I",
                "node_id": "MDQ6VXNlcjMyMjA5Nw==",
                "organizations_url": "https://api.github.com/users/ZyX-I/orgs",
                "received_events_url": "https://api.github.com/users/ZyX-I/received_events",
                "repos_url": "https://api.github.com/users/ZyX-I/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ZyX-I/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ZyX-I/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ZyX-I",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Though you may choose to ignore the old file only by explicitly using `wshada!` (with bang), so system crash leaving truncated file is rather unlikely. But this may happen in case of crash during `wshada!`.\n",
            "created_at": "2016-06-19T20:09:00Z",
            "html_url": "https://github.com/neovim/neovim/issues/4547#issuecomment-227017641",
            "id": 227017641,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/4547",
            "node_id": "MDEyOklzc3VlQ29tbWVudDIyNzAxNzY0MQ==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/227017641/reactions"
            },
            "updated_at": "2016-06-19T20:09:00Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/227017641",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/322097?v=4",
                "events_url": "https://api.github.com/users/ZyX-I/events{/privacy}",
                "followers_url": "https://api.github.com/users/ZyX-I/followers",
                "following_url": "https://api.github.com/users/ZyX-I/following{/other_user}",
                "gists_url": "https://api.github.com/users/ZyX-I/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ZyX-I",
                "id": 322097,
                "login": "ZyX-I",
                "node_id": "MDQ6VXNlcjMyMjA5Nw==",
                "organizations_url": "https://api.github.com/users/ZyX-I/orgs",
                "received_events_url": "https://api.github.com/users/ZyX-I/received_events",
                "repos_url": "https://api.github.com/users/ZyX-I/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ZyX-I/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ZyX-I/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ZyX-I",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Vim has the same problem with `wviminfo!` (with bang) AFAIR.\n",
            "created_at": "2016-06-19T20:10:45Z",
            "html_url": "https://github.com/neovim/neovim/issues/4547#issuecomment-227017732",
            "id": 227017732,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/4547",
            "node_id": "MDEyOklzc3VlQ29tbWVudDIyNzAxNzczMg==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/227017732/reactions"
            },
            "updated_at": "2016-06-19T20:10:45Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/227017732",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/322097?v=4",
                "events_url": "https://api.github.com/users/ZyX-I/events{/privacy}",
                "followers_url": "https://api.github.com/users/ZyX-I/followers",
                "following_url": "https://api.github.com/users/ZyX-I/following{/other_user}",
                "gists_url": "https://api.github.com/users/ZyX-I/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ZyX-I",
                "id": 322097,
                "login": "ZyX-I",
                "node_id": "MDQ6VXNlcjMyMjA5Nw==",
                "organizations_url": "https://api.github.com/users/ZyX-I/orgs",
                "received_events_url": "https://api.github.com/users/ZyX-I/received_events",
                "repos_url": "https://api.github.com/users/ZyX-I/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ZyX-I/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ZyX-I/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ZyX-I",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "@justinmk What do you think about moving the relevant code to `file_open` and `file_close`, protected by `FILE_USE_TEMP`? (I am referring to #4865.)\n",
            "created_at": "2016-06-19T20:14:56Z",
            "html_url": "https://github.com/neovim/neovim/issues/4547#issuecomment-227017912",
            "id": 227017912,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/4547",
            "node_id": "MDEyOklzc3VlQ29tbWVudDIyNzAxNzkxMg==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/227017912/reactions"
            },
            "updated_at": "2016-06-19T20:14:56Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/227017912",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/322097?v=4",
                "events_url": "https://api.github.com/users/ZyX-I/events{/privacy}",
                "followers_url": "https://api.github.com/users/ZyX-I/followers",
                "following_url": "https://api.github.com/users/ZyX-I/following{/other_user}",
                "gists_url": "https://api.github.com/users/ZyX-I/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ZyX-I",
                "id": 322097,
                "login": "ZyX-I",
                "node_id": "MDQ6VXNlcjMyMjA5Nw==",
                "organizations_url": "https://api.github.com/users/ZyX-I/orgs",
                "received_events_url": "https://api.github.com/users/ZyX-I/received_events",
                "repos_url": "https://api.github.com/users/ZyX-I/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ZyX-I/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ZyX-I/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ZyX-I",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "@ZyX-I So the idea with this particular issue would be to write the new version of the undo file to a temporary location, and then `mv` the old version of the undo file to some safe backup location before finally moving the new version of the undo file to where it ought to be?\n\nWith regards to\n\n>  Instead of using a naming scheme like .bak, use the existing vim_tempname function to create a temporary file.\n\nand\n\n> `vim_tempname` does not look like a good idea for the job like this: `/tmp` is cleared upon system initialization, so is absolutely useless for recovering anything on system crash.\n\nIn this case, the problem is that the old file is deleted _after_ the system reboot and you reopen vim and re`:write` the file(unless I'm fundamentally misunderstanding the issue). In that case, moving the file to `/tmp` does seem fine, since the user will presumably realize the problem and recover their file before the system is restarted again.\n\nDo you think it's worth warning the user when this kind of backup of the undo history occurs? I have no idea how common such a scenario is outside of the extreme case that brought this issue to light in the first place. I assume that the original code deleted the old version of the undo file for a reason?\n",
            "created_at": "2016-06-19T20:32:39Z",
            "html_url": "https://github.com/neovim/neovim/issues/4547#issuecomment-227018766",
            "id": 227018766,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/4547",
            "node_id": "MDEyOklzc3VlQ29tbWVudDIyNzAxODc2Ng==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/227018766/reactions"
            },
            "updated_at": "2016-06-19T20:32:39Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/227018766",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3922125?v=4",
                "events_url": "https://api.github.com/users/whereswaldon/events{/privacy}",
                "followers_url": "https://api.github.com/users/whereswaldon/followers",
                "following_url": "https://api.github.com/users/whereswaldon/following{/other_user}",
                "gists_url": "https://api.github.com/users/whereswaldon/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/whereswaldon",
                "id": 3922125,
                "login": "whereswaldon",
                "node_id": "MDQ6VXNlcjM5MjIxMjU=",
                "organizations_url": "https://api.github.com/users/whereswaldon/orgs",
                "received_events_url": "https://api.github.com/users/whereswaldon/received_events",
                "repos_url": "https://api.github.com/users/whereswaldon/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/whereswaldon/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/whereswaldon/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/whereswaldon",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "@whereswaldon Clearing `/tmp` is a part of the boot process, _before_ user has any chance to run Neovim. More, `/tmp` may live in a tmpfs (== in RAM) so it is “cleared” immediately on crash. So undo file in this temporary location will not help you if system crashed after file was written, but before finishing moving that new file to a permanent location; and file at permanent location will be spoiled if system crashed while in process of moving the file. I.e. there are the following possible results:\n- New (temporary location) and old (permament location) versions at once.\n- Part of the new version in permanent location and full new version in temporary location (assuming that temporary file is in another file system: exactly the case).\n- New version at permanent location which is what was intended.\n- Partial or absent new version in temporary location.\n- Old (permanent location) version only.\n- Part of the new version in permanent location, any (old or new) full version absent.\n\nAnd first four variants are only possible if system did _not_ crash during writing undo file, while last two is what you will see if it _did_ crash during writing undo file.\n\nAlso note that `vim_tempname` generates a new _unique_ _random_ name. User does not know it, new Neovim started after previous crash does not know it. So there is no way user will get the new version of undo file in case something crashed before process of writing the undo file finished. But he may get either old version, or part of the new one.\n\n---\n\nI do not know a reason to prefer deleting the old version before writing the undo file to proposed “write new, move”.\n",
            "created_at": "2016-06-19T20:58:09Z",
            "html_url": "https://github.com/neovim/neovim/issues/4547#issuecomment-227019898",
            "id": 227019898,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/4547",
            "node_id": "MDEyOklzc3VlQ29tbWVudDIyNzAxOTg5OA==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/227019898/reactions"
            },
            "updated_at": "2016-06-19T20:58:09Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/227019898",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/322097?v=4",
                "events_url": "https://api.github.com/users/ZyX-I/events{/privacy}",
                "followers_url": "https://api.github.com/users/ZyX-I/followers",
                "following_url": "https://api.github.com/users/ZyX-I/following{/other_user}",
                "gists_url": "https://api.github.com/users/ZyX-I/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ZyX-I",
                "id": 322097,
                "login": "ZyX-I",
                "node_id": "MDQ6VXNlcjMyMjA5Nw==",
                "organizations_url": "https://api.github.com/users/ZyX-I/orgs",
                "received_events_url": "https://api.github.com/users/ZyX-I/received_events",
                "repos_url": "https://api.github.com/users/ZyX-I/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ZyX-I/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ZyX-I/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ZyX-I",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "@whereswaldon Idea is “writing new version to a temporary location, then moving it onto permanent location (possibly overwriting the old version)”. Old version is not moved anywhere.\n",
            "created_at": "2016-06-19T21:00:55Z",
            "html_url": "https://github.com/neovim/neovim/issues/4547#issuecomment-227020028",
            "id": 227020028,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/4547",
            "node_id": "MDEyOklzc3VlQ29tbWVudDIyNzAyMDAyOA==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/227020028/reactions"
            },
            "updated_at": "2016-06-19T21:00:55Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/227020028",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/322097?v=4",
                "events_url": "https://api.github.com/users/ZyX-I/events{/privacy}",
                "followers_url": "https://api.github.com/users/ZyX-I/followers",
                "following_url": "https://api.github.com/users/ZyX-I/following{/other_user}",
                "gists_url": "https://api.github.com/users/ZyX-I/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ZyX-I",
                "id": 322097,
                "login": "ZyX-I",
                "node_id": "MDQ6VXNlcjMyMjA5Nw==",
                "organizations_url": "https://api.github.com/users/ZyX-I/orgs",
                "received_events_url": "https://api.github.com/users/ZyX-I/received_events",
                "repos_url": "https://api.github.com/users/ZyX-I/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ZyX-I/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ZyX-I/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ZyX-I",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "@whereswaldon To be clear (and hopefully avoid confusing you), what @ZyX-I said in https://github.com/neovim/neovim/issues/4547#issuecomment-226970208 (and @blueyed said in the top post) is the recommended approach. Sorry for any confusion.\n",
            "created_at": "2016-06-19T21:11:09Z",
            "html_url": "https://github.com/neovim/neovim/issues/4547#issuecomment-227020538",
            "id": 227020538,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/4547",
            "node_id": "MDEyOklzc3VlQ29tbWVudDIyNzAyMDUzOA==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/227020538/reactions"
            },
            "updated_at": "2016-06-19T21:11:09Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/227020538",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> @justinmk What do you think about moving the relevant code to file_open and file_close, protected by FILE_USE_TEMP? (I am referring to #4865.)\n\nDo you mean, so this problem is solved for all callers of file_open/file_close?\n\nBut why would we make it optional with FILE_USE_TEMP?\n",
            "created_at": "2016-06-19T21:18:16Z",
            "html_url": "https://github.com/neovim/neovim/issues/4547#issuecomment-227020875",
            "id": 227020875,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/4547",
            "node_id": "MDEyOklzc3VlQ29tbWVudDIyNzAyMDg3NQ==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/227020875/reactions"
            },
            "updated_at": "2016-06-19T21:18:16Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/227020875",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I did, in fact, misunderstand the problem here. Thanks @justinmk and @ZyX-I for clarifying. I thought the problem was happening after the system recovered from the crash, not that the system crashed while the undo file was being written. I think I can do this.\n",
            "created_at": "2016-06-19T23:59:39Z",
            "html_url": "https://github.com/neovim/neovim/issues/4547#issuecomment-227028312",
            "id": 227028312,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/4547",
            "node_id": "MDEyOklzc3VlQ29tbWVudDIyNzAyODMxMg==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/227028312/reactions"
            },
            "updated_at": "2016-06-19T23:59:39Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/227028312",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3922125?v=4",
                "events_url": "https://api.github.com/users/whereswaldon/events{/privacy}",
                "followers_url": "https://api.github.com/users/whereswaldon/followers",
                "following_url": "https://api.github.com/users/whereswaldon/following{/other_user}",
                "gists_url": "https://api.github.com/users/whereswaldon/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/whereswaldon",
                "id": 3922125,
                "login": "whereswaldon",
                "node_id": "MDQ6VXNlcjM5MjIxMjU=",
                "organizations_url": "https://api.github.com/users/whereswaldon/orgs",
                "received_events_url": "https://api.github.com/users/whereswaldon/received_events",
                "repos_url": "https://api.github.com/users/whereswaldon/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/whereswaldon/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/whereswaldon/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/whereswaldon",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "@justinmk Why should this be forced? Target file does not exist always (so moving is not needed), there may be cases when you need to preserve file attributes, you cannot write to pipes (e.g. /dev/stdout) in this fashion, …\n",
            "created_at": "2016-06-21T23:05:51Z",
            "html_url": "https://github.com/neovim/neovim/issues/4547#issuecomment-227598605",
            "id": 227598605,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/4547",
            "node_id": "MDEyOklzc3VlQ29tbWVudDIyNzU5ODYwNQ==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/227598605/reactions"
            },
            "updated_at": "2016-06-21T23:05:51Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/227598605",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/322097?v=4",
                "events_url": "https://api.github.com/users/ZyX-I/events{/privacy}",
                "followers_url": "https://api.github.com/users/ZyX-I/followers",
                "following_url": "https://api.github.com/users/ZyX-I/following{/other_user}",
                "gists_url": "https://api.github.com/users/ZyX-I/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ZyX-I",
                "id": 322097,
                "login": "ZyX-I",
                "node_id": "MDQ6VXNlcjMyMjA5Nw==",
                "organizations_url": "https://api.github.com/users/ZyX-I/orgs",
                "received_events_url": "https://api.github.com/users/ZyX-I/received_events",
                "repos_url": "https://api.github.com/users/ZyX-I/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ZyX-I/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ZyX-I/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ZyX-I",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "@ZyX-I I misunderstood FILE_USE_TEMP as a compile-time feature flag.\n",
            "created_at": "2016-06-21T23:16:30Z",
            "html_url": "https://github.com/neovim/neovim/issues/4547#issuecomment-227600374",
            "id": 227600374,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/4547",
            "node_id": "MDEyOklzc3VlQ29tbWVudDIyNzYwMDM3NA==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/227600374/reactions"
            },
            "updated_at": "2016-06-21T23:16:30Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/227600374",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "@justinmk I would name it kFileUseTemp now, but at the time of posting I for the reason I do not remember now (most likely, named it after O_…) used different naming scheme.\n",
            "created_at": "2016-06-21T23:26:26Z",
            "html_url": "https://github.com/neovim/neovim/issues/4547#issuecomment-227601983",
            "id": 227601983,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/4547",
            "node_id": "MDEyOklzc3VlQ29tbWVudDIyNzYwMTk4Mw==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/227601983/reactions"
            },
            "updated_at": "2016-06-21T23:26:26Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/227601983",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/322097?v=4",
                "events_url": "https://api.github.com/users/ZyX-I/events{/privacy}",
                "followers_url": "https://api.github.com/users/ZyX-I/followers",
                "following_url": "https://api.github.com/users/ZyX-I/following{/other_user}",
                "gists_url": "https://api.github.com/users/ZyX-I/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ZyX-I",
                "id": 322097,
                "login": "ZyX-I",
                "node_id": "MDQ6VXNlcjMyMjA5Nw==",
                "organizations_url": "https://api.github.com/users/ZyX-I/orgs",
                "received_events_url": "https://api.github.com/users/ZyX-I/received_events",
                "repos_url": "https://api.github.com/users/ZyX-I/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ZyX-I/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ZyX-I/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ZyX-I",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "I have just been bitten by this. Is there a workaround in the meantime?",
            "created_at": "2019-03-02T08:52:04Z",
            "html_url": "https://github.com/neovim/neovim/issues/4547#issuecomment-468901601",
            "id": 468901601,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/4547",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ2ODkwMTYwMQ==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/468901601/reactions"
            },
            "updated_at": "2019-03-02T08:52:04Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/468901601",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2817565?v=4",
                "events_url": "https://api.github.com/users/rnhmjoj/events{/privacy}",
                "followers_url": "https://api.github.com/users/rnhmjoj/followers",
                "following_url": "https://api.github.com/users/rnhmjoj/following{/other_user}",
                "gists_url": "https://api.github.com/users/rnhmjoj/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/rnhmjoj",
                "id": 2817565,
                "login": "rnhmjoj",
                "node_id": "MDQ6VXNlcjI4MTc1NjU=",
                "organizations_url": "https://api.github.com/users/rnhmjoj/orgs",
                "received_events_url": "https://api.github.com/users/rnhmjoj/received_events",
                "repos_url": "https://api.github.com/users/rnhmjoj/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/rnhmjoj/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/rnhmjoj/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/rnhmjoj",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "Just lost a lot of work because of this:\r\n\r\n1. Computer crashed\r\n2. Somehow, the file I was editing became empty\r\n3. The undo file is empty (which is the topic of this issue)\r\n\r\n~~I don't know if the file I was editing becoming empty is because of vim.~~ Seems to be as it was reported at #9888",
            "created_at": "2019-12-27T15:51:21Z",
            "html_url": "https://github.com/neovim/neovim/issues/4547#issuecomment-569295175",
            "id": 569295175,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/4547",
            "node_id": "MDEyOklzc3VlQ29tbWVudDU2OTI5NTE3NQ==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/569295175/reactions"
            },
            "updated_at": "2021-09-19T16:04:01Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/569295175",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/26231126?v=4",
                "events_url": "https://api.github.com/users/NilsIrl/events{/privacy}",
                "followers_url": "https://api.github.com/users/NilsIrl/followers",
                "following_url": "https://api.github.com/users/NilsIrl/following{/other_user}",
                "gists_url": "https://api.github.com/users/NilsIrl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/NilsIrl",
                "id": 26231126,
                "login": "NilsIrl",
                "node_id": "MDQ6VXNlcjI2MjMxMTI2",
                "organizations_url": "https://api.github.com/users/NilsIrl/orgs",
                "received_events_url": "https://api.github.com/users/NilsIrl/received_events",
                "repos_url": "https://api.github.com/users/NilsIrl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/NilsIrl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/NilsIrl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/NilsIrl",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "As I mentioned in the +- duplicate #9888 this just happened to me.",
            "created_at": "2020-01-19T18:08:37Z",
            "html_url": "https://github.com/neovim/neovim/issues/4547#issuecomment-576030127",
            "id": 576030127,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/4547",
            "node_id": "MDEyOklzc3VlQ29tbWVudDU3NjAzMDEyNw==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/576030127/reactions"
            },
            "updated_at": "2020-01-19T18:08:37Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/576030127",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/26231126?v=4",
                "events_url": "https://api.github.com/users/NilsIrl/events{/privacy}",
                "followers_url": "https://api.github.com/users/NilsIrl/followers",
                "following_url": "https://api.github.com/users/NilsIrl/following{/other_user}",
                "gists_url": "https://api.github.com/users/NilsIrl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/NilsIrl",
                "id": 26231126,
                "login": "NilsIrl",
                "node_id": "MDQ6VXNlcjI2MjMxMTI2",
                "organizations_url": "https://api.github.com/users/NilsIrl/orgs",
                "received_events_url": "https://api.github.com/users/NilsIrl/received_events",
                "repos_url": "https://api.github.com/users/NilsIrl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/NilsIrl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/NilsIrl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/NilsIrl",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "upstream: https://github.com/vim/vim/issues/8879",
            "created_at": "2021-09-19T16:03:54Z",
            "html_url": "https://github.com/neovim/neovim/issues/4547#issuecomment-922497026",
            "id": 922497026,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/4547",
            "node_id": "IC_kwDOAPphoM42_DAC",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/922497026/reactions"
            },
            "updated_at": "2021-09-19T16:03:54Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/922497026",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 25,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/4547/comments",
    "created_at": "2016-04-08T19:44:05Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/4547/events",
    "html_url": "https://github.com/neovim/neovim/issues/4547",
    "id": 147021486,
    "labels": [
        {
            "color": "c5def5",
            "default": false,
            "description": null,
            "id": 114040313,
            "name": "robustness",
            "node_id": "MDU6TGFiZWwxMTQwNDAzMTM=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/robustness"
        },
        {
            "color": "F9D0C4",
            "default": false,
            "description": "wrong behavior inherited from vim",
            "id": 154310492,
            "name": "bug-vim",
            "node_id": "MDU6TGFiZWwxNTQzMTA0OTI=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug-vim"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": null,
            "id": 378639615,
            "name": "io",
            "node_id": "MDU6TGFiZWwzNzg2Mzk2MTU=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/io"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "OS resources, pipes, streams",
            "id": 713599092,
            "name": "system",
            "node_id": "MDU6TGFiZWw3MTM1OTkwOTI=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/system"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/4547/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 686,
        "created_at": "2014-05-10T20:43:04Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
            "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
            "followers_url": "https://api.github.com/users/justinmk/followers",
            "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/justinmk",
            "id": 1359421,
            "login": "justinmk",
            "node_id": "MDQ6VXNlcjEzNTk0MjE=",
            "organizations_url": "https://api.github.com/users/justinmk/orgs",
            "received_events_url": "https://api.github.com/users/justinmk/received_events",
            "repos_url": "https://api.github.com/users/justinmk/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/justinmk",
            "user_view_type": "public"
        },
        "description": "Low priority items. We plan to work on this but don't have a target date.",
        "due_on": null,
        "html_url": "https://github.com/neovim/neovim/milestone/6",
        "id": 655037,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/6/labels",
        "node_id": "MDk6TWlsZXN0b25lNjU1MDM3",
        "number": 6,
        "open_issues": 635,
        "state": "open",
        "title": "backlog",
        "updated_at": "2025-01-21T00:09:37Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/6"
    },
    "node_id": "MDU6SXNzdWUxNDcwMjE0ODY=",
    "number": 4547,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 2,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 2,
        "url": "https://api.github.com/repos/neovim/neovim/issues/4547/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/4547/timeline",
    "title": "Empty undo file after system crash",
    "updated_at": "2025-01-19T11:48:49Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/4547",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/9766?v=4",
        "events_url": "https://api.github.com/users/blueyed/events{/privacy}",
        "followers_url": "https://api.github.com/users/blueyed/followers",
        "following_url": "https://api.github.com/users/blueyed/following{/other_user}",
        "gists_url": "https://api.github.com/users/blueyed/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/blueyed",
        "id": 9766,
        "login": "blueyed",
        "node_id": "MDQ6VXNlcjk3NjY=",
        "organizations_url": "https://api.github.com/users/blueyed/orgs",
        "received_events_url": "https://api.github.com/users/blueyed/received_events",
        "repos_url": "https://api.github.com/users/blueyed/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/blueyed/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/blueyed/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/blueyed",
        "user_view_type": "public"
    }
}