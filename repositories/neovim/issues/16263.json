{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Feature already in Vim?\r\n\r\nNot that I know of\r\n\r\n### Feature description\r\n\r\n# Motivation\r\nWith the advent of floating windows I found myself yearning for the ability to set window-local mappings.\r\nI am aware of buffer-local mappings, i.e `nnoremap <buffer> q :q<CR>` but window-local mappings would provide an extra layer of control.\r\nIf I happen to open a floating window that has the same buffer as another already existing non-floating window, I am currently not able to set different mappings for each of the windows, and while there are workarounds, this feature would make it more straightforward.\r\n\r\n# Desired feature:\r\n`:nnoremap <window> q :q<CR>`\r\n\r\n## Behaviour\r\nSetting a window-local mapping would behave exactly like `<buffer>` but window-bound instead of buffer-bound.\r\nI imagine the precedence being `buffer > window > global`.\r\n\r\n## Use-case\r\nhttps://github.com/rmagatti/goto-preview/issues/7\r\nIn this use-case one wants to map `q` for closing preview (floating) window instead of triggering a macro recording through a provided hook function for when a preview window is opened, but if that floating window ends up having the same buffer as the main window, the mapping is also applied there.\r\n\r\n### Showcase\r\n#### Current behaviour\r\n\r\n```lua\r\nrequire('goto-preview').setup {\r\n  post_open_hook = function()\r\n    vim.cmd[[nnoremap <buffer> q :q<CR>]]\r\n  end\r\n}\r\n```\r\n![2021-11-08 01 58 41](https://user-images.githubusercontent.com/2881382/140713097-c569d66b-340b-4b53-8b46-e4f165cc9b32.gif)\r\n\r\n#### Desired behaviour (simulated by previewing a separate buffer)\r\n\r\n```lua\r\nrequire('goto-preview').setup {\r\n  post_open_hook = function()\r\n    vim.cmd[[nnoremap <window> q :q<CR>]]\r\n  end\r\n}\r\n```\r\n![2021-11-08 02 03 27](https://user-images.githubusercontent.com/2881382/140713700-57d9ce68-ed6d-4a37-a6b8-3bbf9cf15fe2.gif)\r\n",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [
        {
            "author_association": "CONTRIBUTOR",
            "body": "I think it should be requested in Vim.",
            "created_at": "2021-11-08T10:25:36Z",
            "html_url": "https://github.com/neovim/neovim/issues/16263#issuecomment-963011167",
            "id": 963011167,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/16263",
            "node_id": "IC_kwDOAPphoM45ZmJf",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/963011167/reactions"
            },
            "updated_at": "2021-11-08T10:25:36Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/963011167",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41495?v=4",
                "events_url": "https://api.github.com/users/Shougo/events{/privacy}",
                "followers_url": "https://api.github.com/users/Shougo/followers",
                "following_url": "https://api.github.com/users/Shougo/following{/other_user}",
                "gists_url": "https://api.github.com/users/Shougo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Shougo",
                "id": 41495,
                "login": "Shougo",
                "node_id": "MDQ6VXNlcjQxNDk1",
                "organizations_url": "https://api.github.com/users/Shougo/orgs",
                "received_events_url": "https://api.github.com/users/Shougo/received_events",
                "repos_url": "https://api.github.com/users/Shougo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Shougo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Shougo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Shougo",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Instead of tying mappings directly to a window, more general would be some kind of namespaced mappings, and then you could activate this namespace for a specific window and/or buffer (like emacs minor modes, I suppose).",
            "created_at": "2021-11-08T12:02:58Z",
            "html_url": "https://github.com/neovim/neovim/issues/16263#issuecomment-963083127",
            "id": 963083127,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/16263",
            "node_id": "IC_kwDOAPphoM45Z3t3",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 11,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 1,
                "total_count": 12,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/963083127/reactions"
            },
            "updated_at": "2021-11-08T12:02:58Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/963083127",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
                "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
                "followers_url": "https://api.github.com/users/bfredl/followers",
                "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
                "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bfredl",
                "id": 1363104,
                "login": "bfredl",
                "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
                "organizations_url": "https://api.github.com/users/bfredl/orgs",
                "received_events_url": "https://api.github.com/users/bfredl/received_events",
                "repos_url": "https://api.github.com/users/bfredl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bfredl",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "I guess I just went off of how the `<buffer>` mappings work for this proposal, but you're right, there could be a more generic way of achieving the same result here.\r\nDisclaimer: I am not familiar with how emacs minor modes work, so your point might just be going over my head @bfredl \r\n\r\n@Shougo, is it customary to open these feature requests in Vim instead of Neovim or is focusing on Neovim then perhaps porting something to Vim when things are more flushed out also a valid route for things like this?",
            "created_at": "2021-11-08T22:35:35Z",
            "html_url": "https://github.com/neovim/neovim/issues/16263#issuecomment-963637413",
            "id": 963637413,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/16263",
            "node_id": "IC_kwDOAPphoM45b_Cl",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/963637413/reactions"
            },
            "updated_at": "2021-11-08T22:35:35Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/963637413",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2881382?v=4",
                "events_url": "https://api.github.com/users/rmagatti/events{/privacy}",
                "followers_url": "https://api.github.com/users/rmagatti/followers",
                "following_url": "https://api.github.com/users/rmagatti/following{/other_user}",
                "gists_url": "https://api.github.com/users/rmagatti/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/rmagatti",
                "id": 2881382,
                "login": "rmagatti",
                "node_id": "MDQ6VXNlcjI4ODEzODI=",
                "organizations_url": "https://api.github.com/users/rmagatti/orgs",
                "received_events_url": "https://api.github.com/users/rmagatti/received_events",
                "repos_url": "https://api.github.com/users/rmagatti/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/rmagatti/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/rmagatti/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/rmagatti",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Vim's popup windows cannot show the same buffer as other windows, so this feature may be less useful in Vim.",
            "created_at": "2021-11-08T22:40:33Z",
            "html_url": "https://github.com/neovim/neovim/issues/16263#issuecomment-963640157",
            "id": 963640157,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/16263",
            "node_id": "IC_kwDOAPphoM45b_td",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/963640157/reactions"
            },
            "updated_at": "2021-11-08T22:40:33Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/963640157",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "If the feature is for floating window only, it is not useful in Vim.",
            "created_at": "2021-11-09T00:22:27Z",
            "html_url": "https://github.com/neovim/neovim/issues/16263#issuecomment-963695720",
            "id": 963695720,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/16263",
            "node_id": "IC_kwDOAPphoM45cNRo",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/963695720/reactions"
            },
            "updated_at": "2021-11-09T00:22:27Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/963695720",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41495?v=4",
                "events_url": "https://api.github.com/users/Shougo/events{/privacy}",
                "followers_url": "https://api.github.com/users/Shougo/followers",
                "following_url": "https://api.github.com/users/Shougo/following{/other_user}",
                "gists_url": "https://api.github.com/users/Shougo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Shougo",
                "id": 41495,
                "login": "Shougo",
                "node_id": "MDQ6VXNlcjQxNDk1",
                "organizations_url": "https://api.github.com/users/Shougo/orgs",
                "received_events_url": "https://api.github.com/users/Shougo/received_events",
                "repos_url": "https://api.github.com/users/Shougo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Shougo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Shougo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Shougo",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Well, I didn't mean that. I just wanted to mean that it is more useful in Nvim than in Vim because in Nvim there are more examples of cases where window-local mappings can be helpful.",
            "created_at": "2021-11-09T00:25:34Z",
            "html_url": "https://github.com/neovim/neovim/issues/16263#issuecomment-963697204",
            "id": 963697204,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/16263",
            "node_id": "IC_kwDOAPphoM45cNo0",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/963697204/reactions"
            },
            "updated_at": "2021-11-09T00:25:34Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/963697204",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "Kay, so, thoughts on instead of making a whole new \"namespaced mappings\" thing, looking into something that just follows what `<buffer>` does currently, but applying it to a new `<window>` tag instead?\r\n\r\nGiven that `<buffer>` already exists for buffer specific mappings, it makes sense in my head that `<window>` would also exist, regardless of the ability to do \"namespaced mappings\".\r\n\r\nIf this makes sense at all, where is somewhere I could start looking at to implement this?\r\nDisclaimer: I haven't coded `C` in _quite_ a few years, so it'll probably take a long time for me to figure this out. The more help I get in the beginning here the easier it'll go. :) ",
            "created_at": "2021-12-07T08:16:16Z",
            "html_url": "https://github.com/neovim/neovim/issues/16263#issuecomment-987674683",
            "id": 987674683,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/16263",
            "node_id": "IC_kwDOAPphoM463rg7",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/987674683/reactions"
            },
            "updated_at": "2021-12-07T08:16:16Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/987674683",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2881382?v=4",
                "events_url": "https://api.github.com/users/rmagatti/events{/privacy}",
                "followers_url": "https://api.github.com/users/rmagatti/followers",
                "following_url": "https://api.github.com/users/rmagatti/following{/other_user}",
                "gists_url": "https://api.github.com/users/rmagatti/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/rmagatti",
                "id": 2881382,
                "login": "rmagatti",
                "node_id": "MDQ6VXNlcjI4ODEzODI=",
                "organizations_url": "https://api.github.com/users/rmagatti/orgs",
                "received_events_url": "https://api.github.com/users/rmagatti/received_events",
                "repos_url": "https://api.github.com/users/rmagatti/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/rmagatti/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/rmagatti/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/rmagatti",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Thoughts are: for something Neovim-centric, we definitely want to go with the \"namespaced\" approach since that fits the overall design language (diagnostics, highlights, etc.) A new `<window>` keyword just in the Vimscript API would have to go through Vim first; we would then port that patch.",
            "created_at": "2021-12-07T08:27:11Z",
            "html_url": "https://github.com/neovim/neovim/issues/16263#issuecomment-987683257",
            "id": 987683257,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/16263",
            "node_id": "IC_kwDOAPphoM463tm5",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/987683257/reactions"
            },
            "updated_at": "2021-12-07T08:27:11Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/987683257",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 8,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/16263/comments",
    "created_at": "2021-11-08T09:06:37Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/16263/events",
    "html_url": "https://github.com/neovim/neovim/issues/16263",
    "id": 1047189666,
    "labels": [
        {
            "color": "c2e0c6",
            "default": true,
            "description": "feature request",
            "id": 77997476,
            "name": "enhancement",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3Ng==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/enhancement"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "Nvim core functionality or code",
            "id": 858327504,
            "name": "core",
            "node_id": "MDU6TGFiZWw4NTgzMjc1MDQ=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/core"
        },
        {
            "color": "C5DEF5",
            "default": false,
            "description": "key bindings",
            "id": 3304938718,
            "name": "mappings",
            "node_id": "MDU6TGFiZWwzMzA0OTM4NzE4",
            "url": "https://api.github.com/repos/neovim/neovim/labels/mappings"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/16263/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM4-atii",
    "number": 16263,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 2,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 2,
        "url": "https://api.github.com/repos/neovim/neovim/issues/16263/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/16263/timeline",
    "title": "Add ability to set window-local mappings",
    "updated_at": "2025-01-17T15:59:30Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/16263",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/2881382?v=4",
        "events_url": "https://api.github.com/users/rmagatti/events{/privacy}",
        "followers_url": "https://api.github.com/users/rmagatti/followers",
        "following_url": "https://api.github.com/users/rmagatti/following{/other_user}",
        "gists_url": "https://api.github.com/users/rmagatti/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/rmagatti",
        "id": 2881382,
        "login": "rmagatti",
        "node_id": "MDQ6VXNlcjI4ODEzODI=",
        "organizations_url": "https://api.github.com/users/rmagatti/orgs",
        "received_events_url": "https://api.github.com/users/rmagatti/received_events",
        "repos_url": "https://api.github.com/users/rmagatti/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/rmagatti/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/rmagatti/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/rmagatti",
        "user_view_type": "public"
    }
}