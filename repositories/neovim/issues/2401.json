{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "When setting `cursorline` or `relativenumber` and opening a LaTeX file, the UI become sluggish and slow. This is a known problem in vim as well but I figured out maybe the UI refactoring that is going on makes it a good time to check it out. If it's not in its place, please let me know and I'll close.\n",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [
        {
            "author_association": "NONE",
            "body": "Can you post an example of (or link to) a LaTeX file that causes sluggishness? If possible, can you compile nvim with `-pg` to enable profiling support, run nvim, then `gprof build/bin/nvim gmon.out > latex.prof` and post the output in a gist? Either would go a long way in investigating this problem.\n",
            "created_at": "2015-04-10T21:53:49Z",
            "html_url": "https://github.com/neovim/neovim/issues/2401#issuecomment-91703108",
            "id": 91703108,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/2401",
            "node_id": "MDEyOklzc3VlQ29tbWVudDkxNzAzMTA4",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/91703108/reactions"
            },
            "updated_at": "2015-04-10T21:53:49Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/91703108",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/38515?v=4",
                "events_url": "https://api.github.com/users/splinterofchaos/events{/privacy}",
                "followers_url": "https://api.github.com/users/splinterofchaos/followers",
                "following_url": "https://api.github.com/users/splinterofchaos/following{/other_user}",
                "gists_url": "https://api.github.com/users/splinterofchaos/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/splinterofchaos",
                "id": 38515,
                "login": "splinterofchaos",
                "node_id": "MDQ6VXNlcjM4NTE1",
                "organizations_url": "https://api.github.com/users/splinterofchaos/orgs",
                "received_events_url": "https://api.github.com/users/splinterofchaos/received_events",
                "repos_url": "https://api.github.com/users/splinterofchaos/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/splinterofchaos/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/splinterofchaos/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/splinterofchaos",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "https://gist.github.com/cacplate/781e5913fe29136b8c5f\nHere is a file that does it pretty badly but it's standard file and you should be able to replicate with any file that is medium size.\n\nNo matter what I do I don't seem to be able to produce a gmon.out. This is the first time I use this tool so I probably do something wrong but I don't find what. I tried adding `-pg` to the list of flags in the makefile and calling `make -pg`. Could someone give me a hint?\n",
            "created_at": "2015-04-11T02:09:22Z",
            "html_url": "https://github.com/neovim/neovim/issues/2401#issuecomment-91741476",
            "id": 91741476,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/2401",
            "node_id": "MDEyOklzc3VlQ29tbWVudDkxNzQxNDc2",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/91741476/reactions"
            },
            "updated_at": "2015-04-11T03:28:13Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/91741476",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/5625989?v=4",
                "events_url": "https://api.github.com/users/cjoach/events{/privacy}",
                "followers_url": "https://api.github.com/users/cjoach/followers",
                "following_url": "https://api.github.com/users/cjoach/following{/other_user}",
                "gists_url": "https://api.github.com/users/cjoach/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/cjoach",
                "id": 5625989,
                "login": "cjoach",
                "node_id": "MDQ6VXNlcjU2MjU5ODk=",
                "organizations_url": "https://api.github.com/users/cjoach/orgs",
                "received_events_url": "https://api.github.com/users/cjoach/received_events",
                "repos_url": "https://api.github.com/users/cjoach/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/cjoach/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/cjoach/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/cjoach",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "> I tried adding -pg to the list of flags in the makefile and calling make -pg\n\nTo my understanding, you have to run `env CFLAGS=-pg cmake .` to regenerate the makefile, then `make VERBOSE=1` (verbose so you can verify the `-pg` flags got added). You may have to remove `CMakeCache.txt` if this doesn't work. If successful, `gmon.out` will be produced after having run the generated binary through whatever tests you try.\n\n> This is the first time I use this tool so I probably do something wrong but I don't find what.\n\nNo sweat. Any intel you can provide will be very helpful. Otherwise, I or anyone who's interested can try to profile it.\n",
            "created_at": "2015-04-11T05:23:26Z",
            "html_url": "https://github.com/neovim/neovim/issues/2401#issuecomment-91764879",
            "id": 91764879,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/2401",
            "node_id": "MDEyOklzc3VlQ29tbWVudDkxNzY0ODc5",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/91764879/reactions"
            },
            "updated_at": "2015-04-11T05:23:26Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/91764879",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/38515?v=4",
                "events_url": "https://api.github.com/users/splinterofchaos/events{/privacy}",
                "followers_url": "https://api.github.com/users/splinterofchaos/followers",
                "following_url": "https://api.github.com/users/splinterofchaos/following{/other_user}",
                "gists_url": "https://api.github.com/users/splinterofchaos/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/splinterofchaos",
                "id": 38515,
                "login": "splinterofchaos",
                "node_id": "MDQ6VXNlcjM4NTE1",
                "organizations_url": "https://api.github.com/users/splinterofchaos/orgs",
                "received_events_url": "https://api.github.com/users/splinterofchaos/received_events",
                "repos_url": "https://api.github.com/users/splinterofchaos/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/splinterofchaos/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/splinterofchaos/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/splinterofchaos",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "I did what you proposed but still no gmon.out. Do you have another idea?\n\nIt may be good to note that after a `Release` build, the performance is notably better but still sluggish on longer scrolling so it seems to be a performance issue. Maybe the `cursorline` and `relativenumber` make the screen refresh longer or more ressource hungry.\n",
            "created_at": "2015-04-11T15:40:20Z",
            "html_url": "https://github.com/neovim/neovim/issues/2401#issuecomment-91870782",
            "id": 91870782,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/2401",
            "node_id": "MDEyOklzc3VlQ29tbWVudDkxODcwNzgy",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/91870782/reactions"
            },
            "updated_at": "2015-04-11T15:51:44Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/91870782",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/5625989?v=4",
                "events_url": "https://api.github.com/users/cjoach/events{/privacy}",
                "followers_url": "https://api.github.com/users/cjoach/followers",
                "following_url": "https://api.github.com/users/cjoach/following{/other_user}",
                "gists_url": "https://api.github.com/users/cjoach/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/cjoach",
                "id": 5625989,
                "login": "cjoach",
                "node_id": "MDQ6VXNlcjU2MjU5ODk=",
                "organizations_url": "https://api.github.com/users/cjoach/orgs",
                "received_events_url": "https://api.github.com/users/cjoach/received_events",
                "repos_url": "https://api.github.com/users/cjoach/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/cjoach/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/cjoach/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/cjoach",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "I forgot, sometimes regenerating the makefile with `cmake ,` causes the binary to be generated at `bin/nvim` instead of `build/bin/nivm`.\n\nSo here's the profile data of the top ten functions we spend time in, running `nvim` in `CMakeLists.txt` as the control experiment. (Heavy syntax highlighting, but not \"sluggish\".)\n\n```\nEach sample counts as 0.01 seconds.\n  %   cumulative   self              self     total           \n time   seconds   seconds    calls  ms/call  ms/call  name    \n  6.52      0.03     0.03    65560     0.00     0.00  syn_current_attr\n  6.52      0.06     0.03     3281     0.01     0.01  do_autocmd_event\n  5.43      0.09     0.03  3864317     0.00     0.00  utfc_ptr2len\n  4.35      0.11     0.02    80093     0.00     0.00  eval7\n  4.35      0.13     0.02    71802     0.00     0.00  get_syntax_attr\n  4.35      0.15     0.02                             f_wildmenumode\n  4.35      0.17     0.02                             vim_strcat\n  3.26      0.18     0.02    26088     0.00     0.00  copy_tv\n  2.17      0.19     0.01   849276     0.00     0.00  eval_isnamec\n  2.17      0.20     0.01   545239     0.00     0.00  vim_strchr\n```\n\nAnd here's latex:\n\n```\nEach sample counts as 0.01 seconds.\n  %   cumulative   self              self     total           \n time   seconds   seconds    calls  ms/call  ms/call  name    \n 34.44      0.52     0.52  3174740     0.00     0.00  in_id_list\n 14.24      0.74     0.22 14439778     0.00     0.00  utfc_ptr2len\n  6.62      0.84     0.10    27250     0.00     0.04  syn_current_attr\n  5.96      0.93     0.09   262070     0.00     0.00  nfa_regexec_both\n  5.30      1.01     0.08  1013191     0.00     0.00  vim_strchr\n  4.64      1.08     0.07   168896     0.00     0.00  nfa_regmatch\n  3.31      1.13     0.05   927411     0.00     0.00  addstate\n  1.99      1.16     0.03     3281     0.01     0.01  do_autocmd_event\n  1.66      1.18     0.03   127778     0.00     0.00  utf_composinglike\n  1.32      1.20     0.02  1159547     0.00     0.00  copy_sub\n```\n\nThe function `in_id_list` jumped from almost no time to 35%! Obviously, optimizing this function will lead to the greatest gains. If possible, reducing the number of calls to `utfc_ptr2len()` will also result in some gains.\n",
            "created_at": "2015-04-11T17:05:14Z",
            "html_url": "https://github.com/neovim/neovim/issues/2401#issuecomment-91881695",
            "id": 91881695,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/2401",
            "node_id": "MDEyOklzc3VlQ29tbWVudDkxODgxNjk1",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/91881695/reactions"
            },
            "updated_at": "2015-04-11T17:05:14Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/91881695",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/38515?v=4",
                "events_url": "https://api.github.com/users/splinterofchaos/events{/privacy}",
                "followers_url": "https://api.github.com/users/splinterofchaos/followers",
                "following_url": "https://api.github.com/users/splinterofchaos/following{/other_user}",
                "gists_url": "https://api.github.com/users/splinterofchaos/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/splinterofchaos",
                "id": 38515,
                "login": "splinterofchaos",
                "node_id": "MDQ6VXNlcjM4NTE1",
                "organizations_url": "https://api.github.com/users/splinterofchaos/orgs",
                "received_events_url": "https://api.github.com/users/splinterofchaos/received_events",
                "repos_url": "https://api.github.com/users/splinterofchaos/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/splinterofchaos/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/splinterofchaos/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/splinterofchaos",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "I spent some time looking at `in_id_list` and there are two problems: It's called very, very frequently and it's recursive (with a maximum depth of 30). Limiting the depth to 1 does not solve the problem, so it's not excessive recursion going on. My current thought is that maybe we can somehow cache the results, but I'm not familiar enough with the code right now to propose how.\n",
            "created_at": "2015-04-11T22:42:06Z",
            "html_url": "https://github.com/neovim/neovim/issues/2401#issuecomment-91936344",
            "id": 91936344,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/2401",
            "node_id": "MDEyOklzc3VlQ29tbWVudDkxOTM2MzQ0",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/91936344/reactions"
            },
            "updated_at": "2015-04-11T22:42:06Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/91936344",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/38515?v=4",
                "events_url": "https://api.github.com/users/splinterofchaos/events{/privacy}",
                "followers_url": "https://api.github.com/users/splinterofchaos/followers",
                "following_url": "https://api.github.com/users/splinterofchaos/following{/other_user}",
                "gists_url": "https://api.github.com/users/splinterofchaos/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/splinterofchaos",
                "id": 38515,
                "login": "splinterofchaos",
                "node_id": "MDQ6VXNlcjM4NTE1",
                "organizations_url": "https://api.github.com/users/splinterofchaos/orgs",
                "received_events_url": "https://api.github.com/users/splinterofchaos/received_events",
                "repos_url": "https://api.github.com/users/splinterofchaos/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/splinterofchaos/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/splinterofchaos/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/splinterofchaos",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I don't know if that's the same issue I faced, but using tree-sitter for LaTeX files highlighting (https://github.com/latex-lsp/tree-sitter-latex) basically fixed things for me.",
            "created_at": "2022-03-27T01:03:07Z",
            "html_url": "https://github.com/neovim/neovim/issues/2401#issuecomment-1079807089",
            "id": 1079807089,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/2401",
            "node_id": "IC_kwDOAPphoM5AXIxx",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1079807089/reactions"
            },
            "updated_at": "2022-03-27T01:03:16Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1079807089",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/34201958?v=4",
                "events_url": "https://api.github.com/users/ericonr/events{/privacy}",
                "followers_url": "https://api.github.com/users/ericonr/followers",
                "following_url": "https://api.github.com/users/ericonr/following{/other_user}",
                "gists_url": "https://api.github.com/users/ericonr/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ericonr",
                "id": 34201958,
                "login": "ericonr",
                "node_id": "MDQ6VXNlcjM0MjAxOTU4",
                "organizations_url": "https://api.github.com/users/ericonr/orgs",
                "received_events_url": "https://api.github.com/users/ericonr/received_events",
                "repos_url": "https://api.github.com/users/ericonr/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ericonr/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ericonr/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ericonr",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 7,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/2401/comments",
    "created_at": "2015-04-10T18:22:07Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/2401/events",
    "html_url": "https://github.com/neovim/neovim/issues/2401",
    "id": 67653448,
    "labels": [
        {
            "color": "FEF2C0",
            "default": false,
            "description": "performance, latency, cpu/memory usage",
            "id": 101930601,
            "name": "performance",
            "node_id": "MDU6TGFiZWwxMDE5MzA2MDE=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/performance"
        },
        {
            "color": "F9D0C4",
            "default": false,
            "description": "wrong behavior inherited from vim",
            "id": 154310492,
            "name": "bug-vim",
            "node_id": "MDU6TGFiZWwxNTQzMTA0OTI=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug-vim"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "regex syntax or non-regex parsing, lpeg, grammars",
            "id": 531600085,
            "name": "syntax",
            "node_id": "MDU6TGFiZWw1MzE2MDAwODU=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/syntax"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/2401/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 686,
        "created_at": "2014-05-10T20:43:04Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
            "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
            "followers_url": "https://api.github.com/users/justinmk/followers",
            "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/justinmk",
            "id": 1359421,
            "login": "justinmk",
            "node_id": "MDQ6VXNlcjEzNTk0MjE=",
            "organizations_url": "https://api.github.com/users/justinmk/orgs",
            "received_events_url": "https://api.github.com/users/justinmk/received_events",
            "repos_url": "https://api.github.com/users/justinmk/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/justinmk",
            "user_view_type": "public"
        },
        "description": "Low priority items. We plan to work on this but don't have a target date.",
        "due_on": null,
        "html_url": "https://github.com/neovim/neovim/milestone/6",
        "id": 655037,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/6/labels",
        "node_id": "MDk6TWlsZXN0b25lNjU1MDM3",
        "number": 6,
        "open_issues": 635,
        "state": "open",
        "title": "backlog",
        "updated_at": "2025-01-21T00:09:37Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/6"
    },
    "node_id": "MDU6SXNzdWU2NzY1MzQ0OA==",
    "number": 2401,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 1,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 1,
        "url": "https://api.github.com/repos/neovim/neovim/issues/2401/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/2401/timeline",
    "title": "perf: in_id_list()",
    "updated_at": "2025-01-19T11:47:40Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/2401",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/5625989?v=4",
        "events_url": "https://api.github.com/users/cjoach/events{/privacy}",
        "followers_url": "https://api.github.com/users/cjoach/followers",
        "following_url": "https://api.github.com/users/cjoach/following{/other_user}",
        "gists_url": "https://api.github.com/users/cjoach/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/cjoach",
        "id": 5625989,
        "login": "cjoach",
        "node_id": "MDQ6VXNlcjU2MjU5ODk=",
        "organizations_url": "https://api.github.com/users/cjoach/orgs",
        "received_events_url": "https://api.github.com/users/cjoach/received_events",
        "repos_url": "https://api.github.com/users/cjoach/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/cjoach/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/cjoach/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/cjoach",
        "user_view_type": "public"
    }
}