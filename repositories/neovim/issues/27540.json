{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "body": "### Problem\r\n\r\nWhen using `:set nowrap` with a `right_align`ed virt_text extmark, the virt text remains right aligned to the window regardless of the text on that line such that text entered becomes occluded by the virtual text as side scrolling takes place.\r\n\r\nrelated: \r\nhttps://github.com/neovim/neovim/issues/23775\r\nhttps://github.com/neovim/neovim/issues/14050\r\n\r\n### Steps to reproduce\r\n\r\n```\r\nnvim --clean\r\n:set nowrap\r\n:lua ns_id = vim.api.nvim_create_namespace(\"foo\")\r\n:lua vim.api.nvim_buf_set_extmark(0, ns_id, 0, 0, { virt_text={{'gg', 'String'}}, virt_text_pos='right_align'})\r\n```\r\nThen enter text until the cursor reaches the virtual text and side scrolling begins. Observe that the entered text is occluded by the virtual text and only when the cursor reaches the end of window, does side scrolling begin.\r\n\r\n### Expected behavior\r\n\r\nThe side scrolling to begin as the entered text reaches the virtual text so that the virtual text doesn't occlude the text.\r\n\r\n### Neovim version (nvim -v)\r\n\r\nNVIM v0.10.0-dev-2398+gcc15ba212\r\n\r\n### Vim (not Nvim) behaves the same?\r\n\r\nno, using extmarks\r\n\r\n### Operating system/version\r\n\r\nLinux archlinux 6.7.4-arch1-1\r\n\r\n### Terminal name/version\r\n\r\nkitty 0.31.0\r\n\r\n### $TERM environment variable\r\n\r\ntmux-256color\r\n\r\n### Installation\r\n\r\nbuild from repo",
    "closed_at": null,
    "comment_data": [],
    "comments": 0,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/27540/comments",
    "created_at": "2024-02-19T19:28:33Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/27540/events",
    "html_url": "https://github.com/neovim/neovim/issues/27540",
    "id": 2143018820,
    "labels": [
        {
            "color": "c2e0c6",
            "default": true,
            "description": "feature request",
            "id": 77997476,
            "name": "enhancement",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3Ng==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/enhancement"
        },
        {
            "color": "BFDADC",
            "default": false,
            "description": "High-risk, potential for delicate/cascading effects",
            "id": 407247013,
            "name": "complexity:high",
            "node_id": "MDU6TGFiZWw0MDcyNDcwMTM=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/complexity:high"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "extmarks, decorations, virtual text, namespaces",
            "id": 1680119719,
            "name": "extmarks",
            "node_id": "MDU6TGFiZWwxNjgwMTE5NzE5",
            "url": "https://api.github.com/repos/neovim/neovim/labels/extmarks"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/27540/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM5_u99E",
    "number": 27540,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/27540/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": "reopened",
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/27540/timeline",
    "title": "take right_align virtual text into account when side scrolling",
    "updated_at": "2024-02-20T01:08:13Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/27540",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/66286082?v=4",
        "events_url": "https://api.github.com/users/jamestrew/events{/privacy}",
        "followers_url": "https://api.github.com/users/jamestrew/followers",
        "following_url": "https://api.github.com/users/jamestrew/following{/other_user}",
        "gists_url": "https://api.github.com/users/jamestrew/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/jamestrew",
        "id": 66286082,
        "login": "jamestrew",
        "node_id": "MDQ6VXNlcjY2Mjg2MDgy",
        "organizations_url": "https://api.github.com/users/jamestrew/orgs",
        "received_events_url": "https://api.github.com/users/jamestrew/received_events",
        "repos_url": "https://api.github.com/users/jamestrew/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/jamestrew/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/jamestrew/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/jamestrew"
    }
}