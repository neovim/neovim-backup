{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "MEMBER",
    "body": "### Problem\n\nAfter bd413a2f55be7db4e4d9b821758580f59b5cc01e (cc @bfredl) executing `screenattr()` on a floating window border cell that is adjacent to the wrapped line continuation returns -1 (which should only be the case for \"... when row or col is out of range.\").\n\n### Steps to reproduce\n\n1. Create the following 'init.lua':\n\n    ```lua\n    local buf_id = vim.api.nvim_create_buf(false, true)\n    vim.api.nvim_buf_set_lines(buf_id, 0, -1, false, { 'aaaaaaaaaaaaaaaaaaaa', 'bbb', 'ccc' })\n\n    local config = { relative = 'editor', row = 1, col = 1, height = 5, width = 10, border = 'single' }\n    vim.api.nvim_open_win(buf_id, true, config)\n    ```\n2. `nvim --clean -u init.lua`\n3. `:=vim.fn.screenattr(4, 2)` shows -1. Executing `:=vim.fn.screenstring(4, 2)` shows the correct ‚îÇ border character. Executing both `:=vim.fn.screenattr(3, 2)` and `:=vim.fn.screenattr(5, 2)` (border characters that are not adjacent to wrapped line continuation) shows 30.\n\n### Expected behavior\n\n`screenattr()` value does not depend on whether target cell is for border cell adjacent to wrapped line continuation.\n\n### Nvim version (nvim -v)\n\nNVIM v0.12.0-dev-208+gbd413a2f55\n\n### Vim (not Nvim) behaves the same?\n\nNo, doesn't have this feature\n\n### Operating system/version\n\nEndeavourOS Linux x86_64,  6.14.4-arch1-1\n\n### Terminal name/version\n\nGhostty 1.1.3-arch1\n\n### $TERM environment variable\n\nxterm-ghostty\n\n### Installation\n\nAppimage and built from source",
    "closed_at": "2025-04-30T11:56:34Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
        "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
        "followers_url": "https://api.github.com/users/bfredl/followers",
        "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
        "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/bfredl",
        "id": 1363104,
        "login": "bfredl",
        "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
        "organizations_url": "https://api.github.com/users/bfredl/orgs",
        "received_events_url": "https://api.github.com/users/bfredl/received_events",
        "repos_url": "https://api.github.com/users/bfredl/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/bfredl",
        "user_view_type": "public"
    },
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "wrapping should be disabled on floating grids when right border is active. Although this is a much older issue, not a regression from #33481",
            "created_at": "2025-04-29T14:26:53Z",
            "html_url": "https://github.com/neovim/neovim/issues/33719#issuecomment-2839142689",
            "id": 2839142689,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33719",
            "node_id": "IC_kwDOAPphoM6pOeEh",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2839142689/reactions"
            },
            "updated_at": "2025-04-29T14:26:53Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2839142689",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
                "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
                "followers_url": "https://api.github.com/users/bfredl/followers",
                "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
                "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bfredl",
                "id": 1363104,
                "login": "bfredl",
                "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
                "organizations_url": "https://api.github.com/users/bfredl/orgs",
                "received_events_url": "https://api.github.com/users/bfredl/received_events",
                "repos_url": "https://api.github.com/users/bfredl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bfredl",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> wrapping should be disabled on floating grids when right border is active.\n\nI am not sure what that means. Should setting 'wrap' for floating windows not be allowed? Setting 'wrap' (which is default) and displaying long line is all that is needed to reproduce the issue.\n\n> Although this is a much older issue, not a regression from [#33481](https://github.com/neovim/neovim/pull/33481)\n\nThe `screenattr()` started returning incorrect value directly as a result of that PR.",
            "created_at": "2025-04-29T14:40:46Z",
            "html_url": "https://github.com/neovim/neovim/issues/33719#issuecomment-2839189759",
            "id": 2839189759,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33719",
            "node_id": "IC_kwDOAPphoM6pOpj_",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2839189759/reactions"
            },
            "updated_at": "2025-04-29T14:40:46Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2839189759",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/24854248?v=4",
                "events_url": "https://api.github.com/users/echasnovski/events{/privacy}",
                "followers_url": "https://api.github.com/users/echasnovski/followers",
                "following_url": "https://api.github.com/users/echasnovski/following{/other_user}",
                "gists_url": "https://api.github.com/users/echasnovski/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/echasnovski",
                "id": 24854248,
                "login": "echasnovski",
                "node_id": "MDQ6VXNlcjI0ODU0MjQ4",
                "organizations_url": "https://api.github.com/users/echasnovski/orgs",
                "received_events_url": "https://api.github.com/users/echasnovski/received_events",
                "repos_url": "https://api.github.com/users/echasnovski/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/echasnovski/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/echasnovski/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/echasnovski",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> The screenattr() started returning incorrect value directly as a result of that PR.\n\nTrue, but I was referring to the underlying logic error which also would cause the same incorrect value in actual UI Events, but in other edge cases (like it would easier to see it with a multigrid test). There will be a patch \"soon\". (screenchar/attr _have_ always been a second-rate unreliable testing api, especially around new fancy features like floating windows. what we care about is what the user sees and how this wrap flag is actually used by UI:s)",
            "created_at": "2025-04-29T15:02:01Z",
            "html_url": "https://github.com/neovim/neovim/issues/33719#issuecomment-2839259093",
            "id": 2839259093,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33719",
            "node_id": "IC_kwDOAPphoM6pO6fV",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2839259093/reactions"
            },
            "updated_at": "2025-04-29T15:03:15Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2839259093",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
                "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
                "followers_url": "https://api.github.com/users/bfredl/followers",
                "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
                "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bfredl",
                "id": 1363104,
                "login": "bfredl",
                "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
                "organizations_url": "https://api.github.com/users/bfredl/orgs",
                "received_events_url": "https://api.github.com/users/bfredl/received_events",
                "repos_url": "https://api.github.com/users/bfredl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bfredl",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "@bfredl, thank you so much üôè The fix works for both the reported issue and the original issue with screenshot testing I had.",
            "created_at": "2025-04-30T12:15:24Z",
            "html_url": "https://github.com/neovim/neovim/issues/33719#issuecomment-2841785311",
            "id": 2841785311,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33719",
            "node_id": "IC_kwDOAPphoM6pYjPf",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 2,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2841785311/reactions"
            },
            "updated_at": "2025-04-30T12:16:10Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2841785311",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/24854248?v=4",
                "events_url": "https://api.github.com/users/echasnovski/events{/privacy}",
                "followers_url": "https://api.github.com/users/echasnovski/followers",
                "following_url": "https://api.github.com/users/echasnovski/following{/other_user}",
                "gists_url": "https://api.github.com/users/echasnovski/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/echasnovski",
                "id": 24854248,
                "login": "echasnovski",
                "node_id": "MDQ6VXNlcjI0ODU0MjQ4",
                "organizations_url": "https://api.github.com/users/echasnovski/orgs",
                "received_events_url": "https://api.github.com/users/echasnovski/received_events",
                "repos_url": "https://api.github.com/users/echasnovski/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/echasnovski/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/echasnovski/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/echasnovski",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 4,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/33719/comments",
    "created_at": "2025-04-29T14:08:08Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/33719/events",
    "html_url": "https://github.com/neovim/neovim/issues/33719",
    "id": 3028503364,
    "labels": [
        {
            "color": "c5def5",
            "default": false,
            "description": "",
            "id": 113026979,
            "name": "ui",
            "node_id": "MDU6TGFiZWwxMTMwMjY5Nzk=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/ui"
        },
        {
            "color": "f9d0c4",
            "default": false,
            "description": "wrong behavior that was introduced in a previous commit (please bisect)",
            "id": 619474658,
            "name": "bug-regression",
            "node_id": "MDU6TGFiZWw2MTk0NzQ2NTg=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug-regression"
        },
        {
            "color": "0E8A16",
            "default": false,
            "description": "issue has been tracked to a specific commit",
            "id": 1481421490,
            "name": "has:bisected",
            "node_id": "MDU6TGFiZWwxNDgxNDIxNDkw",
            "url": "https://api.github.com/repos/neovim/neovim/labels/has:bisected"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/33719/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM60g0tE",
    "number": 33719,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/33719/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "completed",
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/33719/timeline",
    "title": "incorrect attribute value for floating window border cell adjacent to wrapped line continuation",
    "type": {
        "color": "red",
        "created_at": "2024-01-25T10:10:19Z",
        "description": "An unexpected problem or behavior",
        "id": 597163,
        "is_enabled": true,
        "name": "Bug",
        "node_id": "IT_kwDOAGK_Pc4ACRyr",
        "updated_at": "2024-07-26T10:12:30Z"
    },
    "updated_at": "2025-04-30T12:16:11Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/33719",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/24854248?v=4",
        "events_url": "https://api.github.com/users/echasnovski/events{/privacy}",
        "followers_url": "https://api.github.com/users/echasnovski/followers",
        "following_url": "https://api.github.com/users/echasnovski/following{/other_user}",
        "gists_url": "https://api.github.com/users/echasnovski/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/echasnovski",
        "id": 24854248,
        "login": "echasnovski",
        "node_id": "MDQ6VXNlcjI0ODU0MjQ4",
        "organizations_url": "https://api.github.com/users/echasnovski/orgs",
        "received_events_url": "https://api.github.com/users/echasnovski/received_events",
        "repos_url": "https://api.github.com/users/echasnovski/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/echasnovski/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/echasnovski/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/echasnovski",
        "user_view_type": "public"
    }
}