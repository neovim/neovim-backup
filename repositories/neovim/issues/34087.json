{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\n\nFrom #21403 an **incorrect** conclusion was reached that `clear` should not clear the terminal scrollback. In fact the man page of `clear` clearly stated that it does the both things by default.\n\n> DESCRIPTION\n>       **clear**  clears  your terminal's screen and its scrollback buffer, if any.\n\n`clear` emits both `\\033[2J` and `\\033[3J` (referred to as E3), but the latter is not handled by Neovim right now.\n\n#4413 made it possible to handle OSC sequences within terminals with autocmd, but E3 is a CSI sequence which does not trigger the autocmd.\n\nThis functionality is important to me, as clearing the buffer to filter out all the old output without resetting the environment is part of my workflow.\n\n### Expected behavior\n\n`clear` command should clear the terminal screen *as well as the scrollback*. Or maybe make it an option so user can choose to accept the sequence or not.",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "> From https://github.com/neovim/neovim/issues/21403 an incorrect conclusion was reached that clear should not clear the terminal scrollback.\n\nNo such conclusion was reached. just that this would ideally be implemented in user space. If reasonable, by extending the existing `TermRequest` mechanism also to unknown but well-formatted CSI sequences.\n\n>  In fact the man page of clear clearly stated that it does the both things by default.\n\nThe man page of `clear` is not the man page of any terminal emulator, and does not dictate anything about their behavior.  A better reference would be `xterm` as we currently claim to be xterm-compatible (although many xterm-alikes also seem to skimp of this as well, like kitty). ",
            "created_at": "2025-05-19T12:02:52Z",
            "html_url": "https://github.com/neovim/neovim/issues/34087#issuecomment-2890755800",
            "id": 2890755800,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34087",
            "node_id": "IC_kwDOAPphoM6sTW7Y",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2890755800/reactions"
            },
            "updated_at": "2025-05-19T12:02:52Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2890755800",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
                "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
                "followers_url": "https://api.github.com/users/bfredl/followers",
                "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
                "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bfredl",
                "id": 1363104,
                "login": "bfredl",
                "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
                "organizations_url": "https://api.github.com/users/bfredl/orgs",
                "received_events_url": "https://api.github.com/users/bfredl/received_events",
                "repos_url": "https://api.github.com/users/bfredl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bfredl",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "> xterm-compatible\n\nThis extension is introduced by xterm itself according to the same man page. I believe [this](https://www.xfree86.org/current/ctlseqs.html#:~:text=CSI%20P%20s%20J) is the place it's documented in xterm (search for `CSI P s J` if it doesn't jump there). And if you try in `xterm` itself, obviously it works.",
            "created_at": "2025-05-19T12:49:13Z",
            "html_url": "https://github.com/neovim/neovim/issues/34087#issuecomment-2890891038",
            "id": 2890891038,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34087",
            "node_id": "IC_kwDOAPphoM6sT38e",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2890891038/reactions"
            },
            "updated_at": "2025-05-19T12:51:31Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2890891038",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/28475392?v=4",
                "events_url": "https://api.github.com/users/s-cerevisiae/events{/privacy}",
                "followers_url": "https://api.github.com/users/s-cerevisiae/followers",
                "following_url": "https://api.github.com/users/s-cerevisiae/following{/other_user}",
                "gists_url": "https://api.github.com/users/s-cerevisiae/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/s-cerevisiae",
                "id": 28475392,
                "login": "s-cerevisiae",
                "node_id": "MDQ6VXNlcjI4NDc1Mzky",
                "organizations_url": "https://api.github.com/users/s-cerevisiae/orgs",
                "received_events_url": "https://api.github.com/users/s-cerevisiae/received_events",
                "repos_url": "https://api.github.com/users/s-cerevisiae/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/s-cerevisiae/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/s-cerevisiae/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/s-cerevisiae",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> If reasonable, by extending the existing `TermRequest` mechanism also to unknown but well-formatted CSI sequences.\n\nThis would be useful. E.g. when I use CTRL-L in a :terminal, I want to clear the existing `:h shell-prompt` marks.",
            "created_at": "2025-05-22T12:38:50Z",
            "html_url": "https://github.com/neovim/neovim/issues/34087#issuecomment-2901079459",
            "id": 2901079459,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34087",
            "node_id": "IC_kwDOAPphoM6s6vWj",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2901079459/reactions"
            },
            "updated_at": "2025-05-22T12:38:50Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2901079459",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "Sounds like a good use case for CSI support in `TermRequest`. Nevertheless I still think that the \"clear scrollback\" sequence should be supported natively and by default, for two reasons:\n\n- xterm compatibility, as this sequence is documented and effective in xterm by default.\n- there's currently **no proper way** to clear terminal scrollback. `set scrollback=1` leaves one line behind.\n\nThis doesn't conflict with extending `TermRequest`, but maybe they should be tracked separately.",
            "created_at": "2025-05-22T14:36:49Z",
            "html_url": "https://github.com/neovim/neovim/issues/34087#issuecomment-2901477050",
            "id": 2901477050,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34087",
            "node_id": "IC_kwDOAPphoM6s8Qa6",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2901477050/reactions"
            },
            "updated_at": "2025-05-22T14:37:14Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2901477050",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/28475392?v=4",
                "events_url": "https://api.github.com/users/s-cerevisiae/events{/privacy}",
                "followers_url": "https://api.github.com/users/s-cerevisiae/followers",
                "following_url": "https://api.github.com/users/s-cerevisiae/following{/other_user}",
                "gists_url": "https://api.github.com/users/s-cerevisiae/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/s-cerevisiae",
                "id": 28475392,
                "login": "s-cerevisiae",
                "node_id": "MDQ6VXNlcjI4NDc1Mzky",
                "organizations_url": "https://api.github.com/users/s-cerevisiae/orgs",
                "received_events_url": "https://api.github.com/users/s-cerevisiae/received_events",
                "repos_url": "https://api.github.com/users/s-cerevisiae/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/s-cerevisiae/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/s-cerevisiae/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/s-cerevisiae",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 4,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/34087/comments",
    "created_at": "2025-05-19T11:45:47Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/34087/events",
    "html_url": "https://github.com/neovim/neovim/issues/34087",
    "id": 3073552932,
    "labels": [
        {
            "color": "c5def5",
            "default": false,
            "description": "built-in :terminal or :shell",
            "id": 212696822,
            "name": "terminal",
            "node_id": "MDU6TGFiZWwyMTI2OTY4MjI=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/terminal"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/34087/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 719,
        "created_at": "2014-05-10T20:43:04Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
            "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
            "followers_url": "https://api.github.com/users/justinmk/followers",
            "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/justinmk",
            "id": 1359421,
            "login": "justinmk",
            "node_id": "MDQ6VXNlcjEzNTk0MjE=",
            "organizations_url": "https://api.github.com/users/justinmk/orgs",
            "received_events_url": "https://api.github.com/users/justinmk/received_events",
            "repos_url": "https://api.github.com/users/justinmk/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/justinmk",
            "user_view_type": "public"
        },
        "description": "Low priority items. We plan to work on this but don't have a target date.",
        "due_on": null,
        "html_url": "https://github.com/neovim/neovim/milestone/6",
        "id": 655037,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/6/labels",
        "node_id": "MDk6TWlsZXN0b25lNjU1MDM3",
        "number": 6,
        "open_issues": 633,
        "state": "open",
        "title": "backlog",
        "updated_at": "2025-05-22T12:38:56Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/6"
    },
    "node_id": "I_kwDOAPphoM63MrIk",
    "number": 34087,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/34087/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/34087/timeline",
    "title": "Support the CSI \"clear scrollback\" sequence in `:terminal`",
    "type": {
        "color": "blue",
        "created_at": "2024-01-25T10:10:19Z",
        "description": "A request, idea, or new functionality",
        "id": 597167,
        "is_enabled": true,
        "name": "Enhancement",
        "node_id": "IT_kwDOAGK_Pc4ACRyv",
        "updated_at": "2024-07-26T10:12:30Z"
    },
    "updated_at": "2025-05-23T14:29:46Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/34087",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/28475392?v=4",
        "events_url": "https://api.github.com/users/s-cerevisiae/events{/privacy}",
        "followers_url": "https://api.github.com/users/s-cerevisiae/followers",
        "following_url": "https://api.github.com/users/s-cerevisiae/following{/other_user}",
        "gists_url": "https://api.github.com/users/s-cerevisiae/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/s-cerevisiae",
        "id": 28475392,
        "login": "s-cerevisiae",
        "node_id": "MDQ6VXNlcjI4NDc1Mzky",
        "organizations_url": "https://api.github.com/users/s-cerevisiae/orgs",
        "received_events_url": "https://api.github.com/users/s-cerevisiae/received_events",
        "repos_url": "https://api.github.com/users/s-cerevisiae/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/s-cerevisiae/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/s-cerevisiae/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/s-cerevisiae",
        "user_view_type": "public"
    }
}