{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\n\nTerminal shows incorrect ANSI escapes for values 37 (bright white foreground) and 40 (black background). The black background seems to always be treated as background, even if particular color scheme uses a light color (here white). See `$PSStyle` output below, left are correct colors from regular terminal, right are values from terminal running inside Neovim.\n\n![Image](https://github.com/user-attachments/assets/ecd30976-846c-4c67-8d05-05cf49db9121)\n\n\n### Steps to reproduce\n\n> $PSStyle\n> nvim -c 'term pwsh -c \"$PSStyle\"'\n\n### Expected behavior\n\nColors match\n\n### Nvim version (nvim -v)\n\nNVIM v0.9.5, v0.10.2, v0.11.0\n\n### Vim (not Nvim) behaves the same?\n\nYes\n\n### Operating system/version\n\nMicrosoft Windows Version 23H2 (OS Build 22631.4460)\n\n### Terminal name/version\n\nWindows Terminal 1.21.3231.0\n\n### $TERM environment variable\n\nxterm-256color\n\n### Installation\n\nwinget install -e Neovim.Neovim --version 0.9.5",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "> NVIM v0.9.5\n\nEven if the bug is fixed, it can never be fixed on an old version of Nvim.\n\nOn latest Nvim, make sure you set 'notermguicolors' to force use of ANSI colors.",
            "created_at": "2024-11-28T15:11:56Z",
            "html_url": "https://github.com/neovim/neovim/issues/31373#issuecomment-2506337455",
            "id": 2506337455,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/31373",
            "node_id": "IC_kwDOAPphoM6VY6yv",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2506337455/reactions"
            },
            "updated_at": "2024-11-28T15:11:56Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2506337455",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "@justinmk Understood, I stuck with 0.9.5 because newer versions were messing with my colorschemes and I could not be bothered to update them. \n\nI checked Neovim 0.10.2 stable and 0.11.0-dev-1247+g5897994cb7 nightly, both have the same issue. Vim 9.1, though it displays some colors differently, also treats black background as transparent. `notermguicolors` was already set everywhere. ",
            "created_at": "2024-11-28T15:32:38Z",
            "html_url": "https://github.com/neovim/neovim/issues/31373#issuecomment-2506376216",
            "id": 2506376216,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/31373",
            "node_id": "IC_kwDOAPphoM6VZEQY",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2506376216/reactions"
            },
            "updated_at": "2024-11-28T15:32:38Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2506376216",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/26599495?v=4",
                "events_url": "https://api.github.com/users/dkaszews/events{/privacy}",
                "followers_url": "https://api.github.com/users/dkaszews/followers",
                "following_url": "https://api.github.com/users/dkaszews/following{/other_user}",
                "gists_url": "https://api.github.com/users/dkaszews/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/dkaszews",
                "id": 26599495,
                "login": "dkaszews",
                "node_id": "MDQ6VXNlcjI2NTk5NDk1",
                "organizations_url": "https://api.github.com/users/dkaszews/orgs",
                "received_events_url": "https://api.github.com/users/dkaszews/received_events",
                "repos_url": "https://api.github.com/users/dkaszews/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/dkaszews/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/dkaszews/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/dkaszews",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 2,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/31373/comments",
    "created_at": "2024-11-28T13:39:53Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/31373/events",
    "html_url": "https://github.com/neovim/neovim/issues/31373",
    "id": 2702213934,
    "labels": [
        {
            "color": "f9d0c4",
            "default": true,
            "description": "issues reporting wrong behavior",
            "id": 77997474,
            "name": "bug",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3NA==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "built-in :terminal or :shell",
            "id": 212696822,
            "name": "terminal",
            "node_id": "MDU6TGFiZWwyMTI2OTY4MjI=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/terminal"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/31373/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 686,
        "created_at": "2014-05-10T20:43:04Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
            "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
            "followers_url": "https://api.github.com/users/justinmk/followers",
            "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/justinmk",
            "id": 1359421,
            "login": "justinmk",
            "node_id": "MDQ6VXNlcjEzNTk0MjE=",
            "organizations_url": "https://api.github.com/users/justinmk/orgs",
            "received_events_url": "https://api.github.com/users/justinmk/received_events",
            "repos_url": "https://api.github.com/users/justinmk/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/justinmk",
            "user_view_type": "public"
        },
        "description": "Low priority items. We plan to work on this but don't have a target date.",
        "due_on": null,
        "html_url": "https://github.com/neovim/neovim/milestone/6",
        "id": 655037,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/6/labels",
        "node_id": "MDk6TWlsZXN0b25lNjU1MDM3",
        "number": 6,
        "open_issues": 635,
        "state": "open",
        "title": "backlog",
        "updated_at": "2025-01-21T00:09:37Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/6"
    },
    "node_id": "I_kwDOAPphoM6hEIMu",
    "number": 31373,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/31373/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/31373/timeline",
    "title": "Wrong ANSI colors in terminal",
    "updated_at": "2025-01-17T15:39:22Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/31373",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/26599495?v=4",
        "events_url": "https://api.github.com/users/dkaszews/events{/privacy}",
        "followers_url": "https://api.github.com/users/dkaszews/followers",
        "following_url": "https://api.github.com/users/dkaszews/following{/other_user}",
        "gists_url": "https://api.github.com/users/dkaszews/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/dkaszews",
        "id": 26599495,
        "login": "dkaszews",
        "node_id": "MDQ6VXNlcjI2NTk5NDk1",
        "organizations_url": "https://api.github.com/users/dkaszews/orgs",
        "received_events_url": "https://api.github.com/users/dkaszews/received_events",
        "repos_url": "https://api.github.com/users/dkaszews/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/dkaszews/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/dkaszews/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/dkaszews",
        "user_view_type": "public"
    }
}