{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "body": "### Problem\n\n`vim.Pos` objects are essentially points on a 2D discrete Cartesian plane (with non-negative integer coordinates). In certain use cases, it's natural for one to hope to find the distance between 2 `vim.Pos` objects. For instance, one might be interested in finding the closest code action/inlay-hint/LSP reference to the cursor. Currently, there's no built-in API to achieve that easily.\n\n### Expected behavior\n\n- `vim.pos.Delta` class, which represents the displacement between 2 `vim.Pos` objects. This can be a subclass of the current `vim.Pos` class, with some of the methods removed (`vim.pos.lsp`, `vim.pos.to_lsp`, etc.).\n- `vim.Pos.__add(p1, p2)` and `vim.Pos.__sub(p1, p2)` metamethods for the `vim.Pos` class. At least one of the 2 parameters should be a `vim.pos.Delta` object. In other words, adding/subtracting between 2 `vim.Pos` should be illegal.\n  - TBD: we might need slightly different metamethods for `vim.Pos` and `vim.pos.Delta`, because when you add a `Pos` with a `Delta`, you'd probably expect a `Pos` as the result, whereas when you add 2 `Delta`s, you'd expect the result to be a `Delta`.\n- `vim.pos.distance(p1, p2, opts?)` that computes the distance between 2 `vim.Pos` objects. The `opts` can include a distance metric of choice, like Cartesian or Manhattan distances.\n\n### Related issue\n\n#25509 ",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "> For instance, one might be interested in finding the closest code action/inlay-hint/LSP reference to the cursor.\n\nIf the plan is to use regular 2d distance, achieving this as described might be a complex task due to possible text wrapping. My expectation when talking about \"closest to cursor in 2d\" would take visual representation of buffer and cursor into account.\n\nThis means that using abstract buffer positions will not be enough data. It would need to know at least window width.\n\nIn practice, I find it rarely useful to think about buffer position in terms of abstract 2d points. Usually the most \"naturally feeling\" approach is to think about them in 1d of text flow (top to bottom, left to right). And computing distance based on byte count of the position is more natural.\n\nThere are already Vimscript methods for position<->byte conversion, but it *maybe* might be useful to have in `vim.pos`.",
            "created_at": "2025-10-26T06:44:34Z",
            "html_url": "https://github.com/neovim/neovim/issues/36331#issuecomment-3448065276",
            "id": 3448065276,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36331",
            "node_id": "IC_kwDOAPphoM7NhUz8",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3448065276/reactions"
            },
            "updated_at": "2025-10-26T06:44:34Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3448065276",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/24854248?v=4",
                "events_url": "https://api.github.com/users/echasnovski/events{/privacy}",
                "followers_url": "https://api.github.com/users/echasnovski/followers",
                "following_url": "https://api.github.com/users/echasnovski/following{/other_user}",
                "gists_url": "https://api.github.com/users/echasnovski/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/echasnovski",
                "id": 24854248,
                "login": "echasnovski",
                "node_id": "MDQ6VXNlcjI0ODU0MjQ4",
                "organizations_url": "https://api.github.com/users/echasnovski/orgs",
                "received_events_url": "https://api.github.com/users/echasnovski/received_events",
                "repos_url": "https://api.github.com/users/echasnovski/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/echasnovski/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/echasnovski/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/echasnovski",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "> achieving this as described might be a complex task due to possible text wrapping. My expectation when talking about \\\"closest to cursor in 2d\\\" would take visual representation of buffer and cursor into account.\\n\\nThis means that using abstract buffer positions will not be enough data. It would need to know at least window width.\n\nThat's true. I think this can be an option in the `opts` parameter in the implementation of the distance API (maybe this'll even need to go all the way into the delta). This'll also make the distance API more flexible because there are people who don't use wrapping (at least in certain scenarios).",
            "created_at": "2025-10-26T06:57:54Z",
            "html_url": "https://github.com/neovim/neovim/issues/36331#issuecomment-3448071311",
            "id": 3448071311,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36331",
            "node_id": "IC_kwDOAPphoM7NhWSP",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3448071311/reactions"
            },
            "updated_at": "2025-10-26T06:57:54Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3448071311",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/30951234?v=4",
                "events_url": "https://api.github.com/users/Davidyz/events{/privacy}",
                "followers_url": "https://api.github.com/users/Davidyz/followers",
                "following_url": "https://api.github.com/users/Davidyz/following{/other_user}",
                "gists_url": "https://api.github.com/users/Davidyz/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Davidyz",
                "id": 30951234,
                "login": "Davidyz",
                "node_id": "MDQ6VXNlcjMwOTUxMjM0",
                "organizations_url": "https://api.github.com/users/Davidyz/orgs",
                "received_events_url": "https://api.github.com/users/Davidyz/received_events",
                "repos_url": "https://api.github.com/users/Davidyz/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Davidyz/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Davidyz/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Davidyz",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Any prior art from other text editors (or libraries e.g. python `textwrap`) ?",
            "created_at": "2025-10-27T20:05:41Z",
            "html_url": "https://github.com/neovim/neovim/issues/36331#issuecomment-3453094441",
            "id": 3453094441,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36331",
            "node_id": "IC_kwDOAPphoM7N0gop",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 1,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3453094441/reactions"
            },
            "updated_at": "2025-10-27T20:05:41Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3453094441",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 3,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/36331/comments",
    "created_at": "2025-10-26T06:23:24Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/36331/events",
    "html_url": "https://github.com/neovim/neovim/issues/36331",
    "id": 3553341529,
    "issue_dependencies_summary": {
        "blocked_by": 0,
        "blocking": 0,
        "total_blocked_by": 0,
        "total_blocking": 0
    },
    "labels": [
        {
            "color": "c5def5",
            "default": false,
            "description": "stdlib",
            "id": 573222693,
            "name": "lua",
            "node_id": "MDU6TGFiZWw1NzMyMjI2OTM=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/lua"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/36331/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM7Ty7BZ",
    "number": 36331,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/36331/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/36331/timeline",
    "title": "`vim.pos` enhancement: position delta and distances between positions",
    "type": {
        "color": "blue",
        "created_at": "2024-01-25T10:10:19Z",
        "description": "A request, idea, or new functionality",
        "id": 597167,
        "is_enabled": true,
        "name": "Enhancement",
        "node_id": "IT_kwDOAGK_Pc4ACRyv",
        "updated_at": "2024-07-26T10:12:30Z"
    },
    "updated_at": "2025-10-27T20:05:41Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/36331",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/30951234?v=4",
        "events_url": "https://api.github.com/users/Davidyz/events{/privacy}",
        "followers_url": "https://api.github.com/users/Davidyz/followers",
        "following_url": "https://api.github.com/users/Davidyz/following{/other_user}",
        "gists_url": "https://api.github.com/users/Davidyz/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/Davidyz",
        "id": 30951234,
        "login": "Davidyz",
        "node_id": "MDQ6VXNlcjMwOTUxMjM0",
        "organizations_url": "https://api.github.com/users/Davidyz/orgs",
        "received_events_url": "https://api.github.com/users/Davidyz/received_events",
        "repos_url": "https://api.github.com/users/Davidyz/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/Davidyz/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Davidyz/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/Davidyz",
        "user_view_type": "public"
    }
}