{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "# Problem\n\nWith large projects with multiple directories, files like Session.vim, tags files, and other similar \"project files\" could be anywhere within the project.\n\n# Expected behavior\n\nWith a \"project\" feature, commands like `:vimgrep`, `:make`, `nvim -S Session.vim`, etc., load files from the project directory.\n\nI was thinking of having 4 options:\n\n- ~~`project: boolean` (default 0 for compatibility) When this option is set to true, neovim sets the 'projectdir' and looks for makefiles, cscope dbs, etc, inside the cwd, then inside 'projectdir'. When set to false, neovim acts as usual When 'autochdir' is set, neovim changes the directory to the project directory~~\n    - *(2024 justinmk)* Doesn't seem necessary; instead, always do the right thing based on the presence of `&l:rootdir` or `.nvim.lua` ?\n- `projectfunc: string` (default: empty) Decides the project directory by a custom function. If nil, the project directory is determined by searching parent directories for the projectfiles\n    - *(2024 justinmk)* related: https://github.com/neovim/neovim/pull/31630\n- `projectdir: string` (default: empty) Set by projectfunc or projectfiles.  The directory of the project\n    - *(2024 justinmk)* I assume this is buffer-local option? Alternative names: `rootdir`, `workdir`\n- `projectfiles: list` (default: \".git,src,etc\") Files/directories to search for in parent directories.  Searches from left to right eg. search for .git, then src, etc\n    - *(2024 justinmk)* In `vim.lsp.config` we named this `root_markers`.",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [
        {
            "author_association": "CONTRIBUTOR",
            "body": "I assume there already are plugins for that, did you have a look? E.g https://github.com/tpope/vim-projectionist",
            "created_at": "2018-06-21T07:21:27Z",
            "html_url": "https://github.com/neovim/neovim/issues/8610#issuecomment-399002145",
            "id": 399002145,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/8610",
            "node_id": "MDEyOklzc3VlQ29tbWVudDM5OTAwMjE0NQ==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/399002145/reactions"
            },
            "updated_at": "2018-06-21T07:21:27Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/399002145",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/4117685?v=4",
                "events_url": "https://api.github.com/users/KillTheMule/events{/privacy}",
                "followers_url": "https://api.github.com/users/KillTheMule/followers",
                "following_url": "https://api.github.com/users/KillTheMule/following{/other_user}",
                "gists_url": "https://api.github.com/users/KillTheMule/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/KillTheMule",
                "id": 4117685,
                "login": "KillTheMule",
                "node_id": "MDQ6VXNlcjQxMTc2ODU=",
                "organizations_url": "https://api.github.com/users/KillTheMule/orgs",
                "received_events_url": "https://api.github.com/users/KillTheMule/received_events",
                "repos_url": "https://api.github.com/users/KillTheMule/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/KillTheMule/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/KillTheMule/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/KillTheMule",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "``vim-projectionist`` seems like a crazy overkill over what is suggested in this ticket. This feels like really nice functionality which should in the basic program.",
            "created_at": "2019-07-24T20:23:06Z",
            "html_url": "https://github.com/neovim/neovim/issues/8610#issuecomment-514785708",
            "id": 514785708,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/8610",
            "node_id": "MDEyOklzc3VlQ29tbWVudDUxNDc4NTcwOA==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/514785708/reactions"
            },
            "updated_at": "2019-07-24T20:23:06Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/514785708",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/198999?v=4",
                "events_url": "https://api.github.com/users/mcepl/events{/privacy}",
                "followers_url": "https://api.github.com/users/mcepl/followers",
                "following_url": "https://api.github.com/users/mcepl/following{/other_user}",
                "gists_url": "https://api.github.com/users/mcepl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mcepl",
                "id": 198999,
                "login": "mcepl",
                "node_id": "MDQ6VXNlcjE5ODk5OQ==",
                "organizations_url": "https://api.github.com/users/mcepl/orgs",
                "received_events_url": "https://api.github.com/users/mcepl/received_events",
                "repos_url": "https://api.github.com/users/mcepl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mcepl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mcepl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mcepl",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "> When I edit a file, I usually cd to the directory and then call vim on a file. The problem with that is that with large projects with multiple directories, files like Session.vim, tags files, and other similar \"project files\" could be anywhere within the project. With a \"project\" feature, neovim would use commands like vimgrep, make, cs add [file], etc and load files (eg Session.vim) from the project directory.\r\n\r\nWhy do you `cd` to the file in the first place?  Is that in Neovim or before starting it? (just asking to understand your use case)\r\n\r\nIs the idea of this future for Neovim to set the `projectdir` variable automatically?\r\nWould it do things based on that itself?  (apart from the `autochdir` you've mentioned)\r\n\r\nTake a look at https://github.com/dbakker/vim-projectroot maybe for handling project roots.\r\nI am using some mappings around it to `:lcd`/`:tcd`/`:cd` based on that: https://github.com/blueyed/dotfiles/blob/001ace8cd6c72151ba6880991e83aa2d481547ae/vimrc#L2773-L2789\r\n\r\nIn Neomake I've also added a helper function to get the project root for a given buffer: https://github.com/neomake/neomake/blob/852029b49c495181c2900d6baf4de7208507649e/autoload/neomake/utils.vim#L636-L673",
            "created_at": "2019-07-24T20:33:51Z",
            "html_url": "https://github.com/neovim/neovim/issues/8610#issuecomment-514789322",
            "id": 514789322,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/8610",
            "node_id": "MDEyOklzc3VlQ29tbWVudDUxNDc4OTMyMg==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/514789322/reactions"
            },
            "updated_at": "2019-07-24T20:33:51Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/514789322",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9766?v=4",
                "events_url": "https://api.github.com/users/blueyed/events{/privacy}",
                "followers_url": "https://api.github.com/users/blueyed/followers",
                "following_url": "https://api.github.com/users/blueyed/following{/other_user}",
                "gists_url": "https://api.github.com/users/blueyed/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/blueyed",
                "id": 9766,
                "login": "blueyed",
                "node_id": "MDQ6VXNlcjk3NjY=",
                "organizations_url": "https://api.github.com/users/blueyed/orgs",
                "received_events_url": "https://api.github.com/users/blueyed/received_events",
                "repos_url": "https://api.github.com/users/blueyed/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/blueyed/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/blueyed/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/blueyed",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "> Why do you cd to the file in the first place?\r\n\r\nFor the same reason why `autochdir` makes sense. When opening vim from some other command (i.e., something like `vim $(locate something)` or when opening file from `:marks`) it is more convenient to have working directory set to something meaningful than to the random directory, where user happened to be.\r\n\r\nHowever, quite often “project directory” makes quite often more sense than the actual directory where the edited file is.\r\n\r\n`vim-projectroot` looks interesting.",
            "created_at": "2019-07-24T20:39:25Z",
            "html_url": "https://github.com/neovim/neovim/issues/8610#issuecomment-514791160",
            "id": 514791160,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/8610",
            "node_id": "MDEyOklzc3VlQ29tbWVudDUxNDc5MTE2MA==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/514791160/reactions"
            },
            "updated_at": "2019-07-24T20:41:01Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/514791160",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/198999?v=4",
                "events_url": "https://api.github.com/users/mcepl/events{/privacy}",
                "followers_url": "https://api.github.com/users/mcepl/followers",
                "following_url": "https://api.github.com/users/mcepl/following{/other_user}",
                "gists_url": "https://api.github.com/users/mcepl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mcepl",
                "id": 198999,
                "login": "mcepl",
                "node_id": "MDQ6VXNlcjE5ODk5OQ==",
                "organizations_url": "https://api.github.com/users/mcepl/orgs",
                "received_events_url": "https://api.github.com/users/mcepl/received_events",
                "repos_url": "https://api.github.com/users/mcepl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mcepl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mcepl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mcepl",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I see.  That's when I do `,cdr` or `,cdR` (\",\" being the leader).. :)",
            "created_at": "2019-07-24T20:48:34Z",
            "html_url": "https://github.com/neovim/neovim/issues/8610#issuecomment-514794289",
            "id": 514794289,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/8610",
            "node_id": "MDEyOklzc3VlQ29tbWVudDUxNDc5NDI4OQ==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/514794289/reactions"
            },
            "updated_at": "2019-07-24T20:48:34Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/514794289",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9766?v=4",
                "events_url": "https://api.github.com/users/blueyed/events{/privacy}",
                "followers_url": "https://api.github.com/users/blueyed/followers",
                "following_url": "https://api.github.com/users/blueyed/following{/other_user}",
                "gists_url": "https://api.github.com/users/blueyed/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/blueyed",
                "id": 9766,
                "login": "blueyed",
                "node_id": "MDQ6VXNlcjk3NjY=",
                "organizations_url": "https://api.github.com/users/blueyed/orgs",
                "received_events_url": "https://api.github.com/users/blueyed/received_events",
                "repos_url": "https://api.github.com/users/blueyed/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/blueyed/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/blueyed/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/blueyed",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Right, you have basically wrote those plugins once more in your ``$VIMRC``.\r\n\r\nBTW, [vim-rooter](https://github.com/airblade/vim-rooter) seems even more interesting.",
            "created_at": "2019-07-24T20:51:54Z",
            "html_url": "https://github.com/neovim/neovim/issues/8610#issuecomment-514795341",
            "id": 514795341,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/8610",
            "node_id": "MDEyOklzc3VlQ29tbWVudDUxNDc5NTM0MQ==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/514795341/reactions"
            },
            "updated_at": "2019-07-24T20:53:56Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/514795341",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/198999?v=4",
                "events_url": "https://api.github.com/users/mcepl/events{/privacy}",
                "followers_url": "https://api.github.com/users/mcepl/followers",
                "following_url": "https://api.github.com/users/mcepl/following{/other_user}",
                "gists_url": "https://api.github.com/users/mcepl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mcepl",
                "id": 198999,
                "login": "mcepl",
                "node_id": "MDQ6VXNlcjE5ODk5OQ==",
                "organizations_url": "https://api.github.com/users/mcepl/orgs",
                "received_events_url": "https://api.github.com/users/mcepl/received_events",
                "repos_url": "https://api.github.com/users/mcepl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mcepl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mcepl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mcepl",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "# Status\n\n## Done\n\n- ✅ ['exrc' option](https://github.com/neovim/neovim/pull/20956) (plus `:trust`) enables project-local config in a `.nvim.lua` file.\n- ✅ [vim.fs.parents()](https://neovim.io/doc/user/lua.html#vim.fs.parents())\n- ✅ [vim.fs.root()](https://github.com/neovim/neovim/pull/28477)\n\n## Todo\n\n- Buffer-local `rootdir` (`workdir`? singular or plural?) option which decides the project (aka workspace) of each buffer.\n    - Do we also need `get_project_bufs()`?\n- Higher-level command or option for automatically creating and reading `.nvim.lua` \"project\" file and/or session file (implicitly, without `nvim -S`) ?\n- Formalize (document) the \"Project\" concept. (Is it defined by the presence of `.nvim.lua`? `rootdir` on a buffer?)\n- Should sessions (`:mksession`) more explicitly understand/expose this concept?\n- [project-local shada](https://old.reddit.com/r/neovim/comments/1hkpgar/a_per_project_shadafile/) that \"inherits\" the user-global shada?\n\nRelated: https://www.reddit.com/r/neovim/comments/zy5s0l/you_dont_need_vimrooter_usually_or_how_to_set_up/",
            "created_at": "2022-12-30T16:24:56Z",
            "html_url": "https://github.com/neovim/neovim/issues/8610#issuecomment-1367994885",
            "id": 1367994885,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/8610",
            "node_id": "IC_kwDOAPphoM5RifIF",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1367994885/reactions"
            },
            "updated_at": "2024-12-23T16:07:39Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1367994885",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 7,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/8610/comments",
    "created_at": "2018-06-21T03:20:21Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/8610/events",
    "html_url": "https://github.com/neovim/neovim/issues/8610",
    "id": 334323233,
    "labels": [
        {
            "color": "c2e0c6",
            "default": true,
            "description": "feature request",
            "id": 77997476,
            "name": "enhancement",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3Ng==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/enhancement"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "Nvim core functionality or code",
            "id": 858327504,
            "name": "core",
            "node_id": "MDU6TGFiZWw4NTgzMjc1MDQ=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/core"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/8610/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 677,
        "created_at": "2014-05-10T20:43:04Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
            "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
            "followers_url": "https://api.github.com/users/justinmk/followers",
            "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/justinmk",
            "id": 1359421,
            "login": "justinmk",
            "node_id": "MDQ6VXNlcjEzNTk0MjE=",
            "organizations_url": "https://api.github.com/users/justinmk/orgs",
            "received_events_url": "https://api.github.com/users/justinmk/received_events",
            "repos_url": "https://api.github.com/users/justinmk/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/justinmk",
            "user_view_type": "public"
        },
        "description": "Low priority items. We plan to work on this but don't have a target date.",
        "due_on": null,
        "html_url": "https://github.com/neovim/neovim/milestone/6",
        "id": 655037,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/6/labels",
        "node_id": "MDk6TWlsZXN0b25lNjU1MDM3",
        "number": 6,
        "open_issues": 620,
        "state": "open",
        "title": "backlog",
        "updated_at": "2024-12-23T13:21:42Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/6"
    },
    "node_id": "MDU6SXNzdWUzMzQzMjMyMzM=",
    "number": 8610,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 9,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 9,
        "url": "https://api.github.com/repos/neovim/neovim/issues/8610/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/8610/timeline",
    "title": "Project concept",
    "updated_at": "2024-12-23T16:07:39Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/8610",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/12522143?v=4",
        "events_url": "https://api.github.com/users/ForTheReallys/events{/privacy}",
        "followers_url": "https://api.github.com/users/ForTheReallys/followers",
        "following_url": "https://api.github.com/users/ForTheReallys/following{/other_user}",
        "gists_url": "https://api.github.com/users/ForTheReallys/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/ForTheReallys",
        "id": 12522143,
        "login": "ForTheReallys",
        "node_id": "MDQ6VXNlcjEyNTIyMTQz",
        "organizations_url": "https://api.github.com/users/ForTheReallys/orgs",
        "received_events_url": "https://api.github.com/users/ForTheReallys/received_events",
        "repos_url": "https://api.github.com/users/ForTheReallys/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/ForTheReallys/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/ForTheReallys/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/ForTheReallys",
        "user_view_type": "public"
    }
}