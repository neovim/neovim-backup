{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "MEMBER",
    "body": "### Problem\n\nThe default colorscheme uses the same color for diff-mode hunks and visual selection, making it hard to distinguish the two. See attached screenshot, where the third line in buffer `a` is visually-selected.\n\n![Image](https://github.com/user-attachments/assets/429a97b7-3b23-4f8e-9846-d43ce10d8af3)\n\n### Steps to reproduce\n\nCopy any file on your disk, modify it a little, then open both the original and the copy and run `:diffthis` on both.\n\n### Expected behavior\n\nI would like to be able to distinguish the visual selection from diff-mode hunks more easily.\n\nNote that in https://github.com/neovim/neovim/pull/32186#issuecomment-2613955562 , @echasnovski says:\n>It basically means that Grey4 is designed to draw (mostly temporary) attention through background but still have reasonable contrast ratio with all foreground colors (4 shades of grey and six syntax colors). It is already used as background to serve that purpose where it needs to: Visual, ColorColumn, DiffChange, MatchParen\n\nSo hunks and visual mode having the same color is by design and not an oversight. I still think it would be worth changing, if possible within the current constraints, as this would improve usability of visual mode on diff buffers.\n\n### Nvim version (nvim -v)\n\n0.12/master\n\n### Vim (not Nvim) behaves the same?\n\nN/A\n\n### Operating system/version\n\nN/A\n\n### Terminal name/version\n\nN/A\n\n### $TERM environment variable\n\nN/A\n\n### Installation\n\nN/A",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "> The default colorscheme uses the same color for diff-mode hunks and visual selection, making it hard to distinguish the two.\n> See attached screenshot, where the third line in buffer `a` is visually-selected.\n\nThey are usually distinguishable in that visual selection doesn't highlight past the end of line. Yes, this is not 100% visible (like with 'nowrap' and long line), but usually it is.\n\n> So hunks and visual mode having the same color is by design and not an oversight. I still think it would be worth changing, if possible within the current constraints, as this would improve usability of visual mode on diff buffers.\n\nI personally don't consider visually selecting a diffmode hunk as a frequent enough use case to have optimize around.\n\nThat said, `DiffChange` can use either `Grey1` (very dark) or `Grey3` (same as cursorline) as its background instead of `Grey4`. Both seem fine, because there is an underline for cursor line when cursor is inside any hunk.\n\nHere are various available `DiffChange` backgrounds:\n\n- Grey4 (current default, same as `Visual`):\n\n![Image](https://github.com/user-attachments/assets/986c2579-1186-4652-93bc-2069bae0ca55)\n\n- Grey3 (same as `CursorLine`):\n\n![Image](https://github.com/user-attachments/assets/eec40b1e-fa26-4b25-bfeb-c56b8b236a72)\n\n- Grey1 (same as floating window):\n\n![Image](https://github.com/user-attachments/assets/f421fe0e-54d4-47e6-9e3c-d1220678a1be)\n\n\nSo if I have to choose right now, I'd stay with current `Grey4` as visual mode in diff buffers doesn't seem quite frequent use case to optimize for. The `Grey3` is fine, the `Grey1` is also fine but less so.",
            "created_at": "2025-05-16T09:00:15Z",
            "html_url": "https://github.com/neovim/neovim/issues/34045#issuecomment-2886095533",
            "id": 2886095533,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34045",
            "node_id": "IC_kwDOAPphoM6sBlKt",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2886095533/reactions"
            },
            "updated_at": "2025-05-16T09:02:29Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2886095533",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/24854248?v=4",
                "events_url": "https://api.github.com/users/echasnovski/events{/privacy}",
                "followers_url": "https://api.github.com/users/echasnovski/followers",
                "following_url": "https://api.github.com/users/echasnovski/following{/other_user}",
                "gists_url": "https://api.github.com/users/echasnovski/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/echasnovski",
                "id": 24854248,
                "login": "echasnovski",
                "node_id": "MDQ6VXNlcjI0ODU0MjQ4",
                "organizations_url": "https://api.github.com/users/echasnovski/orgs",
                "received_events_url": "https://api.github.com/users/echasnovski/received_events",
                "repos_url": "https://api.github.com/users/echasnovski/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/echasnovski/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/echasnovski/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/echasnovski",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 1,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/34045/comments",
    "created_at": "2025-05-16T08:43:14Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/34045/events",
    "html_url": "https://github.com/neovim/neovim/issues/34045",
    "id": 3068361277,
    "labels": [
        {
            "color": "c5def5",
            "default": false,
            "description": "",
            "id": 1786207367,
            "name": "highlight",
            "node_id": "MDU6TGFiZWwxNzg2MjA3MzY3",
            "url": "https://api.github.com/repos/neovim/neovim/labels/highlight"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/34045/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM6243o9",
    "number": 34045,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/34045/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/34045/timeline",
    "title": "Default colorscheme makes distinguishing diff-mode hunks from Visual selection hard",
    "type": {
        "color": "red",
        "created_at": "2024-01-25T10:10:19Z",
        "description": "An unexpected problem or behavior",
        "id": 597163,
        "is_enabled": true,
        "name": "Bug",
        "node_id": "IT_kwDOAGK_Pc4ACRyr",
        "updated_at": "2024-07-26T10:12:30Z"
    },
    "updated_at": "2025-05-16T09:02:31Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/34045",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/11534587?v=4",
        "events_url": "https://api.github.com/users/glacambre/events{/privacy}",
        "followers_url": "https://api.github.com/users/glacambre/followers",
        "following_url": "https://api.github.com/users/glacambre/following{/other_user}",
        "gists_url": "https://api.github.com/users/glacambre/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/glacambre",
        "id": 11534587,
        "login": "glacambre",
        "node_id": "MDQ6VXNlcjExNTM0NTg3",
        "organizations_url": "https://api.github.com/users/glacambre/orgs",
        "received_events_url": "https://api.github.com/users/glacambre/received_events",
        "repos_url": "https://api.github.com/users/glacambre/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/glacambre/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/glacambre/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/glacambre",
        "user_view_type": "public"
    }
}