{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\n\nI want to open a vim session AND start editing OTHER_FILE from the argument list:\n\n`vim -S Session.vim OTHER_FILE`\n\nThis is not possible currently and the problem has already been described before (not by me, e.g. [this SO thread](https://vi.stackexchange.com/questions/28625/when-opening-an-existing-session-and-an-existing-file-at-the-same-time-the-focu)).\n\nThe problem is that vim will load the argument list before the session, and the sessionfile will contain a section like this:\n\n```\nargglobal\n%argdel\n$argadd ~/.bashrc\nedit ~/.config/wezterm/wezterm.lua\nargglobal\n```\n\nEffectively overwriting whatever argument list has been passed to vim before. This is very surprising and unexpected behavior.\n\n### Expected behavior\n\nAdd a sessionopt `arguments` that is enabled by default but can be disabled on request (`set sessionoptions-=arguments`). The option prevents nvim to write arglist specific setups to the sessionfile, meaning it won't write the above section in the argglobal block thus allowing the CLI arglist to be respected even when a sessionfile is loaded.\n\nI tested that removing the above section will give me the requested behavior.\n\nMitigation: For now I'm using the SessionWritePost autocommand to fix the sessionfile post hoc.",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "> For now I'm using the SessionWritePost autocommand to fix the sessionfile post hoc.\n\nyeah. or do `:%argdel` after the session ",
            "created_at": "2025-10-18T14:13:17Z",
            "html_url": "https://github.com/neovim/neovim/issues/36230#issuecomment-3418461169",
            "id": 3418461169,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36230",
            "node_id": "IC_kwDOAPphoM7LwZPx",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3418461169/reactions"
            },
            "updated_at": "2025-10-18T14:13:17Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3418461169",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "@justinmk This I don't understand. What is it supposed to do?\n\nEDIT: Ah I think you want to delete the arglist completely, but the session saver will still insert an `edit ` command to basically overwrite what you last looked at. Also, in case I don't use -S flag behavior should be as usual.\n\nSo after playing around I came up with this quite verbose and probably brittle way to patch the session:\n\n```\nfunction! s:PatchSession() abort\n    \" 1) Read sessionfile\n\n    let sessionfile = v:this_session\n    if !filereadable(sessionfile)\n        echoerr \"Sessionfile doesn't exist or is not readable, aborting\"\n        return\n    endif\n    let lines = readfile(sessionfile)\n\n    \"2) Patch session to make args passed to nvim -S <session> propagate\n    \" with priority over the args setup by the session\n    let idx1 = -1\n    for i in range(0, len(lines) - 1)\n        if lines[i] =~# '^argglobal'\n            let idx1 = i\n            break\n        endif\n    endfor\n   \n    let idx2 = -1 \n    let pats = ['\\v\\%argdel', '\\v^\\$argadd\\s(.*)$', '\\v^\\d+argu', '^argglobal', '\\v^edit\\s(.*)$'] \n    for i in range(idx1+1, len(lines) -1)\n        if !s:MatchesAny(lines[i], pats)\n            let idx2 = i \"sentinel not included in deleted lines\n            break\n        endif\n    endfor\n    \" If no second marker, take end of file\n    if idx2 < 0\n        let idx2 = len(lines)\n    endif\n\n    \" Start with the global arglist\n    let files = argv(-1)\n\n    \" Absolute path of current buffer (empty if unnamed)\n    let cur = expand('%:p')\n\n    \" Add it if itâ€™s a real file and not already in the list\n    if !empty(cur)\n        \" compare as absolute paths to avoid dupes with relative entries\n        let abs_files = map(copy(files), {_, v -> fnamemodify(v, ':p')})\n        if index(abs_files, cur) < 0\n            call add(files, cur)\n        endif\n    endif\n\n    \" Now build the commands (reverse because we use 0argadd)\n    let argcmds = map(reverse(copy(files)),\n                \\ {_, f -> printf('0argadd %s', fnameescape(f))})\n\n    \" Remove the block [idx1, idx2]\n    call remove(lines, idx1, idx2)\n\n    \" Assemble new block\n    let block = [\n                \\ '\" --- custom argglobal begin ---',\n                \\ 'argglobal',\n                \\ ]\n    call extend(block, argcmds) \n    call add(block, 'last')\n    call add(block, '\" --- custom argglobal end ---')\n\n    \" Insert to main block\n    call extend(lines, block, idx1)\n\n    call writefile(lines, sessionfile)\n    echom 'Patched: ' . sessionfile\nendfunc\n\n\n```\n\nWould be easier if it was not written in the first place...",
            "created_at": "2025-10-20T05:30:10Z",
            "html_url": "https://github.com/neovim/neovim/issues/36230#issuecomment-3420624706",
            "id": 3420624706,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36230",
            "node_id": "IC_kwDOAPphoM7L4pdC",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3420624706/reactions"
            },
            "updated_at": "2025-10-21T06:32:51Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3420624706",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/52746180?v=4",
                "events_url": "https://api.github.com/users/MartyMcFlyInTheSky/events{/privacy}",
                "followers_url": "https://api.github.com/users/MartyMcFlyInTheSky/followers",
                "following_url": "https://api.github.com/users/MartyMcFlyInTheSky/following{/other_user}",
                "gists_url": "https://api.github.com/users/MartyMcFlyInTheSky/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/MartyMcFlyInTheSky",
                "id": 52746180,
                "login": "MartyMcFlyInTheSky",
                "node_id": "MDQ6VXNlcjUyNzQ2MTgw",
                "organizations_url": "https://api.github.com/users/MartyMcFlyInTheSky/orgs",
                "received_events_url": "https://api.github.com/users/MartyMcFlyInTheSky/received_events",
                "repos_url": "https://api.github.com/users/MartyMcFlyInTheSky/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/MartyMcFlyInTheSky/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/MartyMcFlyInTheSky/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/MartyMcFlyInTheSky",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 2,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/36230/comments",
    "created_at": "2025-10-18T05:45:46Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/36230/events",
    "html_url": "https://github.com/neovim/neovim/issues/36230",
    "id": 3528126414,
    "issue_dependencies_summary": {
        "blocked_by": 0,
        "blocking": 0,
        "total_blocked_by": 0,
        "total_blocking": 0
    },
    "labels": [
        {
            "color": "C5DEF5",
            "default": false,
            "description": "save/restore editor state: shada, context, ctx, sessions, mksession, undo, swap",
            "id": 4449264023,
            "name": "editor-state",
            "node_id": "LA_kwDOAPphoM8AAAABCTJhlw",
            "url": "https://api.github.com/repos/neovim/neovim/labels/editor-state"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/36230/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM7SSu_O",
    "number": 36230,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/36230/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/36230/timeline",
    "title": "set sessionoptions-=arguments",
    "type": {
        "color": "blue",
        "created_at": "2024-01-25T10:10:19Z",
        "description": "A request, idea, or new functionality",
        "id": 597167,
        "is_enabled": true,
        "name": "Enhancement",
        "node_id": "IT_kwDOAGK_Pc4ACRyv",
        "updated_at": "2024-07-26T10:12:30Z"
    },
    "updated_at": "2025-10-21T06:32:51Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/36230",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/52746180?v=4",
        "events_url": "https://api.github.com/users/MartyMcFlyInTheSky/events{/privacy}",
        "followers_url": "https://api.github.com/users/MartyMcFlyInTheSky/followers",
        "following_url": "https://api.github.com/users/MartyMcFlyInTheSky/following{/other_user}",
        "gists_url": "https://api.github.com/users/MartyMcFlyInTheSky/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/MartyMcFlyInTheSky",
        "id": 52746180,
        "login": "MartyMcFlyInTheSky",
        "node_id": "MDQ6VXNlcjUyNzQ2MTgw",
        "organizations_url": "https://api.github.com/users/MartyMcFlyInTheSky/orgs",
        "received_events_url": "https://api.github.com/users/MartyMcFlyInTheSky/received_events",
        "repos_url": "https://api.github.com/users/MartyMcFlyInTheSky/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/MartyMcFlyInTheSky/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/MartyMcFlyInTheSky/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/MartyMcFlyInTheSky",
        "user_view_type": "public"
    }
}