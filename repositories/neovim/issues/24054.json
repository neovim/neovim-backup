{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "MEMBER",
    "body": "# Problem\r\n\r\nDiscussion in https://github.com/neovim/neovim/pull/23984#issuecomment-1586364409 and other LSP work indicates we need a full story for configuring LSP clients...\r\n\r\n1. globally (\"default\")\r\n    - per-filetype\r\n3. dynamically (on-demand)\r\n    - for all clients attached to current buffer\r\n    - for specific client?\r\n5. per-buffer (this is low-priority, avoid much complexity to support this)\r\n\r\n\r\nhttps://github.com/neovim/neovim/pull/22598#issuecomment-1463367606\r\n\r\n\r\n\r\n# Expected behavior\r\n\r\n- `vim.lsp.config` : https://github.com/neovim/neovim/pull/18506\r\n    - potential blockers:\r\n        - should we adopt `workspaceFolder` instead of \"root markers\"\r\n        - \"multi-server\" conflicts with per-server configs.\r\n            - how far can we get with the \"obvious\" approach of per-server config?\r\n\r\n## Rejected ideas\r\n\r\n- [Flags](https://github.com/neovim/neovim/pull/23984#issuecomment-1587818178) in `vim.lsp.start()`, e.g. `start({ ..., formatting = false, semantic_tokens = false, inlay_hints = true, ... })`\r\n    - Why: LSP has [tons of configuration](https://github.com/neoclide/coc.nvim/blob/2bd87f66c7048e6c7c3a3d067be5c5e6e0036d33/data/schema.json), so `start()` flags are not sufficient.\r\n- `vim.lsp.start({capabilities={...}})`\r\n    - Why: un-declaring client capabilities is probably too hacky?\r\n    - Related: https://github.com/neovim/neovim/discussions/24058",
    "closed_at": null,
    "comment_data": [
        {
            "author_association": "CONTRIBUTOR",
            "body": "This is probably too big of a rework and/or doesn't work as well as it does in my head, but it's interesting to think about imo so I'll throw it out here:\r\nWhat if instead of using lua wrappers you used the vim option + variable systems ðŸ¤”",
            "created_at": "2023-06-18T00:51:16Z",
            "html_url": "https://github.com/neovim/neovim/issues/24054#issuecomment-1595911999",
            "id": 1595911999,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/24054",
            "node_id": "IC_kwDOAPphoM5fH68_",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1595911999/reactions"
            },
            "updated_at": "2023-06-18T00:54:21Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1595911999",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/74924917?v=4",
                "events_url": "https://api.github.com/users/T-727/events{/privacy}",
                "followers_url": "https://api.github.com/users/T-727/followers",
                "following_url": "https://api.github.com/users/T-727/following{/other_user}",
                "gists_url": "https://api.github.com/users/T-727/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/T-727",
                "id": 74924917,
                "login": "T-727",
                "node_id": "MDQ6VXNlcjc0OTI0OTE3",
                "organizations_url": "https://api.github.com/users/T-727/orgs",
                "received_events_url": "https://api.github.com/users/T-727/received_events",
                "repos_url": "https://api.github.com/users/T-727/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/T-727/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/T-727/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/T-727"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> should we adopt workspaceFolder instead of \"root markers\"\r\n\r\nalso need consider file is library file. in this case usually need attach to  a exist client .  provide a field `islibrary` function type to validate fname is  library or not is needed",
            "created_at": "2023-06-18T01:59:35Z",
            "html_url": "https://github.com/neovim/neovim/issues/24054#issuecomment-1595923735",
            "id": 1595923735,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/24054",
            "node_id": "IC_kwDOAPphoM5fH90X",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1595923735/reactions"
            },
            "updated_at": "2023-06-18T02:00:43Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1595923735",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> flags in vim.lsp.start(), e.g. start({ ..., formatting = false, semantic_tokens = false, inlay_hints = true, ... })\r\n\r\nIt could also be an option to overload those to `boolean|table`. Then you could still disable the functionality with `<option> = false`, or enable it with its defaults with `<option> = true`, but also have more granular control if needed. For example `semantic_tokens = { debounce = 500 }`\r\n\r\nAlthough this would still only address the \"per client\" (static) configuration.\r\n\r\n---\r\n\r\nRegarding vim.lsp.config:\r\n\r\n> should we adopt workspaceFolder instead of \"root markers\"\r\n\r\nI think this is a bit of a red herring. We've `lsp.start` and `lsp.start_client` both which support setting workspaceFolders. To use more than one workspaceFolders you always need some heuristic to make that decision and you need to know that the language server actually supports it in a meaningful way (many don't). So imho this is out of scope for core, and unrelated to having a global configuration skeleton. (What we could do is extend `vim.lsp.start` to automatically extend the workspaceFolders if `reuse_client` returns true, to make it easier to use)\r\n\r\nI think if we do a `vim.lsp.config`, it should act as a template/skeleton for `vim.lsp.start`  - basically take care of the \"global\" part, while the `config` argument of `vim.lsp.start` takes care of the per-client settings.",
            "created_at": "2023-06-20T05:50:10Z",
            "html_url": "https://github.com/neovim/neovim/issues/24054#issuecomment-1598155339",
            "id": 1598155339,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/24054",
            "node_id": "IC_kwDOAPphoM5fQepL",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1598155339/reactions"
            },
            "updated_at": "2023-06-20T05:50:10Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1598155339",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/38700?v=4",
                "events_url": "https://api.github.com/users/mfussenegger/events{/privacy}",
                "followers_url": "https://api.github.com/users/mfussenegger/followers",
                "following_url": "https://api.github.com/users/mfussenegger/following{/other_user}",
                "gists_url": "https://api.github.com/users/mfussenegger/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mfussenegger",
                "id": 38700,
                "login": "mfussenegger",
                "node_id": "MDQ6VXNlcjM4NzAw",
                "organizations_url": "https://api.github.com/users/mfussenegger/orgs",
                "received_events_url": "https://api.github.com/users/mfussenegger/received_events",
                "repos_url": "https://api.github.com/users/mfussenegger/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mfussenegger/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mfussenegger/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mfussenegger"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> So imho [workspaceFolder instead of \"root markers\"] is out of scope for core, and unrelated to having a global configuration skeleton. (What we could do is extend `vim.lsp.start` to automatically extend the workspaceFolders if `reuse_client` returns true, to make it easier to use)\r\n> \r\n> I think if we do a `vim.lsp.config`, it should act as a template/skeleton for `vim.lsp.start` - basically take care of the \"global\" part, while the `config` argument of `vim.lsp.start` takes care of the per-client settings.\r\n\r\nNice. So https://github.com/neovim/neovim/pull/18506 is unblocked @gpanders ",
            "created_at": "2023-06-20T07:06:19Z",
            "html_url": "https://github.com/neovim/neovim/issues/24054#issuecomment-1598227935",
            "id": 1598227935,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/24054",
            "node_id": "IC_kwDOAPphoM5fQwXf",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1598227935/reactions"
            },
            "updated_at": "2023-06-20T07:06:19Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1598227935",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        }
    ],
    "comments": 4,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/24054/comments",
    "created_at": "2023-06-17T23:38:11Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/24054/events",
    "html_url": "https://github.com/neovim/neovim/issues/24054",
    "id": 1762033314,
    "labels": [
        {
            "color": "c2e0c6",
            "default": true,
            "description": "feature request",
            "id": 77997476,
            "name": "enhancement",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3Ng==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/enhancement"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": null,
            "id": 662566370,
            "name": "lsp",
            "node_id": "MDU6TGFiZWw2NjI1NjYzNzA=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/lsp"
        },
        {
            "color": "C5DEF5",
            "default": false,
            "description": "",
            "id": 4457150369,
            "name": "architecture",
            "node_id": "LA_kwDOAPphoM8AAAABCaq3oQ",
            "url": "https://api.github.com/repos/neovim/neovim/labels/architecture"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/24054/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 601,
        "created_at": "2014-05-10T20:43:04Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
            "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
            "followers_url": "https://api.github.com/users/justinmk/followers",
            "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/justinmk",
            "id": 1359421,
            "login": "justinmk",
            "node_id": "MDQ6VXNlcjEzNTk0MjE=",
            "organizations_url": "https://api.github.com/users/justinmk/orgs",
            "received_events_url": "https://api.github.com/users/justinmk/received_events",
            "repos_url": "https://api.github.com/users/justinmk/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/justinmk"
        },
        "description": "Low priority. Not planned for the current target, may be reassigned.",
        "due_on": null,
        "html_url": "https://github.com/neovim/neovim/milestone/6",
        "id": 655037,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/6/labels",
        "node_id": "MDk6TWlsZXN0b25lNjU1MDM3",
        "number": 6,
        "open_issues": 515,
        "state": "open",
        "title": "backlog",
        "updated_at": "2024-04-01T02:46:11Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/6"
    },
    "node_id": "I_kwDOAPphoM5pBn6i",
    "number": 24054,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 1,
        "-1": 0,
        "confused": 0,
        "eyes": 4,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 5,
        "url": "https://api.github.com/repos/neovim/neovim/issues/24054/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/24054/timeline",
    "title": "LSP config (settings) interface",
    "updated_at": "2024-03-30T13:22:41Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/24054",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
        "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
        "followers_url": "https://api.github.com/users/justinmk/followers",
        "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
        "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/justinmk",
        "id": 1359421,
        "login": "justinmk",
        "node_id": "MDQ6VXNlcjEzNTk0MjE=",
        "organizations_url": "https://api.github.com/users/justinmk/orgs",
        "received_events_url": "https://api.github.com/users/justinmk/received_events",
        "repos_url": "https://api.github.com/users/justinmk/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/justinmk"
    }
}