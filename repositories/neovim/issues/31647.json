{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\n\nNOTE: I am coming from the Treesitter github. They denied that the issue was on their end and suggested I submit the bug on the Neovim github.\n\nI am currently going insane trying to figure out why this is happening. Treesitter seems to indiscriminately crash on any file that has had a parser downloaded for it. Note: I am on Windows 11 and install neovim with winget. I am running neovim in PowerShell 7, but I have the same result in CMD prompt\n\nThe last thing I did to test and isolate was the following steps: I uninstalled neovim, deleted the nvim-data folder, removed all plugins except for packer and treesitter. I reinstalled neovim, I loaded my packer config file and ran :PackerSync. All that installed was packer and treesitter.\n\nUnless I'm missing anything that should be a fresh install. I have no other configs loaded except my treesitter config which I will include.\n\nI open Cargo.toml (the file doesn't matter I've tested at least a dozen different files, but the behavior is mostly the same), it opens fine and treesitter auto installs and compiles the tree sitter for *.toml. No crash yet as the parser isn't running.\n\nI close neovim and reopen Cargo.toml. Instant crash, no information is provided.\n\n    :checkhealth Treesitter is good\n\nThere are no logs so far as I can find.\n\nMy attempts to debug with lldb go like so:\n\n    nvim ./ #in the same directory as Cargo.toml --- no crash\n\n    lldb -p $(nvim pid)\n\nI try to open Cargo.toml from inside of Neovim #Instant freeze or crash\n\nI've gotten two results in lldb\n\n    exception code: 0xc0000409\n\nand\n\n    User-mode data execution prevention (DEP) violation at location 0x00000000 #I've only gotten this once\n\nI just tried again using main.rs and was able to run lldb before the parser compiled. AS the parser was compiling it threw this error:\nException 0xc0000005 encountered at address 0x7ffd8ed315d1: Access violation reading location 0x00000200\n\nIdk why this is happening as I've never had issues with Treesitter before.\n\nHere's my tree sitter config:\n\n```\nrequire 'nvim-treesitter.configs'.setup {\n\nsync_install = false,\nauto_install = true,\n\nignore_install = { \"lua\" },\n\nhighlight = {\n\nenable = true,\n\nadditional_vim_regex_highlighting = false,\n\n},\n} \n\n```\n\nAt this point I'm convinced it must be cpu architecture or OS related as I have the exact same setup on my remote linux and don't have this issue.\n\n### Steps to reproduce\n\nWith TOML Files\n1. I open Cargo.toml. it opens fine and treesitter auto installs and compiles the tree sitter for *.toml. No crash yet as the parser isn't running.\n2. I close neovim and reopen Cargo.toml. Instant crash, no information is provided.\n3. Trying to reopen Cargo.toml results in an instant crash with no information\n\nWith RS Files\n1. I open main.rs. It opens fine and Treesitter begins to automatically download the parser. No issues. While attempting to compile Neovim freezes.\n2. Trying to open any Rust file if the parser was pre-installed causes the terminal to freeze.\n\n### Expected behavior\n\nNeovim opens and Treesitter initializes without issue\n\n### Nvim version (nvim -v)\n\n0.10.2\n\n### Vim (not Nvim) behaves the same?\n\nn/a\n\n### Operating system/version\n\nWindows 11 23H2\n\n### Terminal name/version\n\nPowershell 7.5.0\n\n### $TERM environment variable\n\nn/a\n\n### Installation\n\nwinget",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [
        {
            "author_association": "CONTRIBUTOR",
            "body": "Hm....   It needs to be tested on Windows environment.",
            "created_at": "2024-12-20T02:14:54Z",
            "html_url": "https://github.com/neovim/neovim/issues/31647#issuecomment-2556125896",
            "id": 2556125896,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/31647",
            "node_id": "IC_kwDOAPphoM6YW2LI",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2556125896/reactions"
            },
            "updated_at": "2024-12-20T02:14:54Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2556125896",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41495?v=4",
                "events_url": "https://api.github.com/users/Shougo/events{/privacy}",
                "followers_url": "https://api.github.com/users/Shougo/followers",
                "following_url": "https://api.github.com/users/Shougo/following{/other_user}",
                "gists_url": "https://api.github.com/users/Shougo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Shougo",
                "id": 41495,
                "login": "Shougo",
                "node_id": "MDQ6VXNlcjQxNDk1",
                "organizations_url": "https://api.github.com/users/Shougo/orgs",
                "received_events_url": "https://api.github.com/users/Shougo/received_events",
                "repos_url": "https://api.github.com/users/Shougo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Shougo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Shougo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Shougo",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Please test the latest development version. The [Releases](https://github.com/neovim/neovim/releases/tag/nightly) page has pre-built archives for Linux/Windows/macOS. Check `:version` to confirm the version.",
            "created_at": "2024-12-20T07:24:05Z",
            "html_url": "https://github.com/neovim/neovim/issues/31647#issuecomment-2556432168",
            "id": 2556432168,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/31647",
            "node_id": "IC_kwDOAPphoM6YYA8o",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2556432168/reactions"
            },
            "updated_at": "2024-12-20T07:24:05Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2556432168",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Yes, this is very likely an issue in the tree-sitter library or possibly the `tree-sitter-toml` parser (but impossible for sure to know without a full stacktrace); often distributions just link (or build) incompatible or broken versions.\n\nSo we'll need the following:\n1. Test the provided appimages, **never** distribution-provided installations (we have no control over and little trust of those).\n2. You say \"no other plugins\" but you use nvim-treesitter without a minimal (!) reproducible config. Try creating one that we can run with `nvim --clean -u minimal.lua`. **DO NOT USE AUTO_INSTALL!** Instead explicitly `ensure_install` any parser you need. (The toml parser, it sounds like, and possibly rust? But absolutely do test others, ideally the bundled parsers like C or Lua that you can start with `vim.treesitter.start()`. This is needed to figure out whether it's the parser or the library.)\n3. Try to capture a stack trace (I don't know windows, so I can't help there).",
            "created_at": "2024-12-20T09:35:43Z",
            "html_url": "https://github.com/neovim/neovim/issues/31647#issuecomment-2556621075",
            "id": 2556621075,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/31647",
            "node_id": "IC_kwDOAPphoM6YYvET",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2556621075/reactions"
            },
            "updated_at": "2024-12-20T09:36:29Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2556621075",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 3,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/31647/comments",
    "created_at": "2024-12-20T01:42:30Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/31647/events",
    "html_url": "https://github.com/neovim/neovim/issues/31647",
    "id": 2751747341,
    "labels": [
        {
            "color": "d4c5f9",
            "default": false,
            "description": null,
            "id": 109461219,
            "name": "platform:windows",
            "node_id": "MDU6TGFiZWwxMDk0NjEyMTk=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/platform:windows"
        },
        {
            "color": "FBCA04",
            "default": false,
            "description": "We need minimal steps to reproduce the issue",
            "id": 298863445,
            "name": "needs:repro",
            "node_id": "MDU6TGFiZWwyOTg4NjM0NDU=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/needs:repro"
        },
        {
            "color": "F9D0C4",
            "default": false,
            "description": "issue reporting a crash or segfault",
            "id": 435854234,
            "name": "bug-crash",
            "node_id": "MDU6TGFiZWw0MzU4NTQyMzQ=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug-crash"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "",
            "id": 1799626557,
            "name": "treesitter",
            "node_id": "MDU6TGFiZWwxNzk5NjI2NTU3",
            "url": "https://api.github.com/repos/neovim/neovim/labels/treesitter"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/31647/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM6kBFUN",
    "number": 31647,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/31647/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/31647/timeline",
    "title": "Treesitter crashes on fresh install of Neovim with no other plugins?",
    "updated_at": "2025-01-17T15:00:01Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/31647",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/114630505?v=4",
        "events_url": "https://api.github.com/users/GregoryShoemake/events{/privacy}",
        "followers_url": "https://api.github.com/users/GregoryShoemake/followers",
        "following_url": "https://api.github.com/users/GregoryShoemake/following{/other_user}",
        "gists_url": "https://api.github.com/users/GregoryShoemake/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/GregoryShoemake",
        "id": 114630505,
        "login": "GregoryShoemake",
        "node_id": "U_kgDOBtUfaQ",
        "organizations_url": "https://api.github.com/users/GregoryShoemake/orgs",
        "received_events_url": "https://api.github.com/users/GregoryShoemake/received_events",
        "repos_url": "https://api.github.com/users/GregoryShoemake/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/GregoryShoemake/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/GregoryShoemake/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/GregoryShoemake",
        "user_view_type": "public"
    }
}