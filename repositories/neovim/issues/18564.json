{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Neovim version (nvim -v)\n\nNVIM v0.8.0-dev+198-g030417d80\n\n### Vim (not Nvim) behaves the same?\n\nYes, vim 8.2.4586\n\n### Operating system/version\n\nGentoo Linux\n\n### Terminal name/version\n\nxfce4-terminal 1.0.3\n\n### $TERM environment variable\n\nvte-256color\n\n### Installation\n\nAppimage\n\n### How to reproduce the issue\n\n1) Open nvim using `nvim -u NONE`\r\n2) Add some lines of text.  For example:\r\n```\r\na\r\nb\r\nc\r\n```\r\n3) Turn signcolumn on with `set signcolumn=yes`\r\n4) Turn signcolumn off with `set signcolumn=no`\r\n5) Shift + Left Mouse select all three lines, and paste into any other program\r\n6) Lines will have 2 extra spaces at end (same as signcolumn width)\r\n\r\nI've noticed this since I have started using a signcolumn by default and turning it off sometimes to copy text with mouse.  If I have the signcolumn disabled in my config, copying and pasting this way works normally.\r\n\r\nThere is another earlier issue that may be related: https://github.com/neovim/neovim/issues/3233\r\n\r\nIf I run `hi Normal ctermbg=NONE` after turning the signcolumn off, I don't get the extra spaces.  But if I turn it back on then off, I will get the extra spaces again.  Running `hi Normal ctermbg=NONE` again will prevent the spaces from being copied.\r\n\n\n### Expected behavior\n\nCopied text should have no extra spaces.\n\n### Actual behavior\n\nCopied text has extra spaces.",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [
        {
            "author_association": "NONE",
            "body": "One small update.  This also happens if toggling the number column.  Also, setting the Normal background highlight to NONE is not necessary to fix those cells from copying.  If I run the hi command and set the Normal with my theme config, it will still fix those cells.  Seems like the cells at the end of the line aren't getting reset when the sign / number column is removed, but updating the highlight causes the cells to get updated.",
            "created_at": "2022-05-14T17:40:28Z",
            "html_url": "https://github.com/neovim/neovim/issues/18564#issuecomment-1126782760",
            "id": 1126782760,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/18564",
            "node_id": "IC_kwDOAPphoM5DKVco",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1126782760/reactions"
            },
            "updated_at": "2022-05-14T17:40:28Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1126782760",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/29902477?v=4",
                "events_url": "https://api.github.com/users/JordanP-Dev/events{/privacy}",
                "followers_url": "https://api.github.com/users/JordanP-Dev/followers",
                "following_url": "https://api.github.com/users/JordanP-Dev/following{/other_user}",
                "gists_url": "https://api.github.com/users/JordanP-Dev/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/JordanP-Dev",
                "id": 29902477,
                "login": "JordanP-Dev",
                "node_id": "MDQ6VXNlcjI5OTAyNDc3",
                "organizations_url": "https://api.github.com/users/JordanP-Dev/orgs",
                "received_events_url": "https://api.github.com/users/JordanP-Dev/received_events",
                "repos_url": "https://api.github.com/users/JordanP-Dev/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/JordanP-Dev/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/JordanP-Dev/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/JordanP-Dev",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Hello, I was trying to fix this bug but when I looked into `nvim_set_hl` and some other places to see which actually causes the cells at the end of the line to be reset, but I couldn't find anything.\r\n\r\nDoes anyone know what makes running hi Normal ctermbg=NONE cause the cells to be updated?",
            "created_at": "2022-05-20T08:25:29Z",
            "html_url": "https://github.com/neovim/neovim/issues/18564#issuecomment-1132625134",
            "id": 1132625134,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/18564",
            "node_id": "IC_kwDOAPphoM5Dgnzu",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1132625134/reactions"
            },
            "updated_at": "2022-05-20T08:25:29Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1132625134",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/53964412?v=4",
                "events_url": "https://api.github.com/users/VelocityDv/events{/privacy}",
                "followers_url": "https://api.github.com/users/VelocityDv/followers",
                "following_url": "https://api.github.com/users/VelocityDv/following{/other_user}",
                "gists_url": "https://api.github.com/users/VelocityDv/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/VelocityDv",
                "id": 53964412,
                "login": "VelocityDv",
                "node_id": "MDQ6VXNlcjUzOTY0NDEy",
                "organizations_url": "https://api.github.com/users/VelocityDv/orgs",
                "received_events_url": "https://api.github.com/users/VelocityDv/received_events",
                "repos_url": "https://api.github.com/users/VelocityDv/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/VelocityDv/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/VelocityDv/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/VelocityDv",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "another repro with 'set number' from https://github.com/neovim/neovim/issues/18844\r\n\r\n> ### How to reproduce the issue\r\n> 1. open neovim using `nvim -u none`\r\n> 2. type some text on multiple lines\r\n> 3. turn on set number using `set number`\r\n> 4. turn off set number using 'set nonumber'\r\n> 5. select and copy using middle mouse button\r\n> 6. lines will magically have 4 extra spaces at the end.\r\n\r\n",
            "created_at": "2022-06-03T15:07:20Z",
            "html_url": "https://github.com/neovim/neovim/issues/18564#issuecomment-1146057188",
            "id": 1146057188,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/18564",
            "node_id": "IC_kwDOAPphoM5ET3Hk",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1146057188/reactions"
            },
            "updated_at": "2022-06-03T15:07:20Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1146057188",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "This seems to fix the problem:\r\n```diff\r\ndiff --git a/src/nvim/tui/tui.c b/src/nvim/tui/tui.c\r\nindex 6c1c1ade0..0ec96c050 100644\r\n--- a/src/nvim/tui/tui.c\r\n+++ b/src/nvim/tui/tui.c\r\n@@ -902,7 +902,7 @@ static void clear_region(UI *ui, int top, int bot, int left, int right, int attr\r\n       cursor_goto(ui, row, left);\r\n       if (data->can_clear_attr && right == ui->width) {\r\n         unibi_out(ui, unibi_clr_eol);\r\n-      } else if (data->can_erase_chars && data->can_clear_attr && width >= 5) {\r\n+      } else if (data->can_erase_chars && data->can_clear_attr) {\r\n         UNIBI_SET_NUM_VAR(data->params[0], width);\r\n         unibi_out(ui, unibi_erase_chars);\r\n       } else {\r\n```\r\n\r\nI guess this `width >= 5` is added for performance? (added in #9193)",
            "created_at": "2022-06-04T19:40:53Z",
            "html_url": "https://github.com/neovim/neovim/issues/18564#issuecomment-1146675093",
            "id": 1146675093,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/18564",
            "node_id": "IC_kwDOAPphoM5EWN-V",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1146675093/reactions"
            },
            "updated_at": "2022-06-04T19:42:39Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1146675093",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 4,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/18564/comments",
    "created_at": "2022-05-13T22:32:25Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/18564/events",
    "html_url": "https://github.com/neovim/neovim/issues/18564",
    "id": 1235766374,
    "labels": [
        {
            "color": "f9d0c4",
            "default": true,
            "description": "issues reporting wrong behavior",
            "id": 77997474,
            "name": "bug",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3NA==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "",
            "id": 197254545,
            "name": "tui",
            "node_id": "MDU6TGFiZWwxOTcyNTQ1NDU=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/tui"
        },
        {
            "color": "BFDADC",
            "default": false,
            "description": "Low-risk, self-contained. Do NOT ask \"can I work on this\", just read CONTRIBUTING.md",
            "id": 407246773,
            "name": "complexity:low",
            "node_id": "MDU6TGFiZWw0MDcyNDY3NzM=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/complexity:low"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/18564/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 686,
        "created_at": "2014-05-10T20:43:04Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
            "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
            "followers_url": "https://api.github.com/users/justinmk/followers",
            "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/justinmk",
            "id": 1359421,
            "login": "justinmk",
            "node_id": "MDQ6VXNlcjEzNTk0MjE=",
            "organizations_url": "https://api.github.com/users/justinmk/orgs",
            "received_events_url": "https://api.github.com/users/justinmk/received_events",
            "repos_url": "https://api.github.com/users/justinmk/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/justinmk",
            "user_view_type": "public"
        },
        "description": "Low priority items. We plan to work on this but don't have a target date.",
        "due_on": null,
        "html_url": "https://github.com/neovim/neovim/milestone/6",
        "id": 655037,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/6/labels",
        "node_id": "MDk6TWlsZXN0b25lNjU1MDM3",
        "number": 6,
        "open_issues": 635,
        "state": "open",
        "title": "backlog",
        "updated_at": "2025-01-21T00:09:37Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/6"
    },
    "node_id": "I_kwDOAPphoM5JqExm",
    "number": 18564,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/18564/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/18564/timeline",
    "title": "Copying using \"Shift+Left mouse\" adds extra characters at end of line if signcolumn was on and has been toggled off.",
    "updated_at": "2025-01-19T11:32:35Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/18564",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/29902477?v=4",
        "events_url": "https://api.github.com/users/JordanP-Dev/events{/privacy}",
        "followers_url": "https://api.github.com/users/JordanP-Dev/followers",
        "following_url": "https://api.github.com/users/JordanP-Dev/following{/other_user}",
        "gists_url": "https://api.github.com/users/JordanP-Dev/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/JordanP-Dev",
        "id": 29902477,
        "login": "JordanP-Dev",
        "node_id": "MDQ6VXNlcjI5OTAyNDc3",
        "organizations_url": "https://api.github.com/users/JordanP-Dev/orgs",
        "received_events_url": "https://api.github.com/users/JordanP-Dev/received_events",
        "repos_url": "https://api.github.com/users/JordanP-Dev/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/JordanP-Dev/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/JordanP-Dev/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/JordanP-Dev",
        "user_view_type": "public"
    }
}