{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "body": "### Problem\n\nBase64 is a binary-to-text encoding algorithm, and [lua strings are 8-bit clean and can store raw bytes](https://www.lua.org/pil/2.4.html). Does that mean users can just throw an arbitrary byte sequence (such as an image) to `vim.base64.encode` and expect it to work properly?\n\nI tried `vim.base64.encode` images (loaded by `vim.uv.fs_read`), and `vim.base64.encode` produced the same results as the `base64` CLI command, which gave me the intuition that it \"just works\" with raw bytes. But when I look at [the relevant neovim source code](https://github.com/neovim/neovim/blob/9bdb011a50f25d80980750ca194efd0d18cae56c/src/nvim/base64.c#L68), it seems to suggest that the `base64_encode` function expects `char`s (instead of `unsigned char`s).\n\n### Expected behavior\n\n1. The `vim.base64` documentation should explicitly state whether raw bytes are supported. This would clarify things for image-related plugins.\n    - If raw bytes are supported, the `vim.base64` module doesn't only support text strings but also images, etc., which IMO is quite important and should be clarified.\n    - If raw bytes are not supported (or not expected to work), it should also be documented because it technically doesn't work with an arbitrary lua string.\n2. (I'm no expert on C, so I'm not very sure about this one) If the algorithm works for raw bytes as well as texts, maybe it should be using `unsigned char` instead of `char`?",
    "closed_at": "2025-11-17T02:25:17Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
        "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
        "followers_url": "https://api.github.com/users/justinmk/followers",
        "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
        "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/justinmk",
        "id": 1359421,
        "login": "justinmk",
        "node_id": "MDQ6VXNlcjEzNTk0MjE=",
        "organizations_url": "https://api.github.com/users/justinmk/orgs",
        "received_events_url": "https://api.github.com/users/justinmk/received_events",
        "repos_url": "https://api.github.com/users/justinmk/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/justinmk",
        "user_view_type": "public"
    },
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "Look 11 lines below:\n```c\n  const uint8_t *s = (const uint8_t *)src;\n```",
            "created_at": "2025-11-10T12:28:44Z",
            "html_url": "https://github.com/neovim/neovim/issues/36506#issuecomment-3511334244",
            "id": 3511334244,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36506",
            "node_id": "IC_kwDOAPphoM7RSrVk",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3511334244/reactions"
            },
            "updated_at": "2025-11-10T12:28:44Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3511334244",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Ah, thanks for pointing that out. That means the current `vim.base64` already works with raw bytes (that is, as long as `lua_tolstring` and `lua_pushlstring` doesn't tamper the bits when converting between signed chars in C and raw bytes in lua)?\n\nWould you accept a PR that clarifies the use of `vim.base64` to include raw bytes?",
            "created_at": "2025-11-10T13:06:24Z",
            "html_url": "https://github.com/neovim/neovim/issues/36506#issuecomment-3511535861",
            "id": 3511535861,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36506",
            "node_id": "IC_kwDOAPphoM7RTcj1",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3511535861/reactions"
            },
            "updated_at": "2025-11-10T13:06:24Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3511535861",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/30951234?v=4",
                "events_url": "https://api.github.com/users/Davidyz/events{/privacy}",
                "followers_url": "https://api.github.com/users/Davidyz/followers",
                "following_url": "https://api.github.com/users/Davidyz/following{/other_user}",
                "gists_url": "https://api.github.com/users/Davidyz/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Davidyz",
                "id": 30951234,
                "login": "Davidyz",
                "node_id": "MDQ6VXNlcjMwOTUxMjM0",
                "organizations_url": "https://api.github.com/users/Davidyz/orgs",
                "received_events_url": "https://api.github.com/users/Davidyz/received_events",
                "repos_url": "https://api.github.com/users/Davidyz/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Davidyz/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Davidyz/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Davidyz",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> Would you accept a PR that clarifies the use of `vim.base64` to include raw bytes?\n\nSure. But it should be assumed, it's a basic feature of Lua and we intend to support it everywhere.\n\nClosing this meanwhile, PR welcome though.",
            "created_at": "2025-11-17T02:25:17Z",
            "html_url": "https://github.com/neovim/neovim/issues/36506#issuecomment-3539701867",
            "id": 3539701867,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36506",
            "node_id": "IC_kwDOAPphoM7S-5Br",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3539701867/reactions"
            },
            "updated_at": "2025-11-17T02:25:17Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3539701867",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 3,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/36506/comments",
    "created_at": "2025-11-10T12:12:08Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/36506/events",
    "html_url": "https://github.com/neovim/neovim/issues/36506",
    "id": 3607751601,
    "issue_dependencies_summary": {
        "blocked_by": 0,
        "blocking": 0,
        "total_blocked_by": 0,
        "total_blocking": 0
    },
    "labels": [
        {
            "color": "c5def5",
            "default": true,
            "description": "",
            "id": 84744038,
            "name": "documentation",
            "node_id": "MDU6TGFiZWw4NDc0NDAzOA==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/documentation"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/36506/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM7XCeux",
    "number": 36506,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/36506/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "completed",
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/36506/timeline",
    "title": "Clarification on `vim.base64` usage",
    "type": {
        "color": "blue",
        "created_at": "2024-01-25T10:10:19Z",
        "description": "A request, idea, or new functionality",
        "id": 597167,
        "is_enabled": true,
        "name": "Enhancement",
        "node_id": "IT_kwDOAGK_Pc4ACRyv",
        "updated_at": "2024-07-26T10:12:30Z"
    },
    "updated_at": "2025-11-17T02:25:34Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/36506",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/30951234?v=4",
        "events_url": "https://api.github.com/users/Davidyz/events{/privacy}",
        "followers_url": "https://api.github.com/users/Davidyz/followers",
        "following_url": "https://api.github.com/users/Davidyz/following{/other_user}",
        "gists_url": "https://api.github.com/users/Davidyz/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/Davidyz",
        "id": 30951234,
        "login": "Davidyz",
        "node_id": "MDQ6VXNlcjMwOTUxMjM0",
        "organizations_url": "https://api.github.com/users/Davidyz/orgs",
        "received_events_url": "https://api.github.com/users/Davidyz/received_events",
        "repos_url": "https://api.github.com/users/Davidyz/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/Davidyz/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Davidyz/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/Davidyz",
        "user_view_type": "public"
    }
}