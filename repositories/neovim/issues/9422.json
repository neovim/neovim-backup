{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "<!-- Before reporting: search existing issues and check the FAQ. -->\r\n\r\nNote: I also filed this as a vim issue [here](https://github.com/vim/vim/issues/3746).\r\n\r\n- `nvim --version`: 0.3.1\r\n- Vim (version: 8.1.146) behaves differently? no\r\n- Operating system/version: NixOS 18.09\r\n- Terminal name/version: st-0.8.1\r\n- `$TERM`: st-256color\r\n\r\n### Steps to reproduce using `nvim -u NORC`\r\n\r\n```\r\nnvim -u NORC\r\n:set fo=ta<cr>i% test<cr>% test\r\n```\r\n\r\n### Actual behaviour\r\n\r\nOn typing the second '%', autoformatting kicks in, and the two lines are combined into one. The final result is a single line:\r\n\r\n```\r\n% test % test\r\n```\r\n\r\n### Expected behaviour\r\n\r\nSince `:set comments` gives a string including \":%\", I expect that when I type the second '%', neovim recognizes the second line as a comment and does not combine the two lines into one, since `formatoptions` does not include the `c` flag. My expected final result is:\r\n\r\n```\r\n% test\r\n% test\r\n```\r\n\r\n### Explanation\r\n\r\nThe documentation for `fo-table` says:\r\n\r\n> With 't' and 'c' you can specify when Vim performs auto-wrapping:\r\n> value\taction\r\n> \"\"\tno automatic formatting (you can use \"gq\" for manual formatting)\r\n> \"t\"\tautomatic formatting of text, but not comments\r\n> \"c\"\tautomatic formatting for comments, but not text (good for C code)\r\n> \"tc\"\tautomatic formatting for text and comments\r\n\r\nWhen we use `set fo=ca`, we get the nice behavior where no automatic formatting is done outside of comments, but comments reflow automatically. The documentation above leads me to expect the symmetric behavior for `set fo=ta`, where no automatic formatting is done within comments, but the rest of the text reflows automatically. The example above shows that the behavior is not symmetric the way the documentation suggests, unless I'm misunderstanding the documentation.\r\n\r\nOne reason I want to use `set fo=ta` is for editing Markdown files--if it worked the way I expected, I could set the `comments` option so that code blocks are considered as comments. Then I could get automatic formatting in most of the file, yet avoid automatic formatting within code blocks.",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [],
    "comments": 0,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/9422/comments",
    "created_at": "2018-12-31T18:12:39Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/9422/events",
    "html_url": "https://github.com/neovim/neovim/issues/9422",
    "id": 395015209,
    "labels": [
        {
            "color": "F9D0C4",
            "default": false,
            "description": "wrong behavior inherited from vim",
            "id": 154310492,
            "name": "bug-vim",
            "node_id": "MDU6TGFiZWwxNTQzMTA0OTI=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug-vim"
        },
        {
            "color": "FBCA04",
            "default": false,
            "description": "upstream issue that must be fixed in Vim first",
            "id": 2639399975,
            "name": "needs:vim-patch",
            "node_id": "MDU6TGFiZWwyNjM5Mzk5OTc1",
            "url": "https://api.github.com/repos/neovim/neovim/labels/needs:vim-patch"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/9422/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWUzOTUwMTUyMDk=",
    "number": 9422,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 1,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 1,
        "url": "https://api.github.com/repos/neovim/neovim/issues/9422/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/9422/timeline",
    "title": "Comments autoformatted even without formatoptions 'c' flag",
    "updated_at": "2025-01-19T11:50:14Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/9422",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/16518949?v=4",
        "events_url": "https://api.github.com/users/msuperdock/events{/privacy}",
        "followers_url": "https://api.github.com/users/msuperdock/followers",
        "following_url": "https://api.github.com/users/msuperdock/following{/other_user}",
        "gists_url": "https://api.github.com/users/msuperdock/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/msuperdock",
        "id": 16518949,
        "login": "msuperdock",
        "node_id": "MDQ6VXNlcjE2NTE4OTQ5",
        "organizations_url": "https://api.github.com/users/msuperdock/orgs",
        "received_events_url": "https://api.github.com/users/msuperdock/received_events",
        "repos_url": "https://api.github.com/users/msuperdock/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/msuperdock/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/msuperdock/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/msuperdock",
        "user_view_type": "public"
    }
}