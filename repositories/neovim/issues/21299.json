{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Neovim version (nvim -v)\n\nv0.9.0-dev-447+g6c285a6e49 (Also experienced crashes with v0.8, but may be different cause)\n\n### Vim (not Nvim) behaves the same?\n\nno, this function is nvim-only I think\n\n### Operating system/version\n\nArchLinux\n\n### Terminal name/version\n\nkonsole\n\n### $TERM environment variable\n\nxterm-256color\n\n### Installation\n\nArch neovim-git (also experience crashes with official neovim v0.8 package)\n\n### How to reproduce the issue\n\nNot exactly sure how to repro. I've been experiencing neovim crashes lately. I don't know exactly what triggers it, but some file types (typescript and markdown) seem to trigger it more often than others. Sometimes it crashes soon after opening many times in a row, sometimes I can go many days between crashes. It seems to happen most often when saving, but sometimes it happens just when moving the cursor around.\r\n\r\nI typically use neovim-gtk, but recently tried running plain neovim in a terminal to see if that helped. It still crashes, but now I get a helpful message out (although it leaves my terminal in a trashed state). \r\n\r\n```\r\nnvim: /home/mstearn/.cache/yay/neovim-git/src/neovim-git/src/nvim/rbuffer.c:168: rbuffer_consumed_compact: Assertion `(size_t)(buf->read_ptr - buf->write_ptr) == buf->size' failed.\r\nzsh: IOT instruction  nvim\r\n```\r\n\r\nThe failing assert is on [this line](https://github.com/neovim/neovim/blob/4b02291f81b76eda029d4eae1c1d59c1a946a032/src/nvim/rbuffer.c#L168). That function is only called from [one place](https://github.com/neovim/neovim/blob/4b02291f81b76eda029d4eae1c1d59c1a946a032/src/nvim/msgpack_rpc/channel.c#L238), and both were introduced in [this commit](https://github.com/neovim/neovim/commit/d5f047bee04a42f40425c34061c84b39af846e1f). While I don't have a repro, I am hoping that something near one of those lines will jump out at someone who knows this code (possibly @bfredl who committed it) as obviously incorrect.\n\n### Expected behavior\n\nI'd really like my editor not to crash :)\n\n### Actual behavior\n\nneovim crashes",
    "closed_at": "2023-02-02T13:45:23Z",
    "comment_data": [
        {
            "author_association": "NONE",
            "body": "Had a similar issue. Arch linux user as well downloading neovim nightly. My build script is as follows:\r\n```\r\n#!/bin/bash\r\ncd ~\r\nsudo rm -r neovim\r\ngit clone https://github.com/neovim/neovim\r\ncd neovim\r\nsudo make CMAKE_BUILD_TYPE=RelWithDebInfo\r\nsudo make install\r\ncd ../\r\nsudo rm -r neovim\r\n```\r\nError is:\r\n`rbuffer.c:144: rbuffer_consumed: Assertion count && count <= buf->size' failed..`\r\n\r\nHowever it works when downloading the tarball here https://github.com/neovim/neovim/releases/tag/nightly",
            "created_at": "2022-12-31T17:11:32Z",
            "html_url": "https://github.com/neovim/neovim/issues/21299#issuecomment-1368254022",
            "id": 1368254022,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21299",
            "node_id": "IC_kwDOAPphoM5RjeZG",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1368254022/reactions"
            },
            "updated_at": "2022-12-31T18:44:58Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1368254022",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/28086161?v=4",
                "events_url": "https://api.github.com/users/al-dot-exe/events{/privacy}",
                "followers_url": "https://api.github.com/users/al-dot-exe/followers",
                "following_url": "https://api.github.com/users/al-dot-exe/following{/other_user}",
                "gists_url": "https://api.github.com/users/al-dot-exe/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/al-dot-exe",
                "id": 28086161,
                "login": "al-dot-exe",
                "node_id": "MDQ6VXNlcjI4MDg2MTYx",
                "organizations_url": "https://api.github.com/users/al-dot-exe/orgs",
                "received_events_url": "https://api.github.com/users/al-dot-exe/received_events",
                "repos_url": "https://api.github.com/users/al-dot-exe/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/al-dot-exe/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/al-dot-exe/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/al-dot-exe"
            }
        },
        {
            "author_association": "NONE",
            "body": "I have the same issue on macOs, after building it myself and with downloading the tarball.\r\nThe error is:\r\n`Assertion failed: ((size_t)(buf->read_ptr - buf->write_ptr) == buf->size), function rbuffer_consumed_compact, file rbuffer.c, line 168.`",
            "created_at": "2023-01-02T12:51:22Z",
            "html_url": "https://github.com/neovim/neovim/issues/21299#issuecomment-1368920205",
            "id": 1368920205,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21299",
            "node_id": "IC_kwDOAPphoM5RmBCN",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 4,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 4,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1368920205/reactions"
            },
            "updated_at": "2023-01-02T12:51:22Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1368920205",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/36813761?v=4",
                "events_url": "https://api.github.com/users/emilienlemaire/events{/privacy}",
                "followers_url": "https://api.github.com/users/emilienlemaire/followers",
                "following_url": "https://api.github.com/users/emilienlemaire/following{/other_user}",
                "gists_url": "https://api.github.com/users/emilienlemaire/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/emilienlemaire",
                "id": 36813761,
                "login": "emilienlemaire",
                "node_id": "MDQ6VXNlcjM2ODEzNzYx",
                "organizations_url": "https://api.github.com/users/emilienlemaire/orgs",
                "received_events_url": "https://api.github.com/users/emilienlemaire/received_events",
                "repos_url": "https://api.github.com/users/emilienlemaire/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/emilienlemaire/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/emilienlemaire/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/emilienlemaire"
            }
        },
        {
            "author_association": "NONE",
            "body": "It seems to be triggered by a changed made between 4703e56 and c590641 but I cannot say more, I might try later to find the specific commit where this begins",
            "created_at": "2023-01-02T13:01:26Z",
            "html_url": "https://github.com/neovim/neovim/issues/21299#issuecomment-1368926217",
            "id": 1368926217,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21299",
            "node_id": "IC_kwDOAPphoM5RmCgJ",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1368926217/reactions"
            },
            "updated_at": "2023-01-02T13:01:26Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1368926217",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/36813761?v=4",
                "events_url": "https://api.github.com/users/emilienlemaire/events{/privacy}",
                "followers_url": "https://api.github.com/users/emilienlemaire/followers",
                "following_url": "https://api.github.com/users/emilienlemaire/following{/other_user}",
                "gists_url": "https://api.github.com/users/emilienlemaire/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/emilienlemaire",
                "id": 36813761,
                "login": "emilienlemaire",
                "node_id": "MDQ6VXNlcjM2ODEzNzYx",
                "organizations_url": "https://api.github.com/users/emilienlemaire/orgs",
                "received_events_url": "https://api.github.com/users/emilienlemaire/received_events",
                "repos_url": "https://api.github.com/users/emilienlemaire/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/emilienlemaire/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/emilienlemaire/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/emilienlemaire"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "There are two different assertions mentioned here.\r\n- ``rbuffer.c:144: rbuffer_consumed: Assertion count && count <= buf->size' failed`` can be simply triggered by `echo | nvim --clean --embed`, but `rbuffer_consumed` is used in many places.\r\n- ``rbuffer.c:168: rbuffer_consumed_compact: Assertion `(size_t)(buf->read_ptr - buf->write_ptr) == buf->size' failed`` is the one first mentioned in the issue, and `rbuffer_consumed_compact` is only used in one place.",
            "created_at": "2023-01-02T13:01:38Z",
            "html_url": "https://github.com/neovim/neovim/issues/21299#issuecomment-1368926374",
            "id": 1368926374,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21299",
            "node_id": "IC_kwDOAPphoM5RmCim",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1368926374/reactions"
            },
            "updated_at": "2023-01-02T13:02:09Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1368926374",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq"
            }
        },
        {
            "author_association": "NONE",
            "body": "I've had both but I do not know what triggers one or the other, the `rbuffer.c:144` was triggered more often tho",
            "created_at": "2023-01-02T13:02:45Z",
            "html_url": "https://github.com/neovim/neovim/issues/21299#issuecomment-1368927406",
            "id": 1368927406,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21299",
            "node_id": "IC_kwDOAPphoM5RmCyu",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1368927406/reactions"
            },
            "updated_at": "2023-01-02T13:03:27Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1368927406",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/36813761?v=4",
                "events_url": "https://api.github.com/users/emilienlemaire/events{/privacy}",
                "followers_url": "https://api.github.com/users/emilienlemaire/followers",
                "following_url": "https://api.github.com/users/emilienlemaire/following{/other_user}",
                "gists_url": "https://api.github.com/users/emilienlemaire/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/emilienlemaire",
                "id": 36813761,
                "login": "emilienlemaire",
                "node_id": "MDQ6VXNlcjM2ODEzNzYx",
                "organizations_url": "https://api.github.com/users/emilienlemaire/orgs",
                "received_events_url": "https://api.github.com/users/emilienlemaire/received_events",
                "repos_url": "https://api.github.com/users/emilienlemaire/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/emilienlemaire/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/emilienlemaire/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/emilienlemaire"
            }
        },
        {
            "author_association": "NONE",
            "body": "I get the ` rbuffer.c:144: rbuffer_consumed: Assertion count && count <= buf->size' failed..` one when deleting multiple lines at a time with something like `4dd` but not when I do one line at a time. Log shows:\r\n```\r\nERR 2023-01-03T17:18:45.445 ?.139615   chan_close_with_error:573: RPC: failed to decode msgpack\r\n```\r\nlsp log shows:\r\n```\r\n[ERROR][2023-01-03 17:23:00] .../vim/lsp/rpc.lua:734\t\"rpc\"\t\"terraform-ls\"\t\"stderr\"\t'2023/01/03 17:23:00 rpc_logger.go:45: Error for \"textDocument/semanticTokens/full\" (ID 2): [-32800] error code -32800: %!s(<nil>)\\n2023/01/03 17:23:00 opts.go:205: Completed 1 requests [3.908631032s elapsed]\\n'\r\n```\r\n\r\nFYI I was editing a terraform file and have the terraform treesitter module loaded and highlight enabled and terraformls lsp server.\r\n\r\nI also do not get this behavior with 0.8.2, only with nightly.",
            "created_at": "2023-01-03T23:21:26Z",
            "html_url": "https://github.com/neovim/neovim/issues/21299#issuecomment-1370323970",
            "id": 1370323970,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21299",
            "node_id": "IC_kwDOAPphoM5RrXwC",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1370323970/reactions"
            },
            "updated_at": "2023-01-04T01:23:12Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1370323970",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/127401?v=4",
                "events_url": "https://api.github.com/users/grimm26/events{/privacy}",
                "followers_url": "https://api.github.com/users/grimm26/followers",
                "following_url": "https://api.github.com/users/grimm26/following{/other_user}",
                "gists_url": "https://api.github.com/users/grimm26/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/grimm26",
                "id": 127401,
                "login": "grimm26",
                "node_id": "MDQ6VXNlcjEyNzQwMQ==",
                "organizations_url": "https://api.github.com/users/grimm26/orgs",
                "received_events_url": "https://api.github.com/users/grimm26/received_events",
                "repos_url": "https://api.github.com/users/grimm26/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/grimm26/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/grimm26/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/grimm26"
            }
        },
        {
            "author_association": "NONE",
            "body": "It's highly reproducible for me with the `telescope.nvim` plugin on Mac. If I do a live grep and type 3-4 letters quickly or do backspaces in the prompt then it crashes rapidly. If I type each letter with a pause, then it's ok. ~~No crashes with the nightly tarball~~. I just installed the nightly tarball again and it crashes the same way now.",
            "created_at": "2023-01-05T23:29:17Z",
            "html_url": "https://github.com/neovim/neovim/issues/21299#issuecomment-1372925488",
            "id": 1372925488,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21299",
            "node_id": "IC_kwDOAPphoM5R1S4w",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 3,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 3,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1372925488/reactions"
            },
            "updated_at": "2023-01-05T23:42:26Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1372925488",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1270407?v=4",
                "events_url": "https://api.github.com/users/adamtajti/events{/privacy}",
                "followers_url": "https://api.github.com/users/adamtajti/followers",
                "following_url": "https://api.github.com/users/adamtajti/following{/other_user}",
                "gists_url": "https://api.github.com/users/adamtajti/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/adamtajti",
                "id": 1270407,
                "login": "adamtajti",
                "node_id": "MDQ6VXNlcjEyNzA0MDc=",
                "organizations_url": "https://api.github.com/users/adamtajti/orgs",
                "received_events_url": "https://api.github.com/users/adamtajti/received_events",
                "repos_url": "https://api.github.com/users/adamtajti/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/adamtajti/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/adamtajti/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/adamtajti"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Unless anyone can provide more useful information, can anyone else that experiences this just provide a üëç reaction to the OP so we can gauge who this affects.",
            "created_at": "2023-01-06T11:07:49Z",
            "html_url": "https://github.com/neovim/neovim/issues/21299#issuecomment-1373478657",
            "id": 1373478657,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21299",
            "node_id": "IC_kwDOAPphoM5R3Z8B",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1373478657/reactions"
            },
            "updated_at": "2023-01-06T11:07:49Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1373478657",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/7904185?v=4",
                "events_url": "https://api.github.com/users/lewis6991/events{/privacy}",
                "followers_url": "https://api.github.com/users/lewis6991/followers",
                "following_url": "https://api.github.com/users/lewis6991/following{/other_user}",
                "gists_url": "https://api.github.com/users/lewis6991/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/lewis6991",
                "id": 7904185,
                "login": "lewis6991",
                "node_id": "MDQ6VXNlcjc5MDQxODU=",
                "organizations_url": "https://api.github.com/users/lewis6991/orgs",
                "received_events_url": "https://api.github.com/users/lewis6991/received_events",
                "repos_url": "https://api.github.com/users/lewis6991/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/lewis6991/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lewis6991/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/lewis6991"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I think the likely culprits of this could be 6ba34e21fee2a81677e8261dfeaf24c8cd320500 (since it's LSP related which I think is the only user of `rbuffer_consumed_compact`) or cce736218f465511194465410e1ba23b5530e46f (since this was quite a big change).",
            "created_at": "2023-01-06T11:14:12Z",
            "html_url": "https://github.com/neovim/neovim/issues/21299#issuecomment-1373484538",
            "id": 1373484538,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21299",
            "node_id": "IC_kwDOAPphoM5R3bX6",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1373484538/reactions"
            },
            "updated_at": "2023-01-06T11:14:12Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1373484538",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/7904185?v=4",
                "events_url": "https://api.github.com/users/lewis6991/events{/privacy}",
                "followers_url": "https://api.github.com/users/lewis6991/followers",
                "following_url": "https://api.github.com/users/lewis6991/following{/other_user}",
                "gists_url": "https://api.github.com/users/lewis6991/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/lewis6991",
                "id": 7904185,
                "login": "lewis6991",
                "node_id": "MDQ6VXNlcjc5MDQxODU=",
                "organizations_url": "https://api.github.com/users/lewis6991/orgs",
                "received_events_url": "https://api.github.com/users/lewis6991/received_events",
                "repos_url": "https://api.github.com/users/lewis6991/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/lewis6991/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lewis6991/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/lewis6991"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I have a backtrace. No idea if it's useful or not:\r\n\r\n```\r\nThread 0 Crashed::  Dispatch queue: com.apple.main-thread\r\n0   libsystem_kernel.dylib        \t       0x19ac4e1b0 __pthread_kill + 8\r\n1   libsystem_pthread.dylib       \t       0x19ac84cec pthread_kill + 288\r\n2   libsystem_c.dylib             \t       0x19abbe2c8 abort + 180\r\n3   libsystem_c.dylib             \t       0x19abbd620 __assert_rtn + 272\r\n4   nvim                          \t       0x100448790 rbuffer_consumed_compact + 284\r\n5   nvim                          \t       0x1003d46a8 receive_msgpack + 344\r\n6   nvim                          \t       0x1002ddd68 read_cb + 340\r\n7   nvim                          \t       0x10011e470 uv__read + 328 (stream.c:1158) [inlined]\r\n8   nvim                          \t       0x10011e470 uv__stream_io + 768 (stream.c:1226)\r\n9   nvim                          \t       0x100123bd8 uv__io_poll + 1000 (kqueue.c:378)\r\n10  nvim                          \t       0x10011538c uv_run + 384 (core.c:406)\r\n11  nvim                          \t       0x1002db688 loop_poll_events + 284\r\n12  nvim                          \t       0x10051db64 ui_client_run + 1052\r\n13  nvim                          \t       0x1003865c8 main + 16272\r\n14  dyld                          \t       0x19a95be50 start + 2544\r\n```",
            "created_at": "2023-01-06T11:16:54Z",
            "html_url": "https://github.com/neovim/neovim/issues/21299#issuecomment-1373486657",
            "id": 1373486657,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21299",
            "node_id": "IC_kwDOAPphoM5R3b5B",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1373486657/reactions"
            },
            "updated_at": "2023-01-06T11:16:54Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1373486657",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/7904185?v=4",
                "events_url": "https://api.github.com/users/lewis6991/events{/privacy}",
                "followers_url": "https://api.github.com/users/lewis6991/followers",
                "following_url": "https://api.github.com/users/lewis6991/following{/other_user}",
                "gists_url": "https://api.github.com/users/lewis6991/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/lewis6991",
                "id": 7904185,
                "login": "lewis6991",
                "node_id": "MDQ6VXNlcjc5MDQxODU=",
                "organizations_url": "https://api.github.com/users/lewis6991/orgs",
                "received_events_url": "https://api.github.com/users/lewis6991/received_events",
                "repos_url": "https://api.github.com/users/lewis6991/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/lewis6991/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lewis6991/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/lewis6991"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "After #18375 simply this can cause this assert failure:\r\n```vim\r\n:lua io.stdout:write('a')\r\n```\r\n\r\nThis issue was created before #18375 was merged though.",
            "created_at": "2023-01-07T00:53:13Z",
            "html_url": "https://github.com/neovim/neovim/issues/21299#issuecomment-1374319080",
            "id": 1374319080,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21299",
            "node_id": "IC_kwDOAPphoM5R6nHo",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1374319080/reactions"
            },
            "updated_at": "2023-01-13T20:46:49Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1374319080",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "yes, stdin/stdout fd:s will need to be renamed in the server. I'll look into a fix.",
            "created_at": "2023-01-07T08:09:10Z",
            "html_url": "https://github.com/neovim/neovim/issues/21299#issuecomment-1374411546",
            "id": 1374411546,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21299",
            "node_id": "IC_kwDOAPphoM5R69sa",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1374411546/reactions"
            },
            "updated_at": "2023-01-13T20:47:02Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1374411546",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
                "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
                "followers_url": "https://api.github.com/users/bfredl/followers",
                "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
                "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bfredl",
                "id": 1363104,
                "login": "bfredl",
                "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
                "organizations_url": "https://api.github.com/users/bfredl/orgs",
                "received_events_url": "https://api.github.com/users/bfredl/received_events",
                "repos_url": "https://api.github.com/users/bfredl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bfredl"
            }
        },
        {
            "author_association": "NONE",
            "body": "> After #18375 simply this can cause this assert failure:\r\n> \r\n> ```viml\r\n> :lua io.stdout:write('a')\r\n> ```\r\n> \r\n> This issue was created before #18375 was merged though.\r\n\r\nI can confirm that this reproduces the error, after typing this command on a buffer, NeoVim crashes.",
            "created_at": "2023-01-08T08:30:12Z",
            "html_url": "https://github.com/neovim/neovim/issues/21299#issuecomment-1374757928",
            "id": 1374757928,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21299",
            "node_id": "IC_kwDOAPphoM5R8SQo",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1374757928/reactions"
            },
            "updated_at": "2023-01-08T15:04:33Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1374757928",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/17252601?v=4",
                "events_url": "https://api.github.com/users/mosheavni/events{/privacy}",
                "followers_url": "https://api.github.com/users/mosheavni/followers",
                "following_url": "https://api.github.com/users/mosheavni/following{/other_user}",
                "gists_url": "https://api.github.com/users/mosheavni/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mosheavni",
                "id": 17252601,
                "login": "mosheavni",
                "node_id": "MDQ6VXNlcjE3MjUyNjAx",
                "organizations_url": "https://api.github.com/users/mosheavni/orgs",
                "received_events_url": "https://api.github.com/users/mosheavni/received_events",
                "repos_url": "https://api.github.com/users/mosheavni/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mosheavni/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mosheavni/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mosheavni"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "This `assert((size_t)(buf->read_ptr - buf->write_ptr) == buf->size);` doesn't seem to make any sense. It can fail whenever `buf->size != 0`, or `count < buf->size` when this function is called.",
            "created_at": "2023-01-08T23:36:35Z",
            "html_url": "https://github.com/neovim/neovim/issues/21299#issuecomment-1374960616",
            "id": 1374960616,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21299",
            "node_id": "IC_kwDOAPphoM5R9Dvo",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1374960616/reactions"
            },
            "updated_at": "2023-01-09T00:00:18Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1374960616",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "This assert failure can happen with the following sequence:\r\n1. `rbuffer_produced()` is called with a `count` of 65536, then the buffer is full (`buf->size == 65536`) and `buf->read_ptr` and `buf->write_ptr` are both set to `buf->start_ptr`.\r\n2. 65533 bytes are parsed as msgpack, so `rbuffer_consumed_compact()` is called with a `count` of 65533.\r\n3. After consuming 65533 bytes, `buf->read_ptr == buf->start_ptr + 65533` and `buf->size == 3`, while `buf->write_ptr == 0`\r\n4. Assert failure",
            "created_at": "2023-01-08T23:47:29Z",
            "html_url": "https://github.com/neovim/neovim/issues/21299#issuecomment-1374962577",
            "id": 1374962577,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21299",
            "node_id": "IC_kwDOAPphoM5R9EOR",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1374962577/reactions"
            },
            "updated_at": "2023-01-08T23:59:44Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1374962577",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "However, when rbuffer isn't full, `buf->write_ptr == buf->read_ptr + buf->size`, so this assertion fails whenever `buf->size != 0`.",
            "created_at": "2023-01-08T23:50:55Z",
            "html_url": "https://github.com/neovim/neovim/issues/21299#issuecomment-1374963192",
            "id": 1374963192,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21299",
            "node_id": "IC_kwDOAPphoM5R9EX4",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1374963192/reactions"
            },
            "updated_at": "2023-01-08T23:51:11Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1374963192",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Not sure if related, but with #21675 applied I'm now getting a different crash but In the same area of the code:\r\n\r\n```\r\nnvim(25902,0x1f5feba80) malloc: *** error for object 0x117814440: pointer being freed was not allocated\r\n```\r\n\r\n```\r\nThread 0 Crashed::  Dispatch queue: com.apple.main-thread\r\n0   libsystem_kernel.dylib        \t       0x19ac4e1b0 __pthread_kill + 8\r\n1   libsystem_pthread.dylib       \t       0x19ac84cec pthread_kill + 288\r\n2   libsystem_c.dylib             \t       0x19abbe2c8 abort + 180\r\n3   libsystem_malloc.dylib        \t       0x19aadcb1c malloc_vreport + 908\r\n4   libsystem_malloc.dylib        \t       0x19aae0330 malloc_report + 64\r\n5   libsystem_malloc.dylib        \t       0x19aaece60 find_zone_and_free + 308\r\n6   nvim                          \t       0x1046864c0 rpc_send_event + 660\r\n7   nvim                          \t       0x1047bc2c0 tinput_flush + 480\r\n8   nvim                          \t       0x1047bb3c8 tinput_read_cb + 156\r\n9   nvim                          \t       0x104599bd0 read_cb + 340\r\n10  nvim                          \t       0x1043da4a0 uv__read + 328 (stream.c:1158) [inlined]\r\n11  nvim                          \t       0x1043da4a0 uv__stream_io + 768 (stream.c:1226)\r\n12  nvim                          \t       0x1043dfc08 uv__io_poll + 1000 (kqueue.c:378)\r\n13  nvim                          \t       0x1043d13bc uv_run + 384 (core.c:406)\r\n14  nvim                          \t       0x1045974c4 loop_poll_events + 284\r\n15  nvim                          \t       0x1047cf2c0 ui_client_run + 760\r\n16  nvim                          \t       0x104638708 main + 16496\r\n17  dyld                          \t       0x19a95be50 start + 2544\r\n```",
            "created_at": "2023-01-09T13:36:06Z",
            "html_url": "https://github.com/neovim/neovim/issues/21299#issuecomment-1375636602",
            "id": 1375636602,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21299",
            "node_id": "IC_kwDOAPphoM5R_ox6",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1375636602/reactions"
            },
            "updated_at": "2023-01-13T20:46:35Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1375636602",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/7904185?v=4",
                "events_url": "https://api.github.com/users/lewis6991/events{/privacy}",
                "followers_url": "https://api.github.com/users/lewis6991/followers",
                "following_url": "https://api.github.com/users/lewis6991/following{/other_user}",
                "gists_url": "https://api.github.com/users/lewis6991/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/lewis6991",
                "id": 7904185,
                "login": "lewis6991",
                "node_id": "MDQ6VXNlcjc5MDQxODU=",
                "organizations_url": "https://api.github.com/users/lewis6991/orgs",
                "received_events_url": "https://api.github.com/users/lewis6991/received_events",
                "repos_url": "https://api.github.com/users/lewis6991/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/lewis6991/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lewis6991/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/lewis6991"
            }
        },
        {
            "author_association": "NONE",
            "body": "I have been getting this a lot lately. Any debugging steps I can do to help resolve this?\r\n\r\nMy neovim version:\r\n```\r\n‚ùØ nvim --version\r\nNVIM v0.9.0-dev\r\nBuild type: RelWithDebInfo\r\nLuaJIT 2.1.0-beta3\r\nCompilation: /usr/bin/cc -g -O2 -fdebug-prefix-map=/build/neovim-Se7AhW/neovim-0.9.0~ubuntu1+git202301110019-15ee93c0b-333b5866f=. -fstack-protector-strong -Wformat -Werror=format-security -U_FORTIFY_SOURCE -D_FORTIFY_SOURCE=1 -O2 -g  -Og -g -Wall -Wextra -pedantic -Wno-unused-parameter -Wstrict-prototypes -std=gnu99 -Wshadow -Wconversion -Wdouble-promotion -Wmissing-noreturn -Wmissing-format-attribute -Wmissing-prototypes -Wimplicit-fallthrough -Wvla -fno-common -fdiagnostics-color=auto -fstack-protector-strong -DNVIM_UNIBI_HAS_VAR_FROM -DNVIM_MSGPACK_HAS_FLOAT32 -DNVIM_TS_HAS_SET_MATCH_LIMIT -DNVIM_TS_HAS_SET_ALLOCATOR -DINCLUDE_GENERATED_DECLARATIONS -D_GNU_SOURCE -DMIN_LOG_LEVEL=3 -I/build/neovim-Se7AhW/neovim-0.9.0~ubuntu1+git202301110019-15ee93c0b-333b5866f/.deps/usr/include -I/usr/include -I/usr/include/luajit-2.1 -I/build/neovim-Se7AhW/neovim-0.9.0~ubuntu1+git202301110019-15ee93c0b-333b5866f/build/src/nvim/auto -I/build/neovim-Se7AhW/neovim-0.9.0~ubuntu1+git202301110019-15ee93c0b-333b5866f/build/include -I/build/neovim-Se7AhW/neovim-0.9.0~ubuntu1+git202301110019-15ee93c0b-333b5866f/build/cmake.config -I/build/neovim-Se7AhW/neovim-0.9.0~ubuntu1+git202301110019-15ee93c0b-333b5866f/src\r\nCompiled by buildd@lcy02-amd64-001\r\n\r\nFeatures: +acl +iconv +tui\r\nSee \":help feature-compile\"\r\n\r\n   system vimrc file: \"$VIM/sysinit.vim\"\r\n  fall-back for $VIM: \"/usr/share/nvim\"\r\n\r\nRun :checkhealth for more info\r\n```",
            "created_at": "2023-01-11T16:21:25Z",
            "html_url": "https://github.com/neovim/neovim/issues/21299#issuecomment-1379077460",
            "id": 1379077460,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21299",
            "node_id": "IC_kwDOAPphoM5SMw1U",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1379077460/reactions"
            },
            "updated_at": "2023-01-13T20:46:22Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1379077460",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/389051?v=4",
                "events_url": "https://api.github.com/users/matiasvc/events{/privacy}",
                "followers_url": "https://api.github.com/users/matiasvc/followers",
                "following_url": "https://api.github.com/users/matiasvc/following{/other_user}",
                "gists_url": "https://api.github.com/users/matiasvc/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/matiasvc",
                "id": 389051,
                "login": "matiasvc",
                "node_id": "MDQ6VXNlcjM4OTA1MQ==",
                "organizations_url": "https://api.github.com/users/matiasvc/orgs",
                "received_events_url": "https://api.github.com/users/matiasvc/received_events",
                "repos_url": "https://api.github.com/users/matiasvc/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/matiasvc/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/matiasvc/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/matiasvc"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> This assert failure can happen with the following sequence:\r\n> \r\n>     1. `rbuffer_produced()` is called with a `count` of 65536, then the buffer is full (`buf->size == 65536`) and `buf->read_ptr` and `buf->write_ptr` are both set to `buf->start_ptr`.\r\n> \r\n>     2. 65533 bytes are parsed as msgpack, so `rbuffer_consumed_compact()` is called with a `count` of 65533.\r\n> \r\n>     3. After consuming 65533 bytes, `buf->read_ptr == buf->start_ptr + 65533` and `buf->size == 3`, while `buf->write_ptr == 0`\r\n> \r\n>     4. Assert failure\r\n\r\nThis was the case I found out using `rr` when I last got a crash with steps similar to the one mentioned in #21785.",
            "created_at": "2023-01-13T20:48:20Z",
            "html_url": "https://github.com/neovim/neovim/issues/21299#issuecomment-1382370289",
            "id": 1382370289,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21299",
            "node_id": "IC_kwDOAPphoM5SZUvx",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1382370289/reactions"
            },
            "updated_at": "2023-01-13T20:48:20Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1382370289",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Ok, rbuffer needs to be refactored to actually behave like a ring buffer. As a quickfix, the only exception that could happen in msgpack code is when buffer is exactly full, which could be added to the assert.",
            "created_at": "2023-01-14T10:24:53Z",
            "html_url": "https://github.com/neovim/neovim/issues/21299#issuecomment-1382708376",
            "id": 1382708376,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21299",
            "node_id": "IC_kwDOAPphoM5SanSY",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1382708376/reactions"
            },
            "updated_at": "2023-01-14T10:24:53Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1382708376",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
                "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
                "followers_url": "https://api.github.com/users/bfredl/followers",
                "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
                "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bfredl",
                "id": 1363104,
                "login": "bfredl",
                "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
                "organizations_url": "https://api.github.com/users/bfredl/orgs",
                "received_events_url": "https://api.github.com/users/bfredl/received_events",
                "repos_url": "https://api.github.com/users/bfredl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bfredl"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "#21899 may fix some `rbuffer.c:144: rbuffer_consumed: Assertion count && count <= buf->size' failed` crashes.",
            "created_at": "2023-01-19T10:55:42Z",
            "html_url": "https://github.com/neovim/neovim/issues/21299#issuecomment-1396784146",
            "id": 1396784146,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21299",
            "node_id": "IC_kwDOAPphoM5TQTwS",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 2,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 3,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1396784146/reactions"
            },
            "updated_at": "2023-01-19T10:55:42Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1396784146",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq"
            }
        },
        {
            "author_association": "NONE",
            "body": "Thanks for the fix @zeertzjq - I've updated to nightly and searching with telescope doesn't crash for me now. Previous nightly it would crash quite quickly,   \r\n\r\n_edit : before fix it would crash with telescope search when I entered characters quickly into the search box, on MacOS._",
            "created_at": "2023-01-20T11:56:41Z",
            "html_url": "https://github.com/neovim/neovim/issues/21299#issuecomment-1398277105",
            "id": 1398277105,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21299",
            "node_id": "IC_kwDOAPphoM5TWAPx",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1398277105/reactions"
            },
            "updated_at": "2023-01-25T15:05:08Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1398277105",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/190819?v=4",
                "events_url": "https://api.github.com/users/ianhomer/events{/privacy}",
                "followers_url": "https://api.github.com/users/ianhomer/followers",
                "following_url": "https://api.github.com/users/ianhomer/following{/other_user}",
                "gists_url": "https://api.github.com/users/ianhomer/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ianhomer",
                "id": 190819,
                "login": "ianhomer",
                "node_id": "MDQ6VXNlcjE5MDgxOQ==",
                "organizations_url": "https://api.github.com/users/ianhomer/orgs",
                "received_events_url": "https://api.github.com/users/ianhomer/received_events",
                "repos_url": "https://api.github.com/users/ianhomer/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ianhomer/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ianhomer/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ianhomer"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Not sure if this helps, but based on a number of user reports and by my own testing, it seems this issue only occurs on Macos. I can not reproduce this on Windows. The issue seems to be triggered by scrolling quickly in a buffer.\r\n\r\nThe repro is unfortunately not that minimal: https://github.com/folke/noice.nvim/issues/315#issuecomment-1386650267\r\n\r\nTo reproduce, open with `-u` and a large file, like `neovim/runtime/lua/vim/lsp.lua`\r\n\r\nThen scroll fast with the mouse or touchpad while the LSP is loading the project.\r\n\r\nOn Macos it crashes within 2 seconds.\r\n\r\nOn Linux it never crashes.",
            "created_at": "2023-01-23T23:39:52Z",
            "html_url": "https://github.com/neovim/neovim/issues/21299#issuecomment-1401155660",
            "id": 1401155660,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21299",
            "node_id": "IC_kwDOAPphoM5Tg_BM",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1401155660/reactions"
            },
            "updated_at": "2023-01-23T23:42:56Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1401155660",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/292349?v=4",
                "events_url": "https://api.github.com/users/folke/events{/privacy}",
                "followers_url": "https://api.github.com/users/folke/followers",
                "following_url": "https://api.github.com/users/folke/following{/other_user}",
                "gists_url": "https://api.github.com/users/folke/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/folke",
                "id": 292349,
                "login": "folke",
                "node_id": "MDQ6VXNlcjI5MjM0OQ==",
                "organizations_url": "https://api.github.com/users/folke/orgs",
                "received_events_url": "https://api.github.com/users/folke/received_events",
                "repos_url": "https://api.github.com/users/folke/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/folke/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/folke/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/folke"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "@folke I saw this on Ubuntu and Arch Linux as well\n\nEdit: not with noice though.. The notification was truncated so didn't see the full message",
            "created_at": "2023-01-24T07:00:00Z",
            "html_url": "https://github.com/neovim/neovim/issues/21299#issuecomment-1401470519",
            "id": 1401470519,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21299",
            "node_id": "IC_kwDOAPphoM5TiL43",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1401470519/reactions"
            },
            "updated_at": "2023-01-24T15:31:54Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1401470519",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/7551358?v=4",
                "events_url": "https://api.github.com/users/FredeEB/events{/privacy}",
                "followers_url": "https://api.github.com/users/FredeEB/followers",
                "following_url": "https://api.github.com/users/FredeEB/following{/other_user}",
                "gists_url": "https://api.github.com/users/FredeEB/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/FredeEB",
                "id": 7551358,
                "login": "FredeEB",
                "node_id": "MDQ6VXNlcjc1NTEzNTg=",
                "organizations_url": "https://api.github.com/users/FredeEB/orgs",
                "received_events_url": "https://api.github.com/users/FredeEB/received_events",
                "repos_url": "https://api.github.com/users/FredeEB/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/FredeEB/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/FredeEB/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/FredeEB"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "@FredeEB with Noice? For Noice, this has been fixed in Noice and will be fixed upstream. But that was related to `vim.ui_attach`. There seems to be another issue that's not related to `vim.ui_attach` as well. And for me at least that issue only triggers on Macos",
            "created_at": "2023-01-24T07:02:10Z",
            "html_url": "https://github.com/neovim/neovim/issues/21299#issuecomment-1401472079",
            "id": 1401472079,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21299",
            "node_id": "IC_kwDOAPphoM5TiMRP",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1401472079/reactions"
            },
            "updated_at": "2023-01-24T07:02:10Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1401472079",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/292349?v=4",
                "events_url": "https://api.github.com/users/folke/events{/privacy}",
                "followers_url": "https://api.github.com/users/folke/followers",
                "following_url": "https://api.github.com/users/folke/following{/other_user}",
                "gists_url": "https://api.github.com/users/folke/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/folke",
                "id": 292349,
                "login": "folke",
                "node_id": "MDQ6VXNlcjI5MjM0OQ==",
                "organizations_url": "https://api.github.com/users/folke/orgs",
                "received_events_url": "https://api.github.com/users/folke/received_events",
                "repos_url": "https://api.github.com/users/folke/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/folke/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/folke/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/folke"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I think there were a few vectors that could trip this and we've fixed quite a few of them. So when reporting on this, make sure it is for the latest commit on master.\n\nI haven't had this trip on me for a while now on MacOS, and I was getting it a lot before.",
            "created_at": "2023-01-24T07:41:47Z",
            "html_url": "https://github.com/neovim/neovim/issues/21299#issuecomment-1401502577",
            "id": 1401502577,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21299",
            "node_id": "IC_kwDOAPphoM5TiTtx",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 3,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 3,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1401502577/reactions"
            },
            "updated_at": "2023-01-24T07:41:47Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1401502577",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/7904185?v=4",
                "events_url": "https://api.github.com/users/lewis6991/events{/privacy}",
                "followers_url": "https://api.github.com/users/lewis6991/followers",
                "following_url": "https://api.github.com/users/lewis6991/following{/other_user}",
                "gists_url": "https://api.github.com/users/lewis6991/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/lewis6991",
                "id": 7904185,
                "login": "lewis6991",
                "node_id": "MDQ6VXNlcjc5MDQxODU=",
                "organizations_url": "https://api.github.com/users/lewis6991/orgs",
                "received_events_url": "https://api.github.com/users/lewis6991/received_events",
                "repos_url": "https://api.github.com/users/lewis6991/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/lewis6991/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lewis6991/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/lewis6991"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I haven't seen this for a full 2 days now so going to add the \"needs response\" label.",
            "created_at": "2023-01-26T16:49:18Z",
            "html_url": "https://github.com/neovim/neovim/issues/21299#issuecomment-1405298107",
            "id": 1405298107,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21299",
            "node_id": "IC_kwDOAPphoM5TwyW7",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1405298107/reactions"
            },
            "updated_at": "2023-01-26T16:49:18Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1405298107",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/7904185?v=4",
                "events_url": "https://api.github.com/users/lewis6991/events{/privacy}",
                "followers_url": "https://api.github.com/users/lewis6991/followers",
                "following_url": "https://api.github.com/users/lewis6991/following{/other_user}",
                "gists_url": "https://api.github.com/users/lewis6991/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/lewis6991",
                "id": 7904185,
                "login": "lewis6991",
                "node_id": "MDQ6VXNlcjc5MDQxODU=",
                "organizations_url": "https://api.github.com/users/lewis6991/orgs",
                "received_events_url": "https://api.github.com/users/lewis6991/received_events",
                "repos_url": "https://api.github.com/users/lewis6991/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/lewis6991/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lewis6991/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/lewis6991"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "ok, cool. Will test myself tomorrow on macos",
            "created_at": "2023-01-26T17:02:42Z",
            "html_url": "https://github.com/neovim/neovim/issues/21299#issuecomment-1405316191",
            "id": 1405316191,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21299",
            "node_id": "IC_kwDOAPphoM5Tw2xf",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1405316191/reactions"
            },
            "updated_at": "2023-01-26T17:02:42Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1405316191",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/292349?v=4",
                "events_url": "https://api.github.com/users/folke/events{/privacy}",
                "followers_url": "https://api.github.com/users/folke/followers",
                "following_url": "https://api.github.com/users/folke/following{/other_user}",
                "gists_url": "https://api.github.com/users/folke/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/folke",
                "id": 292349,
                "login": "folke",
                "node_id": "MDQ6VXNlcjI5MjM0OQ==",
                "organizations_url": "https://api.github.com/users/folke/orgs",
                "received_events_url": "https://api.github.com/users/folke/received_events",
                "repos_url": "https://api.github.com/users/folke/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/folke/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/folke/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/folke"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Closing as this is likely fixed.",
            "created_at": "2023-02-02T13:45:23Z",
            "html_url": "https://github.com/neovim/neovim/issues/21299#issuecomment-1413770331",
            "id": 1413770331,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21299",
            "node_id": "IC_kwDOAPphoM5URGxb",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1413770331/reactions"
            },
            "updated_at": "2023-02-02T13:45:23Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1413770331",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Yep, the noice issue is also resolved. Thank you all!",
            "created_at": "2023-02-02T17:02:14Z",
            "html_url": "https://github.com/neovim/neovim/issues/21299#issuecomment-1414071073",
            "id": 1414071073,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21299",
            "node_id": "IC_kwDOAPphoM5USQMh",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1414071073/reactions"
            },
            "updated_at": "2023-02-02T17:02:14Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1414071073",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/292349?v=4",
                "events_url": "https://api.github.com/users/folke/events{/privacy}",
                "followers_url": "https://api.github.com/users/folke/followers",
                "following_url": "https://api.github.com/users/folke/following{/other_user}",
                "gists_url": "https://api.github.com/users/folke/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/folke",
                "id": 292349,
                "login": "folke",
                "node_id": "MDQ6VXNlcjI5MjM0OQ==",
                "organizations_url": "https://api.github.com/users/folke/orgs",
                "received_events_url": "https://api.github.com/users/folke/received_events",
                "repos_url": "https://api.github.com/users/folke/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/folke/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/folke/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/folke"
            }
        },
        {
            "author_association": "NONE",
            "body": "I just left a comment in #22199.\r\n\r\nTL;DR \r\nDid a bisect from 0.7.2 and our crashes starts with commit d5f047bee04a42f40425c34061c84b39af846e1f",
            "created_at": "2023-02-22T19:03:09Z",
            "html_url": "https://github.com/neovim/neovim/issues/21299#issuecomment-1440641401",
            "id": 1440641401,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21299",
            "node_id": "IC_kwDOAPphoM5V3nF5",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1440641401/reactions"
            },
            "updated_at": "2023-02-22T19:03:09Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1440641401",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/74407?v=4",
                "events_url": "https://api.github.com/users/jorgen99/events{/privacy}",
                "followers_url": "https://api.github.com/users/jorgen99/followers",
                "following_url": "https://api.github.com/users/jorgen99/following{/other_user}",
                "gists_url": "https://api.github.com/users/jorgen99/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/jorgen99",
                "id": 74407,
                "login": "jorgen99",
                "node_id": "MDQ6VXNlcjc0NDA3",
                "organizations_url": "https://api.github.com/users/jorgen99/orgs",
                "received_events_url": "https://api.github.com/users/jorgen99/received_events",
                "repos_url": "https://api.github.com/users/jorgen99/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/jorgen99/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jorgen99/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/jorgen99"
            }
        },
        {
            "author_association": "NONE",
            "body": "I am on MacOs with latest MacOs, latest Alcritty terminal, latest NeoVim. The behavior that OP reported is happening for me now. It happens when either scrolling with mouse or ctrl-d and ctrl-u ",
            "created_at": "2023-11-21T14:33:55Z",
            "html_url": "https://github.com/neovim/neovim/issues/21299#issuecomment-1821040691",
            "id": 1821040691,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21299",
            "node_id": "IC_kwDOAPphoM5siuAz",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1821040691/reactions"
            },
            "updated_at": "2023-11-21T14:33:55Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1821040691",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/113385018?v=4",
                "events_url": "https://api.github.com/users/agluck91/events{/privacy}",
                "followers_url": "https://api.github.com/users/agluck91/followers",
                "following_url": "https://api.github.com/users/agluck91/following{/other_user}",
                "gists_url": "https://api.github.com/users/agluck91/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/agluck91",
                "id": 113385018,
                "login": "agluck91",
                "node_id": "U_kgDOBsIeOg",
                "organizations_url": "https://api.github.com/users/agluck91/orgs",
                "received_events_url": "https://api.github.com/users/agluck91/received_events",
                "repos_url": "https://api.github.com/users/agluck91/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/agluck91/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/agluck91/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/agluck91"
            }
        }
    ],
    "comments": 32,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/21299/comments",
    "created_at": "2022-12-05T14:52:31Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/21299/events",
    "html_url": "https://github.com/neovim/neovim/issues/21299",
    "id": 1476743352,
    "labels": [
        {
            "color": "c7def8",
            "default": false,
            "description": null,
            "id": 242522707,
            "name": "rpc",
            "node_id": "MDU6TGFiZWwyNDI1MjI3MDc=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/rpc"
        },
        {
            "color": "FBCA04",
            "default": false,
            "description": "We need minimal steps to reproduce the issue",
            "id": 298863445,
            "name": "needs:repro",
            "node_id": "MDU6TGFiZWwyOTg4NjM0NDU=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/needs:repro"
        },
        {
            "color": "F9D0C4",
            "default": false,
            "description": "issue reporting a crash or segfault",
            "id": 435854234,
            "name": "bug-crash",
            "node_id": "MDU6TGFiZWw0MzU4NTQyMzQ=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug-crash"
        },
        {
            "color": "f9d0c4",
            "default": false,
            "description": "wrong behavior that was introduced in a previous commit (please bisect)",
            "id": 619474658,
            "name": "bug-regression",
            "node_id": "MDU6TGFiZWw2MTk0NzQ2NTg=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug-regression"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/21299/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": "2023-02-11T13:25:57Z",
        "closed_issues": 18,
        "created_at": "2022-12-29T22:15:54Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
            "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
            "followers_url": "https://api.github.com/users/zeertzjq/followers",
            "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
            "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/zeertzjq",
            "id": 35768171,
            "login": "zeertzjq",
            "node_id": "MDQ6VXNlcjM1NzY4MTcx",
            "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
            "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
            "repos_url": "https://api.github.com/users/zeertzjq/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/zeertzjq"
        },
        "description": "",
        "due_on": null,
        "html_url": "https://github.com/neovim/neovim/milestone/35",
        "id": 8805727,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/35/labels",
        "node_id": "MI_kwDOAPphoM4Ahl1f",
        "number": 35,
        "open_issues": 0,
        "state": "closed",
        "title": "0.8.3",
        "updated_at": "2023-02-11T13:25:57Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/35"
    },
    "node_id": "I_kwDOAPphoM5YBVC4",
    "number": 21299,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 19,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 19,
        "url": "https://api.github.com/repos/neovim/neovim/issues/21299/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/21299/timeline",
    "title": "Assertion in `rbuffer_consumed_compact` tripped",
    "updated_at": "2023-11-21T14:33:56Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/21299",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/118456?v=4",
        "events_url": "https://api.github.com/users/RedBeard0531/events{/privacy}",
        "followers_url": "https://api.github.com/users/RedBeard0531/followers",
        "following_url": "https://api.github.com/users/RedBeard0531/following{/other_user}",
        "gists_url": "https://api.github.com/users/RedBeard0531/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/RedBeard0531",
        "id": 118456,
        "login": "RedBeard0531",
        "node_id": "MDQ6VXNlcjExODQ1Ng==",
        "organizations_url": "https://api.github.com/users/RedBeard0531/orgs",
        "received_events_url": "https://api.github.com/users/RedBeard0531/received_events",
        "repos_url": "https://api.github.com/users/RedBeard0531/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/RedBeard0531/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/RedBeard0531/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/RedBeard0531"
    }
}