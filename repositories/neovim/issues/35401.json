{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\n\nI am experiencing an issue when I change buffers. Basically the diagnostics window is not closing on buffer change.\n\n<img width=\"1834\" height=\"540\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/184128d7-348a-4f11-896c-e569049534a9\" />\n\n<img width=\"1724\" height=\"779\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/bc94dbf8-b524-4316-a21d-1f6afc5cec5c\" />\n\nMy neovim version is v0.11.3\n\n```lua\nvim.diagnostic.config({\n\tupdate_in_insert = true,\n\tunderline = true,\n\tseverity_sort = true,\n\tvirtual_text = {\n\t\tsource = \"if_many\",\n\t\tprefix = \"‚óè \",\n\t},\n\tfloat = {\n\t\tsource = \"always\",\n\t\tfocusable = false,\n\t\tstyle = \"minimal\",\n\t\tborder = \"rounded\",\n\t\theader = \"\",\n\t\tprefix = \"\",\n\t},\n})\n```\nthis is my diagnostics config\n\n```lua\nreturn {\n\t\"saghen/blink.cmp\",\n\tdependencies = { { \"rafamadriz/friendly-snippets\" }, { \"L3MON4D3/LuaSnip\", version = \"v2.*\" } },\n\tversion = \"1.*\",\n  enabled = true,\n\n\topts = {\n\n\t\tsnippets = { preset = \"luasnip\" },\n\n\t\tkeymap = {\n\t\t\t[\"<Tab>\"] = { \"select_next\", \"fallback\" },\n\t\t\t[\"<S-Tab>\"] = { \"select_prev\" },\n\t\t\t[\"<CR>\"] = { \"accept\", \"fallback\" },\n\t\t\t[\"<C-k>\"] = { \"show_signature\" },\n\t\t},\n\n\t\tappearance = {\n\t\t\thighlight_ns = vim.api.nvim_create_namespace(\"blink_cmp\"),\n\t\t\tnerd_font_variant = \"mono\",\n\t\t},\n\t\tsignature = {\n\t\t\tenabled = true,\n\t\t\ttrigger = {\n\t\t\t\tenabled = true,\n\t\t\t\tshow_on_keyword = false,\n\t\t\t\tblocked_trigger_characters = {},\n\t\t\t\tblocked_retrigger_characters = {},\n\t\t\t\tshow_on_trigger_character = true,\n\t\t\t\tshow_on_insert = false,\n\t\t\t\tshow_on_insert_on_trigger_character = true,\n\t\t\t},\n\t\t\twindow = {\n\t\t\t\tmin_width = 1,\n\t\t\t\tmax_width = 100,\n\t\t\t\tmax_height = 10,\n\t\t\t\twinblend = 0,\n\t\t\t\twinhighlight = \"Normal:BlinkCmpSignatureHelp,FloatBorder:BlinkCmpSignatureHelpBorder\",\n\t\t\t\tborder = \"rounded\",\n\t\t\t\tscrollbar = false,\n\t\t\t\tdirection_priority = { \"n\", \"s\" },\n\t\t\t\ttreesitter_highlighting = true,\n\t\t\t\tshow_documentation = true,\n\t\t\t},\n\t\t},\n\t\tcompletion = {\n\t\t\tmenu = {\n\t\t\t\tborder = \"rounded\",\n\t\t\t},\n\t\t\tdocumentation = {\n\t\t\t\tauto_show = true,\n\t\t\t\ttreesitter_highlighting = true,\n\t\t\t\tdraw = function(opts)\n\t\t\t\t\topts.default_implementation()\n\t\t\t\tend,\n\t\t\t\twindow = {\n\t\t\t\t\tmin_width = 10,\n\t\t\t\t\tmax_width = 80,\n\t\t\t\t\tmax_height = 20,\n\t\t\t\t\twinblend = 0,\n\t\t\t\t\twinhighlight = \"Normal:BlinkCmpDoc,FloatBorder:BlinkCmpDocBorder,EndOfBuffer:BlinkCmpDoc\",\n\t\t\t\t\tborder = \"rounded\",\n\t\t\t\t\tscrollbar = true,\n\t\t\t\t\tdirection_priority = {\n\t\t\t\t\t\tmenu_north = { \"e\", \"w\", \"n\", \"s\" },\n\t\t\t\t\t\tmenu_south = { \"e\", \"w\", \"s\", \"n\" },\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tsources = { default = { \"lsp\", \"path\", \"snippets\", \"buffer\" } },\n\t\tfuzzy = { implementation = \"prefer_rust_with_warning\" },\n\t},\n\n\topts_extend = { \"sources.default\" },\n}\n```\nthis is my blink config\n\nMy entire config is at [config](https://github.com/lucasForato/nvim)\n\nI don't have too many plugins and I tried many different approaches for fixing the issue, but nothing worked so far.\n\n### Steps to reproduce\n\n- Go to a buffer that has diagnostics on hover\n- wait for the diagnostics to appear\n- change buffers (you should continue seeing the diagnostics from the other buffer)\n\n### Expected behavior\n\nAll open diagnostics windows should close on buffer change\n\n### Nvim version (nvim -v)\n\n0.11.3\n\n### Vim (not Nvim) behaves the same?\n\nno\n\n### Operating system/version\n\nLinux\n\n### Terminal name/version\n\nGhostty 1.1.3-arch1\n\n### $TERM environment variable\n\nxterm-ghostty\n\n### Installation\n\nArch User Repo",
    "closed_at": "2025-08-20T01:31:24Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/63920674?v=4",
        "events_url": "https://api.github.com/users/lucasForato/events{/privacy}",
        "followers_url": "https://api.github.com/users/lucasForato/followers",
        "following_url": "https://api.github.com/users/lucasForato/following{/other_user}",
        "gists_url": "https://api.github.com/users/lucasForato/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/lucasForato",
        "id": 63920674,
        "login": "lucasForato",
        "node_id": "MDQ6VXNlcjYzOTIwNjc0",
        "organizations_url": "https://api.github.com/users/lucasForato/orgs",
        "received_events_url": "https://api.github.com/users/lucasForato/received_events",
        "repos_url": "https://api.github.com/users/lucasForato/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/lucasForato/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/lucasForato/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/lucasForato",
        "user_view_type": "public"
    },
    "comment_data": [
        {
            "author_association": "NONE",
            "body": "hey @lucasForato did you manage to resolve this? encountered same issue after updating to 0.11.3",
            "created_at": "2025-08-21T07:52:40Z",
            "html_url": "https://github.com/neovim/neovim/issues/35401#issuecomment-3209412750",
            "id": 3209412750,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/35401",
            "node_id": "IC_kwDOAPphoM6_S8CO",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3209412750/reactions"
            },
            "updated_at": "2025-08-21T07:52:40Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3209412750",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/8747429?v=4",
                "events_url": "https://api.github.com/users/Gezort/events{/privacy}",
                "followers_url": "https://api.github.com/users/Gezort/followers",
                "following_url": "https://api.github.com/users/Gezort/following{/other_user}",
                "gists_url": "https://api.github.com/users/Gezort/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Gezort",
                "id": 8747429,
                "login": "Gezort",
                "node_id": "MDQ6VXNlcjg3NDc0Mjk=",
                "organizations_url": "https://api.github.com/users/Gezort/orgs",
                "received_events_url": "https://api.github.com/users/Gezort/received_events",
                "repos_url": "https://api.github.com/users/Gezort/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Gezort/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Gezort/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Gezort",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "@Gezort I think this is a relatively new feature? of neovim. Diagnostic windows do not seem to close automatically on buffer change, except for, if You tell them. This feature doesn't even seem to be documented yet, or at least I didn't find any documentation at `vim.diagnostic.Opts.Float`. Ok, I do not want to keep You in suspense any longer. Use the `close_events` option. E.g. like that:\n\n`vim.diagnostic.open_float(nil, {close_events = {'BufLeave', 'CursorMoved', 'InsertEnter'}})`\n\nShamelessly copied from [here](https://oneofone.dev/post/neovim-diagnostics-float/).",
            "created_at": "2025-08-21T22:07:06Z",
            "html_url": "https://github.com/neovim/neovim/issues/35401#issuecomment-3212212448",
            "id": 3212212448,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/35401",
            "node_id": "IC_kwDOAPphoM6_dnjg",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3212212448/reactions"
            },
            "updated_at": "2025-08-21T22:07:06Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3212212448",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1470615?v=4",
                "events_url": "https://api.github.com/users/bschnitz/events{/privacy}",
                "followers_url": "https://api.github.com/users/bschnitz/followers",
                "following_url": "https://api.github.com/users/bschnitz/following{/other_user}",
                "gists_url": "https://api.github.com/users/bschnitz/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bschnitz",
                "id": 1470615,
                "login": "bschnitz",
                "node_id": "MDQ6VXNlcjE0NzA2MTU=",
                "organizations_url": "https://api.github.com/users/bschnitz/orgs",
                "received_events_url": "https://api.github.com/users/bschnitz/received_events",
                "repos_url": "https://api.github.com/users/bschnitz/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bschnitz/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bschnitz/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bschnitz",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "did the trick for me. thanks",
            "created_at": "2025-08-22T07:55:07Z",
            "html_url": "https://github.com/neovim/neovim/issues/35401#issuecomment-3213441623",
            "id": 3213441623,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/35401",
            "node_id": "IC_kwDOAPphoM6_iTpX",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3213441623/reactions"
            },
            "updated_at": "2025-08-22T07:55:07Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3213441623",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/8747429?v=4",
                "events_url": "https://api.github.com/users/Gezort/events{/privacy}",
                "followers_url": "https://api.github.com/users/Gezort/followers",
                "following_url": "https://api.github.com/users/Gezort/following{/other_user}",
                "gists_url": "https://api.github.com/users/Gezort/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Gezort",
                "id": 8747429,
                "login": "Gezort",
                "node_id": "MDQ6VXNlcjg3NDc0Mjk=",
                "organizations_url": "https://api.github.com/users/Gezort/orgs",
                "received_events_url": "https://api.github.com/users/Gezort/received_events",
                "repos_url": "https://api.github.com/users/Gezort/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Gezort/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Gezort/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Gezort",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 3,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/35401/comments",
    "created_at": "2025-08-20T01:28:02Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/35401/events",
    "html_url": "https://github.com/neovim/neovim/issues/35401",
    "id": 3336251358,
    "issue_dependencies_summary": {
        "blocked_by": 0,
        "blocking": 0,
        "total_blocked_by": 0,
        "total_blocking": 0
    },
    "labels": [],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/35401/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM7G2yfe",
    "number": 35401,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/35401/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "completed",
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/35401/timeline",
    "title": "Floating diagnostics window does not close on buffer change",
    "type": {
        "color": "red",
        "created_at": "2024-01-25T10:10:19Z",
        "description": "An unexpected problem or behavior",
        "id": 597163,
        "is_enabled": true,
        "name": "Bug",
        "node_id": "IT_kwDOAGK_Pc4ACRyr",
        "updated_at": "2024-07-26T10:12:30Z"
    },
    "updated_at": "2025-08-22T07:55:07Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/35401",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/63920674?v=4",
        "events_url": "https://api.github.com/users/lucasForato/events{/privacy}",
        "followers_url": "https://api.github.com/users/lucasForato/followers",
        "following_url": "https://api.github.com/users/lucasForato/following{/other_user}",
        "gists_url": "https://api.github.com/users/lucasForato/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/lucasForato",
        "id": 63920674,
        "login": "lucasForato",
        "node_id": "MDQ6VXNlcjYzOTIwNjc0",
        "organizations_url": "https://api.github.com/users/lucasForato/orgs",
        "received_events_url": "https://api.github.com/users/lucasForato/received_events",
        "repos_url": "https://api.github.com/users/lucasForato/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/lucasForato/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/lucasForato/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/lucasForato",
        "user_view_type": "public"
    }
}