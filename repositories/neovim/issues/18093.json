{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Feature already in Vim?\n\ndon't think so\n\n### Feature description\n\nI call neovim from scripts and would like to know why it exited. For example, if there is a conflicting swap file and the user selects \"Abort\", the exit code is 1, just as if the program failed or whatever.\r\nI could imagine it being based on the Error codes that happened before, such that aborting on a swap file conflict (E325) would exit with code 325.",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": ">would exit with code 325.\r\n\r\nThe exit code is one byte, so is constrained between 0-255.",
            "created_at": "2022-04-12T15:23:38Z",
            "html_url": "https://github.com/neovim/neovim/issues/18093#issuecomment-1096871240",
            "id": 1096871240,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/18093",
            "node_id": "IC_kwDOAPphoM5BYO1I",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1096871240/reactions"
            },
            "updated_at": "2022-04-12T15:23:38Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1096871240",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/8965202?v=4",
                "events_url": "https://api.github.com/users/gpanders/events{/privacy}",
                "followers_url": "https://api.github.com/users/gpanders/followers",
                "following_url": "https://api.github.com/users/gpanders/following{/other_user}",
                "gists_url": "https://api.github.com/users/gpanders/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/gpanders",
                "id": 8965202,
                "login": "gpanders",
                "node_id": "MDQ6VXNlcjg5NjUyMDI=",
                "organizations_url": "https://api.github.com/users/gpanders/orgs",
                "received_events_url": "https://api.github.com/users/gpanders/received_events",
                "repos_url": "https://api.github.com/users/gpanders/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/gpanders/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/gpanders/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/gpanders",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "There is already `cquit` command available for scripting.",
            "created_at": "2022-04-12T15:25:34Z",
            "html_url": "https://github.com/neovim/neovim/issues/18093#issuecomment-1096873472",
            "id": 1096873472,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/18093",
            "node_id": "IC_kwDOAPphoM5BYPYA",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1096873472/reactions"
            },
            "updated_at": "2022-04-12T15:25:34Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1096873472",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35012635?v=4",
                "events_url": "https://api.github.com/users/matveyt/events{/privacy}",
                "followers_url": "https://api.github.com/users/matveyt/followers",
                "following_url": "https://api.github.com/users/matveyt/following{/other_user}",
                "gists_url": "https://api.github.com/users/matveyt/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/matveyt",
                "id": 35012635,
                "login": "matveyt",
                "node_id": "MDQ6VXNlcjM1MDEyNjM1",
                "organizations_url": "https://api.github.com/users/matveyt/orgs",
                "received_events_url": "https://api.github.com/users/matveyt/received_events",
                "repos_url": "https://api.github.com/users/matveyt/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/matveyt/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/matveyt/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/matveyt",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "@gpanders ah, thanks for the hint. Well, I don't need much detail, but if the exit codes could have a meaning, this would be very helpful, for example:\r\n- 1 unexpected error\r\n- 2 programm error\r\n- 3 user abortion\r\n- ...",
            "created_at": "2022-04-12T15:48:55Z",
            "html_url": "https://github.com/neovim/neovim/issues/18093#issuecomment-1096900272",
            "id": 1096900272,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/18093",
            "node_id": "IC_kwDOAPphoM5BYV6w",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1096900272/reactions"
            },
            "updated_at": "2022-04-12T15:48:55Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1096900272",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/13354331?v=4",
                "events_url": "https://api.github.com/users/xeruf/events{/privacy}",
                "followers_url": "https://api.github.com/users/xeruf/followers",
                "following_url": "https://api.github.com/users/xeruf/following{/other_user}",
                "gists_url": "https://api.github.com/users/xeruf/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/xeruf",
                "id": 13354331,
                "login": "xeruf",
                "node_id": "MDQ6VXNlcjEzMzU0MzMx",
                "organizations_url": "https://api.github.com/users/xeruf/orgs",
                "received_events_url": "https://api.github.com/users/xeruf/received_events",
                "repos_url": "https://api.github.com/users/xeruf/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/xeruf/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/xeruf/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/xeruf",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Nvim doesn't force an exit on script errors, so there is never an exitcode except in `v:exiting` cases.\r\n\r\nScript errors are reflected by `v:errmsg`. There is also `v:exception` and `v:errors`.\r\n\r\n```\r\n# This correctly exits 1 (fail, because \"foo\" is not a valid command)\r\nnvim -es +foo +'exe !!v:errmsg.\"cquit\"'\r\n# This correctly exits 0 (success)\r\nnvim -es +'exe !!v:errmsg.\"cquit\"'\r\n```\r\n\r\n\r\n\"Script failure\" is typically application-specific. E.g. in a python script, unless you let an exception go uncaught, your script would explicitly do something like `os.exit(1)`. In Vimscript or Nvim Lua, I could imagine you might want an uncaught error to exit immediately and set the exitcode.\r\n\r\n>  aborting on a swap file conflict (E325) would exit with code 325.\r\n\r\nafaik exitcodes are 8 bits, max of 255.\r\n\r\n# Proposal\r\n\r\nWith `nvim -es` or `nvim -Es`, uncaught Vimscript exceptions and Lua errors should exit immediately and set distinct errorcodes.",
            "created_at": "2022-04-25T03:46:58Z",
            "html_url": "https://github.com/neovim/neovim/issues/18093#issuecomment-1108044394",
            "id": 1108044394,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/18093",
            "node_id": "IC_kwDOAPphoM5CC2pq",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1108044394/reactions"
            },
            "updated_at": "2022-04-25T03:50:48Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1108044394",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "I unironically decided to add my neovim config to CI. What I'd like to be able to do is have it run periodically to know two things.\n\n- there is a logical bug in my config, like a syntax error\n- lazy deps start throwing errors because of some change\n\nRight now if I use `--headless` mode it will not allow me to press keys and exit the program.\n\ncontrived example to force an error but the program is stuck waiting user input.\n<img width=\"1448\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/665f2fca-2ca0-44dc-8bb8-130d93e09bfc\" />\n\nIf I could check the exit code that would be helpful to know something is broken.\n<img width=\"770\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/34addf38-9a0b-44b9-80c7-e95b10e5f8d7\" />\n\nAlternatively, there could be a new flag added, something like `--exit-on-error` or something similar that will close `nvim` on any error in vimscript or lua.\n\nrelated PR https://github.com/Hacksore/dotfiles/pull/1",
            "created_at": "2025-01-04T02:33:11Z",
            "html_url": "https://github.com/neovim/neovim/issues/18093#issuecomment-2570014221",
            "id": 2570014221,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/18093",
            "node_id": "IC_kwDOAPphoM6ZL04N",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2570014221/reactions"
            },
            "updated_at": "2025-01-04T12:42:03Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2570014221",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/996134?v=4",
                "events_url": "https://api.github.com/users/Hacksore/events{/privacy}",
                "followers_url": "https://api.github.com/users/Hacksore/followers",
                "following_url": "https://api.github.com/users/Hacksore/following{/other_user}",
                "gists_url": "https://api.github.com/users/Hacksore/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Hacksore",
                "id": 996134,
                "login": "Hacksore",
                "node_id": "MDQ6VXNlcjk5NjEzNA==",
                "organizations_url": "https://api.github.com/users/Hacksore/orgs",
                "received_events_url": "https://api.github.com/users/Hacksore/received_events",
                "repos_url": "https://api.github.com/users/Hacksore/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Hacksore/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Hacksore/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Hacksore",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "seems like the magic incantation works well for me and my use-case.\n\n```\nnvim --headless -eS -c \"q!\"\n```\n\nI have a sanity check that neovim will open without crashing and burning 🙌.\n\n<img width=\"637\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/932e2b5e-a615-4f50-82b2-b86ea399f937\" />\n\n",
            "created_at": "2025-01-04T02:56:56Z",
            "html_url": "https://github.com/neovim/neovim/issues/18093#issuecomment-2570021310",
            "id": 2570021310,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/18093",
            "node_id": "IC_kwDOAPphoM6ZL2m-",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2570021310/reactions"
            },
            "updated_at": "2025-01-04T12:45:06Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2570021310",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/996134?v=4",
                "events_url": "https://api.github.com/users/Hacksore/events{/privacy}",
                "followers_url": "https://api.github.com/users/Hacksore/followers",
                "following_url": "https://api.github.com/users/Hacksore/following{/other_user}",
                "gists_url": "https://api.github.com/users/Hacksore/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Hacksore",
                "id": 996134,
                "login": "Hacksore",
                "node_id": "MDQ6VXNlcjk5NjEzNA==",
                "organizations_url": "https://api.github.com/users/Hacksore/orgs",
                "received_events_url": "https://api.github.com/users/Hacksore/received_events",
                "repos_url": "https://api.github.com/users/Hacksore/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Hacksore/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Hacksore/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Hacksore",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> nvim --headless -eS -c \"q!\"\n\nAs mentioned above you can use `-c 'exe !!v:errmsg.\"cquit\"'` for extra robustness. This will set a nonzero exit code if `v:errmsg` was set.",
            "created_at": "2025-01-04T12:45:00Z",
            "html_url": "https://github.com/neovim/neovim/issues/18093#issuecomment-2571278202",
            "id": 2571278202,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/18093",
            "node_id": "IC_kwDOAPphoM6ZQpd6",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 1,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2571278202/reactions"
            },
            "updated_at": "2025-01-04T12:45:00Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2571278202",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 7,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/18093/comments",
    "created_at": "2022-04-12T15:01:20Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/18093/events",
    "html_url": "https://github.com/neovim/neovim/issues/18093",
    "id": 1201982741,
    "labels": [
        {
            "color": "c7def8",
            "default": false,
            "description": "",
            "id": 109899557,
            "name": "vimscript",
            "node_id": "MDU6TGFiZWwxMDk4OTk1NTc=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/vimscript"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "stdlib",
            "id": 573222693,
            "name": "lua",
            "node_id": "MDU6TGFiZWw1NzMyMjI2OTM=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/lua"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "startup, shutdown, attach, detach",
            "id": 870629450,
            "name": "lifecycle",
            "node_id": "MDU6TGFiZWw4NzA2Mjk0NTA=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/lifecycle"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/18093/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 726,
        "created_at": "2014-05-10T20:43:04Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
            "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
            "followers_url": "https://api.github.com/users/justinmk/followers",
            "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/justinmk",
            "id": 1359421,
            "login": "justinmk",
            "node_id": "MDQ6VXNlcjEzNTk0MjE=",
            "organizations_url": "https://api.github.com/users/justinmk/orgs",
            "received_events_url": "https://api.github.com/users/justinmk/received_events",
            "repos_url": "https://api.github.com/users/justinmk/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/justinmk",
            "user_view_type": "public"
        },
        "description": "Low priority items. We plan to work on this but don't have a target date.",
        "due_on": null,
        "html_url": "https://github.com/neovim/neovim/milestone/6",
        "id": 655037,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/6/labels",
        "node_id": "MDk6TWlsZXN0b25lNjU1MDM3",
        "number": 6,
        "open_issues": 630,
        "state": "open",
        "title": "backlog",
        "updated_at": "2025-07-07T03:51:31Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/6"
    },
    "node_id": "I_kwDOAPphoM5HpM0V",
    "number": 18093,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/18093/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/18093/timeline",
    "title": "\"nvim -es\" : set exit code on uncaught Lua or Vimscript error",
    "type": {
        "color": "blue",
        "created_at": "2024-01-25T10:10:19Z",
        "description": "A request, idea, or new functionality",
        "id": 597167,
        "is_enabled": true,
        "name": "Enhancement",
        "node_id": "IT_kwDOAGK_Pc4ACRyv",
        "updated_at": "2024-07-26T10:12:30Z"
    },
    "updated_at": "2025-07-02T08:57:31Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/18093",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/13354331?v=4",
        "events_url": "https://api.github.com/users/xeruf/events{/privacy}",
        "followers_url": "https://api.github.com/users/xeruf/followers",
        "following_url": "https://api.github.com/users/xeruf/following{/other_user}",
        "gists_url": "https://api.github.com/users/xeruf/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/xeruf",
        "id": 13354331,
        "login": "xeruf",
        "node_id": "MDQ6VXNlcjEzMzU0MzMx",
        "organizations_url": "https://api.github.com/users/xeruf/orgs",
        "received_events_url": "https://api.github.com/users/xeruf/received_events",
        "repos_url": "https://api.github.com/users/xeruf/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/xeruf/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/xeruf/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/xeruf",
        "user_view_type": "public"
    }
}