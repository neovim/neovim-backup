{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "body": "### Problem\n\nConsider the following Python code:\n```py\ndef bar(x: int, /, y: str, *, z: float): ...\n```\n\nUse Pyright language server with `nvim-lspconfig` and you'll get that the diagnostics for unused parameter `y` and `z` are not in the correct column:\n\n<img width=\"695\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/86f62b26-5a8b-4b02-b516-65784c154083\" />\n\nWhen fetching the diagnostic information via `vim.diagnostic.get(0, {lnum = 0})`, the column numbers are:\n```\n{ {\n    col = 8,                                                                                                                                                 \n    end_col = 9,                                                                                                                                             \n    end_lnum = 0,                                                                                                                                            \n    lnum = 0,                                                                                                                                                \n    message = '\"x\" is not accessed',\n}, {\n    col = 19,                                                                                                                                                \n    end_col = 20,                                                                                                                                            \n    end_lnum = 0,                                                                                                                                            \n    lnum = 0,                                                                                                                                                \n    message = '\"y\" is not accessed',\n}, {\n    col = 30,                                                                                                                                                \n    end_col = 31,                                                                                                                                            \n    end_lnum = 0,                                                                                                                                            \n    lnum = 0,                                                                                                                                                \n    message = '\"z\" is not accessed',\n} }\n```\n\nNote: I've omitted diagnostic information which isn't useful in this context.\n\nNavigating the diagnostic does take me to the correct location. Here, I'm using the default <kbd>]d</kbd> and <kbd>[d</kbd> keybindings:\n\nhttps://github.com/user-attachments/assets/10edcbe4-2461-41a5-9ff7-5ab7de1d9f1b\n\n### Steps to reproduce\n\nUsing the following `minimal.lua`:\n```lua\n-- Run this file as `nvim --clean -u minimal.lua`\n\nfor name, url in pairs({\n\t-- ADD PLUGINS _NECESSARY_ TO REPRODUCE THE ISSUE, e.g:\n\t\"https://github.com/neovim/nvim-lspconfig\",\n}) do\n\tlocal install_path = vim.fn.fnamemodify(\"nvim_issue/\" .. name, \":p\")\n\tif vim.fn.isdirectory(install_path) == 0 then\n\t\tvim.fn.system({ \"git\", \"clone\", \"--depth=1\", url, install_path })\n\tend\n\tvim.opt.runtimepath:append(install_path)\nend\n\n-- ADD INIT.LUA SETTINGS _NECESSARY_ FOR REPRODUCING THE ISSUE\nvim.diagnostic.config({ virtual_lines = true })\n\nlocal lspconfig = require(\"lspconfig\")\nlspconfig.pyright.setup({})\n```\n\nAnd, the following `t.py` content:\n```python\ndef bar(x: int, /, y: str, *, z: float): ...\n```\n\nOpen using `nvim --clean -u minimal.lua t.py`\n\n### Expected behavior\n\nExpected the rendering at the correct location.\n\n### Nvim version (nvim -v)\n\nNVIM v0.11.0-dev-1887+gb45a44dd3\n\n### Vim (not Nvim) behaves the same?\n\nno\n\n### Operating system/version\n\nmacOS 15.2\n\n### Terminal name/version\n\nkitty 0.39.1\n\n### $TERM environment variable\n\nxterm-kitty\n\n### Installation\n\nbuilt from source",
    "closed_at": "2025-03-04T14:59:39Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/8965202?v=4",
        "events_url": "https://api.github.com/users/gpanders/events{/privacy}",
        "followers_url": "https://api.github.com/users/gpanders/followers",
        "following_url": "https://api.github.com/users/gpanders/following{/other_user}",
        "gists_url": "https://api.github.com/users/gpanders/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/gpanders",
        "id": 8965202,
        "login": "gpanders",
        "node_id": "MDQ6VXNlcjg5NjUyMDI=",
        "organizations_url": "https://api.github.com/users/gpanders/orgs",
        "received_events_url": "https://api.github.com/users/gpanders/received_events",
        "repos_url": "https://api.github.com/users/gpanders/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/gpanders/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/gpanders/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/gpanders",
        "user_view_type": "public"
    },
    "comment_data": [
        {
            "author_association": "CONTRIBUTOR",
            "body": "I can reproduce this and yeah looks like the server is sending the correct col numbers.\nI can try to take a look tonight.",
            "created_at": "2025-03-02T19:11:38Z",
            "html_url": "https://github.com/neovim/neovim/issues/32694#issuecomment-2692864201",
            "id": 2692864201,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32694",
            "node_id": "IC_kwDOAPphoM6ggdjJ",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 3,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 3,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2692864201/reactions"
            },
            "updated_at": "2025-03-02T19:11:38Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2692864201",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/66286082?v=4",
                "events_url": "https://api.github.com/users/jamestrew/events{/privacy}",
                "followers_url": "https://api.github.com/users/jamestrew/followers",
                "following_url": "https://api.github.com/users/jamestrew/following{/other_user}",
                "gists_url": "https://api.github.com/users/jamestrew/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/jamestrew",
                "id": 66286082,
                "login": "jamestrew",
                "node_id": "MDQ6VXNlcjY2Mjg2MDgy",
                "organizations_url": "https://api.github.com/users/jamestrew/orgs",
                "received_events_url": "https://api.github.com/users/jamestrew/received_events",
                "repos_url": "https://api.github.com/users/jamestrew/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/jamestrew/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jamestrew/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/jamestrew",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 1,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/32694/comments",
    "created_at": "2025-03-02T10:20:37Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/32694/events",
    "html_url": "https://github.com/neovim/neovim/issues/32694",
    "id": 2889459097,
    "labels": [
        {
            "color": "BFDADC",
            "default": false,
            "description": "Low-risk, self-contained. Do NOT ask \"can I work on this\", just read CONTRIBUTING.md",
            "id": 407246773,
            "name": "complexity:low",
            "node_id": "MDU6TGFiZWw0MDcyNDY3NzM=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/complexity:low"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": null,
            "id": 662566370,
            "name": "lsp",
            "node_id": "MDU6TGFiZWw2NjI1NjYzNzA=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/lsp"
        },
        {
            "color": "C5DEF5",
            "default": false,
            "description": "",
            "id": 3361645105,
            "name": "diagnostic",
            "node_id": "MDU6TGFiZWwzMzYxNjQ1MTA1",
            "url": "https://api.github.com/repos/neovim/neovim/labels/diagnostic"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/32694/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM6sOaWZ",
    "number": 32694,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/32694/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "completed",
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/32694/timeline",
    "title": "Virtual line diagnostics are highlighting incorrect column",
    "updated_at": "2025-03-04T14:59:39Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/32694",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/67177269?v=4",
        "events_url": "https://api.github.com/users/dhruvmanila/events{/privacy}",
        "followers_url": "https://api.github.com/users/dhruvmanila/followers",
        "following_url": "https://api.github.com/users/dhruvmanila/following{/other_user}",
        "gists_url": "https://api.github.com/users/dhruvmanila/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/dhruvmanila",
        "id": 67177269,
        "login": "dhruvmanila",
        "node_id": "MDQ6VXNlcjY3MTc3MjY5",
        "organizations_url": "https://api.github.com/users/dhruvmanila/orgs",
        "received_events_url": "https://api.github.com/users/dhruvmanila/received_events",
        "repos_url": "https://api.github.com/users/dhruvmanila/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/dhruvmanila/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/dhruvmanila/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/dhruvmanila",
        "user_view_type": "public"
    }
}