{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "body": "### Feature already in Vim?\n\nN/A\n\n### Feature description\n\nRight now, the only option for injections is the ability to override the \"injections\" queries for each language\r\n\r\nhttps://github.com/neovim/neovim/blob/1062ea2cc532b32862346a1972073f1a8dd6d19d/runtime/lua/vim/treesitter/languagetree.lua#L15\r\n\r\nI think it would be useful to pass a list of allowed injected languages. For example, on a markdown file, only a subset of languages would be allowed, or even don't allow any language to be injected. Right now, users are just uninstalling parsers of languages they don't want to have injected, but that removes the ability to parse that language.\r\n\r\nI'm opening this issue to come with suggestions on how this setting will work.\r\n\r\nMaybe a table of languages to a table of options?\r\n\r\n```lua\r\n  local opts.injections = {\r\n    lua = {\r\n      -- Injection query to override the global one.\r\n      query = \"...\",\r\n      -- Injections aren't allowed.\r\n      -- This option can be a boolean to enable or disable\r\n      -- injections of all languages, or a list.\r\n      -- If \"enable\" and \"disable\" are empty lists it means\r\n      -- enable = true.\r\n      enable = false,\r\n    },\r\n    markdown = {\r\n      query = \"...\",\r\n      -- Only a subset of languages are allowed.\r\n      enable = {\"javascript\", \"lua\"},\r\n      -- If both \"enable\" and \"disable\" are given,\r\n      -- the former takes precedence, and disable is ignored.\r\n      disable = {}\r\n    },\r\n    rst = {\r\n      -- All languages except for these are allowed.\r\n      disable = {\"javascript\", \"lua\"},\r\n    }\r\n  }\r\n```\r\n\r\nTo keep backwards compatibility (but not really sure if people are using this option, or at least in plugins form nvim-treesitter we aren't  AFIK), if the value of the option is a string it will be transformed to a table.",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [],
    "comments": 0,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/16737/comments",
    "created_at": "2021-12-21T01:31:28Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/16737/events",
    "html_url": "https://github.com/neovim/neovim/issues/16737",
    "id": 1085347387,
    "labels": [
        {
            "color": "c2e0c6",
            "default": true,
            "description": "feature request",
            "id": 77997476,
            "name": "enhancement",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3Ng==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/enhancement"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "",
            "id": 1799626557,
            "name": "treesitter",
            "node_id": "MDU6TGFiZWwxNzk5NjI2NTU3",
            "url": "https://api.github.com/repos/neovim/neovim/labels/treesitter"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/16737/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM5AsRY7",
    "number": 16737,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/16737/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/16737/timeline",
    "title": "Treesitter: More control over injected languages",
    "updated_at": "2025-01-17T15:59:33Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/16737",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/4975310?v=4",
        "events_url": "https://api.github.com/users/stsewd/events{/privacy}",
        "followers_url": "https://api.github.com/users/stsewd/followers",
        "following_url": "https://api.github.com/users/stsewd/following{/other_user}",
        "gists_url": "https://api.github.com/users/stsewd/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/stsewd",
        "id": 4975310,
        "login": "stsewd",
        "node_id": "MDQ6VXNlcjQ5NzUzMTA=",
        "organizations_url": "https://api.github.com/users/stsewd/orgs",
        "received_events_url": "https://api.github.com/users/stsewd/received_events",
        "repos_url": "https://api.github.com/users/stsewd/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/stsewd/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/stsewd/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/stsewd",
        "user_view_type": "public"
    }
}