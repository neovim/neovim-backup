{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "body": "### Neovim version (nvim -v)\r\n\r\nv0.6.0-dev+516-g4a618b00b\r\n\r\n### Vim (not Nvim) behaves the same?\r\n\r\nN/A\r\n\r\n### Operating system/version\r\n\r\nArch Linux\r\n\r\n### Terminal name/version\r\n\r\nkitty 0.23.1\r\n\r\n### $TERM environment variable\r\n\r\nxterm-kitty\r\n\r\n### Installation\r\n\r\nbuild from repo\r\n\r\n### How to reproduce the issue\r\n\r\n```\r\nnvim --clean\r\n\r\nithis is a line<Esc>\r\n\r\n:lua vim.api.nvim_buf_set_extmark(0, vim.api.nvim_create_namespace(\"vline\"), 0, 0, { virt_lines={{{\"Virt Line\", \"Comment\"}}}, virt_lines_above=true })\r\n```\r\n\r\n### Expected behavior\r\n\r\nVirtual line with the text \"Virt Line\" shows above the first line.\r\n\r\n### Actual behavior\r\n\r\nVirtual line isn't present. With virt_lines_above = false, everything works as expected.",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "<https://github.com/neovim/neovim/pull/15351#issuecomment-902107285>\r\n\r\nCurrently you need to scroll up with `CTRL-B` to show them. Will this be changed in future?",
            "created_at": "2021-10-28T23:38:56Z",
            "html_url": "https://github.com/neovim/neovim/issues/16166#issuecomment-954300539",
            "id": 954300539,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/16166",
            "node_id": "IC_kwDOAPphoM444Xh7",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/954300539/reactions"
            },
            "updated_at": "2021-10-28T23:56:07Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/954300539",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Currently there isn't an API to scroll window easily. (#11370)",
            "created_at": "2021-10-28T23:42:39Z",
            "html_url": "https://github.com/neovim/neovim/issues/16166#issuecomment-954301741",
            "id": 954301741,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/16166",
            "node_id": "IC_kwDOAPphoM444X0t",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/954301741/reactions"
            },
            "updated_at": "2021-10-28T23:42:39Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/954301741",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I don't think it should scroll automatically but there should be an extended API interface for scrolling which is fully aware of filler/virtual lines as well as skipcol.",
            "created_at": "2021-10-29T11:17:46Z",
            "html_url": "https://github.com/neovim/neovim/issues/16166#issuecomment-954661371",
            "id": 954661371,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/16166",
            "node_id": "IC_kwDOAPphoM445vn7",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/954661371/reactions"
            },
            "updated_at": "2021-10-29T11:18:01Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/954661371",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
                "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
                "followers_url": "https://api.github.com/users/bfredl/followers",
                "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
                "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bfredl",
                "id": 1363104,
                "login": "bfredl",
                "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
                "organizations_url": "https://api.github.com/users/bfredl/orgs",
                "received_events_url": "https://api.github.com/users/bfredl/received_events",
                "repos_url": "https://api.github.com/users/bfredl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bfredl",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Why do you think it shouldn't scroll automatically? Isn't this the same as \"the line should be invisible by default\", even though it just got added by an API call? It's also not that easy to make the line visible -- you can't do it with normal cursor motion commands, or the mouse wheel -- you _need_ to use something like `<C-b>`.",
            "created_at": "2022-05-23T05:05:42Z",
            "html_url": "https://github.com/neovim/neovim/issues/16166#issuecomment-1134184811",
            "id": 1134184811,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/16166",
            "node_id": "IC_kwDOAPphoM5Dmklr",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1134184811/reactions"
            },
            "updated_at": "2022-05-23T05:05:42Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1134184811",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/5308024?v=4",
                "events_url": "https://api.github.com/users/andmis/events{/privacy}",
                "followers_url": "https://api.github.com/users/andmis/followers",
                "following_url": "https://api.github.com/users/andmis/following{/other_user}",
                "gists_url": "https://api.github.com/users/andmis/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/andmis",
                "id": 5308024,
                "login": "andmis",
                "node_id": "MDQ6VXNlcjUzMDgwMjQ=",
                "organizations_url": "https://api.github.com/users/andmis/orgs",
                "received_events_url": "https://api.github.com/users/andmis/received_events",
                "repos_url": "https://api.github.com/users/andmis/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/andmis/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/andmis/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/andmis",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": ">  Isn't this the same as \"the line should be invisible by default\", even though it just got added by an API call? \r\n\r\nNo.\r\n\r\n>   you can't do it with normal cursor motion commands, or the mouse wheel -- you need to use something like <C-b>.\r\n\r\nRead the above discussion. an extended scroll API is needed.",
            "created_at": "2022-05-23T10:29:26Z",
            "html_url": "https://github.com/neovim/neovim/issues/16166#issuecomment-1134499114",
            "id": 1134499114,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/16166",
            "node_id": "IC_kwDOAPphoM5DnxUq",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1134499114/reactions"
            },
            "updated_at": "2022-05-23T10:29:26Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1134499114",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
                "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
                "followers_url": "https://api.github.com/users/bfredl/followers",
                "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
                "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bfredl",
                "id": 1363104,
                "login": "bfredl",
                "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
                "organizations_url": "https://api.github.com/users/bfredl/orgs",
                "received_events_url": "https://api.github.com/users/bfredl/received_events",
                "repos_url": "https://api.github.com/users/bfredl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bfredl",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> Read the above discussion. an extended scroll API is needed.\r\n\r\nI would at least expect `<C-u>` ~(and maybe even `gg`)~ to scroll up to the virtual lines. How would an API resolve that?",
            "created_at": "2022-05-23T10:48:45Z",
            "html_url": "https://github.com/neovim/neovim/issues/16166#issuecomment-1134516397",
            "id": 1134516397,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/16166",
            "node_id": "IC_kwDOAPphoM5Dn1it",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1134516397/reactions"
            },
            "updated_at": "2022-05-23T10:52:28Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1134516397",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/7904185?v=4",
                "events_url": "https://api.github.com/users/lewis6991/events{/privacy}",
                "followers_url": "https://api.github.com/users/lewis6991/followers",
                "following_url": "https://api.github.com/users/lewis6991/following{/other_user}",
                "gists_url": "https://api.github.com/users/lewis6991/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/lewis6991",
                "id": 7904185,
                "login": "lewis6991",
                "node_id": "MDQ6VXNlcjc5MDQxODU=",
                "organizations_url": "https://api.github.com/users/lewis6991/orgs",
                "received_events_url": "https://api.github.com/users/lewis6991/received_events",
                "repos_url": "https://api.github.com/users/lewis6991/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/lewis6991/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lewis6991/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/lewis6991",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> I would at least expect <C-u> (and maybe even gg) to scroll up to the virtual lines. How would an API resolve that?\r\n\r\nThe API would resolve what people was asking for in the above discussion, not some different issue which was not reported yet. Is this somehow unclear? ",
            "created_at": "2022-05-23T12:12:53Z",
            "html_url": "https://github.com/neovim/neovim/issues/16166#issuecomment-1134595790",
            "id": 1134595790,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/16166",
            "node_id": "IC_kwDOAPphoM5DoI7O",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1134595790/reactions"
            },
            "updated_at": "2022-05-23T12:12:53Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1134595790",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
                "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
                "followers_url": "https://api.github.com/users/bfredl/followers",
                "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
                "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bfredl",
                "id": 1363104,
                "login": "bfredl",
                "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
                "organizations_url": "https://api.github.com/users/bfredl/orgs",
                "received_events_url": "https://api.github.com/users/bfredl/received_events",
                "repos_url": "https://api.github.com/users/bfredl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bfredl",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> The API would resolve what people was asking for in the above discussion, not some different issue which was not reported yet.\r\n\r\nzeer simply mentioned there is no API currently. The original issue is that `virt_lines` with `virt_lines_above` do not show on row `0` without pressing `<C-b>` (or `<C-y>`). Your response implies this is resolved with an API which is what I am questioning. So yes, this isn't exactly clear.",
            "created_at": "2022-05-23T12:20:13Z",
            "html_url": "https://github.com/neovim/neovim/issues/16166#issuecomment-1134604284",
            "id": 1134604284,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/16166",
            "node_id": "IC_kwDOAPphoM5DoK_8",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1134604284/reactions"
            },
            "updated_at": "2022-05-23T12:32:01Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1134604284",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/7904185?v=4",
                "events_url": "https://api.github.com/users/lewis6991/events{/privacy}",
                "followers_url": "https://api.github.com/users/lewis6991/followers",
                "following_url": "https://api.github.com/users/lewis6991/following{/other_user}",
                "gists_url": "https://api.github.com/users/lewis6991/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/lewis6991",
                "id": 7904185,
                "login": "lewis6991",
                "node_id": "MDQ6VXNlcjc5MDQxODU=",
                "organizations_url": "https://api.github.com/users/lewis6991/orgs",
                "received_events_url": "https://api.github.com/users/lewis6991/received_events",
                "repos_url": "https://api.github.com/users/lewis6991/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/lewis6991/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lewis6991/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/lewis6991",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "A few more remarks (not relevant to the API discussion, but to the original UX issue):\r\n- `zt`, `zb`, `zz` don't work to make the line added by the original repro steps appear.\r\n- `:set scrolloff=1` has no effect, and IMO it should make the line appear by forcing the cursor to be 1 row down from the top of the screen since that's possible to do.\r\n- For me none of `<C-[bfdu]>` work, either.\r\n- Actually the only way I can get the virtual line to show up on screen is `<C-y>`.",
            "created_at": "2022-05-23T12:30:29Z",
            "html_url": "https://github.com/neovim/neovim/issues/16166#issuecomment-1134614983",
            "id": 1134614983,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/16166",
            "node_id": "IC_kwDOAPphoM5DoNnH",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1134614983/reactions"
            },
            "updated_at": "2022-05-23T12:30:29Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1134614983",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/5308024?v=4",
                "events_url": "https://api.github.com/users/andmis/events{/privacy}",
                "followers_url": "https://api.github.com/users/andmis/followers",
                "following_url": "https://api.github.com/users/andmis/following{/other_user}",
                "gists_url": "https://api.github.com/users/andmis/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/andmis",
                "id": 5308024,
                "login": "andmis",
                "node_id": "MDQ6VXNlcjUzMDgwMjQ=",
                "organizations_url": "https://api.github.com/users/andmis/orgs",
                "received_events_url": "https://api.github.com/users/andmis/received_events",
                "repos_url": "https://api.github.com/users/andmis/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/andmis/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/andmis/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/andmis",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Actually you can currently achieve this using `winrestview()` (change `1` to the number of virtual lines):\r\n```vim\r\ncall winrestview({ 'topfill': 1 })\r\n```\r\nor\r\n```lua\r\nvim.fn.winrestview({ topfill = 1 })\r\n```",
            "created_at": "2022-05-23T12:48:15Z",
            "html_url": "https://github.com/neovim/neovim/issues/16166#issuecomment-1134634112",
            "id": 1134634112,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/16166",
            "node_id": "IC_kwDOAPphoM5DoSSA",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1134634112/reactions"
            },
            "updated_at": "2022-05-23T12:56:53Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1134634112",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> . The original issue is that virt_lines with virt_lines_above do not show on row 0 without pressing <C-b> (or <C-y>). Your response implies this is resolved with an API which is what I am questioning.\r\n\r\nFalse. The claim I responded to was that displaying the virt_lines (which is done by API) should scroll **automatically**. I was against this, as this could be done by a second explicit API call (which is yet to be implemented, but I could do so) from the same source.\r\n\r\nSo far only examples of *working* normal commands was mentioned (in direct contradiction to the claim that none such existed), so I didn't know normal mode was considered broken.  if you want `<c-u>` specifically to be changed, that is something we can do, I just found it confusing to intertwine that with the separate problem of fixing the API.",
            "created_at": "2022-05-23T12:52:44Z",
            "html_url": "https://github.com/neovim/neovim/issues/16166#issuecomment-1134639181",
            "id": 1134639181,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/16166",
            "node_id": "IC_kwDOAPphoM5DoThN",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1134639181/reactions"
            },
            "updated_at": "2022-05-23T12:52:44Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1134639181",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
                "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
                "followers_url": "https://api.github.com/users/bfredl/followers",
                "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
                "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bfredl",
                "id": 1363104,
                "login": "bfredl",
                "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
                "organizations_url": "https://api.github.com/users/bfredl/orgs",
                "received_events_url": "https://api.github.com/users/bfredl/received_events",
                "repos_url": "https://api.github.com/users/bfredl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bfredl",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Maybe the code implementing the API call to insert the line should not include logic to scroll the screen to show the line (just like the code to insert text does not scroll the screen, I guess this is your point), but the line inserted in the repro steps in the original issue should still appear automatically from the user's perspective (just like a line inserted into a single-line file with `nvim_set_text` would appear automatically).",
            "created_at": "2022-05-23T12:56:48Z",
            "html_url": "https://github.com/neovim/neovim/issues/16166#issuecomment-1134643278",
            "id": 1134643278,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/16166",
            "node_id": "IC_kwDOAPphoM5DoUhO",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1134643278/reactions"
            },
            "updated_at": "2022-05-23T12:56:48Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1134643278",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/5308024?v=4",
                "events_url": "https://api.github.com/users/andmis/events{/privacy}",
                "followers_url": "https://api.github.com/users/andmis/followers",
                "following_url": "https://api.github.com/users/andmis/following{/other_user}",
                "gists_url": "https://api.github.com/users/andmis/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/andmis",
                "id": 5308024,
                "login": "andmis",
                "node_id": "MDQ6VXNlcjUzMDgwMjQ=",
                "organizations_url": "https://api.github.com/users/andmis/orgs",
                "received_events_url": "https://api.github.com/users/andmis/received_events",
                "repos_url": "https://api.github.com/users/andmis/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/andmis/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/andmis/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/andmis",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "@andmis hmm that would make sense. actually the behavior of `nvim_buf_set_lines` is a bit strange, sometimes it scrolls up even if that doesn't help the added top line to be displayed.. But both could be changed to display an new topline precisely when (1) the window currently displays the topline and (2) there are unused EOB lines at the bottom.",
            "created_at": "2022-05-23T13:03:28Z",
            "html_url": "https://github.com/neovim/neovim/issues/16166#issuecomment-1134650458",
            "id": 1134650458,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/16166",
            "node_id": "IC_kwDOAPphoM5DoWRa",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1134650458/reactions"
            },
            "updated_at": "2022-05-23T13:04:22Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1134650458",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
                "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
                "followers_url": "https://api.github.com/users/bfredl/followers",
                "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
                "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bfredl",
                "id": 1363104,
                "login": "bfredl",
                "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
                "organizations_url": "https://api.github.com/users/bfredl/orgs",
                "received_events_url": "https://api.github.com/users/bfredl/received_events",
                "repos_url": "https://api.github.com/users/bfredl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bfredl",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> > you can't do it with normal cursor motion commands, or the mouse wheel -- you need to use something like .\r\n> \r\n> Read the above discussion. an extended scroll API is needed.\r\n\r\nThis is what threw me off. @andmis explicitly mentioned that normal motion commands do not show the virt lines, and you responded that an API is needed. This has little to do with your responses about scrolling automatically.\r\n",
            "created_at": "2022-05-23T13:03:34Z",
            "html_url": "https://github.com/neovim/neovim/issues/16166#issuecomment-1134650562",
            "id": 1134650562,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/16166",
            "node_id": "IC_kwDOAPphoM5DoWTC",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1134650562/reactions"
            },
            "updated_at": "2022-05-23T13:03:34Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1134650562",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/7904185?v=4",
                "events_url": "https://api.github.com/users/lewis6991/events{/privacy}",
                "followers_url": "https://api.github.com/users/lewis6991/followers",
                "following_url": "https://api.github.com/users/lewis6991/following{/other_user}",
                "gists_url": "https://api.github.com/users/lewis6991/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/lewis6991",
                "id": 7904185,
                "login": "lewis6991",
                "node_id": "MDQ6VXNlcjc5MDQxODU=",
                "organizations_url": "https://api.github.com/users/lewis6991/orgs",
                "received_events_url": "https://api.github.com/users/lewis6991/received_events",
                "repos_url": "https://api.github.com/users/lewis6991/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/lewis6991/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lewis6991/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/lewis6991",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Proposed summary:\r\n- The API call to add virtual lines should not explicitly scroll the screen.\r\n- There should be an API for explicitly scrolling the screen, although that would not (by itself) resolve the original UX problem in this GH issue.\r\n- When virtual lines are added, the screen should recalculate its scroll position (just as when buffer lines are added).\r\n- Settings like `scrolloff` need to be virtual-line-aware.\r\n- The default scroll position should include virtual lines above the first buffer line\r\n  > when (1) the window currently displays the topline and (2) there are unused EOB lines at the bottom.",
            "created_at": "2022-05-23T13:07:55Z",
            "html_url": "https://github.com/neovim/neovim/issues/16166#issuecomment-1134656673",
            "id": 1134656673,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/16166",
            "node_id": "IC_kwDOAPphoM5DoXyh",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 5,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 5,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1134656673/reactions"
            },
            "updated_at": "2022-05-23T13:07:55Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1134656673",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/5308024?v=4",
                "events_url": "https://api.github.com/users/andmis/events{/privacy}",
                "followers_url": "https://api.github.com/users/andmis/followers",
                "following_url": "https://api.github.com/users/andmis/following{/other_user}",
                "gists_url": "https://api.github.com/users/andmis/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/andmis",
                "id": 5308024,
                "login": "andmis",
                "node_id": "MDQ6VXNlcjUzMDgwMjQ=",
                "organizations_url": "https://api.github.com/users/andmis/orgs",
                "received_events_url": "https://api.github.com/users/andmis/received_events",
                "repos_url": "https://api.github.com/users/andmis/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/andmis/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/andmis/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/andmis",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 15,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/16166/comments",
    "created_at": "2021-10-28T23:19:38Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/16166/events",
    "html_url": "https://github.com/neovim/neovim/issues/16166",
    "id": 1039028016,
    "labels": [
        {
            "color": "c2e0c6",
            "default": true,
            "description": "feature request",
            "id": 77997476,
            "name": "enhancement",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3Ng==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/enhancement"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "libnvim, Nvim RPC API",
            "id": 103819671,
            "name": "api",
            "node_id": "MDU6TGFiZWwxMDM4MTk2NzE=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/api"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "",
            "id": 113026979,
            "name": "ui",
            "node_id": "MDU6TGFiZWwxMTMwMjY5Nzk=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/ui"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "marks, extmarks, decorations, virtual text, namespaces",
            "id": 1680119719,
            "name": "marks",
            "node_id": "MDU6TGFiZWwxNjgwMTE5NzE5",
            "url": "https://api.github.com/repos/neovim/neovim/labels/marks"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/16166/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 686,
        "created_at": "2014-05-10T20:43:04Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
            "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
            "followers_url": "https://api.github.com/users/justinmk/followers",
            "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/justinmk",
            "id": 1359421,
            "login": "justinmk",
            "node_id": "MDQ6VXNlcjEzNTk0MjE=",
            "organizations_url": "https://api.github.com/users/justinmk/orgs",
            "received_events_url": "https://api.github.com/users/justinmk/received_events",
            "repos_url": "https://api.github.com/users/justinmk/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/justinmk",
            "user_view_type": "public"
        },
        "description": "Low priority items. We plan to work on this but don't have a target date.",
        "due_on": null,
        "html_url": "https://github.com/neovim/neovim/milestone/6",
        "id": 655037,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/6/labels",
        "node_id": "MDk6TWlsZXN0b25lNjU1MDM3",
        "number": 6,
        "open_issues": 635,
        "state": "open",
        "title": "backlog",
        "updated_at": "2025-01-21T00:09:37Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/6"
    },
    "node_id": "I_kwDOAPphoM497k8w",
    "number": 16166,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 6,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 6,
        "url": "https://api.github.com/repos/neovim/neovim/issues/16166/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/16166/timeline",
    "title": "API: control virt_lines_above, viewport, screen lines, scroll",
    "updated_at": "2025-01-17T15:59:29Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/16166",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/37233846?v=4",
        "events_url": "https://api.github.com/users/simrat39/events{/privacy}",
        "followers_url": "https://api.github.com/users/simrat39/followers",
        "following_url": "https://api.github.com/users/simrat39/following{/other_user}",
        "gists_url": "https://api.github.com/users/simrat39/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/simrat39",
        "id": 37233846,
        "login": "simrat39",
        "node_id": "MDQ6VXNlcjM3MjMzODQ2",
        "organizations_url": "https://api.github.com/users/simrat39/orgs",
        "received_events_url": "https://api.github.com/users/simrat39/received_events",
        "repos_url": "https://api.github.com/users/simrat39/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/simrat39/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/simrat39/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/simrat39",
        "user_view_type": "public"
    }
}