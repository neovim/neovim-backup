{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "\r\n<details>\r\n<summary>old info</summary>\r\n\r\n### Neovim version (nvim -v)\r\n\r\nNVIM v0.8.0-v0.8.0 Build type: RelWithDebInfo\r\n\r\n### Vim (not Nvim) behaves the same?\r\n\r\nNo\r\n\r\n### Operating system/version\r\n\r\nLinux Mint 21 Vanessa 64-bit\r\n\r\n### Terminal name/version\r\n\r\nmate-terminal\r\n\r\n### $TERM environment variable\r\n\r\nxterm-256color\r\n\r\n### Installation\r\n\r\nFrom the debian package in the Releases page and from build\r\n</details>\r\n\r\n### How to reproduce the issue\r\n\r\nWhen I open a file (for example `a.txt`), nvim displays this error at start (see `:help E303`):\r\n\r\n> E303: Unable to open swap file for \"a.txt\", recovery impossible\r\n\r\n**Update:** see https://github.com/neovim/neovim/issues/20749#issuecomment-1294766896\r\n\r\n\r\n<details>\r\n<summary>old info</summary>\r\n\r\nTo check the reason of this issue, I used this command:\r\n\r\n```\r\nnvim --clean -u NONE -Vmessages.txt a.txt\r\n```\r\n\r\nI will not paste the whole content of `messages.txt` but here are some suspicious lines (sometimes translated by myself here because I did not manage to launch nvim in English):\r\n\r\n```\r\nchdir(/usr/local/share/nvim/runtime)\r\n\r\nnot found in runtime path: \"ftdetect/*.vim\"\r\nnot found in runtime path: \"ftdetect/*.lua\"\r\n\r\n\r\nchdir(/usr/local/share/nvim/runtime/plugin)\r\n\r\nend of sourcing of /usr/local/share/nvim/runtime/plugin/man.lua\r\nnot found in 'packpath' : \"pack/*/start/*\"\r\nnot found in 'packpath' : \"start/*\"\r\nnot found in runtime path: \"plugin/**/*.vim\"\r\nnot found in runtime path: \"plugin/**/*.lua\"\r\n                                            E303: Unable to open swap file for \"a.txt\", recovery impossible\r\n\r\nnot found in runtime path: \"indent/text.vim\"\r\nnot found in runtime path: \"indent/text.lua\"\r\n\r\nsourcing \"/usr/local/share/nvim/runtime/plugin/matchit.vim\"\r\nnot found in 'packpath' : \"pack/*/start/matchit\"\r\n```\r\n\r\nHere are where nvim configuration is installed:\r\n\r\n```\r\n$ sudo find /usr /etc /var -name nvim\r\n/usr/local/share/nvim\r\n/usr/local/lib/nvim\r\n/usr/local/bin/nvim\r\n```\r\n\r\nLet's see for example `matchit.vim`. Here is where it can be found:\r\n\r\n```\r\n$ sudo find /usr/local/share/nvim/runtime -name matchit.vim \r\n/usr/local/share/nvim/runtime/pack/dist/opt/matchit/autoload/matchit.vim\r\n/usr/local/share/nvim/runtime/pack/dist/opt/matchit/plugin/matchit.vim\r\n/usr/local/share/nvim/runtime/macros/matchit.vim\r\n/usr/local/share/nvim/runtime/plugin/matchit.vim\r\n```\r\n\r\nI have no clues why this `E303` error happens nor why some runtime files cannot be found. Some runtime files are found, for a proof I wrote this issue in a Mardown file and the filetype is correctly detected.\r\n\r\nThis issue happens if I try to open a new file or an already existing file.\r\n\r\n### Expected behavior\r\n\r\nNot displaying a `E303` error message.\r\n\r\n### Actual behavior\r\n\r\nSee above.\r\n</details>",
    "closed_at": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "    not found in 'packpath' : \"pack/*/start/*\"\r\n\r\nThese are harmless info messages when you run in verbose mode.\r\n\r\nRegarding E303: just delete the swapfile.",
            "created_at": "2022-10-24T12:01:19Z",
            "html_url": "https://github.com/neovim/neovim/issues/20749#issuecomment-1288928572",
            "id": 1288928572,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/20749",
            "node_id": "IC_kwDOAPphoM5M0308",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1288928572/reactions"
            },
            "updated_at": "2024-02-20T11:21:51Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1288928572",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "author_association": "NONE",
            "body": "As said:\r\n\r\n> This issue happens if I try to open a new file or an already existing file.\r\n\r\nSo there were no swapfiles. It happened whenever I launched the software.\r\n\r\nI will open an issue with a better bug report if I still have this issue when I install the version v8.0.0. Thanks for the reply anyway.",
            "created_at": "2022-10-25T18:16:03Z",
            "html_url": "https://github.com/neovim/neovim/issues/20749#issuecomment-1290962922",
            "id": 1290962922,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/20749",
            "node_id": "IC_kwDOAPphoM5M8ofq",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1290962922/reactions"
            },
            "updated_at": "2024-02-20T11:05:25Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1290962922",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/102611190?v=4",
                "events_url": "https://api.github.com/users/Nales0/events{/privacy}",
                "followers_url": "https://api.github.com/users/Nales0/followers",
                "following_url": "https://api.github.com/users/Nales0/following{/other_user}",
                "gists_url": "https://api.github.com/users/Nales0/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Nales0",
                "id": 102611190,
                "login": "Nales0",
                "node_id": "U_kgDOBh249g",
                "organizations_url": "https://api.github.com/users/Nales0/orgs",
                "received_events_url": "https://api.github.com/users/Nales0/received_events",
                "repos_url": "https://api.github.com/users/Nales0/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Nales0/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Nales0/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Nales0"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I just observed this in oldtests in TSan CI job:\r\n```\r\nFailures: \r\n\tFrom test_cd.vim:\r\n\tFound errors in Test_cd_unknown_dir():\r\n\tCaught exception in Test_cd_unknown_dir(): Vim(edit):E303: Unable to open swap file for \"Xa/Xb.txt\", recovery impossible @ command line..script /home/runner/work/neovim/neovim/src/nvim/testdir/runtest.vim[433]..function RunTheTest[40]..Test_cd_unknown_dir, line 4\r\n\tFrom test_cmdline.vim:\r\n\tFound errors in Test_cmdline_expand_cur_alt_file():\r\n\tCaught exception in Test_cmdline_expand_cur_alt_file(): Vim(file):E303: Unable to open swap file for \"http://some.com/file.txt\", recovery impossible @ command line..script /home/runner/work/neovim/neovim/src/nvim/testdir/runtest.vim[433]..function RunTheTest[40]..Test_cmdline_expand_cur_alt_file, line 2\r\n\tFrom test_gf.vim:\r\n\tFound errors in Test_gf_url():\r\n\tCaught exception in Test_gf_url(): Vim(wincmd):E303: Unable to open swap file for \"demo://remote_file\", recovery impossible @ command line..script /home/runner/work/neovim/neovim/src/nvim/testdir/runtest.vim[433]..function RunTheTest[40]..Test_gf_url, line 35\r\n\tFrom test_mksession.vim:\r\n\tFound errors in Test_mksession_slash():\r\n\tCaught exception in Test_mksession_slash(): Vim(edit):E303: Unable to open swap file for \"a/b/c\", recovery impossible @ command line..script /home/runner/work/neovim/neovim/src/nvim/testdir/runtest.vim[433]..function RunTheTest[40]..Test_mksession_slash[12]..script /home/runner/work/neovim/neovim/src/nvim/testdir/Xtest_mks1.out, line 56\r\n\tFrom test_alot.vim:\r\n\tFound errors in Test_with_directories():\r\n\tCaught exception in Test_with_directories(): Vim(next):E303: Unable to open swap file for \"Xdir?/*/nofile\", recovery impossible @ command line..script /home/runner/work/neovim/neovim/src/nvim/testdir/runtest.vim[433]..function RunTheTest[40]..Test_with_directories, line 17\r\n```\r\n\r\nWhen I made these changes to the test suite:\r\n```diff\r\ndiff --git a/src/nvim/testdir/Makefile b/src/nvim/testdir/Makefile\r\nindex a6d1cf100..1157fa581 100644\r\n--- a/src/nvim/testdir/Makefile\r\n+++ b/src/nvim/testdir/Makefile\r\n@@ -179,4 +179,4 @@ newtestssilent: $(NEW_TESTS_RES)\r\n \t@echo \"[OLDTEST] Running\" $*\r\n \t@rm -rf $*.failed test.ok $(RM_ON_RUN)\r\n \t@mkdir -p $(TMPDIR)\r\n-\t@/bin/sh runnvim.sh $(ROOT) $(NVIM_PRG) $* $(RUN_VIMTEST) $(NO_INITS) -u NONE --cmd \"set shortmess-=F\" -S runtest.vim $*.vim\r\n+\t@/bin/sh runnvim.sh $(ROOT) $(NVIM_PRG) $* $(RUN_VIMTEST) $(NO_INITS) -u NONE --cmd \"source setup.vim\" -S runtest.vim $*.vim\r\ndiff --git a/src/nvim/testdir/setup.vim b/src/nvim/testdir/setup.vim\r\nindex f89528746..fe949ab5d 100644\r\n--- a/src/nvim/testdir/setup.vim\r\n+++ b/src/nvim/testdir/setup.vim\r\n@@ -1,4 +1,6 @@\r\n-if exists('s:did_load')\r\n+let pre_cmd = expand('<stack>') =~# '^pre-vimrc command line'\r\n+\r\n+if pre_cmd || exists('s:did_load')\r\n   \" Align Nvim defaults to Vim.\r\n   set backspace=\r\n   set complete=.,w,b,u,t,i\r\n@@ -31,6 +33,10 @@ if exists('s:did_load')\r\n   nnoremap Q gQ\r\n endif\r\n \r\n+if pre_cmd\r\n+  finish\r\n+endif\r\n+\r\n \" Common preparations for running tests.\r\n \r\n \" Only load this once.\r\n```\r\n\r\nhttps://github.com/neovim/neovim/actions/runs/3330361510/jobs/5508748000\r\n\r\nThe error doesn't appear in other CI jobs. Maybe there is a data race?",
            "created_at": "2022-10-26T15:53:26Z",
            "html_url": "https://github.com/neovim/neovim/issues/20749#issuecomment-1292258914",
            "id": 1292258914,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/20749",
            "node_id": "IC_kwDOAPphoM5NBk5i",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1292258914/reactions"
            },
            "updated_at": "2022-10-27T08:00:00Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1292258914",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "@Nales Do you have `XDG_STATE_HOME` environment variable set? If not, does `~/.local/state/nvim/swap/` directory exist?",
            "created_at": "2022-10-27T08:26:27Z",
            "html_url": "https://github.com/neovim/neovim/issues/20749#issuecomment-1293171651",
            "id": 1293171651,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/20749",
            "node_id": "IC_kwDOAPphoM5NFDvD",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1293171651/reactions"
            },
            "updated_at": "2022-10-27T08:26:27Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1293171651",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq"
            }
        },
        {
            "author_association": "NONE",
            "body": "Thank you @zeetzjq for investigating and reopening the issue.\r\n\r\n`XDG_STATE_HOME` is not set and `~/.local/state/nvim/swap` exists. I checked this directory and its owner was `root`!\r\n\r\nI changed the owner of `~/.local/state/nvim/swap` to my local user and now everything works fine. When I open a file, a swap file is created in this directory.\r\n\r\nSo I checked multiple scenarios and here is the full issue. When there is no `~/.local/state/nvim/swap` directory, nvim creates one. The owner of this new directory is the user who executed `nvim`. If it were the local user, the owner would be the local user; if it were `rooÅ§` (by doing a `sudo nvim`), the owner is `root`.\r\n\r\nI suppose I immediately used `sudo nvim` instead of `nvim` right after installing neovim.\r\n\r\nDo other directories are created this way? This could be a very insidious issue for other users who do the same thing as I did.\r\n\r\nShould we find a way to prevent this issue? I do not know if this is a good idea to force the creation of this directory as the local user instead of `root`, and I do not know if this is feasible.",
            "created_at": "2022-10-28T09:34:37Z",
            "html_url": "https://github.com/neovim/neovim/issues/20749#issuecomment-1294766896",
            "id": 1294766896,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/20749",
            "node_id": "IC_kwDOAPphoM5NLJMw",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1294766896/reactions"
            },
            "updated_at": "2022-10-28T09:36:25Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1294766896",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/102611190?v=4",
                "events_url": "https://api.github.com/users/Nales0/events{/privacy}",
                "followers_url": "https://api.github.com/users/Nales0/followers",
                "following_url": "https://api.github.com/users/Nales0/following{/other_user}",
                "gists_url": "https://api.github.com/users/Nales0/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Nales0",
                "id": 102611190,
                "login": "Nales0",
                "node_id": "U_kgDOBh249g",
                "organizations_url": "https://api.github.com/users/Nales0/orgs",
                "received_events_url": "https://api.github.com/users/Nales0/received_events",
                "repos_url": "https://api.github.com/users/Nales0/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Nales0/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Nales0/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Nales0"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "It's strange that the directory is not created under `/root` in this case.",
            "created_at": "2022-10-28T09:47:35Z",
            "html_url": "https://github.com/neovim/neovim/issues/20749#issuecomment-1294782058",
            "id": 1294782058,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/20749",
            "node_id": "IC_kwDOAPphoM5NLM5q",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1294782058/reactions"
            },
            "updated_at": "2022-10-28T09:47:47Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1294782058",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq"
            }
        },
        {
            "author_association": "NONE",
            "body": "Actually I use `sudo` as an alias for `sudo -E`. Here is the relevant manual part.\r\n\r\n```\r\n     -E, --preserve-env\r\n                 Indicates to the security policy that the user wishes to preâ€\r\n                 serve their existing environment variables.  The security\r\n                 policy may return an error if the user does not have permisâ€\r\n                 sion to preserve the environment.\r\n```\r\n\r\nI checked using `sudo` without the `-E` option: doing so does not create `~/.local/state/nvim/swap`, and it creates `/root/.local/state/nvim/swap/`. I suppose the issue here is only my fault.\r\n\r\nI let you close the issue if you think it is a normal behaviour. I think we should find a way to warn the user that he or she has no access to the `swap` directory. At least it could lead the user to fix the issue himself or herself.\r\n\r\nAnyway, thank you all for the time and the help here!",
            "created_at": "2022-10-28T10:44:24Z",
            "html_url": "https://github.com/neovim/neovim/issues/20749#issuecomment-1294842457",
            "id": 1294842457,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/20749",
            "node_id": "IC_kwDOAPphoM5NLbpZ",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1294842457/reactions"
            },
            "updated_at": "2022-10-28T10:44:24Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1294842457",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/102611190?v=4",
                "events_url": "https://api.github.com/users/Nales0/events{/privacy}",
                "followers_url": "https://api.github.com/users/Nales0/followers",
                "following_url": "https://api.github.com/users/Nales0/following{/other_user}",
                "gists_url": "https://api.github.com/users/Nales0/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Nales0",
                "id": 102611190,
                "login": "Nales0",
                "node_id": "U_kgDOBh249g",
                "organizations_url": "https://api.github.com/users/Nales0/orgs",
                "received_events_url": "https://api.github.com/users/Nales0/received_events",
                "repos_url": "https://api.github.com/users/Nales0/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Nales0/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Nales0/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Nales0"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Maybe `:checkhealth` can check if there are writeable swap directories.",
            "created_at": "2022-10-30T04:04:59Z",
            "html_url": "https://github.com/neovim/neovim/issues/20749#issuecomment-1296096092",
            "id": 1296096092,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/20749",
            "node_id": "IC_kwDOAPphoM5NQNtc",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1296096092/reactions"
            },
            "updated_at": "2022-10-30T04:04:59Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1296096092",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "# Status\r\n\r\n## Improve checkhealth\r\n\r\n> Maybe `:checkhealth` can check if there are writeable swap directories.\r\n\r\nðŸ‘ Looks like Nvim doesn't provide an easy way to check if directory contents are readable. The closest I can find is from `:help getfperm()`:\r\n\r\n> If {fname} does not exist or its directory cannot be read, an empty string is returned.\r\n\r\nSo [this trick](https://github.com/justinmk/vim-dirvish/commit/b660af1fa07fe1d44d4eb3ea5242334f6c2766ca) can be used (passing `/.` as the \"file\"):\r\n\r\n```\r\nlet is_dir_readable = getfperm(dir .. '/.')\r\n```\r\n\r\n## 'directory' bug?\r\n\r\n`:help 'directory'` says:\r\n\r\n> The swap file will be created in the first directory where this is possible.  If it is not possible in any directory, but last directory listed in the option does not exist, it is created.\r\n\r\nThis seems to fail if any of the directories the 'directory' list are not accessible. Repro steps:\r\n\r\n```\r\nmkdir x\r\nchmod a-rwx x\r\nnvim --clean +'set directory=x,xx'\r\n:edit foo\r\nE303: Unable to open swap file for \"foo\", recovery impossible\r\n```",
            "created_at": "2024-02-20T11:04:39Z",
            "html_url": "https://github.com/neovim/neovim/issues/20749#issuecomment-1953974326",
            "id": 1953974326,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/20749",
            "node_id": "IC_kwDOAPphoM50d0g2",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1953974326/reactions"
            },
            "updated_at": "2024-02-20T11:20:08Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1953974326",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        }
    ],
    "comments": 9,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/20749/comments",
    "created_at": "2022-10-20T15:12:03Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/20749/events",
    "html_url": "https://github.com/neovim/neovim/issues/20749",
    "id": 1416805788,
    "labels": [
        {
            "color": "c5def5",
            "default": false,
            "description": "Nvim startup sequence (`:h startup`)",
            "id": 870629450,
            "name": "startup",
            "node_id": "MDU6TGFiZWw4NzA2Mjk0NTA=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/startup"
        },
        {
            "color": "C5DEF5",
            "default": false,
            "description": "",
            "id": 4242493821,
            "name": "options",
            "node_id": "LA_kwDOAPphoM7831F9",
            "url": "https://api.github.com/repos/neovim/neovim/labels/options"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/20749/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 604,
        "created_at": "2014-05-10T20:43:04Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
            "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
            "followers_url": "https://api.github.com/users/justinmk/followers",
            "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/justinmk",
            "id": 1359421,
            "login": "justinmk",
            "node_id": "MDQ6VXNlcjEzNTk0MjE=",
            "organizations_url": "https://api.github.com/users/justinmk/orgs",
            "received_events_url": "https://api.github.com/users/justinmk/received_events",
            "repos_url": "https://api.github.com/users/justinmk/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/justinmk"
        },
        "description": "Low priority. Not planned for the current target, may be reassigned.",
        "due_on": null,
        "html_url": "https://github.com/neovim/neovim/milestone/6",
        "id": 655037,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/6/labels",
        "node_id": "MDk6TWlsZXN0b25lNjU1MDM3",
        "number": 6,
        "open_issues": 430,
        "state": "open",
        "title": "backlog",
        "updated_at": "2024-02-21T16:00:07Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/6"
    },
    "node_id": "I_kwDOAPphoM5Ucr2c",
    "number": 20749,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/20749/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": "reopened",
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/20749/timeline",
    "title": "Error `E303: unable to open swap file` if 'directory' has wrong permissions",
    "updated_at": "2024-02-20T11:27:01Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/20749",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/102611190?v=4",
        "events_url": "https://api.github.com/users/Nales0/events{/privacy}",
        "followers_url": "https://api.github.com/users/Nales0/followers",
        "following_url": "https://api.github.com/users/Nales0/following{/other_user}",
        "gists_url": "https://api.github.com/users/Nales0/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/Nales0",
        "id": 102611190,
        "login": "Nales0",
        "node_id": "U_kgDOBh249g",
        "organizations_url": "https://api.github.com/users/Nales0/orgs",
        "received_events_url": "https://api.github.com/users/Nales0/received_events",
        "repos_url": "https://api.github.com/users/Nales0/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/Nales0/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Nales0/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/Nales0"
    }
}