{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "body": "### Problem\n\n`nvim -e` clears the screen and uses other terminal escape sequences.  When ex mode is in use, this is unwanted, since it's supposed to be a line editor Ã  la `ed`, and it also causes `TERM=dumb nvim -e` to not function properly.  This is important because ex mode is supposed to work even with no terminal or an extremely incapable terminal (some people do development on embedded systems, for instance).\n\nNote that `nvim -es` _almost_ does this, but it doesn't work with a TTY (see #32486).\n\n### Steps to reproduce\n\n1. Run `nvim -e -u NONE`.\n2. Note that the screen is cleared and (for HEAD) coloured.\n3. Run `TERM=dumb nvim -e -u NONE`\n4. Note that the screen is cleared and (for HEAD) coloured.\n\nNote that if it's too difficult to notice the escape sequences, one can run the command with `script -c`, which will log all of the output, including the terminal codes, to the file `typescript`.\n\n### Expected behavior\n\nI expect that `nvim -e` does not send any terminal escape sequences and that it acts entirely like a line editor.  This is the behaviour of some other implementations, such as nvi.\n\n### Nvim version (nvim -v)\n\nv0.9.5 and HEAD\n\n### Vim (not Nvim) behaves the same?\n\nyes, 9.1.1113 (but `-es` works there)\n\n### Operating system/version\n\nDebian unstable\n\n### Terminal name/version\n\nAlacritty 0.13.2 with tmux 3.5a\n\n### $TERM environment variable\n\n`tmux-direct`\n\n### Installation\n\nDebian and from source",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [
        {
            "author_association": "CONTRIBUTOR",
            "body": "Of course it's up to the project whether this is only for `TERM=dumb` or for all cases with `nvim -e` (until `:visual` is run), but I think the latter will actually be easier to implement and less invasive from some looking at the code.  I would also prefer the latter (and if there's interest, I can explain the use cases in more detail), but again, if the project decides otherwise, no big deal.",
            "created_at": "2025-02-17T19:07:27Z",
            "html_url": "https://github.com/neovim/neovim/issues/32498#issuecomment-2663907797",
            "id": 2663907797,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32498",
            "node_id": "IC_kwDOAPphoM6eyAHV",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2663907797/reactions"
            },
            "updated_at": "2025-02-17T19:07:27Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2663907797",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/497054?v=4",
                "events_url": "https://api.github.com/users/bk2204/events{/privacy}",
                "followers_url": "https://api.github.com/users/bk2204/followers",
                "following_url": "https://api.github.com/users/bk2204/following{/other_user}",
                "gists_url": "https://api.github.com/users/bk2204/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bk2204",
                "id": 497054,
                "login": "bk2204",
                "node_id": "MDQ6VXNlcjQ5NzA1NA==",
                "organizations_url": "https://api.github.com/users/bk2204/orgs",
                "received_events_url": "https://api.github.com/users/bk2204/received_events",
                "repos_url": "https://api.github.com/users/bk2204/repos",
                "site_admin": true,
                "starred_url": "https://api.github.com/users/bk2204/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bk2204/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bk2204",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> I expect that `nvim -e` does not send any terminal escape sequences and that it acts entirely like a line editor.\n\nThe reason for the current behavior was to vastly simplify the startup logic. \n\nIf there's a way that `nvim -e` can avoid starting a UI, without introducing new global variables, or lots of conditional checks spread across the codebase, then that is probably fine.\n\nOTOH, if a UI must be started, it may make sense for the `tui.c` logic to treat `TERM=dumb` in a way that avoids sending most (all?) terminal sequences. That's what I was suggesting originally.",
            "created_at": "2025-02-19T00:10:34Z",
            "html_url": "https://github.com/neovim/neovim/issues/32498#issuecomment-2667203692",
            "id": 2667203692,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32498",
            "node_id": "IC_kwDOAPphoM6e-kxs",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2667203692/reactions"
            },
            "updated_at": "2025-02-19T00:13:02Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2667203692",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 2,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/32498/comments",
    "created_at": "2025-02-17T16:18:18Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/32498/events",
    "html_url": "https://github.com/neovim/neovim/issues/32498",
    "id": 2858286754,
    "labels": [
        {
            "color": "c5def5",
            "default": false,
            "description": "",
            "id": 113026979,
            "name": "ui",
            "node_id": "MDU6TGFiZWwxMTMwMjY5Nzk=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/ui"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "",
            "id": 197254545,
            "name": "tui",
            "node_id": "MDU6TGFiZWwxOTcyNTQ1NDU=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/tui"
        },
        {
            "color": "C5DEF5",
            "default": false,
            "description": "",
            "id": 7421978602,
            "name": "editor",
            "node_id": "LA_kwDOAPphoM8AAAABumJn6g",
            "url": "https://api.github.com/repos/neovim/neovim/labels/editor"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/32498/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 699,
        "created_at": "2014-05-10T20:43:04Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
            "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
            "followers_url": "https://api.github.com/users/justinmk/followers",
            "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/justinmk",
            "id": 1359421,
            "login": "justinmk",
            "node_id": "MDQ6VXNlcjEzNTk0MjE=",
            "organizations_url": "https://api.github.com/users/justinmk/orgs",
            "received_events_url": "https://api.github.com/users/justinmk/received_events",
            "repos_url": "https://api.github.com/users/justinmk/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/justinmk",
            "user_view_type": "public"
        },
        "description": "Low priority items. We plan to work on this but don't have a target date.",
        "due_on": null,
        "html_url": "https://github.com/neovim/neovim/milestone/6",
        "id": 655037,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/6/labels",
        "node_id": "MDk6TWlsZXN0b25lNjU1MDM3",
        "number": 6,
        "open_issues": 637,
        "state": "open",
        "title": "backlog",
        "updated_at": "2025-02-23T16:48:10Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/6"
    },
    "node_id": "I_kwDOAPphoM6qXf6i",
    "number": 32498,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/32498/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/32498/timeline",
    "title": "Ex mode (with TERM=dumb) should not start UI or emit termcodes",
    "updated_at": "2025-02-19T00:13:02Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/32498",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/497054?v=4",
        "events_url": "https://api.github.com/users/bk2204/events{/privacy}",
        "followers_url": "https://api.github.com/users/bk2204/followers",
        "following_url": "https://api.github.com/users/bk2204/following{/other_user}",
        "gists_url": "https://api.github.com/users/bk2204/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/bk2204",
        "id": 497054,
        "login": "bk2204",
        "node_id": "MDQ6VXNlcjQ5NzA1NA==",
        "organizations_url": "https://api.github.com/users/bk2204/orgs",
        "received_events_url": "https://api.github.com/users/bk2204/received_events",
        "repos_url": "https://api.github.com/users/bk2204/repos",
        "site_admin": true,
        "starred_url": "https://api.github.com/users/bk2204/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/bk2204/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/bk2204",
        "user_view_type": "public"
    }
}