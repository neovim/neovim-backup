{
    "active_lock_reason": null,
    "assignee": {
        "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
        "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
        "followers_url": "https://api.github.com/users/bfredl/followers",
        "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
        "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/bfredl",
        "id": 1363104,
        "login": "bfredl",
        "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
        "organizations_url": "https://api.github.com/users/bfredl/orgs",
        "received_events_url": "https://api.github.com/users/bfredl/received_events",
        "repos_url": "https://api.github.com/users/bfredl/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/bfredl",
        "user_view_type": "public"
    },
    "assignees": [
        {
            "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
            "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
            "followers_url": "https://api.github.com/users/bfredl/followers",
            "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
            "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/bfredl",
            "id": 1363104,
            "login": "bfredl",
            "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
            "organizations_url": "https://api.github.com/users/bfredl/orgs",
            "received_events_url": "https://api.github.com/users/bfredl/received_events",
            "repos_url": "https://api.github.com/users/bfredl/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/bfredl",
            "user_view_type": "public"
        }
    ],
    "author_association": "CONTRIBUTOR",
    "body": "### Problem\n\nAlready reported as https://github.com/neovim/neovim/issues/27196 but the issue is locked.\n\nnvim aborts with an assertion failure in marktree.c.\n\nI used AFL++ to fuzz nvim and find several repros (or several variations of the same repro).\n\n### Steps to reproduce\n\nSave this as seen-repro.lua:\n\n```\nlocal namespace_id = vim.api.nvim_create_namespace('extmark-fuzz')\n\nlocal lines = {}\nfor _ = 1, 301 do\n    table.insert(lines, string.rep('o', 48))\nend\nvim.api.nvim_buf_set_lines(0, 48, 48, false, lines)\n\nvim.api.nvim_buf_set_extmark(0, namespace_id, 190, 48, {\n    right_gravity = false,\n})\n\nvim.api.nvim_buf_set_extmark(0, namespace_id, 48, 48, {})\n\nvim.api.nvim_buf_set_extmark(0, namespace_id, 190, 48, {\n    right_gravity = false,\n})\n\nvim.api.nvim_buf_set_extmark(0, namespace_id, 166, 48, {\n    right_gravity = false,\n    end_row = 166,\n    end_col = 48,\n})\n\nvim.api.nvim_buf_set_extmark(0, namespace_id, 48, 48, {\n    end_row = 48,\n    end_col = 48,\n})\n\nvim.api.nvim_buf_set_extmark(0, namespace_id, 48, 48, {\n    end_row = 48,\n    end_col = 48,\n})\n\nvim.api.nvim_buf_set_extmark(0, namespace_id, 48, 48, {\n    end_row = 255,\n    end_col = 48,\n})\n\nvim.api.nvim_buf_set_extmark(0, namespace_id, 131, 48, {\n    right_gravity = false,\n    end_row = 48,\n    end_col = 48,\n})\n\nvim.api.nvim_buf_set_extmark(0, namespace_id, 131, 48, {\n    right_gravity = false,\n    end_row = 48,\n    end_col = 48,\n})\n\nvim.api.nvim_buf_set_extmark(0, namespace_id, 48, 48, {\n    end_row = 131,\n    end_col = 48,\n})\n\nvim.api.nvim_buf_set_extmark(0, namespace_id, 48, 48, {\n    right_gravity = false,\n    end_row = 216,\n    end_col = 48,\n})\n\nvim.api.nvim_buf_set_extmark(0, namespace_id, 172, 48, {\n    right_gravity = false,\n    end_row = 51,\n    end_col = 48,\n})\n\nvim.api.nvim_buf_set_extmark(0, namespace_id, 131, 48, {\n    right_gravity = false,\n    end_row = 131,\n    end_col = 48,\n})\n\nvim.api.nvim_buf_set_extmark(0, namespace_id, 156, 48, {\n    right_gravity = false,\n    end_row = 131,\n    end_col = 48,\n})\n\nvim.api.nvim_buf_set_extmark(0, namespace_id, 135, 48, {\n    right_gravity = false,\n    end_row = 166,\n    end_col = 48,\n})\n\nvim.api.nvim_buf_set_extmark(0, namespace_id, 172, 48, {\n    right_gravity = false,\n    end_row = 250,\n    end_col = 48,\n})\n\nvim.api.nvim_buf_set_extmark(0, namespace_id, 48, 48, {\n    right_gravity = false,\n    end_row = 143,\n    end_col = 48,\n})\n\nvim.api.nvim_buf_set_lines(0, 48, 187, false, {})\n\nvim.cmd.qall({ bang = true })\n```\n\nExecute with:\n\n```\n./build/bin/nvim -u NONE -i NONE -n --headless --cmd \"source seen-repro.lua\"\n```\n\nIt works fine with `-S seen-repro.lua` also, I've just been using --cmd because it runs earlier in startup, as I understand it.\n\nAny attempt I've made to simplify by removing an individual `nvim_buf_set_extmark` call has resulted in no repro.\n\nAlso, every version of the repro that I've collected follows the same pattern: Add lines to the file, add several extmarks with different parameters, in some cases delete an single extmark somewhere in between adding them, then delete some set of lines. I manually simplified this one by pulling out opts that didn't affect whether it reproed or not. `invalidate`, `undo_restore`, and `end_right_gravity`, for example, seemed to have no effect.\n\n### Expected behavior\n\nWith the specific lines and extmarks given, I'm not sure. Either run successfully or report an error, but don't abort.\n\n### Nvim version (nvim -v)\n\nmaster at 8ab511bba524bcd5b5913d1b1205b5e4fe3f7210\n\n### Vim (not Nvim) behaves the same?\n\nN/A\n\n### Operating system/version\n\nDebian Linux 13.2 (in a podman container)\n\n### Terminal name/version\n\nKitty 0.26.5, xterm 379\n\n### $TERM environment variable\n\nxterm-kitty, xterm-256color\n\n### Installation\n\nBuilt from source with make CMAKE_BUILD_TYPE=Debug",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "https://github.com/neovim/neovim/issues/27196#issuecomment-2815633682\n\n> To \"stop the bleeding\", we could change this `true` to `false`: https://github.com/neovim/neovim/blob/34791f7988980c87a97eff8b75224be2ac449c78/src/nvim/marktree.c#L427\n",
            "created_at": "2026-02-14T23:21:03Z",
            "html_url": "https://github.com/neovim/neovim/issues/37867#issuecomment-3902772463",
            "id": 3902772463,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/37867",
            "node_id": "IC_kwDOAPphoM7on5Tv",
            "performed_via_github_app": null,
            "pin": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3902772463/reactions"
            },
            "updated_at": "2026-02-15T08:50:55Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3902772463",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "There is no \"bleeding\", this applies to debug builds only.\n\nThe check is already disabled in RelWithDebInfo even when other asserts are active.",
            "created_at": "2026-02-15T08:43:23Z",
            "html_url": "https://github.com/neovim/neovim/issues/37867#issuecomment-3903771506",
            "id": 3903771506,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/37867",
            "node_id": "IC_kwDOAPphoM7ortNy",
            "performed_via_github_app": null,
            "pin": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3903771506/reactions"
            },
            "updated_at": "2026-02-15T08:43:23Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3903771506",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
                "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
                "followers_url": "https://api.github.com/users/bfredl/followers",
                "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
                "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bfredl",
                "id": 1363104,
                "login": "bfredl",
                "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
                "organizations_url": "https://api.github.com/users/bfredl/orgs",
                "received_events_url": "https://api.github.com/users/bfredl/received_events",
                "repos_url": "https://api.github.com/users/bfredl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bfredl",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "oh i missed the CMAKE_BUILD_TYPE=Debug note",
            "created_at": "2026-02-15T08:51:03Z",
            "html_url": "https://github.com/neovim/neovim/issues/37867#issuecomment-3903794184",
            "id": 3903794184,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/37867",
            "node_id": "IC_kwDOAPphoM7orywI",
            "performed_via_github_app": null,
            "pin": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3903794184/reactions"
            },
            "updated_at": "2026-02-15T08:51:03Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3903794184",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "The deterministic repo which doesn't require 10 plugins is very useful tho, I might be able to find the cause this time:D",
            "created_at": "2026-02-15T08:56:34Z",
            "html_url": "https://github.com/neovim/neovim/issues/37867#issuecomment-3903813286",
            "id": 3903813286,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/37867",
            "node_id": "IC_kwDOAPphoM7or3am",
            "performed_via_github_app": null,
            "pin": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 3,
                "total_count": 3,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3903813286/reactions"
            },
            "updated_at": "2026-02-15T08:56:34Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3903813286",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
                "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
                "followers_url": "https://api.github.com/users/bfredl/followers",
                "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
                "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bfredl",
                "id": 1363104,
                "login": "bfredl",
                "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
                "organizations_url": "https://api.github.com/users/bfredl/orgs",
                "received_events_url": "https://api.github.com/users/bfredl/received_events",
                "repos_url": "https://api.github.com/users/bfredl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bfredl",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "It's also kind of useful to add `vim.opt.swapfile = false` at the top of the repro. I'm not sure why `-n` doesn't actually prevent swap files from being created and left around every time you run the repro.\n\nI'm still poking around with this, I may be able to post additional repros which may or may not provide new info, and I'm still looking at ways to make the fuzzing more effective. Again, it's hard to say how useful that will be. It might just all look like this repro, some random-seeming extmarks and text deletion.\n\nThe approach I used was to write a Lua script that reads arbitrary bytes from stdin and interprets the bytes as instructions to call certain API functions and arguments to give to those functions. The functions it could call were limited to:\n\n* vim.api.nvim_buf_clear_namespace\n* vim.api.nvim_buf_set_extmark\n* vim.api.nvim_buf_del_extmark\n* vim.api.nvim_buf_set_lines\n* vim.api.nvim_buf_set_text\n\nIt also included variations like setting an extmark with or without an ending range, and with or without including an ID.",
            "created_at": "2026-02-15T18:57:24Z",
            "html_url": "https://github.com/neovim/neovim/issues/37867#issuecomment-3905002821",
            "id": 3905002821,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/37867",
            "node_id": "IC_kwDOAPphoM7owZ1F",
            "performed_via_github_app": null,
            "pin": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 1,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3905002821/reactions"
            },
            "updated_at": "2026-02-15T18:57:24Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3905002821",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/58675?v=4",
                "events_url": "https://api.github.com/users/KevinGoodsell/events{/privacy}",
                "followers_url": "https://api.github.com/users/KevinGoodsell/followers",
                "following_url": "https://api.github.com/users/KevinGoodsell/following{/other_user}",
                "gists_url": "https://api.github.com/users/KevinGoodsell/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/KevinGoodsell",
                "id": 58675,
                "login": "KevinGoodsell",
                "node_id": "MDQ6VXNlcjU4Njc1",
                "organizations_url": "https://api.github.com/users/KevinGoodsell/orgs",
                "received_events_url": "https://api.github.com/users/KevinGoodsell/received_events",
                "repos_url": "https://api.github.com/users/KevinGoodsell/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/KevinGoodsell/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/KevinGoodsell/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/KevinGoodsell",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I managed to use the reproduction to a crash. It somehow mistakes an empty range for a non-empty range in some edge case, will look more into it when getting back to work (tomorrow or the day after)",
            "created_at": "2026-02-15T21:00:06Z",
            "html_url": "https://github.com/neovim/neovim/issues/37867#issuecomment-3905178287",
            "id": 3905178287,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/37867",
            "node_id": "IC_kwDOAPphoM7oxEqv",
            "performed_via_github_app": null,
            "pin": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 1,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3905178287/reactions"
            },
            "updated_at": "2026-02-15T21:00:06Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3905178287",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
                "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
                "followers_url": "https://api.github.com/users/bfredl/followers",
                "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
                "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bfredl",
                "id": 1363104,
                "login": "bfredl",
                "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
                "organizations_url": "https://api.github.com/users/bfredl/orgs",
                "received_events_url": "https://api.github.com/users/bfredl/received_events",
                "repos_url": "https://api.github.com/users/bfredl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bfredl",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I've collected quite a few crashes but they generally follow the same pattern with seemingly minor variations, often meaningless (such as adding text in multiple steps rather than just once). It remains difficult to reduce the size of the repro by much, though in some cases individual set_extmark calls can be removed, or simplified by removing some opts. I don't really expect any particular repro sample to be more helpful than the first one, but here's a second that I spent some time shrinking down, in case it helps.\n\nI don't know what it means, but the fuzzing really likes 48-character lines, and marks in column 48. It could be meaningful, or some artifact of the mutations that AFL++ uses, or a bias that I accidentally introduced somehow.\n\n```\nvim.opt.swapfile = false\nlocal namespace_id = vim.api.nvim_create_namespace('extmark-fuzz')\n\nlocal lines = {\n  string.rep('o', 48),\n  string.rep('o', 48),\n  string.rep('o', 48),\n  string.rep('o', 48),\n}\nvim.api.nvim_buf_set_lines(0, 48, 48, false, lines)\n\nvim.api.nvim_buf_set_extmark(0, namespace_id, 1, 48, {\n  right_gravity = false,\n  end_row = 0,\n  end_col = 0,\n  end_right_gravity = true,\n})\n\nvim.api.nvim_buf_set_extmark(0, namespace_id, 3, 3, {\n  right_gravity = false,\n  end_row = 3,\n  end_col = 4,\n})\n\nvim.api.nvim_buf_set_extmark(0, namespace_id, 3, 48, {\n  right_gravity = false,\n  end_row = 3,\n  end_col = 48,\n})\n\nvim.api.nvim_buf_set_extmark(0, namespace_id, 3, 2, {\n  end_row = 4,\n  end_col = 48,\n})\n\nvim.api.nvim_buf_set_extmark(0, namespace_id, 3, 3, {\n  end_row = 3,\n  end_col = 3,\n})\n\nvim.api.nvim_buf_set_extmark(0, namespace_id, 3, 4, {})\n\nvim.api.nvim_buf_set_extmark(0, namespace_id, 3, 48, {\n  right_gravity = false,\n  end_row = 1,\n  end_col = 48,\n  end_right_gravity = true,\n})\n\nvim.api.nvim_buf_set_extmark(0, namespace_id, 3, 3, {\n  end_row = 3,\n  end_col = 3,\n})\n\nvim.api.nvim_buf_set_extmark(0, namespace_id, 3, 2, {\n  end_row = 4,\n  end_col = 48,\n})\n\nvim.api.nvim_buf_set_extmark(0, namespace_id, 3, 48, {\n  right_gravity = false,\n  end_row = 1,\n  end_col = 48,\n  end_right_gravity = true,\n})\n\nvim.api.nvim_buf_set_extmark(0, namespace_id, 3, 48, {\n  right_gravity = false,\n  undo_restore = false,\n  invalidate = true,\n})\n\nvim.api.nvim_buf_set_extmark(0, namespace_id, 3, 4, {})\n\nvim.api.nvim_buf_set_extmark(0, namespace_id, 3, 48, {\n  right_gravity = false,\n  end_row = 1,\n  end_col = 48,\n  end_right_gravity = true,\n})\n\nvim.api.nvim_buf_set_extmark(0, namespace_id, 3, 3, {\n  right_gravity = false,\n  undo_restore = false,\n  end_row = 3,\n  end_col = 4,\n})\n\nvim.api.nvim_buf_set_extmark(0, namespace_id, 3, 3, {\n  end_row = 3,\n  end_col = 3,\n})\n\nvim.api.nvim_buf_set_extmark(0, namespace_id, 1, 48, {\n  end_row = 3,\n  end_col = 3,\n})\n\nvim.api.nvim_buf_set_extmark(0, namespace_id, 3, 3, {})\n\nvim.api.nvim_buf_set_extmark(0, namespace_id, 3, 3, {\n  end_row = 3,\n  end_col = 48,\n})\n\nvim.api.nvim_buf_set_extmark(0, namespace_id, 3, 4, {\n  right_gravity = false,\n  undo_restore = false,\n})\n\nvim.api.nvim_buf_set_extmark(0, namespace_id, 3, 48, {\n  right_gravity = false,\n  end_row = 1,\n  end_col = 48,\n  end_right_gravity = true,\n})\n\nvim.api.nvim_buf_set_extmark(0, namespace_id, 4, 48, {})\n\nvim.api.nvim_buf_set_lines(0, 0, 48, false, {})\n\nvim.cmd.qall({ bang = true })\n```",
            "created_at": "2026-02-16T18:45:22Z",
            "html_url": "https://github.com/neovim/neovim/issues/37867#issuecomment-3910014074",
            "id": 3910014074,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/37867",
            "node_id": "IC_kwDOAPphoM7pDhR6",
            "performed_via_github_app": null,
            "pin": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3910014074/reactions"
            },
            "updated_at": "2026-02-16T18:45:22Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3910014074",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/58675?v=4",
                "events_url": "https://api.github.com/users/KevinGoodsell/events{/privacy}",
                "followers_url": "https://api.github.com/users/KevinGoodsell/followers",
                "following_url": "https://api.github.com/users/KevinGoodsell/following{/other_user}",
                "gists_url": "https://api.github.com/users/KevinGoodsell/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/KevinGoodsell",
                "id": 58675,
                "login": "KevinGoodsell",
                "node_id": "MDQ6VXNlcjU4Njc1",
                "organizations_url": "https://api.github.com/users/KevinGoodsell/orgs",
                "received_events_url": "https://api.github.com/users/KevinGoodsell/received_events",
                "repos_url": "https://api.github.com/users/KevinGoodsell/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/KevinGoodsell/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/KevinGoodsell/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/KevinGoodsell",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 7,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/37867/comments",
    "created_at": "2026-02-14T23:00:22Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/37867/events",
    "html_url": "https://github.com/neovim/neovim/issues/37867",
    "id": 3942541932,
    "issue_dependencies_summary": {
        "blocked_by": 0,
        "blocking": 0,
        "total_blocked_by": 0,
        "total_blocking": 0
    },
    "labels": [
        {
            "color": "0E8A16",
            "default": false,
            "description": "issue contains minimal reproducing steps",
            "id": 435851959,
            "name": "has:repro",
            "node_id": "MDU6TGFiZWw0MzU4NTE5NTk=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/has:repro"
        },
        {
            "color": "0E8A16",
            "default": false,
            "description": "issue contains a stacktrace/ASAN log",
            "id": 435854079,
            "name": "has:backtrace",
            "node_id": "MDU6TGFiZWw0MzU4NTQwNzk=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/has:backtrace"
        },
        {
            "color": "F9D0C4",
            "default": false,
            "description": "issue reporting a crash or segfault",
            "id": 435854234,
            "name": "bug-crash",
            "node_id": "MDU6TGFiZWw0MzU4NTQyMzQ=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug-crash"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "marks, extmarks, decorations, virtual text",
            "id": 1680119719,
            "name": "marks",
            "node_id": "MDU6TGFiZWwxNjgwMTE5NzE5",
            "url": "https://api.github.com/repos/neovim/neovim/labels/marks"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/37867/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 250,
        "created_at": "2024-05-16T14:11:54Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
            "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
            "followers_url": "https://api.github.com/users/justinmk/followers",
            "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/justinmk",
            "id": 1359421,
            "login": "justinmk",
            "node_id": "MDQ6VXNlcjEzNTk0MjE=",
            "organizations_url": "https://api.github.com/users/justinmk/orgs",
            "received_events_url": "https://api.github.com/users/justinmk/received_events",
            "repos_url": "https://api.github.com/users/justinmk/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/justinmk",
            "user_view_type": "public"
        },
        "description": "",
        "due_on": "2026-03-14T00:00:00Z",
        "html_url": "https://github.com/neovim/neovim/milestone/43",
        "id": 11063573,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/43/labels",
        "node_id": "MI_kwDOAPphoM4AqNEV",
        "number": 43,
        "open_issues": 52,
        "state": "open",
        "title": "0.12",
        "updated_at": "2026-02-16T22:39:00Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/43"
    },
    "node_id": "I_kwDOAPphoM7q_mps",
    "number": 37867,
    "performed_via_github_app": null,
    "pinned_comment": null,
    "reactions": {
        "+1": 1,
        "-1": 0,
        "confused": 0,
        "eyes": 1,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 2,
        "url": "https://api.github.com/repos/neovim/neovim/issues/37867/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/37867/timeline",
    "title": "marktree.c:378: unintersect_node: Assertion `seen' failed (Debug build)",
    "type": {
        "color": "red",
        "created_at": "2024-01-25T10:10:19Z",
        "description": "An unexpected problem or behavior",
        "id": 597163,
        "is_enabled": true,
        "name": "Bug",
        "node_id": "IT_kwDOAGK_Pc4ACRyr",
        "updated_at": "2024-07-26T10:12:30Z"
    },
    "updated_at": "2026-02-16T18:45:22Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/37867",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/58675?v=4",
        "events_url": "https://api.github.com/users/KevinGoodsell/events{/privacy}",
        "followers_url": "https://api.github.com/users/KevinGoodsell/followers",
        "following_url": "https://api.github.com/users/KevinGoodsell/following{/other_user}",
        "gists_url": "https://api.github.com/users/KevinGoodsell/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/KevinGoodsell",
        "id": 58675,
        "login": "KevinGoodsell",
        "node_id": "MDQ6VXNlcjU4Njc1",
        "organizations_url": "https://api.github.com/users/KevinGoodsell/orgs",
        "received_events_url": "https://api.github.com/users/KevinGoodsell/received_events",
        "repos_url": "https://api.github.com/users/KevinGoodsell/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/KevinGoodsell/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/KevinGoodsell/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/KevinGoodsell",
        "user_view_type": "public"
    }
}