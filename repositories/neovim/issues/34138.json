{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\n\nWhen modifying a file from the integrated terminal, `:checktime` does not detect the modification, but when running the same modification command from either an external shell or as an external command, it works as I expect it to.\n\nI found https://github.com/neovim/neovim/issues/2127, but it doesn't seem quite the same, but more generally `:checktime` not working as expected/desired, whereas this is about `:checktime` behaving inconsistently.\n\n\n### Steps to reproduce\n\n1. Create two branches or commits. Branch `A` contains a file, `A.cpp`, whereas branch `B` does not contain `A.cpp`.\n2. With `A` checked out, `nvim A.cpp`\n3. `:terminal`\n4. `git switch B`\n5. Move focus to the window showing the `A.cpp` buffer\n6. Note how `E211: File \"A.cpp\" no longer available` is _not_ displayed\n7. `:checktime`  \" <--- Still not detecting the modification\n8. `:e`  \" This empties the buffer, as is expected, but still no error/warning.\n\nIf step 3 is replaced with an external shell, or backgrounding nvim and using the same shell, or 3 and 4 is replaced with `:!git switch B`, nvim successfully detects the change on `:checktime` and emits the error.\n\nI also tried to switch to a buffer for a file that existed in both branches to see if I'd get any sort of warning when switching back to the buffer of the now disappeared file, but there was no difference.\n\n### Expected behavior\n\nI'm expecting nvim to emit the error E211, notifying the user that the file has disappeared.\n\n### Nvim version (nvim -v)\n\nNVIM v0.11.1; Build type: Release; LuaJIT 2.1.1741730670\n\n### Vim (not Nvim) behaves the same?\n\nNo. vim 9.1\n\n### Operating system/version\n\nUbuntu 24.04\n\n### Terminal name/version\n\nalacritty 0.13.2\n\n### $TERM environment variable\n\nxterm-256color\n\n### Installation\n\nBuilt from repo, a9a3981669ff80b76a893294f5eef0dad5cf8573",
    "closed_at": "2025-05-23T09:39:04Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/9694402?v=4",
        "events_url": "https://api.github.com/users/hoxell/events{/privacy}",
        "followers_url": "https://api.github.com/users/hoxell/followers",
        "following_url": "https://api.github.com/users/hoxell/following{/other_user}",
        "gists_url": "https://api.github.com/users/hoxell/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/hoxell",
        "id": 9694402,
        "login": "hoxell",
        "node_id": "MDQ6VXNlcjk2OTQ0MDI=",
        "organizations_url": "https://api.github.com/users/hoxell/orgs",
        "received_events_url": "https://api.github.com/users/hoxell/received_events",
        "repos_url": "https://api.github.com/users/hoxell/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/hoxell/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/hoxell/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/hoxell",
        "user_view_type": "public"
    },
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "Cannot reproduce.",
            "created_at": "2025-05-23T08:58:07Z",
            "html_url": "https://github.com/neovim/neovim/issues/34138#issuecomment-2903763168",
            "id": 2903763168,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34138",
            "node_id": "IC_kwDOAPphoM6tE-jg",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2903763168/reactions"
            },
            "updated_at": "2025-05-23T08:58:07Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2903763168",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "Tried to reproduce it with\n\n```\nFROM ubuntu:24.04\n\nRUN apt update && \\\n    apt install -y git ninja-build gettext cmake curl build-essential && \\\n    rm -rf /var/lib/apt/lists/*\n\nRUN git clone https://github.com/neovim/neovim.git && \\\n    cd neovim && \\\n    git checkout v0.11.1 && \\\n    make CMAKE_BUILD_TYPE=Release && \\\n    make install\n\nRUN mkdir repro && \\\n    cd repro && \\\n    git init && \\\n    git config user.name \"test\" && \\\n    git config user.email \"test@example.com\" && \\\n    git commit -m \"Initial commit\" --allow-empty && \\\n    git switch -c A && \\\n    touch A.cpp && \\\n    git add A.cpp && \\\n    git commit -m \"A.cpp\"\n```\n\nbut with this it worked as expected, so it must be something not working in my local setup.\nJust to be sure, I ran nvim without any user configs or plugins, but it still wouldn't trigger the error.\n\nAnyway, thanks for the quick response and helping me narrow it down to my machine.\nClosing this for now and will troubleshoot my local environment.",
            "created_at": "2025-05-23T09:39:04Z",
            "html_url": "https://github.com/neovim/neovim/issues/34138#issuecomment-2903869009",
            "id": 2903869009,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34138",
            "node_id": "IC_kwDOAPphoM6tFYZR",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2903869009/reactions"
            },
            "updated_at": "2025-05-23T09:39:04Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2903869009",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9694402?v=4",
                "events_url": "https://api.github.com/users/hoxell/events{/privacy}",
                "followers_url": "https://api.github.com/users/hoxell/followers",
                "following_url": "https://api.github.com/users/hoxell/following{/other_user}",
                "gists_url": "https://api.github.com/users/hoxell/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/hoxell",
                "id": 9694402,
                "login": "hoxell",
                "node_id": "MDQ6VXNlcjk2OTQ0MDI=",
                "organizations_url": "https://api.github.com/users/hoxell/orgs",
                "received_events_url": "https://api.github.com/users/hoxell/received_events",
                "repos_url": "https://api.github.com/users/hoxell/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/hoxell/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/hoxell/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/hoxell",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 2,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/34138/comments",
    "created_at": "2025-05-23T08:49:48Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/34138/events",
    "html_url": "https://github.com/neovim/neovim/issues/34138",
    "id": 3085681716,
    "labels": [
        {
            "color": "FBCA04",
            "default": false,
            "description": "We need minimal steps to reproduce the issue",
            "id": 298863445,
            "name": "needs:repro",
            "node_id": "MDU6TGFiZWwyOTg4NjM0NDU=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/needs:repro"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/34138/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM6368Q0",
    "number": 34138,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/34138/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "completed",
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/34138/timeline",
    "title": ":checktime does not detect modifications made from integrated terminal",
    "type": {
        "color": "red",
        "created_at": "2024-01-25T10:10:19Z",
        "description": "An unexpected problem or behavior",
        "id": 597163,
        "is_enabled": true,
        "name": "Bug",
        "node_id": "IT_kwDOAGK_Pc4ACRyr",
        "updated_at": "2024-07-26T10:12:30Z"
    },
    "updated_at": "2025-05-23T09:39:05Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/34138",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/9694402?v=4",
        "events_url": "https://api.github.com/users/hoxell/events{/privacy}",
        "followers_url": "https://api.github.com/users/hoxell/followers",
        "following_url": "https://api.github.com/users/hoxell/following{/other_user}",
        "gists_url": "https://api.github.com/users/hoxell/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/hoxell",
        "id": 9694402,
        "login": "hoxell",
        "node_id": "MDQ6VXNlcjk2OTQ0MDI=",
        "organizations_url": "https://api.github.com/users/hoxell/orgs",
        "received_events_url": "https://api.github.com/users/hoxell/received_events",
        "repos_url": "https://api.github.com/users/hoxell/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/hoxell/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/hoxell/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/hoxell",
        "user_view_type": "public"
    }
}