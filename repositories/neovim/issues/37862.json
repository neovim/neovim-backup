{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "MEMBER",
    "body": "## Problem\n\nNo way to invoke a command with a \"raw\", literal arg, without dealing with command-specific escaping, bar `|`, quote `|`, etc.\n\nSome things like `fnameescape()` exist to deal with this, but that only works if the command expects a filename. And it depends on escaping rules, which can be fragile.\n\n## Expected behavior\n\n    :nospecial cmd arg\n\ninvokes `:cmd` with literal raw `arg`, including all whitespace.\n\n    :2nospecial cmd arg1 arg2\n\ninvokes `:cmd` with literal `arg1` and `arg2`, split at the first whitespace. Does not support \"escaping\" whitespace, thus `:2nospecial cmd arg1\\ arg2` passes `arg1\\` literally as arg1.\n\n## use cases\n\n- internal calls to `:help <token>` https://github.com/neovim/neovim/blob/cadddbff6959a23337d417b000177326abc5a862/src/nvim/normal.c#L3325\n- session restore https://github.com/neovim/neovim/blob/cadddbff6959a23337d417b000177326abc5a862/src/nvim/ex_session.c#L288",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [
        {
            "author_association": "NONE",
            "body": "i'm interested  to work on this issue, as far i understand \n>No way to invoke a command with a \"raw\", literal arg, without dealing with command-specific escaping.\n\nwe can't use `fnameescape()` because it will break in many cases ie: `:edit a | b.txt` \nyou suggested `:nospecial cmd arg` with prefix as no of args 2,3.. \n\n`nv_colon()`  responsible for handling `:` and it call `do_cmdline()` to get and execute cmd.\nhttps://github.com/neovim/neovim/blob/cadddbff6959a23337d417b000177326abc5a862/src/nvim/normal.c#L3167-L3168\n\nmy initial thoughts is to register cmd `nospecial` in `ex_cmds.lua` and implement in `ex_docmd.c`\nhttps://github.com/neovim/neovim/blob/cadddbff6959a23337d417b000177326abc5a862/src/nvim/ex_cmds.lua#L41-L42\n\nstill i'm researching i'll revise this comment if i made some progress. till now am i at right direction?\n",
            "created_at": "2026-02-22T08:57:07Z",
            "html_url": "https://github.com/neovim/neovim/issues/37862#issuecomment-3940530561",
            "id": 3940530561,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/37862",
            "node_id": "IC_kwDOAPphoM7q37mB",
            "performed_via_github_app": null,
            "pin": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3940530561/reactions"
            },
            "updated_at": "2026-02-22T09:01:27Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3940530561",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/67893205?v=4",
                "events_url": "https://api.github.com/users/kumarvivek1752/events{/privacy}",
                "followers_url": "https://api.github.com/users/kumarvivek1752/followers",
                "following_url": "https://api.github.com/users/kumarvivek1752/following{/other_user}",
                "gists_url": "https://api.github.com/users/kumarvivek1752/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/kumarvivek1752",
                "id": 67893205,
                "login": "kumarvivek1752",
                "node_id": "MDQ6VXNlcjY3ODkzMjA1",
                "organizations_url": "https://api.github.com/users/kumarvivek1752/orgs",
                "received_events_url": "https://api.github.com/users/kumarvivek1752/received_events",
                "repos_url": "https://api.github.com/users/kumarvivek1752/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/kumarvivek1752/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/kumarvivek1752/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/kumarvivek1752",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> we can't use `fnameescape()` because it will break in many cases ie: `:edit a | b.txt`\n\nExactly, bar (`|`) is another good example. The various commands are [defined with flags](https://github.com/neovim/neovim/blob/ce5c7111f4050f168ddf4806287b4c384264b0fa/src/nvim/ex_cmds.lua#L15-L18) that decide how they treat bar (`|`), quote (`\"`), and many other things. \n\nSo the idea is that `:nospecial` is a way to ignore all of that and force the cmdline parser to treat everything up to EOL (`\\n`) as a literal arg.\n\n> till now am i at right direction?\n\nYes. An example might be [:noswapfile](https://github.com/neovim/neovim/blob/ce5c7111f4050f168ddf4806287b4c384264b0fa/src/nvim/ex_cmds.lua#L1860-L1863) or the various [:keep commands](https://github.com/neovim/neovim/blob/ce5c7111f4050f168ddf4806287b4c384264b0fa/src/nvim/ex_cmds.lua#L1282-L1303) , but those are \"implemented\" by `ex_wrongmodifier` . I am not sure if that's the right approach for `:nospecial`. Instead maybe `:execute` or `:normal` is a better example. \n\nHere's a sketch from AI (idk if it works). \n\n<details>\n<summary>code</summary>\n\n```diff\ndiff --git a/src/nvim/ex_cmds.lua b/src/nvim/ex_cmds.lua\nindex 08b779b7e44b..c1f705afdcf7 100644\n--- a/src/nvim/ex_cmds.lua\n+++ b/src/nvim/ex_cmds.lua\n@@ -1862,6 +1862,12 @@ M.cmds = {\n     addr_type = 'ADDR_NONE',\n     func = 'ex_wrongmodifier',\n   },\n+  {\n+    command = 'nospecial',\n+    flags = bit.bor(NEEDARG, EXTRA, NOTRLCOM, SBOXOK, CMDWIN),\n+    addr_type = 'ADDR_NONE',\n+    func = 'ex_nospecial',\n+  },\n   {\n     command = 'normal',\n     flags = bit.bor(RANGE, BANG, EXTRA, NEEDARG, NOTRLCOM, CTRLV, SBOXOK, CMDWIN, LOCK_OK),\ndiff --git a/src/nvim/ex_docmd.c b/src/nvim/ex_docmd.c\nindex 82520d849650..14149ad3eb86 100644\n--- a/src/nvim/ex_docmd.c\n+++ b/src/nvim/ex_docmd.c\n@@ -7098,6 +7098,110 @@ bool expr_map_locked(void)\n   return expr_map_lock > 0 && !(curbuf->b_flags & BF_DUMMY);\n }\n \n+/// \":nospecial [count] {cmd} {arg}...\": Execute an ex command with literal arguments.\n+/// Count indicates how many space-separated arguments to collect:\n+///   :nospecial cmd arg        - invokes :cmd with literal arg\n+///   :2nospecial cmd arg1 arg2 - invokes :cmd with literal arg1 and arg2 (split at 2 spaces)\n+/// Arguments are passed literally without any escaping or special character handling.\n+static void ex_nospecial(exarg_T *eap)\n+{\n+  char *arg = eap->arg;\n+  \n+  // Skip initial whitespace to find the command name\n+  while (*arg == ' ') {\n+    arg++;\n+  }\n+  if (*arg == NUL) {\n+    emsg(_(\"E471: Argument required\"));\n+    return;\n+  }\n+  \n+  // Find the end of the command name (first space)\n+  char *cmd_end = arg;\n+  while (*cmd_end != NUL && *cmd_end != ' ') {\n+    cmd_end++;\n+  }\n+  \n+  char *cmd_name = xmemdupz(arg, (size_t)(cmd_end - arg));\n+  \n+  // Skip spaces after command\n+  while (*cmd_end == ' ') {\n+    cmd_end++;\n+  }\n+  \n+  // Determine how many arguments to collect before the remainder\n+  int split_count = 1;  // default: just the command\n+  if (eap->addr_count > 0 && eap->line1 >= 1) {\n+    split_count = (int)eap->line1;\n+  }\n+  \n+  // Build argument list by splitting at spaces up to split_count\n+  char *p = cmd_end;\n+  int parts_collected = 0;\n+  garray_T cmd_parts;\n+  ga_init(&cmd_parts, (int)sizeof(char *), 10);\n+  \n+  // Collect split_count arguments (not including the command itself)\n+  while (*p != NUL && parts_collected < split_count) {\n+    // Skip leading spaces\n+    while (*p == ' ') {\n+      p++;\n+    }\n+    if (*p == NUL) {\n+      break;\n+    }\n+    \n+    // Find end of this argument\n+    char *arg_start = p;\n+    while (*p != NUL && *p != ' ') {\n+      p++;\n+    }\n+    \n+    // Store this argument\n+    char *arg_copy = xmemdupz(arg_start, (size_t)(p - arg_start));\n+    GA_APPEND(char *, &cmd_parts, arg_copy);\n+    parts_collected++;\n+  }\n+  \n+  // The remainder after split_count arguments (kept as-is, preserving spaces)\n+  while (*p == ' ' && parts_collected < split_count) {\n+    p++;\n+  }\n+  \n+  // Build the final command: :cmd_name arg1 arg2 ... [remainder]\n+  garray_T final_cmd;\n+  ga_init(&final_cmd, (int)sizeof(char), 256);\n+  \n+  // Add command name\n+  ga_concat(&final_cmd, cmd_name);\n+  \n+  // Add collected arguments\n+  for (int i = 0; i < cmd_parts.ga_len; i++) {\n+    ga_append(&final_cmd, ' ');\n+    char *collected_arg = ((char **)cmd_parts.ga_data)[i];\n+    ga_concat(&final_cmd, collected_arg);\n+  }\n+  \n+  // Add remainder if present\n+  if (*p != NUL) {\n+    ga_append(&final_cmd, ' ');\n+    ga_concat(&final_cmd, p);\n+  }\n+  \n+  ga_append(&final_cmd, NUL);\n+  \n+  // Execute the command\n+  do_cmdline_cmd(final_cmd.ga_data);\n+  \n+  // Cleanup\n+  xfree(cmd_name);\n+  for (int i = 0; i < cmd_parts.ga_len; i++) {\n+    xfree(((char **)cmd_parts.ga_data)[i]);\n+  }\n+  ga_clear(&cmd_parts);\n+  ga_clear(&final_cmd);\n+}\n+\n /// \":normal[!] {commands}\": Execute normal mode commands.\n static void ex_normal(exarg_T *eap)\n {\n```\n\n</details>\n",
            "created_at": "2026-02-23T16:12:29Z",
            "html_url": "https://github.com/neovim/neovim/issues/37862#issuecomment-3945744744",
            "id": 3945744744,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/37862",
            "node_id": "IC_kwDOAPphoM7rL0lo",
            "performed_via_github_app": null,
            "pin": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3945744744/reactions"
            },
            "updated_at": "2026-02-23T16:12:29Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3945744744",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 2,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/37862/comments",
    "created_at": "2026-02-14T12:42:44Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/37862/events",
    "html_url": "https://github.com/neovim/neovim/issues/37862",
    "id": 3941338768,
    "issue_dependencies_summary": {
        "blocked_by": 0,
        "blocking": 0,
        "total_blocked_by": 0,
        "total_blocking": 0
    },
    "labels": [
        {
            "color": "FBCA04",
            "default": false,
            "description": "Need comments/opinions from people familiar with this topic.",
            "id": 212680983,
            "name": "needs:discussion",
            "node_id": "MDU6TGFiZWwyMTI2ODA5ODM=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/needs:discussion"
        },
        {
            "color": "C5DEF5",
            "default": false,
            "description": "command line, also cmdwin",
            "id": 5826989442,
            "name": "cmdline-mode",
            "node_id": "LA_kwDOAPphoM8AAAABW1DNgg",
            "url": "https://api.github.com/repos/neovim/neovim/labels/cmdline-mode"
        },
        {
            "color": "C5DEF5",
            "default": false,
            "description": "user workflows, Ex commands",
            "id": 7421978602,
            "name": "editor",
            "node_id": "LA_kwDOAPphoM8AAAABumJn6g",
            "url": "https://api.github.com/repos/neovim/neovim/labels/editor"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/37862/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 303,
        "created_at": "2014-11-26T22:13:11Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
            "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
            "followers_url": "https://api.github.com/users/justinmk/followers",
            "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/justinmk",
            "id": 1359421,
            "login": "justinmk",
            "node_id": "MDQ6VXNlcjEzNTk0MjE=",
            "organizations_url": "https://api.github.com/users/justinmk/orgs",
            "received_events_url": "https://api.github.com/users/justinmk/received_events",
            "repos_url": "https://api.github.com/users/justinmk/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/justinmk",
            "user_view_type": "public"
        },
        "description": "We don't plan to work on this, but will accept high quality contributions from someone who will own the feature and follow up on bug reports.",
        "due_on": null,
        "html_url": "https://github.com/neovim/neovim/milestone/9",
        "id": 881978,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/9/labels",
        "node_id": "MDk6TWlsZXN0b25lODgxOTc4",
        "number": 9,
        "open_issues": 365,
        "state": "open",
        "title": "needs-owner",
        "updated_at": "2026-02-18T11:33:58Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/9"
    },
    "node_id": "I_kwDOAPphoM7q7A6Q",
    "number": 37862,
    "performed_via_github_app": null,
    "pinned_comment": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/37862/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/37862/timeline",
    "title": "`:nospecial cmd [args...]` invokes cmd with literal args",
    "type": {
        "color": "blue",
        "created_at": "2024-01-25T10:10:19Z",
        "description": "A request, idea, or new functionality",
        "id": 597167,
        "is_enabled": true,
        "name": "Enhancement",
        "node_id": "IT_kwDOAGK_Pc4ACRyv",
        "updated_at": "2024-07-26T10:12:30Z"
    },
    "updated_at": "2026-02-23T16:13:26Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/37862",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
        "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
        "followers_url": "https://api.github.com/users/justinmk/followers",
        "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
        "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/justinmk",
        "id": 1359421,
        "login": "justinmk",
        "node_id": "MDQ6VXNlcjEzNTk0MjE=",
        "organizations_url": "https://api.github.com/users/justinmk/orgs",
        "received_events_url": "https://api.github.com/users/justinmk/received_events",
        "repos_url": "https://api.github.com/users/justinmk/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/justinmk",
        "user_view_type": "public"
    }
}