{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "body": "### Problem\n\nNvim API defines 3 special types `Buffer`, `Window` and `Tabpage`. Even though they seem like subtype/subclass of integers, they are still not integers in some API clients. It seems to me that Nvim has some API functions that return Buffer, Window, Tabpage, but the document only say they return integer.\n\n### Steps to reproduce\n\n#### Test 1\n\nMake sure to have Nvim with `has(\"python3\")` return 1\n\n1. nvim --clean\n1. `:h nvim_win_get_buf`. You can see that the document says this function return window id as `integer`\n1. py buf=vim.request(\"nvim_win_get_buf\", 1000)\n1. py = type(buf) # <class 'pynvim.api.buffer.Buffer'>\n1. py = isinstance(buf, int) # False, so it is not even a subclass of integer\n\n#### Test 2\n```ruby\nrequire 'msgpack/rpc'\nrequire 'msgpack/rpc/transport/unix'\n\nnvim = MessagePack::RPC::Client.new(MessagePack::RPC::UNIXTransport.new, ENV['NVIM'])\nputs nvim.call(:nvim_win_get_buf, 1000)\n```\nCopy to a Nvim buffer and save it, then run the above file with `:term ruby %`, you can see it returns an error\n```\n/var/lib/gems/3.2.0/gems/msgpack-rpc-0.7.0/lib/msgpack/rpc/future.rb:59:in `get': request timed out (MessagePack::RPC::TimeoutError)\n        from /var/lib/gems/3.2.0/gems/msgpack-rpc-0.7.0/lib/msgpack/rpc/session.rb:54:in `call'\n        from test.rb:5:in `<main>'\n```\nBut if I change the last line of the above Ruby file to\n```ruby\nputs nvim.call(:nvim_eval, 'nvim_win_get_buf(1000)')\n```\nThen run it again and it works (it prints number `1`)\n\nSo I guess the error with the above Ruby script is because Nvim API returns type `Buffer` for the first Ruby script instead of just normal `integer`\n\n### Expected behavior\n\nNvim must correct document of return type of functions that return Buffer, Window or Tabpage objects\n\n\n\n### Nvim version (nvim -v)\n\nNVIM v0.12.0-dev-ddd1bf7\n\n### Vim (not Nvim) behaves the same?\n\nNA\n\n### Operating system/version\n\nKubuntu 24.04.1\n\n### Terminal name/version\n\nNA\n\n### $TERM environment variable\n\nNA\n\n### Installation\n\nsource",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "> Nvim API defines 3 special types `Buffer`, `Window` and `Tabpage`\n\nThose special types were a bad idea and are basically deprecated. They are integer handles, which API clients may choose to augment as \"objects\".\n\nI don't think we should emphasize that in Nvim docs, rather it should be de-emphasized. API clients have their own docs. ",
            "created_at": "2026-02-05T14:13:59Z",
            "html_url": "https://github.com/neovim/neovim/issues/37719#issuecomment-3853945616",
            "id": 3853945616,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/37719",
            "node_id": "IC_kwDOAPphoM7ltosQ",
            "performed_via_github_app": null,
            "pin": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3853945616/reactions"
            },
            "updated_at": "2026-02-05T14:13:59Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3853945616",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 1,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/37719/comments",
    "created_at": "2026-02-05T07:03:16Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/37719/events",
    "html_url": "https://github.com/neovim/neovim/issues/37719",
    "id": 3900025009,
    "issue_dependencies_summary": {
        "blocked_by": 0,
        "blocking": 0,
        "total_blocked_by": 0,
        "total_blocking": 0
    },
    "labels": [
        {
            "color": "c5def5",
            "default": true,
            "description": "",
            "id": 84744038,
            "name": "documentation",
            "node_id": "MDU6TGFiZWw4NDc0NDAzOA==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/documentation"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "libnvim, Nvim RPC API",
            "id": 103819671,
            "name": "api",
            "node_id": "MDU6TGFiZWwxMDM4MTk2NzE=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/api"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/37719/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM7odaix",
    "number": 37719,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/37719/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/37719/timeline",
    "title": "Some Nvim API functions return Buffer, Window, Tabpage objects, but doc only say they return `integer``",
    "type": {
        "color": "red",
        "created_at": "2024-01-25T10:10:19Z",
        "description": "An unexpected problem or behavior",
        "id": 597163,
        "is_enabled": true,
        "name": "Bug",
        "node_id": "IT_kwDOAGK_Pc4ACRyr",
        "updated_at": "2024-07-26T10:12:30Z"
    },
    "updated_at": "2026-02-05T14:14:04Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/37719",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/111893501?v=4",
        "events_url": "https://api.github.com/users/brianhuster/events{/privacy}",
        "followers_url": "https://api.github.com/users/brianhuster/followers",
        "following_url": "https://api.github.com/users/brianhuster/following{/other_user}",
        "gists_url": "https://api.github.com/users/brianhuster/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/brianhuster",
        "id": 111893501,
        "login": "brianhuster",
        "node_id": "U_kgDOBqtb_Q",
        "organizations_url": "https://api.github.com/users/brianhuster/orgs",
        "received_events_url": "https://api.github.com/users/brianhuster/received_events",
        "repos_url": "https://api.github.com/users/brianhuster/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/brianhuster/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/brianhuster/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/brianhuster",
        "user_view_type": "public"
    }
}