{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\n\nI have the `omnisharp_mono` LSP installed for C# development (via Mason), and its been working great for the past number of months. I stepped away from C# for a few weeks, and when I returned I was unable to open `.cs` files without neovim freaking out:\n```\nError executing callback:                                                                                                                                                                                                                                                 \n...nvim-linux-x86_64/share/nvim/runtime/lua/vim/lsp/rpc.lua:195: cannot resume dead coroutine                                                                                                                                                                                     \nstack traceback:                                                                                                                                                                                                                                                                  \n        [C]: in function 'parse_chunk'                                                                                                                                                                                                                                            \n        ...nvim-linux-x86_64/share/nvim/runtime/lua/vim/lsp/rpc.lua:195: in function 'handler'                                                                                                                                                                                    \n        ...nvim-linux-x86_64/share/nvim/runtime/lua/vim/_system.lua:172: in function <...nvim-linux-x86_64/share/nvim/runtime/lua/vim/_system.lua:171>\n```\nI would hit enter, and the error message would just reappear, again and again. It wouldn't actually let me edit the file as I couldn't get past it. I disabled `omnisharp_mono` and the issue went away. So, I thought that was the culprit. Except, Omnisharp hasn't had an update since Dec. 2024, which is before the problem started. So I decided to mess with my LSP config. I stripped all my Omnisharp customization and configuration away until the only thing I was essentially `ensure_installed = { 'omnisharp_mono' }`, but still no cigar.\n\nI use the nightly build of neovim, and keep it up-to-date (update it roughly once a week?). My final troubleshooting step was to revert back to the latest stable neovim release (v0.11.0). Lo-and-behold, it fixed my issue. I've been running fine on stable ever since, even with all my customization/configs.\n\nI have the latest versions of all packages/language servers, as well as the latest version of Mono installed on my system.\nI don't know enough to say what caused it; but some change between the stable release and the nightly build broke my LSP.\n\n### Steps to reproduce\n\nOpen a `.cs` file with the `omnisharp_mono` LSP installed on the latest nightly build. Observe errors.\nThen, using the exact same LSP setup/config, switch to the stable release, open the same file, and see no errors.\n\nI was able to reproduce it with a blank lspconfig that basically only had `ensure_installed = { 'omnisharp_mono' }` in the Mason section, but if it helps, [here is my current lspconfig](https://github.com/Zman350x/nvim-config/blob/main/lua/zman/plugins/lsp/lspconfig.lua).\n\n### Expected behavior\n\nAble to open/edit a `.cs` file without issue, and with a working LSP.\n\n### Nvim version (nvim -v)\n\nv0.12.0-dev-178+gd3cded796c\n\n### Vim (not Nvim) behaves the same?\n\nN/A\n\n### Operating system/version\n\nKDE Neon 6.3\n\n### Terminal name/version\n\nkonsole 25.04.0\n\n### $TERM environment variable\n\ntmux-256color\n\n### Installation\n\nother, extracting the `.tag.gz` (either nightly or release) into my `/usr/local/bin`",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "Please bisect, and if possible provide a minimal(!) config we can test with `nvim --clean -u test.lua`.",
            "created_at": "2025-04-21T11:40:48Z",
            "html_url": "https://github.com/neovim/neovim/issues/33564#issuecomment-2818244856",
            "id": 2818244856,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33564",
            "node_id": "IC_kwDOAPphoM6n-wD4",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2818244856/reactions"
            },
            "updated_at": "2025-04-21T11:41:34Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2818244856",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "For reference: you are using the legacy `lspconfig[\"omnisharp_mono\"].setup()`, it may be worth trying `vim.lsp.config` instead.",
            "created_at": "2025-04-21T15:09:44Z",
            "html_url": "https://github.com/neovim/neovim/issues/33564#issuecomment-2818716500",
            "id": 2818716500,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33564",
            "node_id": "IC_kwDOAPphoM6oAjNU",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2818716500/reactions"
            },
            "updated_at": "2025-04-21T15:09:44Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2818716500",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "Here's the output of my bisect:\n```\nf517fcd14847e30c55b88b2ccffdb6ba4b80018c is the first bad commit\ncommit f517fcd14847e30c55b88b2ccffdb6ba4b80018c\nAuthor: Mathias Fussenegger <f.mathias@zignar.net>\nDate:   Sun Dec 8 18:14:30 2024 +0100\n\n    perf(lsp): use string.buffer for rpc loop\n\n    Avoids some table allocations.\n    In a quick test over 50000 iterations it reduces the time from 130ms to\n    74 ms\n\n    For the test setup details see:\n\n    https://github.com/mfussenegger/nvim-dap/pull/1394#issue-2725352391\n\n runtime/lua/vim/lsp/rpc.lua | 144 ++++++++++++++++++++++++++------------------\n 1 file changed, 87 insertions(+), 57 deletions(-)\n```\n[Commit here](https://github.com/neovim/neovim/commit/f517fcd14847e30c55b88b2ccffdb6ba4b80018c)\n\nWill make a minimal config/try the new config setup you mentioned next time I get the chance.",
            "created_at": "2025-04-22T04:15:32Z",
            "html_url": "https://github.com/neovim/neovim/issues/33564#issuecomment-2820017321",
            "id": 2820017321,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33564",
            "node_id": "IC_kwDOAPphoM6oFgyp",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2820017321/reactions"
            },
            "updated_at": "2025-04-22T04:17:10Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2820017321",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/34630441?v=4",
                "events_url": "https://api.github.com/users/Zman350x/events{/privacy}",
                "followers_url": "https://api.github.com/users/Zman350x/followers",
                "following_url": "https://api.github.com/users/Zman350x/following{/other_user}",
                "gists_url": "https://api.github.com/users/Zman350x/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Zman350x",
                "id": 34630441,
                "login": "Zman350x",
                "node_id": "MDQ6VXNlcjM0NjMwNDQx",
                "organizations_url": "https://api.github.com/users/Zman350x/orgs",
                "received_events_url": "https://api.github.com/users/Zman350x/received_events",
                "repos_url": "https://api.github.com/users/Zman350x/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Zman350x/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Zman350x/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Zman350x",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "@lewis6991 ",
            "created_at": "2025-04-22T08:00:22Z",
            "html_url": "https://github.com/neovim/neovim/issues/33564#issuecomment-2820494832",
            "id": 2820494832,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33564",
            "node_id": "IC_kwDOAPphoM6oHVXw",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2820494832/reactions"
            },
            "updated_at": "2025-04-22T08:00:22Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2820494832",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "Here having the same issue when using `pylsp` and enabling `rope` on `v0.12.0-dev-195+g82f08f33c1`.\nCan confirm that issue does not occur on `42657e70b8a8ddf8edbe261f410aeb6169e5f6dc` (the last good commit), and occurs on `f517fcd14847e30c55b88b2ccffdb6ba4b80018c`",
            "created_at": "2025-04-22T20:54:41Z",
            "html_url": "https://github.com/neovim/neovim/issues/33564#issuecomment-2822462730",
            "id": 2822462730,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33564",
            "node_id": "IC_kwDOAPphoM6oO10K",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2822462730/reactions"
            },
            "updated_at": "2025-04-23T11:54:11Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2822462730",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/20543337?v=4",
                "events_url": "https://api.github.com/users/4rgc/events{/privacy}",
                "followers_url": "https://api.github.com/users/4rgc/followers",
                "following_url": "https://api.github.com/users/4rgc/following{/other_user}",
                "gists_url": "https://api.github.com/users/4rgc/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/4rgc",
                "id": 20543337,
                "login": "4rgc",
                "node_id": "MDQ6VXNlcjIwNTQzMzM3",
                "organizations_url": "https://api.github.com/users/4rgc/orgs",
                "received_events_url": "https://api.github.com/users/4rgc/received_events",
                "repos_url": "https://api.github.com/users/4rgc/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/4rgc/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/4rgc/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/4rgc",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "Here's a minimal config that triggers it:\n```lua\nfor name, url in pairs {\n  lspconfig = 'https://github.com/neovim/nvim-lspconfig',\n  mason = 'https://github.com/williamboman/mason.nvim',\n  mason_lspconfig = 'https://github.com/williamboman/mason-lspconfig.nvim',\n  cmp_nvim_lsp = 'https://github.com/hrsh7th/cmp-nvim-lsp',\n} do\n  local install_path = vim.fn.fnamemodify('nvim_issue/' .. name, ':p')\n  if vim.fn.isdirectory(install_path) == 0 then\n    vim.fn.system({ 'git', 'clone', '--depth=1', url, install_path })\n  end\n  vim.opt.runtimepath:append(install_path)\nend\n\nvim.cmd([[set rtp+=nvim_issue/mason.nvim]])\n\n-- LSP setup mimicking your original config\nlocal lspconfig = require('lspconfig')\nlocal mason = require('mason')\nlocal mason_lspconfig = require('mason-lspconfig')\nlocal capabilities = require('cmp_nvim_lsp').default_capabilities()\n\nmason.setup()\n\nmason_lspconfig.setup({\n  ensure_installed = { \"omnisharp_mono\" },\n})\n\nmason_lspconfig.setup_handlers({\n  function(server_name)\n    lspconfig[server_name].setup({\n      capabilities = capabilities,\n      settings = {\n        Lua = {\n          diagnostics = {\n            globals = { 'vim', 'Snacks' },\n          },\n        },\n      },\n    })\n  end,\n})\n\nvim.api.nvim_create_autocmd('LspAttach', {\n  callback = function(args)\n    local bufnr = args.buf\n    local opts = { buffer = bufnr }\n    vim.keymap.set('n', 'gd', vim.lsp.buf.definition, opts)\n    vim.keymap.set('n', 'K', vim.lsp.buf.hover, opts)\n  end,\n})\n```\nJust open a `.cs` file with this config. Even this works:\n```\ntouch empty.cs\nnvim -u minimal.lua empty.cs\n```\nYou may need Mono installed on your system for the LSP to work? idk",
            "created_at": "2025-04-23T02:01:45Z",
            "html_url": "https://github.com/neovim/neovim/issues/33564#issuecomment-2822873749",
            "id": 2822873749,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33564",
            "node_id": "IC_kwDOAPphoM6oQaKV",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2822873749/reactions"
            },
            "updated_at": "2025-04-23T02:01:45Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2822873749",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/34630441?v=4",
                "events_url": "https://api.github.com/users/Zman350x/events{/privacy}",
                "followers_url": "https://api.github.com/users/Zman350x/followers",
                "following_url": "https://api.github.com/users/Zman350x/following{/other_user}",
                "gists_url": "https://api.github.com/users/Zman350x/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Zman350x",
                "id": 34630441,
                "login": "Zman350x",
                "node_id": "MDQ6VXNlcjM0NjMwNDQx",
                "organizations_url": "https://api.github.com/users/Zman350x/orgs",
                "received_events_url": "https://api.github.com/users/Zman350x/received_events",
                "repos_url": "https://api.github.com/users/Zman350x/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Zman350x/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Zman350x/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Zman350x",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Hi, @Zman350x, I'm trying to reproduce the issue using the minimal config above, and the error I'm seeing is:\n```log\nLua callback:\n../neovim/runtime/lua/vim/lsp/rpc.lua:199: ../neovim/runtime/lua/vim/lsp/rpc.lua:36: Content\n-Length not found in header: <feff>Content-Length: 185\n\nstack traceback:\n        [C]: in function 'parse_chunk'\n        ../neovim/runtime/lua/vim/lsp/rpc.lua:199: in function ''\n        vim/_system.lua: in function <vim/_system.lua:0>\nLua callback:\n../neovim/runtime/lua/vim/lsp/rpc.lua:199: cannot resume dead coroutine\nstack traceback:\n        [C]: in function 'parse_chunk'\n        ../neovim/runtime/lua/vim/lsp/rpc.lua:199: in function ''\n        vim/_system.lua: in function <vim/_system.lua:0>\n...\n``` \nThis is happening because when the `omnisharp-mono` start parameter includes `--encoding utf-8`,  server will write BOM to the response stream first, and the workaround for this case was removed in commit [`f517fcd`](https://github.com/neovim/neovim/commit/f517fcd14847e30c55b88b2ccffdb6ba4b80018c), which caused this issue.\n\nIf you're also seeing `<feff>` at the top of your error stack, you can try triming the BOM like PR #35743, to see if that resolves the issue.\n\nBTW, that workaround was specifically added for `omnisharp` ([227dd23](https://github.com/neovim/neovim/pull/11336/commits/227dd23b57debb5e00bd446a214c22ee379442e9)), though at the time it wasn't clear if the issue was also caused by BOM. Since I'm not sure if we want to re-add a workaround, so I set the PR to draft for now, and there aren't any similar test case yet. :) \n",
            "created_at": "2025-09-13T08:34:59Z",
            "html_url": "https://github.com/neovim/neovim/issues/33564#issuecomment-3287802241",
            "id": 3287802241,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33564",
            "node_id": "IC_kwDOAPphoM7D9-GB",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3287802241/reactions"
            },
            "updated_at": "2025-09-13T11:11:43Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3287802241",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/8579651?v=4",
                "events_url": "https://api.github.com/users/ntdiary/events{/privacy}",
                "followers_url": "https://api.github.com/users/ntdiary/followers",
                "following_url": "https://api.github.com/users/ntdiary/following{/other_user}",
                "gists_url": "https://api.github.com/users/ntdiary/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ntdiary",
                "id": 8579651,
                "login": "ntdiary",
                "node_id": "MDQ6VXNlcjg1Nzk2NTE=",
                "organizations_url": "https://api.github.com/users/ntdiary/orgs",
                "received_events_url": "https://api.github.com/users/ntdiary/received_events",
                "repos_url": "https://api.github.com/users/ntdiary/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ntdiary/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ntdiary/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ntdiary",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "That workaround was removed intentionally (this is a hot path!). Isn't this rather an issue with `omnisharp-mono`? I can't imagine (but do not know) that putting a BOM here is compliant with the specification.",
            "created_at": "2025-09-13T08:37:18Z",
            "html_url": "https://github.com/neovim/neovim/issues/33564#issuecomment-3287805710",
            "id": 3287805710,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33564",
            "node_id": "IC_kwDOAPphoM7D9-8O",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3287805710/reactions"
            },
            "updated_at": "2025-09-13T08:37:18Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3287805710",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "> That workaround was removed intentionally (this is a hot path!). Isn't this rather an issue with `omnisharp-mono`? I can't imagine (but do not know) that putting a BOM here is compliant with the specification.\n\nI completely agree that `omnisharp` shouldn't be writing BOM! And maybe some newer variants no longer do this by default, but I'm not familiar with the C# ecosystem, and not sure how widespread the problematic versions are. Additionally, I also looked at the `vscode-csharp` repo and found that they had to specifically add a `removeBOMFromString` method as well. 😂\n\nhttps://github.com/dotnet/vscode-csharp/blob/884bb69fd7f5fe2d067d138bf45605ec255b3c9e/src/omnisharp/engines/stdioEngine.ts#L392\n",
            "created_at": "2025-09-13T08:55:45Z",
            "html_url": "https://github.com/neovim/neovim/issues/33564#issuecomment-3287847628",
            "id": 3287847628,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33564",
            "node_id": "IC_kwDOAPphoM7D-JLM",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3287847628/reactions"
            },
            "updated_at": "2025-09-13T08:55:45Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3287847628",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/8579651?v=4",
                "events_url": "https://api.github.com/users/ntdiary/events{/privacy}",
                "followers_url": "https://api.github.com/users/ntdiary/followers",
                "following_url": "https://api.github.com/users/ntdiary/following{/other_user}",
                "gists_url": "https://api.github.com/users/ntdiary/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ntdiary",
                "id": 8579651,
                "login": "ntdiary",
                "node_id": "MDQ6VXNlcjg1Nzk2NTE=",
                "organizations_url": "https://api.github.com/users/ntdiary/orgs",
                "received_events_url": "https://api.github.com/users/ntdiary/received_events",
                "repos_url": "https://api.github.com/users/ntdiary/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ntdiary/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ntdiary/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ntdiary",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Yes, but VS Code is not our spirit animal. We implement the specification as written (otherwise bad servers will never get fixed, and every editor will have to carry around such random baggage).",
            "created_at": "2025-09-13T08:57:02Z",
            "html_url": "https://github.com/neovim/neovim/issues/33564#issuecomment-3287850768",
            "id": 3287850768,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33564",
            "node_id": "IC_kwDOAPphoM7D-J8Q",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3287850768/reactions"
            },
            "updated_at": "2025-09-13T08:57:38Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3287850768",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "> Yes, but VS Code is not our spirit animal. \n\nOf course, looking into `vscode-csharp` was just part of my investigation for this issue. My other purpose for [commenting](https://github.com/neovim/neovim/issues/33564#issuecomment-3287802241) was to see if the OP was indeed caused by the BOM. If so, and we also don't plan to fix it, then we might be able to close the issue and not spend any more time on it. 😄",
            "created_at": "2025-09-13T09:07:01Z",
            "html_url": "https://github.com/neovim/neovim/issues/33564#issuecomment-3287873603",
            "id": 3287873603,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33564",
            "node_id": "IC_kwDOAPphoM7D-PhD",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3287873603/reactions"
            },
            "updated_at": "2025-09-13T09:07:01Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3287873603",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/8579651?v=4",
                "events_url": "https://api.github.com/users/ntdiary/events{/privacy}",
                "followers_url": "https://api.github.com/users/ntdiary/followers",
                "following_url": "https://api.github.com/users/ntdiary/following{/other_user}",
                "gists_url": "https://api.github.com/users/ntdiary/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ntdiary",
                "id": 8579651,
                "login": "ntdiary",
                "node_id": "MDQ6VXNlcjg1Nzk2NTE=",
                "organizations_url": "https://api.github.com/users/ntdiary/orgs",
                "received_events_url": "https://api.github.com/users/ntdiary/received_events",
                "repos_url": "https://api.github.com/users/ntdiary/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ntdiary/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ntdiary/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ntdiary",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 11,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/33564/comments",
    "created_at": "2025-04-21T11:31:34Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/33564/events",
    "html_url": "https://github.com/neovim/neovim/issues/33564",
    "id": 3008222697,
    "issue_dependencies_summary": {
        "blocked_by": 0,
        "blocking": 0,
        "total_blocked_by": 0,
        "total_blocking": 0
    },
    "labels": [
        {
            "color": "f9d0c4",
            "default": false,
            "description": "wrong behavior that was introduced in a previous commit (please bisect)",
            "id": 619474658,
            "name": "bug-regression",
            "node_id": "MDU6TGFiZWw2MTk0NzQ2NTg=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug-regression"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": null,
            "id": 662566370,
            "name": "lsp",
            "node_id": "MDU6TGFiZWw2NjI1NjYzNzA=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/lsp"
        },
        {
            "color": "0E8A16",
            "default": false,
            "description": "issue has been tracked to a specific commit",
            "id": 1481421490,
            "name": "has:bisected",
            "node_id": "MDU6TGFiZWwxNDgxNDIxNDkw",
            "url": "https://api.github.com/repos/neovim/neovim/labels/has:bisected"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/33564/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 119,
        "created_at": "2024-05-16T14:11:54Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
            "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
            "followers_url": "https://api.github.com/users/justinmk/followers",
            "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/justinmk",
            "id": 1359421,
            "login": "justinmk",
            "node_id": "MDQ6VXNlcjEzNTk0MjE=",
            "organizations_url": "https://api.github.com/users/justinmk/orgs",
            "received_events_url": "https://api.github.com/users/justinmk/received_events",
            "repos_url": "https://api.github.com/users/justinmk/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/justinmk",
            "user_view_type": "public"
        },
        "description": "",
        "due_on": "2025-12-25T08:00:00Z",
        "html_url": "https://github.com/neovim/neovim/milestone/43",
        "id": 11063573,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/43/labels",
        "node_id": "MI_kwDOAPphoM4AqNEV",
        "number": 43,
        "open_issues": 72,
        "state": "open",
        "title": "0.12",
        "updated_at": "2025-09-13T21:57:06Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/43"
    },
    "node_id": "I_kwDOAPphoM6zTdXp",
    "number": 33564,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 1,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 1,
        "url": "https://api.github.com/repos/neovim/neovim/issues/33564/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/33564/timeline",
    "title": "LSP: \"rpc.lua:195: cannot resume dead coroutine\" (bisected to \"use string.buffer for rpc loop\")",
    "type": {
        "color": "red",
        "created_at": "2024-01-25T10:10:19Z",
        "description": "An unexpected problem or behavior",
        "id": 597163,
        "is_enabled": true,
        "name": "Bug",
        "node_id": "IT_kwDOAGK_Pc4ACRyr",
        "updated_at": "2024-07-26T10:12:30Z"
    },
    "updated_at": "2025-09-13T11:11:43Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/33564",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/34630441?v=4",
        "events_url": "https://api.github.com/users/Zman350x/events{/privacy}",
        "followers_url": "https://api.github.com/users/Zman350x/followers",
        "following_url": "https://api.github.com/users/Zman350x/following{/other_user}",
        "gists_url": "https://api.github.com/users/Zman350x/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/Zman350x",
        "id": 34630441,
        "login": "Zman350x",
        "node_id": "MDQ6VXNlcjM0NjMwNDQx",
        "organizations_url": "https://api.github.com/users/Zman350x/orgs",
        "received_events_url": "https://api.github.com/users/Zman350x/received_events",
        "repos_url": "https://api.github.com/users/Zman350x/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/Zman350x/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Zman350x/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/Zman350x",
        "user_view_type": "public"
    }
}