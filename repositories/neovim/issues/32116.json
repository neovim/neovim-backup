{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\n\nIn a Lua plugin, when trying to get the path to some file within the plugin dir (e.g. to load a JSON file from the plugin dynamically), there *seems* to be no obvious / intuitive way to do that. `nvim_get_runtime_file()` looks in a lot of places and you kind of have to hope that there is no naming conflict. Looking into how other plugins solve that, the only other way I found is the following snippet within `telescope` for their planets picker:\n\n```lua\nlocal sourced_file = require(\"plenary.debug_utils\").sourced_filepath()\nlocal base_directory = vim.fn.fnamemodify(sourced_file, \":h:h:h:h\")\nlocal globbed_files = vim.fn.globpath(base_directory .. \"/data/memes/planets/\", \"*\", true, true)\n```\n\nwith `plenay.debug_utils.sourced_filepath()` relying on `debug.getinfo()`, which seems undesirable.\n\n### Expected behavior\n\nWhen coming from other scripting environments (JS, Python, Ruby...), one's intuition might be to look for some way to get the path of the current script file (via some function or magic global), to append a relative path onto. Maybe it would be possible to expose the path the loader found when loading the lua file to the script in the file somehow?",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "`debug.getinfo()` is currently the answer that I'm aware of. \n\nPerhaps `vim.fn.expand('<script>')` could support Lua better.",
            "created_at": "2025-01-20T01:01:27Z",
            "html_url": "https://github.com/neovim/neovim/issues/32116#issuecomment-2601123201",
            "id": 2601123201,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32116",
            "node_id": "IC_kwDOAPphoM6bCf2B",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2601123201/reactions"
            },
            "updated_at": "2025-01-20T01:01:27Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2601123201",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 1,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/32116/comments",
    "created_at": "2025-01-19T23:55:11Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/32116/events",
    "html_url": "https://github.com/neovim/neovim/issues/32116",
    "id": 2797898643,
    "labels": [
        {
            "color": "BFDADC",
            "default": false,
            "description": "Low-risk, self-contained. Do NOT ask \"can I work on this\", just read CONTRIBUTING.md",
            "id": 407246773,
            "name": "complexity:low",
            "node_id": "MDU6TGFiZWw0MDcyNDY3NzM=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/complexity:low"
        },
        {
            "color": "0E8A16",
            "default": false,
            "description": "issue is not fixed but can be circumvented until then",
            "id": 435850181,
            "name": "has:workaround",
            "node_id": "MDU6TGFiZWw0MzU4NTAxODE=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/has:workaround"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "stdlib",
            "id": 573222693,
            "name": "lua",
            "node_id": "MDU6TGFiZWw1NzMyMjI2OTM=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/lua"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/32116/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 686,
        "created_at": "2014-05-10T20:43:04Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
            "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
            "followers_url": "https://api.github.com/users/justinmk/followers",
            "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/justinmk",
            "id": 1359421,
            "login": "justinmk",
            "node_id": "MDQ6VXNlcjEzNTk0MjE=",
            "organizations_url": "https://api.github.com/users/justinmk/orgs",
            "received_events_url": "https://api.github.com/users/justinmk/received_events",
            "repos_url": "https://api.github.com/users/justinmk/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/justinmk",
            "user_view_type": "public"
        },
        "description": "Low priority items. We plan to work on this but don't have a target date.",
        "due_on": null,
        "html_url": "https://github.com/neovim/neovim/milestone/6",
        "id": 655037,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/6/labels",
        "node_id": "MDk6TWlsZXN0b25lNjU1MDM3",
        "number": 6,
        "open_issues": 635,
        "state": "open",
        "title": "backlog",
        "updated_at": "2025-01-21T00:09:37Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/6"
    },
    "node_id": "I_kwDOAPphoM6mxIuT",
    "number": 32116,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 1,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 1,
        "url": "https://api.github.com/repos/neovim/neovim/issues/32116/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/32116/timeline",
    "title": "Lua: get path of current script/module file",
    "updated_at": "2025-01-20T01:01:28Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/32116",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/3419961?v=4",
        "events_url": "https://api.github.com/users/LionC/events{/privacy}",
        "followers_url": "https://api.github.com/users/LionC/followers",
        "following_url": "https://api.github.com/users/LionC/following{/other_user}",
        "gists_url": "https://api.github.com/users/LionC/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/LionC",
        "id": 3419961,
        "login": "LionC",
        "node_id": "MDQ6VXNlcjM0MTk5NjE=",
        "organizations_url": "https://api.github.com/users/LionC/orgs",
        "received_events_url": "https://api.github.com/users/LionC/received_events",
        "repos_url": "https://api.github.com/users/LionC/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/LionC/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/LionC/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/LionC",
        "user_view_type": "public"
    }
}