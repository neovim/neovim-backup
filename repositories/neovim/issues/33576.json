{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\n\nAfter commit 28e31f5d3d16fac349d5e2b55837afddb822b0f3, `statusline` now has a default expression. This breaks behavior where a user sets `statusline = \"\"` (the previous default value of not being set) and the new value always takes place.\n\nOriginally started from `lualine.nvim` not setting any more its own `vim.o.statusline = \"%#lualine_transparent#\"`, since it depended on a check if `statusline` was not set.\n\nCan also be reproduced with following `repro.lua`\n```lua\n-- Run this file as `nvim --clean -u minimal.lua`\n\nfor name, url in pairs({\n\t-- ADD PLUGINS _NECESSARY_ TO REPRODUCE THE ISSUE, e.g:\n\t-- 'https://github.com/author1/plugin1',\n\t-- 'https://github.com/author2/plugin2',\n}) do\n\tlocal install_path = vim.fn.fnamemodify(\"nvim_issue/\" .. name, \":p\")\n\tif vim.fn.isdirectory(install_path) == 0 then\n\t\tvim.fn.system({ \"git\", \"clone\", \"--depth=1\", url, install_path })\n\tend\n\tvim.opt.runtimepath:append(install_path)\nend\n\n-- ADD INIT.LUA SETTINGS _NECESSARY_ FOR REPRODUCING THE ISSUE\n\nvim.opt.statusline = \"\"\n```\nDoing `nvim --clean -u repro.lua` and then `:set stl?` it still shows the default Neovim statusline set.\n\nAfter commenting directly on #33036, there was comment about opening a new issue, so I did\n> These reports seem to indicate we should go with\n> \n>     should the default be ''? what happens if user sets '' ? for back-compat, we may want empty string to internally use your new default expression, without returning the expression.\n> Please open a new issue.\n> _Originally posted by @luukvbaal in https://github.com/neovim/neovim/issues/33036#issuecomment-2820936467_\n            \n\n\n### Steps to reproduce\n\nnvim --clean -u repro.lua\n:set stl?\n\n### Expected behavior\n\nStatusline should not be set to a default value??\n\n### Nvim version (nvim -v)\n\nNVIM v0.12.0-dev-192+g65170e8dad Build type: RelWithDebInfo LuaJIT 2.1.1744317938\n\n### Vim (not Nvim) behaves the same?\n\ndid not check\n\n### Operating system/version\n\nLinux Mint 21.3\n\n### Terminal name/version\n\nkitty 0.41.1\n\n### $TERM environment variable\n\nxterm-kitty\n\n### Installation\n\nvia [bob](https://github.com/MordechaiHadad/bob)",
    "closed_at": "2025-04-22T15:00:32Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/12776461?v=4",
        "events_url": "https://api.github.com/users/dpetka2001/events{/privacy}",
        "followers_url": "https://api.github.com/users/dpetka2001/followers",
        "following_url": "https://api.github.com/users/dpetka2001/following{/other_user}",
        "gists_url": "https://api.github.com/users/dpetka2001/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/dpetka2001",
        "id": 12776461,
        "login": "dpetka2001",
        "node_id": "MDQ6VXNlcjEyNzc2NDYx",
        "organizations_url": "https://api.github.com/users/dpetka2001/orgs",
        "received_events_url": "https://api.github.com/users/dpetka2001/received_events",
        "repos_url": "https://api.github.com/users/dpetka2001/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/dpetka2001/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/dpetka2001/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/dpetka2001",
        "user_view_type": "public"
    },
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "@shadmansaleh ",
            "created_at": "2025-04-22T12:45:23Z",
            "html_url": "https://github.com/neovim/neovim/issues/33576#issuecomment-2821217954",
            "id": 2821217954,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33576",
            "node_id": "IC_kwDOAPphoM6oKF6i",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2821217954/reactions"
            },
            "updated_at": "2025-04-22T12:45:23Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2821217954",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "This is somehting I'll fix in Lualine. I'll push an update tonight, hopefully. This is an expected breaking change when we started exposing the actual default statusline through the option.\n\n\n> Doing nvim --clean -u repro.lua and then :set stl? it still shows the default Neovim statusline set.\n\n\n@dpetka2001 only thing breaking in here is that 'stl' shows the value of default option right? Even before if you'd do `:set stl=` It'd not show empty statusline. In the statusline it'll show you the default one but in the option it'll show you empty string right? In that case, my argument basically is that the statusline on view and the statusline option should be in sync just like any other option.\n\nIncompatibility in lualine has been [fixed](https://github.com/nvim-lualine/lualine.nvim/commit/64aa18e3c67b35e0c7f3e63d2c4f0fb76869248c)",
            "created_at": "2025-04-22T14:14:07Z",
            "html_url": "https://github.com/neovim/neovim/issues/33576#issuecomment-2821480179",
            "id": 2821480179,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33576",
            "node_id": "IC_kwDOAPphoM6oLF7z",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2821480179/reactions"
            },
            "updated_at": "2025-04-22T14:46:45Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2821480179",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/13149513?v=4",
                "events_url": "https://api.github.com/users/shadmansaleh/events{/privacy}",
                "followers_url": "https://api.github.com/users/shadmansaleh/followers",
                "following_url": "https://api.github.com/users/shadmansaleh/following{/other_user}",
                "gists_url": "https://api.github.com/users/shadmansaleh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/shadmansaleh",
                "id": 13149513,
                "login": "shadmansaleh",
                "node_id": "MDQ6VXNlcjEzMTQ5NTEz",
                "organizations_url": "https://api.github.com/users/shadmansaleh/orgs",
                "received_events_url": "https://api.github.com/users/shadmansaleh/received_events",
                "repos_url": "https://api.github.com/users/shadmansaleh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/shadmansaleh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/shadmansaleh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/shadmansaleh",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "@shadmansaleh Yes, even before #33036 was merged, the value on the dashboard wouldn't be empty. It would just be set to `statusline=%#lualine_transparent#`.\n\nI can confirm that it has been fixed with latest lualine update. Thanks to everyone involved. Like I also mentioned in the PR I didn't know if this should be handled in Neovim or lualine and initially created an issue in Lualine about this. I only created this issue after a comment about creating a new issue. Hope I did not cause any unnecessary friction. Again thnx to everyone involved in this project ðŸ˜„ ",
            "created_at": "2025-04-22T15:00:32Z",
            "html_url": "https://github.com/neovim/neovim/issues/33576#issuecomment-2821622589",
            "id": 2821622589,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33576",
            "node_id": "IC_kwDOAPphoM6oLos9",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2821622589/reactions"
            },
            "updated_at": "2025-04-22T15:00:32Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2821622589",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/12776461?v=4",
                "events_url": "https://api.github.com/users/dpetka2001/events{/privacy}",
                "followers_url": "https://api.github.com/users/dpetka2001/followers",
                "following_url": "https://api.github.com/users/dpetka2001/following{/other_user}",
                "gists_url": "https://api.github.com/users/dpetka2001/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/dpetka2001",
                "id": 12776461,
                "login": "dpetka2001",
                "node_id": "MDQ6VXNlcjEyNzc2NDYx",
                "organizations_url": "https://api.github.com/users/dpetka2001/orgs",
                "received_events_url": "https://api.github.com/users/dpetka2001/received_events",
                "repos_url": "https://api.github.com/users/dpetka2001/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/dpetka2001/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/dpetka2001/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/dpetka2001",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "> It would just be set to statusline=%#lualine_transparent#\n\nThat wasn't neovims behavior. That was done by lualine. The core behavior before #33036 was that it'd show you the default statusline but in the statusline option it'd show you empty string. After #33036 it shows the default statusline in statusline option too. That was the breakage. We did consider it. But it still seemed sensible not to hide the 'statusline' options value.\n\n> I only created this issue after a comment about creating a new issue. Hope I did not cause any unnecessary friction. Again thnx to everyone involved in this project ðŸ˜„\n\nNah, it's fine. I was aware of the problem with lualine while working on the pr. I was always planning to make a fix on Lualine once #33036 was approved.\n",
            "created_at": "2025-04-22T15:06:10Z",
            "html_url": "https://github.com/neovim/neovim/issues/33576#issuecomment-2821639517",
            "id": 2821639517,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33576",
            "node_id": "IC_kwDOAPphoM6oLs1d",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2821639517/reactions"
            },
            "updated_at": "2025-04-22T15:06:10Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2821639517",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/13149513?v=4",
                "events_url": "https://api.github.com/users/shadmansaleh/events{/privacy}",
                "followers_url": "https://api.github.com/users/shadmansaleh/followers",
                "following_url": "https://api.github.com/users/shadmansaleh/following{/other_user}",
                "gists_url": "https://api.github.com/users/shadmansaleh/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/shadmansaleh",
                "id": 13149513,
                "login": "shadmansaleh",
                "node_id": "MDQ6VXNlcjEzMTQ5NTEz",
                "organizations_url": "https://api.github.com/users/shadmansaleh/orgs",
                "received_events_url": "https://api.github.com/users/shadmansaleh/received_events",
                "repos_url": "https://api.github.com/users/shadmansaleh/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/shadmansaleh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/shadmansaleh/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/shadmansaleh",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 4,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/33576/comments",
    "created_at": "2025-04-22T12:36:47Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/33576/events",
    "html_url": "https://github.com/neovim/neovim/issues/33576",
    "id": 3010957999,
    "labels": [
        {
            "color": "f9d0c4",
            "default": false,
            "description": "wrong behavior that was introduced in a previous commit (please bisect)",
            "id": 619474658,
            "name": "bug-regression",
            "node_id": "MDU6TGFiZWw2MTk0NzQ2NTg=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug-regression"
        },
        {
            "color": "C5DEF5",
            "default": false,
            "description": "tabline, winbar, statuscolumn",
            "id": 3385615828,
            "name": "statusline",
            "node_id": "LA_kwDOAPphoM7JzGXU",
            "url": "https://api.github.com/repos/neovim/neovim/labels/statusline"
        },
        {
            "color": "C5DEF5",
            "default": false,
            "description": "configuration, settings",
            "id": 4242493821,
            "name": "options",
            "node_id": "LA_kwDOAPphoM7831F9",
            "url": "https://api.github.com/repos/neovim/neovim/labels/options"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/33576/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 33,
        "created_at": "2024-05-16T14:11:54Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
            "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
            "followers_url": "https://api.github.com/users/justinmk/followers",
            "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/justinmk",
            "id": 1359421,
            "login": "justinmk",
            "node_id": "MDQ6VXNlcjEzNTk0MjE=",
            "organizations_url": "https://api.github.com/users/justinmk/orgs",
            "received_events_url": "https://api.github.com/users/justinmk/received_events",
            "repos_url": "https://api.github.com/users/justinmk/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/justinmk",
            "user_view_type": "public"
        },
        "description": "",
        "due_on": null,
        "html_url": "https://github.com/neovim/neovim/milestone/43",
        "id": 11063573,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/43/labels",
        "node_id": "MI_kwDOAPphoM4AqNEV",
        "number": 43,
        "open_issues": 68,
        "state": "open",
        "title": "0.12",
        "updated_at": "2025-04-28T13:01:46Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/43"
    },
    "node_id": "I_kwDOAPphoM6zd5Kv",
    "number": 33576,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/33576/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "completed",
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/33576/timeline",
    "title": "New statusline expression breaks behavior",
    "type": {
        "color": "red",
        "created_at": "2024-01-25T10:10:19Z",
        "description": "An unexpected problem or behavior",
        "id": 597163,
        "is_enabled": true,
        "name": "Bug",
        "node_id": "IT_kwDOAGK_Pc4ACRyr",
        "updated_at": "2024-07-26T10:12:30Z"
    },
    "updated_at": "2025-04-22T15:06:11Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/33576",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/12776461?v=4",
        "events_url": "https://api.github.com/users/dpetka2001/events{/privacy}",
        "followers_url": "https://api.github.com/users/dpetka2001/followers",
        "following_url": "https://api.github.com/users/dpetka2001/following{/other_user}",
        "gists_url": "https://api.github.com/users/dpetka2001/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/dpetka2001",
        "id": 12776461,
        "login": "dpetka2001",
        "node_id": "MDQ6VXNlcjEyNzc2NDYx",
        "organizations_url": "https://api.github.com/users/dpetka2001/orgs",
        "received_events_url": "https://api.github.com/users/dpetka2001/received_events",
        "repos_url": "https://api.github.com/users/dpetka2001/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/dpetka2001/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/dpetka2001/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/dpetka2001",
        "user_view_type": "public"
    }
}