{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\r\n\r\nThis is very similar to #29037 and might be the same.\r\n\r\nI was opening a 587MB restic log file and after a few seconds neovim would crash with one of these:\r\n1. `realloc(): invalid next size`\r\n2. `malloc(): invalid next size (unsorted)`\r\n3. `corrupted size vs. prev_size`\r\n\r\nthere might be more.\r\n\r\nDisabling the `copilot.lua` plugin does seem to circumvent the issue.\r\n\r\nUnfortunately it seems this depends a lot on my full setup and the stacktraces seem to have gaps in them.\r\nA `find / -xdev -ls > large_file` + 'nvim large_file` seems to also trigger the issue, maybe it will on other machines also.\r\n\r\nMaybe this is just a luajit issue?\r\n\r\nWhat I can provide next or do to help?\r\n\r\n\r\nDetails:\r\nneovim from Arch (extra) with astronvim and a bunch of plugins.\r\n\r\n```\r\nNVIM v0.10.1\r\nBuild type: Release\r\nLuaJIT 2.1.1723675123\r\n```\r\n\r\nBacktraces:\r\n1.`realloc(): invalid next size`\r\n```\r\n#0  __pthread_kill_implementation (threadid=<optimized out>, signo=signo@entry=6, no_tid=no_tid@entry=0) at pthread_kill.c:44\r\n#1  0x00007633cdcae463 in __pthread_kill_internal (threadid=<optimized out>, signo=6) at pthread_kill.c:78\r\n#2  0x00007633cdc55120 in __GI_raise (sig=sig@entry=6) at ../sysdeps/posix/raise.c:26\r\n#3  0x00007633cdc3c4c3 in __GI_abort () at abort.c:79\r\n#4  0x00007633cdc3d354 in __libc_message_impl (fmt=fmt@entry=0x7633cddcb2f5 \"%s\\n\") at ../sysdeps/posix/libc_fatal.c:132\r\n#5  0x00007633cdcb8765 in malloc_printerr (str=str@entry=0x7633cddc9169 \"realloc(): invalid next size\") at malloc.c:5772\r\n#6  0x00007633cdcbca04 in _int_realloc (av=av@entry=0x7633cddffac0 <main_arena>, oldp=oldp@entry=0x5a2f33193650, oldsize=oldsize@entry=8192, nb=nb@entry=16384) at malloc.c:4939\r\n#7  0x00007633cdcbda15 in __GI___libc_realloc (oldmem=0x5a2f33193660, bytes=16368) at malloc.c:3508\r\n#8  0x00005a2ede3f3b9c in ?? ()\r\n#9  0x00005a2ede3f4470 in ?? ()\r\n#10 0x00005a2ede3f4470 in ?? ()\r\n#11 0x00005a2ede3f4470 in ?? ()\r\n#12 0x00005a2ede3f4b48 in ?? ()\r\n#13 0x00007633cdf60f06 in lj_BC_FUNCC () at buildvm_x86.dasc:857\r\n#14 0x00007633cdf7512a in lua_pcall (L=0x7633ce096380, nargs=<optimized out>, nresults=0, errfunc=<optimized out>) at /usr/src/debug/luajit/LuaJIT-ae4735f621d89d84758769b76432d2319dda9827/src/lj_api.c:1122\r\n#15 0x00005a2ede1e8e08 in ?? ()\r\n#16 0x00005a2ede35af18 in state_handle_k_event ()\r\n#17 0x00005a2ede270ae1 in ?? ()\r\n#18 0x00005a2ede260b67 in ?? ()\r\n#19 0x00005a2ede35acc3 in state_enter ()\r\n#20 0x00005a2ede25dd2a in normal_enter ()\r\n#21 0x00005a2eddff7b27 in main ()\r\n```\r\n\r\n2. `malloc(): invalid next size (unsorted)`\r\n```\r\n#0  __pthread_kill_implementation (threadid=<optimized out>, signo=signo@entry=6, no_tid=no_tid@entry=0) at pthread_kill.c:44\r\n#1  0x00007131068c9463 in __pthread_kill_internal (threadid=<optimized out>, signo=6) at pthread_kill.c:78\r\n#2  0x0000713106870120 in __GI_raise (sig=sig@entry=6) at ../sysdeps/posix/raise.c:26\r\n#3  0x00007131068574c3 in __GI_abort () at abort.c:79\r\n#4  0x0000713106858354 in __libc_message_impl (fmt=fmt@entry=0x7131069e62f5 \"%s\\n\") at ../sysdeps/posix/libc_fatal.c:132\r\n#5  0x00007131068d3765 in malloc_printerr (str=str@entry=0x7131069e9908 \"malloc(): invalid next size (unsorted)\") at malloc.c:5772\r\n#6  0x00007131068d6d2c in _int_malloc (av=av@entry=0x713106a1aac0 <main_arena>, bytes=bytes@entry=16369) at malloc.c:4081\r\n#7  0x00007131068d7902 in _int_realloc (av=av@entry=0x713106a1aac0 <main_arena>, oldp=oldp@entry=0x5b6b7a2a8d80, oldsize=oldsize@entry=8192, nb=nb@entry=16384) at malloc.c:4975\r\n#8  0x00007131068d8a15 in __GI___libc_realloc (oldmem=0x5b6b7a2a8d90, bytes=16368) at malloc.c:3508\r\n#9  0x00005b6b3a2b5b9c in ?? ()\r\n#10 0x00005b6b3a2b6470 in ?? ()\r\n#11 0x00005b6b3a2b6470 in ?? ()\r\n#12 0x00005b6b3a2b6470 in ?? ()\r\n#13 0x00005b6b3a2b6b48 in ?? ()\r\n#14 0x0000713106b7bf06 in lj_BC_FUNCC () at buildvm_x86.dasc:857\r\n#15 0x0000713106b9012a in lua_pcall (L=0x713106cb1380, nargs=<optimized out>, nresults=0, errfunc=<optimized out>)\r\n    at /usr/src/debug/luajit/LuaJIT-ae4735f621d89d84758769b76432d2319dda9827/src/lj_api.c:1122\r\n#16 0x00005b6b3a0aae08 in ?? ()\r\n#17 0x00005b6b3a21cf18 in state_handle_k_event ()\r\n#18 0x00005b6b3a132ae1 in ?? ()\r\n#19 0x00005b6b3a122b67 in ?? ()\r\n#20 0x00005b6b3a21ccc3 in state_enter ()\r\n#21 0x00005b6b3a11fd2a in normal_enter ()\r\n#22 0x00005b6b39eb9b27 in main ()\r\n```\r\n\r\n3.`corrupted size vs. prev_size`\r\n\r\n```\r\n#0  __pthread_kill_implementation (threadid=<optimized out>, signo=signo@entry=6, no_tid=no_tid@entry=0) at pthread_kill.c:44\r\n#1  0x00007d2f37278463 in __pthread_kill_internal (threadid=<optimized out>, signo=6) at pthread_kill.c:78\r\n#2  0x00007d2f3721f120 in __GI_raise (sig=sig@entry=6) at ../sysdeps/posix/raise.c:26\r\n#3  0x00007d2f372064c3 in __GI_abort () at abort.c:79\r\n#4  0x00007d2f37207354 in __libc_message_impl (fmt=fmt@entry=0x7d2f373952f5 \"%s\\n\") at ../sysdeps/posix/libc_fatal.c:132\r\n#5  0x00007d2f37282765 in malloc_printerr (str=str@entry=0x7d2f37392ff8 \"corrupted size vs. prev_size\") at malloc.c:5772\r\n#6  0x00007d2f372833a6 in unlink_chunk (p=p@entry=0x5fcc0a155fd0, av=0x7d2f373c9ac0 <main_arena>) at malloc.c:1611\r\n#7  0x00007d2f372869b8 in _int_realloc (av=av@entry=0x7d2f373c9ac0 <main_arena>, oldp=oldp@entry=0x5fcc0a153fd0, oldsize=oldsize@entry=8192, nb=nb@entry=16384) at malloc.c:4969\r\n#8  0x00007d2f37287a15 in __GI___libc_realloc (oldmem=0x5fcc0a153fe0, bytes=16368) at malloc.c:3508\r\n#9  0x00005fcbc5375b9c in ?? ()\r\n#10 0x00005fcbc5376470 in ?? ()\r\n#11 0x00005fcbc5376470 in ?? ()\r\n#12 0x00005fcbc5376470 in ?? ()\r\n#13 0x00005fcbc5376b48 in ?? ()\r\n#14 0x00007d2f3752af06 in lj_BC_FUNCC () at buildvm_x86.dasc:857\r\n#15 0x00007d2f3753f12a in lua_pcall (L=0x7d2f37660380, nargs=<optimized out>, nresults=0, errfunc=<optimized out>) at /usr/src/debug/luajit/LuaJIT-ae4735f621d89d84758769b76432d2319dda9827/src/lj_api.c:1122\r\n#16 0x00005fcbc516ae08 in ?? ()\r\n#17 0x00005fcbc52dcf18 in state_handle_k_event ()\r\n#18 0x00005fcbc51f2ae1 in ?? ()\r\n#19 0x00005fcbc51e2b67 in ?? ()\r\n#20 0x00005fcbc52dccc3 in state_enter ()\r\n#21 0x00005fcbc51dfd2a in normal_enter ()\r\n#22 0x00005fcbc4f79b27 in main ()\r\n```\r\n\r\n### Steps to reproduce\r\n\r\n1. Open a large text file, somewhere in the range of > 400MB\r\n2. `:lua a = vim.json.encode(table.concat(vim.api.nvim_buf_get_lines(0, 1, -1, false), \"\\n\"))`\r\n\r\n### Expected behavior\r\n\r\nno crash.\r\n\r\n### Neovim version (nvim -v)\r\n\r\nv0.10.1\r\n\r\n### Vim (not Nvim) behaves the same?\r\n\r\nunknown\r\n\r\n### Operating system/version\r\n\r\nArch\r\n\r\n### Terminal name/version\r\n\r\nwezterm 20240722-080956-7e8fdc11\r\n\r\n### $TERM environment variable\r\n\r\nxterm-256color\r\n\r\n### Installation\r\n\r\nArch (extra)",
    "closed_at": "2025-02-26T08:40:29Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
        "events_url": "https://api.github.com/users/clason/events{/privacy}",
        "followers_url": "https://api.github.com/users/clason/followers",
        "following_url": "https://api.github.com/users/clason/following{/other_user}",
        "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/clason",
        "id": 2361214,
        "login": "clason",
        "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
        "organizations_url": "https://api.github.com/users/clason/orgs",
        "received_events_url": "https://api.github.com/users/clason/received_events",
        "repos_url": "https://api.github.com/users/clason/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/clason",
        "user_view_type": "public"
    },
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "Can you try the development version? The [Releases](https://github.com/neovim/neovim/releases/tag/nightly) page has pre-built archives for Linux/Windows/macOS. Check `:version` to confirm the version.",
            "created_at": "2024-09-01T22:30:21Z",
            "html_url": "https://github.com/neovim/neovim/issues/30225#issuecomment-2323520360",
            "id": 2323520360,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30225",
            "node_id": "IC_kwDOAPphoM6Kfhto",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2323520360/reactions"
            },
            "updated_at": "2024-09-01T22:30:21Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2323520360",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "\r\n```\r\n:version\r\n\r\nNVIM v0.11.0-dev-700+gbcae8be91\r\nBuild type: RelWithDebInfo\r\nLuaJIT 2.1.1724512491\r\n```\r\n\r\n```\r\n#0  __pthread_kill_implementation (threadid=<optimized out>, signo=signo@entry=6, no_tid=no_tid@entry=0) at pthread_kill.c:44\r\n#1  0x000070278b893463 in __pthread_kill_internal (threadid=<optimized out>, signo=6) at pthread_kill.c:78\r\n#2  0x000070278b83a120 in __GI_raise (sig=sig@entry=6) at ../sysdeps/posix/raise.c:26\r\n#3  0x000070278b8214c3 in __GI_abort () at abort.c:79\r\n#4  0x000070278b822354 in __libc_message_impl (fmt=fmt@entry=0x70278b9b02f5 \"%s\\n\") at ../sysdeps/posix/libc_fatal.c:132\r\n#5  0x000070278b89d765 in malloc_printerr (str=str@entry=0x70278b9ae169 \"realloc(): invalid next size\") at malloc.c:5772\r\n#6  0x000070278b8a1a04 in _int_realloc (av=av@entry=0x70278b9e4ac0 <main_arena>, oldp=oldp@entry=0x5c50483330f0, oldsize=oldsize@entry=16384, nb=nb@entry=32752) at malloc.c:4939\r\n#7  0x000070278b8a2a15 in __GI___libc_realloc (oldmem=0x5c5048333100, bytes=bytes@entry=32736) at malloc.c:3508\r\n#8  0x00005c4ffac42371 in strbuf_resize (s=s@entry=0x70278bb3b2c8, len=<optimized out>) at /home/runner/work/neovim/neovim/src/cjson/strbuf.c:176\r\n#9  0x00005c4ffac425f6 in strbuf_append_string (s=s@entry=0x70278bb3b2c8, str=0x5c4ffad9fde8 \"\\\\/\") at /home/runner/work/neovim/neovim/src/cjson/strbuf.c:190\r\n#10 0x00005c4ffac426aa in json_append_string (l=l@entry=0x70278bb26380, json=json@entry=0x70278bb3b2c8, lindex=lindex@entry=-1) at /home/runner/work/neovim/neovim/src/cjson/lua_cjson.c:592\r\n#11 0x00005c4ffac486b3 in json_append_data (l=l@entry=0x70278bb26380, cfg=cfg@entry=0x70278bb3adc8, current_depth=current_depth@entry=3, json=json@entry=0x70278bb3b2c8) at /home/runner/work/neovim/neovim/src/cjson/lua_cjson.c:788\r\n#12 0x00005c4ffac48c28 in json_append_object (l=l@entry=0x70278bb26380, cfg=cfg@entry=0x70278bb3adc8, current_depth=current_depth@entry=3, json=json@entry=0x70278bb3b2c8) at /home/runner/work/neovim/neovim/src/cjson/lua_cjson.c:769\r\n#13 0x00005c4ffac488e5 in json_append_data (l=l@entry=0x70278bb26380, cfg=cfg@entry=0x70278bb3adc8, current_depth=3, current_depth@entry=2, json=json@entry=0x70278bb3b2c8) at /home/runner/work/neovim/neovim/src/cjson/lua_cjson.c:840\r\n#14 0x00005c4ffac48c28 in json_append_object (l=l@entry=0x70278bb26380, cfg=cfg@entry=0x70278bb3adc8, current_depth=current_depth@entry=2, json=json@entry=0x70278bb3b2c8) at /home/runner/work/neovim/neovim/src/cjson/lua_cjson.c:769\r\n#15 0x00005c4ffac488e5 in json_append_data (l=l@entry=0x70278bb26380, cfg=cfg@entry=0x70278bb3adc8, current_depth=2, current_depth@entry=1, json=json@entry=0x70278bb3b2c8) at /home/runner/work/neovim/neovim/src/cjson/lua_cjson.c:840\r\n#16 0x00005c4ffac48c28 in json_append_object (l=l@entry=0x70278bb26380, cfg=cfg@entry=0x70278bb3adc8, current_depth=current_depth@entry=1, json=json@entry=0x70278bb3b2c8) at /home/runner/work/neovim/neovim/src/cjson/lua_cjson.c:769\r\n#17 0x00005c4ffac488e5 in json_append_data (l=l@entry=0x70278bb26380, cfg=cfg@entry=0x70278bb3adc8, current_depth=1, current_depth@entry=0, json=json@entry=0x70278bb3b2c8) at /home/runner/work/neovim/neovim/src/cjson/lua_cjson.c:840\r\n#18 0x00005c4ffac48d35 in json_encode (l=0x70278bb26380) at /home/runner/work/neovim/neovim/src/cjson/lua_cjson.c:890\r\n#19 0x00005c4ffacc1f96 in lj_BC_FUNCC ()\r\n#20 0x00005c4ffacae1c6 in lua_pcall (L=L@entry=0x70278bb26380, nargs=nargs@entry=0, nresults=nresults@entry=0, errfunc=errfunc@entry=-2) at lj_api.c:1122\r\n#21 0x00005c4ffaaecea1 in nlua_pcall (lstate=lstate@entry=0x70278bb26380, nargs=nargs@entry=0, nresults=nresults@entry=0) at /home/runner/work/neovim/neovim/src/nvim/lua/executor.c:174\r\n#22 0x00005c4ffaaf440d in nlua_schedule_event (argv=<optimized out>) at /home/runner/work/neovim/neovim/src/nvim/lua/executor.c:372\r\n#23 0x00005c4ffabe56b5 in state_handle_k_event () at /home/runner/work/neovim/neovim/src/nvim/state.c:119\r\n#24 0x00005c4ffab4c74a in nv_event (cap=0x7ffdd7be5b90) at /home/runner/work/neovim/neovim/src/nvim/normal.c:6610\r\n#25 0x00005c4ffab42640 in normal_execute (state=0x7ffdd7be5b20, key=<optimized out>) at /home/runner/work/neovim/neovim/src/nvim/normal.c:1234\r\n#26 0x00005c4ffabe553b in state_enter (s=0x7ffdd7be5b20) at /home/runner/work/neovim/neovim/src/nvim/state.c:101\r\n#27 0x00005c4ffab41040 in normal_enter (cmdwin=<optimized out>, noexmode=<optimized out>) at /home/runner/work/neovim/neovim/src/nvim/normal.c:520\r\n#28 0x00005c4ffab00522 in main (argc=3, argv=<optimized out>) at /home/runner/work/neovim/neovim/src/nvim/main.c:661\r\n```\r\n\r\nWhat's next?",
            "created_at": "2024-09-02T06:48:30Z",
            "html_url": "https://github.com/neovim/neovim/issues/30225#issuecomment-2323941612",
            "id": 2323941612,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30225",
            "node_id": "IC_kwDOAPphoM6KhIjs",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2323941612/reactions"
            },
            "updated_at": "2024-09-02T06:48:30Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2323941612",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/23653?v=4",
                "events_url": "https://api.github.com/users/GertBurger/events{/privacy}",
                "followers_url": "https://api.github.com/users/GertBurger/followers",
                "following_url": "https://api.github.com/users/GertBurger/following{/other_user}",
                "gists_url": "https://api.github.com/users/GertBurger/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/GertBurger",
                "id": 23653,
                "login": "GertBurger",
                "node_id": "MDQ6VXNlcjIzNjUz",
                "organizations_url": "https://api.github.com/users/GertBurger/orgs",
                "received_events_url": "https://api.github.com/users/GertBurger/received_events",
                "repos_url": "https://api.github.com/users/GertBurger/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/GertBurger/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/GertBurger/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/GertBurger",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> What's next?\r\n\r\nFind the plugin code that calls `vim.json.encode` (`json_encode`). That may give a hint about what's going on. I'm wondering if a plugin is trying to encode the entire 500MB file, or store it in a string variable.\r\n\r\nHow much memory does your system have? \r\n\r\nmaybe try opening the buffer, then run:\r\n\r\n    :lua a = vim.json.encode(vim.api.nvim_buf_get_lines(0, 1, -1, false))\r\n\r\nbut I couldn't reproduce the issue that way.",
            "created_at": "2024-09-02T12:31:29Z",
            "html_url": "https://github.com/neovim/neovim/issues/30225#issuecomment-2324649142",
            "id": 2324649142,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30225",
            "node_id": "IC_kwDOAPphoM6Kj1S2",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2324649142/reactions"
            },
            "updated_at": "2024-09-02T15:25:12Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2324649142",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Could be LSP/LLM.",
            "created_at": "2024-09-02T12:33:07Z",
            "html_url": "https://github.com/neovim/neovim/issues/30225#issuecomment-2324652708",
            "id": 2324652708,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30225",
            "node_id": "IC_kwDOAPphoM6Kj2Kk",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2324652708/reactions"
            },
            "updated_at": "2024-09-02T12:33:07Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2324652708",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "```\r\n❯ free -h\r\n               total        used        free      shared  buff/cache   available\r\nMem:            62Gi        18Gi        30Gi       1.5Gi        18Gi        43Gi\r\nSwap:           95Gi        11Gi        84Gi\r\n```\r\n\r\nIt does seem like it is trying to json encode the whole file into a `text` property of some `jsonrpc` payload (lsp?).\r\n\r\nI confirmed that having copilot lsp (`zbirenbaum/copilot.lua`) installed triggers the issue but not with a minimal config yet. I'll see if can I create something minimal but I'm not too sure how.",
            "created_at": "2024-09-02T15:11:03Z",
            "html_url": "https://github.com/neovim/neovim/issues/30225#issuecomment-2324960332",
            "id": 2324960332,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30225",
            "node_id": "IC_kwDOAPphoM6KlBRM",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2324960332/reactions"
            },
            "updated_at": "2024-09-02T15:11:03Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2324960332",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/23653?v=4",
                "events_url": "https://api.github.com/users/GertBurger/events{/privacy}",
                "followers_url": "https://api.github.com/users/GertBurger/followers",
                "following_url": "https://api.github.com/users/GertBurger/following{/other_user}",
                "gists_url": "https://api.github.com/users/GertBurger/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/GertBurger",
                "id": 23653,
                "login": "GertBurger",
                "node_id": "MDQ6VXNlcjIzNjUz",
                "organizations_url": "https://api.github.com/users/GertBurger/orgs",
                "received_events_url": "https://api.github.com/users/GertBurger/received_events",
                "repos_url": "https://api.github.com/users/GertBurger/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/GertBurger/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/GertBurger/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/GertBurger",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Then that is expected. The LSP protocol was built for typical source code, not webscale log files. If you regularly work with such files, you should configure LSP/Copilot _not_ to attach to them.",
            "created_at": "2024-09-02T15:51:12Z",
            "html_url": "https://github.com/neovim/neovim/issues/30225#issuecomment-2325020569",
            "id": 2325020569,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30225",
            "node_id": "IC_kwDOAPphoM6KlP-Z",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2325020569/reactions"
            },
            "updated_at": "2024-09-02T15:51:12Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2325020569",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> Then that is expected. The LSP protocol was built for typical source code, not webscale log files\r\n\r\nIf it's our LSP client, we should detect this and fail gracefully. Do we have an open issue for that?",
            "created_at": "2024-09-02T15:57:14Z",
            "html_url": "https://github.com/neovim/neovim/issues/30225#issuecomment-2325028372",
            "id": 2325028372,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30225",
            "node_id": "IC_kwDOAPphoM6KlR4U",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2325028372/reactions"
            },
            "updated_at": "2024-09-02T15:57:14Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2325028372",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "The crash looks to be in the cjson library, not our wrapper code; not sure how much we want to delve into that. @bfredl ?",
            "created_at": "2024-09-02T16:13:59Z",
            "html_url": "https://github.com/neovim/neovim/issues/30225#issuecomment-2325050874",
            "id": 2325050874,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30225",
            "node_id": "IC_kwDOAPphoM6KlXX6",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2325050874/reactions"
            },
            "updated_at": "2024-09-02T16:13:59Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2325050874",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "I managed to trigger the issue with the output file of:\r\n```\r\nyes $(seq -s '' 100)|head -n 2000000 > large_file\r\n```",
            "created_at": "2024-09-02T16:47:31Z",
            "html_url": "https://github.com/neovim/neovim/issues/30225#issuecomment-2325093610",
            "id": 2325093610,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30225",
            "node_id": "IC_kwDOAPphoM6Klhzq",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2325093610/reactions"
            },
            "updated_at": "2024-09-02T16:47:31Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2325093610",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/23653?v=4",
                "events_url": "https://api.github.com/users/GertBurger/events{/privacy}",
                "followers_url": "https://api.github.com/users/GertBurger/followers",
                "following_url": "https://api.github.com/users/GertBurger/following{/other_user}",
                "gists_url": "https://api.github.com/users/GertBurger/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/GertBurger",
                "id": 23653,
                "login": "GertBurger",
                "node_id": "MDQ6VXNlcjIzNjUz",
                "organizations_url": "https://api.github.com/users/GertBurger/orgs",
                "received_events_url": "https://api.github.com/users/GertBurger/received_events",
                "repos_url": "https://api.github.com/users/GertBurger/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/GertBurger/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/GertBurger/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/GertBurger",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "More interesting would be a minimal way of triggering the crash in Neovim by just calling `vim.json.encode(payload)` (where `payload` is, e.g., just the contents of the file as a single string).",
            "created_at": "2024-09-02T16:59:13Z",
            "html_url": "https://github.com/neovim/neovim/issues/30225#issuecomment-2325105379",
            "id": 2325105379,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30225",
            "node_id": "IC_kwDOAPphoM6Klkrj",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2325105379/reactions"
            },
            "updated_at": "2024-09-02T16:59:13Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2325105379",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "Somewhat minimal config that triggers the issue via `nvim large_file` (after plugin is installed, not first launch):\r\n```\r\n-- Bootstrap lazy.nvim\r\nlocal lazypath = vim.fn.stdpath(\"data\") .. \"/lazy/lazy.nvim\"\r\nif not (vim.uv or vim.loop).fs_stat(lazypath) then\r\n  local lazyrepo = \"https://github.com/folke/lazy.nvim.git\"\r\n  local out = vim.fn.system({ \"git\", \"clone\", \"--filter=blob:none\", \"--branch=stable\", lazyrepo, lazypath })\r\n  if vim.v.shell_error ~= 0 then\r\n    vim.api.nvim_echo({\r\n      { \"Failed to clone lazy.nvim:\\n\", \"ErrorMsg\" },\r\n      { out,                            \"WarningMsg\" },\r\n      { \"\\nPress any key to exit...\" },\r\n    }, true, {})\r\n    vim.fn.getchar()\r\n    os.exit(1)\r\n  end\r\nend\r\nvim.opt.rtp:prepend(lazypath)\r\n\r\n-- Make sure to setup `mapleader` and `maplocalleader` before\r\n-- loading lazy.nvim so that mappings are correct.\r\n-- This is also a good place to setup other settings (vim.opt)\r\nvim.g.mapleader = \" \"\r\nvim.g.maplocalleader = \"\\\\\"\r\n\r\n-- Setup lazy.nvim\r\nrequire(\"lazy\").setup({\r\n  spec = {\r\n    -- add your plugins here\r\n    {\r\n      \"zbirenbaum/copilot.lua\",\r\n      cmd = \"Copilot\",\r\n      event = \"BufEnter\",\r\n      config = function()\r\n        require(\"copilot\").setup({ })\r\n      end,\r\n    },\r\n  },\r\n})\r\n```\r\n\r\nI don't think you need to have copilot auth'd for this to trigger.",
            "created_at": "2024-09-02T20:52:17Z",
            "html_url": "https://github.com/neovim/neovim/issues/30225#issuecomment-2325291926",
            "id": 2325291926,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30225",
            "node_id": "IC_kwDOAPphoM6KmSOW",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2325291926/reactions"
            },
            "updated_at": "2024-09-03T08:46:22Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2325291926",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/23653?v=4",
                "events_url": "https://api.github.com/users/GertBurger/events{/privacy}",
                "followers_url": "https://api.github.com/users/GertBurger/followers",
                "following_url": "https://api.github.com/users/GertBurger/following{/other_user}",
                "gists_url": "https://api.github.com/users/GertBurger/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/GertBurger",
                "id": 23653,
                "login": "GertBurger",
                "node_id": "MDQ6VXNlcjIzNjUz",
                "organizations_url": "https://api.github.com/users/GertBurger/orgs",
                "received_events_url": "https://api.github.com/users/GertBurger/received_events",
                "repos_url": "https://api.github.com/users/GertBurger/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/GertBurger/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/GertBurger/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/GertBurger",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "can you try the code in https://github.com/neovim/neovim/issues/30225#issuecomment-2324649142",
            "created_at": "2024-09-02T22:34:28Z",
            "html_url": "https://github.com/neovim/neovim/issues/30225#issuecomment-2325350885",
            "id": 2325350885,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30225",
            "node_id": "IC_kwDOAPphoM6Kmgnl",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2325350885/reactions"
            },
            "updated_at": "2024-09-02T22:34:28Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2325350885",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "Sorry for missing that.\r\n\r\n```\r\n:lua a = vim.json.encode(vim.api.nvim_buf_get_lines(0, 1, -1, false))\r\n```\r\ndoesn't trigger the code path exactly the same but this \r\n```\r\n:lua a = vim.json.encode(table.concat(vim.api.nvim_buf_get_lines(0, 1, -1, false), \"\\n\"))\r\n```\r\ndoes, mostly.\r\n\r\nI am was testing with the `--clean` argument on nvim.\r\n\r\nIt seems like `json_append_string()` must be called with a sufficiently large string and trigger a `strbuf->resize()` during the call for it to crash. If the `strbuf` was already large enough then it doesn't seem to trigger the issue. This can be simulated by running the original snippet first and then my modified version. \r\n\r\nWith my full config I can also run the original snippet `:lua a = vim.json.encode(vim.api.nvim_buf_get_lines(0, 1, -1, false))` before enabling copilot and it seems to workaround the issue.",
            "created_at": "2024-09-03T06:28:34Z",
            "html_url": "https://github.com/neovim/neovim/issues/30225#issuecomment-2325700767",
            "id": 2325700767,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30225",
            "node_id": "IC_kwDOAPphoM6Kn2Cf",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2325700767/reactions"
            },
            "updated_at": "2024-09-03T06:28:34Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2325700767",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/23653?v=4",
                "events_url": "https://api.github.com/users/GertBurger/events{/privacy}",
                "followers_url": "https://api.github.com/users/GertBurger/followers",
                "following_url": "https://api.github.com/users/GertBurger/following{/other_user}",
                "gists_url": "https://api.github.com/users/GertBurger/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/GertBurger",
                "id": 23653,
                "login": "GertBurger",
                "node_id": "MDQ6VXNlcjIzNjUz",
                "organizations_url": "https://api.github.com/users/GertBurger/orgs",
                "received_events_url": "https://api.github.com/users/GertBurger/received_events",
                "repos_url": "https://api.github.com/users/GertBurger/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/GertBurger/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/GertBurger/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/GertBurger",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Thank you! Could you please edit the issue to add the copilot-free minimal repro?\r\n\r\nNote that [lua-cjson](https://github.com/openresty/lua-cjson/) (which we vendor, and where the crash happens) has received a number of updates ([some of them looking related](https://github.com/openresty/lua-cjson/commit/2bfad8f5eeb821357d2ada29506e864ff7ec947e)) since we included it which we should look into backporting. @bfredl ?\r\n\r\n(Future note: when vendoring, we should note not just upstream but also the last synced commit at the top of the file.)",
            "created_at": "2024-09-03T08:44:20Z",
            "html_url": "https://github.com/neovim/neovim/issues/30225#issuecomment-2325941744",
            "id": 2325941744,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30225",
            "node_id": "IC_kwDOAPphoM6Kow3w",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2325941744/reactions"
            },
            "updated_at": "2024-09-03T08:57:58Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2325941744",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Ye, adding it to the milestone for the backporting part.",
            "created_at": "2024-09-03T10:08:54Z",
            "html_url": "https://github.com/neovim/neovim/issues/30225#issuecomment-2326128303",
            "id": 2326128303,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30225",
            "node_id": "IC_kwDOAPphoM6Kpeav",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2326128303/reactions"
            },
            "updated_at": "2024-09-03T10:08:54Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2326128303",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
                "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
                "followers_url": "https://api.github.com/users/bfredl/followers",
                "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
                "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bfredl",
                "id": 1363104,
                "login": "bfredl",
                "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
                "organizations_url": "https://api.github.com/users/bfredl/orgs",
                "received_events_url": "https://api.github.com/users/bfredl/received_events",
                "repos_url": "https://api.github.com/users/bfredl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bfredl",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "Should this be handled as a security issue if it is triggering a buffer overflow in a vendored lib?",
            "created_at": "2024-09-04T13:01:44Z",
            "html_url": "https://github.com/neovim/neovim/issues/30225#issuecomment-2328970112",
            "id": 2328970112,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30225",
            "node_id": "IC_kwDOAPphoM6K0UOA",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2328970112/reactions"
            },
            "updated_at": "2024-09-04T13:01:44Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2328970112",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/23653?v=4",
                "events_url": "https://api.github.com/users/GertBurger/events{/privacy}",
                "followers_url": "https://api.github.com/users/GertBurger/followers",
                "following_url": "https://api.github.com/users/GertBurger/following{/other_user}",
                "gists_url": "https://api.github.com/users/GertBurger/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/GertBurger",
                "id": 23653,
                "login": "GertBurger",
                "node_id": "MDQ6VXNlcjIzNjUz",
                "organizations_url": "https://api.github.com/users/GertBurger/orgs",
                "received_events_url": "https://api.github.com/users/GertBurger/received_events",
                "repos_url": "https://api.github.com/users/GertBurger/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/GertBurger/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/GertBurger/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/GertBurger",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Only if it can demonstrably used for privilege escalation (above what you need to run Neovim on the target system in the first place). Random crashes are _not_ a CVE.",
            "created_at": "2024-09-04T13:12:31Z",
            "html_url": "https://github.com/neovim/neovim/issues/30225#issuecomment-2329004669",
            "id": 2329004669,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30225",
            "node_id": "IC_kwDOAPphoM6K0cp9",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2329004669/reactions"
            },
            "updated_at": "2024-09-04T13:12:31Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2329004669",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Can anybody here test #32114 and see if it fixes the issue?",
            "created_at": "2025-01-29T18:40:13Z",
            "html_url": "https://github.com/neovim/neovim/issues/30225#issuecomment-2622538679",
            "id": 2622538679,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30225",
            "node_id": "IC_kwDOAPphoM6cUMO3",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2622538679/reactions"
            },
            "updated_at": "2025-01-29T18:40:13Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2622538679",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "Looks like it 👍 \n\nI repeated the steps from https://github.com/neovim/neovim/issues/30225#issuecomment-2325700767 on https://github.com/neovim/neovim/pull/32114/commits/7530afc647d505e735ea165715099081a2fb9148 and it didn't crash, whilst performing those steps on my system neovim (v0.10.3) does result in a crash originally documented in this issue.",
            "created_at": "2025-01-29T20:37:10Z",
            "html_url": "https://github.com/neovim/neovim/issues/30225#issuecomment-2622791315",
            "id": 2622791315,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30225",
            "node_id": "IC_kwDOAPphoM6cVJ6T",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2622791315/reactions"
            },
            "updated_at": "2025-01-29T20:37:10Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2622791315",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/23653?v=4",
                "events_url": "https://api.github.com/users/GertBurger/events{/privacy}",
                "followers_url": "https://api.github.com/users/GertBurger/followers",
                "following_url": "https://api.github.com/users/GertBurger/following{/other_user}",
                "gists_url": "https://api.github.com/users/GertBurger/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/GertBurger",
                "id": 23653,
                "login": "GertBurger",
                "node_id": "MDQ6VXNlcjIzNjUz",
                "organizations_url": "https://api.github.com/users/GertBurger/orgs",
                "received_events_url": "https://api.github.com/users/GertBurger/received_events",
                "repos_url": "https://api.github.com/users/GertBurger/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/GertBurger/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/GertBurger/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/GertBurger",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Fixed by https://github.com/neovim/neovim/pull/32114.",
            "created_at": "2025-02-26T08:40:29Z",
            "html_url": "https://github.com/neovim/neovim/issues/30225#issuecomment-2684293235",
            "id": 2684293235,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30225",
            "node_id": "IC_kwDOAPphoM6f_xBz",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2684293235/reactions"
            },
            "updated_at": "2025-02-26T08:40:29Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2684293235",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 20,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/30225/comments",
    "created_at": "2024-09-01T20:13:43Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/30225/events",
    "html_url": "https://github.com/neovim/neovim/issues/30225",
    "id": 2499662961,
    "labels": [
        {
            "color": "0E8A16",
            "default": false,
            "description": "issue contains minimal reproducing steps",
            "id": 435851959,
            "name": "has:repro",
            "node_id": "MDU6TGFiZWw0MzU4NTE5NTk=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/has:repro"
        },
        {
            "color": "0E8A16",
            "default": false,
            "description": "issue contains a stacktrace/ASAN log",
            "id": 435854079,
            "name": "has:backtrace",
            "node_id": "MDU6TGFiZWw0MzU4NTQwNzk=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/has:backtrace"
        },
        {
            "color": "F9D0C4",
            "default": false,
            "description": "issue reporting a crash or segfault",
            "id": 435854234,
            "name": "bug-crash",
            "node_id": "MDU6TGFiZWw0MzU4NTQyMzQ=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug-crash"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": null,
            "id": 662566370,
            "name": "lsp",
            "node_id": "MDU6TGFiZWw2NjI1NjYzNzA=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/lsp"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "build dependencies (LuaJIT, LibUV, etc.)",
            "id": 1205400704,
            "name": "dependencies",
            "node_id": "MDU6TGFiZWwxMjA1NDAwNzA0",
            "url": "https://api.github.com/repos/neovim/neovim/labels/dependencies"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/30225/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 196,
        "created_at": "2023-12-07T23:09:35Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
            "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
            "followers_url": "https://api.github.com/users/justinmk/followers",
            "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/justinmk",
            "id": 1359421,
            "login": "justinmk",
            "node_id": "MDQ6VXNlcjEzNTk0MjE=",
            "organizations_url": "https://api.github.com/users/justinmk/orgs",
            "received_events_url": "https://api.github.com/users/justinmk/received_events",
            "repos_url": "https://api.github.com/users/justinmk/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/justinmk",
            "user_view_type": "public"
        },
        "description": "",
        "due_on": "2025-03-15T07:00:00Z",
        "html_url": "https://github.com/neovim/neovim/milestone/41",
        "id": 10283236,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/41/labels",
        "node_id": "MI_kwDOAPphoM4AnOjk",
        "number": 41,
        "open_issues": 36,
        "state": "open",
        "title": "0.11",
        "updated_at": "2025-03-04T00:59:49Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/41"
    },
    "node_id": "I_kwDOAPphoM6U_dRx",
    "number": 30225,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/30225/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "completed",
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/30225/timeline",
    "title": "lua-cjson crash after opening large log file with LSP and/or Copilot",
    "updated_at": "2025-02-26T08:40:29Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/30225",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/23653?v=4",
        "events_url": "https://api.github.com/users/GertBurger/events{/privacy}",
        "followers_url": "https://api.github.com/users/GertBurger/followers",
        "following_url": "https://api.github.com/users/GertBurger/following{/other_user}",
        "gists_url": "https://api.github.com/users/GertBurger/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/GertBurger",
        "id": 23653,
        "login": "GertBurger",
        "node_id": "MDQ6VXNlcjIzNjUz",
        "organizations_url": "https://api.github.com/users/GertBurger/orgs",
        "received_events_url": "https://api.github.com/users/GertBurger/received_events",
        "repos_url": "https://api.github.com/users/GertBurger/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/GertBurger/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/GertBurger/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/GertBurger",
        "user_view_type": "public"
    }
}