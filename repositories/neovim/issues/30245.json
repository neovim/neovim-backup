{
    "active_lock_reason": "too heated",
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\n\nHere is the problem, once the editorconfig file properties are loaded into buffers, changes to the editorconfig file will not update these properties in buffers which were already loaded. When an .editorconfig file is changed, all relevant buffers under the directory where the .editorconfig is located should get their properties updated.\n\n### Expected behavior\n\nUpdate buffer options when .editorconfig change occurs.\r\n\r\n```lua\r\n    vim.api.nvim_create_autocmd({ 'BufWritePost', 'BufRead' }, {\r\n        group = modegroup,\r\n        pattern = \"*.editorconfig\",\r\n        callback = function(args)\r\n            local buffers = vim.api.nvim_list_bufs()\r\n            for _, bufnr in ipairs(buffers) do\r\n                local valid = bufnr and vim.api.nvim_buf_is_valid(bufnr)\r\n                local name = valid and vim.api.nvim_buf_get_name(bufnr)\r\n                local root = valid and vim.fn.fnamemodify(args.match, \":h\")\r\n                if root and name and #name > 0 and vim.startswith(name, root) then\r\n                    vim.b[bufnr].editorconfig = false\r\n                    require('editorconfig').config(bufnr)\r\n                end\r\n            end\r\n        end\r\n    })\r\n```\r\nExample is very crude since if you have multi level directory structure with multiple editorconfigs this will do a bit of extra unecessary work, but the editorconfig plugin already has enought context to know which buffer properties are set from which immediate editorconfig. Buffer/File renames/moves are already handled i believe but extra care might need to be taken.",
    "closed_at": "2024-09-03T11:50:24Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
        "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
        "followers_url": "https://api.github.com/users/justinmk/followers",
        "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
        "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/justinmk",
        "id": 1359421,
        "login": "justinmk",
        "node_id": "MDQ6VXNlcjEzNTk0MjE=",
        "organizations_url": "https://api.github.com/users/justinmk/orgs",
        "received_events_url": "https://api.github.com/users/justinmk/received_events",
        "repos_url": "https://api.github.com/users/justinmk/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/justinmk"
    },
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "That autocmd would only work if the edit was made in the same Nvim process. Would need a filewatcher to do this more robustly: https://github.com/neovim/neovim/issues/1380\r\n\r\n\"Reload all buffers\" is a delicate UI to get right, and thus I think solving https://github.com/neovim/neovim/issues/1380 is equivalent to solving this.",
            "created_at": "2024-09-03T11:50:24Z",
            "html_url": "https://github.com/neovim/neovim/issues/30245#issuecomment-2326322133",
            "id": 2326322133,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30245",
            "node_id": "IC_kwDOAPphoM6KqNvV",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2326322133/reactions"
            },
            "updated_at": "2024-09-03T11:50:24Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2326322133",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "author_association": "NONE",
            "body": "Well yes the way the change to the editorconfig is detected was a **crude** example. But i find it Strange, the issue you have posted does not address the issue above at all, why do we need to \"reload\" buffers, **instead i would think the .editorconfig has to be re-parsed (the way the change in .editorconfig is detected is relevant yes, but not to the issue above, which is how do we update the buffers and their buffer local options affected by this .editorconifg) and the buffer local options re-applied**. How would **autoread** help us with the update/re-application of the **buffer local properties coming from the changes in the .editorconfig** ? In either case something has to change in the editorconfig plugin to accomodate this ?",
            "created_at": "2024-09-03T12:00:11Z",
            "html_url": "https://github.com/neovim/neovim/issues/30245#issuecomment-2326343991",
            "id": 2326343991,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30245",
            "node_id": "IC_kwDOAPphoM6KqTE3",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2326343991/reactions"
            },
            "updated_at": "2024-09-03T12:01:29Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2326343991",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/15955811?v=4",
                "events_url": "https://api.github.com/users/asmodeus812/events{/privacy}",
                "followers_url": "https://api.github.com/users/asmodeus812/followers",
                "following_url": "https://api.github.com/users/asmodeus812/following{/other_user}",
                "gists_url": "https://api.github.com/users/asmodeus812/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/asmodeus812",
                "id": 15955811,
                "login": "asmodeus812",
                "node_id": "MDQ6VXNlcjE1OTU1ODEx",
                "organizations_url": "https://api.github.com/users/asmodeus812/orgs",
                "received_events_url": "https://api.github.com/users/asmodeus812/received_events",
                "repos_url": "https://api.github.com/users/asmodeus812/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/asmodeus812/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/asmodeus812/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/asmodeus812"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Reloading a buffer automatically triggers editorconfig processing. Not to mention other stuff. That's why focusing on the narrow case of editorconfig is the wrong framing: this is generally solved by thinking about autoload / filewatch.",
            "created_at": "2024-09-03T12:12:33Z",
            "html_url": "https://github.com/neovim/neovim/issues/30245#issuecomment-2326367981",
            "id": 2326367981,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30245",
            "node_id": "IC_kwDOAPphoM6KqY7t",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2326367981/reactions"
            },
            "updated_at": "2024-09-03T12:12:33Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2326367981",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "author_association": "NONE",
            "body": "@justinmk, i am not sure i get that, **we know the actual use case here, this seems like trying to solve some abstract problem, while the requirement is pretty clear, and it is that, the only way the buffer local options can change is if a change to the editorconfig is detected**, not other file buffers. If that filewatch / autoreload is implemented, without any changes to the current editorconfig plugin, everytime a file is changed (that is not the editorconfig) it will try to re-parse the editor config, and re-apply the options, even though the editorconfig might have not changed at all, below is the current implementation btw. **BufRead will get re-triggered**. This seems like so much extra work while the change to the editorconfig file itself will be seldom done, if at all. \r\n\r\n```lua\r\nlocal group = vim.api.nvim_create_augroup('editorconfig', {})\r\nvim.api.nvim_create_autocmd({ 'BufNewFile', 'BufRead', 'BufFilePost' }, {\r\n  group = group,\r\n  callback = function(args)\r\n    -- Buffer-local enable has higher priority\r\n    local enable = vim.F.if_nil(vim.b.editorconfig, vim.g.editorconfig, true)\r\n    if not enable then\r\n      return\r\n    end\r\n\r\n    require('editorconfig').config(args.buf)\r\n  end,\r\n})\r\n```",
            "created_at": "2024-09-03T12:19:56Z",
            "html_url": "https://github.com/neovim/neovim/issues/30245#issuecomment-2326381925",
            "id": 2326381925,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30245",
            "node_id": "IC_kwDOAPphoM6KqcVl",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2326381925/reactions"
            },
            "updated_at": "2024-09-03T12:25:05Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2326381925",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/15955811?v=4",
                "events_url": "https://api.github.com/users/asmodeus812/events{/privacy}",
                "followers_url": "https://api.github.com/users/asmodeus812/followers",
                "following_url": "https://api.github.com/users/asmodeus812/following{/other_user}",
                "gists_url": "https://api.github.com/users/asmodeus812/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/asmodeus812",
                "id": 15955811,
                "login": "asmodeus812",
                "node_id": "MDQ6VXNlcjE1OTU1ODEx",
                "organizations_url": "https://api.github.com/users/asmodeus812/orgs",
                "received_events_url": "https://api.github.com/users/asmodeus812/received_events",
                "repos_url": "https://api.github.com/users/asmodeus812/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/asmodeus812/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/asmodeus812/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/asmodeus812"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> If that filewatch / autoreload is implemented, without any changes to the current editorconfig plugin,\r\n\r\nWe need the filewatch feature in order to watch the editorconfig file for changes.",
            "created_at": "2024-09-03T12:25:20Z",
            "html_url": "https://github.com/neovim/neovim/issues/30245#issuecomment-2326392593",
            "id": 2326392593,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30245",
            "node_id": "IC_kwDOAPphoM6Kqe8R",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2326392593/reactions"
            },
            "updated_at": "2024-09-03T12:25:20Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2326392593",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "author_association": "NONE",
            "body": "I still think we are not talking about the same thing here, sure, improve the autoread, have a better file change detectection, i do not care how the change is detected to the editorconfig, what i am saying is that the currennt implementation, if it remains unchanged, and a the autoread is improved to detect changes better, the `BufRead` above will get triggered for files that are also not `editorconfigs` (which are the majority of files) and re-parse and re-apply the same properties over and over, doing `_noop_` work, **that is not free**. Chances are not just a couple of files opened in nvim will get changed from outside tools, and this will have compound behavior. That is why the implementation has to be changed / inverted and detect changes to the editorconfig and apply them to the affected buffers, not the other way around. ",
            "created_at": "2024-09-03T12:29:20Z",
            "html_url": "https://github.com/neovim/neovim/issues/30245#issuecomment-2326400297",
            "id": 2326400297,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30245",
            "node_id": "IC_kwDOAPphoM6Kqg0p",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2326400297/reactions"
            },
            "updated_at": "2024-09-03T12:30:44Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2326400297",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/15955811?v=4",
                "events_url": "https://api.github.com/users/asmodeus812/events{/privacy}",
                "followers_url": "https://api.github.com/users/asmodeus812/followers",
                "following_url": "https://api.github.com/users/asmodeus812/following{/other_user}",
                "gists_url": "https://api.github.com/users/asmodeus812/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/asmodeus812",
                "id": 15955811,
                "login": "asmodeus812",
                "node_id": "MDQ6VXNlcjE1OTU1ODEx",
                "organizations_url": "https://api.github.com/users/asmodeus812/orgs",
                "received_events_url": "https://api.github.com/users/asmodeus812/received_events",
                "repos_url": "https://api.github.com/users/asmodeus812/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/asmodeus812/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/asmodeus812/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/asmodeus812"
            }
        },
        {
            "author_association": "MEMBER",
            "body": ">  i do not care how the change is detected to the editorconfig\r\n\r\nThen you are not part of the technical discussion. We heard what you want; now let us decide _how_ we can do that (within the capabilities and development priorities of the project).",
            "created_at": "2024-09-03T12:37:01Z",
            "html_url": "https://github.com/neovim/neovim/issues/30245#issuecomment-2326415223",
            "id": 2326415223,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30245",
            "node_id": "IC_kwDOAPphoM6Kqkd3",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2326415223/reactions"
            },
            "updated_at": "2024-09-03T12:37:01Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2326415223",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        }
    ],
    "comments": 7,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/30245/comments",
    "created_at": "2024-09-03T10:04:07Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/30245/events",
    "html_url": "https://github.com/neovim/neovim/issues/30245",
    "id": 2502453787,
    "labels": [
        {
            "color": "c2e0c6",
            "default": true,
            "description": "feature request",
            "id": 77997476,
            "name": "enhancement",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3Ng==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/enhancement"
        },
        {
            "color": "e6e6e6",
            "default": false,
            "description": "issues that are closed as duplicates of other issues",
            "id": 3221613764,
            "name": "closed:duplicate",
            "node_id": "MDU6TGFiZWwzMjIxNjEzNzY0",
            "url": "https://api.github.com/repos/neovim/neovim/labels/closed:duplicate"
        },
        {
            "color": "C5DEF5",
            "default": false,
            "description": "",
            "id": 6907183821,
            "name": "editorconfig",
            "node_id": "LA_kwDOAPphoM8AAAABm7NCzQ",
            "url": "https://api.github.com/repos/neovim/neovim/labels/editorconfig"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/30245/labels{/name}",
    "locked": true,
    "milestone": null,
    "node_id": "I_kwDOAPphoM6VKGob",
    "number": 30245,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/30245/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/30245/timeline",
    "title": "Changes to .editorconfig should update respective attached buffers",
    "updated_at": "2024-09-03T12:37:47Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/30245",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/15955811?v=4",
        "events_url": "https://api.github.com/users/asmodeus812/events{/privacy}",
        "followers_url": "https://api.github.com/users/asmodeus812/followers",
        "following_url": "https://api.github.com/users/asmodeus812/following{/other_user}",
        "gists_url": "https://api.github.com/users/asmodeus812/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/asmodeus812",
        "id": 15955811,
        "login": "asmodeus812",
        "node_id": "MDQ6VXNlcjE1OTU1ODEx",
        "organizations_url": "https://api.github.com/users/asmodeus812/orgs",
        "received_events_url": "https://api.github.com/users/asmodeus812/received_events",
        "repos_url": "https://api.github.com/users/asmodeus812/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/asmodeus812/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/asmodeus812/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/asmodeus812"
    }
}