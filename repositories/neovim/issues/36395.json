{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\n\nThe title mostly covers it and I'll be honest, I'm kind of not too knowledgeable as to what's going on here so please bear with me.\n\nI encountered this bug initially with fzf-lua, where I found I could not delete a directory I had been working on with Neovim because I had quite literally 100 something conhost.exes idling and targeting the directory. I was able to determine this with a Windows tool called Powertoys File Locksmith which lists everything locking a file or directory. I initially thought this was just an issue with fzf-lua, but after some back and forth in this issue: https://github.com/ibhagwan/fzf-lua/issues/2413 it looks like the problem is with Neovim failing to kill conhosts properly on shutdown if a persistent executable like fzf or, humorously, Neovim itself is active in a terminal spawned from Neovim. By \"persistent\" I mean that it keeps running for some reason; with fzf for instance, this would mean calling it but simply leaving the file selector active in the spawned terminal without selecting anything.\n\nThat's about the extent of what I can tell you, the issue linked above may be more insightful or maybe @ibhagwan can explain better. The bug is trivial to reproduce for me.\n\n### Steps to reproduce\n\n1. In Windows Terminal in a cmd prompt, execute nvim.exe --clean with 11.4\n2. :sp | term\n3. Within your spawned terminal split (for me this is another cmd instance), nvim.exe --clean\n4. Do not perform any action except breaking out of the terminal with <C-\\\\>\\<C-n>\n5. :qa! in the original nvim instance\n6. At this point you should have an orphaned conhost.exe attached to your target directory.\n\nNote that other persistent executables work as well aside from Neovim itself; this was initially found with fzf with the list of files kept active in the spawned terminal.\n\nVideo evidence:\n\nhttps://github.com/user-attachments/assets/760706e6-603d-43c9-a9f7-9a2653ec236f\n\n### Expected behavior\n\nNo orphaned conhost.exe. Especially not a hundred of them accumulated over time :(\n\n### Nvim version (nvim -v)\n\nNVIM v0.11.4 \n\n### Vim (not Nvim) behaves the same?\n\nno, 9.1.1825\n\n### Operating system/version\n\nWindows 10\n\n### Terminal name/version\n\nWindows Terminal -> cmd [Version 10.0.19045.6456]\n\n### $TERM environment variable\n\nUnset\n\n### Installation\n\nPortable install off Github releases",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [],
    "comments": 0,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/36395/comments",
    "created_at": "2025-10-30T12:48:33Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/36395/events",
    "html_url": "https://github.com/neovim/neovim/issues/36395",
    "id": 3570624396,
    "issue_dependencies_summary": {
        "blocked_by": 0,
        "blocking": 0,
        "total_blocked_by": 0,
        "total_blocking": 0
    },
    "labels": [
        {
            "color": "d4c5f9",
            "default": false,
            "description": null,
            "id": 109461219,
            "name": "platform:windows",
            "node_id": "MDU6TGFiZWwxMDk0NjEyMTk=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/platform:windows"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "built-in :terminal or :shell",
            "id": 212696822,
            "name": "terminal",
            "node_id": "MDU6TGFiZWwyMTI2OTY4MjI=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/terminal"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/36395/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM7U02eM",
    "number": 36395,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/36395/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/36395/timeline",
    "title": "Windows - Orphaned conhost.exe after Neovim shutdown after starting but not ending terminal process within Neovim",
    "type": {
        "color": "red",
        "created_at": "2024-01-25T10:10:19Z",
        "description": "An unexpected problem or behavior",
        "id": 597163,
        "is_enabled": true,
        "name": "Bug",
        "node_id": "IT_kwDOAGK_Pc4ACRyr",
        "updated_at": "2024-07-26T10:12:30Z"
    },
    "updated_at": "2025-10-30T23:57:12Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/36395",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/31998826?v=4",
        "events_url": "https://api.github.com/users/zshoals/events{/privacy}",
        "followers_url": "https://api.github.com/users/zshoals/followers",
        "following_url": "https://api.github.com/users/zshoals/following{/other_user}",
        "gists_url": "https://api.github.com/users/zshoals/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/zshoals",
        "id": 31998826,
        "login": "zshoals",
        "node_id": "MDQ6VXNlcjMxOTk4ODI2",
        "organizations_url": "https://api.github.com/users/zshoals/orgs",
        "received_events_url": "https://api.github.com/users/zshoals/received_events",
        "repos_url": "https://api.github.com/users/zshoals/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/zshoals/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/zshoals/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/zshoals",
        "user_view_type": "public"
    }
}