{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\n\nHi, I'm currently experiencing this problem in 0.10.\r\n\r\nI'm having this error when I use tabs as for indention.\r\n```\r\nError in decoration provider treesitter/highlighter.line:\r\nError executing lua: ...al/share/nvim/runtime/lua/vim/treesitter/highlighter.lua:337: Invalid 'end_col': out of range\r\nstack traceback:\r\n        [C]: in function 'nvim_buf_set_extmark'\r\n        ...al/share/nvim/runtime/lua/vim/treesitter/highlighter.lua:337: in function 'fn'\r\n        ...al/share/nvim/runtime/lua/vim/treesitter/highlighter.lua:210: in function 'for_each_highlight_state'\r\n        ...al/share/nvim/runtime/lua/vim/treesitter/highlighter.lua:291: in function 'on_line_impl'\r\n        ...al/share/nvim/runtime/lua/vim/treesitter/highlighter.lua:367: in function <...al/share/nvim/runtime/lua/vim/treesitter/highlighter.lua:361>\r\n```\r\n\r\nSo far the languages I used that has this error are lua, javascript, and go.\r\n\r\nDemo:\r\n\r\nThis is using Go.\r\nhttps://github.com/neovim/neovim/assets/77670158/7176f902-e161-437b-a865-223780d15c09\r\n\r\nThis is for Lua.\r\nhttps://github.com/neovim/neovim/assets/77670158/e949c46e-1059-49a6-adaa-3b5672857cc8\r\n\r\nMy soft fixes for this problem are disable treesitter syntax highlighting or use spaces for indention.\n\n### Steps to reproduce\n\nThis is a treesitter/highlighter.lua problem, so I think I can't do it using ```nvim --clean```.\r\n\r\n1. I did ```:set noexpandtab``` to use tabs for indention.\r\n2. I typed ```<Tab><any first character>```.\r\n3. Then error shows up after pressing the first character.\n\n### Expected behavior\n\nNo error.\n\n### Neovim version (nvim -v)\n\nNVIM v0.10.0\n\n### Vim (not Nvim) behaves the same?\n\nNo.\n\n### Operating system/version\n\nLinux Mint 21.3\n\n### Terminal name/version\n\nkitty 0.34.1\n\n### $TERM environment variable\n\nxterm-kitty or tmux-256color\n\n### Installation\n\nDownloaded the tar.gz and extracted it to ~/.local/share",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "> This is a treesitter/highlighter.lua problem, so I think I can't do it using nvim --clean.\r\n\r\nYes, you can: the Lua parser is bundled and enabled by default. (I can't reproduce it with your steps and `--clean`.)",
            "created_at": "2024-07-03T12:12:12Z",
            "html_url": "https://github.com/neovim/neovim/issues/29550#issuecomment-2205931906",
            "id": 2205931906,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/29550",
            "node_id": "IC_kwDOAPphoM6De9mC",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2205931906/reactions"
            },
            "updated_at": "2024-07-03T12:13:55Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2205931906",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "> Yes, you can: the Lua parser is bundled and enabled by default. (I can't reproduce it with your steps and `--clean`.)\r\n\r\nWorking on it, forgive me I'm still new to this type of stuff.\r\n",
            "created_at": "2024-07-03T12:36:39Z",
            "html_url": "https://github.com/neovim/neovim/issues/29550#issuecomment-2205976941",
            "id": 2205976941,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/29550",
            "node_id": "IC_kwDOAPphoM6DfIlt",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2205976941/reactions"
            },
            "updated_at": "2024-07-03T12:36:39Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2205976941",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/77670158?v=4",
                "events_url": "https://api.github.com/users/alexxGmZ/events{/privacy}",
                "followers_url": "https://api.github.com/users/alexxGmZ/followers",
                "following_url": "https://api.github.com/users/alexxGmZ/following{/other_user}",
                "gists_url": "https://api.github.com/users/alexxGmZ/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/alexxGmZ",
                "id": 77670158,
                "login": "alexxGmZ",
                "node_id": "MDQ6VXNlcjc3NjcwMTU4",
                "organizations_url": "https://api.github.com/users/alexxGmZ/orgs",
                "received_events_url": "https://api.github.com/users/alexxGmZ/received_events",
                "repos_url": "https://api.github.com/users/alexxGmZ/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/alexxGmZ/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/alexxGmZ/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/alexxGmZ",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "I tried doing the minimal.lua stuff\r\n\r\n```\r\n-- Run this file as `nvim --clean -u minimal.lua`\r\n\r\nfor name, url in pairs {\r\n  -- ADD PLUGINS _NECESSARY_ TO REPRODUCE THE ISSUE, e.g:\r\n  -- some_plugin = 'https://github.com/author/plugin.nvim'\r\n  treesitter = 'https://github.com/nvim-treesitter/nvim-treesitter',\r\n  everforest = 'https://github.com/neanias/everforest-nvim'\r\n} do\r\n  local install_path = vim.fn.fnamemodify('nvim_issue/' .. name, ':p')\r\n  if vim.fn.isdirectory(install_path) == 0 then\r\n    vim.fn.system { 'git', 'clone', '--depth=1', url, install_path }\r\n  end\r\n  vim.opt.runtimepath:append(install_path)\r\nend\r\n\r\n-- indention options\r\nvim.opt.autoindent = true\r\nvim.opt.expandtab = false\r\nvim.opt.tabstop = 3\r\nvim.opt.softtabstop = 3\r\nvim.opt.shiftwidth = 3\r\nvim.opt.smartindent = true\r\n\r\nrequire(\"nvim-treesitter.configs\").setup {\r\n   highlight = {\r\n      enable = true\r\n   },\r\n}\r\n\r\nvim.cmd.colorscheme \"everforest\"\r\n```\r\n\r\nThe error did not showup...",
            "created_at": "2024-07-03T13:22:54Z",
            "html_url": "https://github.com/neovim/neovim/issues/29550#issuecomment-2206068698",
            "id": 2206068698,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/29550",
            "node_id": "IC_kwDOAPphoM6Dfe_a",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2206068698/reactions"
            },
            "updated_at": "2024-07-03T13:22:54Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2206068698",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/77670158?v=4",
                "events_url": "https://api.github.com/users/alexxGmZ/events{/privacy}",
                "followers_url": "https://api.github.com/users/alexxGmZ/followers",
                "following_url": "https://api.github.com/users/alexxGmZ/following{/other_user}",
                "gists_url": "https://api.github.com/users/alexxGmZ/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/alexxGmZ",
                "id": 77670158,
                "login": "alexxGmZ",
                "node_id": "MDQ6VXNlcjc3NjcwMTU4",
                "organizations_url": "https://api.github.com/users/alexxGmZ/orgs",
                "received_events_url": "https://api.github.com/users/alexxGmZ/received_events",
                "repos_url": "https://api.github.com/users/alexxGmZ/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/alexxGmZ/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/alexxGmZ/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/alexxGmZ",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "I was able to replicate this issue with my nvim setup when programming in go.",
            "created_at": "2024-07-03T21:10:28Z",
            "html_url": "https://github.com/neovim/neovim/issues/29550#issuecomment-2207304031",
            "id": 2207304031,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/29550",
            "node_id": "IC_kwDOAPphoM6DkMlf",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2207304031/reactions"
            },
            "updated_at": "2024-07-03T22:17:47Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2207304031",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/84316763?v=4",
                "events_url": "https://api.github.com/users/samuel-form3/events{/privacy}",
                "followers_url": "https://api.github.com/users/samuel-form3/followers",
                "following_url": "https://api.github.com/users/samuel-form3/following{/other_user}",
                "gists_url": "https://api.github.com/users/samuel-form3/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/samuel-form3",
                "id": 84316763,
                "login": "samuel-form3",
                "node_id": "MDQ6VXNlcjg0MzE2NzYz",
                "organizations_url": "https://api.github.com/users/samuel-form3/orgs",
                "received_events_url": "https://api.github.com/users/samuel-form3/received_events",
                "repos_url": "https://api.github.com/users/samuel-form3/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/samuel-form3/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/samuel-form3/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/samuel-form3",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "See a similar error very frequently (nvim 0.10.0 on OSX, installed via brew) using https://github.com/nvim-orgmode/orgmode/commit/95fb795a422f0455e03d13a3f83525f1d00793ad.\r\nWhen joining lines I get error \"Invalid 'end_row': out of range.\"\r\n\r\nTo recreate:\r\n\r\nminimal.lua:\r\n```\r\nvim.opt.rtp:prepend(vim.fn.stdpath(\"data\") .. \"/lazy/orgmode\")\r\nrequire(\"orgmode\").setup {}\r\n```\r\n\r\nSample file _test.org_:\r\n```\r\nLorem ipsum dolor sit amet, officia excepteur ex fugiat reprehenderit enim\r\nlabore culpa sint ad nisi Lorem pariatur mollit ex esse exercitation amet.\r\nNisi anim cupidatat excepteur officia. Reprehenderit nostrud nostrud ipsum\r\nLorem est aliquip amet voluptate voluptate dolor minim nulla est proident.\r\nNostrud officia pariatur ut officia. Sit irure elit esse ea nulla sunt ex\r\noccaecat reprehenderit commodo officia dolor Lorem duis laboris cupidatat\r\nofficia voluptate. Culpa proident adipisicing id nulla nisi laboris ex in\r\nLorem sunt duis officia eiusmod. Aliqua reprehenderit commodo ex non\r\nexcepteur duis sunt velit enim. Voluptate laboris sint cupidatat ullamco ut\r\nea consectetur et est culpa et culpa duis.\r\n```\r\n\r\n    > nvim --clean -u minimal.lua test.org\r\n\r\nWhen editor opens, `J` to join second line to first and I see:\r\n\r\n```\r\nError in decoration provider treesitter/highlighter.line:\r\nError executing lua: ....0/share/nvim/runtime/lua/vim/treesitter/highlighter.lua:337: Invalid 'end_row': out of range\r\nstack traceback:\r\n        [C]: in function 'nvim_buf_set_extmark'\r\n        ....0/share/nvim/runtime/lua/vim/treesitter/highlighter.lua:337: in function 'fn'\r\n        ....0/share/nvim/runtime/lua/vim/treesitter/highlighter.lua:210: in function 'for_each_highlight_state'\r\n        ....0/share/nvim/runtime/lua/vim/treesitter/highlighter.lua:291: in function 'on_line_impl'\r\n        ....0/share/nvim/runtime/lua/vim/treesitter/highlighter.lua:367: in function <....0/share/nvim/runtime/lua/vim/tree\r\nsitter/highlighter.lua:361>\r\n```\r\n\r\nSo far I've been unable to recreate the error with other file types.",
            "created_at": "2024-07-05T23:10:30Z",
            "html_url": "https://github.com/neovim/neovim/issues/29550#issuecomment-2211494967",
            "id": 2211494967,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/29550",
            "node_id": "IC_kwDOAPphoM6D0Lw3",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2211494967/reactions"
            },
            "updated_at": "2024-07-05T23:10:30Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2211494967",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/232873?v=4",
                "events_url": "https://api.github.com/users/KnBrckr/events{/privacy}",
                "followers_url": "https://api.github.com/users/KnBrckr/followers",
                "following_url": "https://api.github.com/users/KnBrckr/following{/other_user}",
                "gists_url": "https://api.github.com/users/KnBrckr/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/KnBrckr",
                "id": 232873,
                "login": "KnBrckr",
                "node_id": "MDQ6VXNlcjIzMjg3Mw==",
                "organizations_url": "https://api.github.com/users/KnBrckr/orgs",
                "received_events_url": "https://api.github.com/users/KnBrckr/received_events",
                "repos_url": "https://api.github.com/users/KnBrckr/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/KnBrckr/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/KnBrckr/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/KnBrckr",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "Since I can't reproduce it using minimal.lua (the error doesn't show up), I decided to create a minimal config in order to pinpoint any plugins that can be related to the issue until the only remaining plugin is nvim-treesitter. Sadly the error still persist.\r\n\r\nThis is the minimal config repo: https://github.com/alexxGmZ/temp-nvim-config ",
            "created_at": "2024-07-06T03:44:42Z",
            "html_url": "https://github.com/neovim/neovim/issues/29550#issuecomment-2211619116",
            "id": 2211619116,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/29550",
            "node_id": "IC_kwDOAPphoM6D0qEs",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 3,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 3,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2211619116/reactions"
            },
            "updated_at": "2024-07-06T03:44:42Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2211619116",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/77670158?v=4",
                "events_url": "https://api.github.com/users/alexxGmZ/events{/privacy}",
                "followers_url": "https://api.github.com/users/alexxGmZ/followers",
                "following_url": "https://api.github.com/users/alexxGmZ/following{/other_user}",
                "gists_url": "https://api.github.com/users/alexxGmZ/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/alexxGmZ",
                "id": 77670158,
                "login": "alexxGmZ",
                "node_id": "MDQ6VXNlcjc3NjcwMTU4",
                "organizations_url": "https://api.github.com/users/alexxGmZ/orgs",
                "received_events_url": "https://api.github.com/users/alexxGmZ/received_events",
                "repos_url": "https://api.github.com/users/alexxGmZ/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/alexxGmZ/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/alexxGmZ/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/alexxGmZ",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 6,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/29550/comments",
    "created_at": "2024-07-03T12:09:23Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/29550/events",
    "html_url": "https://github.com/neovim/neovim/issues/29550",
    "id": 2388466632,
    "labels": [
        {
            "color": "f9d0c4",
            "default": true,
            "description": "issues reporting wrong behavior",
            "id": 77997474,
            "name": "bug",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3NA==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug"
        },
        {
            "color": "FBCA04",
            "default": false,
            "description": "We need minimal steps to reproduce the issue",
            "id": 298863445,
            "name": "needs:repro",
            "node_id": "MDU6TGFiZWwyOTg4NjM0NDU=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/needs:repro"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "",
            "id": 1799626557,
            "name": "treesitter",
            "node_id": "MDU6TGFiZWwxNzk5NjI2NTU3",
            "url": "https://api.github.com/repos/neovim/neovim/labels/treesitter"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/29550/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM6OXRvI",
    "number": 29550,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 9,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 9,
        "url": "https://api.github.com/repos/neovim/neovim/issues/29550/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/29550/timeline",
    "title": "Invalid: 'end_col': out of range error in treesitter/highlighter.lua",
    "updated_at": "2025-01-19T10:55:11Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/29550",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/77670158?v=4",
        "events_url": "https://api.github.com/users/alexxGmZ/events{/privacy}",
        "followers_url": "https://api.github.com/users/alexxGmZ/followers",
        "following_url": "https://api.github.com/users/alexxGmZ/following{/other_user}",
        "gists_url": "https://api.github.com/users/alexxGmZ/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/alexxGmZ",
        "id": 77670158,
        "login": "alexxGmZ",
        "node_id": "MDQ6VXNlcjc3NjcwMTU4",
        "organizations_url": "https://api.github.com/users/alexxGmZ/orgs",
        "received_events_url": "https://api.github.com/users/alexxGmZ/received_events",
        "repos_url": "https://api.github.com/users/alexxGmZ/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/alexxGmZ/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/alexxGmZ/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/alexxGmZ",
        "user_view_type": "public"
    }
}