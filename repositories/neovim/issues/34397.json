{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\n\nOpening a file with DOS file endings (CR-LF) while having an editorconfig that specifies this file to have to unix file endings (LF) produces unexpected behavior: The line endings are detected during load, so I don't see the `^M` signs at the end. But the `fileformat` is set to unix _and_ the buffer is not marked as modified.\n\nSo the state of the buffer (contents and fileformat) are different from the file on disk after loading but the user does not see this.\n\n### Steps to reproduce\n\nCreate a DOS file:\n```\nnvim --clean\n:e ++ff=dos dosfile.txt\n```\n\nwith contents:\n```\nline1\nline2\n```\n\nThen create editorconfig:\n```\nnvim --clean .editorconfig\n```\nand write:\n```\n[*]\nend_of_line = lf\n```\n\nNow open the DOS file again: `nvim --clean dosfile.txt`. The contents look like before, but `:set ff?` reports `unix` and `set modified?` reports `nomodified`.\n\n### Expected behavior\n\nAccording to `:h fileformat`, I would expect the `modified` option to be set in the buffer. This makes sense because writing the buffer creates different file contents from the ones on disk. Thus modified.\n\nAlternatively, the editorconfig could override the fileformat detection. Then I would expect to see `^M`s at the end of my lines and the `modified` option unset. \n\n### Nvim version (nvim -v)\n\nNVIM v0.11.2\n\n### Vim (not Nvim) behaves the same?\n\nno\n\n### Operating system/version\n\nLinux 6.11.0\n\n### Terminal name/version\n\nKonsole 24.12.2\n\n### $TERM environment variable\n\nxterm-256color\n\n### Installation\n\nappimage",
    "closed_at": "2025-11-20T23:10:29Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
        "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
        "followers_url": "https://api.github.com/users/justinmk/followers",
        "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
        "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/justinmk",
        "id": 1359421,
        "login": "justinmk",
        "node_id": "MDQ6VXNlcjEzNTk0MjE=",
        "organizations_url": "https://api.github.com/users/justinmk/orgs",
        "received_events_url": "https://api.github.com/users/justinmk/received_events",
        "repos_url": "https://api.github.com/users/justinmk/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/justinmk",
        "user_view_type": "public"
    },
    "comment_data": [
        {
            "author_association": "NONE",
            "body": "Isn't this working as expected?\nThis behaves the same way other `.editorconfig` options are handled, for example `trim_trailing_whitespace`.\nWhen you open the file, the file stays as is, but it gets updated according to the rules on save.",
            "created_at": "2025-11-20T22:53:56Z",
            "html_url": "https://github.com/neovim/neovim/issues/34397#issuecomment-3560480155",
            "id": 3560480155,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34397",
            "node_id": "IC_kwDOAPphoM7UOJ2b",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3560480155/reactions"
            },
            "updated_at": "2025-11-20T22:53:56Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3560480155",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/139702932?v=4",
                "events_url": "https://api.github.com/users/r1bilski/events{/privacy}",
                "followers_url": "https://api.github.com/users/r1bilski/followers",
                "following_url": "https://api.github.com/users/r1bilski/following{/other_user}",
                "gists_url": "https://api.github.com/users/r1bilski/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/r1bilski",
                "id": 139702932,
                "login": "r1bilski",
                "node_id": "U_kgDOCFOylA",
                "organizations_url": "https://api.github.com/users/r1bilski/orgs",
                "received_events_url": "https://api.github.com/users/r1bilski/received_events",
                "repos_url": "https://api.github.com/users/r1bilski/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/r1bilski/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/r1bilski/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/r1bilski",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 1,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/34397/comments",
    "created_at": "2025-06-09T12:41:45Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/34397/events",
    "html_url": "https://github.com/neovim/neovim/issues/34397",
    "id": 3130197805,
    "issue_dependencies_summary": {
        "blocked_by": 0,
        "blocking": 0,
        "total_blocked_by": 0,
        "total_blocking": 0
    },
    "labels": [
        {
            "color": "C5DEF5",
            "default": false,
            "description": "",
            "id": 6907183821,
            "name": "editorconfig",
            "node_id": "LA_kwDOAPphoM8AAAABm7NCzQ",
            "url": "https://api.github.com/repos/neovim/neovim/labels/editorconfig"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/34397/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 753,
        "created_at": "2014-05-10T20:43:04Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
            "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
            "followers_url": "https://api.github.com/users/justinmk/followers",
            "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/justinmk",
            "id": 1359421,
            "login": "justinmk",
            "node_id": "MDQ6VXNlcjEzNTk0MjE=",
            "organizations_url": "https://api.github.com/users/justinmk/orgs",
            "received_events_url": "https://api.github.com/users/justinmk/received_events",
            "repos_url": "https://api.github.com/users/justinmk/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/justinmk",
            "user_view_type": "public"
        },
        "description": "Low priority items. We plan to work on this but don't have a target date.",
        "due_on": null,
        "html_url": "https://github.com/neovim/neovim/milestone/6",
        "id": 655037,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/6/labels",
        "node_id": "MDk6TWlsZXN0b25lNjU1MDM3",
        "number": 6,
        "open_issues": 642,
        "state": "open",
        "title": "backlog",
        "updated_at": "2025-11-25T01:11:18Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/6"
    },
    "node_id": "I_kwDOAPphoM66kwct",
    "number": 34397,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/34397/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "completed",
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/34397/timeline",
    "title": "detected fileformat and editorconfig mismatch",
    "type": {
        "color": "red",
        "created_at": "2024-01-25T10:10:19Z",
        "description": "An unexpected problem or behavior",
        "id": 597163,
        "is_enabled": true,
        "name": "Bug",
        "node_id": "IT_kwDOAGK_Pc4ACRyr",
        "updated_at": "2024-07-26T10:12:30Z"
    },
    "updated_at": "2025-11-20T23:10:29Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/34397",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/6363225?v=4",
        "events_url": "https://api.github.com/users/Marfisc/events{/privacy}",
        "followers_url": "https://api.github.com/users/Marfisc/followers",
        "following_url": "https://api.github.com/users/Marfisc/following{/other_user}",
        "gists_url": "https://api.github.com/users/Marfisc/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/Marfisc",
        "id": 6363225,
        "login": "Marfisc",
        "node_id": "MDQ6VXNlcjYzNjMyMjU=",
        "organizations_url": "https://api.github.com/users/Marfisc/orgs",
        "received_events_url": "https://api.github.com/users/Marfisc/received_events",
        "repos_url": "https://api.github.com/users/Marfisc/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/Marfisc/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Marfisc/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/Marfisc",
        "user_view_type": "public"
    }
}