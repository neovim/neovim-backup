{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\r\n\r\nPosting this after reading #21739, #11804, [this Reddit post](https://www.reddit.com/r/neovim/comments/17udtc4/clipboard_is_slow_after_setting_gclipboard_wsl2/?utm_source=share&utm_medium=web3x&utm_name=web3xcss&utm_term=1&utm_content=share_button), and also [this Reddit post](https://www.reddit.com/r/neovim/comments/17ieyn2/comment/kd9vt97/?utm_source=share&utm_medium=web2x&context=3). I'm writing a new issue since most of these conversations are about the setting `set clipboard=unnamedplus`, but I didn't need to do that to reproduce the issue. Moreover, I wanted to give a relatively thorough overview of things I've tried to solve this issue without an avail on my end.\r\n\r\nI've been using Neovim for over a year now on Windows and WSL2 Ubuntu, mostly on the same laptop. I used to `set clipboard=unnamedplus` in my config until I encountered the issue in #11804 some time ago and a slow startup for Neovim. Because of this, I migrated to primarily using Neovim on WSL2 Ubuntu. The issue still persisted, so I removed this option, and opted for manually using the `+` and `*` registers (I'm fine with this, since I'm used to many vim clones that don't let you set a .vimrc), but the slow pasting issue from #21739 still persists. \r\n\r\nThe issue worsens when used with [which-key.nvim](https://github.com/folke/which-key.nvim), with delays lasting over 10 seconds. \r\n\r\nEven though some of the suggestions listed down below improve the issue, the issue of slow pasting still remains. It's also highly worth mentioning that this issue *does not exist in native Vim* without any configurations.\r\n\r\n### Steps to reproduce\r\n\r\nOn Ubuntu WSL2:\r\n1. run `nvim --clean -u minimal.lua`. `minimal.lua` file located in `~/.config/nvim`. \r\n2. Write anything, in the buffer i.e. `testing`, for the sake of testing yanking and pasting later.\r\n3. Try yanking what you wrote to the * or + register, i.e. `viw\"+y` to yank `testing` to the + register. May take between ~3-5 seconds on first use, but is usually instant afterwards.\r\n4. Try pasting what is in the * or + register in a separate line, i.e. `viw\"+y` to yank `testing` to the + register. This should be consistently slow, again ~3-5 seconds.\r\n\r\nNotes: \r\nWhen trying suggestions to add to `init.lua` from different sources, I got the following results:\r\n- `:h clipboard-wsl` - no difference\r\n- [u/nicolas9653's suggestion](https://www.reddit.com/r/neovim/comments/17ieyn2/comment/kd9vt97/?utm_source=share&utm_medium=web3x&utm_name=web3xcss&utm_term=1&utm_content=share_button) - Inconsistent: sometimes instant, but sometimes just as slow\r\n- [u/aleksandroparin's suggestion](https://www.reddit.com/r/neovim/comments/17udtc4/comment/k9fdffc/?utm_source=share&utm_medium=web3x&utm_name=web3xcss&utm_term=1&utm_content=share_button) - Inconsistent: sometimes instant, but sometimes just as slow\r\n- [3N4N's suggestion from #21739](https://github.com/neovim/neovim/issues/21739#issuecomment-1378283986) - Yanking and pasting initially instant, but repeated use makes it take progressively longer\r\n- [rickywu's suggestion from #21739](https://github.com/neovim/neovim/issues/21739#issuecomment-1378304749) - Yanking almost always instant, pasting mostly instant but repeated use lags egregiously until new yank into these registers\r\n\r\nEach of their relevant suggestions was added under under `-- ADD INIT.LUA SETTINGS _NECESSARY_ FOR REPRODUCING THE ISSUE` in `minimal.lua`.\r\n\r\n### Expected behavior\r\n\r\nConsistently instant yank/paste times from the `+` and `*` registers, comparable to that in Native Vim.\r\n\r\n### Neovim version (nvim -v)\r\n\r\n0.10.0\r\n\r\n### Vim (not Nvim) behaves the same?\r\n\r\nno, vim 8.2.2121\r\n\r\n### Operating system/version\r\n\r\nWindows 11\r\n\r\n### Terminal name/version\r\n\r\nWindows Terminal 1.20.11781.0\r\n\r\n### $TERM environment variable\r\n\r\nxterm-256color\r\n\r\n### Installation\r\n\r\nbuild from repo",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "Thanks for the research and references!\r\n\r\nSimilar to what I suggested in https://github.com/neovim/neovim/issues/11804#issuecomment-1113927971 , \r\n\r\n- slow \"paste\" could be mitigated by eagerly reading from clipboard on `FocusGained`\r\n- \"yank\" could be made asynchronous\r\n\r\nMeanwhile, a workaround for slow \"paste\" is to simply use your [OS paste feature](https://neovim.io/doc/user/provider.html#bracketed-paste-mode) (ctrl-shift-v in many terminals, cmd-v in macOS, `Edit > Paste` from the GUI menu, etc.).",
            "created_at": "2024-08-30T22:11:16Z",
            "html_url": "https://github.com/neovim/neovim/issues/29712#issuecomment-2322432508",
            "id": 2322432508,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/29712",
            "node_id": "IC_kwDOAPphoM6KbYH8",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2322432508/reactions"
            },
            "updated_at": "2024-08-30T22:13:37Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2322432508",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 1,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/29712/comments",
    "created_at": "2024-07-14T21:33:56Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/29712/events",
    "html_url": "https://github.com/neovim/neovim/issues/29712",
    "id": 2407604252,
    "labels": [
        {
            "color": "f9d0c4",
            "default": true,
            "description": "issues reporting wrong behavior",
            "id": 77997474,
            "name": "bug",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3NA==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug"
        },
        {
            "color": "FEF2C0",
            "default": false,
            "description": "performance, latency, cpu/memory usage",
            "id": 101930601,
            "name": "performance",
            "node_id": "MDU6TGFiZWwxMDE5MzA2MDE=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/performance"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "clipboard, paste",
            "id": 186192409,
            "name": "clipboard",
            "node_id": "MDU6TGFiZWwxODYxOTI0MDk=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/clipboard"
        },
        {
            "color": "D4C5F9",
            "default": false,
            "description": "",
            "id": 5697445672,
            "name": "platform:wsl",
            "node_id": "LA_kwDOAPphoM8AAAABU5gfKA",
            "url": "https://api.github.com/repos/neovim/neovim/labels/platform:wsl"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/29712/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 686,
        "created_at": "2014-05-10T20:43:04Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
            "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
            "followers_url": "https://api.github.com/users/justinmk/followers",
            "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/justinmk",
            "id": 1359421,
            "login": "justinmk",
            "node_id": "MDQ6VXNlcjEzNTk0MjE=",
            "organizations_url": "https://api.github.com/users/justinmk/orgs",
            "received_events_url": "https://api.github.com/users/justinmk/received_events",
            "repos_url": "https://api.github.com/users/justinmk/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/justinmk",
            "user_view_type": "public"
        },
        "description": "Low priority items. We plan to work on this but don't have a target date.",
        "due_on": null,
        "html_url": "https://github.com/neovim/neovim/milestone/6",
        "id": 655037,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/6/labels",
        "node_id": "MDk6TWlsZXN0b25lNjU1MDM3",
        "number": 6,
        "open_issues": 635,
        "state": "open",
        "title": "backlog",
        "updated_at": "2025-01-21T00:09:37Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/6"
    },
    "node_id": "I_kwDOAPphoM6PgSAc",
    "number": 29712,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 2,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 2,
        "url": "https://api.github.com/repos/neovim/neovim/issues/29712/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/29712/timeline",
    "title": "clipboard registers + and * are slow on WSL2",
    "updated_at": "2025-01-19T11:18:42Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/29712",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/127370142?v=4",
        "events_url": "https://api.github.com/users/dsoto1219/events{/privacy}",
        "followers_url": "https://api.github.com/users/dsoto1219/followers",
        "following_url": "https://api.github.com/users/dsoto1219/following{/other_user}",
        "gists_url": "https://api.github.com/users/dsoto1219/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/dsoto1219",
        "id": 127370142,
        "login": "dsoto1219",
        "node_id": "U_kgDOB5eDng",
        "organizations_url": "https://api.github.com/users/dsoto1219/orgs",
        "received_events_url": "https://api.github.com/users/dsoto1219/received_events",
        "repos_url": "https://api.github.com/users/dsoto1219/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/dsoto1219/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/dsoto1219/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/dsoto1219",
        "user_view_type": "public"
    }
}