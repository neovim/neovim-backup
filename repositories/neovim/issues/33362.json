{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "body": "### Problem\n\nI have a broken tree-sitter query somewhere, which is broken on patch files. I can probably figure it out with sufficient use of grep, but the problem is much more frustrating to diagnose because the name of the query file is not in the traceback or error message, so I have no idea which language is actually at fault.\n\n```\nError executing vim.schedule lua callback: /usr/share/nvim/runtime/lua/vim/treesitter/query.lua:252: Query error at 1:3. Invalid node type \"comment\":\n((comment) @injection.content\n  ^\n\nstack traceback:\n        [C]: in function '_ts_parse_query'\n        /usr/share/nvim/runtime/lua/vim/treesitter/query.lua:252: in function 'fn'\n        /usr/share/nvim/runtime/lua/vim/func/_memoize.lua:58: in function 'fn'\n        /usr/share/nvim/runtime/lua/vim/func/_memoize.lua:58: in function 'get'\n        /usr/share/nvim/runtime/lua/vim/treesitter/languagetree.lua:128: in function 'new'\n        /usr/share/nvim/runtime/lua/vim/treesitter.lua:41: in function '_create_parser'\n        /usr/share/nvim/runtime/lua/vim/treesitter.lua:108: in function 'get_parser'\n        /usr/share/nvim/runtime/lua/vim/treesitter.lua:416: in function 'ts_highlighter'\n        .../start/telescope.nvim/lua/telescope/previewers/utils.lua:154: in function 'highlighter'\n        ...scope.nvim/lua/telescope/previewers/buffer_previewer.lua:233: in function ''\n        vim/_editor.lua: in function <vim/_editor.lua:0>\n```\n\n### Steps to reproduce\n\nHeavens I don't know. Screw up a query which is loaded by some kind of lua. Seems like `ts_highlighter:get_parser` might be relevant?\n\n### Expected behavior\n\nI would like to know which file path the bad query is in and perhaps the language.\n\n### Nvim version (nvim -v)\n\nNVIM v0.10.4\n\n### Vim (not Nvim) behaves the same?\n\nN/A\n\n### Operating system/version\n\nArch Linux\n\n### Terminal name/version\n\nalacritty\n\n### $TERM environment variable\n\nalacritty\n\n### Installation\n\nArch repos",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "Try Nvim 0.11, or the latest development version. The [Releases](https://github.com/neovim/neovim/releases/tag/nightly) page has pre-built archives for Linux/Windows/macOS. Check `:version` to confirm the version.",
            "created_at": "2025-04-07T10:55:27Z",
            "html_url": "https://github.com/neovim/neovim/issues/33362#issuecomment-2782917732",
            "id": 2782917732,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33362",
            "node_id": "IC_kwDOAPphoM6l3_Rk",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2782917732/reactions"
            },
            "updated_at": "2025-04-07T10:55:27Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2782917732",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 1,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/33362/comments",
    "created_at": "2025-04-06T21:33:20Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/33362/events",
    "html_url": "https://github.com/neovim/neovim/issues/33362",
    "id": 2975250851,
    "labels": [
        {
            "color": "FBCA04",
            "default": false,
            "description": "We need minimal steps to reproduce the issue",
            "id": 298863445,
            "name": "needs:repro",
            "node_id": "MDU6TGFiZWwyOTg4NjM0NDU=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/needs:repro"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/33362/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM6xVrmj",
    "number": 33362,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/33362/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/33362/timeline",
    "title": "tree-sitter error reporting does not list the query file name in question",
    "type": {
        "color": "red",
        "created_at": "2024-01-25T10:10:19Z",
        "description": "An unexpected problem or behavior",
        "id": 597163,
        "is_enabled": true,
        "name": "Bug",
        "node_id": "IT_kwDOAGK_Pc4ACRyr",
        "updated_at": "2024-07-26T10:12:30Z"
    },
    "updated_at": "2025-04-07T10:55:29Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/33362",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/6652840?v=4",
        "events_url": "https://api.github.com/users/lf-/events{/privacy}",
        "followers_url": "https://api.github.com/users/lf-/followers",
        "following_url": "https://api.github.com/users/lf-/following{/other_user}",
        "gists_url": "https://api.github.com/users/lf-/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/lf-",
        "id": 6652840,
        "login": "lf-",
        "node_id": "MDQ6VXNlcjY2NTI4NDA=",
        "organizations_url": "https://api.github.com/users/lf-/orgs",
        "received_events_url": "https://api.github.com/users/lf-/received_events",
        "repos_url": "https://api.github.com/users/lf-/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/lf-/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/lf-/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/lf-",
        "user_view_type": "public"
    }
}