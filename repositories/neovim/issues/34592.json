{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "body": "### Problem\n\nRecently I was looking for a good way to test that a part of my config displayed correctly on my screen without mocking `vim.api.*`. Since I had recently been working on getting up to speed with contributing to neovim the `screen:expect()` helper for asserting a certain screen state came to mind from neovim's functional test suite. Following this I spent some time looking into alternatives to this functionality from other neovim testing frameworks and I couldn't find anything that worked anywhere as well as our internal testing utils.\n\nSo I ended up trying to see if I could use a lot of neovim's test utils in my config (see https://github.com/The-Briel-Deal/config/tree/main/nvim/test/util) and I was able to without too much trouble! So now I'm able to run functional tests on my config the same way we run functional tests in neovim! I only pulled in `testutil.lua`, `testnvim.lua`, `screen.lua` and a few other modules they depend on, but I imagine most other test utils could be exposed in a similar way.\n\n### Expected behavior\n\n\nSo what i'm wondering is how would the core maintainers feel about moving neovim's internal to the `vim.*` api that neovim ships with? We could put it in `vim.test.*` for example so that plugin developers have an easy way to test neovim with standard upstream busted like we do internally. I believe that most of our test utils are pretty agnostic of the test framework too so the user doesn't have to use busted if they want to use another or make their own test framework.\n\nIf we're interested than I would be more than happy to do this! I just wanted to get a feel for the neovim team's feelings first.\n\nAlso, if we don't want to bundle it in the standard neovim release, we could also just create a seperate repo for distributing this.",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "https://github.com/lewis6991/nvim-test (in particular https://github.com/lewis6991/nvim-test/pull/12)",
            "created_at": "2025-06-21T14:48:28Z",
            "html_url": "https://github.com/neovim/neovim/issues/34592#issuecomment-2993618110",
            "id": 2993618110,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34592",
            "node_id": "IC_kwDOAPphoM6ybvy-",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2993618110/reactions"
            },
            "updated_at": "2025-06-21T14:50:55Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2993618110",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "> https://github.com/lewis6991/nvim-test\n\nThanks for linking that @clason! I think I may have run into that but it didn't look super actively maintained. The reason I think it would be super cool if internal neovim used the same testing utils and framework as they expose is because we wouldn't have to have a third party maintain a seperate repository, it sounds nice to only have one source of truth, and I think it would be even better if you didn't even need a third party plugin to do these sort of tests.",
            "created_at": "2025-06-21T14:52:34Z",
            "html_url": "https://github.com/neovim/neovim/issues/34592#issuecomment-2993619963",
            "id": 2993619963,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34592",
            "node_id": "IC_kwDOAPphoM6ybwP7",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2993619963/reactions"
            },
            "updated_at": "2025-06-21T14:52:34Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2993619963",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/86860060?v=4",
                "events_url": "https://api.github.com/users/The-Briel-Deal/events{/privacy}",
                "followers_url": "https://api.github.com/users/The-Briel-Deal/followers",
                "following_url": "https://api.github.com/users/The-Briel-Deal/following{/other_user}",
                "gists_url": "https://api.github.com/users/The-Briel-Deal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/The-Briel-Deal",
                "id": 86860060,
                "login": "The-Briel-Deal",
                "node_id": "MDQ6VXNlcjg2ODYwMDYw",
                "organizations_url": "https://api.github.com/users/The-Briel-Deal/orgs",
                "received_events_url": "https://api.github.com/users/The-Briel-Deal/received_events",
                "repos_url": "https://api.github.com/users/The-Briel-Deal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/The-Briel-Deal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/The-Briel-Deal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/The-Briel-Deal",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "That is exactly what's being done there (remember that both are just vendoring `busted`, which is the _real_ source of truth). And Neovim core has very special needs for testing which may not be relevant to plugins (and, conversely, packagers may want to run these tests out of the box) so \"one size fits all\" fits none. There's currently reticence to shove more stuff into the Nvim stdlib. (Certainly not `busted`, which is _way_ too large.)\n\nSo this is very likely going to remain a separate project (but may move under the neovim org at some point). Won't change the maintainer, tho ;)",
            "created_at": "2025-06-21T14:55:35Z",
            "html_url": "https://github.com/neovim/neovim/issues/34592#issuecomment-2993621125",
            "id": 2993621125,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34592",
            "node_id": "IC_kwDOAPphoM6ybwiF",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2993621125/reactions"
            },
            "updated_at": "2025-06-21T15:01:36Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2993621125",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I gotcha, I wasn't suggesting vendoring busted though, just the test utils to validate things like screen state, and to run neovim in a seperate process.\n\nWhen I pulled in the test utils to my config, I didn't need to change much to specifically make it work with testing my config. All I needed to do was update the imports so i don't think we would have to make anything more generic than it already is. I understand though! I might check out nvim-test then.",
            "created_at": "2025-06-21T15:01:57Z",
            "html_url": "https://github.com/neovim/neovim/issues/34592#issuecomment-2993623692",
            "id": 2993623692,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34592",
            "node_id": "IC_kwDOAPphoM6ybxKM",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2993623692/reactions"
            },
            "updated_at": "2025-06-21T15:01:57Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2993623692",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/86860060?v=4",
                "events_url": "https://api.github.com/users/The-Briel-Deal/events{/privacy}",
                "followers_url": "https://api.github.com/users/The-Briel-Deal/followers",
                "following_url": "https://api.github.com/users/The-Briel-Deal/following{/other_user}",
                "gists_url": "https://api.github.com/users/The-Briel-Deal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/The-Briel-Deal",
                "id": 86860060,
                "login": "The-Briel-Deal",
                "node_id": "MDQ6VXNlcjg2ODYwMDYw",
                "organizations_url": "https://api.github.com/users/The-Briel-Deal/orgs",
                "received_events_url": "https://api.github.com/users/The-Briel-Deal/received_events",
                "repos_url": "https://api.github.com/users/The-Briel-Deal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/The-Briel-Deal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/The-Briel-Deal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/The-Briel-Deal",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Well, the issue is that exposing them requires documenting them and keeping them tested (as an API, not the internal tests!). It also \"locks\" these functions down so we can't easily change them if we needed for _our_ tests. So there'd be a cost. \n\nThat doesn't mean _some_ function can't be exposed -- maybe you could edit your issue to be more specific about the functions you would like to use, and how? It's a lot easier to talk about concrete proposals, so you could stub out the `vim.test` API you propose (and explain what changes would be needed to make it work without the full `test/` and `busted` runtime dependencies).\n\n(Related: https://github.com/neovim/neovim/issues/19000)\n\n(Also see the previous discussion at https://github.com/neovim/neovim/issues/17367)",
            "created_at": "2025-06-21T15:06:13Z",
            "html_url": "https://github.com/neovim/neovim/issues/34592#issuecomment-2993625666",
            "id": 2993625666,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34592",
            "node_id": "IC_kwDOAPphoM6ybxpC",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2993625666/reactions"
            },
            "updated_at": "2025-06-21T15:13:26Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2993625666",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "> Well, the issue is that exposing them requires documenting them and keeping them tested (as an API, not the internal tests!). It also \"locks\" these functions down so we can't easily change them if we needed for _our_ tests. So there'd be a cost.\n> \n> That doesn't mean _some_ function can't be exposed -- maybe you could edit your issue to be more specific about the functions you would like to use, and how? It's a lot easier to talk about concrete proposals, so you could stub out the `vim.test` API you propose (and explain what changes would be needed to make it work without the full `test/` and `busted` runtime dependencies).\n> \n> (Related: [#19000](https://github.com/neovim/neovim/issues/19000))\n> \n> (Also see the previous discussion at [#17367](https://github.com/neovim/neovim/issues/17367))\n\nI think that sounds fair. I feel like the big one I found really difficult to make a good alternative to was screen:expect(), it would also be super nice to expose a means to launch an isolated test context. I'll do some thinking on this and I might come back to this if I can come up with a concrete proposal with a smaller scope.",
            "created_at": "2025-06-21T15:27:03Z",
            "html_url": "https://github.com/neovim/neovim/issues/34592#issuecomment-2993634635",
            "id": 2993634635,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34592",
            "node_id": "IC_kwDOAPphoM6ybz1L",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2993634635/reactions"
            },
            "updated_at": "2025-06-21T15:27:03Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2993634635",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/86860060?v=4",
                "events_url": "https://api.github.com/users/The-Briel-Deal/events{/privacy}",
                "followers_url": "https://api.github.com/users/The-Briel-Deal/followers",
                "following_url": "https://api.github.com/users/The-Briel-Deal/following{/other_user}",
                "gists_url": "https://api.github.com/users/The-Briel-Deal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/The-Briel-Deal",
                "id": 86860060,
                "login": "The-Briel-Deal",
                "node_id": "MDQ6VXNlcjg2ODYwMDYw",
                "organizations_url": "https://api.github.com/users/The-Briel-Deal/orgs",
                "received_events_url": "https://api.github.com/users/The-Briel-Deal/received_events",
                "repos_url": "https://api.github.com/users/The-Briel-Deal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/The-Briel-Deal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/The-Briel-Deal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/The-Briel-Deal",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "see also https://github.com/neovim/neovim/issues/5264#issuecomment-2328421195",
            "created_at": "2025-06-23T12:37:51Z",
            "html_url": "https://github.com/neovim/neovim/issues/34592#issuecomment-2996337660",
            "id": 2996337660,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34592",
            "node_id": "IC_kwDOAPphoM6ymHv8",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2996337660/reactions"
            },
            "updated_at": "2025-06-23T12:37:51Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2996337660",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "> see also [#5264 (comment)](https://github.com/neovim/neovim/issues/5264#issuecomment-2328421195)\n\nHey @justinmk,\nI want to make sure you are on-board with the first step I'd like to do before I start.\n\nSo I would like to start this by exposing the core interface of `test/functional/testnvim.lua` to the user so that a user can do things like spawning a new test nvim instance, passing lua/vimscript code to the test instance to execute, and getting the current buffer's state. That should be useful for testing on it's own and it builds the foundation of adding other test modules in the future. I'de like to put these under `vim.test.*` for functions in `testnvim.lua`, then in the future with modules like `screen.lua` we can put that under `vim.test.screen.*`.\n\nWhen doing this I'll also change our functional test code to use `vim.test.*` so that we don't have two copies of the same test functionality.\n\nAny objections before I get started with this?",
            "created_at": "2025-06-28T20:18:19Z",
            "html_url": "https://github.com/neovim/neovim/issues/34592#issuecomment-3016013798",
            "id": 3016013798,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34592",
            "node_id": "IC_kwDOAPphoM6zxLfm",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3016013798/reactions"
            },
            "updated_at": "2025-06-28T20:19:28Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3016013798",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/86860060?v=4",
                "events_url": "https://api.github.com/users/The-Briel-Deal/events{/privacy}",
                "followers_url": "https://api.github.com/users/The-Briel-Deal/followers",
                "following_url": "https://api.github.com/users/The-Briel-Deal/following{/other_user}",
                "gists_url": "https://api.github.com/users/The-Briel-Deal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/The-Briel-Deal",
                "id": 86860060,
                "login": "The-Briel-Deal",
                "node_id": "MDQ6VXNlcjg2ODYwMDYw",
                "organizations_url": "https://api.github.com/users/The-Briel-Deal/orgs",
                "received_events_url": "https://api.github.com/users/The-Briel-Deal/received_events",
                "repos_url": "https://api.github.com/users/The-Briel-Deal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/The-Briel-Deal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/The-Briel-Deal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/The-Briel-Deal",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "But test/client/ isn't exposed yet.",
            "created_at": "2025-06-28T23:24:59Z",
            "html_url": "https://github.com/neovim/neovim/issues/34592#issuecomment-3016145580",
            "id": 3016145580,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34592",
            "node_id": "IC_kwDOAPphoM6zxrqs",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3016145580/reactions"
            },
            "updated_at": "2025-06-28T23:24:59Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3016145580",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "To get this working in my config I just had to pull in these 3 modules, then update the `require()` statements to work with my runtimepath:\n```\nrpc_stream.lua\nsession.lua\nuv_stream.lua\n```\nSo I would pull these in as private `nvim__*` functions. I don't believe I ever had to interface with these from my test code.\n\nDo you know if we ever need to expose anything in these modules to the user? Or are these just used by testnvim.lua to spawn the client?\n\nThis is my test folder in my config if you want to see what I pulled in for a simple screen test:\nhttps://github.com/The-Briel-Deal/config/tree/main/nvim/test",
            "created_at": "2025-06-29T00:41:08Z",
            "html_url": "https://github.com/neovim/neovim/issues/34592#issuecomment-3016189524",
            "id": 3016189524,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34592",
            "node_id": "IC_kwDOAPphoM6zx2ZU",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3016189524/reactions"
            },
            "updated_at": "2025-06-29T00:43:36Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3016189524",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/86860060?v=4",
                "events_url": "https://api.github.com/users/The-Briel-Deal/events{/privacy}",
                "followers_url": "https://api.github.com/users/The-Briel-Deal/followers",
                "following_url": "https://api.github.com/users/The-Briel-Deal/following{/other_user}",
                "gists_url": "https://api.github.com/users/The-Briel-Deal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/The-Briel-Deal",
                "id": 86860060,
                "login": "The-Briel-Deal",
                "node_id": "MDQ6VXNlcjg2ODYwMDYw",
                "organizations_url": "https://api.github.com/users/The-Briel-Deal/orgs",
                "received_events_url": "https://api.github.com/users/The-Briel-Deal/received_events",
                "repos_url": "https://api.github.com/users/The-Briel-Deal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/The-Briel-Deal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/The-Briel-Deal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/The-Briel-Deal",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> exposing the core interface of `test/functional/testnvim.lua` to the user so that a user can do things like spawning a new test nvim instance, passing lua/vimscript code to the test instance to execute, and getting the current buffer's state\n\nAs [mentioned](https://github.com/neovim/neovim/issues/5264#issuecomment-2328421195),  there are various test harnesses, especially https://github.com/lewis6991/nvim-test we should look at and decide what interface we want. I don't have the bandwidth to do that atm.\n\nMeanwhile, the [roadmap](https://neovim.io/roadmap/) mentions a \"Lua remote plugin host\" (#31868). I suspect that `rpc_stream.lua`, `session.lua`, and `uv_stream.lua` are 100% unnecessary after #31868 is implemented. Nvim can already start a `nvim` process and call methods via `rpcrequest()`; the only(?) missing part is for Lua plugins to be able to easily define RPC methods.\n\nIOW:\n\n- we should not expose `rpc_stream.lua`, `session.lua`, `uv_stream.lua`\n- we should start by implementing [#31868](https://github.com/neovim/neovim/issues/31868)\n",
            "created_at": "2025-06-30T14:18:27Z",
            "html_url": "https://github.com/neovim/neovim/issues/34592#issuecomment-3019346879",
            "id": 3019346879,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34592",
            "node_id": "IC_kwDOAPphoM6z95O_",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3019346879/reactions"
            },
            "updated_at": "2025-06-30T14:24:52Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3019346879",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "That sounds fair enough! I might take a look at https://github.com/neovim/neovim/issues/31868 later if I have time later. I'm happy you are open to exposing the test helpers though!\n\nIf I were to draft a proposal document for the interface, where should I put the proposal, would you just want me to update the ticket description or leave a comment? Or do we have a more formal process like opening a \"discussion\" in the Discussions tab of this github repo?",
            "created_at": "2025-06-30T17:41:34Z",
            "html_url": "https://github.com/neovim/neovim/issues/34592#issuecomment-3020148259",
            "id": 3020148259,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34592",
            "node_id": "IC_kwDOAPphoM60A84j",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3020148259/reactions"
            },
            "updated_at": "2025-06-30T17:41:34Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3020148259",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/86860060?v=4",
                "events_url": "https://api.github.com/users/The-Briel-Deal/events{/privacy}",
                "followers_url": "https://api.github.com/users/The-Briel-Deal/followers",
                "following_url": "https://api.github.com/users/The-Briel-Deal/following{/other_user}",
                "gists_url": "https://api.github.com/users/The-Briel-Deal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/The-Briel-Deal",
                "id": 86860060,
                "login": "The-Briel-Deal",
                "node_id": "MDQ6VXNlcjg2ODYwMDYw",
                "organizations_url": "https://api.github.com/users/The-Briel-Deal/orgs",
                "received_events_url": "https://api.github.com/users/The-Briel-Deal/received_events",
                "repos_url": "https://api.github.com/users/The-Briel-Deal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/The-Briel-Deal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/The-Briel-Deal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/The-Briel-Deal",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> where should I put the proposal, would you just want me to update the ticket description or leave a comment?\n\neither is good, but updating the description here is always helpful",
            "created_at": "2025-06-30T18:43:37Z",
            "html_url": "https://github.com/neovim/neovim/issues/34592#issuecomment-3020325190",
            "id": 3020325190,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34592",
            "node_id": "IC_kwDOAPphoM60BoFG",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3020325190/reactions"
            },
            "updated_at": "2025-06-30T18:43:37Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3020325190",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 13,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/34592/comments",
    "created_at": "2025-06-21T14:46:37Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/34592/events",
    "html_url": "https://github.com/neovim/neovim/issues/34592",
    "id": 3165143537,
    "labels": [
        {
            "color": "c5def5",
            "default": false,
            "description": "",
            "id": 110418643,
            "name": "test",
            "node_id": "MDU6TGFiZWwxMTA0MTg2NDM=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/test"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "funtime",
            "id": 120251370,
            "name": "runtime",
            "node_id": "MDU6TGFiZWwxMjAyNTEzNzA=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/runtime"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "stdlib",
            "id": 573222693,
            "name": "lua",
            "node_id": "MDU6TGFiZWw1NzMyMjI2OTM=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/lua"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/34592/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 285,
        "created_at": "2014-11-26T22:13:11Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
            "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
            "followers_url": "https://api.github.com/users/justinmk/followers",
            "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/justinmk",
            "id": 1359421,
            "login": "justinmk",
            "node_id": "MDQ6VXNlcjEzNTk0MjE=",
            "organizations_url": "https://api.github.com/users/justinmk/orgs",
            "received_events_url": "https://api.github.com/users/justinmk/received_events",
            "repos_url": "https://api.github.com/users/justinmk/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/justinmk",
            "user_view_type": "public"
        },
        "description": "We don't plan to work on this, but will accept high quality contributions from someone who will own the feature and follow up on bug reports.",
        "due_on": null,
        "html_url": "https://github.com/neovim/neovim/milestone/9",
        "id": 881978,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/9/labels",
        "node_id": "MDk6TWlsZXN0b25lODgxOTc4",
        "number": 9,
        "open_issues": 335,
        "state": "open",
        "title": "needs-owner",
        "updated_at": "2025-06-30T09:47:52Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/9"
    },
    "node_id": "I_kwDOAPphoM68qEHx",
    "number": 34592,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/34592/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/34592/timeline",
    "title": "expose internal testing utils / framework",
    "type": {
        "color": "blue",
        "created_at": "2024-01-25T10:10:19Z",
        "description": "A request, idea, or new functionality",
        "id": 597167,
        "is_enabled": true,
        "name": "Enhancement",
        "node_id": "IT_kwDOAGK_Pc4ACRyv",
        "updated_at": "2024-07-26T10:12:30Z"
    },
    "updated_at": "2025-06-30T18:43:37Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/34592",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/86860060?v=4",
        "events_url": "https://api.github.com/users/The-Briel-Deal/events{/privacy}",
        "followers_url": "https://api.github.com/users/The-Briel-Deal/followers",
        "following_url": "https://api.github.com/users/The-Briel-Deal/following{/other_user}",
        "gists_url": "https://api.github.com/users/The-Briel-Deal/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/The-Briel-Deal",
        "id": 86860060,
        "login": "The-Briel-Deal",
        "node_id": "MDQ6VXNlcjg2ODYwMDYw",
        "organizations_url": "https://api.github.com/users/The-Briel-Deal/orgs",
        "received_events_url": "https://api.github.com/users/The-Briel-Deal/received_events",
        "repos_url": "https://api.github.com/users/The-Briel-Deal/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/The-Briel-Deal/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/The-Briel-Deal/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/The-Briel-Deal",
        "user_view_type": "public"
    }
}