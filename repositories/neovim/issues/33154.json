{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\n\nIn order to open diagnostics as virtual lines after jumping to them, you need to configure `vim.diagnostic.config` with `{virtual_lines = {current_line = true}}`. And create an autocommand on `CursorMoved` to disable virtual_lines. \nI have not managed to make this code to work in all cases the first time. That is, I can jump to 2 diagnostics and see them as virtual lines, but if I jump to 3, I won't see them. I used this code:\n\n```lua\nlocal reset_diagnostic_config_aucmd = function()\n  vim.api.nvim_create_autocmd('CursorMoved', {\n    group = vim.api.nvim_create_augroup('line-diagnostics', { clear = true }),\n    once = true,\n    callback = function()\n      vim.diagnostic.config { virtual_lines = false }\n    end,\n  })\nend\n\nmap('n', '[d', function()\n  vim.diagnostic.jump { count = -1 }\n  vim.diagnostic.config { virtual_lines = { current_line = true } }\n  reset_diagnostic_config_aucmd()\nend, { desc = 'Previous [D]iagnostic message' })\n```\n\n### Expected behavior\n\nI suggest adding a virtual_lines field to vim.diagnostics.JumpOpts to be able to customize them the same way you can customize a float window now.\n\nexample usage:\n```lua\nvim.diagnostic.jump {  \n  count = -1,  \n  virtual_lines = { current_line = true }, -- New option  \n} \n```\n\nthis aligns with existing patterns (e.g., float configuration in JumpOpts).",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "\n> this aligns with existing patterns (e.g., float configuration in JumpOpts).\n\nI don't understand why that `float` field exists, we should stop doing that kind of thing.\n\n> {float}? (`boolean|vim.diagnostic.Opts.Float`, default: `false`)\n> If `true`, call |vim.diagnostic.open_float()| after moving. \n\nWhenever that kind of feature is needed, it should be a handler of some sort, e.g. `on_jump`, so that the user can *pass a callback* that calls `vim.diagnostic.open_float()`, or disable virtual_lines, or whatever. That avoids the need for all these special-purpose flags.",
            "created_at": "2025-03-29T10:17:59Z",
            "html_url": "https://github.com/neovim/neovim/issues/33154#issuecomment-2763276462",
            "id": 2763276462,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33154",
            "node_id": "IC_kwDOAPphoM6ktECu",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2763276462/reactions"
            },
            "updated_at": "2025-03-29T14:24:46Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2763276462",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "@molostovvs I wanted something similar, and could get it working reliably with this implementation. Just needed a few things to consider, since jumps themselves also trigger as `CursorMoved`.\n\n```lua\n---@param jumpCount number\nlocal function jumpWithVirtLineDiags(jumpCount)\n\tpcall(vim.api.nvim_del_augroup_by_name, \"jumpWithVirtLineDiags\") -- prevent autocmd for repeated jumps\n\n\tvim.diagnostic.jump { count = jumpCount }\n\n\tlocal initialVirtTextConf = vim.diagnostic.config().virtual_text\n\tvim.diagnostic.config {\n\t\tvirtual_text = false,\n\t\tvirtual_lines = { current_line = true },\n\t}\n\n\tvim.defer_fn(function() -- deferred to not trigger by jump itself\n\t\tvim.api.nvim_create_autocmd(\"CursorMoved\", {\n\t\t\tdesc = \"User(once): Reset diagnostics virtual lines\",\n\t\t\tonce = true,\n\t\t\tgroup = vim.api.nvim_create_augroup(\"jumpWithVirtLineDiags\", {}),\n\t\t\tcallback = function()\n\t\t\t\tvim.diagnostic.config { virtual_lines = false, virtual_text = initialVirtTextConf }\n\t\t\tend,\n\t\t})\n\tend, 1)\nend\n\nvim.keymap.set(\"n\", \"ge\", function() jumpWithVirtLineDiags(1) end, { desc = \"Next diagnostic\" })\nvim.keymap.set(\"n\", \"gE\", function() jumpWithVirtLineDiags(-1) end, { desc = \"Prev diagnostic\" })\n```",
            "created_at": "2025-03-29T13:44:20Z",
            "html_url": "https://github.com/neovim/neovim/issues/33154#issuecomment-2763370457",
            "id": 2763370457,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33154",
            "node_id": "IC_kwDOAPphoM6kta_Z",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2763370457/reactions"
            },
            "updated_at": "2025-03-29T20:52:15Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2763370457",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/73286100?v=4",
                "events_url": "https://api.github.com/users/chrisgrieser/events{/privacy}",
                "followers_url": "https://api.github.com/users/chrisgrieser/followers",
                "following_url": "https://api.github.com/users/chrisgrieser/following{/other_user}",
                "gists_url": "https://api.github.com/users/chrisgrieser/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/chrisgrieser",
                "id": 73286100,
                "login": "chrisgrieser",
                "node_id": "MDQ6VXNlcjczMjg2MTAw",
                "organizations_url": "https://api.github.com/users/chrisgrieser/orgs",
                "received_events_url": "https://api.github.com/users/chrisgrieser/received_events",
                "repos_url": "https://api.github.com/users/chrisgrieser/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/chrisgrieser/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/chrisgrieser/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/chrisgrieser",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "ok, this code works for me 100% of the time and looks cleaner:\n\n```lua\nlocal reset_vl = vim.schedule_wrap(function()\n  vim.diagnostic.config { virtual_lines = { current_line = true } }\n  vim.api.nvim_create_autocmd('CursorMoved', {\n    once = true,\n    callback = function()\n      vim.diagnostic.config { virtual_lines = false }\n    end,\n  })\nend)\n\nvim.keymap.set('n', '[d', function()\n  vim.diagnostic.jump { count = -1 }\n  reset_vl()\nend)\n```",
            "created_at": "2025-03-29T17:37:20Z",
            "html_url": "https://github.com/neovim/neovim/issues/33154#issuecomment-2763862063",
            "id": 2763862063,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33154",
            "node_id": "IC_kwDOAPphoM6kvTAv",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2763862063/reactions"
            },
            "updated_at": "2025-03-29T17:37:20Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2763862063",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/86685532?v=4",
                "events_url": "https://api.github.com/users/molostovvs/events{/privacy}",
                "followers_url": "https://api.github.com/users/molostovvs/followers",
                "following_url": "https://api.github.com/users/molostovvs/following{/other_user}",
                "gists_url": "https://api.github.com/users/molostovvs/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/molostovvs",
                "id": 86685532,
                "login": "molostovvs",
                "node_id": "MDQ6VXNlcjg2Njg1NTMy",
                "organizations_url": "https://api.github.com/users/molostovvs/orgs",
                "received_events_url": "https://api.github.com/users/molostovvs/received_events",
                "repos_url": "https://api.github.com/users/molostovvs/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/molostovvs/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/molostovvs/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/molostovvs",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "@justinmk, should I open a new issue (and close this) about making `vim.diagnostic.JumpOpts.float` deprecated, and instead add an `after_jump` field that accepts a function that can be used to implement any post-jump actions?",
            "created_at": "2025-03-29T18:48:23Z",
            "html_url": "https://github.com/neovim/neovim/issues/33154#issuecomment-2764065386",
            "id": 2764065386,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33154",
            "node_id": "IC_kwDOAPphoM6kwEpq",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2764065386/reactions"
            },
            "updated_at": "2025-03-29T18:48:23Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2764065386",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/86685532?v=4",
                "events_url": "https://api.github.com/users/molostovvs/events{/privacy}",
                "followers_url": "https://api.github.com/users/molostovvs/followers",
                "following_url": "https://api.github.com/users/molostovvs/following{/other_user}",
                "gists_url": "https://api.github.com/users/molostovvs/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/molostovvs",
                "id": 86685532,
                "login": "molostovvs",
                "node_id": "MDQ6VXNlcjg2Njg1NTMy",
                "organizations_url": "https://api.github.com/users/molostovvs/orgs",
                "received_events_url": "https://api.github.com/users/molostovvs/received_events",
                "repos_url": "https://api.github.com/users/molostovvs/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/molostovvs/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/molostovvs/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/molostovvs",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "No, this is where that can be tracked.",
            "created_at": "2025-03-29T20:52:22Z",
            "html_url": "https://github.com/neovim/neovim/issues/33154#issuecomment-2764238274",
            "id": 2764238274,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33154",
            "node_id": "IC_kwDOAPphoM6kwu3C",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2764238274/reactions"
            },
            "updated_at": "2025-03-29T20:52:22Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2764238274",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 5,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/33154/comments",
    "created_at": "2025-03-29T09:08:00Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/33154/events",
    "html_url": "https://github.com/neovim/neovim/issues/33154",
    "id": 2957883852,
    "labels": [
        {
            "color": "C5DEF5",
            "default": false,
            "description": "",
            "id": 3361645105,
            "name": "diagnostic",
            "node_id": "MDU6TGFiZWwzMzYxNjQ1MTA1",
            "url": "https://api.github.com/repos/neovim/neovim/labels/diagnostic"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/33154/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 267,
        "created_at": "2014-11-26T22:13:11Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
            "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
            "followers_url": "https://api.github.com/users/justinmk/followers",
            "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/justinmk",
            "id": 1359421,
            "login": "justinmk",
            "node_id": "MDQ6VXNlcjEzNTk0MjE=",
            "organizations_url": "https://api.github.com/users/justinmk/orgs",
            "received_events_url": "https://api.github.com/users/justinmk/received_events",
            "repos_url": "https://api.github.com/users/justinmk/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/justinmk",
            "user_view_type": "public"
        },
        "description": "We don't plan to work on this, but will accept high quality contributions from someone who will own the feature and follow up on bug reports.",
        "due_on": null,
        "html_url": "https://github.com/neovim/neovim/milestone/9",
        "id": 881978,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/9/labels",
        "node_id": "MDk6TWlsZXN0b25lODgxOTc4",
        "number": 9,
        "open_issues": 317,
        "state": "open",
        "title": "needs-owner",
        "updated_at": "2025-03-31T13:05:33Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/9"
    },
    "node_id": "I_kwDOAPphoM6wTbnM",
    "number": 33154,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 1,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 1,
        "url": "https://api.github.com/repos/neovim/neovim/issues/33154/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/33154/timeline",
    "title": "Add virtual_lines option to vim.diagnostic.JumpOpts",
    "type": {
        "color": "blue",
        "created_at": "2024-01-25T10:10:19Z",
        "description": "A request, idea, or new functionality",
        "id": 597167,
        "is_enabled": true,
        "name": "Enhancement",
        "node_id": "IT_kwDOAGK_Pc4ACRyv",
        "updated_at": "2024-07-26T10:12:30Z"
    },
    "updated_at": "2025-03-29T20:52:23Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/33154",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/86685532?v=4",
        "events_url": "https://api.github.com/users/molostovvs/events{/privacy}",
        "followers_url": "https://api.github.com/users/molostovvs/followers",
        "following_url": "https://api.github.com/users/molostovvs/following{/other_user}",
        "gists_url": "https://api.github.com/users/molostovvs/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/molostovvs",
        "id": 86685532,
        "login": "molostovvs",
        "node_id": "MDQ6VXNlcjg2Njg1NTMy",
        "organizations_url": "https://api.github.com/users/molostovvs/orgs",
        "received_events_url": "https://api.github.com/users/molostovvs/received_events",
        "repos_url": "https://api.github.com/users/molostovvs/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/molostovvs/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/molostovvs/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/molostovvs",
        "user_view_type": "public"
    }
}