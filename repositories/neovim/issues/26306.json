{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\n\nWhen a line has length > `synmaxcol`, and it's set to `nowrap`, the syntax highlighting of the next lines becomes wrong:\r\n![image](https://github.com/neovim/neovim/assets/4710875/fe1fae04-e12f-45fe-aad3-a6cf836e8f5b)\r\n\r\n\n\n### Steps to reproduce\n\n1. Generate a file `test.py` with following content:\r\n```python\r\na = \"111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111\"\r\nb = 2\r\nc = 3\r\nd = 4\r\n```\r\n2. `nvim --clean test.py`\r\n3. `set nowrap`\r\n4. `set synmaxcol=220`\r\n\n\n### Expected behavior\n\nThe highlighting not messed up.\n\n### Neovim version (nvim -v)\n\nv0.10.0-dev-64b53b7\n\n### Vim (not Nvim) behaves the same?\n\nyes, Vi IMproved 9.0 (2022 Jun 28, compiled Nov 22 2023 00:00:00)\n\n### Operating system/version\n\nfedora 39\n\n### Terminal name/version\n\nwezterm nightly 20231127_013355_05ae4e21-0\n\n### $TERM environment variable\n\nxterm-256color\n\n### Installation\n\nnvim-linux64.tar.gz from github release page",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "> When a line has length > `synmaxcol` ... highlighting of the next lines becomes wrong\r\n\r\nThis is the basic compromise defined by 'synmaxcol'. \r\n\r\nIn your example, I assume you expect the syntax engine to treat the long string as \"terminated\", and treat the next line as a new \"statement\". But this means the syntax engine needs to have those heuristics builtin, or fed to it.\r\n\r\nMeanwhile, the heuristic easily falls apart depending on the long line. For example the code could look like this:\r\n\r\n```\r\na = \"1111111111111111<long line...>\"; foo(\r\n\"bar\")\r\nc = 3\r\nd = 4\r\n```\r\n\r\nI think to satisfy the expected behavior here, the syntax engine would need to add a new feature that allows syntax files to define heuristics. Seems rather low-leverage, especially for Neovim where our answer to this is to outsource this problem to treesitter.\r\n\r\nP.S. surprisingly I didn't find any previous discussions about this on [vim_dev](https://groups.google.com/g/vim_dev/search?q=synmaxcol) or [vim/vim](https://github.com/vim/vim/issues?q=is%3Aissue+synmaxcol+is%3Aclosed).",
            "created_at": "2023-11-30T00:23:47Z",
            "html_url": "https://github.com/neovim/neovim/issues/26306#issuecomment-1832908932",
            "id": 1832908932,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/26306",
            "node_id": "IC_kwDOAPphoM5tP_iE",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 1,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1832908932/reactions"
            },
            "updated_at": "2023-11-30T00:29:14Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1832908932",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 1,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/26306/comments",
    "created_at": "2023-11-29T18:50:45Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/26306/events",
    "html_url": "https://github.com/neovim/neovim/issues/26306",
    "id": 2017212997,
    "labels": [
        {
            "color": "F9D0C4",
            "default": false,
            "description": "wrong behavior inherited from vim",
            "id": 154310492,
            "name": "bug-vim",
            "node_id": "MDU6TGFiZWwxNTQzMTA0OTI=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug-vim"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "regex syntax or non-regex parsing, lpeg, grammars",
            "id": 531600085,
            "name": "syntax",
            "node_id": "MDU6TGFiZWw1MzE2MDAwODU=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/syntax"
        },
        {
            "color": "FBCA04",
            "default": false,
            "description": "upstream issue that must be fixed in Vim first",
            "id": 2639399975,
            "name": "needs:vim-patch",
            "node_id": "MDU6TGFiZWwyNjM5Mzk5OTc1",
            "url": "https://api.github.com/repos/neovim/neovim/labels/needs:vim-patch"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/26306/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 260,
        "created_at": "2014-11-26T22:13:11Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
            "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
            "followers_url": "https://api.github.com/users/justinmk/followers",
            "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/justinmk",
            "id": 1359421,
            "login": "justinmk",
            "node_id": "MDQ6VXNlcjEzNTk0MjE=",
            "organizations_url": "https://api.github.com/users/justinmk/orgs",
            "received_events_url": "https://api.github.com/users/justinmk/received_events",
            "repos_url": "https://api.github.com/users/justinmk/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/justinmk",
            "user_view_type": "public"
        },
        "description": "We don't plan to work on this, but will accept high quality contributions from someone who will own the feature and follow up on bug reports.",
        "due_on": null,
        "html_url": "https://github.com/neovim/neovim/milestone/9",
        "id": 881978,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/9/labels",
        "node_id": "MDk6TWlsZXN0b25lODgxOTc4",
        "number": 9,
        "open_issues": 297,
        "state": "open",
        "title": "needs-owner",
        "updated_at": "2025-01-20T17:56:23Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/9"
    },
    "node_id": "I_kwDOAPphoM54PDpF",
    "number": 26306,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/26306/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/26306/timeline",
    "title": "Vim syntax highlighting broken after long line",
    "updated_at": "2025-01-19T11:48:01Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/26306",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/4710875?v=4",
        "events_url": "https://api.github.com/users/aj3423/events{/privacy}",
        "followers_url": "https://api.github.com/users/aj3423/followers",
        "following_url": "https://api.github.com/users/aj3423/following{/other_user}",
        "gists_url": "https://api.github.com/users/aj3423/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/aj3423",
        "id": 4710875,
        "login": "aj3423",
        "node_id": "MDQ6VXNlcjQ3MTA4NzU=",
        "organizations_url": "https://api.github.com/users/aj3423/orgs",
        "received_events_url": "https://api.github.com/users/aj3423/received_events",
        "repos_url": "https://api.github.com/users/aj3423/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/aj3423/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/aj3423/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/aj3423",
        "user_view_type": "public"
    }
}