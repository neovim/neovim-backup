{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\n\nWhen building with the bundled LuaRocks (v3.9.2), LuaJIT’s manifest hits the 65536-item limit and the build fails when installing the first rock (`mpack`). Bumping to LuaRocks v3.12.0 resolves it.\n\n**Logs:**\n```\n...\nNo existing manifest. Attempting to rebuild...\nluarocks 3.9.2-1 is now installed in /downloads/neovim/.deps/usr (license: MIT)\n\ngmake[1]: Leaving directory '/downloads/neovim/.deps/build/src/luarocks'\n[88/126] Generating usr/lib/luarocks/rocks-5.1/mpack\nFAILED: usr/lib/luarocks/rocks-5.1/mpack /downloads/neovim/.deps/usr/lib/luarocks/rocks-5.1/mpack\ncd /downloads/neovim/.deps && /usr/bin/cmake -E env  /downloads/neovim/.deps/usr/bin/luarocks build mpack 1.0.11-0 CC=/usr/bin/cc LD=/usr/bin/cc\nWarning: Failed searching manifest: Failed loading manifest for https://luarocks.org: Error loading file: [string \"/.cache/luarocks/https___luarocks.o...\"]:202975: main function has more than 65536 constants\nWarning: Failed searching manifest: Failed loading manifest for https://raw.githubusercontent.com/rocks-moonscript-org/moonrocks-mirror/master/: Error loading file: [string \"/.cache/luarocks/https___raw.github...\"]:202956: main function has more than 65536 constants\nWarning: Failed searching manifest: Failed loading manifest for https://luafr.org/luarocks/: Error running file: [string \"/.cache/luarocks/https___luafr.org_...\"]:1: attempt to call global 'print' (a nil value)\n\nError: Could not find a result named mpack 1.0.11-0: No results matching query were found for Lua 5.1.\nTo check if it is available for other Lua versions, use --check-lua-versions.\n[89/126] Performing build step for 'treesitter-vim'\n[1/3] Building C object CMakeFiles/parser.dir/src/scanner.c.o\n[2/3] Building C object CMakeFiles/parser.dir/src/parser.c.o\n[3/3] Linking C shared module vim.so\nninja: build stopped: subcommand failed.\nmake: *** [Makefile:99: deps] Error 1\n```\n\nAfter changing the luarocks version to v3.12.0, the issue was resolved.\n\n![Image](https://github.com/user-attachments/assets/acb625c5-9c36-4793-9983-37e2da51df1b)\n\n**Logs:**\n```\n...\nNo existing manifest. Attempting to rebuild...\nluarocks dev-1 is now installed in /downloads/neovim/.deps/usr (license: MIT)\n\ngmake[1]: Leaving directory '/downloads/neovim/.deps/build/src/luarocks'\n[88/126] Generating usr/lib/luarocks/rocks-5.1/mpack\n\n\n/usr/bin/cc -O2 -fPIC -I/downloads/neovim/.deps/usr/include/luajit-2.1 -c lmpack.c -o lmpack.o\n/usr/bin/cc  -shared -o /tmp/luarocks_build-mpack-1.0.11-0-346517/mpack.so lmpack.o\nmpack 1.0.11-0 is now installed in /downloads/neovim/.deps/usr (license: MIT)\n```\n\nThis issue with LuaRocks has been discussed in this PR: [#1797](https://github.com/luarocks/luarocks/issues/1797)\n\n### Steps to reproduce\n\n(on  v0.9.5 and v0.11.2) \nmake CMAKE_BUILD_TYPE=Release\n\n### Expected behavior\n\nThe luarocks bootstrap step should complete, installing mpack, lpeg, etc., without a manifest‐size error.\n\n### Nvim version (nvim -v)\n\nv0.9.5\n\n### Vim (not Nvim) behaves the same?\n\nno\n\n### Operating system/version\n\nDebian GNU/Linux 11 (bullseye)\n\n### Terminal name/version\n\nWindows Terminal\n\n### $TERM environment variable\n\nxterm-256color\n\n### Installation\n\nbuild from repo",
    "closed_at": "2025-06-08T14:15:43Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
        "events_url": "https://api.github.com/users/clason/events{/privacy}",
        "followers_url": "https://api.github.com/users/clason/followers",
        "following_url": "https://api.github.com/users/clason/following{/other_user}",
        "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/clason",
        "id": 2361214,
        "login": "clason",
        "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
        "organizations_url": "https://api.github.com/users/clason/orgs",
        "received_events_url": "https://api.github.com/users/clason/received_events",
        "repos_url": "https://api.github.com/users/clason/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/clason",
        "user_view_type": "public"
    },
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "We do not bundle luarocks (anymore).\n\n> v0.9.5\n\nThat version is massively outdated and no longer supported. Please use a current version (v0.11.2).",
            "created_at": "2025-06-08T14:15:43Z",
            "html_url": "https://github.com/neovim/neovim/issues/34376#issuecomment-2954102098",
            "id": 2954102098,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34376",
            "node_id": "IC_kwDOAPphoM6wFAVS",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2954102098/reactions"
            },
            "updated_at": "2025-06-08T14:15:43Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2954102098",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "> We do not bundle luarocks (anymore).\n> \n> > v0.9.5\n> \n> That version is massively outdated and no longer supported. Please use a current version (v0.11.2).\n\n@clason The same thing happened with v0.11.2",
            "created_at": "2025-06-08T14:24:30Z",
            "html_url": "https://github.com/neovim/neovim/issues/34376#issuecomment-2954106588",
            "id": 2954106588,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34376",
            "node_id": "IC_kwDOAPphoM6wFBbc",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2954106588/reactions"
            },
            "updated_at": "2025-06-08T14:24:58Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2954106588",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11230167?v=4",
                "events_url": "https://api.github.com/users/piyuple/events{/privacy}",
                "followers_url": "https://api.github.com/users/piyuple/followers",
                "following_url": "https://api.github.com/users/piyuple/following{/other_user}",
                "gists_url": "https://api.github.com/users/piyuple/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/piyuple",
                "id": 11230167,
                "login": "piyuple",
                "node_id": "MDQ6VXNlcjExMjMwMTY3",
                "organizations_url": "https://api.github.com/users/piyuple/orgs",
                "received_events_url": "https://api.github.com/users/piyuple/received_events",
                "repos_url": "https://api.github.com/users/piyuple/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/piyuple/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/piyuple/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/piyuple",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Not for me. Make sure you clean up properly (`make distclean` and uninstall the runtime files) when switching versions.",
            "created_at": "2025-06-08T14:26:54Z",
            "html_url": "https://github.com/neovim/neovim/issues/34376#issuecomment-2954107796",
            "id": 2954107796,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34376",
            "node_id": "IC_kwDOAPphoM6wFBuU",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2954107796/reactions"
            },
            "updated_at": "2025-06-08T14:26:54Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2954107796",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "> Not for me. Make sure you clean up properly (`make distclean` and uninstall the runtime files) when switching versions.\n\n@clason What was the version of `luarocks `in your build for v0.11.2?",
            "created_at": "2025-06-08T14:54:16Z",
            "html_url": "https://github.com/neovim/neovim/issues/34376#issuecomment-2954120943",
            "id": 2954120943,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34376",
            "node_id": "IC_kwDOAPphoM6wFE7v",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2954120943/reactions"
            },
            "updated_at": "2025-06-08T14:54:16Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2954120943",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11230167?v=4",
                "events_url": "https://api.github.com/users/piyuple/events{/privacy}",
                "followers_url": "https://api.github.com/users/piyuple/followers",
                "following_url": "https://api.github.com/users/piyuple/following{/other_user}",
                "gists_url": "https://api.github.com/users/piyuple/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/piyuple",
                "id": 11230167,
                "login": "piyuple",
                "node_id": "MDQ6VXNlcjExMjMwMTY3",
                "organizations_url": "https://api.github.com/users/piyuple/orgs",
                "received_events_url": "https://api.github.com/users/piyuple/received_events",
                "repos_url": "https://api.github.com/users/piyuple/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/piyuple/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/piyuple/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/piyuple",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "There is no version of `luarocks`, that's my whole point.",
            "created_at": "2025-06-08T14:55:00Z",
            "html_url": "https://github.com/neovim/neovim/issues/34376#issuecomment-2954121286",
            "id": 2954121286,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34376",
            "node_id": "IC_kwDOAPphoM6wFFBG",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2954121286/reactions"
            },
            "updated_at": "2025-06-08T14:55:00Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2954121286",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "@clason Got it. Thank you.",
            "created_at": "2025-06-08T18:28:39Z",
            "html_url": "https://github.com/neovim/neovim/issues/34376#issuecomment-2954214591",
            "id": 2954214591,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34376",
            "node_id": "IC_kwDOAPphoM6wFby_",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2954214591/reactions"
            },
            "updated_at": "2025-06-08T18:28:39Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2954214591",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11230167?v=4",
                "events_url": "https://api.github.com/users/piyuple/events{/privacy}",
                "followers_url": "https://api.github.com/users/piyuple/followers",
                "following_url": "https://api.github.com/users/piyuple/following{/other_user}",
                "gists_url": "https://api.github.com/users/piyuple/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/piyuple",
                "id": 11230167,
                "login": "piyuple",
                "node_id": "MDQ6VXNlcjExMjMwMTY3",
                "organizations_url": "https://api.github.com/users/piyuple/orgs",
                "received_events_url": "https://api.github.com/users/piyuple/received_events",
                "repos_url": "https://api.github.com/users/piyuple/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/piyuple/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/piyuple/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/piyuple",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 6,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/34376/comments",
    "created_at": "2025-06-08T14:13:23Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/34376/events",
    "html_url": "https://github.com/neovim/neovim/issues/34376",
    "id": 3128387763,
    "labels": [],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/34376/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM66d2iz",
    "number": 34376,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/34376/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "not_planned",
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/34376/timeline",
    "title": "build: bump bundled LuaRocks to v3.12.0 to avoid manifest‐size overflow in LuaJIT",
    "type": {
        "color": "red",
        "created_at": "2024-01-25T10:10:19Z",
        "description": "An unexpected problem or behavior",
        "id": 597163,
        "is_enabled": true,
        "name": "Bug",
        "node_id": "IT_kwDOAGK_Pc4ACRyr",
        "updated_at": "2024-07-26T10:12:30Z"
    },
    "updated_at": "2025-06-08T18:28:41Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/34376",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/11230167?v=4",
        "events_url": "https://api.github.com/users/piyuple/events{/privacy}",
        "followers_url": "https://api.github.com/users/piyuple/followers",
        "following_url": "https://api.github.com/users/piyuple/following{/other_user}",
        "gists_url": "https://api.github.com/users/piyuple/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/piyuple",
        "id": 11230167,
        "login": "piyuple",
        "node_id": "MDQ6VXNlcjExMjMwMTY3",
        "organizations_url": "https://api.github.com/users/piyuple/orgs",
        "received_events_url": "https://api.github.com/users/piyuple/received_events",
        "repos_url": "https://api.github.com/users/piyuple/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/piyuple/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/piyuple/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/piyuple",
        "user_view_type": "public"
    }
}