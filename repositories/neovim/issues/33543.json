{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\n\nWith the Neovim 0.11 release `checkhealth` has been changed to use the `vimdoc` parser. \n\nCurrently, the words `OK`, `WARNING`, `ERROR` are not highlighted at all like they used to in Neovim 0.10.4. I added a custom `highlights.scm` in my personal configuration with following changes\n```lua\n;; extends\n\n((word) @comment.warning\n  (#any-of? @comment.warning \"Warning\" \"WARNING\"))\n\n((word) @comment.note\n  (#any-of? @comment.note \"Ok\" \"OK\"))\n\n((word) @comment.error\n  (#any-of? @comment.error \"Error\" \"ERROR\" \"Deprecated\" \"DEPRECATED\"))\n```\nI removed the semicolon from this code block https://github.com/neovim/neovim/blob/c7d8812ca785864bdbdeac72efcd611bfb6e506c/runtime/queries/vimdoc/highlights.scm#L67-L74 and changed `note` into `word` after doing `:InspectTree` and saw that the words in `checkhealth` were recognized as `word` instead of `note`. Also added `Error`, `ERROR` along with `Deprecated`. \n\nNot sure if the `note` is still needed for some other concept of `vimdoc` parser maybe.\n\nI started creating a PR since it seemed a rather simple change but I saw that test coverage is also required and unfortunately I'm not familiar at all with this part of the process, so instead preferred to create this feature request and detail elaborate steps of my observations to the best of my ability. Sorry for any inconvenience.\n\n### Expected behavior\n\nWords `OK`, `WARNING`, `ERROR` should be highlighted in `checkhealth` like they used to in Neovim 0.10.4",
    "closed_at": "2025-04-19T16:54:10Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
        "events_url": "https://api.github.com/users/clason/events{/privacy}",
        "followers_url": "https://api.github.com/users/clason/followers",
        "following_url": "https://api.github.com/users/clason/following{/other_user}",
        "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/clason",
        "id": 2361214,
        "login": "clason",
        "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
        "organizations_url": "https://api.github.com/users/clason/orgs",
        "received_events_url": "https://api.github.com/users/clason/received_events",
        "repos_url": "https://api.github.com/users/clason/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/clason",
        "user_view_type": "public"
    },
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "This is not an issue with Neovim but with your config or a plugin doing a blanket `pcall(vim.treesitter.start)`, which now triggers. Either be more targeted in starting it, or add `syntax on` in a `checkhealth` filetype plugin to correct for it.",
            "created_at": "2025-04-19T16:54:10Z",
            "html_url": "https://github.com/neovim/neovim/issues/33543#issuecomment-2816781394",
            "id": 2816781394,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33543",
            "node_id": "IC_kwDOAPphoM6n5KxS",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2816781394/reactions"
            },
            "updated_at": "2025-04-19T16:54:10Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2816781394",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Adding a custom highlight query is a reasonable idea but won't work until we have the capability of setting buffer-local queries.",
            "created_at": "2025-04-19T16:55:16Z",
            "html_url": "https://github.com/neovim/neovim/issues/33543#issuecomment-2816781758",
            "id": 2816781758,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33543",
            "node_id": "IC_kwDOAPphoM6n5K2-",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2816781758/reactions"
            },
            "updated_at": "2025-04-19T16:55:16Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2816781758",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "Hi @clason, I'm sorry but could you look into this again? What I'm talking about happens with the following minimal repro\n```lua\nvim.env.LAZY_STDPATH = \".repro\"\nload(vim.fn.system(\"curl -s https://raw.githubusercontent.com/folke/lazy.nvim/main/bootstrap.lua\"))()\n\nrequire(\"lazy.minit\").repro({\n\tspec = {\n\t\t{\n\t\t\t\"nvim-treesitter/nvim-treesitter\",\n\t\t\topts = {\n\t\t\t\tensure_installed = { \"lua\", \"vimdoc\" },\n\t\t\t\thighlight = { enable = true },\n\t\t\t},\n\t\t\tconfig = function(_, opts)\n\t\t\t\trequire(\"nvim-treesitter.configs\").setup(opts)\n\t\t\tend,\n\t\t},\n\t},\n})\n```\nI believe this happens because of the change [here](https://github.com/neovim/neovim/blame/c7d8812ca785864bdbdeac72efcd611bfb6e506c/runtime/ftplugin/help.lua#L72) but I might be wrong about it. The thing is that when I do `:=vim.treesitter.language.get_lang(\"checkhealth\")` in Neovim 0.11 I get `vimdoc` as result, whereas in Neovim 0.10.4 I used to get `nil` since no parser was assigned to it.\n\nIn the above minimal repro if you disable `nvim-treesitter` highlighting or don't install the `vimdoc` parser then you get the old syntax. \n\nWhat I requested is that the current `vimdoc` highlight queries take into account the words that I mentioned in my OP.",
            "created_at": "2025-04-19T20:05:46Z",
            "html_url": "https://github.com/neovim/neovim/issues/33543#issuecomment-2816848832",
            "id": 2816848832,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33543",
            "node_id": "IC_kwDOAPphoM6n5bPA",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2816848832/reactions"
            },
            "updated_at": "2025-04-19T20:08:15Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2816848832",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/12776461?v=4",
                "events_url": "https://api.github.com/users/dpetka2001/events{/privacy}",
                "followers_url": "https://api.github.com/users/dpetka2001/followers",
                "following_url": "https://api.github.com/users/dpetka2001/following{/other_user}",
                "gists_url": "https://api.github.com/users/dpetka2001/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/dpetka2001",
                "id": 12776461,
                "login": "dpetka2001",
                "node_id": "MDQ6VXNlcjEyNzc2NDYx",
                "organizations_url": "https://api.github.com/users/dpetka2001/orgs",
                "received_events_url": "https://api.github.com/users/dpetka2001/received_events",
                "repos_url": "https://api.github.com/users/dpetka2001/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/dpetka2001/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/dpetka2001/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/dpetka2001",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "That is not minimal. The issue is with nvim-treesitter using said unrestricted pcall, which will be removed in its 1.0. The issue is _not_ with Neovim. \n\nAnd highlighting these words in help files does not make sense, so should not be part of the Vimdoc queries. ",
            "created_at": "2025-04-19T20:08:46Z",
            "html_url": "https://github.com/neovim/neovim/issues/33543#issuecomment-2816849709",
            "id": 2816849709,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33543",
            "node_id": "IC_kwDOAPphoM6n5bct",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2816849709/reactions"
            },
            "updated_at": "2025-04-19T20:10:30Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2816849709",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "Ok I see. The custom highlights will have to do for now then in my personal configuration until maybe the problem is resolved in `nvim-treesitter` side then. I also tried your suggestion about Filetype checkhealth and `syntax on` and that also worked.\n\nThank you for your time and patience for explaining things.",
            "created_at": "2025-04-19T20:17:00Z",
            "html_url": "https://github.com/neovim/neovim/issues/33543#issuecomment-2816852105",
            "id": 2816852105,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33543",
            "node_id": "IC_kwDOAPphoM6n5cCJ",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2816852105/reactions"
            },
            "updated_at": "2025-04-19T20:17:00Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2816852105",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/12776461?v=4",
                "events_url": "https://api.github.com/users/dpetka2001/events{/privacy}",
                "followers_url": "https://api.github.com/users/dpetka2001/followers",
                "following_url": "https://api.github.com/users/dpetka2001/following{/other_user}",
                "gists_url": "https://api.github.com/users/dpetka2001/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/dpetka2001",
                "id": 12776461,
                "login": "dpetka2001",
                "node_id": "MDQ6VXNlcjEyNzc2NDYx",
                "organizations_url": "https://api.github.com/users/dpetka2001/orgs",
                "received_events_url": "https://api.github.com/users/dpetka2001/received_events",
                "repos_url": "https://api.github.com/users/dpetka2001/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/dpetka2001/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/dpetka2001/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/dpetka2001",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 5,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/33543/comments",
    "created_at": "2025-04-19T16:51:51Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/33543/events",
    "html_url": "https://github.com/neovim/neovim/issues/33543",
    "id": 3006543440,
    "labels": [],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/33543/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM6zNDZQ",
    "number": 33543,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 1,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 1,
        "url": "https://api.github.com/repos/neovim/neovim/issues/33543/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "completed",
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/33543/timeline",
    "title": "Correct highlights for `OK`, `Warning` in `checkhealth`",
    "type": {
        "color": "blue",
        "created_at": "2024-01-25T10:10:19Z",
        "description": "A request, idea, or new functionality",
        "id": 597167,
        "is_enabled": true,
        "name": "Enhancement",
        "node_id": "IT_kwDOAGK_Pc4ACRyv",
        "updated_at": "2024-07-26T10:12:30Z"
    },
    "updated_at": "2025-04-19T20:17:01Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/33543",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/12776461?v=4",
        "events_url": "https://api.github.com/users/dpetka2001/events{/privacy}",
        "followers_url": "https://api.github.com/users/dpetka2001/followers",
        "following_url": "https://api.github.com/users/dpetka2001/following{/other_user}",
        "gists_url": "https://api.github.com/users/dpetka2001/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/dpetka2001",
        "id": 12776461,
        "login": "dpetka2001",
        "node_id": "MDQ6VXNlcjEyNzc2NDYx",
        "organizations_url": "https://api.github.com/users/dpetka2001/orgs",
        "received_events_url": "https://api.github.com/users/dpetka2001/received_events",
        "repos_url": "https://api.github.com/users/dpetka2001/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/dpetka2001/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/dpetka2001/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/dpetka2001",
        "user_view_type": "public"
    }
}