{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\n\nIn virtual text, \"\\n\" gets converted to `^@` and \"\\r\" gets converted to `^M`. For instance, in a buffer with the following content:\n\n```\n1| this is a test\n```\n\nExecuting `:lua vim.api.nvim_buf_set_extmark(0, vim.api.nvim_create_namespace(\"Test\"), 0, 10, { virt_text = { { \"foo\\nbar\\r\", \"Normal\" } }, virt_text_pos = \"inline\" })` results in:\n\n```\n1| this is a foo^@bar^Mtest\n```\n\n### Expected behavior\n\nI expect that one (or both) of those escape characters translates into breaking the line, such that the output would be:\n\n```\n1| this is a foo\n | bar^Mtest\n```\n\nor \n\n```\n1| this is a foo^@bar\n | test\n```\n\nor \n\n```\n1| this is a foo\n | bar\n | test\n```\n\nThe desire for this comes from the concept of a plugin that will emulate wrapping with virtual newlines, allowing for a configured wrap width (see #4386) .\n\nA similar thing is done with [this amazing plugin](https://github.com/rickhowe/wrapwidth), which adds an appropriate amount of virtual _spaces_ to reach the edge of the window, and having (neo)vim handle the actual wrapping with `vim.o.wrap  = true`. However, since `vim.o.wrap` must be enabled, if the window width is smaller than the configured wrap width, all lines would wrap at the window width.\n\nIf the user wants to wrap at the configured wrap width regardless of the window width (see https://github.com/neovim/neovim/issues/4386#issuecomment-225429327), then the aforementioned plugin would not work. However, using virtual newlines with `vim.o.wrap = false` would allow for this behavior.",
    "closed_at": "2025-09-24T01:48:10Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
        "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
        "followers_url": "https://api.github.com/users/justinmk/followers",
        "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
        "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/justinmk",
        "id": 1359421,
        "login": "justinmk",
        "node_id": "MDQ6VXNlcjEzNTk0MjE=",
        "organizations_url": "https://api.github.com/users/justinmk/orgs",
        "received_events_url": "https://api.github.com/users/justinmk/received_events",
        "repos_url": "https://api.github.com/users/justinmk/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/justinmk",
        "user_view_type": "public"
    },
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "In https://github.com/neovim/neovim/issues/31116 someone requested the ability to focus the cursor in virtual text.\n\nIf virtual text doesn't have constraints then it becomes a buffer-inside-a-buffer, and at that point it should just be a floating window. Rather than continuing to incrementally add \"just one more feature\" to virtual text, perhaps instead we need more advanced ways to:\n\n1. cause text to \"flow around\" a floatwin\n2. \"repulse\" adjacent windows near a floatwin\n\n> A similar thing is done with [this amazing plugin](https://github.com/rickhowe/wrapwidth), which adds an appropriate amount of virtual _spaces_\n\nHave you tried plugins like https://github.com/folke/zen-mode.nvim or https://github.com/junegunn/goyo.vim\n\n> The desire for this comes from the concept of a plugin that will emulate wrapping with virtual newlines, allowing for a configured wrap width #4386\n\nThat's already tracked in that issue...\n",
            "created_at": "2025-09-24T01:48:10Z",
            "html_url": "https://github.com/neovim/neovim/issues/35897#issuecomment-3326155394",
            "id": 3326155394,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/35897",
            "node_id": "IC_kwDOAPphoM7GQRqC",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3326155394/reactions"
            },
            "updated_at": "2025-09-24T01:48:10Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3326155394",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 1,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/35897/comments",
    "created_at": "2025-09-24T00:44:58Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/35897/events",
    "html_url": "https://github.com/neovim/neovim/issues/35897",
    "id": 3447104009,
    "issue_dependencies_summary": {
        "blocked_by": 0,
        "blocking": 0,
        "total_blocked_by": 0,
        "total_blocking": 0
    },
    "labels": [
        {
            "color": "BFDADC",
            "default": false,
            "description": "High-risk, potential for delicate/cascading effects",
            "id": 407247013,
            "name": "complexity:high",
            "node_id": "MDU6TGFiZWw0MDcyNDcwMTM=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/complexity:high"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "marks, extmarks, decorations, virtual text",
            "id": 1680119719,
            "name": "marks",
            "node_id": "MDU6TGFiZWwxNjgwMTE5NzE5",
            "url": "https://api.github.com/repos/neovim/neovim/labels/marks"
        },
        {
            "color": "C5DEF5",
            "default": false,
            "description": "floating windows, popups, hover",
            "id": 3234818716,
            "name": "floatwin",
            "node_id": "MDU6TGFiZWwzMjM0ODE4NzE2",
            "url": "https://api.github.com/repos/neovim/neovim/labels/floatwin"
        },
        {
            "color": "C5DEF5",
            "default": false,
            "description": "viewport, scrolling, window",
            "id": 8375980619,
            "name": "window",
            "node_id": "LA_kwDOAPphoM8AAAAB8z9SSw",
            "url": "https://api.github.com/repos/neovim/neovim/labels/window"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/35897/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM7NdqIJ",
    "number": 35897,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/35897/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "duplicate",
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/35897/timeline",
    "title": "Allow newlines in virtual text",
    "type": {
        "color": "blue",
        "created_at": "2024-01-25T10:10:19Z",
        "description": "A request, idea, or new functionality",
        "id": 597167,
        "is_enabled": true,
        "name": "Enhancement",
        "node_id": "IT_kwDOAGK_Pc4ACRyv",
        "updated_at": "2024-07-26T10:12:30Z"
    },
    "updated_at": "2025-09-24T01:48:19Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/35897",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/85013922?v=4",
        "events_url": "https://api.github.com/users/austinliuigi/events{/privacy}",
        "followers_url": "https://api.github.com/users/austinliuigi/followers",
        "following_url": "https://api.github.com/users/austinliuigi/following{/other_user}",
        "gists_url": "https://api.github.com/users/austinliuigi/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/austinliuigi",
        "id": 85013922,
        "login": "austinliuigi",
        "node_id": "MDQ6VXNlcjg1MDEzOTIy",
        "organizations_url": "https://api.github.com/users/austinliuigi/orgs",
        "received_events_url": "https://api.github.com/users/austinliuigi/received_events",
        "repos_url": "https://api.github.com/users/austinliuigi/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/austinliuigi/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/austinliuigi/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/austinliuigi",
        "user_view_type": "public"
    }
}