{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Describe the bug\n\nThis screenshot seems to be the most valuable information I have.\r\n\r\n![Screenshot](https://i.redd.it/l7ld9ox8uyga1.png)\r\n\r\nI was not sure about what to do so I made [a Reddit post](https://www.reddit.com/r/neovim/comments/10wwkft/met_a_segfault_on_neovim_anyone_has_any_ideas/) before I decided to report it here. Some people have given some thoughts there.\r\n\r\nCrash report from `Console.app`\r\n\r\n```log\r\n-------------------------------------\r\nTranslated Report (Full Report Below)\r\n-------------------------------------\r\n\r\nProcess:               nvim [10402]\r\nPath:                  /opt/homebrew/*/nvim\r\nIdentifier:            nvim\r\nVersion:               ???\r\nCode Type:             ARM-64 (Native)\r\nParent Process:        fish [9764]\r\nResponsible:           alacritty [795]\r\nUser ID:               501\r\n\r\nDate/Time:             2023-02-07 18:25:11.3976 +0800\r\nOS Version:            macOS 12.6 (21G115)\r\nReport Version:        12\r\nAnonymous UUID:        084EC63E-4105-DEF1-67EC-007D6754BFBA\r\n\r\nSleep/Wake UUID:       341B68BD-0AA9-4463-8464-0585AA6D5C35\r\n\r\nTime Awake Since Boot: 1000000 seconds\r\nTime Since Wake:       1070 seconds\r\n\r\nSystem Integrity Protection: disabled\r\n\r\nCrashed Thread:        0  Dispatch queue: com.apple.main-thread\r\n\r\nException Type:        EXC_BAD_ACCESS (SIGSEGV)\r\nException Codes:       KERN_INVALID_ADDRESS at 0x0000000000000018\r\nException Codes:       0x0000000000000001, 0x0000000000000018\r\nException Note:        EXC_CORPSE_NOTIFY\r\n\r\nTermination Reason:    Namespace SIGNAL, Code 11 Segmentation fault: 11\r\nTerminating Process:   exc handler [10402]\r\n\r\nVM Region Info: 0x18 is not in any region.  Bytes before following region: 105553518919656\r\n      REGION TYPE                    START - END         [ VSIZE] PRT/MAX SHRMOD  REGION DETAIL\r\n      UNUSED SPACE AT START\r\n--->  \r\n      MALLOC_NANO (reserved)   600018000000-600020000000 [128.0M] rw-/rwx SM=NUL  ...(unallocated)\r\n\r\nKernel Triage:\r\nVM - pmap_enter failed with resource shortage\r\nVM - pmap_enter failed with resource shortage\r\n\r\n\r\nThread 0 Crashed::  Dispatch queue: com.apple.main-thread\r\n0   nvim                          \t       0x1031969b0 frame_new_height + 44\r\n1   nvim                          \t       0x103194090 winframe_remove + 596\r\n2   nvim                          \t       0x103194090 winframe_remove + 596\r\n3   nvim                          \t       0x103198bb8 win_free_mem + 128\r\n4   nvim                          \t       0x10319284c win_close + 1824\r\n5   nvim                          \t       0x102f853cc nvim_win_close + 332\r\n6   nvim                          \t       0x102f5b574 nlua_api_nvim_win_close + 380\r\n7   libluajit-5.1.2.1.0.dylib     \t       0x10367bed4 0x103678000 + 16084\r\n8   libluajit-5.1.2.1.0.dylib     \t       0x1036889fc lua_pcall + 148\r\n9   nvim                          \t       0x1030707a0 nlua_call_ref + 216\r\n10  nvim                          \t       0x102f8c004 getnextac + 1188\r\n11  nvim                          \t       0x103013878 do_cmdline + 2012\r\n12  nvim                          \t       0x102f8a988 apply_autocmds_group + 1812\r\n13  nvim                          \t       0x103198a50 do_autocmd_winclosed + 136\r\n14  nvim                          \t       0x103192304 win_close + 472\r\n15  nvim                          \t       0x102f8f264 do_buffer + 1444\r\n16  nvim                          \t       0x102f8ff60 do_bufdel + 212\r\n17  nvim                          \t       0x10301d21c ex_bunload + 64\r\n18  nvim                          \t       0x10301925c execute_cmd0 + 244\r\n19  nvim                          \t       0x103016084 do_cmdline + 12264\r\n20  nvim                          \t       0x1030b9e38 nv_colon + 416\r\n21  nvim                          \t       0x1030b7860 normal_execute + 4172\r\n22  nvim                          \t       0x10314ea74 state_enter + 360\r\n23  nvim                          \t       0x10307b6a4 main + 10716\r\n24  dyld                          \t       0x10344908c start + 520\r\n\r\nThread 1:\r\n0   libsystem_kernel.dylib        \t       0x19e414c20 kevent + 8\r\n1   libuv.1.dylib                 \t       0x103541e04 uv__io_poll + 760\r\n2   libuv.1.dylib                 \t       0x1035327d0 uv_run + 252\r\n3   nvim                          \t       0x103004ddc loop_uv_run + 136\r\n4   nvim                          \t       0x1031726e8 tui_main + 708\r\n5   libsystem_pthread.dylib       \t       0x19e44c26c _pthread_start + 148\r\n6   libsystem_pthread.dylib       \t       0x19e44708c thread_start + 8\r\n\r\nThread 2:\r\n0   libsystem_kernel.dylib        \t       0x19e412270 __psynch_cvwait + 8\r\n1   libsystem_pthread.dylib       \t       0x19e44c83c _pthread_cond_wait + 1236\r\n2   libuv.1.dylib                 \t       0x10353d758 uv_cond_wait + 12\r\n3   libuv.1.dylib                 \t       0x10352f3c0 worker + 344\r\n4   libsystem_pthread.dylib       \t       0x19e44c26c _pthread_start + 148\r\n5   libsystem_pthread.dylib       \t       0x19e44708c thread_start + 8\r\n\r\nThread 3:\r\n0   libsystem_kernel.dylib        \t       0x19e412270 __psynch_cvwait + 8\r\n1   libsystem_pthread.dylib       \t       0x19e44c83c _pthread_cond_wait + 1236\r\n2   libuv.1.dylib                 \t       0x10353d758 uv_cond_wait + 12\r\n3   libuv.1.dylib                 \t       0x10352f3c0 worker + 344\r\n4   libsystem_pthread.dylib       \t       0x19e44c26c _pthread_start + 148\r\n5   libsystem_pthread.dylib       \t       0x19e44708c thread_start + 8\r\n\r\nThread 4:\r\n0   libsystem_kernel.dylib        \t       0x19e412270 __psynch_cvwait + 8\r\n1   libsystem_pthread.dylib       \t       0x19e44c83c _pthread_cond_wait + 1236\r\n2   libuv.1.dylib                 \t       0x10353d758 uv_cond_wait + 12\r\n3   libuv.1.dylib                 \t       0x10352f3c0 worker + 344\r\n4   libsystem_pthread.dylib       \t       0x19e44c26c _pthread_start + 148\r\n5   libsystem_pthread.dylib       \t       0x19e44708c thread_start + 8\r\n\r\nThread 5:\r\n0   libsystem_kernel.dylib        \t       0x19e412270 __psynch_cvwait + 8\r\n1   libsystem_pthread.dylib       \t       0x19e44c83c _pthread_cond_wait + 1236\r\n2   libuv.1.dylib                 \t       0x10353d758 uv_cond_wait + 12\r\n3   libuv.1.dylib                 \t       0x10352f3c0 worker + 344\r\n4   libsystem_pthread.dylib       \t       0x19e44c26c _pthread_start + 148\r\n5   libsystem_pthread.dylib       \t       0x19e44708c thread_start + 8\r\n\r\nThread 6:\r\n0   libsystem_pthread.dylib       \t       0x19e447078 start_wqthread + 0\r\n\r\n\r\nThread 0 crashed with ARM Thread State (64-bit):\r\n    x0: 0x000000012c967a00   x1: 0x000000006e69206f   x2: 0x0000000000000000   x3: 0x0000000000000000\r\n    x4: 0x00000000fffffffd   x5: 0x000000012c867000   x6: 0x0000000000000000   x7: 0x0000000000000000\r\n    x8: 0x0000000000000000   x9: 0x000000000000000a  x10: 0x0000000000000000  x11: 0x0000000000000000\r\n   x12: 0x0000000000000001  x13: 0x0000000000000000  x14: 0x0000000047600000  x15: 0x0000000000006be4\r\n   x16: 0x000000019e4630d0  x17: 0x00000000000008fd  x18: 0x0000000000000000  x19: 0x0000600001f55600\r\n   x20: 0x000000006e69206f  x21: 0x000000012c9ac400  x22: 0x000000016ceb8860  x23: 0x0000000103244a48\r\n   x24: 0x0000600001f55100  x25: 0x0000000000000000  x26: 0x0000600001f54e80  x27: 0x000000012c9aeb41\r\n   x28: 0x0000000103244a50   fp: 0x000000016ceb8790   lr: 0x0000000103194090\r\n    sp: 0x000000016ceb8750   pc: 0x00000001031969b0 cpsr: 0x20001000\r\n   far: 0x0000000000000018  esr: 0x92000006 (Data Abort) byte read Translation fault\r\n\r\nBinary Images:\r\n       0x102f44000 -        0x103217fff nvim (*) <8df66dbc-78fe-3f17-a934-78e56f9e75a4> /opt/homebrew/*/nvim\r\n       0x103678000 -        0x1036e7fff libluajit-5.1.2.1.0.dylib (*) <7752e7ee-61de-3529-8abf-05250860a287> /opt/homebrew/*/libluajit-5.1.2.1.0.dylib\r\n       0x103444000 -        0x1034a3fff dyld (*) <38ee9fe9-b66d-3066-8c5c-6ddf0d6944c6> /usr/lib/dyld\r\n       0x19e40d000 -        0x19e444fff libsystem_kernel.dylib (*) <a9d87740-9c1d-3468-bf60-720a8d713cba> /usr/lib/system/libsystem_kernel.dylib\r\n       0x10352c000 -        0x103547fff libuv.1.dylib (*) <870e1cf7-0a62-382a-b74b-c1e970aa3db2> /opt/homebrew/*/libuv.1.dylib\r\n       0x19e445000 -        0x19e451fff libsystem_pthread.dylib (*) <63c4eef9-69a5-38b1-996e-8d31b66a051d> /usr/lib/system/libsystem_pthread.dylib\r\n               0x0 - 0xffffffffffffffff ??? (*) <00000000-0000-0000-0000-000000000000> ???\r\n\r\nExternal Modification Summary:\r\n  Calls made by other processes targeting this process:\r\n    task_for_pid: 0\r\n    thread_create: 0\r\n    thread_set_state: 0\r\n  Calls made by this process:\r\n    task_for_pid: 0\r\n    thread_create: 0\r\n    thread_set_state: 0\r\n  Calls made by all processes on this machine:\r\n    task_for_pid: 20\r\n    thread_create: 3\r\n    thread_set_state: 333\r\n\r\nVM Region Summary:\r\nReadOnly portion of Libraries: Total=742.0M resident=0K(0%) swapped_out_or_unallocated=742.0M(100%)\r\nWritable regions: Total=1.7G written=0K(0%) resident=0K(0%) swapped_out=0K(0%) unallocated=1.7G(100%)\r\n\r\n                                VIRTUAL   REGION \r\nREGION TYPE                        SIZE    COUNT (non-coalesced) \r\n===========                     =======  ======= \r\nActivity Tracing                   256K        1 \r\nKernel Alloc Once                   32K        1 \r\nMALLOC                           267.2M       36 \r\nMALLOC guard page                   96K        4 \r\nMALLOC_MEDIUM (reserved)         960.0M        8         reserved VM address space (unallocated)\r\nMALLOC_NANO (reserved)           384.0M        1         reserved VM address space (unallocated)\r\nSTACK GUARD                       56.1M        7 \r\nStack                             48.6M        7 \r\nVM_ALLOCATE                       55.2M      442 \r\n__AUTH                            1586K      104 \r\n__AUTH_CONST                      7051K      227 \r\n__DATA                            7361K      226 \r\n__DATA_CONST                      7935K      243 \r\n__DATA_DIRTY                       328K       81 \r\n__FONT_DATA                          4K        1 \r\n__LINKEDIT                       578.5M       20 \r\n__OBJC_CONST                       713K       81 \r\n__OBJC_RO                         83.0M        1 \r\n__OBJC_RW                         3168K        1 \r\n__TEXT                           163.5M      255 \r\n__UNICODE                          592K        1 \r\ndyld private memory               1024K        1 \r\nmapped file                       29.1M        3 \r\nshared memory                       64K        4 \r\n===========                     =======  ======= \r\nTOTAL                              2.6G     1756 \r\nTOTAL, minus reserved VM space     1.3G     1756 \r\n\r\n\r\n\r\n-----------\r\nFull Report\r\n-----------\r\n\r\n{\"app_name\":\"nvim\",\"timestamp\":\"2023-02-07 18:25:12.00 +0800\",\"app_version\":\"\",\"slice_uuid\":\"8df66dbc-78fe-3f17-a934-78e56f9e75a4\",\"build_version\":\"\",\"platform\":1,\"share_with_app_devs\":0,\"is_first_party\":1,\"bug_type\":\"309\",\"os_version\":\"macOS 12.6 (21G115)\",\"incident_id\":\"F261A133-E7F3-430E-AAF1-52A2B35A64E6\",\"name\":\"nvim\"}\r\n{\r\n  \"uptime\" : 1000000,\r\n  \"procLaunch\" : \"2023-02-07 14:28:10.8342 +0800\",\r\n  \"procRole\" : \"Unspecified\",\r\n  \"version\" : 2,\r\n  \"userID\" : 501,\r\n  \"deployVersion\" : 210,\r\n  \"modelCode\" : \"MacBookPro17,1\",\r\n  \"procStartAbsTime\" : 23866535296046,\r\n  \"coalitionID\" : 826,\r\n  \"osVersion\" : {\r\n    \"train\" : \"macOS 12.6\",\r\n    \"build\" : \"21G115\",\r\n    \"releaseType\" : \"User\"\r\n  },\r\n  \"captureTime\" : \"2023-02-07 18:25:11.3976 +0800\",\r\n  \"incident\" : \"F261A133-E7F3-430E-AAF1-52A2B35A64E6\",\r\n  \"bug_type\" : \"309\",\r\n  \"pid\" : 10402,\r\n  \"procExitAbsTime\" : 24199274728993,\r\n  \"translated\" : false,\r\n  \"cpuType\" : \"ARM-64\",\r\n  \"procName\" : \"nvim\",\r\n  \"procPath\" : \"\\/opt\\/homebrew\\/*\\/nvim\",\r\n  \"parentProc\" : \"fish\",\r\n  \"parentPid\" : 9764,\r\n  \"coalitionName\" : \"org.alacritty\",\r\n  \"crashReporterKey\" : \"084EC63E-4105-DEF1-67EC-007D6754BFBA\",\r\n  \"responsiblePid\" : 795,\r\n  \"responsibleProc\" : \"alacritty\",\r\n  \"wakeTime\" : 1070,\r\n  \"sleepWakeUUID\" : \"341B68BD-0AA9-4463-8464-0585AA6D5C35\",\r\n  \"sip\" : \"disabled\",\r\n  \"vmRegionInfo\" : \"0x18 is not in any region.  Bytes before following region: 105553518919656\\n      REGION TYPE                    START - END         [ VSIZE] PRT\\/MAX SHRMOD  REGION DETAIL\\n      UNUSED SPACE AT START\\n--->  \\n      MALLOC_NANO (reserved)   600018000000-600020000000 [128.0M] rw-\\/rwx SM=NUL  ...(unallocated)\",\r\n  \"isCorpse\" : 1,\r\n  \"exception\" : {\"codes\":\"0x0000000000000001, 0x0000000000000018\",\"rawCodes\":[1,24],\"type\":\"EXC_BAD_ACCESS\",\"signal\":\"SIGSEGV\",\"subtype\":\"KERN_INVALID_ADDRESS at 0x0000000000000018\"},\r\n  \"termination\" : {\"flags\":0,\"code\":11,\"namespace\":\"SIGNAL\",\"indicator\":\"Segmentation fault: 11\",\"byProc\":\"exc handler\",\"byPid\":10402},\r\n  \"ktriageinfo\" : \"VM - pmap_enter failed with resource shortage\\nVM - pmap_enter failed with resource shortage\\n\",\r\n  \"vmregioninfo\" : \"0x18 is not in any region.  Bytes before following region: 105553518919656\\n      REGION TYPE                    START - END         [ VSIZE] PRT\\/MAX SHRMOD  REGION DETAIL\\n      UNUSED SPACE AT START\\n--->  \\n      MALLOC_NANO (reserved)   600018000000-600020000000 [128.0M] rw-\\/rwx SM=NUL  ...(unallocated)\",\r\n  \"extMods\" : {\"caller\":{\"thread_create\":0,\"thread_set_state\":0,\"task_for_pid\":0},\"system\":{\"thread_create\":3,\"thread_set_state\":333,\"task_for_pid\":20},\"targeted\":{\"thread_create\":0,\"thread_set_state\":0,\"task_for_pid\":0},\"warnings\":0},\r\n  \"faultingThread\" : 0,\r\n  \"threads\" : [{\"triggered\":true,\"id\":11220071,\"threadState\":{\"x\":[{\"value\":5043026432},{\"value\":1852383343},{\"value\":0},{\"value\":0},{\"value\":4294967293},{\"value\":5041975296},{\"value\":0},{\"value\":0},{\"value\":0},{\"value\":10},{\"value\":0},{\"value\":0},{\"value\":1},{\"value\":0},{\"value\":1197473792},{\"value\":27620},{\"value\":6950367440,\"symbolLocation\":0,\"symbol\":\"_platform_memmove\"},{\"value\":2301},{\"value\":0},{\"value\":105553149122048},{\"value\":1852383343},{\"value\":5043307520},{\"value\":6122342496},{\"value\":4347677256,\"symbolLocation\":0,\"symbol\":\"prevwin\"},{\"value\":105553149120768},{\"value\":0},{\"value\":105553149120128},{\"value\":5043317569},{\"value\":4347677264,\"symbolLocation\":0,\"symbol\":\"curwin\"}],\"flavor\":\"ARM_THREAD_STATE64\",\"lr\":{\"value\":4346953872},\"cpsr\":{\"value\":536875008},\"fp\":{\"value\":6122342288},\"sp\":{\"value\":6122342224},\"esr\":{\"value\":2449473542,\"description\":\"(Data Abort) byte read Translation fault\"},\"pc\":{\"value\":4346964400,\"matchesCrashFrame\":1},\"far\":{\"value\":24}},\"queue\":\"com.apple.main-thread\",\"frames\":[{\"imageOffset\":2435504,\"symbol\":\"frame_new_height\",\"symbolLocation\":44,\"imageIndex\":0},{\"imageOffset\":2424976,\"symbol\":\"winframe_remove\",\"symbolLocation\":596,\"imageIndex\":0},{\"imageOffset\":2424976,\"symbol\":\"winframe_remove\",\"symbolLocation\":596,\"imageIndex\":0},{\"imageOffset\":2444216,\"symbol\":\"win_free_mem\",\"symbolLocation\":128,\"imageIndex\":0},{\"imageOffset\":2418764,\"symbol\":\"win_close\",\"symbolLocation\":1824,\"imageIndex\":0},{\"imageOffset\":267212,\"symbol\":\"nvim_win_close\",\"symbolLocation\":332,\"imageIndex\":0},{\"imageOffset\":95604,\"symbol\":\"nlua_api_nvim_win_close\",\"symbolLocation\":380,\"imageIndex\":0},{\"imageOffset\":16084,\"imageIndex\":1},{\"imageOffset\":68092,\"symbol\":\"lua_pcall\",\"symbolLocation\":148,\"imageIndex\":1},{\"imageOffset\":1230752,\"symbol\":\"nlua_call_ref\",\"symbolLocation\":216,\"imageIndex\":0},{\"imageOffset\":294916,\"symbol\":\"getnextac\",\"symbolLocation\":1188,\"imageIndex\":0},{\"imageOffset\":850040,\"symbol\":\"do_cmdline\",\"symbolLocation\":2012,\"imageIndex\":0},{\"imageOffset\":289160,\"symbol\":\"apply_autocmds_group\",\"symbolLocation\":1812,\"imageIndex\":0},{\"imageOffset\":2443856,\"symbol\":\"do_autocmd_winclosed\",\"symbolLocation\":136,\"imageIndex\":0},{\"imageOffset\":2417412,\"symbol\":\"win_close\",\"symbolLocation\":472,\"imageIndex\":0},{\"imageOffset\":307812,\"symbol\":\"do_buffer\",\"symbolLocation\":1444,\"imageIndex\":0},{\"imageOffset\":311136,\"symbol\":\"do_bufdel\",\"symbolLocation\":212,\"imageIndex\":0},{\"imageOffset\":889372,\"symbol\":\"ex_bunload\",\"symbolLocation\":64,\"imageIndex\":0},{\"imageOffset\":873052,\"symbol\":\"execute_cmd0\",\"symbolLocation\":244,\"imageIndex\":0},{\"imageOffset\":860292,\"symbol\":\"do_cmdline\",\"symbolLocation\":12264,\"imageIndex\":0},{\"imageOffset\":1531448,\"symbol\":\"nv_colon\",\"symbolLocation\":416,\"imageIndex\":0},{\"imageOffset\":1521760,\"symbol\":\"normal_execute\",\"symbolLocation\":4172,\"imageIndex\":0},{\"imageOffset\":2140788,\"symbol\":\"state_enter\",\"symbolLocation\":360,\"imageIndex\":0},{\"imageOffset\":1275556,\"symbol\":\"main\",\"symbolLocation\":10716,\"imageIndex\":0},{\"imageOffset\":20620,\"symbol\":\"start\",\"symbolLocation\":520,\"imageIndex\":2}]},{\"id\":11220075,\"frames\":[{\"imageOffset\":31776,\"symbol\":\"kevent\",\"symbolLocation\":8,\"imageIndex\":3},{\"imageOffset\":89604,\"symbol\":\"uv__io_poll\",\"symbolLocation\":760,\"imageIndex\":4},{\"imageOffset\":26576,\"symbol\":\"uv_run\",\"symbolLocation\":252,\"imageIndex\":4},{\"imageOffset\":789980,\"symbol\":\"loop_uv_run\",\"symbolLocation\":136,\"imageIndex\":0},{\"imageOffset\":2287336,\"symbol\":\"tui_main\",\"symbolLocation\":708,\"imageIndex\":0},{\"imageOffset\":29292,\"symbol\":\"_pthread_start\",\"symbolLocation\":148,\"imageIndex\":5},{\"imageOffset\":8332,\"symbol\":\"thread_start\",\"symbolLocation\":8,\"imageIndex\":5}]},{\"id\":11220282,\"frames\":[{\"imageOffset\":21104,\"symbol\":\"__psynch_cvwait\",\"symbolLocation\":8,\"imageIndex\":3},{\"imageOffset\":30780,\"symbol\":\"_pthread_cond_wait\",\"symbolLocation\":1236,\"imageIndex\":5},{\"imageOffset\":71512,\"symbol\":\"uv_cond_wait\",\"symbolLocation\":12,\"imageIndex\":4},{\"imageOffset\":13248,\"symbol\":\"worker\",\"symbolLocation\":344,\"imageIndex\":4},{\"imageOffset\":29292,\"symbol\":\"_pthread_start\",\"symbolLocation\":148,\"imageIndex\":5},{\"imageOffset\":8332,\"symbol\":\"thread_start\",\"symbolLocation\":8,\"imageIndex\":5}]},{\"id\":11220283,\"frames\":[{\"imageOffset\":21104,\"symbol\":\"__psynch_cvwait\",\"symbolLocation\":8,\"imageIndex\":3},{\"imageOffset\":30780,\"symbol\":\"_pthread_cond_wait\",\"symbolLocation\":1236,\"imageIndex\":5},{\"imageOffset\":71512,\"symbol\":\"uv_cond_wait\",\"symbolLocation\":12,\"imageIndex\":4},{\"imageOffset\":13248,\"symbol\":\"worker\",\"symbolLocation\":344,\"imageIndex\":4},{\"imageOffset\":29292,\"symbol\":\"_pthread_start\",\"symbolLocation\":148,\"imageIndex\":5},{\"imageOffset\":8332,\"symbol\":\"thread_start\",\"symbolLocation\":8,\"imageIndex\":5}]},{\"id\":11220284,\"frames\":[{\"imageOffset\":21104,\"symbol\":\"__psynch_cvwait\",\"symbolLocation\":8,\"imageIndex\":3},{\"imageOffset\":30780,\"symbol\":\"_pthread_cond_wait\",\"symbolLocation\":1236,\"imageIndex\":5},{\"imageOffset\":71512,\"symbol\":\"uv_cond_wait\",\"symbolLocation\":12,\"imageIndex\":4},{\"imageOffset\":13248,\"symbol\":\"worker\",\"symbolLocation\":344,\"imageIndex\":4},{\"imageOffset\":29292,\"symbol\":\"_pthread_start\",\"symbolLocation\":148,\"imageIndex\":5},{\"imageOffset\":8332,\"symbol\":\"thread_start\",\"symbolLocation\":8,\"imageIndex\":5}]},{\"id\":11220285,\"frames\":[{\"imageOffset\":21104,\"symbol\":\"__psynch_cvwait\",\"symbolLocation\":8,\"imageIndex\":3},{\"imageOffset\":30780,\"symbol\":\"_pthread_cond_wait\",\"symbolLocation\":1236,\"imageIndex\":5},{\"imageOffset\":71512,\"symbol\":\"uv_cond_wait\",\"symbolLocation\":12,\"imageIndex\":4},{\"imageOffset\":13248,\"symbol\":\"worker\",\"symbolLocation\":344,\"imageIndex\":4},{\"imageOffset\":29292,\"symbol\":\"_pthread_start\",\"symbolLocation\":148,\"imageIndex\":5},{\"imageOffset\":8332,\"symbol\":\"thread_start\",\"symbolLocation\":8,\"imageIndex\":5}]},{\"id\":11328277,\"frames\":[{\"imageOffset\":8312,\"symbol\":\"start_wqthread\",\"symbolLocation\":0,\"imageIndex\":5}]}],\r\n  \"usedImages\" : [\r\n  {\r\n    \"source\" : \"P\",\r\n    \"arch\" : \"arm64\",\r\n    \"base\" : 4344528896,\r\n    \"size\" : 2965504,\r\n    \"uuid\" : \"8df66dbc-78fe-3f17-a934-78e56f9e75a4\",\r\n    \"path\" : \"\\/opt\\/homebrew\\/*\\/nvim\",\r\n    \"name\" : \"nvim\"\r\n  },\r\n  {\r\n    \"source\" : \"P\",\r\n    \"arch\" : \"arm64\",\r\n    \"base\" : 4352081920,\r\n    \"size\" : 458752,\r\n    \"uuid\" : \"7752e7ee-61de-3529-8abf-05250860a287\",\r\n    \"path\" : \"\\/opt\\/homebrew\\/*\\/libluajit-5.1.2.1.0.dylib\",\r\n    \"name\" : \"libluajit-5.1.2.1.0.dylib\"\r\n  },\r\n  {\r\n    \"source\" : \"P\",\r\n    \"arch\" : \"arm64e\",\r\n    \"base\" : 4349771776,\r\n    \"size\" : 393216,\r\n    \"uuid\" : \"38ee9fe9-b66d-3066-8c5c-6ddf0d6944c6\",\r\n    \"path\" : \"\\/usr\\/lib\\/dyld\",\r\n    \"name\" : \"dyld\"\r\n  },\r\n  {\r\n    \"source\" : \"P\",\r\n    \"arch\" : \"arm64e\",\r\n    \"base\" : 6950014976,\r\n    \"size\" : 229376,\r\n    \"uuid\" : \"a9d87740-9c1d-3468-bf60-720a8d713cba\",\r\n    \"path\" : \"\\/usr\\/lib\\/system\\/libsystem_kernel.dylib\",\r\n    \"name\" : \"libsystem_kernel.dylib\"\r\n  },\r\n  {\r\n    \"source\" : \"P\",\r\n    \"arch\" : \"arm64\",\r\n    \"base\" : 4350722048,\r\n    \"size\" : 114688,\r\n    \"uuid\" : \"870e1cf7-0a62-382a-b74b-c1e970aa3db2\",\r\n    \"path\" : \"\\/opt\\/homebrew\\/*\\/libuv.1.dylib\",\r\n    \"name\" : \"libuv.1.dylib\"\r\n  },\r\n  {\r\n    \"source\" : \"P\",\r\n    \"arch\" : \"arm64e\",\r\n    \"base\" : 6950244352,\r\n    \"size\" : 53248,\r\n    \"uuid\" : \"63c4eef9-69a5-38b1-996e-8d31b66a051d\",\r\n    \"path\" : \"\\/usr\\/lib\\/system\\/libsystem_pthread.dylib\",\r\n    \"name\" : \"libsystem_pthread.dylib\"\r\n  },\r\n  {\r\n    \"size\" : 0,\r\n    \"source\" : \"A\",\r\n    \"base\" : 0,\r\n    \"uuid\" : \"00000000-0000-0000-0000-000000000000\"\r\n  }\r\n],\r\n  \"sharedCache\" : {\r\n  \"base\" : 6946947072,\r\n  \"size\" : 3144744960,\r\n  \"uuid\" : \"049b583e-d4dc-3b2b-88da-e52d6e18313d\"\r\n},\r\n  \"vmSummary\" : \"ReadOnly portion of Libraries: Total=742.0M resident=0K(0%) swapped_out_or_unallocated=742.0M(100%)\\nWritable regions: Total=1.7G written=0K(0%) resident=0K(0%) swapped_out=0K(0%) unallocated=1.7G(100%)\\n\\n                                VIRTUAL   REGION \\nREGION TYPE                        SIZE    COUNT (non-coalesced) \\n===========                     =======  ======= \\nActivity Tracing                   256K        1 \\nKernel Alloc Once                   32K        1 \\nMALLOC                           267.2M       36 \\nMALLOC guard page                   96K        4 \\nMALLOC_MEDIUM (reserved)         960.0M        8         reserved VM address space (unallocated)\\nMALLOC_NANO (reserved)           384.0M        1         reserved VM address space (unallocated)\\nSTACK GUARD                       56.1M        7 \\nStack                             48.6M        7 \\nVM_ALLOCATE                       55.2M      442 \\n__AUTH                            1586K      104 \\n__AUTH_CONST                      7051K      227 \\n__DATA                            7361K      226 \\n__DATA_CONST                      7935K      243 \\n__DATA_DIRTY                       328K       81 \\n__FONT_DATA                          4K        1 \\n__LINKEDIT                       578.5M       20 \\n__OBJC_CONST                       713K       81 \\n__OBJC_RO                         83.0M        1 \\n__OBJC_RW                         3168K        1 \\n__TEXT                           163.5M      255 \\n__UNICODE                          592K        1 \\ndyld private memory               1024K        1 \\nmapped file                       29.1M        3 \\nshared memory                       64K        4 \\n===========                     =======  ======= \\nTOTAL                              2.6G     1756 \\nTOTAL, minus reserved VM space     1.3G     1756 \\n\",\r\n  \"legacyInfo\" : {\r\n  \"threadTriggered\" : {\r\n    \"queue\" : \"com.apple.main-thread\"\r\n  }\r\n},\r\n  \"trialInfo\" : {\r\n  \"rollouts\" : [\r\n    {\r\n      \"rolloutId\" : \"5f72dc58705eff005a46b3a9\",\r\n      \"factorPackIds\" : {\r\n\r\n      },\r\n      \"deploymentId\" : 240000015\r\n    },\r\n    {\r\n      \"rolloutId\" : \"63582c5f8a53461413999550\",\r\n      \"factorPackIds\" : {\r\n\r\n      },\r\n      \"deploymentId\" : 240000002\r\n    }\r\n  ],\r\n  \"experiments\" : [\r\n\r\n  ]\r\n}\r\n}\r\n\r\n```\n\n### Steps to reproduce\n\nUnfortunately, I don't know how to reproduce. I was just using Neovim as usual. I will describe what I did instead.\r\n\r\nI was trying close a `diffview.nvim` window using `DiffviewClose` but it gave an error, so I hit `space x` which I mapped to `:bd`, and it crashed.\r\n\r\nHere is [the config](https://github.com/SichangHe/.config/tree/macos/nvim) I use. I have a lot of plugins so I don't know which one of them is essential to the problem.\n\n### Expected behavior\n\nIt should not SegFault.\n\n### Neovim version (nvim -v)\n\nNVIM v0.8.2\n\n### Vim (not Nvim) behaves the same?\n\nNo idea\n\n### Operating system/version\n\nmacOS 12.6\n\n### Terminal name/version\n\nalacritty 0.11.0 (8dbaa0b)\n\n### $TERM environment variable\n\nalacritty\n\n### Installation\n\nHomebrew",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "Different backtrace, but perhaps related. No repro steps. Commit: c0b99bb1de8d\r\n\r\n```\r\nThread 0 Crashed::  Dispatch queue: com.apple.main-thread\r\n0   nvim                          \t       0x10eb35784 winframe_remove + 132\r\n1   nvim                          \t       0x10eb2d786 win_close + 3254\r\n2   nvim                          \t       0x10eb35fd2 close_others + 306\r\n3   nvim                          \t       0x10e8b99dc execute_cmd0 + 220\r\n4   nvim                          \t       0x10e8b41ed do_cmdline + 11597\r\n5   nvim                          \t       0x10eb2a731 do_window + 2865\r\n6   nvim                          \t       0x10e9a9933 normal_execute + 9043\r\n7   nvim                          \t       0x10eab9729 state_enter + 121\r\n8   nvim                          \t       0x10e944631 main + 16385\r\n9   dyld                          \t    0x7ff80d7eb386 start + 1942\r\n```",
            "created_at": "2024-02-07T14:24:52Z",
            "html_url": "https://github.com/neovim/neovim/issues/22182#issuecomment-1932157816",
            "id": 1932157816,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/22182",
            "node_id": "IC_kwDOAPphoM5zKmN4",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1932157816/reactions"
            },
            "updated_at": "2024-02-07T14:24:52Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1932157816",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 1,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/22182/comments",
    "created_at": "2023-02-08T23:53:01Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/22182/events",
    "html_url": "https://github.com/neovim/neovim/issues/22182",
    "id": 1576972625,
    "labels": [
        {
            "color": "c5def5",
            "default": false,
            "description": "",
            "id": 113026979,
            "name": "ui",
            "node_id": "MDU6TGFiZWwxMTMwMjY5Nzk=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/ui"
        },
        {
            "color": "FBCA04",
            "default": false,
            "description": "We need minimal steps to reproduce the issue",
            "id": 298863445,
            "name": "needs:repro",
            "node_id": "MDU6TGFiZWwyOTg4NjM0NDU=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/needs:repro"
        },
        {
            "color": "0E8A16",
            "default": false,
            "description": "issue contains a stacktrace/ASAN log",
            "id": 435854079,
            "name": "has:backtrace",
            "node_id": "MDU6TGFiZWw0MzU4NTQwNzk=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/has:backtrace"
        },
        {
            "color": "F9D0C4",
            "default": false,
            "description": "issue reporting a crash or segfault",
            "id": 435854234,
            "name": "bug-crash",
            "node_id": "MDU6TGFiZWw0MzU4NTQyMzQ=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug-crash"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/22182/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM5d_rFR",
    "number": 22182,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/22182/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/22182/timeline",
    "title": "SegFault in frame_new_height() when trying to close `diffview` window",
    "updated_at": "2025-01-19T11:43:41Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/22182",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/84777573?v=4",
        "events_url": "https://api.github.com/users/SichangHe/events{/privacy}",
        "followers_url": "https://api.github.com/users/SichangHe/followers",
        "following_url": "https://api.github.com/users/SichangHe/following{/other_user}",
        "gists_url": "https://api.github.com/users/SichangHe/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/SichangHe",
        "id": 84777573,
        "login": "SichangHe",
        "node_id": "MDQ6VXNlcjg0Nzc3NTcz",
        "organizations_url": "https://api.github.com/users/SichangHe/orgs",
        "received_events_url": "https://api.github.com/users/SichangHe/received_events",
        "repos_url": "https://api.github.com/users/SichangHe/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/SichangHe/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/SichangHe/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/SichangHe",
        "user_view_type": "public"
    }
}