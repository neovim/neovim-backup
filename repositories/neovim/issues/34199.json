{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "body": "### Problem\n\nWhen creating a new buffer with the `eol` setting turned on (the default), `byte2line(1)` should return `1`. Instead, it returns `-1` until the buffer is edited, even if its contents don't change.\n\n### Steps to reproduce\n\n`nvim --clean -u minimal.lua`:\n\n```lua\n-- minimal.lua\n\n-- Calls `byte2line` in the given buffer.\nlocal byte2line = function(bufnr, byte_offset)\n  return vim.api.nvim_buf_call(bufnr, function()\n    return vim.fn.byte2line(byte_offset)\n  end)\nend\n\nlocal bufnr = vim.api.nvim_create_buf(false, true)\n\n-- Make sure the buffer is empty.\nassert(vim.deep_equal(vim.api.nvim_buf_get_lines(bufnr, 0, -1, false), { \"\" }))\n\n-- Even though we just created the buffer, 1 is a valid byte offset because\n-- `eol` is on by default, which means the buffer has an implicit trailing\n-- newline.\nlocal byte2line_pre_edits = byte2line(bufnr, 1)\n\n-- Insert and delete a character, which should be a no-op.\nvim.api.nvim_buf_set_text(bufnr, 0, 0, 0, 0, { \"a\" })\nvim.api.nvim_buf_set_text(bufnr, 0, 0, 0, 1, {})\n\n-- Make sure the buffer is still empty.\nassert(vim.deep_equal(vim.api.nvim_buf_get_lines(bufnr, 0, -1, false), { \"\" }))\n\nlocal byte2line_post_edits = byte2line(bufnr, 1)\n\nassert(byte2line_post_edits == 1)\n\n-- ðŸ’¥ is actually -1, which means 1 was not a valid byte offset before we made\n-- the edits, even though they left the buffer unchanged.\nassert(byte2line_pre_edits == 1)\n```\n\n### Expected behavior\n\n`byte2line(1) == 1`.\n\n### Nvim version (nvim -v)\n\nNVIM v0.12.0-nightly+8e8f452\n\n### Vim (not Nvim) behaves the same?\n\nN/A\n\n### Operating system/version\n\nmacOS 15.0\n\n### Terminal name/version\n\nalacrity 0.15.1\n\n### $TERM environment variable\n\nalacritty\n\n### Installation\n\nnixpkgs",
    "closed_at": null,
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
        "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
        "followers_url": "https://api.github.com/users/zeertzjq/followers",
        "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
        "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/zeertzjq",
        "id": 35768171,
        "login": "zeertzjq",
        "node_id": "MDQ6VXNlcjM1NzY4MTcx",
        "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
        "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
        "repos_url": "https://api.github.com/users/zeertzjq/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/zeertzjq",
        "user_view_type": "public"
    },
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "No",
            "created_at": "2025-05-27T08:18:13Z",
            "html_url": "https://github.com/neovim/neovim/issues/34199#issuecomment-2911610192",
            "id": 2911610192,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34199",
            "node_id": "IC_kwDOAPphoM6ti6VQ",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 1,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2911610192/reactions"
            },
            "updated_at": "2025-05-27T08:18:13Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2911610192",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "> No\n\nCan I get a bit more feedback? Is that the expected behavior?",
            "created_at": "2025-05-27T08:23:41Z",
            "html_url": "https://github.com/neovim/neovim/issues/34199#issuecomment-2911626999",
            "id": 2911626999,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34199",
            "node_id": "IC_kwDOAPphoM6ti-b3",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2911626999/reactions"
            },
            "updated_at": "2025-05-27T08:29:18Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2911626999",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59321248?v=4",
                "events_url": "https://api.github.com/users/noib3/events{/privacy}",
                "followers_url": "https://api.github.com/users/noib3/followers",
                "following_url": "https://api.github.com/users/noib3/following{/other_user}",
                "gists_url": "https://api.github.com/users/noib3/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/noib3",
                "id": 59321248,
                "login": "noib3",
                "node_id": "MDQ6VXNlcjU5MzIxMjQ4",
                "organizations_url": "https://api.github.com/users/noib3/orgs",
                "received_events_url": "https://api.github.com/users/noib3/received_events",
                "repos_url": "https://api.github.com/users/noib3/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/noib3/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/noib3/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/noib3",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "There is no strong enough reason to change the current behavior.",
            "created_at": "2025-05-27T08:43:12Z",
            "html_url": "https://github.com/neovim/neovim/issues/34199#issuecomment-2911686504",
            "id": 2911686504,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34199",
            "node_id": "IC_kwDOAPphoM6tjM9o",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2911686504/reactions"
            },
            "updated_at": "2025-05-27T08:43:12Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2911686504",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "The reason is that as a plugin author I have no idea whether `byte2line` is ok to call on a buffer, and there's no `vim.api.nvim_*` equivalent for the same functionality.\n\nI strongly believe this is a bug, and the issue should be re-opened.",
            "created_at": "2025-05-27T08:46:49Z",
            "html_url": "https://github.com/neovim/neovim/issues/34199#issuecomment-2911700169",
            "id": 2911700169,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34199",
            "node_id": "IC_kwDOAPphoM6tjQTJ",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2911700169/reactions"
            },
            "updated_at": "2025-05-27T08:46:49Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2911700169",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59321248?v=4",
                "events_url": "https://api.github.com/users/noib3/events{/privacy}",
                "followers_url": "https://api.github.com/users/noib3/followers",
                "following_url": "https://api.github.com/users/noib3/following{/other_user}",
                "gists_url": "https://api.github.com/users/noib3/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/noib3",
                "id": 59321248,
                "login": "noib3",
                "node_id": "MDQ6VXNlcjU5MzIxMjQ4",
                "organizations_url": "https://api.github.com/users/noib3/orgs",
                "received_events_url": "https://api.github.com/users/noib3/received_events",
                "repos_url": "https://api.github.com/users/noib3/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/noib3/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/noib3/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/noib3",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Could be worth a documentation mention. This happens in the \"initial state\" even when the buffer is fully loaded but the memline is internally uninitiated, whereas one easily could expect this behavior only when the buffer actually is unloaded (as in `bufloaded(nr)` gives 0).",
            "created_at": "2025-05-27T08:47:29Z",
            "html_url": "https://github.com/neovim/neovim/issues/34199#issuecomment-2911702137",
            "id": 2911702137,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34199",
            "node_id": "IC_kwDOAPphoM6tjQx5",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2911702137/reactions"
            },
            "updated_at": "2025-05-27T08:47:39Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2911702137",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
                "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
                "followers_url": "https://api.github.com/users/bfredl/followers",
                "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
                "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bfredl",
                "id": 1363104,
                "login": "bfredl",
                "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
                "organizations_url": "https://api.github.com/users/bfredl/orgs",
                "received_events_url": "https://api.github.com/users/bfredl/received_events",
                "repos_url": "https://api.github.com/users/bfredl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bfredl",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "AFAICT there's no public API to check whether the memline is initialized. Would it be reasonable to modify `byte2line` to handle uninitialized memlines consistently? Specifically, in an empty buffer, `byte2line(1)` should return `1` when a trailing newline would be present (due to `eol` setting), and `-1` otherwise.",
            "created_at": "2025-05-27T09:03:22Z",
            "html_url": "https://github.com/neovim/neovim/issues/34199#issuecomment-2911749957",
            "id": 2911749957,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34199",
            "node_id": "IC_kwDOAPphoM6tjcdF",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2911749957/reactions"
            },
            "updated_at": "2025-05-27T09:03:22Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2911749957",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59321248?v=4",
                "events_url": "https://api.github.com/users/noib3/events{/privacy}",
                "followers_url": "https://api.github.com/users/noib3/followers",
                "following_url": "https://api.github.com/users/noib3/following{/other_user}",
                "gists_url": "https://api.github.com/users/noib3/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/noib3",
                "id": 59321248,
                "login": "noib3",
                "node_id": "MDQ6VXNlcjU5MzIxMjQ4",
                "organizations_url": "https://api.github.com/users/noib3/orgs",
                "received_events_url": "https://api.github.com/users/noib3/received_events",
                "repos_url": "https://api.github.com/users/noib3/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/noib3/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/noib3/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/noib3",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> Specifically, in an empty buffer, `byte2line(1)` should return `1` when a trailing newline would be present (due to `eol` setting), and `-1` otherwise.\n\nHow is that consistent? Whether `'eol'` is set has nothing to do with whether memline is initialized.",
            "created_at": "2025-05-27T09:10:06Z",
            "html_url": "https://github.com/neovim/neovim/issues/34199#issuecomment-2911773839",
            "id": 2911773839,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34199",
            "node_id": "IC_kwDOAPphoM6tjiSP",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2911773839/reactions"
            },
            "updated_at": "2025-05-27T09:12:02Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2911773839",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "The memline being lazily initialized is an internal optimization that shouldn't be surfaced to the user. If `eol` is set it means the buffer has a trailing newline, and I would expect the output of `byte2line(1)` to reflect that.",
            "created_at": "2025-05-27T09:16:41Z",
            "html_url": "https://github.com/neovim/neovim/issues/34199#issuecomment-2911795099",
            "id": 2911795099,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34199",
            "node_id": "IC_kwDOAPphoM6tjneb",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2911795099/reactions"
            },
            "updated_at": "2025-05-27T09:16:41Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2911795099",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59321248?v=4",
                "events_url": "https://api.github.com/users/noib3/events{/privacy}",
                "followers_url": "https://api.github.com/users/noib3/followers",
                "following_url": "https://api.github.com/users/noib3/following{/other_user}",
                "gists_url": "https://api.github.com/users/noib3/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/noib3",
                "id": 59321248,
                "login": "noib3",
                "node_id": "MDQ6VXNlcjU5MzIxMjQ4",
                "organizations_url": "https://api.github.com/users/noib3/orgs",
                "received_events_url": "https://api.github.com/users/noib3/received_events",
                "repos_url": "https://api.github.com/users/noib3/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/noib3/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/noib3/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/noib3",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Whether a buffer is empty is not an internal state, and it has nothing to do with the `'eol'` option.",
            "created_at": "2025-05-27T09:41:53Z",
            "html_url": "https://github.com/neovim/neovim/issues/34199#issuecomment-2911873145",
            "id": 2911873145,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34199",
            "node_id": "IC_kwDOAPphoM6tj6h5",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2911873145/reactions"
            },
            "updated_at": "2025-05-27T09:41:53Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2911873145",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "> Whether a buffer is empty is not an internal state\n\nDoes `byte2line(1)` return `-1` on a new buffer because a) the buffer is empty, or b) the memline is not initialized?\n\nIf a), then it should always return `-1`, even after applying no-op edits, which means it's currently inconsistent;\n\nIf b), then its return value depends on an internal state, which means it's currently buggy;\n\n> and it has nothing to do with the 'eol' option\n\nIf `eol` is turned on then no buffer is actually \"empty\", because there's always a `\\n`.",
            "created_at": "2025-05-27T10:27:14Z",
            "html_url": "https://github.com/neovim/neovim/issues/34199#issuecomment-2912002826",
            "id": 2912002826,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34199",
            "node_id": "IC_kwDOAPphoM6tkaMK",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2912002826/reactions"
            },
            "updated_at": "2025-05-27T10:30:38Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2912002826",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59321248?v=4",
                "events_url": "https://api.github.com/users/noib3/events{/privacy}",
                "followers_url": "https://api.github.com/users/noib3/followers",
                "following_url": "https://api.github.com/users/noib3/following{/other_user}",
                "gists_url": "https://api.github.com/users/noib3/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/noib3",
                "id": 59321248,
                "login": "noib3",
                "node_id": "MDQ6VXNlcjU5MzIxMjQ4",
                "organizations_url": "https://api.github.com/users/noib3/orgs",
                "received_events_url": "https://api.github.com/users/noib3/received_events",
                "repos_url": "https://api.github.com/users/noib3/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/noib3/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/noib3/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/noib3",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> Does `byte2line(1)` return `-1` on a new buffer because a) the buffer is empty, or b) the memline is not initialized?\n\nThese two are the same thing.",
            "created_at": "2025-05-27T11:06:43Z",
            "html_url": "https://github.com/neovim/neovim/issues/34199#issuecomment-2912111799",
            "id": 2912111799,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34199",
            "node_id": "IC_kwDOAPphoM6tk0y3",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2912111799/reactions"
            },
            "updated_at": "2025-05-27T11:06:43Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2912111799",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Can an initialized memline not be empty?\n\nEven so, why does `byte2line(1)` return either -1 or 1? If they actually are the same then it should always return the same value.",
            "created_at": "2025-05-27T11:11:21Z",
            "html_url": "https://github.com/neovim/neovim/issues/34199#issuecomment-2912123321",
            "id": 2912123321,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34199",
            "node_id": "IC_kwDOAPphoM6tk3m5",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2912123321/reactions"
            },
            "updated_at": "2025-05-27T11:11:21Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2912123321",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59321248?v=4",
                "events_url": "https://api.github.com/users/noib3/events{/privacy}",
                "followers_url": "https://api.github.com/users/noib3/followers",
                "following_url": "https://api.github.com/users/noib3/following{/other_user}",
                "gists_url": "https://api.github.com/users/noib3/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/noib3",
                "id": 59321248,
                "login": "noib3",
                "node_id": "MDQ6VXNlcjU5MzIxMjQ4",
                "organizations_url": "https://api.github.com/users/noib3/orgs",
                "received_events_url": "https://api.github.com/users/noib3/received_events",
                "repos_url": "https://api.github.com/users/noib3/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/noib3/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/noib3/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/noib3",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Ah OK, it's \"unedited buffer\" when. Regardless please see #25369.",
            "created_at": "2025-05-27T13:36:01Z",
            "html_url": "https://github.com/neovim/neovim/issues/34199#issuecomment-2912546546",
            "id": 2912546546,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34199",
            "node_id": "IC_kwDOAPphoM6tme7y",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2912546546/reactions"
            },
            "updated_at": "2025-05-27T13:36:01Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2912546546",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I've looked at both https://github.com/neovim/neovim/issues/25369 as well as the PR that closed it, but those seemed more about what Neovim considers to be difference between an empty buffer and one with a single newline which, unless I'm missing something, doesn't explain the MRE I posted.\n\nLike @bfredl mentioned, I think this has more to do with how `byte2line` works with buffers with uninitialized memlines that *would* have a newline when written to disk due to `eol`.",
            "created_at": "2025-05-27T15:58:05Z",
            "html_url": "https://github.com/neovim/neovim/issues/34199#issuecomment-2913119786",
            "id": 2913119786,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34199",
            "node_id": "IC_kwDOAPphoM6toq4q",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2913119786/reactions"
            },
            "updated_at": "2025-05-27T15:59:19Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2913119786",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59321248?v=4",
                "events_url": "https://api.github.com/users/noib3/events{/privacy}",
                "followers_url": "https://api.github.com/users/noib3/followers",
                "following_url": "https://api.github.com/users/noib3/following{/other_user}",
                "gists_url": "https://api.github.com/users/noib3/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/noib3",
                "id": 59321248,
                "login": "noib3",
                "node_id": "MDQ6VXNlcjU5MzIxMjQ4",
                "organizations_url": "https://api.github.com/users/noib3/orgs",
                "received_events_url": "https://api.github.com/users/noib3/received_events",
                "repos_url": "https://api.github.com/users/noib3/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/noib3/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/noib3/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/noib3",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Again, whether memline is uninitialized is not an internal state. It's a state that has a meaning to plugins.",
            "created_at": "2025-05-27T23:22:29Z",
            "html_url": "https://github.com/neovim/neovim/issues/34199#issuecomment-2914419439",
            "id": 2914419439,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34199",
            "node_id": "IC_kwDOAPphoM6ttoLv",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2914419439/reactions"
            },
            "updated_at": "2025-05-27T23:22:29Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2914419439",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "What API can I use to tell if a buffer's memline is initialized?\n\nEither way, I'm still not sure what to think of the MRE I originally posted. Is that the expected behavior? If it is, could you explain what `byte2line` is supposed to return and why it's ok for it to return either `-1` or `1`? If not, can we re-open the issue?",
            "created_at": "2025-05-27T23:32:05Z",
            "html_url": "https://github.com/neovim/neovim/issues/34199#issuecomment-2914434142",
            "id": 2914434142,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34199",
            "node_id": "IC_kwDOAPphoM6ttrxe",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2914434142/reactions"
            },
            "updated_at": "2025-05-27T23:32:05Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2914434142",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59321248?v=4",
                "events_url": "https://api.github.com/users/noib3/events{/privacy}",
                "followers_url": "https://api.github.com/users/noib3/followers",
                "following_url": "https://api.github.com/users/noib3/following{/other_user}",
                "gists_url": "https://api.github.com/users/noib3/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/noib3",
                "id": 59321248,
                "login": "noib3",
                "node_id": "MDQ6VXNlcjU5MzIxMjQ4",
                "organizations_url": "https://api.github.com/users/noib3/orgs",
                "received_events_url": "https://api.github.com/users/noib3/received_events",
                "repos_url": "https://api.github.com/users/noib3/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/noib3/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/noib3/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/noib3",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> What API can I use to tell if a buffer's memline is initialized?\n\n`byte2line()` or `line2byte()`",
            "created_at": "2025-05-28T00:02:07Z",
            "html_url": "https://github.com/neovim/neovim/issues/34199#issuecomment-2914473348",
            "id": 2914473348,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34199",
            "node_id": "IC_kwDOAPphoM6tt1WE",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2914473348/reactions"
            },
            "updated_at": "2025-05-28T00:02:07Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2914473348",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I see. So `byte2line()` returning -1 means that either the byte offset was invalid or the buffer is empty and its memline hasn't been initialized yet? If so, the docs need to mention the latter case.\n\n> It's a state that has a meaning to plugins\n\nIt shouldn't, there's no mention of a \"memline\" anywhere in the docs, and an uninitialized memline seems to be a different concept than an unloaded buffer, i.e. `byte2line(1)` can return -1 with `bufloaded()` returning 1.",
            "created_at": "2025-05-28T07:36:26Z",
            "html_url": "https://github.com/neovim/neovim/issues/34199#issuecomment-2915290875",
            "id": 2915290875,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34199",
            "node_id": "IC_kwDOAPphoM6tw877",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2915290875/reactions"
            },
            "updated_at": "2025-05-28T07:36:26Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2915290875",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59321248?v=4",
                "events_url": "https://api.github.com/users/noib3/events{/privacy}",
                "followers_url": "https://api.github.com/users/noib3/followers",
                "following_url": "https://api.github.com/users/noib3/following{/other_user}",
                "gists_url": "https://api.github.com/users/noib3/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/noib3",
                "id": 59321248,
                "login": "noib3",
                "node_id": "MDQ6VXNlcjU5MzIxMjQ4",
                "organizations_url": "https://api.github.com/users/noib3/orgs",
                "received_events_url": "https://api.github.com/users/noib3/received_events",
                "repos_url": "https://api.github.com/users/noib3/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/noib3/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/noib3/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/noib3",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "> the docs need to mention the latter case.\n\nWhile this is better than doing nothing, I'm still not convinced that changing the docs is the right way to go about closing this issue.\n\nI know you said that the memline being uninitialized is not an internal state because it can be checked by calling `byte2line()`, but arguably *that's* the bug. I don't think the initialization state of an internal data structure is something that should be surfaced to the user, and indeed it currently isn't, as there's no mention of it anywhere.\n\nAny plugin that's relying on `byte2line()` returning -1 on an empty, unedited buffer (if there even are any) is relying on an undocumented property, which is their problem, not Neovim's.\n\nI think this should be closed by fixing `byte2line()`'s behavior (and possibly also `line2byte()`, I haven't checked it yet), and not by documenting -- and thus \"blessing\" -- a totally new concept.",
            "created_at": "2025-05-28T09:13:40Z",
            "html_url": "https://github.com/neovim/neovim/issues/34199#issuecomment-2915573674",
            "id": 2915573674,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34199",
            "node_id": "IC_kwDOAPphoM6tyB-q",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2915573674/reactions"
            },
            "updated_at": "2025-05-28T09:13:40Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2915573674",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59321248?v=4",
                "events_url": "https://api.github.com/users/noib3/events{/privacy}",
                "followers_url": "https://api.github.com/users/noib3/followers",
                "following_url": "https://api.github.com/users/noib3/following{/other_user}",
                "gists_url": "https://api.github.com/users/noib3/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/noib3",
                "id": 59321248,
                "login": "noib3",
                "node_id": "MDQ6VXNlcjU5MzIxMjQ4",
                "organizations_url": "https://api.github.com/users/noib3/orgs",
                "received_events_url": "https://api.github.com/users/noib3/received_events",
                "repos_url": "https://api.github.com/users/noib3/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/noib3/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/noib3/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/noib3",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 19,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/34199/comments",
    "created_at": "2025-05-27T07:59:46Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/34199/events",
    "html_url": "https://github.com/neovim/neovim/issues/34199",
    "id": 3093010795,
    "labels": [
        {
            "color": "c5def5",
            "default": true,
            "description": "",
            "id": 84744038,
            "name": "documentation",
            "node_id": "MDU6TGFiZWw4NDc0NDAzOA==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/documentation"
        },
        {
            "color": "FBCA04",
            "default": false,
            "description": "upstream issue that must be fixed in Vim first",
            "id": 2639399975,
            "name": "needs:vim-patch",
            "node_id": "MDU6TGFiZWwyNjM5Mzk5OTc1",
            "url": "https://api.github.com/repos/neovim/neovim/labels/needs:vim-patch"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/34199/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM64W5lr",
    "number": 34199,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/34199/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": "reopened",
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/34199/timeline",
    "title": "`byte2line` rejects valid byte offset in unedited buffers",
    "type": null,
    "updated_at": "2025-05-28T09:13:41Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/34199",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/59321248?v=4",
        "events_url": "https://api.github.com/users/noib3/events{/privacy}",
        "followers_url": "https://api.github.com/users/noib3/followers",
        "following_url": "https://api.github.com/users/noib3/following{/other_user}",
        "gists_url": "https://api.github.com/users/noib3/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/noib3",
        "id": 59321248,
        "login": "noib3",
        "node_id": "MDQ6VXNlcjU5MzIxMjQ4",
        "organizations_url": "https://api.github.com/users/noib3/orgs",
        "received_events_url": "https://api.github.com/users/noib3/received_events",
        "repos_url": "https://api.github.com/users/noib3/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/noib3/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/noib3/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/noib3",
        "user_view_type": "public"
    }
}