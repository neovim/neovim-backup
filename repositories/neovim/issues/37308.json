{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\n\nPer the neovim-manual:\n\n`:h terminal-emulator`:\n> Terminal buffers behave like normal buffers, except:\n> - With 'modifiable', lines can be edited but not deleted.\n> - 'scrollback' controls how many lines are kept.\n> - Output is followed (\"tailed\") if cursor is on the last line.\n> - 'modified' is the default. You can set 'nomodified' to avoid a warning when\n>   closing the terminal buffer.\n> - 'bufhidden' defaults to \"hide\".\n\nHowever, the buffer is treated as modified by certain parts of neovim, but as not modified by others. Running `:setlocal modified? ` in the terminal-buffer right after opening it will show `nomodified`; similarly `nvim_get_option_value()` and `vim.fn.getbufinfo()` will report the flag as being set to false. . Additionally, trying to change the value of `modified` seems to have no effect, whether done through `:set(local)` or   `nvim_set_option_value()` and it will remain on `nomodified` (and as far as I can tell, this isn't a visual issue and the value actually doesn't change internally). Despite this, calling `getbufino` with `bufmodified = 1` will still return a result that includes any terminal buffers (eventhough their `changed` entry is set to 0). Furthermore,  using `:bd` on the terminal buffer will trigger a warning (eventhough it shouldn't when `nomodified` is set, according to the manual), but `:q` will  not when the terminal-buffer is the only window.\n\nAdditionally, running `:setlocal bufhidden?` in a terminal buffer right after opening it shows it to be empty, even though it should be set to `hide` according to the manual. It is possible to manually change this value without issue and neovim seems to treat it properly.\n\nAs far as I can tell, there are no issues with the other options listed in `:h terminal-emulator` nor in `:h terminal-config`.\n\n### Steps to reproduce\n\n1. Start with `nvim --clean`\n2. Open a terminal buffer with `:term`.\n3. `:setlocal bufhidden` will result in an empty value.\n4. `:setlocal modified?` will result in `nomodified`.\n5. `:setlocal modified | setlocal modified?` will results in `nomodified`\n6. `:echo getbufinfo({'bufmodified': 1})` will include the terminal buffer in its results.\n7. `:bd` will trigger a warning and not close the buffer.\n8. `:q` will close the terminal's buffer-window.\n\n### Expected behavior\n\n- When opening a terminal window, the default value of `modified` should be `modified`, not `nomodified`, and for `bufhidden` it should be `hide`, not empty.\n- Setting the value of `modified` in a terminal-buffer should have an effect and alter its value, but doesn`t.\n- Neovim should consistently treat the `modified` value of a terminal buffer. E.g. closing a terminal buffer should not emit a warning when `modified` is set to `nomodified`, and `getbufinfo({'bufmodified': 1'})` should not include terminal buffers when their `modified` option is set to `nomodified`.\n\n### Nvim version (nvim -v)\n\n0.11.5\n\n### Vim (not Nvim) behaves the same?\n\nn/a\n\n### Operating system/version\n\nNixOS 26.05 (Yarara) x86_64\n\n### Terminal name/version\n\nKitty 0.44.0\n\n### $TERM environment variable\n\nxterm-kitty\n\n### Installation\n\nnixpkgs-unstable (commit 418468ac9527e799809c900eda37cbff999199b6; issue is reproducible in both `neovim` and `neovim-wrapped` packages)",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [],
    "comments": 0,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/37308/comments",
    "created_at": "2026-01-08T15:37:42Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/37308/events",
    "html_url": "https://github.com/neovim/neovim/issues/37308",
    "id": 3793383238,
    "issue_dependencies_summary": {
        "blocked_by": 0,
        "blocking": 0,
        "total_blocked_by": 0,
        "total_blocking": 0
    },
    "labels": [
        {
            "color": "c5def5",
            "default": false,
            "description": "built-in :terminal or :shell",
            "id": 212696822,
            "name": "terminal",
            "node_id": "MDU6TGFiZWwyMTI2OTY4MjI=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/terminal"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/37308/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM7iGm9G",
    "number": 37308,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/37308/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/37308/timeline",
    "title": "Inconsistent 'modified' and 'bufhidden' behaviour in terminal buffers",
    "type": {
        "color": "red",
        "created_at": "2024-01-25T10:10:19Z",
        "description": "An unexpected problem or behavior",
        "id": 597163,
        "is_enabled": true,
        "name": "Bug",
        "node_id": "IT_kwDOAGK_Pc4ACRyr",
        "updated_at": "2024-07-26T10:12:30Z"
    },
    "updated_at": "2026-01-08T23:53:13Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/37308",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/80783230?v=4",
        "events_url": "https://api.github.com/users/LeviVanDerMaas/events{/privacy}",
        "followers_url": "https://api.github.com/users/LeviVanDerMaas/followers",
        "following_url": "https://api.github.com/users/LeviVanDerMaas/following{/other_user}",
        "gists_url": "https://api.github.com/users/LeviVanDerMaas/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/LeviVanDerMaas",
        "id": 80783230,
        "login": "LeviVanDerMaas",
        "node_id": "MDQ6VXNlcjgwNzgzMjMw",
        "organizations_url": "https://api.github.com/users/LeviVanDerMaas/orgs",
        "received_events_url": "https://api.github.com/users/LeviVanDerMaas/received_events",
        "repos_url": "https://api.github.com/users/LeviVanDerMaas/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/LeviVanDerMaas/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/LeviVanDerMaas/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/LeviVanDerMaas",
        "user_view_type": "public"
    }
}