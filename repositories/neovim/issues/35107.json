{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "body": "### Problem\n\nI run nvim with \n```\n --headless --listen 127.0.0.1:1234\n```\nand remote connect it with neovide. I found that after long time usage (2 ~ 3 days) , with multi reconnection (but the server side nvim still keeps running), the built-in terminal of nvim will became laggy, and sometimes lag after multi keystroke (especially with tui). for example I run tig inside nvim terminal, and press j to move down, the screen doesn't update at all (no matter how long I wait), only if I press another key (say, enter or esc), then the screen shows the result of first j key press result.  and sometimes it behaves like tig already got all response, just the screen not update, for example I press j 3 times, and screen doesn't update, but if I press another key, tig suddenly jump 3 lines down.  this is not due to network bandwidth/latency, because I also edit other files in the same nvim instance and that is quite responsive.  This can't be resolved by closing the terminal or open new built-in terminal , and only restart nvim itself can resolve \n\n### Steps to reproduce\n\nrunning \n```\n --headless --listen 127.0.0.1:1234\n```\nremote connect it by using neovide, run for serval days , with multi disconnection/reconnection \n\n### Expected behavior\n\nbuiltin terminal should not slow down\n\n### Nvim version (nvim -v)\n\nNVIM v0.11.3-dev-47+g36fedaba1f\n\n### Vim (not Nvim) behaves the same?\n\nhaven't tried \n\n### Operating system/version\n\nubuntu 22.04\n\n### Terminal name/version\n\nremote with neovide\n\n### $TERM environment variable\n\nxterm-256color (from nvim builtin terminal)\n\n### Installation\n\nbuild from source",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "> This can't be resolved by closing the terminal or open new built-in terminal , and only restart nvim itself can resolve\n\nInteresting, so it's not related to the amount of terminal scrollback.\n\n\n> with multi reconnection (but the server side nvim still keeps running),\n\nSo it only happens after reconnect? And only in `:terminal` buffers?\n\nSeems like something in the event/channel system is accumulating, maybe the old dead channels are being waited on. Or maybe an old file descriptor or some other resource was not disposed after the client died, and is getting read/accessed, silently failing, and somehow that slows things down.",
            "created_at": "2025-07-30T00:59:24Z",
            "html_url": "https://github.com/neovim/neovim/issues/35107#issuecomment-3134541003",
            "id": 3134541003,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/35107",
            "node_id": "IC_kwDOAPphoM661UzL",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3134541003/reactions"
            },
            "updated_at": "2025-08-02T21:25:19Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3134541003",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "> So it only happens after reconnect?\n\n I'm using nvim remotely over ssh, so can't confirm if this also happen when not disconnected. my feeling is that I usually can't observe such issue during one session (without ssh reconnection),   If it happens,  it will be easily observed when I just connected. ",
            "created_at": "2025-07-30T06:53:42Z",
            "html_url": "https://github.com/neovim/neovim/issues/35107#issuecomment-3135075179",
            "id": 3135075179,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/35107",
            "node_id": "IC_kwDOAPphoM663XNr",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3135075179/reactions"
            },
            "updated_at": "2025-07-30T06:53:42Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3135075179",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/4547108?v=4",
                "events_url": "https://api.github.com/users/comicfans/events{/privacy}",
                "followers_url": "https://api.github.com/users/comicfans/followers",
                "following_url": "https://api.github.com/users/comicfans/following{/other_user}",
                "gists_url": "https://api.github.com/users/comicfans/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/comicfans",
                "id": 4547108,
                "login": "comicfans",
                "node_id": "MDQ6VXNlcjQ1NDcxMDg=",
                "organizations_url": "https://api.github.com/users/comicfans/orgs",
                "received_events_url": "https://api.github.com/users/comicfans/received_events",
                "repos_url": "https://api.github.com/users/comicfans/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/comicfans/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/comicfans/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/comicfans",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> I'm using nvim remotely over ssh, so can't confirm if this also happen when not disconnected.\n\nI mean does it ever happen during the first \"connect\". Or does it only happen after a \"reconnect\".",
            "created_at": "2025-07-31T03:37:05Z",
            "html_url": "https://github.com/neovim/neovim/issues/35107#issuecomment-3138449895",
            "id": 3138449895,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/35107",
            "node_id": "IC_kwDOAPphoM67EPHn",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3138449895/reactions"
            },
            "updated_at": "2025-07-31T03:37:42Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3138449895",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I think it doesn't happen for first connection.",
            "created_at": "2025-08-02T14:26:00Z",
            "html_url": "https://github.com/neovim/neovim/issues/35107#issuecomment-3146537770",
            "id": 3146537770,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/35107",
            "node_id": "IC_kwDOAPphoM67jFsq",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3146537770/reactions"
            },
            "updated_at": "2025-08-02T14:26:00Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3146537770",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/4547108?v=4",
                "events_url": "https://api.github.com/users/comicfans/events{/privacy}",
                "followers_url": "https://api.github.com/users/comicfans/followers",
                "following_url": "https://api.github.com/users/comicfans/following{/other_user}",
                "gists_url": "https://api.github.com/users/comicfans/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/comicfans",
                "id": 4547108,
                "login": "comicfans",
                "node_id": "MDQ6VXNlcjQ1NDcxMDg=",
                "organizations_url": "https://api.github.com/users/comicfans/orgs",
                "received_events_url": "https://api.github.com/users/comicfans/received_events",
                "repos_url": "https://api.github.com/users/comicfans/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/comicfans/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/comicfans/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/comicfans",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 4,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/35107/comments",
    "created_at": "2025-07-29T19:30:04Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/35107/events",
    "html_url": "https://github.com/neovim/neovim/issues/35107",
    "id": 3274737632,
    "labels": [
        {
            "color": "c5def5",
            "default": false,
            "description": "built-in :terminal or :shell",
            "id": 212696822,
            "name": "terminal",
            "node_id": "MDU6TGFiZWwyMTI2OTY4MjI=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/terminal"
        },
        {
            "color": "c7def8",
            "default": false,
            "description": "channels, RPC, msgpack",
            "id": 242522707,
            "name": "channels-rpc",
            "node_id": "MDU6TGFiZWwyNDI1MjI3MDc=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/channels-rpc"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": null,
            "id": 520282574,
            "name": "event-loop",
            "node_id": "MDU6TGFiZWw1MjAyODI1NzQ=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/event-loop"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "remote UI, --remote commands, p2p / peer-to-peer",
            "id": 2269137131,
            "name": "remote",
            "node_id": "MDU6TGFiZWwyMjY5MTM3MTMx",
            "url": "https://api.github.com/repos/neovim/neovim/labels/remote"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/35107/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 734,
        "created_at": "2014-05-10T20:43:04Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
            "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
            "followers_url": "https://api.github.com/users/justinmk/followers",
            "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/justinmk",
            "id": 1359421,
            "login": "justinmk",
            "node_id": "MDQ6VXNlcjEzNTk0MjE=",
            "organizations_url": "https://api.github.com/users/justinmk/orgs",
            "received_events_url": "https://api.github.com/users/justinmk/received_events",
            "repos_url": "https://api.github.com/users/justinmk/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/justinmk",
            "user_view_type": "public"
        },
        "description": "Low priority items. We plan to work on this but don't have a target date.",
        "due_on": null,
        "html_url": "https://github.com/neovim/neovim/milestone/6",
        "id": 655037,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/6/labels",
        "node_id": "MDk6TWlsZXN0b25lNjU1MDM3",
        "number": 6,
        "open_issues": 635,
        "state": "open",
        "title": "backlog",
        "updated_at": "2025-08-03T21:37:35Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/6"
    },
    "node_id": "I_kwDOAPphoM7DMIfg",
    "number": 35107,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/35107/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/35107/timeline",
    "title": ":terminal becomes laggy after long time usage, multiple remote reconnects",
    "type": {
        "color": "red",
        "created_at": "2024-01-25T10:10:19Z",
        "description": "An unexpected problem or behavior",
        "id": 597163,
        "is_enabled": true,
        "name": "Bug",
        "node_id": "IT_kwDOAGK_Pc4ACRyr",
        "updated_at": "2024-07-26T10:12:30Z"
    },
    "updated_at": "2025-08-02T21:25:19Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/35107",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/4547108?v=4",
        "events_url": "https://api.github.com/users/comicfans/events{/privacy}",
        "followers_url": "https://api.github.com/users/comicfans/followers",
        "following_url": "https://api.github.com/users/comicfans/following{/other_user}",
        "gists_url": "https://api.github.com/users/comicfans/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/comicfans",
        "id": 4547108,
        "login": "comicfans",
        "node_id": "MDQ6VXNlcjQ1NDcxMDg=",
        "organizations_url": "https://api.github.com/users/comicfans/orgs",
        "received_events_url": "https://api.github.com/users/comicfans/received_events",
        "repos_url": "https://api.github.com/users/comicfans/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/comicfans/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/comicfans/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/comicfans",
        "user_view_type": "public"
    }
}