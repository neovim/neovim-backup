{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\n\nUnable to convert arguments in statusline and statuscolumn function to numbers.\n\nIssue occurs regardless of whether argument is a literal or % item. \nOnly occurs when called from the statusline or statuscolumn option.\nFunctions work otherwise.\n\nOddly the arguments show as strings and the correct number in string format when not converted. \nConcatenating the string, assigning it to another variable, using lua string functions do not result in a string that can be converted.\n \nIssue occurs when using `nvim --clean`\n\n### Steps to reproduce\n\nnvim -clean\n\n```lua\nvim.g.statusline = function( x )\n  return type( tonumber( x ) )\nend\n\nvim.opt.statusline = '%!statusline(\"%n\")'\n-- shows v:null in the statusline\n\nvim.opt.statusline = '%!statusline(\"1 \")'\n-- shows v:null in the statusline\n\nprint( vim.g.statusline(  \"1 \" ) )\n-- shows number\n\nvim.g.statusline = function( x )\n  return vim.fn.str2nr( x )\nend\nvim.opt.statusline = '%!statusline(\"%n\")'\n-- shows 0 regardless of buffer in the statusline\n\nvim.opt.statusline = '%!statusline(\"1 \")'\n-- shows 0 regardless of buffer in the statusline\n\nprint( vim.g.statusline( \"1 \" ) )\n-- shows 1\n\nvim.g.statusline = function( )\n  return 1\nend\n-- shows 1 in statusline\n```\n\n### Expected behavior\n\nstring arguments converted to number to be usable in expressions and calling other functions.\n\n### Nvim version (nvim -v)\n\n0.10.4\n\n### Vim (not Nvim) behaves the same?\n\nsorta, 9.1.1176\n\n### Operating system/version\n\nLinux Opensuse Tumbleweed\n\n### Terminal name/version\n\nkitty 0.40.0\n\n### $TERM environment variable\n\nxterm-kitty\n\n### Installation\n\nzypper opensuse repo",
    "closed_at": "2025-04-20T02:12:30Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
        "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
        "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
        "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
        "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/apps/github-actions",
        "id": 41898282,
        "login": "github-actions[bot]",
        "node_id": "MDM6Qm90NDE4OTgyODI=",
        "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
        "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
        "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
        "type": "Bot",
        "url": "https://api.github.com/users/github-actions%5Bbot%5D",
        "user_view_type": "public"
    },
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "Cannot reproduce. Note that:\n- You should not assign a function to a global variable that starts with a lower-case letter (see #17019)\n- The `%` sign does not have a special meaning in the expression that comes after `%!` in `'statusline'`",
            "created_at": "2025-03-20T04:27:12Z",
            "html_url": "https://github.com/neovim/neovim/issues/33000#issuecomment-2739114329",
            "id": 2739114329,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33000",
            "node_id": "IC_kwDOAPphoM6jQ5FZ",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2739114329/reactions"
            },
            "updated_at": "2025-03-20T04:27:12Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2739114329",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "> The % sign does not have a special meaning in the expression that comes after %! in 'statusline'\n\n  and yet in nvim using the %items inside the arguments of a !%function( ) does actually send the item to the function in a string format as long as the %item is double quoted ( though not in vim ). \n\nI have checked and it is the correct value for all items in string format. You just can not convert the string to anything else. \"%n\" does buffer, \"%l\" line number, \"%r\" does relative, etc...",
            "created_at": "2025-03-20T04:36:42Z",
            "html_url": "https://github.com/neovim/neovim/issues/33000#issuecomment-2739126446",
            "id": 2739126446,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33000",
            "node_id": "IC_kwDOAPphoM6jQ8Cu",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2739126446/reactions"
            },
            "updated_at": "2025-03-20T04:36:42Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2739126446",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/46084773?v=4",
                "events_url": "https://api.github.com/users/HarbingerNight/events{/privacy}",
                "followers_url": "https://api.github.com/users/HarbingerNight/followers",
                "following_url": "https://api.github.com/users/HarbingerNight/following{/other_user}",
                "gists_url": "https://api.github.com/users/HarbingerNight/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/HarbingerNight",
                "id": 46084773,
                "login": "HarbingerNight",
                "node_id": "MDQ6VXNlcjQ2MDg0Nzcz",
                "organizations_url": "https://api.github.com/users/HarbingerNight/orgs",
                "received_events_url": "https://api.github.com/users/HarbingerNight/received_events",
                "repos_url": "https://api.github.com/users/HarbingerNight/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/HarbingerNight/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/HarbingerNight/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/HarbingerNight",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> > The % sign does not have a special meaning in the expression that comes after %! in 'statusline'\n> \n> and yet in nvim using the %items inside the arguments of a !%function( ) does actually send the item to the function in a string format as long as the %item is double quoted ( though not in vim ).\n\nNo it doesn't. Try this:\n```lua\nvim.g.Statusline = function(x)\n  vim.g.var = x\n  return x\nend\nvim.o.statusline = '%!Statusline(\"%n\")'\n```\nAfter drawing statusline, `:echo g:var` prints `%n`, not the buffer number.",
            "created_at": "2025-03-20T06:14:19Z",
            "html_url": "https://github.com/neovim/neovim/issues/33000#issuecomment-2739321844",
            "id": 2739321844,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33000",
            "node_id": "IC_kwDOAPphoM6jRrv0",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2739321844/reactions"
            },
            "updated_at": "2025-03-20T06:28:35Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2739321844",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "This has been closed since a request for information has not been answered for 30 days. It can be reopened when the requested information is provided.",
            "created_at": "2025-04-20T02:12:31Z",
            "html_url": "https://github.com/neovim/neovim/issues/33000#issuecomment-2816949695",
            "id": 2816949695,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33000",
            "node_id": "IC_kwDOAPphoM6n5z2_",
            "performed_via_github_app": {
                "client_id": "Iv1.05c79e9ad1f6bdfa",
                "created_at": "2018-07-30T09:30:17Z",
                "description": "Automate your workflow from idea to production",
                "events": [
                    "branch_protection_rule",
                    "check_run",
                    "check_suite",
                    "create",
                    "delete",
                    "deployment",
                    "deployment_status",
                    "discussion",
                    "discussion_comment",
                    "fork",
                    "gollum",
                    "issues",
                    "issue_comment",
                    "label",
                    "merge_group",
                    "milestone",
                    "page_build",
                    "project",
                    "project_card",
                    "project_column",
                    "public",
                    "pull_request",
                    "pull_request_review",
                    "pull_request_review_comment",
                    "push",
                    "registry_package",
                    "release",
                    "repository",
                    "repository_dispatch",
                    "status",
                    "watch",
                    "workflow_dispatch",
                    "workflow_run"
                ],
                "external_url": "https://help.github.com/en/actions",
                "html_url": "https://github.com/apps/github-actions",
                "id": 15368,
                "name": "GitHub Actions",
                "node_id": "MDM6QXBwMTUzNjg=",
                "owner": {
                    "avatar_url": "https://avatars.githubusercontent.com/u/9919?v=4",
                    "events_url": "https://api.github.com/users/github/events{/privacy}",
                    "followers_url": "https://api.github.com/users/github/followers",
                    "following_url": "https://api.github.com/users/github/following{/other_user}",
                    "gists_url": "https://api.github.com/users/github/gists{/gist_id}",
                    "gravatar_id": "",
                    "html_url": "https://github.com/github",
                    "id": 9919,
                    "login": "github",
                    "node_id": "MDEyOk9yZ2FuaXphdGlvbjk5MTk=",
                    "organizations_url": "https://api.github.com/users/github/orgs",
                    "received_events_url": "https://api.github.com/users/github/received_events",
                    "repos_url": "https://api.github.com/users/github/repos",
                    "site_admin": false,
                    "starred_url": "https://api.github.com/users/github/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/github/subscriptions",
                    "type": "Organization",
                    "url": "https://api.github.com/users/github",
                    "user_view_type": "public"
                },
                "permissions": {
                    "actions": "write",
                    "administration": "read",
                    "attestations": "write",
                    "checks": "write",
                    "contents": "write",
                    "deployments": "write",
                    "discussions": "write",
                    "issues": "write",
                    "merge_queues": "write",
                    "metadata": "read",
                    "models": "read",
                    "packages": "write",
                    "pages": "write",
                    "pull_requests": "write",
                    "repository_hooks": "write",
                    "repository_projects": "write",
                    "security_events": "write",
                    "statuses": "write",
                    "vulnerability_alerts": "read"
                },
                "slug": "github-actions",
                "updated_at": "2025-03-07T16:35:00Z"
            },
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2816949695/reactions"
            },
            "updated_at": "2025-04-20T02:12:31Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2816949695",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
                "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
                "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
                "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
                "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/apps/github-actions",
                "id": 41898282,
                "login": "github-actions[bot]",
                "node_id": "MDM6Qm90NDE4OTgyODI=",
                "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
                "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
                "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
                "type": "Bot",
                "url": "https://api.github.com/users/github-actions%5Bbot%5D",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 4,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/33000/comments",
    "created_at": "2025-03-20T03:54:14Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/33000/events",
    "html_url": "https://github.com/neovim/neovim/issues/33000",
    "id": 2933948986,
    "labels": [
        {
            "color": "FBCA04",
            "default": false,
            "description": "waiting for reply from the author",
            "id": 248229439,
            "name": "needs:response",
            "node_id": "MDU6TGFiZWwyNDgyMjk0Mzk=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/needs:response"
        },
        {
            "color": "FBCA04",
            "default": false,
            "description": "We need minimal steps to reproduce the issue",
            "id": 298863445,
            "name": "needs:repro",
            "node_id": "MDU6TGFiZWwyOTg4NjM0NDU=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/needs:repro"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/33000/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM6u4II6",
    "number": 33000,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/33000/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "not_planned",
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/33000/timeline",
    "title": "unable to convert string arguments of statusline/column to numbers",
    "type": {
        "color": "red",
        "created_at": "2024-01-25T10:10:19Z",
        "description": "An unexpected problem or behavior",
        "id": 597163,
        "is_enabled": true,
        "name": "Bug",
        "node_id": "IT_kwDOAGK_Pc4ACRyr",
        "updated_at": "2024-07-26T10:12:30Z"
    },
    "updated_at": "2025-04-20T02:12:31Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/33000",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/46084773?v=4",
        "events_url": "https://api.github.com/users/HarbingerNight/events{/privacy}",
        "followers_url": "https://api.github.com/users/HarbingerNight/followers",
        "following_url": "https://api.github.com/users/HarbingerNight/following{/other_user}",
        "gists_url": "https://api.github.com/users/HarbingerNight/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/HarbingerNight",
        "id": 46084773,
        "login": "HarbingerNight",
        "node_id": "MDQ6VXNlcjQ2MDg0Nzcz",
        "organizations_url": "https://api.github.com/users/HarbingerNight/orgs",
        "received_events_url": "https://api.github.com/users/HarbingerNight/received_events",
        "repos_url": "https://api.github.com/users/HarbingerNight/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/HarbingerNight/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/HarbingerNight/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/HarbingerNight",
        "user_view_type": "public"
    }
}