{
    "active_lock_reason": null,
    "assignee": {
        "avatar_url": "https://avatars.githubusercontent.com/u/8965202?v=4",
        "events_url": "https://api.github.com/users/gpanders/events{/privacy}",
        "followers_url": "https://api.github.com/users/gpanders/followers",
        "following_url": "https://api.github.com/users/gpanders/following{/other_user}",
        "gists_url": "https://api.github.com/users/gpanders/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/gpanders",
        "id": 8965202,
        "login": "gpanders",
        "node_id": "MDQ6VXNlcjg5NjUyMDI=",
        "organizations_url": "https://api.github.com/users/gpanders/orgs",
        "received_events_url": "https://api.github.com/users/gpanders/received_events",
        "repos_url": "https://api.github.com/users/gpanders/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/gpanders/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/gpanders/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/gpanders",
        "user_view_type": "public"
    },
    "assignees": [
        {
            "avatar_url": "https://avatars.githubusercontent.com/u/8965202?v=4",
            "events_url": "https://api.github.com/users/gpanders/events{/privacy}",
            "followers_url": "https://api.github.com/users/gpanders/followers",
            "following_url": "https://api.github.com/users/gpanders/following{/other_user}",
            "gists_url": "https://api.github.com/users/gpanders/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/gpanders",
            "id": 8965202,
            "login": "gpanders",
            "node_id": "MDQ6VXNlcjg5NjUyMDI=",
            "organizations_url": "https://api.github.com/users/gpanders/orgs",
            "received_events_url": "https://api.github.com/users/gpanders/received_events",
            "repos_url": "https://api.github.com/users/gpanders/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/gpanders/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/gpanders/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/gpanders",
            "user_view_type": "public"
        }
    ],
    "author_association": "NONE",
    "body": "### Problem\n\nIt seems to me that the osc52 copying is run completely on the back-end side. This does not really matter for quick nvim sessions, when both back and TUI parts are running in the same shell. But in cases when the back-end is treated as a server (in my case to preserve my session during disconnects) it could lead to copying via osc52 being broken.\r\n\r\nI believe osc52 functionality should be invoked in the terminal TUI is running in.:\r\n\r\n* Either the logic should be invoked in TUI part of nvim\r\n* Or the back-end should have access to the terminal of the TUI and use it \n\n### Steps to reproduce\n\nYou need 2 terminals, one with (T1) and the other without (T2) osc-52 support.\r\n\r\nIn T1, if you just run `nvim`, and from there\r\n\r\n```\r\n:=require('vim.ui.clipboard.osc52').copy('+')({'test1'})\r\n```\r\n\r\nThe text `test1` should appear on the clipboard.\r\n\r\nNow, start the neovim backend in T2 :\r\n\r\n```bash\r\nnvim --headless --listen xxxxx\r\n```\r\n\r\nAnd connect to it from T1 :\r\n\r\n```bash\r\nnvim --server `fd xxxxx /tmp/nvim.$(id -nu)` --remote-ui\r\n```\r\n\r\nIf you try putting something on the clipboard now using the `require` command above, it does not work any more.\n\n### Expected behavior\n\nBecause we are working in T1 which supports osc-52 , copying should work.\n\n### Neovim version (nvim -v)\n\nNVIM v0.10.0-dev-2658+g0f85aeb47\n\n### Vim (not Nvim) behaves the same?\n\nnot applicable\n\n### Operating system/version\n\nLinux RHEL 7.9\n\n### Terminal name/version\n\nwezterm as T1, xterm as T2\n\n### $TERM environment variable\n\nwezterm and xterm respectively\n\n### Installation\n\nbuild from repo",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "We do check to make sure there is an attached UI connected to stdout:\n\n```lua\nlocal tty = false\nfor _, ui in ipairs(vim.api.nvim_list_uis()) do\n  if ui.chan == 1 and ui.stdout_tty then\n    tty = true\n    break\n  end\nend\n```\n\nbut we only do this once on startup, so this check is not re-performed when a new UI is attached.\n\nPerforming the check before every copy operation is a non-starter because doing the XGETTCAP query every time the user tries to copy would introduce too much latency.\n\nWe have `UIEnter` and `UILeave` which we might be able to use to re-trigger this check. That will at least ensure that we only use OSC 52 when there is a supported terminal attached. It does not address the issue of emitting the escape sequence from the TUI process (unless there's an obvious solution I'm overlooking, that would be a lot more complicated).",
            "created_at": "2025-02-27T14:31:16Z",
            "html_url": "https://github.com/neovim/neovim/issues/28792#issuecomment-2688133968",
            "id": 2688133968,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/28792",
            "node_id": "IC_kwDOAPphoM6gOatQ",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 4,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 4,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2688133968/reactions"
            },
            "updated_at": "2025-02-27T14:31:16Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2688133968",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/8965202?v=4",
                "events_url": "https://api.github.com/users/gpanders/events{/privacy}",
                "followers_url": "https://api.github.com/users/gpanders/followers",
                "following_url": "https://api.github.com/users/gpanders/following{/other_user}",
                "gists_url": "https://api.github.com/users/gpanders/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/gpanders",
                "id": 8965202,
                "login": "gpanders",
                "node_id": "MDQ6VXNlcjg5NjUyMDI=",
                "organizations_url": "https://api.github.com/users/gpanders/orgs",
                "received_events_url": "https://api.github.com/users/gpanders/received_events",
                "repos_url": "https://api.github.com/users/gpanders/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/gpanders/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/gpanders/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/gpanders",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "[Related repro steps](https://github.com/neovim/neovim/issues/35848#issuecomment-3315474401) using `:detach` : \n\n> OSC 52 is broken after *reattaching* to a server, even from the same host-terminal. \n> \n> ```\n> nvim --listen ./foo +'let g:clipboard=\"osc52\"'\n> :detach\n> nvim --remote-ui --server ./foo\n> # clipboard is broken after this\n> ```\n\n",
            "created_at": "2025-09-21T03:41:37Z",
            "html_url": "https://github.com/neovim/neovim/issues/28792#issuecomment-3315474905",
            "id": 3315474905,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/28792",
            "node_id": "IC_kwDOAPphoM7FniHZ",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3315474905/reactions"
            },
            "updated_at": "2025-09-21T03:43:10Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3315474905",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 2,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/28792/comments",
    "created_at": "2024-05-16T21:17:18Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/28792/events",
    "html_url": "https://github.com/neovim/neovim/issues/28792",
    "id": 2301363418,
    "issue_dependencies_summary": {
        "blocked_by": 0,
        "blocking": 0,
        "total_blocked_by": 0,
        "total_blocking": 0
    },
    "labels": [
        {
            "color": "c5def5",
            "default": false,
            "description": "clipboard, paste",
            "id": 186192409,
            "name": "clipboard",
            "node_id": "MDU6TGFiZWwxODYxOTI0MDk=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/clipboard"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "termcodes, terminfo, termcap",
            "id": 197254545,
            "name": "tui",
            "node_id": "MDU6TGFiZWwxOTcyNTQ1NDU=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/tui"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "remote UI, --remote commands, p2p / peer-to-peer",
            "id": 2269137131,
            "name": "remote",
            "node_id": "MDU6TGFiZWwyMjY5MTM3MTMx",
            "url": "https://api.github.com/repos/neovim/neovim/labels/remote"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/28792/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 121,
        "created_at": "2024-05-16T14:11:54Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
            "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
            "followers_url": "https://api.github.com/users/justinmk/followers",
            "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/justinmk",
            "id": 1359421,
            "login": "justinmk",
            "node_id": "MDQ6VXNlcjEzNTk0MjE=",
            "organizations_url": "https://api.github.com/users/justinmk/orgs",
            "received_events_url": "https://api.github.com/users/justinmk/received_events",
            "repos_url": "https://api.github.com/users/justinmk/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/justinmk",
            "user_view_type": "public"
        },
        "description": "",
        "due_on": "2025-12-25T08:00:00Z",
        "html_url": "https://github.com/neovim/neovim/milestone/43",
        "id": 11063573,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/43/labels",
        "node_id": "MI_kwDOAPphoM4AqNEV",
        "number": 43,
        "open_issues": 75,
        "state": "open",
        "title": "0.12",
        "updated_at": "2025-09-22T19:45:09Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/43"
    },
    "node_id": "I_kwDOAPphoM6JLATa",
    "number": 28792,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 13,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 13,
        "url": "https://api.github.com/repos/neovim/neovim/issues/28792/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/28792/timeline",
    "title": "osc52 support should use the TTY of the TUI client, not the backend",
    "type": {
        "color": "red",
        "created_at": "2024-01-25T10:10:19Z",
        "description": "An unexpected problem or behavior",
        "id": 597163,
        "is_enabled": true,
        "name": "Bug",
        "node_id": "IT_kwDOAGK_Pc4ACRyr",
        "updated_at": "2024-07-26T10:12:30Z"
    },
    "updated_at": "2025-09-21T03:43:10Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/28792",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/8959819?v=4",
        "events_url": "https://api.github.com/users/j-xella/events{/privacy}",
        "followers_url": "https://api.github.com/users/j-xella/followers",
        "following_url": "https://api.github.com/users/j-xella/following{/other_user}",
        "gists_url": "https://api.github.com/users/j-xella/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/j-xella",
        "id": 8959819,
        "login": "j-xella",
        "node_id": "MDQ6VXNlcjg5NTk4MTk=",
        "organizations_url": "https://api.github.com/users/j-xella/orgs",
        "received_events_url": "https://api.github.com/users/j-xella/received_events",
        "repos_url": "https://api.github.com/users/j-xella/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/j-xella/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/j-xella/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/j-xella",
        "user_view_type": "public"
    }
}