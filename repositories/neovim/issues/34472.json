{
    "active_lock_reason": null,
    "assignee": {
        "avatar_url": "https://avatars.githubusercontent.com/u/8965202?v=4",
        "events_url": "https://api.github.com/users/gpanders/events{/privacy}",
        "followers_url": "https://api.github.com/users/gpanders/followers",
        "following_url": "https://api.github.com/users/gpanders/following{/other_user}",
        "gists_url": "https://api.github.com/users/gpanders/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/gpanders",
        "id": 8965202,
        "login": "gpanders",
        "node_id": "MDQ6VXNlcjg5NjUyMDI=",
        "organizations_url": "https://api.github.com/users/gpanders/orgs",
        "received_events_url": "https://api.github.com/users/gpanders/received_events",
        "repos_url": "https://api.github.com/users/gpanders/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/gpanders/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/gpanders/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/gpanders",
        "user_view_type": "public"
    },
    "assignees": [
        {
            "avatar_url": "https://avatars.githubusercontent.com/u/8965202?v=4",
            "events_url": "https://api.github.com/users/gpanders/events{/privacy}",
            "followers_url": "https://api.github.com/users/gpanders/followers",
            "following_url": "https://api.github.com/users/gpanders/following{/other_user}",
            "gists_url": "https://api.github.com/users/gpanders/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/gpanders",
            "id": 8965202,
            "login": "gpanders",
            "node_id": "MDQ6VXNlcjg5NjUyMDI=",
            "organizations_url": "https://api.github.com/users/gpanders/orgs",
            "received_events_url": "https://api.github.com/users/gpanders/received_events",
            "repos_url": "https://api.github.com/users/gpanders/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/gpanders/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/gpanders/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/gpanders",
            "user_view_type": "public"
        }
    ],
    "author_association": "NONE",
    "body": "### Problem\n\nAs far as I understand it, neovim is currently using an `XTGETTCAP` query to detect `OSC 52` clipboard support. This is a poorly supported query sequence, though, and can be problematic on older terminals which may end up writing garbage onto the screen (c.f. #28776).\n\nSo instead, I want to suggest you use a [primary device attribute](https://vt100.net/docs/vt510-rm/DA1.html) query, and look for the feature number `52` in the list of supported extensions. This is a recent extension that a number of terminals have agreed to support, and indicates that the terminal is capable of copying to the clipboard with `OSC 52` using a _Pc_ value of `c` or an empty _Pc_ value (support for other _Pc_ values will be terminal specific, so not guaranteed).\n\nThere's no rush to implement this straight away, because I don't think any terminals have actually shipped with this report yet, but I just wanted to raise the issue to see if you would be interested in making use of the functionality once it is actually available.\n\nFor the record, the terminals that have already agreed to support this include Bobcat, Contour, Foot, Wezterm, Windows Terminal, and Xterm.js. We're still working on getting others on board, though, and it would be helpful to know if apps like neovim are actually interested in using this report.\n\n### Expected behavior\n\nAs explained above, the suggestion would be to query the `DA1` report and look for feature number `52`, instead of querying the _Ms_ capability with `XTGETTCAP`, although you may initially want to support both.\n\nAs far as I'm aware, the only terminals reporting _Ms_ in `XTGETTCAP` are Foot, Kitty, and WezTerm, and two of those three have already agreed to support the `DA` extension.",
    "closed_at": "2025-07-17T23:47:34Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/8965202?v=4",
        "events_url": "https://api.github.com/users/gpanders/events{/privacy}",
        "followers_url": "https://api.github.com/users/gpanders/followers",
        "following_url": "https://api.github.com/users/gpanders/following{/other_user}",
        "gists_url": "https://api.github.com/users/gpanders/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/gpanders",
        "id": 8965202,
        "login": "gpanders",
        "node_id": "MDQ6VXNlcjg5NjUyMDI=",
        "organizations_url": "https://api.github.com/users/gpanders/orgs",
        "received_events_url": "https://api.github.com/users/gpanders/received_events",
        "repos_url": "https://api.github.com/users/gpanders/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/gpanders/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/gpanders/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/gpanders",
        "user_view_type": "public"
    },
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "Sounds reasonable, thanks for bringing this up.\n\nTo be clear, we wouldn't do this _instead of_ XTGETTCAP, at least not until support for the DA1 response completely eclipses XTGETTCAP support. What we'd likely do is check DA1 first and fallback to XTGETTCAP to ensure we have maximum coverage.\n\n> can be problematic on older terminals which may end up writing garbage onto the screen\n\nThe only terminal I'm aware of that does this in Apple's Terminal.app, which we have already added workarounds for. And from what I hear, they've actually fixed this in the Tahoe beta. So I'm honestly not too bothered about this.\n\n> As far as I'm aware, the only terminals reporting Ms in XTGETTCAP are Foot, Kitty, and WezTerm, and two of those three have already agreed to support the DA extension.\n\nAdd Ghostty and iTerm2 to this last as well. I can bring this up to the other Ghostty maintainers if you haven't already (EDIT: I [see that you have](https://github.com/ghostty-org/ghostty/discussions/7590)), but a tracking issue for iTerm2 would be nice to have if you're willing to approach them about this.",
            "created_at": "2025-06-16T16:21:56Z",
            "html_url": "https://github.com/neovim/neovim/issues/34472#issuecomment-2977265529",
            "id": 2977265529,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34472",
            "node_id": "IC_kwDOAPphoM6xdXd5",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2977265529/reactions"
            },
            "updated_at": "2025-06-16T16:37:48Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2977265529",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/8965202?v=4",
                "events_url": "https://api.github.com/users/gpanders/events{/privacy}",
                "followers_url": "https://api.github.com/users/gpanders/followers",
                "following_url": "https://api.github.com/users/gpanders/following{/other_user}",
                "gists_url": "https://api.github.com/users/gpanders/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/gpanders",
                "id": 8965202,
                "login": "gpanders",
                "node_id": "MDQ6VXNlcjg5NjUyMDI=",
                "organizations_url": "https://api.github.com/users/gpanders/orgs",
                "received_events_url": "https://api.github.com/users/gpanders/received_events",
                "repos_url": "https://api.github.com/users/gpanders/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/gpanders/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/gpanders/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/gpanders",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "> The only terminal I'm aware of that does this in Apple's Terminal.app, which we have already added workarounds for.\n\nThe Windows 10 console has this problem too. Technically Windows 10 will be unsupported by the end of the year, but that's probably not going to stop people using it for quite some time. There are other terminals too, but that's likely to be the one with most impact.\n\n> Add Ghostty and iTerm2 to this last as well. \n\nI know they both support the `XTGETTCAP` sequence, but as far as I'm aware, neither of them actually report the _Ms_ capability. At least that was the case the last time I tested Ghostty. I'm less certain about iTerm2, because I can't actually test that, but I didn't see any sign of _Ms_ in the source.\n\n> a tracking issue for iTerm2 would be nice to have if you're willing to approach them about this.\n\nI have already been discussing this extension with the iTerm2 maintainer in the thread here: https://github.com/contour-terminal/contour/issues/1761. I think he is basically on board with the idea, but we've got a bit of disagreement regarding the report when clipboard access is disabled.\n\nI'm not sure if I've just misunderstood how the permissions work in iTerm2, but it sounds to me like he wants to report the extension even when `OSC 52` isn't actually going to work, which I think defeats the whole point of this feature. Maybe I'm overreacting to that, though, so it would be good to hear your perspective as an app dev.\n",
            "created_at": "2025-06-16T20:52:50Z",
            "html_url": "https://github.com/neovim/neovim/issues/34472#issuecomment-2978100946",
            "id": 2978100946,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34472",
            "node_id": "IC_kwDOAPphoM6xgjbS",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2978100946/reactions"
            },
            "updated_at": "2025-06-16T20:52:50Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2978100946",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/4181424?v=4",
                "events_url": "https://api.github.com/users/j4james/events{/privacy}",
                "followers_url": "https://api.github.com/users/j4james/followers",
                "following_url": "https://api.github.com/users/j4james/following{/other_user}",
                "gists_url": "https://api.github.com/users/j4james/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/j4james",
                "id": 4181424,
                "login": "j4james",
                "node_id": "MDQ6VXNlcjQxODE0MjQ=",
                "organizations_url": "https://api.github.com/users/j4james/orgs",
                "received_events_url": "https://api.github.com/users/j4james/received_events",
                "repos_url": "https://api.github.com/users/j4james/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/j4james/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/j4james/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/j4james",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "FYI, this extension is now already supported in nightly builds of [Bobcat](https://github.com/ismail-yilmaz/Bobcat), [Contour](https://github.com/contour-terminal/contour/), [Foot](https://codeberg.org/dnkl/foot), [Ghostty](https://github.com/ghostty-org/ghostty), [Kitty](https://github.com/kovidgoyal/kitty), [WezTerm](https://github.com/wezterm/wezterm), and [Windows Terminal](https://github.com/microsoft/terminal/).",
            "created_at": "2025-06-22T16:14:55Z",
            "html_url": "https://github.com/neovim/neovim/issues/34472#issuecomment-2994298500",
            "id": 2994298500,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34472",
            "node_id": "IC_kwDOAPphoM6yeV6E",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2994298500/reactions"
            },
            "updated_at": "2025-07-08T09:27:08Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2994298500",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/4181424?v=4",
                "events_url": "https://api.github.com/users/j4james/events{/privacy}",
                "followers_url": "https://api.github.com/users/j4james/followers",
                "following_url": "https://api.github.com/users/j4james/following{/other_user}",
                "gists_url": "https://api.github.com/users/j4james/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/j4james",
                "id": 4181424,
                "login": "j4james",
                "node_id": "MDQ6VXNlcjQxODE0MjQ=",
                "organizations_url": "https://api.github.com/users/j4james/orgs",
                "received_events_url": "https://api.github.com/users/j4james/received_events",
                "repos_url": "https://api.github.com/users/j4james/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/j4james/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/j4james/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/j4james",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "Somewhat related to this issue, I recently learnt that `XTGETTCAP` is not actually intended to query Termcap/Terminfo definitions (despite what the name may suggest). Other than the special cases (`colors`, `name`, `RGB`, etc.), it only reports keyboard key definitions (things like `kf1` and `kcuu1`). The documentation was recently updated to clarify that.\n\nI could never understand why Xterm reported so few capabilities, but I see now that that was by design. And if other terminals actually followed the Xterm spec, I don't think _any_ of the `XTGETTCAP` queries in neovim would work.",
            "created_at": "2025-07-06T10:29:34Z",
            "html_url": "https://github.com/neovim/neovim/issues/34472#issuecomment-3041298206",
            "id": 3041298206,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34472",
            "node_id": "IC_kwDOAPphoM61Roce",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 1,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3041298206/reactions"
            },
            "updated_at": "2025-07-06T10:29:34Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3041298206",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/4181424?v=4",
                "events_url": "https://api.github.com/users/j4james/events{/privacy}",
                "followers_url": "https://api.github.com/users/j4james/followers",
                "following_url": "https://api.github.com/users/j4james/following{/other_user}",
                "gists_url": "https://api.github.com/users/j4james/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/j4james",
                "id": 4181424,
                "login": "j4james",
                "node_id": "MDQ6VXNlcjQxODE0MjQ=",
                "organizations_url": "https://api.github.com/users/j4james/orgs",
                "received_events_url": "https://api.github.com/users/j4james/received_events",
                "repos_url": "https://api.github.com/users/j4james/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/j4james/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/j4james/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/j4james",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 4,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/34472/comments",
    "created_at": "2025-06-12T15:41:42Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/34472/events",
    "html_url": "https://github.com/neovim/neovim/issues/34472",
    "id": 3140784850,
    "labels": [
        {
            "color": "c5def5",
            "default": false,
            "description": "clipboard, paste",
            "id": 186192409,
            "name": "clipboard",
            "node_id": "MDU6TGFiZWwxODYxOTI0MDk=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/clipboard"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "",
            "id": 197254545,
            "name": "tui",
            "node_id": "MDU6TGFiZWwxOTcyNTQ1NDU=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/tui"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/34472/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 99,
        "created_at": "2024-05-16T14:11:54Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
            "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
            "followers_url": "https://api.github.com/users/justinmk/followers",
            "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/justinmk",
            "id": 1359421,
            "login": "justinmk",
            "node_id": "MDQ6VXNlcjEzNTk0MjE=",
            "organizations_url": "https://api.github.com/users/justinmk/orgs",
            "received_events_url": "https://api.github.com/users/justinmk/received_events",
            "repos_url": "https://api.github.com/users/justinmk/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/justinmk",
            "user_view_type": "public"
        },
        "description": "",
        "due_on": null,
        "html_url": "https://github.com/neovim/neovim/milestone/43",
        "id": 11063573,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/43/labels",
        "node_id": "MI_kwDOAPphoM4AqNEV",
        "number": 43,
        "open_issues": 73,
        "state": "open",
        "title": "0.12",
        "updated_at": "2025-07-19T18:31:48Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/43"
    },
    "node_id": "I_kwDOAPphoM67NJLS",
    "number": 34472,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/34472/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "completed",
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/34472/timeline",
    "title": "Consider using the device attributes report to detect OSC 52 support",
    "type": {
        "color": "blue",
        "created_at": "2024-01-25T10:10:19Z",
        "description": "A request, idea, or new functionality",
        "id": 597167,
        "is_enabled": true,
        "name": "Enhancement",
        "node_id": "IT_kwDOAGK_Pc4ACRyv",
        "updated_at": "2024-07-26T10:12:30Z"
    },
    "updated_at": "2025-07-17T23:47:34Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/34472",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/4181424?v=4",
        "events_url": "https://api.github.com/users/j4james/events{/privacy}",
        "followers_url": "https://api.github.com/users/j4james/followers",
        "following_url": "https://api.github.com/users/j4james/following{/other_user}",
        "gists_url": "https://api.github.com/users/j4james/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/j4james",
        "id": 4181424,
        "login": "j4james",
        "node_id": "MDQ6VXNlcjQxODE0MjQ=",
        "organizations_url": "https://api.github.com/users/j4james/orgs",
        "received_events_url": "https://api.github.com/users/j4james/received_events",
        "repos_url": "https://api.github.com/users/j4james/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/j4james/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/j4james/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/j4james",
        "user_view_type": "public"
    }
}