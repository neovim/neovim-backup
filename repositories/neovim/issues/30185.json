{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\n\nSince switching the default grep program to rg, unfortunately it appears that any `grepprg` values that explicitly call grep no longer work properly. I noticed this originally because I had the following line in one of my local .lvimrc files:\r\n\r\n```\r\nsetlocal grepprg=grep\\ -nIH\\ --exclude=tags\\ --exclude=tags.vim\\ --exclude='*.o*'\\ --exclude='Module.symvers'\\ --exclude='.*.mod.cmd'\\ --exclude='*.mod'\r\n```\r\n\r\nFrom what I can tell - the problem appears to be that when ripgrep is installed on the system (this is a machine I just setup, I wasn't even aware I installed this) neovim doesn't just use it as a default - but it also changes the default value of `grepformat`. As a result - it doesn't process the text output from `grep` correctly, leading to some confusing behavior where it suddenly seems as if the location list has stopped working. Some example screenshots:\r\n\r\n(Before)\r\n\r\n![image](https://github.com/user-attachments/assets/f381479f-0724-4597-921e-c2ccb536f094)\r\n\r\n(After)\r\n\r\n![image2](https://github.com/user-attachments/assets/bf250397-9d33-424a-a322-990430935073)\n\n### Steps to reproduce\n\nnvim --clean\r\n:setlocal grepprg=grep\\ -nIH\r\n:lgrep [some arguments…]\n\n### Expected behavior\n\nI would expect that between upgrades, unless it's documented otherwise: the behavior of grepprg should remain the same. Or at the very least, it should remain the same when the grep binary is explicitly mentioned in the command line…\r\n\r\nConsidering this bug has probably been around for a while of course, I don't think it'd be reasonable for me to ask for the behavior to change! But perhaps it should be documented in https://neovim.io/doc/user/news-0.10.html that `grepformat` also changes and this might change the behavior of custom `grepprg` settings? The page there does mention that the default grep program that gets used is changed, but I don't think this change in behavior is particularly obvious if you're in a situation like me where it's been years since you touched `grepprg` last\n\n### Neovim version (nvim -v)\n\n0.10\n\n### Vim (not Nvim) behaves the same?\n\nno\n\n### Operating system/version\n\nFedora Linux 40\n\n### Terminal name/version\n\nneovim-gtk (first screenshot)/tilix (second screenshot)\n\n### $TERM environment variable\n\nxterm-256color\n\n### Installation\n\ndnf (package manager)",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "A possible solution is to move the default 'grepprg' and 'grepformat' to `runtime/plugin/` instead, and avoid setting them if the user has set 'grepprg' or 'grepformat' in config.",
            "created_at": "2024-08-30T12:17:14Z",
            "html_url": "https://github.com/neovim/neovim/issues/30185#issuecomment-2321053128",
            "id": 2321053128,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30185",
            "node_id": "IC_kwDOAPphoM6KWHXI",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2321053128/reactions"
            },
            "updated_at": "2024-08-30T12:17:55Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2321053128",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> perhaps it should be documented in https://neovim.io/doc/user/news-0.10.html that `grepformat` also changes and this might change the behavior of custom `grepprg` settings?\r\n\r\nIf users set 'grepprg' then they also need to set 'grepformat'. Let's just document that.\r\n\r\n'shell' has similar requirements, you can't just blindly set 'shell' without also updating related settings.",
            "created_at": "2024-08-30T15:45:13Z",
            "html_url": "https://github.com/neovim/neovim/issues/30185#issuecomment-2321710483",
            "id": 2321710483,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30185",
            "node_id": "IC_kwDOAPphoM6KYn2T",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2321710483/reactions"
            },
            "updated_at": "2024-08-30T15:45:13Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2321710483",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 2,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/30185/comments",
    "created_at": "2024-08-29T20:56:02Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/30185/events",
    "html_url": "https://github.com/neovim/neovim/issues/30185",
    "id": 2495560402,
    "labels": [
        {
            "color": "c5def5",
            "default": true,
            "description": "",
            "id": 84744038,
            "name": "documentation",
            "node_id": "MDU6TGFiZWw4NDc0NDAzOA==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/documentation"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "Nvim defaults for options, colorscheme/theme, autocmds/events, etc.",
            "id": 103777064,
            "name": "defaults",
            "node_id": "MDU6TGFiZWwxMDM3NzcwNjQ=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/defaults"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/30185/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 0,
        "created_at": "2025-01-31T23:58:54Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
            "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
            "followers_url": "https://api.github.com/users/zeertzjq/followers",
            "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
            "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/zeertzjq",
            "id": 35768171,
            "login": "zeertzjq",
            "node_id": "MDQ6VXNlcjM1NzY4MTcx",
            "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
            "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
            "repos_url": "https://api.github.com/users/zeertzjq/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/zeertzjq",
            "user_view_type": "public"
        },
        "description": "",
        "due_on": null,
        "html_url": "https://github.com/neovim/neovim/milestone/47",
        "id": 12249765,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/47/labels",
        "node_id": "MI_kwDOAPphoM4Auuql",
        "number": 47,
        "open_issues": 3,
        "state": "open",
        "title": "0.10.5",
        "updated_at": "2025-01-31T23:59:07Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/47"
    },
    "node_id": "I_kwDOAPphoM6UvzrS",
    "number": 30185,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/30185/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/30185/timeline",
    "title": "grepprg settings have unexpected behavior since 0.10",
    "updated_at": "2025-01-31T23:59:06Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/30185",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/1527057?v=4",
        "events_url": "https://api.github.com/users/Lyude/events{/privacy}",
        "followers_url": "https://api.github.com/users/Lyude/followers",
        "following_url": "https://api.github.com/users/Lyude/following{/other_user}",
        "gists_url": "https://api.github.com/users/Lyude/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/Lyude",
        "id": 1527057,
        "login": "Lyude",
        "node_id": "MDQ6VXNlcjE1MjcwNTc=",
        "organizations_url": "https://api.github.com/users/Lyude/orgs",
        "received_events_url": "https://api.github.com/users/Lyude/received_events",
        "repos_url": "https://api.github.com/users/Lyude/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/Lyude/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Lyude/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/Lyude",
        "user_view_type": "public"
    }
}