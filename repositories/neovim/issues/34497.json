{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\n\nUp until neovim 0.11, messages sent in init scripts showed up on the initial screen of the TUI. Since 0.11, they are not shown and can only be accessed with `:messages`. This also seems to affect BufEnter autocmd:s (among others) that trigger on the buffer of a file given as a command line arg.\n\nAfter bisecting, this problem was introduced in e41368f3bc1d, when DEC mode 2048 was introduced as an alternative to SIGWINCH for resizing in terminals that support it. From the [spec of the mode](https://gist.github.com/rockorager/e695fb2924d36b2bcf1fff4a3704bd83), I suspect that the problem is that a resize event is sent as the mode is set, which might be after init scripts/autocmd:s are run.\n\nBefore e876a739eeb1, this also affected `vim.ui.select`. The 0.11 branch is therefore affected more by this issue than the 0.12 branch.\n\n### Steps to reproduce\n\necho 'echom \"test\"' > test_init.vim\nnvim --clean -u test_init.vim\n:mes\n\n### Expected behavior\n\nI am unsure what the expected behavior is, beyond the message showing up in some form. In vim, the init script message pops up before the TUI, which was not the behavior of neovim before e41368f3bc1d.\n\nSimilar issues also seem to affect gui:s (#31034 ). Maybe #23411 is relevant when trying to decide what the intended behavior is?\n\nIs there a reason why messages should not survive a resize, except that that is how vim does it?\n\n### Nvim version (nvim -v)\n\nv0.12.0-dev-598+g17571bc4c0 commit 17571bc4c0bb\n\n### Vim (not Nvim) behaves the same?\n\nno, vim 9.1.1431\n\n### Operating system/version\n\nLinux arch 6.15.2.arch1-1\n\n### Terminal name/version\n\nfoot 1.22.3\n\n### $TERM environment variable\n\nfoot\n\n### Installation\n\nbuilt from repo",
    "closed_at": "2025-06-14T16:10:24Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
        "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
        "followers_url": "https://api.github.com/users/justinmk/followers",
        "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
        "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/justinmk",
        "id": 1359421,
        "login": "justinmk",
        "node_id": "MDQ6VXNlcjEzNTk0MjE=",
        "organizations_url": "https://api.github.com/users/justinmk/orgs",
        "received_events_url": "https://api.github.com/users/justinmk/received_events",
        "repos_url": "https://api.github.com/users/justinmk/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/justinmk",
        "user_view_type": "public"
    },
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "> until neovim 0.11, messages sent in init scripts showed up on the initial screen of the TUI.\n\n> In vim, the init script message pops up before the TUI, which was not the behavior of neovim before [e41368f](https://github.com/neovim/neovim/commit/e41368f3bc1d08d900425608bd199f585d6fce59).\n\nVim's lifecycle supports printing stuff to the host terminal before it has a UI. That is \"nice\" for some cases like this but ultimately makes it hard to reason about the code and behavior. Nvim intentionally does not print anything until the UI is ready.\n\n> Is there a reason why messages should not survive a resize, except that that is how vim does it?\n\nBecause a resize causes a redraw, which can lose messages that are not set as [keep_msg](https://github.com/neovim/neovim/blob/76d213efbee8e6857b3aa397827fa8756a327430/src/nvim/message.c#L1460-L1465) (which itself is fragile since you can only \"keep\" one message...).\n\n\nWe are actively [reworking the messages subsystem](https://github.com/neovim/neovim/issues/27811) so that messages go through a unified subsystem, eliminating all the insane special-cases.\n\nTrying out your repro steps with that new experimental system enabled (note: using `--cmd` instead of `-c` to ensure the new subysystem is enabled before `echom \"test\"` is invoked), I see \"test\" is successfully printed:\n\n```\necho 'echom \"test\"' > test_init.vim\nnvim --clean --cmd \"lua require('vim._extui').enable({})\" -u test_init.vim\n```\n\n",
            "created_at": "2025-06-14T16:10:24Z",
            "html_url": "https://github.com/neovim/neovim/issues/34497#issuecomment-2972851404",
            "id": 2972851404,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34497",
            "node_id": "IC_kwDOAPphoM6xMhzM",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2972851404/reactions"
            },
            "updated_at": "2025-06-14T16:10:24Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2972851404",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 1,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/34497/comments",
    "created_at": "2025-06-14T13:12:44Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/34497/events",
    "html_url": "https://github.com/neovim/neovim/issues/34497",
    "id": 3146157008,
    "labels": [
        {
            "color": "c5def5",
            "default": false,
            "description": "redraw, layout, presentation",
            "id": 718084050,
            "name": "display",
            "node_id": "MDU6TGFiZWw3MTgwODQwNTA=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/display"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "startup, shutdown, attach, detach",
            "id": 870629450,
            "name": "lifecycle",
            "node_id": "MDU6TGFiZWw4NzA2Mjk0NTA=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/lifecycle"
        },
        {
            "color": "C5DEF5",
            "default": false,
            "description": "UI messages, log messages, errors, warnings, feedback",
            "id": 5637083595,
            "name": "messages",
            "node_id": "LA_kwDOAPphoM8AAAABT_8Ryw",
            "url": "https://api.github.com/repos/neovim/neovim/labels/messages"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/34497/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 71,
        "created_at": "2024-05-16T14:11:54Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
            "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
            "followers_url": "https://api.github.com/users/justinmk/followers",
            "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/justinmk",
            "id": 1359421,
            "login": "justinmk",
            "node_id": "MDQ6VXNlcjEzNTk0MjE=",
            "organizations_url": "https://api.github.com/users/justinmk/orgs",
            "received_events_url": "https://api.github.com/users/justinmk/received_events",
            "repos_url": "https://api.github.com/users/justinmk/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/justinmk",
            "user_view_type": "public"
        },
        "description": "",
        "due_on": null,
        "html_url": "https://github.com/neovim/neovim/milestone/43",
        "id": 11063573,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/43/labels",
        "node_id": "MI_kwDOAPphoM4AqNEV",
        "number": 43,
        "open_issues": 68,
        "state": "open",
        "title": "0.12",
        "updated_at": "2025-06-15T10:55:03Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/43"
    },
    "node_id": "I_kwDOAPphoM67hovQ",
    "number": 34497,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/34497/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "completed",
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/34497/timeline",
    "title": ":echomsg message printed from user config is not visible on startup (since Nvim 0.11)",
    "type": {
        "color": "red",
        "created_at": "2024-01-25T10:10:19Z",
        "description": "An unexpected problem or behavior",
        "id": 597163,
        "is_enabled": true,
        "name": "Bug",
        "node_id": "IT_kwDOAGK_Pc4ACRyr",
        "updated_at": "2024-07-26T10:12:30Z"
    },
    "updated_at": "2025-06-14T17:27:39Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/34497",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/29518918?v=4",
        "events_url": "https://api.github.com/users/Fexilus/events{/privacy}",
        "followers_url": "https://api.github.com/users/Fexilus/followers",
        "following_url": "https://api.github.com/users/Fexilus/following{/other_user}",
        "gists_url": "https://api.github.com/users/Fexilus/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/Fexilus",
        "id": 29518918,
        "login": "Fexilus",
        "node_id": "MDQ6VXNlcjI5NTE4OTE4",
        "organizations_url": "https://api.github.com/users/Fexilus/orgs",
        "received_events_url": "https://api.github.com/users/Fexilus/received_events",
        "repos_url": "https://api.github.com/users/Fexilus/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/Fexilus/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Fexilus/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/Fexilus",
        "user_view_type": "public"
    }
}