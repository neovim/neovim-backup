{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\r\n\r\nI'm implementing autoscroll feature for Test Explorer which updates very often. Scrolling this window causes blinking of the cursor:\r\n\r\nhttps://github.com/neovim/neovim/assets/3128467/6b7997cd-c79f-4771-a5c7-ce920eeca183\r\n\r\n\r\n\r\n### Steps to reproduce\r\n\r\n```lua\r\nlocal last_set_cursor_row\r\n\r\nvim.cmd(\"vnew | set filetype=lua\")\r\n\r\nlocal lines = {}\r\nlocal sampleCode = {\r\n  \"for _ = 1, 100 do\",\r\n  \"delay = math.random(20, 50)\",\r\n  \"vim.defer_fn(function()\",\r\n  \"  local random_row = math.random(1, 950)\",\r\n  \"  autoscroll_cursor(random_row)\",\r\n  \"end, offset + delay)\",\r\n  \"}\",\r\n  \"offset = offset + delay\",\r\n  \"\",\r\n}\r\n\r\nfor _ = 1, 500 do\r\n  for _, line in ipairs(sampleCode) do\r\n    table.insert(lines, line)\r\n  end\r\nend\r\n\r\nvim.api.nvim_buf_set_lines(0, 0, -1, false, lines)\r\nlocal bufnr = vim.api.nvim_get_current_buf()\r\n\r\nvim.cmd(\"wincmd p\")\r\n\r\nlocal function autoscroll_cursor(row)\r\n  local winnr = bufnr and vim.fn.win_findbuf(bufnr)[1]\r\n\r\n  if winnr and row and last_set_cursor_row ~= row then\r\n    vim.api.nvim_win_set_cursor(winnr, { row, 0 })\r\n    last_set_cursor_row = row\r\n  end\r\nend\r\n\r\nlocal delay = math.random(50, 100)\r\nlocal offset = 0\r\n\r\nfor _ = 1, 200 do\r\n  delay = math.random(20, 50)\r\n  vim.defer_fn(function()\r\n    local random_row = math.random(1, 950)\r\n    autoscroll_cursor(random_row)\r\n  end, offset + delay)\r\n\r\n  offset = offset + delay\r\nend\r\n\r\n```\r\n\r\nOpen this file in `nvim` and run `:so`.\r\n\r\n### Expected behavior\r\n\r\nCursor should not blink\r\n\r\n### Neovim version (nvim -v)\r\n\r\nv0.9.5 and v0.10.0\r\n\r\n### Vim (not Nvim) behaves the same?\r\n\r\n-\r\n\r\n### Operating system/version\r\n\r\nmacOS 14.4\r\n\r\n### Terminal name/version\r\n\r\niTerm 2\r\n\r\n### $TERM environment variable\r\n\r\nxterm-256\r\n\r\n### Installation\r\n\r\nHomebrew/source code",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "The steps to reproduce don't do anything. `autoscroll_cursor()` is never called.",
            "created_at": "2024-03-25T10:48:06Z",
            "html_url": "https://github.com/neovim/neovim/issues/28023#issuecomment-2017713397",
            "id": 2017713397,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/28023",
            "node_id": "IC_kwDOAPphoM54Q9z1",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2017713397/reactions"
            },
            "updated_at": "2024-03-25T11:56:17Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2017713397",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "I updated steps. I tested it with `nvim --noplugin`. I noticed that it's more significant on:\r\n```\r\nNVIM v0.10.0-dev-2675+g2955c921c\r\nBuild type: RelWithDebInfo\r\nLuaJIT 2.1.1710088188\r\n```\r\n\r\nthan\r\n\r\n```\r\nNVIM v0.9.5\r\nBuild type: Release\r\nLuaJIT 2.1.1710088188\r\n```",
            "created_at": "2024-03-25T11:49:57Z",
            "html_url": "https://github.com/neovim/neovim/issues/28023#issuecomment-2017827865",
            "id": 2017827865,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/28023",
            "node_id": "IC_kwDOAPphoM54RZwZ",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2017827865/reactions"
            },
            "updated_at": "2024-03-25T11:49:57Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2017827865",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3128467?v=4",
                "events_url": "https://api.github.com/users/wojciech-kulik/events{/privacy}",
                "followers_url": "https://api.github.com/users/wojciech-kulik/followers",
                "following_url": "https://api.github.com/users/wojciech-kulik/following{/other_user}",
                "gists_url": "https://api.github.com/users/wojciech-kulik/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/wojciech-kulik",
                "id": 3128467,
                "login": "wojciech-kulik",
                "node_id": "MDQ6VXNlcjMxMjg0Njc=",
                "organizations_url": "https://api.github.com/users/wojciech-kulik/orgs",
                "received_events_url": "https://api.github.com/users/wojciech-kulik/received_events",
                "repos_url": "https://api.github.com/users/wojciech-kulik/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/wojciech-kulik/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/wojciech-kulik/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/wojciech-kulik",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I think this may be a terminal problem. I tried several terminals. I cannot reproduce this on kitty, XTerm, Alacritty, WezTerm, urxvt, Konsole or QTerminal, but can reproduce this on GNOME Terminal, Terminator, Xfce Terminal or LXTerminal.",
            "created_at": "2024-03-25T12:10:58Z",
            "html_url": "https://github.com/neovim/neovim/issues/28023#issuecomment-2017864236",
            "id": 2017864236,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/28023",
            "node_id": "IC_kwDOAPphoM54Rios",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2017864236/reactions"
            },
            "updated_at": "2024-03-25T12:24:54Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2017864236",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Yeah I also tried 4 different terminals but don't see any blinking. If it's more significant on master that is likely due to #27858.",
            "created_at": "2024-03-25T12:16:20Z",
            "html_url": "https://github.com/neovim/neovim/issues/28023#issuecomment-2017872972",
            "id": 2017872972,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/28023",
            "node_id": "IC_kwDOAPphoM54RkxM",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2017872972/reactions"
            },
            "updated_at": "2024-03-25T12:16:20Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2017872972",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "I tired it now on Kitty and Alacritty and it doesn't happen. I was able to reproduce it on iTerm2.",
            "created_at": "2024-03-25T12:21:34Z",
            "html_url": "https://github.com/neovim/neovim/issues/28023#issuecomment-2017882317",
            "id": 2017882317,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/28023",
            "node_id": "IC_kwDOAPphoM54RnDN",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2017882317/reactions"
            },
            "updated_at": "2024-03-25T12:21:34Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2017882317",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3128467?v=4",
                "events_url": "https://api.github.com/users/wojciech-kulik/events{/privacy}",
                "followers_url": "https://api.github.com/users/wojciech-kulik/followers",
                "following_url": "https://api.github.com/users/wojciech-kulik/following{/other_user}",
                "gists_url": "https://api.github.com/users/wojciech-kulik/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/wojciech-kulik",
                "id": 3128467,
                "login": "wojciech-kulik",
                "node_id": "MDQ6VXNlcjMxMjg0Njc=",
                "organizations_url": "https://api.github.com/users/wojciech-kulik/orgs",
                "received_events_url": "https://api.github.com/users/wojciech-kulik/received_events",
                "repos_url": "https://api.github.com/users/wojciech-kulik/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/wojciech-kulik/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/wojciech-kulik/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/wojciech-kulik",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "I guess the label \"needs:repro\" can be removed?",
            "created_at": "2024-03-25T13:45:13Z",
            "html_url": "https://github.com/neovim/neovim/issues/28023#issuecomment-2018041419",
            "id": 2018041419,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/28023",
            "node_id": "IC_kwDOAPphoM54SN5L",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2018041419/reactions"
            },
            "updated_at": "2024-03-25T13:45:13Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2018041419",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3128467?v=4",
                "events_url": "https://api.github.com/users/wojciech-kulik/events{/privacy}",
                "followers_url": "https://api.github.com/users/wojciech-kulik/followers",
                "following_url": "https://api.github.com/users/wojciech-kulik/following{/other_user}",
                "gists_url": "https://api.github.com/users/wojciech-kulik/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/wojciech-kulik",
                "id": 3128467,
                "login": "wojciech-kulik",
                "node_id": "MDQ6VXNlcjMxMjg0Njc=",
                "organizations_url": "https://api.github.com/users/wojciech-kulik/orgs",
                "received_events_url": "https://api.github.com/users/wojciech-kulik/received_events",
                "repos_url": "https://api.github.com/users/wojciech-kulik/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/wojciech-kulik/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/wojciech-kulik/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/wojciech-kulik",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "@wojciech-kulik now that #28235 is merged, can you confirm that #27858 indeed only made it worse and was not the sole reason it happened in the first place? I.e. is this still an issue or can it be closed?",
            "created_at": "2024-04-21T11:06:33Z",
            "html_url": "https://github.com/neovim/neovim/issues/28023#issuecomment-2068004607",
            "id": 2068004607,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/28023",
            "node_id": "IC_kwDOAPphoM57Qz7_",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2068004607/reactions"
            },
            "updated_at": "2024-04-21T11:07:05Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2068004607",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "I see that the problem still occurs",
            "created_at": "2024-04-24T16:24:28Z",
            "html_url": "https://github.com/neovim/neovim/issues/28023#issuecomment-2075364834",
            "id": 2075364834,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/28023",
            "node_id": "IC_kwDOAPphoM57s43i",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2075364834/reactions"
            },
            "updated_at": "2024-04-24T16:24:28Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2075364834",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3128467?v=4",
                "events_url": "https://api.github.com/users/wojciech-kulik/events{/privacy}",
                "followers_url": "https://api.github.com/users/wojciech-kulik/followers",
                "following_url": "https://api.github.com/users/wojciech-kulik/following{/other_user}",
                "gists_url": "https://api.github.com/users/wojciech-kulik/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/wojciech-kulik",
                "id": 3128467,
                "login": "wojciech-kulik",
                "node_id": "MDQ6VXNlcjMxMjg0Njc=",
                "organizations_url": "https://api.github.com/users/wojciech-kulik/orgs",
                "received_events_url": "https://api.github.com/users/wojciech-kulik/received_events",
                "repos_url": "https://api.github.com/users/wojciech-kulik/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/wojciech-kulik/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/wojciech-kulik/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/wojciech-kulik",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 8,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/28023/comments",
    "created_at": "2024-03-25T10:23:36Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/28023/events",
    "html_url": "https://github.com/neovim/neovim/issues/28023",
    "id": 2205392649,
    "labels": [],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/28023/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM6Dc58J",
    "number": 28023,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/28023/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/28023/timeline",
    "title": "Cursor is blinking when using `nvim_win_set_cursor` with another window",
    "type": {
        "color": "red",
        "created_at": "2024-01-25T10:10:19Z",
        "description": "An unexpected problem or behavior",
        "id": 597163,
        "is_enabled": true,
        "name": "Bug",
        "node_id": "IT_kwDOAGK_Pc4ACRyr",
        "updated_at": "2024-07-26T10:12:30Z"
    },
    "updated_at": "2025-07-02T08:35:50Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/28023",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/3128467?v=4",
        "events_url": "https://api.github.com/users/wojciech-kulik/events{/privacy}",
        "followers_url": "https://api.github.com/users/wojciech-kulik/followers",
        "following_url": "https://api.github.com/users/wojciech-kulik/following{/other_user}",
        "gists_url": "https://api.github.com/users/wojciech-kulik/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/wojciech-kulik",
        "id": 3128467,
        "login": "wojciech-kulik",
        "node_id": "MDQ6VXNlcjMxMjg0Njc=",
        "organizations_url": "https://api.github.com/users/wojciech-kulik/orgs",
        "received_events_url": "https://api.github.com/users/wojciech-kulik/received_events",
        "repos_url": "https://api.github.com/users/wojciech-kulik/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/wojciech-kulik/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/wojciech-kulik/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/wojciech-kulik",
        "user_view_type": "public"
    }
}