{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "body": "### Problem\n\nObserved when [building neovim-0.11.1](https://gitlab.alpinelinux.org/alpine/aports/-/merge_requests/83855) on Alpine Linux. Happens on both [aarch64](https://gitlab.alpinelinux.org/alpine/aports/-/jobs/1843011) and [x86_64](https://gitlab.alpinelinux.org/alpine/aports/-/jobs/1843019).\n```\nERROR    1 error, listed below:\nERROR    test/functional/options/defaults_spec.lua @ 961: stdpath() $NVIM_APPNAME relative path\ntest/testutil.lua:155: Pattern does not match.\nPattern:\n[/\\\\]relative%-appname.[^/\\\\]+\nActual:\nstack traceback:\n\ttest/testutil.lua:155: in function 'matches'\n\ttest/functional/options/defaults_spec.lua:977: in function <test/functional/options/defaults_spec.lua:961>\n 56 SKIPPED TESTS\n 1 ERROR\n```\n\n### Steps to reproduce\n\n```shell\nbuild() {\n\tlocal cmakeoptions=\n\tcase \"$CARCH\" in\n\t\tppc64le | riscv64 | s390x | loongarch64) cmakeoptions=\"-DPREFER_LUA=ON\" ;;\n\tesac\n\n\t# DCI_BUILD: See https://github.com/neovim/neovim/issues/22932\n\tcmake -B build -G Ninja \\\n\t\t-DCMAKE_BUILD_TYPE=MinSizeRel \\\n\t\t-DCMAKE_INSTALL_PREFIX=/usr \\\n\t\t-DCMAKE_INSTALL_LIBDIR=lib \\\n\t\t-DENABLE_LTO=TRUE \\\n\t\t-DCMAKE_VERBOSE_MAKEFILE=TRUE \\\n\t\t-DCI_BUILD=OFF \\\n\t\t-DENABLE_TRANSLATIONS=ON \\\n\t\t$cmakeoptions\n\tcmake --build build\n}\n\ncheck() {\n\t# Required by the unit tests but not set on the Alpine GitLab CI.\n\texport USER=\"$(id -un)\"\n\n\t# Without this, the temp directory for the tests exceeds the sun_path\n\t# buffer in sockaddr_un, causing test failures due to path trunctation.\n\texport XDG_RUNTIME_DIR=/tmp\n\n\t# Needed to ensure that neovim finds the tree-parser grammars.\n\tln -Tfs /usr/lib/tree-sitter \"$builddir\"/runtime/parser\n\n\texport TEST_TIMEOUT=12000\n\n\tmsg \"Running unit tests\"\n\tcmake --build build --target unittest\n\n\t# The functional tests are known to fail on 32-bit arches.\n\t# See: https://github.com/neovim/neovim/issues/32230\n\tcase \"$CARCH\" in\n\tarm*|x86) return ;;\n\tesac\n\n\texport TEST_SKIP_FRAGILE=1\n\t# fails on x86_64\n\texport BUSTED_ARGS=\"--filter-out quitting.swapfile.dialog.on.startup\"\n\t# TODO: report upstream\n\tBUSTED_ARGS=\"$BUSTED_ARGS --filter-out TUI.forwards\"\n\tBUSTED_ARGS=\"$BUSTED_ARGS --filter-out TUI.supports.undercurl\"\n\t# https://github.com/neovim/neovim/issues/33908\n\tBUSTED_ARGS=\"$BUSTED_ARGS --filter-out diff.mode.overlapped.diff.blocks\"\n\n\tmsg \"Running functional tests\"\n\tcmake --build build --target functionaltest\n}\n```\n\n### Expected behavior\n\ntest pass\n\n### Nvim version (nvim -v)\n\n0.11.1\n\n### Vim (not Nvim) behaves the same?\n\nn/a\n\n### Operating system/version\n\nAlpine Linux edge, x86_64 and aarch64\n\n### Terminal name/version\n\ndont know. happens in CI\n\n### $TERM environment variable\n\ndont know. happens in CI\n\n### Installation\n\nbuild from source",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [],
    "comments": 0,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/33911/comments",
    "created_at": "2025-05-08T14:32:47Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/33911/events",
    "html_url": "https://github.com/neovim/neovim/issues/33911",
    "id": 3049197007,
    "labels": [
        {
            "color": "c5def5",
            "default": false,
            "description": "",
            "id": 110418643,
            "name": "test",
            "node_id": "MDU6TGFiZWwxMTA0MTg2NDM=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/test"
        },
        {
            "color": "e6e6e6",
            "default": false,
            "description": "packaging and distributing Nvim to users",
            "id": 124686703,
            "name": "distribution",
            "node_id": "MDU6TGFiZWwxMjQ2ODY3MDM=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/distribution"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/33911/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM61vw3P",
    "number": 33911,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/33911/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/33911/timeline",
    "title": "test \"stdpath() $NVIM_APPNAME relative path\" fails on Alpine Linux",
    "type": {
        "color": "red",
        "created_at": "2024-01-25T10:10:19Z",
        "description": "An unexpected problem or behavior",
        "id": 597163,
        "is_enabled": true,
        "name": "Bug",
        "node_id": "IT_kwDOAGK_Pc4ACRyr",
        "updated_at": "2024-07-26T10:12:30Z"
    },
    "updated_at": "2025-05-08T14:35:20Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/33911",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/66357?v=4",
        "events_url": "https://api.github.com/users/ncopa/events{/privacy}",
        "followers_url": "https://api.github.com/users/ncopa/followers",
        "following_url": "https://api.github.com/users/ncopa/following{/other_user}",
        "gists_url": "https://api.github.com/users/ncopa/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/ncopa",
        "id": 66357,
        "login": "ncopa",
        "node_id": "MDQ6VXNlcjY2MzU3",
        "organizations_url": "https://api.github.com/users/ncopa/orgs",
        "received_events_url": "https://api.github.com/users/ncopa/received_events",
        "repos_url": "https://api.github.com/users/ncopa/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/ncopa/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/ncopa/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/ncopa",
        "user_view_type": "public"
    }
}