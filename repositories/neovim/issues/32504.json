{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\n\non the latest release and nightly from before I updated this isn't an issue. `:grep` simply breaks\n\n![Image](https://github.com/user-attachments/assets/68370d95-a124-493a-97eb-a1912cbbe9d3)\n\n### Steps to reproduce\n\nnvim --clean\n:grep foo\n\n### Expected behavior\n\nnormal behavior of :grep\n\n### Nvim version (nvim -v)\n\nv0.11.0-dev-1771+gbd0a65bc15\n\n### Vim (not Nvim) behaves the same?\n\nN/A (vim doesn't call ripgrep)\n\n### Operating system/version\n\nwindows 10 home 22h2\n\n### Terminal name/version\n\ncommand prompt\n\n### $TERM environment variable\n\nnone (windows)\n\n### Installation\n\n scoop install neovim-nightly",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [
        {
            "author_association": "CONTRIBUTOR",
            "body": "Even if using ripgrep for grepprg on vim, this isn't a problem. Gvim 9.0.1576 on windows:\n```\n:verbose set shellpipe?\n  shellpipe=>%s 2>&1\n```\n\nUsing NVIM v0.11.0-dev-1836+g095c0876c2, I can grep again with this workaround:\n```\nset shellpipe=>%s\\ 2>&1\n```\n\n----\n\n@3N4N ecc4d0e435d618828b938d78fbded7fbe1314760 appears to be the breaking change. The commit message says \"Nvim includes `tee` in its Windows package\", but I don't see it in [my scoop install](https://github.com/ScoopInstaller/Versions/blob/master/bucket/neovim-nightly.json) or in nvim-win64.zip from the Github Releases page. Did it get removed from the release package?",
            "created_at": "2025-02-25T20:11:24Z",
            "html_url": "https://github.com/neovim/neovim/issues/32504#issuecomment-2683178459",
            "id": 2683178459,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32504",
            "node_id": "IC_kwDOAPphoM6f7g3b",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2683178459/reactions"
            },
            "updated_at": "2025-02-25T20:11:24Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2683178459",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/43559?v=4",
                "events_url": "https://api.github.com/users/idbrii/events{/privacy}",
                "followers_url": "https://api.github.com/users/idbrii/followers",
                "following_url": "https://api.github.com/users/idbrii/following{/other_user}",
                "gists_url": "https://api.github.com/users/idbrii/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/idbrii",
                "id": 43559,
                "login": "idbrii",
                "node_id": "MDQ6VXNlcjQzNTU5",
                "organizations_url": "https://api.github.com/users/idbrii/orgs",
                "received_events_url": "https://api.github.com/users/idbrii/received_events",
                "repos_url": "https://api.github.com/users/idbrii/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/idbrii/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/idbrii/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/idbrii",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "There still has not been a good justification why `cat` and `tee` was ever included into neovim in the first place IMO. Honestly I'd just use `scoop install coreutils`.",
            "created_at": "2025-02-25T21:37:27Z",
            "html_url": "https://github.com/neovim/neovim/issues/32504#issuecomment-2683353901",
            "id": 2683353901,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32504",
            "node_id": "IC_kwDOAPphoM6f8Lst",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2683353901/reactions"
            },
            "updated_at": "2025-02-25T21:38:55Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2683353901",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/33953936?v=4",
                "events_url": "https://api.github.com/users/dundargoc/events{/privacy}",
                "followers_url": "https://api.github.com/users/dundargoc/followers",
                "following_url": "https://api.github.com/users/dundargoc/following{/other_user}",
                "gists_url": "https://api.github.com/users/dundargoc/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/dundargoc",
                "id": 33953936,
                "login": "dundargoc",
                "node_id": "MDQ6VXNlcjMzOTUzOTM2",
                "organizations_url": "https://api.github.com/users/dundargoc/orgs",
                "received_events_url": "https://api.github.com/users/dundargoc/received_events",
                "repos_url": "https://api.github.com/users/dundargoc/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/dundargoc/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/dundargoc/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/dundargoc",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> There still has not been a good justification why `cat` and `tee` was ever included into neovim in the first place IMO\n\nBecause it's needed by builtin features, like the one reported here. Same reason that `diff.exe` is (or was) included. It's not acceptable that Windows users need to install extra things to get builtin editor features.",
            "created_at": "2025-02-26T11:56:22Z",
            "html_url": "https://github.com/neovim/neovim/issues/32504#issuecomment-2684750815",
            "id": 2684750815,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32504",
            "node_id": "IC_kwDOAPphoM6gBgvf",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 6,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 6,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2684750815/reactions"
            },
            "updated_at": "2025-02-26T11:56:22Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2684750815",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Dafuq, I somehow missed that `:grep` requires `tee`. Welp, I guess that settled that then. What about `cat`, is that required by any builtin editor features?",
            "created_at": "2025-02-26T12:27:47Z",
            "html_url": "https://github.com/neovim/neovim/issues/32504#issuecomment-2684819098",
            "id": 2684819098,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32504",
            "node_id": "IC_kwDOAPphoM6gBxaa",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2684819098/reactions"
            },
            "updated_at": "2025-02-26T12:27:47Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2684819098",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/33953936?v=4",
                "events_url": "https://api.github.com/users/dundargoc/events{/privacy}",
                "followers_url": "https://api.github.com/users/dundargoc/followers",
                "following_url": "https://api.github.com/users/dundargoc/following{/other_user}",
                "gists_url": "https://api.github.com/users/dundargoc/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/dundargoc",
                "id": 33953936,
                "login": "dundargoc",
                "node_id": "MDQ6VXNlcjMzOTUzOTM2",
                "organizations_url": "https://api.github.com/users/dundargoc/orgs",
                "received_events_url": "https://api.github.com/users/dundargoc/received_events",
                "repos_url": "https://api.github.com/users/dundargoc/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/dundargoc/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/dundargoc/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/dundargoc",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> What about `cat`, is that required by any builtin editor features?\n\nWe can leave it out for now. I recall a legacy `jobstart()` use-case for it, which is no longer relevant.",
            "created_at": "2025-02-26T12:38:56Z",
            "html_url": "https://github.com/neovim/neovim/issues/32504#issuecomment-2684843798",
            "id": 2684843798,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32504",
            "node_id": "IC_kwDOAPphoM6gB3cW",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2684843798/reactions"
            },
            "updated_at": "2025-02-26T12:38:56Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2684843798",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "Lack of `tee` also breaks `:make` and compiler features.",
            "created_at": "2025-02-27T23:47:05Z",
            "html_url": "https://github.com/neovim/neovim/issues/32504#issuecomment-2689362865",
            "id": 2689362865,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32504",
            "node_id": "IC_kwDOAPphoM6gTGux",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 4,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 4,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2689362865/reactions"
            },
            "updated_at": "2025-02-27T23:47:05Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2689362865",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/4213509?v=4",
                "events_url": "https://api.github.com/users/qgates/events{/privacy}",
                "followers_url": "https://api.github.com/users/qgates/followers",
                "following_url": "https://api.github.com/users/qgates/following{/other_user}",
                "gists_url": "https://api.github.com/users/qgates/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/qgates",
                "id": 4213509,
                "login": "qgates",
                "node_id": "MDQ6VXNlcjQyMTM1MDk=",
                "organizations_url": "https://api.github.com/users/qgates/orgs",
                "received_events_url": "https://api.github.com/users/qgates/received_events",
                "repos_url": "https://api.github.com/users/qgates/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/qgates/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/qgates/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/qgates",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "On neovim \"NVIM v0.11.0-dev-1999+ge7627db35f\" I was able to get `:grep` on \"Microsoft Windows 11 Pro\" with version \"10.0.22631 Build 22631\" to work with the following `minimum.lua` file for powershell version `5.1 Build 22621 Revision 4391`. \n\n```lua\nvim.o.shell = \"powershell\"\nvim.o.shellcmdflag =\n\t\"-NoLogo -NoProfile -ExecutionPolicy RemoteSigned -Command [Console]::InputEncoding=[Console]::OutputEncoding=[System.Text.Encoding]::Default;\"\nvim.o.shellredir = \"-RedirectStandardOutput %s -NoNewWindow -Wait\"\nvim.o.shellpipe = \"2>&1 | Out-File -Encoding UTF8 %s; exit $LastExitCode\"\nvim.o.shellquote = \"\"\nvim.o.shellxquote = \"\"\n```\n\nIt also works for powershell version 7.4.7 (which I believe is still not installed on windows by default) if you set `vim.o.shell = \"pwsh\"`\n\nPowershell has had \"Tee-Object\" at least since powershell 5.1 according to the docs https://learn.microsoft.com/en-us/powershell/module/microsoft.powershell.utility/tee-object?view=powershell-5.1 and includes the alias tee. As a result, getting `:grep` to work on windows should just be as of setting the proper shell options in neovim.",
            "created_at": "2025-03-15T14:09:20Z",
            "html_url": "https://github.com/neovim/neovim/issues/32504#issuecomment-2726578430",
            "id": 2726578430,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32504",
            "node_id": "IC_kwDOAPphoM6ihEj-",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 1,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2726578430/reactions"
            },
            "updated_at": "2025-03-16T12:46:05Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2726578430",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/51029315?v=4",
                "events_url": "https://api.github.com/users/crwebb85/events{/privacy}",
                "followers_url": "https://api.github.com/users/crwebb85/followers",
                "following_url": "https://api.github.com/users/crwebb85/following{/other_user}",
                "gists_url": "https://api.github.com/users/crwebb85/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/crwebb85",
                "id": 51029315,
                "login": "crwebb85",
                "node_id": "MDQ6VXNlcjUxMDI5MzE1",
                "organizations_url": "https://api.github.com/users/crwebb85/orgs",
                "received_events_url": "https://api.github.com/users/crwebb85/received_events",
                "repos_url": "https://api.github.com/users/crwebb85/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/crwebb85/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/crwebb85/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/crwebb85",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I see that `:help shell-powershell` mentions `tee` in `shellcmdflag`. I assume that uses the powershell alias. In any case, the current `:help shell-powershell` is really cumbersome. If your version doesn't introduce regressions (check the git blame) to the previous motivations for the current form of `:help shell-powershell`, a PR which updates `:help shell-powershell` would be greatly appreciated.",
            "created_at": "2025-03-15T14:29:49Z",
            "html_url": "https://github.com/neovim/neovim/issues/32504#issuecomment-2726635888",
            "id": 2726635888,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32504",
            "node_id": "IC_kwDOAPphoM6ihSlw",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2726635888/reactions"
            },
            "updated_at": "2025-03-16T12:46:09Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2726635888",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Using `:grep` shouldn't require setting a specific shell.",
            "created_at": "2025-03-15T14:38:44Z",
            "html_url": "https://github.com/neovim/neovim/issues/32504#issuecomment-2726668287",
            "id": 2726668287,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32504",
            "node_id": "IC_kwDOAPphoM6ihaf_",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2726668287/reactions"
            },
            "updated_at": "2025-03-15T14:38:44Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2726668287",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "> I see that `:help shell-powershell` mentions `tee` in `shellcmdflag`. I assume that uses the powershell alias. In any case, the current `:help shell-powershell` is really cumbersome. If your version doesn't introduce regressions (check the git blame) to the previous motivations for the current form of `:help shell-powershell`, a PR which updates `:help shell-powershell` would be greatly appreciated.\n\nGood point we probably should update the help page. My minimum.lua uses what I have in my personal config. I believe I got it from someones comment in a github issue so I'm not sure if there are any major functional changes from what is in `:help shell-powershell`.  <strike>After a quick search I think the issue I got it from might be https://github.com/akinsho/toggleterm.nvim/issues/178#issuecomment-1150732966 since it seems to be a vimscript version of what I have. </strike> edit: I actually think I found what I use in my config from https://github.com/akinsho/toggleterm.nvim/wiki/Tips-and-Tricks.\n\n\nAfter some testing I think the minimum number of changes needed to make what shows up in `:help shell-powershell` work with with the grep command would be the following.\n\n```lua\nif vim.fn.executable(\"pwsh\") == 1 then\n\tvim.o.shell = \"pwsh\"\n\tvim.o.shellcmdflag =\n\t\t\"-NoLogo -NonInteractive -ExecutionPolicy RemoteSigned -Command [Console]::InputEncoding=[Console]::OutputEncoding=[System.Text.UTF8Encoding]::new();$PSDefaultParameterValues['Out-File:Encoding']='utf8';$PSStyle.OutputRendering='PlainText';\"\nelse\n\tvim.o.shell = \"powershell\"\n\tvim.o.shellcmdflag =\n\t\t\"-NoLogo -NonInteractive -ExecutionPolicy RemoteSigned -Command [Console]::InputEncoding=[Console]::OutputEncoding=[System.Text.UTF8Encoding]::new();$PSDefaultParameterValues['Out-File:Encoding']='utf8';\"\nend\nvim.o.shellredir = '2>&1 | %%{ \"$_\" } | Out-File %s; exit $LastExitCode'\nvim.o.shellpipe = '2>&1 | %%{ \"$_\" } | tee %s; exit $LastExitCode'\nvim.o.shellquote = \"\"\nvim.o.shellxquote = \"\"\n```\nThe vim.o.shellcmdflag needs two changes. The `Remove-Alias -Force -ErrorAction SilentlyContinue tee;` part needs to be removed since we do want to use the alias. Also, the `$PSStyle.OutputRendering='plaintext';` needs to be removed when using powershell 5.1 because powershell 5.1 does not seem to have the `$PSStyle` variable but that is unrelated to the `tee` issue. ",
            "created_at": "2025-03-15T16:09:25Z",
            "html_url": "https://github.com/neovim/neovim/issues/32504#issuecomment-2726758758",
            "id": 2726758758,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32504",
            "node_id": "IC_kwDOAPphoM6ihwlm",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2726758758/reactions"
            },
            "updated_at": "2025-03-16T12:46:42Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2726758758",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/51029315?v=4",
                "events_url": "https://api.github.com/users/crwebb85/events{/privacy}",
                "followers_url": "https://api.github.com/users/crwebb85/followers",
                "following_url": "https://api.github.com/users/crwebb85/following{/other_user}",
                "gists_url": "https://api.github.com/users/crwebb85/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/crwebb85",
                "id": 51029315,
                "login": "crwebb85",
                "node_id": "MDQ6VXNlcjUxMDI5MzE1",
                "organizations_url": "https://api.github.com/users/crwebb85/orgs",
                "received_events_url": "https://api.github.com/users/crwebb85/received_events",
                "repos_url": "https://api.github.com/users/crwebb85/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/crwebb85/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/crwebb85/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/crwebb85",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "> Using `:grep` shouldn't require setting a specific shell.\n\nTrue, grep should work out of the box for the default shell options for a given OS. \n\nI did some playing around and it seems that if we changed the default shellpipe for windows from `2>&1| tee` to `2>&1 >_ && type _ && type _ > %s` it will work correctly. I based that off of https://stackoverflow.com/a/5333976, and I don't have much experience with the command prompt so someone with more knolwedge should probably validate that that is a correct fix. Alternatively, I think a decent argument could be made to change the default shell options on Windows from using command prompt to using powershell since AFAIK the majority of windows users have moved over to using powershell.",
            "created_at": "2025-03-15T19:43:21Z",
            "html_url": "https://github.com/neovim/neovim/issues/32504#issuecomment-2726960729",
            "id": 2726960729,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32504",
            "node_id": "IC_kwDOAPphoM6iih5Z",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2726960729/reactions"
            },
            "updated_at": "2025-03-15T19:43:21Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2726960729",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/51029315?v=4",
                "events_url": "https://api.github.com/users/crwebb85/events{/privacy}",
                "followers_url": "https://api.github.com/users/crwebb85/followers",
                "following_url": "https://api.github.com/users/crwebb85/following{/other_user}",
                "gists_url": "https://api.github.com/users/crwebb85/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/crwebb85",
                "id": 51029315,
                "login": "crwebb85",
                "node_id": "MDQ6VXNlcjUxMDI5MzE1",
                "organizations_url": "https://api.github.com/users/crwebb85/orgs",
                "received_events_url": "https://api.github.com/users/crwebb85/received_events",
                "repos_url": "https://api.github.com/users/crwebb85/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/crwebb85/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/crwebb85/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/crwebb85",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "To me, the main advantage of using `tee` is that it makes the output visible _during_ execution. Using `&&` will make the output display _after_ the command completes, not as it executes.\n\n----\n\n> a decent argument could be made to change the default shell options on Windows from using command prompt to using powershell since AFAIK the majority of windows users have moved over to using powershell.\n\nIs it a majority or just a vocal minority? I don't use powershell, but I'm not on Matrix/reddit/etc. I was using vim before powershell existed and didn't want my existing scripts/commands to break, but maybe many new vim users immediately switched to the new thing? So there may be many silent old heads who don't expect the default shell to change.\n\nAnd even if we did change to powershell -- which one? 'pwsh' or 'powershell'?",
            "created_at": "2025-03-18T17:23:13Z",
            "html_url": "https://github.com/neovim/neovim/issues/32504#issuecomment-2734116185",
            "id": 2734116185,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32504",
            "node_id": "IC_kwDOAPphoM6i901Z",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 5,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 5,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2734116185/reactions"
            },
            "updated_at": "2025-03-18T17:23:13Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2734116185",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/43559?v=4",
                "events_url": "https://api.github.com/users/idbrii/events{/privacy}",
                "followers_url": "https://api.github.com/users/idbrii/followers",
                "following_url": "https://api.github.com/users/idbrii/following{/other_user}",
                "gists_url": "https://api.github.com/users/idbrii/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/idbrii",
                "id": 43559,
                "login": "idbrii",
                "node_id": "MDQ6VXNlcjQzNTU5",
                "organizations_url": "https://api.github.com/users/idbrii/orgs",
                "received_events_url": "https://api.github.com/users/idbrii/received_events",
                "repos_url": "https://api.github.com/users/idbrii/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/idbrii/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/idbrii/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/idbrii",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "I noticed this today after upgrading to nvim 11 which broke `:make` commands. For anyone looking for an easy temporary workaround and still uses nvim 11, simply copy the `tee.exe` from the previous version directory to the version 11 bin directory.",
            "created_at": "2025-03-31T07:50:10Z",
            "html_url": "https://github.com/neovim/neovim/issues/32504#issuecomment-2765410681",
            "id": 2765410681,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32504",
            "node_id": "IC_kwDOAPphoM6k1NF5",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 4,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 4,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2765410681/reactions"
            },
            "updated_at": "2025-03-31T09:38:57Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2765410681",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11193181?v=4",
                "events_url": "https://api.github.com/users/rjurga/events{/privacy}",
                "followers_url": "https://api.github.com/users/rjurga/followers",
                "following_url": "https://api.github.com/users/rjurga/following{/other_user}",
                "gists_url": "https://api.github.com/users/rjurga/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/rjurga",
                "id": 11193181,
                "login": "rjurga",
                "node_id": "MDQ6VXNlcjExMTkzMTgx",
                "organizations_url": "https://api.github.com/users/rjurga/orgs",
                "received_events_url": "https://api.github.com/users/rjurga/received_events",
                "repos_url": "https://api.github.com/users/rjurga/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/rjurga/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/rjurga/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/rjurga",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "> majority of windows users have moved over to using powershell\n\nI use pwsh as my only shell on all my Windows and Linux systems, but still don't set `let &shell = 'pwsh.exe'` because it makes bang commands noticeably slower. PowerShell is just much heavier shell to start, so if you just want to call executable with arguments, default bash/cmd is way to go. ",
            "created_at": "2025-04-18T08:00:42Z",
            "html_url": "https://github.com/neovim/neovim/issues/32504#issuecomment-2814867971",
            "id": 2814867971,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32504",
            "node_id": "IC_kwDOAPphoM6nx3oD",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2814867971/reactions"
            },
            "updated_at": "2025-04-18T08:00:42Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2814867971",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/26599495?v=4",
                "events_url": "https://api.github.com/users/dkaszews/events{/privacy}",
                "followers_url": "https://api.github.com/users/dkaszews/followers",
                "following_url": "https://api.github.com/users/dkaszews/following{/other_user}",
                "gists_url": "https://api.github.com/users/dkaszews/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/dkaszews",
                "id": 26599495,
                "login": "dkaszews",
                "node_id": "MDQ6VXNlcjI2NTk5NDk1",
                "organizations_url": "https://api.github.com/users/dkaszews/orgs",
                "received_events_url": "https://api.github.com/users/dkaszews/received_events",
                "repos_url": "https://api.github.com/users/dkaszews/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/dkaszews/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/dkaszews/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/dkaszews",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "Any plan on fixing this ? ",
            "created_at": "2025-08-29T23:50:23Z",
            "html_url": "https://github.com/neovim/neovim/issues/32504#issuecomment-3238725017",
            "id": 3238725017,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32504",
            "node_id": "IC_kwDOAPphoM7BCwWZ",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3238725017/reactions"
            },
            "updated_at": "2025-08-29T23:50:23Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3238725017",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/61879190?v=4",
                "events_url": "https://api.github.com/users/rokonio/events{/privacy}",
                "followers_url": "https://api.github.com/users/rokonio/followers",
                "following_url": "https://api.github.com/users/rokonio/following{/other_user}",
                "gists_url": "https://api.github.com/users/rokonio/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/rokonio",
                "id": 61879190,
                "login": "rokonio",
                "node_id": "MDQ6VXNlcjYxODc5MTkw",
                "organizations_url": "https://api.github.com/users/rokonio/orgs",
                "received_events_url": "https://api.github.com/users/rokonio/received_events",
                "repos_url": "https://api.github.com/users/rokonio/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/rokonio/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/rokonio/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/rokonio",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "The plan is either to [restore tee](https://github.com/neovim/neovim/issues/32504#issuecomment-2684750815) (build it from source as part of our build/release process), or include a `tee.cmd` script that perhaps works the same way (would need to confirm that).\n\nPR welcome. I think the first option is easiest, add `tee.c`.",
            "created_at": "2025-08-29T23:57:11Z",
            "html_url": "https://github.com/neovim/neovim/issues/32504#issuecomment-3238730215",
            "id": 3238730215,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32504",
            "node_id": "IC_kwDOAPphoM7BCxnn",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3238730215/reactions"
            },
            "updated_at": "2025-08-29T23:57:11Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3238730215",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 16,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/32504/comments",
    "created_at": "2025-02-18T05:42:42Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/32504/events",
    "html_url": "https://github.com/neovim/neovim/issues/32504",
    "id": 2859410796,
    "issue_dependencies_summary": {
        "blocked_by": 0,
        "blocking": 0,
        "total_blocked_by": 0,
        "total_blocking": 0
    },
    "labels": [
        {
            "color": "d4c5f9",
            "default": false,
            "description": null,
            "id": 109461219,
            "name": "platform:windows",
            "node_id": "MDU6TGFiZWwxMDk0NjEyMTk=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/platform:windows"
        },
        {
            "color": "f9d0c4",
            "default": false,
            "description": "wrong behavior that was introduced in a previous commit (please bisect)",
            "id": 619474658,
            "name": "bug-regression",
            "node_id": "MDU6TGFiZWw2MTk0NzQ2NTg=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug-regression"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/32504/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 6,
        "created_at": "2025-09-02T15:27:06Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
            "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
            "followers_url": "https://api.github.com/users/justinmk/followers",
            "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/justinmk",
            "id": 1359421,
            "login": "justinmk",
            "node_id": "MDQ6VXNlcjEzNTk0MjE=",
            "organizations_url": "https://api.github.com/users/justinmk/orgs",
            "received_events_url": "https://api.github.com/users/justinmk/received_events",
            "repos_url": "https://api.github.com/users/justinmk/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/justinmk",
            "user_view_type": "public"
        },
        "description": "",
        "due_on": null,
        "html_url": "https://github.com/neovim/neovim/milestone/53",
        "id": 13605541,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/53/labels",
        "node_id": "MI_kwDOAPphoM4Az5ql",
        "number": 53,
        "open_issues": 18,
        "state": "open",
        "title": "0.11.5",
        "updated_at": "2025-09-08T22:42:56Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/53"
    },
    "node_id": "I_kwDOAPphoM6qbyVs",
    "number": 32504,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 3,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 2,
        "rocket": 0,
        "total_count": 5,
        "url": "https://api.github.com/repos/neovim/neovim/issues/32504/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/32504/timeline",
    "title": "windows nightly: :grep breaks because tee is not on path",
    "type": {
        "color": "red",
        "created_at": "2024-01-25T10:10:19Z",
        "description": "An unexpected problem or behavior",
        "id": 597163,
        "is_enabled": true,
        "name": "Bug",
        "node_id": "IT_kwDOAGK_Pc4ACRyr",
        "updated_at": "2024-07-26T10:12:30Z"
    },
    "updated_at": "2025-09-02T15:28:27Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/32504",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/63375392?v=4",
        "events_url": "https://api.github.com/users/beaumccartney/events{/privacy}",
        "followers_url": "https://api.github.com/users/beaumccartney/followers",
        "following_url": "https://api.github.com/users/beaumccartney/following{/other_user}",
        "gists_url": "https://api.github.com/users/beaumccartney/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/beaumccartney",
        "id": 63375392,
        "login": "beaumccartney",
        "node_id": "MDQ6VXNlcjYzMzc1Mzky",
        "organizations_url": "https://api.github.com/users/beaumccartney/orgs",
        "received_events_url": "https://api.github.com/users/beaumccartney/received_events",
        "repos_url": "https://api.github.com/users/beaumccartney/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/beaumccartney/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/beaumccartney/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/beaumccartney",
        "user_view_type": "public"
    }
}