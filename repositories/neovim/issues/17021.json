{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "body": "### Feature already in Vim?\n\n_No response_\n\n### Feature description\n\nHere's my problem, I use Windows native `nvim` from Chocolatey in the new Windows terminal with PowerShell and Git for Windows.\r\n\r\nIf I set `$env:EDITOR = 'nvim.exe'` for example (or a path to `nvim.exe`) to have git invoke the `nvim` binary, it starts with `$env:TERM` set to `cygwin` because it's based on MSYS2, which is much much worse than the native terminal support `vtpcon` when `$env:TERM` is unset, the colors are all wrong etc. etc..\r\n\r\nI see no way to override this in `~/.vimrc`, so I am currently using this workaround, I have: \r\n\r\n```powershell\r\n$env:EDITOR = (resolve-path ~/.local/bin/nvim.bat) -replace '\\\\','/'`\r\n```\r\n\r\nin my `$profile` and in `nvim.bat` I have:\r\n\r\n```dosbatch\r\n@echo off\r\nset TERM=\r\n/tools/neovim/neovim/bin/nvim %*\r\n```\r\n\r\nand this works, but this is horrible.\r\n\r\nI realize the actual problem is with Git for Windows, and I will follow up in that project, but it would be nice if I could do something like this in my `~/.vimrc`:\r\n\r\n```vim\r\nif has('nvim') && has('win32')\r\n    let &term='builtin_vtpcon'\r\nendif\r\n```\r\n. I see no way to do something like this at present.",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [
        {
            "author_association": "CONTRIBUTOR",
            "body": "For anyone dealing with this, I found a workaround that does not involve writing an extra `.bat` file, put the following into your `~/.gitconfig`:\r\n\r\n```gitconfig\r\n[core]\r\n    editor = sh -c \"'\"TERM= c:/tools/neovim/Neovim/bin/nvim.exe \\\"$@\\\"\"'\" --\r\n```\r\n\r\n, the path must use forward slashes.",
            "created_at": "2022-01-13T23:43:46Z",
            "html_url": "https://github.com/neovim/neovim/issues/17021#issuecomment-1012619083",
            "id": 1012619083,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/17021",
            "node_id": "IC_kwDOAPphoM48W1dL",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1012619083/reactions"
            },
            "updated_at": "2022-01-13T23:43:46Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1012619083",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/77611?v=4",
                "events_url": "https://api.github.com/users/rkitover/events{/privacy}",
                "followers_url": "https://api.github.com/users/rkitover/followers",
                "following_url": "https://api.github.com/users/rkitover/following{/other_user}",
                "gists_url": "https://api.github.com/users/rkitover/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/rkitover",
                "id": 77611,
                "login": "rkitover",
                "node_id": "MDQ6VXNlcjc3NjEx",
                "organizations_url": "https://api.github.com/users/rkitover/orgs",
                "received_events_url": "https://api.github.com/users/rkitover/received_events",
                "repos_url": "https://api.github.com/users/rkitover/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/rkitover/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/rkitover/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/rkitover",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Opened an issue in the Git for Windows repo:\r\n\r\nhttps://github.com/git-for-windows/git/issues/3629",
            "created_at": "2022-01-14T00:33:25Z",
            "html_url": "https://github.com/neovim/neovim/issues/17021#issuecomment-1012643198",
            "id": 1012643198,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/17021",
            "node_id": "IC_kwDOAPphoM48W7V-",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1012643198/reactions"
            },
            "updated_at": "2022-01-14T00:33:25Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1012643198",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/77611?v=4",
                "events_url": "https://api.github.com/users/rkitover/events{/privacy}",
                "followers_url": "https://api.github.com/users/rkitover/followers",
                "following_url": "https://api.github.com/users/rkitover/following{/other_user}",
                "gists_url": "https://api.github.com/users/rkitover/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/rkitover",
                "id": 77611,
                "login": "rkitover",
                "node_id": "MDQ6VXNlcjc3NjEx",
                "organizations_url": "https://api.github.com/users/rkitover/orgs",
                "received_events_url": "https://api.github.com/users/rkitover/received_events",
                "repos_url": "https://api.github.com/users/rkitover/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/rkitover/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/rkitover/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/rkitover",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Also just realized that regular vim does not have this problem, it ignores `$env:TERM` and still uses `win32` for `&term`.",
            "created_at": "2022-01-14T19:45:02Z",
            "html_url": "https://github.com/neovim/neovim/issues/17021#issuecomment-1013426798",
            "id": 1013426798,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/17021",
            "node_id": "IC_kwDOAPphoM48Z6pu",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1013426798/reactions"
            },
            "updated_at": "2022-01-14T19:45:02Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1013426798",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/77611?v=4",
                "events_url": "https://api.github.com/users/rkitover/events{/privacy}",
                "followers_url": "https://api.github.com/users/rkitover/followers",
                "following_url": "https://api.github.com/users/rkitover/following{/other_user}",
                "gists_url": "https://api.github.com/users/rkitover/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/rkitover",
                "id": 77611,
                "login": "rkitover",
                "node_id": "MDQ6VXNlcjc3NjEx",
                "organizations_url": "https://api.github.com/users/rkitover/orgs",
                "received_events_url": "https://api.github.com/users/rkitover/received_events",
                "repos_url": "https://api.github.com/users/rkitover/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/rkitover/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/rkitover/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/rkitover",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Another workaround for this is setting:\r\n\r\n```powershell\r\n$env:TERM = 'vtpcon'\r\n```\r\n\r\nand that works correctly with Neovim, Git does not modify it in that case.",
            "created_at": "2022-01-15T20:40:33Z",
            "html_url": "https://github.com/neovim/neovim/issues/17021#issuecomment-1013750710",
            "id": 1013750710,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/17021",
            "node_id": "IC_kwDOAPphoM48bJu2",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1013750710/reactions"
            },
            "updated_at": "2022-01-15T20:40:45Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1013750710",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/77611?v=4",
                "events_url": "https://api.github.com/users/rkitover/events{/privacy}",
                "followers_url": "https://api.github.com/users/rkitover/followers",
                "following_url": "https://api.github.com/users/rkitover/following{/other_user}",
                "gists_url": "https://api.github.com/users/rkitover/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/rkitover",
                "id": 77611,
                "login": "rkitover",
                "node_id": "MDQ6VXNlcjc3NjEx",
                "organizations_url": "https://api.github.com/users/rkitover/orgs",
                "received_events_url": "https://api.github.com/users/rkitover/received_events",
                "repos_url": "https://api.github.com/users/rkitover/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/rkitover/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/rkitover/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/rkitover",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Setting:\r\n\r\n```powershell\r\n$env:TERM = 'xterm-truecolor'\r\n```\r\n\r\nalso seems to work correctly, I don't know if that does not include any capabilities of the `vtpcon` driver.",
            "created_at": "2022-01-15T20:53:25Z",
            "html_url": "https://github.com/neovim/neovim/issues/17021#issuecomment-1013752468",
            "id": 1013752468,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/17021",
            "node_id": "IC_kwDOAPphoM48bKKU",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1013752468/reactions"
            },
            "updated_at": "2022-01-15T20:53:25Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1013752468",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/77611?v=4",
                "events_url": "https://api.github.com/users/rkitover/events{/privacy}",
                "followers_url": "https://api.github.com/users/rkitover/followers",
                "following_url": "https://api.github.com/users/rkitover/following{/other_user}",
                "gists_url": "https://api.github.com/users/rkitover/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/rkitover",
                "id": 77611,
                "login": "rkitover",
                "node_id": "MDQ6VXNlcjc3NjEx",
                "organizations_url": "https://api.github.com/users/rkitover/orgs",
                "received_events_url": "https://api.github.com/users/rkitover/received_events",
                "repos_url": "https://api.github.com/users/rkitover/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/rkitover/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/rkitover/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/rkitover",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "So the workaround I settled on is setting:\r\n\r\n```powershell\r\n$env:TERM = 'xterm-256color'\r\n$env:COLORTERM = 'truecolor'\r\n```\r\n\r\n, in my `$profile`. As far as I can tell, everything works fine, including 24 bit color and mouse support. The `$env:COLORTERM` is unnecessary and I set it just in case.\r\n\r\nAs far as I know, this is the most commonly used method on Linux and similar systems as well.\r\n\r\nSee my response in the Git for Windows issue here:\r\n\r\nhttps://github.com/git-for-windows/git/issues/3629",
            "created_at": "2022-01-17T16:03:34Z",
            "html_url": "https://github.com/neovim/neovim/issues/17021#issuecomment-1014692120",
            "id": 1014692120,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/17021",
            "node_id": "IC_kwDOAPphoM48evkY",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1014692120/reactions"
            },
            "updated_at": "2022-01-17T16:03:34Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1014692120",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/77611?v=4",
                "events_url": "https://api.github.com/users/rkitover/events{/privacy}",
                "followers_url": "https://api.github.com/users/rkitover/followers",
                "following_url": "https://api.github.com/users/rkitover/following{/other_user}",
                "gists_url": "https://api.github.com/users/rkitover/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/rkitover",
                "id": 77611,
                "login": "rkitover",
                "node_id": "MDQ6VXNlcjc3NjEx",
                "organizations_url": "https://api.github.com/users/rkitover/orgs",
                "received_events_url": "https://api.github.com/users/rkitover/received_events",
                "repos_url": "https://api.github.com/users/rkitover/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/rkitover/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/rkitover/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/rkitover",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "One of the Windows Terminal developers confirmed that this is a good setting to use, and works around this issue as well.",
            "created_at": "2022-01-28T03:34:09Z",
            "html_url": "https://github.com/neovim/neovim/issues/17021#issuecomment-1023854909",
            "id": 1023854909,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/17021",
            "node_id": "IC_kwDOAPphoM49Bsk9",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1023854909/reactions"
            },
            "updated_at": "2022-01-28T03:34:09Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1023854909",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/77611?v=4",
                "events_url": "https://api.github.com/users/rkitover/events{/privacy}",
                "followers_url": "https://api.github.com/users/rkitover/followers",
                "following_url": "https://api.github.com/users/rkitover/following{/other_user}",
                "gists_url": "https://api.github.com/users/rkitover/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/rkitover",
                "id": 77611,
                "login": "rkitover",
                "node_id": "MDQ6VXNlcjc3NjEx",
                "organizations_url": "https://api.github.com/users/rkitover/orgs",
                "received_events_url": "https://api.github.com/users/rkitover/received_events",
                "repos_url": "https://api.github.com/users/rkitover/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/rkitover/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/rkitover/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/rkitover",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 7,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/17021/comments",
    "created_at": "2022-01-10T01:29:31Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/17021/events",
    "html_url": "https://github.com/neovim/neovim/issues/17021",
    "id": 1097369533,
    "labels": [
        {
            "color": "c2e0c6",
            "default": true,
            "description": "feature request",
            "id": 77997476,
            "name": "enhancement",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3Ng==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/enhancement"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "user system environment (terminal, shell, tmux)",
            "id": 147354524,
            "name": "environment",
            "node_id": "MDU6TGFiZWwxNDczNTQ1MjQ=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/environment"
        },
        {
            "color": "0E8A16",
            "default": false,
            "description": "issue is not fixed but can be circumvented until then",
            "id": 435850181,
            "name": "has:workaround",
            "node_id": "MDU6TGFiZWw0MzU4NTAxODE=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/has:workaround"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "Nvim startup sequence (`:h startup`)",
            "id": 870629450,
            "name": "startup",
            "node_id": "MDU6TGFiZWw4NzA2Mjk0NTA=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/startup"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/17021/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM5BaIe9",
    "number": 17021,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/17021/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/17021/timeline",
    "title": "allow overriding terminal type in ~/.vimrc",
    "updated_at": "2025-01-17T15:59:36Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/17021",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/77611?v=4",
        "events_url": "https://api.github.com/users/rkitover/events{/privacy}",
        "followers_url": "https://api.github.com/users/rkitover/followers",
        "following_url": "https://api.github.com/users/rkitover/following{/other_user}",
        "gists_url": "https://api.github.com/users/rkitover/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/rkitover",
        "id": 77611,
        "login": "rkitover",
        "node_id": "MDQ6VXNlcjc3NjEx",
        "organizations_url": "https://api.github.com/users/rkitover/orgs",
        "received_events_url": "https://api.github.com/users/rkitover/received_events",
        "repos_url": "https://api.github.com/users/rkitover/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/rkitover/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/rkitover/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/rkitover",
        "user_view_type": "public"
    }
}