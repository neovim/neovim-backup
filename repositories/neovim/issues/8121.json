{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "Once upon a time, there was a [bug that was causing small deletions appear in the numbered registers](\r\nhttps://groups.google.com/d/msg/vim_dev/pbN4rAw8LmI/jR54qQjvuOsJ) under some conditions. Then it was fixed.\r\nAnd now there's no way to use such a useful bugfeature.\r\nIngo Karkat who reported this bug also proposed a super-useful option `smalldeletethreshold`, which I'm dying without.\r\nI hope that Neovim development is not so sluggish as Vim development and this feature-request can survive. I even ready to try implementing it...\r\n\r\n### Actual behaviour\r\nDeletions like `d5w` has no history, though it's a kind of a large amount of text. If I use `d5w`, then jump to the insertion place and use `x` to fix a small thing, I'll lose the `d5w`'d text completely.\r\n\r\n### Expected behaviour\r\nI want to set a (non-existing) `smalldeletethreshold` option to 2 so that all deletions larger than `x` are pushed into the numbered registers \"1..\"9.\r\n",
    "closed_at": "2025-06-15T00:22:08Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
        "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
        "followers_url": "https://api.github.com/users/justinmk/followers",
        "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
        "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/justinmk",
        "id": 1359421,
        "login": "justinmk",
        "node_id": "MDQ6VXNlcjEzNTk0MjE=",
        "organizations_url": "https://api.github.com/users/justinmk/orgs",
        "received_events_url": "https://api.github.com/users/justinmk/received_events",
        "repos_url": "https://api.github.com/users/justinmk/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/justinmk",
        "user_view_type": "public"
    },
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "I think vim would accept it if you implemented it with test coverage. We will too.\r\n\r\nPersonally I wish it worked for yanks, not just delete.",
            "created_at": "2018-03-09T11:34:58Z",
            "html_url": "https://github.com/neovim/neovim/issues/8121#issuecomment-371789124",
            "id": 371789124,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/8121",
            "node_id": "MDEyOklzc3VlQ29tbWVudDM3MTc4OTEyNA==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 4,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 4,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/371789124/reactions"
            },
            "updated_at": "2018-03-09T11:34:58Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/371789124",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "I'm afraid my ability for implementation is a little bit overestimated, I've even never done unit testing before...\r\nAnd yes, of course, it should work for yanks. I just noticed that they call everything \"deletions\" when talking about registers.\r\n\r\nThinking about this option, It would be great if it can handle something like \r\n`set smalldeletethreshold=word` or `set smalldeletethreshold=sentence` or even describe the current behavior: `set smalldeletethreshold=line`... This seems a pretty hard task assuming I'm not into the code base at all.\r\n\r\nUPD: But I found the expressions to change ^_^ https://github.com/neovim/neovim/blob/544cef0155ecb006c34e8471733cac6bdfd61989/src/nvim/ops.c#L1390-L1391\r\nhttps://github.com/neovim/neovim/blob/544cef0155ecb006c34e8471733cac6bdfd61989/src/nvim/ops.c#L1403-L1404\r\n\r\nUPD2: And the checklist for a new option\r\nhttps://github.com/neovim/neovim/blob/9cefd83cc7b96d9a20ae8aae5ad5f2c4a02a74f4/src/nvim/option.c#L4-L21\r\n\r\nBut I still don't believe I can do it",
            "created_at": "2018-03-09T11:38:50Z",
            "html_url": "https://github.com/neovim/neovim/issues/8121#issuecomment-371789863",
            "id": 371789863,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/8121",
            "node_id": "MDEyOklzc3VlQ29tbWVudDM3MTc4OTg2Mw==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/371789863/reactions"
            },
            "updated_at": "2018-03-09T12:12:36Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/371789863",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/7802808?v=4",
                "events_url": "https://api.github.com/users/Himura2la/events{/privacy}",
                "followers_url": "https://api.github.com/users/Himura2la/followers",
                "following_url": "https://api.github.com/users/Himura2la/following{/other_user}",
                "gists_url": "https://api.github.com/users/Himura2la/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Himura2la",
                "id": 7802808,
                "login": "Himura2la",
                "node_id": "MDQ6VXNlcjc4MDI4MDg=",
                "organizations_url": "https://api.github.com/users/Himura2la/orgs",
                "received_events_url": "https://api.github.com/users/Himura2la/received_events",
                "repos_url": "https://api.github.com/users/Himura2la/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Himura2la/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Himura2la/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Himura2la",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "@justinmk Sorry, I was wrong about yanking. I'm new to vim and I did not know \"1..\"9 registers are for deletions only. I'm not sure it's good to change this, but now I see that it's definitely not the point of this issue. I think I've implemented the option in its most basic form and I did it global instead of buffer-specific for simplicity. Maybe I could make it buffer-specific",
            "created_at": "2018-03-24T16:36:06Z",
            "html_url": "https://github.com/neovim/neovim/issues/8121#issuecomment-375906159",
            "id": 375906159,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/8121",
            "node_id": "MDEyOklzc3VlQ29tbWVudDM3NTkwNjE1OQ==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/375906159/reactions"
            },
            "updated_at": "2018-03-24T16:36:45Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/375906159",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/7802808?v=4",
                "events_url": "https://api.github.com/users/Himura2la/events{/privacy}",
                "followers_url": "https://api.github.com/users/Himura2la/followers",
                "following_url": "https://api.github.com/users/Himura2la/following{/other_user}",
                "gists_url": "https://api.github.com/users/Himura2la/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Himura2la",
                "id": 7802808,
                "login": "Himura2la",
                "node_id": "MDQ6VXNlcjc4MDI4MDg=",
                "organizations_url": "https://api.github.com/users/Himura2la/orgs",
                "received_events_url": "https://api.github.com/users/Himura2la/received_events",
                "repos_url": "https://api.github.com/users/Himura2la/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Himura2la/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Himura2la/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Himura2la",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "I made this with ChatGPT, which works with what I had in mind (saving each deletion into the numbered registry):\r\n\r\n```\r\nfunction! ShiftAndSetNumberedRegister()\r\n  let temp_content = getreg('\"')\r\n  let temp_type = getregtype('\"')\r\n\r\n  for i in range(9, 1, -1)\r\n    let from_reg = string(i-1)\r\n    let to_reg = string(i)\r\n    let old_content = getreg(from_reg)\r\n    let old_type = getregtype(from_reg)\r\n    call setreg(to_reg, old_content, old_type)\r\n  endfor\r\n\r\n  call setreg('1', temp_content, temp_type)\r\nendfunction\r\n\r\naugroup custom_delete_behavior\r\n  autocmd!\r\n  autocmd TextYankPost * call ShiftAndSetNumberedRegister()\r\naugroup end\r\n```\r\n",
            "created_at": "2023-09-03T12:21:35Z",
            "html_url": "https://github.com/neovim/neovim/issues/8121#issuecomment-1704291374",
            "id": 1704291374,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/8121",
            "node_id": "IC_kwDOAPphoM5llWwu",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1704291374/reactions"
            },
            "updated_at": "2023-09-03T13:44:49Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1704291374",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/91211?v=4",
                "events_url": "https://api.github.com/users/panosl/events{/privacy}",
                "followers_url": "https://api.github.com/users/panosl/followers",
                "following_url": "https://api.github.com/users/panosl/following{/other_user}",
                "gists_url": "https://api.github.com/users/panosl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/panosl",
                "id": 91211,
                "login": "panosl",
                "node_id": "MDQ6VXNlcjkxMjEx",
                "organizations_url": "https://api.github.com/users/panosl/orgs",
                "received_events_url": "https://api.github.com/users/panosl/received_events",
                "repos_url": "https://api.github.com/users/panosl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/panosl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/panosl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/panosl",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "There was a [relevant issue](https://github.com/vim/vim/issues/7756) in the upstream, where it was preliminarily decided against adding a new option for the sake of backwards-compatibility opting instead for adding a new `\"1-` motion for accessing small deletes and `g\"1` for yanks.\r\n\r\nI am not sure that it is really an unwanted breaking change, since it is opt-in and I guess that most plugins dealing with the current behavior are actually the ones trying to mimic similiar options, but also I see that adding new options is bad for testing and stability in general.\r\n\r\nEither way there does not seem to be much progress in this direction, although, both features were requested several times on different platforms.",
            "created_at": "2024-05-04T17:32:38Z",
            "html_url": "https://github.com/neovim/neovim/issues/8121#issuecomment-2094319720",
            "id": 2094319720,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/8121",
            "node_id": "IC_kwDOAPphoM581Mho",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2094319720/reactions"
            },
            "updated_at": "2024-05-04T21:18:54Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2094319720",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/110892040?v=4",
                "events_url": "https://api.github.com/users/myypo/events{/privacy}",
                "followers_url": "https://api.github.com/users/myypo/followers",
                "following_url": "https://api.github.com/users/myypo/following{/other_user}",
                "gists_url": "https://api.github.com/users/myypo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/myypo",
                "id": 110892040,
                "login": "myypo",
                "node_id": "U_kgDOBpwUCA",
                "organizations_url": "https://api.github.com/users/myypo/orgs",
                "received_events_url": "https://api.github.com/users/myypo/received_events",
                "repos_url": "https://api.github.com/users/myypo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/myypo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/myypo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/myypo",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "Yeah second that, i think an option is probably a better approach, having yet another way to delete/yank text into registers to me is too confusing. A treshold option is great, since it allows you to fine tune what you consider a small delete, and by default it will be unset, which will default to the current behavior.",
            "created_at": "2025-05-10T17:44:44Z",
            "html_url": "https://github.com/neovim/neovim/issues/8121#issuecomment-2869058605",
            "id": 2869058605,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/8121",
            "node_id": "IC_kwDOAPphoM6rAlwt",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2869058605/reactions"
            },
            "updated_at": "2025-05-10T17:44:44Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2869058605",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/15955811?v=4",
                "events_url": "https://api.github.com/users/asmodeus812/events{/privacy}",
                "followers_url": "https://api.github.com/users/asmodeus812/followers",
                "following_url": "https://api.github.com/users/asmodeus812/following{/other_user}",
                "gists_url": "https://api.github.com/users/asmodeus812/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/asmodeus812",
                "id": 15955811,
                "login": "asmodeus812",
                "node_id": "MDQ6VXNlcjE1OTU1ODEx",
                "organizations_url": "https://api.github.com/users/asmodeus812/orgs",
                "received_events_url": "https://api.github.com/users/asmodeus812/received_events",
                "repos_url": "https://api.github.com/users/asmodeus812/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/asmodeus812/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/asmodeus812/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/asmodeus812",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "`:help yankring` shows a small but effective example of how to use `TextYankPost` to change what is stored in registers 1-9. I don't see why this needs to be a builtin option.",
            "created_at": "2025-06-15T00:22:08Z",
            "html_url": "https://github.com/neovim/neovim/issues/8121#issuecomment-2973389672",
            "id": 2973389672,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/8121",
            "node_id": "IC_kwDOAPphoM6xOlNo",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2973389672/reactions"
            },
            "updated_at": "2025-06-15T00:22:08Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2973389672",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 7,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/8121/comments",
    "created_at": "2018-03-09T11:31:53Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/8121/events",
    "html_url": "https://github.com/neovim/neovim/issues/8121",
    "id": 303811582,
    "labels": [
        {
            "color": "c2e0c6",
            "default": true,
            "description": "feature request",
            "id": 77997476,
            "name": "enhancement",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3Ng==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/enhancement"
        },
        {
            "color": "C5DEF5",
            "default": false,
            "description": "configuration, settings",
            "id": 4242493821,
            "name": "options",
            "node_id": "LA_kwDOAPphoM7831F9",
            "url": "https://api.github.com/repos/neovim/neovim/labels/options"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/8121/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWUzMDM4MTE1ODI=",
    "number": 8121,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/8121/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "not_planned",
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/8121/timeline",
    "title": "option: use numbered registers for smaller deletions",
    "type": {
        "color": "blue",
        "created_at": "2024-01-25T10:10:19Z",
        "description": "A request, idea, or new functionality",
        "id": 597167,
        "is_enabled": true,
        "name": "Enhancement",
        "node_id": "IT_kwDOAGK_Pc4ACRyv",
        "updated_at": "2024-07-26T10:12:30Z"
    },
    "updated_at": "2025-06-15T00:22:08Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/8121",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/7802808?v=4",
        "events_url": "https://api.github.com/users/Himura2la/events{/privacy}",
        "followers_url": "https://api.github.com/users/Himura2la/followers",
        "following_url": "https://api.github.com/users/Himura2la/following{/other_user}",
        "gists_url": "https://api.github.com/users/Himura2la/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/Himura2la",
        "id": 7802808,
        "login": "Himura2la",
        "node_id": "MDQ6VXNlcjc4MDI4MDg=",
        "organizations_url": "https://api.github.com/users/Himura2la/orgs",
        "received_events_url": "https://api.github.com/users/Himura2la/received_events",
        "repos_url": "https://api.github.com/users/Himura2la/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/Himura2la/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Himura2la/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/Himura2la",
        "user_view_type": "public"
    }
}