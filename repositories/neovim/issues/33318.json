{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "body": "### Problem\n\nThere's no way to set a buffer-local directory. You can set window-local and tab-local directories with `:lcd` and `:tcd` respectively, but there's no `:bcd`. This makes working with multiple projects difficult unless you use tabs or a [vim-rooter](https://github.com/airblade/vim-rooter) style plugin.\n\n\n\n### Expected behavior\n\nIntroduce a `:bcd` command that sets a buffer-local directory.\n\nbuffer-local directories and `vim.fs.root()` can potentially be used as a primitive for \"projects\"\n\nRelated: #8610 \n\nP.S: Emacs has buffer-local directories, but not window-local or tab-local ones.",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "\nGiven the discussion in https://github.com/neovim/neovim/issues/8610, it does seem like this could be a necessary feature. Need feedback from others.\n\nNote also that a requirement is to have an ergonomic way to get the buffer's \"current directory\". At least via `getcwd()`, but also maybe a buffer-local option or variable? (Need to hear comments on that.)",
            "created_at": "2025-04-05T13:13:58Z",
            "html_url": "https://github.com/neovim/neovim/issues/33318#issuecomment-2780718949",
            "id": 2780718949,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33318",
            "node_id": "IC_kwDOAPphoM6lvmdl",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2780718949/reactions"
            },
            "updated_at": "2025-04-05T13:13:58Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2780718949",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "How on earth would this work with the window local directory.\n\nSounds like local options but worse.",
            "created_at": "2025-04-05T13:59:02Z",
            "html_url": "https://github.com/neovim/neovim/issues/33318#issuecomment-2780737092",
            "id": 2780737092,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33318",
            "node_id": "IC_kwDOAPphoM6lvq5E",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2780737092/reactions"
            },
            "updated_at": "2025-04-05T13:59:02Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2780737092",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/7904185?v=4",
                "events_url": "https://api.github.com/users/lewis6991/events{/privacy}",
                "followers_url": "https://api.github.com/users/lewis6991/followers",
                "following_url": "https://api.github.com/users/lewis6991/following{/other_user}",
                "gists_url": "https://api.github.com/users/lewis6991/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/lewis6991",
                "id": 7904185,
                "login": "lewis6991",
                "node_id": "MDQ6VXNlcjc5MDQxODU=",
                "organizations_url": "https://api.github.com/users/lewis6991/orgs",
                "received_events_url": "https://api.github.com/users/lewis6991/received_events",
                "repos_url": "https://api.github.com/users/lewis6991/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/lewis6991/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lewis6991/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/lewis6991",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "> How on earth would this work with the window local directory.\n\nThe same way tab-local directories work with window-local directories. The current hierarchy in vim is this:\n\n1. window-local directories\n2. tab-local directories\n3. the global directory\n\nwindow-local directories override tab-local directories, which override global directories.\n\nA buffer-local directory will likely sit between window-local and tab-local directories. The new hierarchy would then be:\n\n1. window-local directories\n2. buffer-local directories\n3. tab-local directories\n4. the global directory\n  \n> Sounds like local options but worse.\n\nI would've liked if vim exposed directories as an option but we have the `:cd`, `:tcd`, `:lcd` family of commands instead. Creating a `:bcd` command instead of a buffer-local option is more consistent with what vim already offers.",
            "created_at": "2025-04-05T14:18:17Z",
            "html_url": "https://github.com/neovim/neovim/issues/33318#issuecomment-2780745601",
            "id": 2780745601,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33318",
            "node_id": "IC_kwDOAPphoM6lvs-B",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2780745601/reactions"
            },
            "updated_at": "2025-04-05T15:38:20Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2780745601",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/77233589?v=4",
                "events_url": "https://api.github.com/users/msaher/events{/privacy}",
                "followers_url": "https://api.github.com/users/msaher/followers",
                "following_url": "https://api.github.com/users/msaher/following{/other_user}",
                "gists_url": "https://api.github.com/users/msaher/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/msaher",
                "id": 77233589,
                "login": "msaher",
                "node_id": "MDQ6VXNlcjc3MjMzNTg5",
                "organizations_url": "https://api.github.com/users/msaher/orgs",
                "received_events_url": "https://api.github.com/users/msaher/received_events",
                "repos_url": "https://api.github.com/users/msaher/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/msaher/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/msaher/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/msaher",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Aside from projects, directory browsers like `netrw` or [oil.nvim](https://github.com/stevearc/oil.nvim) could benefit from buffer-local directories. Doing `:e ~/somedir/` followed by, say, `:grep` or `:!touch` would run in `~/somedir/` as opposed to the global directory.",
            "created_at": "2025-04-06T08:31:24Z",
            "html_url": "https://github.com/neovim/neovim/issues/33318#issuecomment-2781306387",
            "id": 2781306387,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33318",
            "node_id": "IC_kwDOAPphoM6lx14T",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2781306387/reactions"
            },
            "updated_at": "2025-04-06T08:45:29Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2781306387",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/77233589?v=4",
                "events_url": "https://api.github.com/users/msaher/events{/privacy}",
                "followers_url": "https://api.github.com/users/msaher/followers",
                "following_url": "https://api.github.com/users/msaher/following{/other_user}",
                "gists_url": "https://api.github.com/users/msaher/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/msaher",
                "id": 77233589,
                "login": "msaher",
                "node_id": "MDQ6VXNlcjc3MjMzNTg5",
                "organizations_url": "https://api.github.com/users/msaher/orgs",
                "received_events_url": "https://api.github.com/users/msaher/received_events",
                "repos_url": "https://api.github.com/users/msaher/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/msaher/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/msaher/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/msaher",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "`netrw` can already use the window local directory which isn't hard to change when the buffer is changed. It would probably require the same amount of code as using the buffer local directory.",
            "created_at": "2025-04-06T08:37:43Z",
            "html_url": "https://github.com/neovim/neovim/issues/33318#issuecomment-2781308878",
            "id": 2781308878,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33318",
            "node_id": "IC_kwDOAPphoM6lx2fO",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2781308878/reactions"
            },
            "updated_at": "2025-04-06T08:37:43Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2781308878",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/7904185?v=4",
                "events_url": "https://api.github.com/users/lewis6991/events{/privacy}",
                "followers_url": "https://api.github.com/users/lewis6991/followers",
                "following_url": "https://api.github.com/users/lewis6991/following{/other_user}",
                "gists_url": "https://api.github.com/users/lewis6991/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/lewis6991",
                "id": 7904185,
                "login": "lewis6991",
                "node_id": "MDQ6VXNlcjc5MDQxODU=",
                "organizations_url": "https://api.github.com/users/lewis6991/orgs",
                "received_events_url": "https://api.github.com/users/lewis6991/received_events",
                "repos_url": "https://api.github.com/users/lewis6991/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/lewis6991/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lewis6991/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/lewis6991",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "`netrw` is just given as an example; I'm not suggesting that we change it. But yes, you can emulate buffer-local directories with autocommands that `:cd` on `BufEnter`. That's what vim-rooter style plugins do.",
            "created_at": "2025-04-06T08:49:08Z",
            "html_url": "https://github.com/neovim/neovim/issues/33318#issuecomment-2781313348",
            "id": 2781313348,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33318",
            "node_id": "IC_kwDOAPphoM6lx3lE",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2781313348/reactions"
            },
            "updated_at": "2025-04-06T08:49:08Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2781313348",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/77233589?v=4",
                "events_url": "https://api.github.com/users/msaher/events{/privacy}",
                "followers_url": "https://api.github.com/users/msaher/followers",
                "following_url": "https://api.github.com/users/msaher/following{/other_user}",
                "gists_url": "https://api.github.com/users/msaher/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/msaher",
                "id": 77233589,
                "login": "msaher",
                "node_id": "MDQ6VXNlcjc3MjMzNTg5",
                "organizations_url": "https://api.github.com/users/msaher/orgs",
                "received_events_url": "https://api.github.com/users/msaher/received_events",
                "repos_url": "https://api.github.com/users/msaher/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/msaher/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/msaher/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/msaher",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "> There's no way to set a buffer-local directory. [...] This makes working with multiple projects difficult unless [...]\n\nThe first sentence is not a problem, but a fact before adding `:bcd`. It would be great if you could elaborate more on how you work with multiple projects without tabs?\n\n> Aside from projects, directory browsers like netrw or oil.nvim could benefit from buffer-local directories. Doing :e ~/somedir/ followed by, say, :grep or :!touch would run in ~/somedir/ as opposed to the global directory.\n\nWhat's wrong with this, if you just want to stick to the directory of every buffer:\n\n```vimscript\naugroup Bcd\n  au!\n  au WinEnter * exe 'lcd' '%:p:h'\naugroup END\n```\n\nto target a specific group of buffers by `let b:var`: (probably create a toggle for setting `b:var` to `0`/`1`)\n\n```vimscript\naugroup Bcd\n  au!\n  au WinEnter *\n    \\ if exists('b:bang_lcd') && b:bang_lcd\n    \\ | exe 'lcd' '%:p:h' |\n    \\ endif\naugroup END\n```\n\nOn the other hand, having `:cd`, `:tcd`, `:lcd` does _not_ immediately validate the existence of `:bcd`:\n\n* `:cd` is like treating a group of tabpages as a viewport, which worths a persistent directory.\n* `:tcd` is like treating a group of windows as a viewport, which worths a persistent directory.\n* `:lcd` is like treating a single window as a viewport, which worths a persistent directory.\n* `:bcd` is ... not related to a viewport.\n\nEvery directory of these viewports are **persistent** regardless of those buffers they're carrying. I'm not sure that we can generalize/extend the list with `:bcd` without more considerations.\n\nEdit: add more arguments.",
            "created_at": "2025-09-09T07:32:14Z",
            "html_url": "https://github.com/neovim/neovim/issues/33318#issuecomment-3269312229",
            "id": 3269312229,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33318",
            "node_id": "IC_kwDOAPphoM7C3b7l",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 1,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3269312229/reactions"
            },
            "updated_at": "2025-09-09T07:59:04Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3269312229",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/24765272?v=4",
                "events_url": "https://api.github.com/users/nyngwang/events{/privacy}",
                "followers_url": "https://api.github.com/users/nyngwang/followers",
                "following_url": "https://api.github.com/users/nyngwang/following{/other_user}",
                "gists_url": "https://api.github.com/users/nyngwang/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/nyngwang",
                "id": 24765272,
                "login": "nyngwang",
                "node_id": "MDQ6VXNlcjI0NzY1Mjcy",
                "organizations_url": "https://api.github.com/users/nyngwang/orgs",
                "received_events_url": "https://api.github.com/users/nyngwang/received_events",
                "repos_url": "https://api.github.com/users/nyngwang/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/nyngwang/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/nyngwang/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/nyngwang",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 7,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/33318/comments",
    "created_at": "2025-04-04T20:43:49Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/33318/events",
    "html_url": "https://github.com/neovim/neovim/issues/33318",
    "id": 2973331657,
    "issue_dependencies_summary": {
        "blocked_by": 0,
        "blocking": 0,
        "total_blocked_by": 0,
        "total_blocking": 0
    },
    "labels": [
        {
            "color": "e6e6e6",
            "default": false,
            "description": "Neovim project matters (release process, logo, etc.)",
            "id": 146825875,
            "name": "project-management",
            "node_id": "MDU6TGFiZWwxNDY4MjU4NzU=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/project-management"
        },
        {
            "color": "C5DEF5",
            "default": false,
            "description": "",
            "id": 7421978602,
            "name": "editor",
            "node_id": "LA_kwDOAPphoM8AAAABumJn6g",
            "url": "https://api.github.com/repos/neovim/neovim/labels/editor"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/33318/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM6xOXDJ",
    "number": 33318,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 3,
        "-1": 0,
        "confused": 0,
        "eyes": 2,
        "heart": 2,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 7,
        "url": "https://api.github.com/repos/neovim/neovim/issues/33318/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/33318/timeline",
    "title": "`:bcd` changes buffer local directory",
    "type": {
        "color": "blue",
        "created_at": "2024-01-25T10:10:19Z",
        "description": "A request, idea, or new functionality",
        "id": 597167,
        "is_enabled": true,
        "name": "Enhancement",
        "node_id": "IT_kwDOAGK_Pc4ACRyv",
        "updated_at": "2024-07-26T10:12:30Z"
    },
    "updated_at": "2025-09-11T19:09:04Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/33318",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/77233589?v=4",
        "events_url": "https://api.github.com/users/msaher/events{/privacy}",
        "followers_url": "https://api.github.com/users/msaher/followers",
        "following_url": "https://api.github.com/users/msaher/following{/other_user}",
        "gists_url": "https://api.github.com/users/msaher/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/msaher",
        "id": 77233589,
        "login": "msaher",
        "node_id": "MDQ6VXNlcjc3MjMzNTg5",
        "organizations_url": "https://api.github.com/users/msaher/orgs",
        "received_events_url": "https://api.github.com/users/msaher/received_events",
        "repos_url": "https://api.github.com/users/msaher/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/msaher/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/msaher/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/msaher",
        "user_view_type": "public"
    }
}