{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\n\nWhen LSP responses are slow, popups from functions in `vim.lsp.buf` (e.g. `vim.lsp.buf.hover()`) can appear significantly after the initial call. With the delay, it's easy to move to a different context (different part of the file, or different file entirely) while the LSP request is in-flight and have the popup appear unexpectedly in the wrong place.\r\n\r\nIt's possible to work around this currently by looping through pending LSP client requests and cancelling them, but that's not great IMO. An easy fix for this would be to return the cancel function returned by `vim.lsp.buf_request` from the higher level functions like `vim.lsp.buf.hover()`, but I wonder if those high level functions should just do the cancellation themselves -- I can't see a reason why people would want to have things like stale hovers.\n\n### Expected behavior\n\nHigh level LSP functions that show something to the user should either auto cancel in cases where they're no longer relevant, or expose a simple way to get such functionality via user config.",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "Relates to https://github.com/neovim/neovim/pull/22598#issuecomment-1463367606 \r\n\r\n> With the delay, it's easy to move to a different context (different part of the file, or different file entirely) while the LSP request is in-flight and have the popup appear unexpectedly in the wrong place.\r\n\r\nJust fyi: If moving to a different file, the results from hover get ignored:\r\n\r\nhttps://github.com/neovim/neovim/blob/9084948893f9c1669ab56061c8d04adabbb6c3cf/runtime/lua/vim/lsp/handlers.lua#L354-L357",
            "created_at": "2023-04-02T06:10:40Z",
            "html_url": "https://github.com/neovim/neovim/issues/22852#issuecomment-1493235392",
            "id": 1493235392,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/22852",
            "node_id": "IC_kwDOAPphoM5ZAPbA",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1493235392/reactions"
            },
            "updated_at": "2023-04-02T06:10:40Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1493235392",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/38700?v=4",
                "events_url": "https://api.github.com/users/mfussenegger/events{/privacy}",
                "followers_url": "https://api.github.com/users/mfussenegger/followers",
                "following_url": "https://api.github.com/users/mfussenegger/following{/other_user}",
                "gists_url": "https://api.github.com/users/mfussenegger/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mfussenegger",
                "id": 38700,
                "login": "mfussenegger",
                "node_id": "MDQ6VXNlcjM4NzAw",
                "organizations_url": "https://api.github.com/users/mfussenegger/orgs",
                "received_events_url": "https://api.github.com/users/mfussenegger/received_events",
                "repos_url": "https://api.github.com/users/mfussenegger/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mfussenegger/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mfussenegger/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mfussenegger",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Related (and possibly duplicate of) #29614\n",
            "created_at": "2024-10-31T10:38:59Z",
            "html_url": "https://github.com/neovim/neovim/issues/22852#issuecomment-2449544000",
            "id": 2449544000,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/22852",
            "node_id": "IC_kwDOAPphoM6SARNA",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2449544000/reactions"
            },
            "updated_at": "2024-10-31T10:39:14Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2449544000",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/7904185?v=4",
                "events_url": "https://api.github.com/users/lewis6991/events{/privacy}",
                "followers_url": "https://api.github.com/users/lewis6991/followers",
                "following_url": "https://api.github.com/users/lewis6991/following{/other_user}",
                "gists_url": "https://api.github.com/users/lewis6991/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/lewis6991",
                "id": 7904185,
                "login": "lewis6991",
                "node_id": "MDQ6VXNlcjc5MDQxODU=",
                "organizations_url": "https://api.github.com/users/lewis6991/orgs",
                "received_events_url": "https://api.github.com/users/lewis6991/received_events",
                "repos_url": "https://api.github.com/users/lewis6991/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/lewis6991/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lewis6991/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/lewis6991",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 2,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/22852/comments",
    "created_at": "2023-04-01T15:11:10Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/22852/events",
    "html_url": "https://github.com/neovim/neovim/issues/22852",
    "id": 1650517700,
    "labels": [
        {
            "color": "c2e0c6",
            "default": true,
            "description": "feature request",
            "id": 77997476,
            "name": "enhancement",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3Ng==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/enhancement"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": null,
            "id": 662566370,
            "name": "lsp",
            "node_id": "MDU6TGFiZWw2NjI1NjYzNzA=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/lsp"
        },
        {
            "color": "C5DEF5",
            "default": false,
            "description": "",
            "id": 4457150369,
            "name": "architecture",
            "node_id": "LA_kwDOAPphoM8AAAABCaq3oQ",
            "url": "https://api.github.com/repos/neovim/neovim/labels/architecture"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/22852/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM5iYObE",
    "number": 22852,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/22852/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/22852/timeline",
    "title": "Expose a simple way to cancel LSP requests from `vim.lsp.buf.*`",
    "updated_at": "2025-01-17T15:31:16Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/22852",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/35612334?v=4",
        "events_url": "https://api.github.com/users/joshua-cooper/events{/privacy}",
        "followers_url": "https://api.github.com/users/joshua-cooper/followers",
        "following_url": "https://api.github.com/users/joshua-cooper/following{/other_user}",
        "gists_url": "https://api.github.com/users/joshua-cooper/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/joshua-cooper",
        "id": 35612334,
        "login": "joshua-cooper",
        "node_id": "MDQ6VXNlcjM1NjEyMzM0",
        "organizations_url": "https://api.github.com/users/joshua-cooper/orgs",
        "received_events_url": "https://api.github.com/users/joshua-cooper/received_events",
        "repos_url": "https://api.github.com/users/joshua-cooper/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/joshua-cooper/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/joshua-cooper/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/joshua-cooper",
        "user_view_type": "public"
    }
}