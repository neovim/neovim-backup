{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "MEMBER",
    "body": "### Neovim version (nvim -v)\n\nNVIM v0.9.0-dev-598+g3a519d86b\n\n### Vim (not Nvim) behaves the same?\n\nNo (doesn't have this functionality)\n\n### Operating system/version\n\nEndeavourOS Linux x86_64 (6.1.1-arch1-1)\n\n### Terminal name/version\n\nst-0.9\n\n### $TERM environment variable\n\nst-256color\n\n### Installation\n\nappimage\n\n### How to reproduce the issue\n\n1. Create config file (called here 'init-nightly-job.lua') with the following content:\r\n```lua\r\n_G.new_child_neovim = function(nvim_executable)\r\n  local stdin = vim.loop.new_pipe()\r\n  local stdout = vim.loop.new_pipe()\r\n  local stderr = vim.loop.new_pipe()\r\n\r\n  vim.loop.spawn(nvim_executable or 'nvim', {\r\n    stdio = { stdin, stdout, stderr },\r\n    args = { '--clean', '--listen', '/tmp/nvim.pipe' },\r\n  }, function() end)\r\nend\r\n```\r\n2. Open Neovim nightly with `nvim_nightly_g598 -u init-nightly-job.lua` (assuming `nvim_nightly_g598` is an executable for used Neovim nightly release).\r\n3. `:lua new_child_neovim('nvim_nightly_g598')` . This should open child Neovim process (can be confirmed by looking at list of system processes).\r\n4. `:lua channel = vim.fn.sockconnect('pipe', '/tmp/nvim.pipe', { rpc = true })`. This should create a valid channel.\r\n5. `:lua print(vim.rpcrequest(channel, 'nvim_get_mode'))` . This does not respond.\n\n### Expected behavior\n\nCan get responds from child Neovim process.\r\n\r\nThis works as expected in the following situations:\r\n- With current stable Neovim 0.8.2 release:\r\n    - `nvim_nightly_g598 -u init-nightly-job.lua`\r\n    - `:lua new_child_neovim('nvim_0.8.2')` with `nvim_0.8.2` being Neovim 0.8.2 executable.\r\n    - `:lua channel = vim.fn.sockconnect('pipe', '/tmp/nvim.pipe', { rpc = true })`\r\n    - `:lua print(vim.rpcrequest(channel, 'nvim_get_mode'))`\r\n- When child Neovim nightly is opened directly:\r\n    - `nvim_nightly_g598 --clean --listen /tmp/nvim.pipe`\r\n    - In another terminal:\r\n        - `nvim_nightly_g598 -u NONE`\r\n        - `:lua channel = vim.fn.sockconnect('pipe', '/tmp/nvim.pipe', { rpc = true })`\r\n        - `:lua print(vim.rpcrequest(channel, 'nvim_get_mode'))`\r\n\r\nNote: run `rm /tmp/nvim.pipe` to make it work after running Neovim nightly example.\n\n### Actual behavior\n\nHost process hangs, possibly waiting for answer. Only manually stopping child process can unhang it.\r\n\r\nThis seems to have been working around 4 days ago, so maybe related to recent work on TUI.",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": " https://github.com/neovim/neovim/pull/18375 ",
            "created_at": "2023-01-03T16:22:27Z",
            "html_url": "https://github.com/neovim/neovim/issues/21630#issuecomment-1369964878",
            "id": 1369964878,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21630",
            "node_id": "IC_kwDOAPphoM5RqAFO",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1369964878/reactions"
            },
            "updated_at": "2023-01-03T16:22:27Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1369964878",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "@bfredl, could you, please, share some insights into this? Is this indeed a regression or should this kind of task now be done differently? This disables my CI tests for nightly, so I am eager to get this working.",
            "created_at": "2023-01-10T08:26:47Z",
            "html_url": "https://github.com/neovim/neovim/issues/21630#issuecomment-1376894468",
            "id": 1376894468,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21630",
            "node_id": "IC_kwDOAPphoM5SEb4E",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1376894468/reactions"
            },
            "updated_at": "2023-01-10T08:26:47Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1376894468",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/24854248?v=4",
                "events_url": "https://api.github.com/users/echasnovski/events{/privacy}",
                "followers_url": "https://api.github.com/users/echasnovski/followers",
                "following_url": "https://api.github.com/users/echasnovski/following{/other_user}",
                "gists_url": "https://api.github.com/users/echasnovski/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/echasnovski",
                "id": 24854248,
                "login": "echasnovski",
                "node_id": "MDQ6VXNlcjI0ODU0MjQ4",
                "organizations_url": "https://api.github.com/users/echasnovski/orgs",
                "received_events_url": "https://api.github.com/users/echasnovski/received_events",
                "repos_url": "https://api.github.com/users/echasnovski/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/echasnovski/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/echasnovski/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/echasnovski",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I am working through all the reported regressions from #18375 .",
            "created_at": "2023-01-10T09:21:08Z",
            "html_url": "https://github.com/neovim/neovim/issues/21630#issuecomment-1376956945",
            "id": 1376956945,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21630",
            "node_id": "IC_kwDOAPphoM5SErIR",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1376956945/reactions"
            },
            "updated_at": "2023-01-10T09:21:08Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1376956945",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
                "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
                "followers_url": "https://api.github.com/users/bfredl/followers",
                "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
                "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bfredl",
                "id": 1363104,
                "login": "bfredl",
                "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
                "organizations_url": "https://api.github.com/users/bfredl/orgs",
                "received_events_url": "https://api.github.com/users/bfredl/received_events",
                "repos_url": "https://api.github.com/users/bfredl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bfredl",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "So, this is indeed a regression, understood. Thanks! Will wait patiently.",
            "created_at": "2023-01-10T09:41:01Z",
            "html_url": "https://github.com/neovim/neovim/issues/21630#issuecomment-1376981286",
            "id": 1376981286,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21630",
            "node_id": "IC_kwDOAPphoM5SExEm",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1376981286/reactions"
            },
            "updated_at": "2023-01-10T09:41:01Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1376981286",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/24854248?v=4",
                "events_url": "https://api.github.com/users/echasnovski/events{/privacy}",
                "followers_url": "https://api.github.com/users/echasnovski/followers",
                "following_url": "https://api.github.com/users/echasnovski/following{/other_user}",
                "gists_url": "https://api.github.com/users/echasnovski/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/echasnovski",
                "id": 24854248,
                "login": "echasnovski",
                "node_id": "MDQ6VXNlcjI0ODU0MjQ4",
                "organizations_url": "https://api.github.com/users/echasnovski/orgs",
                "received_events_url": "https://api.github.com/users/echasnovski/received_events",
                "repos_url": "https://api.github.com/users/echasnovski/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/echasnovski/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/echasnovski/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/echasnovski",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "@echasnovski how is stdin `local stdin = vim.loop.new_pipe()` being used ? It seems nvim gets stuck trying to read stdin as a file.  If it is not used at all, I'd suggest add `--headless` flag to the cmdline to avoid this behavior.",
            "created_at": "2023-01-10T10:54:09Z",
            "html_url": "https://github.com/neovim/neovim/issues/21630#issuecomment-1377072909",
            "id": 1377072909,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21630",
            "node_id": "IC_kwDOAPphoM5SFHcN",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1377072909/reactions"
            },
            "updated_at": "2023-01-10T10:54:09Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1377072909",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
                "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
                "followers_url": "https://api.github.com/users/bfredl/followers",
                "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
                "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bfredl",
                "id": 1363104,
                "login": "bfredl",
                "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
                "organizations_url": "https://api.github.com/users/bfredl/orgs",
                "received_events_url": "https://api.github.com/users/bfredl/received_events",
                "repos_url": "https://api.github.com/users/bfredl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bfredl",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> @echasnovski how is stdin `local stdin = vim.loop.new_pipe()` being used ? It seems nvim gets stuck trying to read stdin as a file. If it is not used at all, I'd suggest add `--headless` flag to the cmdline to avoid this behavior.\r\n\r\nThis approach was the result of not wanting to do `--headless` because it altered the behavior (not quite remember how; I think it was something with autocommands among other things). It is used to imitate real Neovim child process for testing and worked quite well for Neovim>=0.5.\r\n\r\nThe whole `stdin, stdout, stderr` was taken from `:h uv.spawn()` example in an attempt to create child Neovim process without dependencies. [Here is more context](https://github.com/echasnovski/mini.nvim/blob/main/lua/mini/test.lua#L1058).\r\n\r\n",
            "created_at": "2023-01-10T11:05:17Z",
            "html_url": "https://github.com/neovim/neovim/issues/21630#issuecomment-1377086270",
            "id": 1377086270,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21630",
            "node_id": "IC_kwDOAPphoM5SFKs-",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1377086270/reactions"
            },
            "updated_at": "2023-01-10T11:05:17Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1377086270",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/24854248?v=4",
                "events_url": "https://api.github.com/users/echasnovski/events{/privacy}",
                "followers_url": "https://api.github.com/users/echasnovski/followers",
                "following_url": "https://api.github.com/users/echasnovski/following{/other_user}",
                "gists_url": "https://api.github.com/users/echasnovski/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/echasnovski",
                "id": 24854248,
                "login": "echasnovski",
                "node_id": "MDQ6VXNlcjI0ODU0MjQ4",
                "organizations_url": "https://api.github.com/users/echasnovski/orgs",
                "received_events_url": "https://api.github.com/users/echasnovski/received_events",
                "repos_url": "https://api.github.com/users/echasnovski/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/echasnovski/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/echasnovski/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/echasnovski",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "you could immediately close stdin after spawning as well.",
            "created_at": "2023-01-10T11:15:04Z",
            "html_url": "https://github.com/neovim/neovim/issues/21630#issuecomment-1377098265",
            "id": 1377098265,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21630",
            "node_id": "IC_kwDOAPphoM5SFNoZ",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1377098265/reactions"
            },
            "updated_at": "2023-01-10T11:15:04Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1377098265",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
                "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
                "followers_url": "https://api.github.com/users/bfredl/followers",
                "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
                "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bfredl",
                "id": 1363104,
                "login": "bfredl",
                "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
                "organizations_url": "https://api.github.com/users/bfredl/orgs",
                "received_events_url": "https://api.github.com/users/bfredl/received_events",
                "repos_url": "https://api.github.com/users/bfredl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bfredl",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> you could immediately close stdin after spawning as well.\r\n\r\nYes, adding `stdin:close()` at the end of function in original post seems to make it work.\r\n\r\nCouple of follow-ups:\r\n- Is it the long term (\"correct\") solution here or just a temporary one?\r\n- Closing `stdout` and `stderr` seems to leave it working. Is it a good practice to also close them after spawn (in case only RPC functionality will be used for communicating)? ",
            "created_at": "2023-01-10T11:26:14Z",
            "html_url": "https://github.com/neovim/neovim/issues/21630#issuecomment-1377111875",
            "id": 1377111875,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21630",
            "node_id": "IC_kwDOAPphoM5SFQ9D",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1377111875/reactions"
            },
            "updated_at": "2023-01-10T11:26:14Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1377111875",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/24854248?v=4",
                "events_url": "https://api.github.com/users/echasnovski/events{/privacy}",
                "followers_url": "https://api.github.com/users/echasnovski/followers",
                "following_url": "https://api.github.com/users/echasnovski/following{/other_user}",
                "gists_url": "https://api.github.com/users/echasnovski/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/echasnovski",
                "id": 24854248,
                "login": "echasnovski",
                "node_id": "MDQ6VXNlcjI0ODU0MjQ4",
                "organizations_url": "https://api.github.com/users/echasnovski/orgs",
                "received_events_url": "https://api.github.com/users/echasnovski/received_events",
                "repos_url": "https://api.github.com/users/echasnovski/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/echasnovski/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/echasnovski/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/echasnovski",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "this approach is expected to work in the long-term. But in addition, we want to simplify this use case by allow stdin from `vim.loop.spawn` to be used for RPC directly (but this will require more work in core).",
            "created_at": "2023-01-10T11:33:37Z",
            "html_url": "https://github.com/neovim/neovim/issues/21630#issuecomment-1377121108",
            "id": 1377121108,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21630",
            "node_id": "IC_kwDOAPphoM5SFTNU",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1377121108/reactions"
            },
            "updated_at": "2023-01-10T11:33:37Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1377121108",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
                "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
                "followers_url": "https://api.github.com/users/bfredl/followers",
                "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
                "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bfredl",
                "id": 1363104,
                "login": "bfredl",
                "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
                "organizations_url": "https://api.github.com/users/bfredl/orgs",
                "received_events_url": "https://api.github.com/users/bfredl/received_events",
                "repos_url": "https://api.github.com/users/bfredl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bfredl",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> you could immediately close stdin after spawning as well.\r\n\r\nJust FYI, this approach doesn't work for Neovim<0.8. Both immediate and not immediate closing works for Neovim 0.8.2. So some conditioning is required.",
            "created_at": "2023-01-10T11:50:27Z",
            "html_url": "https://github.com/neovim/neovim/issues/21630#issuecomment-1377142092",
            "id": 1377142092,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21630",
            "node_id": "IC_kwDOAPphoM5SFYVM",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1377142092/reactions"
            },
            "updated_at": "2023-01-10T11:50:27Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1377142092",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/24854248?v=4",
                "events_url": "https://api.github.com/users/echasnovski/events{/privacy}",
                "followers_url": "https://api.github.com/users/echasnovski/followers",
                "following_url": "https://api.github.com/users/echasnovski/following{/other_user}",
                "gists_url": "https://api.github.com/users/echasnovski/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/echasnovski",
                "id": 24854248,
                "login": "echasnovski",
                "node_id": "MDQ6VXNlcjI0ODU0MjQ4",
                "organizations_url": "https://api.github.com/users/echasnovski/orgs",
                "received_events_url": "https://api.github.com/users/echasnovski/received_events",
                "repos_url": "https://api.github.com/users/echasnovski/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/echasnovski/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/echasnovski/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/echasnovski",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Fixed it on my end. The original issue is not an immediate problem for me now. Thanks again, @bfredl!\r\n\r\nI am hesitant to close this myself, as it might still be an issue.",
            "created_at": "2023-01-10T15:42:24Z",
            "html_url": "https://github.com/neovim/neovim/issues/21630#issuecomment-1377463947",
            "id": 1377463947,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21630",
            "node_id": "IC_kwDOAPphoM5SGm6L",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1377463947/reactions"
            },
            "updated_at": "2023-01-10T15:42:50Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1377463947",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/24854248?v=4",
                "events_url": "https://api.github.com/users/echasnovski/events{/privacy}",
                "followers_url": "https://api.github.com/users/echasnovski/followers",
                "following_url": "https://api.github.com/users/echasnovski/following{/other_user}",
                "gists_url": "https://api.github.com/users/echasnovski/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/echasnovski",
                "id": 24854248,
                "login": "echasnovski",
                "node_id": "MDQ6VXNlcjI0ODU0MjQ4",
                "organizations_url": "https://api.github.com/users/echasnovski/orgs",
                "received_events_url": "https://api.github.com/users/echasnovski/received_events",
                "repos_url": "https://api.github.com/users/echasnovski/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/echasnovski/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/echasnovski/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/echasnovski",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "FYI, this seems to reproduce the same issue:\r\n\r\n- `nvim -u NONE`\r\n- `:lua channel = vim.fn.jobstart({ 'nvim', '--clean' }, { rpc = true })`\r\n- `:lua vim.rpcrequest(channel, 'nvim_get_mode')`. It hangs current Neovim process on nightly (`NVIM v0.9.0-dev-825+g843c9025a`) and segfaults on Neovim 0.8.2.",
            "created_at": "2023-01-29T17:42:16Z",
            "html_url": "https://github.com/neovim/neovim/issues/21630#issuecomment-1407725885",
            "id": 1407725885,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21630",
            "node_id": "IC_kwDOAPphoM5T6DE9",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1407725885/reactions"
            },
            "updated_at": "2024-09-30T12:07:37Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1407725885",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/24854248?v=4",
                "events_url": "https://api.github.com/users/echasnovski/events{/privacy}",
                "followers_url": "https://api.github.com/users/echasnovski/followers",
                "following_url": "https://api.github.com/users/echasnovski/following{/other_user}",
                "gists_url": "https://api.github.com/users/echasnovski/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/echasnovski",
                "id": 24854248,
                "login": "echasnovski",
                "node_id": "MDQ6VXNlcjI0ODU0MjQ4",
                "organizations_url": "https://api.github.com/users/echasnovski/orgs",
                "received_events_url": "https://api.github.com/users/echasnovski/received_events",
                "repos_url": "https://api.github.com/users/echasnovski/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/echasnovski/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/echasnovski/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/echasnovski",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> `:lua channel = vim.fn.jobstart({ 'nvim', '--clean' }, { rpc = true })`\r\n\r\nThis is using stdio as rpc channel when it is not, so it is definitely not going to work. This works:\r\n```vim\r\n:lua channel = vim.fn.jobstart({ 'nvim', '--clean', '--headless', '--embed' }, { rpc = true })\r\n```",
            "created_at": "2023-01-29T23:34:33Z",
            "html_url": "https://github.com/neovim/neovim/issues/21630#issuecomment-1407803424",
            "id": 1407803424,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21630",
            "node_id": "IC_kwDOAPphoM5T6WAg",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1407803424/reactions"
            },
            "updated_at": "2023-01-29T23:34:33Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1407803424",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "A follow-up after testing a solution from #21886.\r\n\r\nUsing this way of opening child process solves the issue:\r\n\r\n```lua\r\n_G.new_child_neovim = function(nvim_executable)\r\n  vim.fn.jobstart({ nvim_executable or 'nvim', '--clean', '--listen', '/tmp/nvim.pipe' }, { pty = true })\r\nend\r\n```\r\n\r\nI don't have problem with this being closed, but I am still not sure if current situation is a desired behavior.",
            "created_at": "2023-02-04T13:17:25Z",
            "html_url": "https://github.com/neovim/neovim/issues/21630#issuecomment-1416748889",
            "id": 1416748889,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21630",
            "node_id": "IC_kwDOAPphoM5Ucd9Z",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1416748889/reactions"
            },
            "updated_at": "2023-02-04T13:17:25Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1416748889",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/24854248?v=4",
                "events_url": "https://api.github.com/users/echasnovski/events{/privacy}",
                "followers_url": "https://api.github.com/users/echasnovski/followers",
                "following_url": "https://api.github.com/users/echasnovski/following{/other_user}",
                "gists_url": "https://api.github.com/users/echasnovski/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/echasnovski",
                "id": 24854248,
                "login": "echasnovski",
                "node_id": "MDQ6VXNlcjI0ODU0MjQ4",
                "organizations_url": "https://api.github.com/users/echasnovski/orgs",
                "received_events_url": "https://api.github.com/users/echasnovski/received_events",
                "repos_url": "https://api.github.com/users/echasnovski/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/echasnovski/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/echasnovski/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/echasnovski",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 14,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/21630/comments",
    "created_at": "2023-01-03T14:09:00Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/21630/events",
    "html_url": "https://github.com/neovim/neovim/issues/21630",
    "id": 1517443627,
    "labels": [
        {
            "color": "c7def8",
            "default": false,
            "description": "channels, RPC, msgpack",
            "id": 242522707,
            "name": "channels-rpc",
            "node_id": "MDU6TGFiZWwyNDI1MjI3MDc=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/channels-rpc"
        },
        {
            "color": "0E8A16",
            "default": false,
            "description": "issue is not fixed but can be circumvented until then",
            "id": 435850181,
            "name": "has:workaround",
            "node_id": "MDU6TGFiZWw0MzU4NTAxODE=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/has:workaround"
        },
        {
            "color": "f9d0c4",
            "default": false,
            "description": "wrong behavior that was introduced in a previous commit (please bisect)",
            "id": 619474658,
            "name": "bug-regression",
            "node_id": "MDU6TGFiZWw2MTk0NzQ2NTg=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug-regression"
        },
        {
            "color": "C5DEF5",
            "default": false,
            "description": "",
            "id": 6212014172,
            "name": "embedding",
            "node_id": "LA_kwDOAPphoM8AAAABckPQXA",
            "url": "https://api.github.com/repos/neovim/neovim/labels/embedding"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/21630/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 0,
        "created_at": "2024-05-16T14:11:54Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
            "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
            "followers_url": "https://api.github.com/users/justinmk/followers",
            "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/justinmk",
            "id": 1359421,
            "login": "justinmk",
            "node_id": "MDQ6VXNlcjEzNTk0MjE=",
            "organizations_url": "https://api.github.com/users/justinmk/orgs",
            "received_events_url": "https://api.github.com/users/justinmk/received_events",
            "repos_url": "https://api.github.com/users/justinmk/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/justinmk",
            "user_view_type": "public"
        },
        "description": "",
        "due_on": null,
        "html_url": "https://github.com/neovim/neovim/milestone/43",
        "id": 11063573,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/43/labels",
        "node_id": "MI_kwDOAPphoM4AqNEV",
        "number": 43,
        "open_issues": 32,
        "state": "open",
        "title": "0.12",
        "updated_at": "2025-02-02T00:25:39Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/43"
    },
    "node_id": "I_kwDOAPphoM5aclor",
    "number": 21630,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/21630/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/21630/timeline",
    "title": "Can't receive an answer from RPC request to Neovim created as child process",
    "updated_at": "2025-02-02T00:10:49Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/21630",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/24854248?v=4",
        "events_url": "https://api.github.com/users/echasnovski/events{/privacy}",
        "followers_url": "https://api.github.com/users/echasnovski/followers",
        "following_url": "https://api.github.com/users/echasnovski/following{/other_user}",
        "gists_url": "https://api.github.com/users/echasnovski/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/echasnovski",
        "id": 24854248,
        "login": "echasnovski",
        "node_id": "MDQ6VXNlcjI0ODU0MjQ4",
        "organizations_url": "https://api.github.com/users/echasnovski/orgs",
        "received_events_url": "https://api.github.com/users/echasnovski/received_events",
        "repos_url": "https://api.github.com/users/echasnovski/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/echasnovski/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/echasnovski/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/echasnovski",
        "user_view_type": "public"
    }
}