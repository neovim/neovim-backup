{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": ":question: \r\n- `nvim --version`: NVIM v0.2.0\r\n- Vim (version: ) behaves differently? ??\r\n- Operating system/version: Current Archlinux\r\n- Terminal name/version: urxvt\r\n- `$TERM`: zsh\r\n\r\n### Steps to reproduce using `nvim -u NORC`\r\n\r\nIn nvim:\r\n\r\n    :tabnew | te\r\n\r\nIn Terminal:\r\n\r\n    exit\r\n\r\n### Actual behaviour\r\nnvim prints `[Process exited 0]` and the next key press closes the buffer.\r\n\r\n### Expected behaviour\r\nKeep the buffer open until I enter `:bd` oder `:q`.\r\n\r\n### Why and when?\r\nI use the terminal window to run tests on my program using\r\n\t\t\r\n    autocmd FileType cpp,c,ada,make nnoremap <buffer> <leader>lv :wa \\| tabnew \\| te make run <CR>\r\n\r\nWhere the make run target will run my program and then exit. To compare the output to the code, I would like to be able switch tabs, but the next key press kills the window.\r\nMatters get even worse, when I use\r\n\r\n    autocmd TermClose * bd!\r\n\r\nas now I cannot even see the output before the window is closed. I usually I like the automatic closing, so a trick to make only certain buffers 'persist' would be even better.\r\n\r\np.S.: I really love nvim! Thank you for all the great work!\r\n",
    "closed_at": "2017-08-09T21:38:12Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
        "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
        "followers_url": "https://api.github.com/users/justinmk/followers",
        "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
        "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/justinmk",
        "id": 1359421,
        "login": "justinmk",
        "node_id": "MDQ6VXNlcjEzNTk0MjE=",
        "organizations_url": "https://api.github.com/users/justinmk/orgs",
        "received_events_url": "https://api.github.com/users/justinmk/received_events",
        "repos_url": "https://api.github.com/users/justinmk/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/justinmk",
        "user_view_type": "public"
    },
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "To avoid the auto-close, just exit to normal-mode via `CTRL-\\ CTRL-N`. See also `:help terminal-emulator` for tips on easier ways to exist terminal-mode.",
            "created_at": "2017-08-09T21:38:12Z",
            "html_url": "https://github.com/neovim/neovim/issues/7144#issuecomment-321388651",
            "id": 321388651,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/7144",
            "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTM4ODY1MQ==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/321388651/reactions"
            },
            "updated_at": "2017-08-09T21:38:12Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/321388651",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "> To avoid the auto-close, just exit to normal-mode via `CTRL-\\ CTRL-N`. See also `:help terminal-emulator` for tips on easier ways to exist terminal-mode.\r\n\r\nIn the same spirit one could tell \"run shell in terminal, not in editor\". Just switching to \"normal mode\" keeps all the PTY associated programs running and thus it's _not a proper solution_ to the question in question which was titled as \"Keep the terminal buffer open **after the shell closes**\".",
            "created_at": "2022-04-20T02:56:11Z",
            "html_url": "https://github.com/neovim/neovim/issues/7144#issuecomment-1103419125",
            "id": 1103419125,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/7144",
            "node_id": "IC_kwDOAPphoM5BxNb1",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1103419125/reactions"
            },
            "updated_at": "2022-04-20T02:56:11Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1103419125",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/600779?v=4",
                "events_url": "https://api.github.com/users/poige/events{/privacy}",
                "followers_url": "https://api.github.com/users/poige/followers",
                "following_url": "https://api.github.com/users/poige/following{/other_user}",
                "gists_url": "https://api.github.com/users/poige/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/poige",
                "id": 600779,
                "login": "poige",
                "node_id": "MDQ6VXNlcjYwMDc3OQ==",
                "organizations_url": "https://api.github.com/users/poige/orgs",
                "received_events_url": "https://api.github.com/users/poige/received_events",
                "repos_url": "https://api.github.com/users/poige/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/poige/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/poige/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/poige",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "you can use an autocommand to disable mappings that switch to terminal-mode.\n\n```lua\nvim.api.nvim_create_autocmd(\"TermClose\", {\n\tcallback = function(data)\n        if not api.nvim_buf_is_loaded(data.buf) then\n            return\n        end\n        vim.keymap.set(\"n\", \"i\", \"<nop>\", { buffer = data.buf })\n        vim.keymap.set(\"n\", \"I\", \"<nop>\", { buffer = data.buf })\n        vim.keymap.set(\"n\", \"o\", \"<nop>\", { buffer = data.buf })\n        vim.keymap.set(\"n\", \"O\", \"<nop>\", { buffer = data.buf })\n        vim.keymap.set(\"n\", \"a\", \"<nop>\", { buffer = data.buf })\n        vim.keymap.set(\"n\", \"A\", \"<nop>\", { buffer = data.buf })\n\tvim.cmd.stopinsert()\n    end\n})\n```",
            "created_at": "2025-04-06T12:30:47Z",
            "html_url": "https://github.com/neovim/neovim/issues/7144#issuecomment-2781399423",
            "id": 2781399423,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/7144",
            "node_id": "IC_kwDOAPphoM6lyMl_",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2781399423/reactions"
            },
            "updated_at": "2025-04-06T12:30:47Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2781399423",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/77233589?v=4",
                "events_url": "https://api.github.com/users/msaher/events{/privacy}",
                "followers_url": "https://api.github.com/users/msaher/followers",
                "following_url": "https://api.github.com/users/msaher/following{/other_user}",
                "gists_url": "https://api.github.com/users/msaher/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/msaher",
                "id": 77233589,
                "login": "msaher",
                "node_id": "MDQ6VXNlcjc3MjMzNTg5",
                "organizations_url": "https://api.github.com/users/msaher/orgs",
                "received_events_url": "https://api.github.com/users/msaher/received_events",
                "repos_url": "https://api.github.com/users/msaher/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/msaher/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/msaher/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/msaher",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "Can you re-open this issue?\n\nThe `CTRL-\\ CTRL-N` is not actually a solution since I use the terminal to run an interactive process that automatically exits at ends.\n\nThe autocommand to disable the mode switch after the terminal close is sub-optimal since I can not edit the buffer.\n\nMy use case is similar to the OP: a test program (that asks what to test at the begin). I want to be able to edit the result to make a more human readable report before send it by mail. Currently I have to copy-paste all the session in another buffer.\n\nMoreover, keeping the buffer until the user explicitly ask to close it, just seems the correct behaviour to me (and it would be simple to write a configuration that revert to the current behaviour).",
            "created_at": "2025-08-29T07:38:17Z",
            "html_url": "https://github.com/neovim/neovim/issues/7144#issuecomment-3236049487",
            "id": 3236049487,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/7144",
            "node_id": "IC_kwDOAPphoM7A4jJP",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3236049487/reactions"
            },
            "updated_at": "2025-08-29T07:38:17Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3236049487",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/14974494?v=4",
                "events_url": "https://api.github.com/users/pocomane/events{/privacy}",
                "followers_url": "https://api.github.com/users/pocomane/followers",
                "following_url": "https://api.github.com/users/pocomane/following{/other_user}",
                "gists_url": "https://api.github.com/users/pocomane/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/pocomane",
                "id": 14974494,
                "login": "pocomane",
                "node_id": "MDQ6VXNlcjE0OTc0NDk0",
                "organizations_url": "https://api.github.com/users/pocomane/orgs",
                "received_events_url": "https://api.github.com/users/pocomane/received_events",
                "repos_url": "https://api.github.com/users/pocomane/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/pocomane/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/pocomane/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/pocomane",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 4,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/7144/comments",
    "created_at": "2017-08-09T21:36:10Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/7144/events",
    "html_url": "https://github.com/neovim/neovim/issues/7144",
    "id": 249169261,
    "issue_dependencies_summary": {
        "blocked_by": 0,
        "blocking": 0,
        "total_blocked_by": 0,
        "total_blocking": 0
    },
    "labels": [
        {
            "color": "e6e6e6",
            "default": false,
            "description": "issues that are closed as usage questions",
            "id": 77997478,
            "name": "closed:question",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3OA==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/closed:question"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/7144/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWUyNDkxNjkyNjE=",
    "number": 7144,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/7144/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "completed",
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/7144/timeline",
    "title": "Keep the terminal buffer open after the shell closes",
    "type": null,
    "updated_at": "2025-08-29T07:38:17Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/7144",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/4519683?v=4",
        "events_url": "https://api.github.com/users/mox-mox/events{/privacy}",
        "followers_url": "https://api.github.com/users/mox-mox/followers",
        "following_url": "https://api.github.com/users/mox-mox/following{/other_user}",
        "gists_url": "https://api.github.com/users/mox-mox/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/mox-mox",
        "id": 4519683,
        "login": "mox-mox",
        "node_id": "MDQ6VXNlcjQ1MTk2ODM=",
        "organizations_url": "https://api.github.com/users/mox-mox/orgs",
        "received_events_url": "https://api.github.com/users/mox-mox/received_events",
        "repos_url": "https://api.github.com/users/mox-mox/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/mox-mox/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/mox-mox/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/mox-mox",
        "user_view_type": "public"
    }
}