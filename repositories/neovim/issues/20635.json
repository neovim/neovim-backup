{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Neovim version (nvim -v)\n\nNVIM v0.9.0-dev-85-gb55742faf\n\n### Vim (not Nvim) behaves the same?\n\nN/A\n\n### Operating system/version\n\n5.19.13-arch1-1\n\n### Terminal name/version\n\nalacritty Version 0.10.1\n\n### $TERM environment variable\n\ntmux-256color (alacritty)\n\n### Installation\n\nappimage\n\n### How to reproduce the issue\n\n```\r\nnvim --clean -c \"set ch=0|vnoremap m :m '>+1<CR>gv\"\r\n```\r\nAdd some lines in a buffer, activate **visual** mode, select more than 2 lines, then press `m` to run the mapped command. \n\n### Expected behavior\n\nThe selected lines move 1 line down, and preserve the selection due `gv`.\r\n(it works fine if I set `ch=1`)\r\n\r\nhttps://user-images.githubusercontent.com/6012864/195631324-75df7044-05e0-4c5b-bdd9-d793fc6c7f37.mp4\r\n\r\n\n\n### Actual behavior\n\n`gv` seems not have any effect\r\n\r\nhttps://user-images.githubusercontent.com/6012864/195631489-080cf051-cc55-420c-9266-c60ba4375c7f.mp4\r\n\r\n",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [
        {
            "author_association": "NONE",
            "body": "I've been facing this issue as well.\r\n\r\nWhat's weird is if I use `[noice.nvim](https://github.com/folke/noice.nvim)` to hide the command line instead of `cmdheight=0`, there are no issues like this. Just need to figure out what noice does to hide the command line :)",
            "created_at": "2024-01-24T15:24:28Z",
            "html_url": "https://github.com/neovim/neovim/issues/20635#issuecomment-1908355234",
            "id": 1908355234,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/20635",
            "node_id": "IC_kwDOAPphoM5xvzCi",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1908355234/reactions"
            },
            "updated_at": "2024-01-24T15:24:28Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1908355234",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/21225957?v=4",
                "events_url": "https://api.github.com/users/devansh08/events{/privacy}",
                "followers_url": "https://api.github.com/users/devansh08/followers",
                "following_url": "https://api.github.com/users/devansh08/following{/other_user}",
                "gists_url": "https://api.github.com/users/devansh08/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/devansh08",
                "id": 21225957,
                "login": "devansh08",
                "node_id": "MDQ6VXNlcjIxMjI1OTU3",
                "organizations_url": "https://api.github.com/users/devansh08/orgs",
                "received_events_url": "https://api.github.com/users/devansh08/received_events",
                "repos_url": "https://api.github.com/users/devansh08/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/devansh08/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/devansh08/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/devansh08",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "I've ran into this today. As a dirty workaround you can do double `<CR>`, i.e. `\":m '>+1<CR><CR>gv\"`.\r\nThe reason being that if you move 2 or more lines, you get a message that says so, and the message is too tall for `cmdheight=0`.\r\n\r\nThere doesn't seem to be a `shortmess` option that fixes this either.\r\n\r\nYet another issue with `cmdheight=0` that needs fixing :P\r\n\r\nEDIT: you can also `vim.opt.report = NUMBER` to some larger number, e.g. 10. This will change the threshold for sending the messages about modifying many lines.",
            "created_at": "2024-06-30T19:41:12Z",
            "html_url": "https://github.com/neovim/neovim/issues/20635#issuecomment-2198661759",
            "id": 2198661759,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/20635",
            "node_id": "IC_kwDOAPphoM6DDOp_",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2198661759/reactions"
            },
            "updated_at": "2024-06-30T19:50:09Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2198661759",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11989990?v=4",
                "events_url": "https://api.github.com/users/sebszyller/events{/privacy}",
                "followers_url": "https://api.github.com/users/sebszyller/followers",
                "following_url": "https://api.github.com/users/sebszyller/following{/other_user}",
                "gists_url": "https://api.github.com/users/sebszyller/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/sebszyller",
                "id": 11989990,
                "login": "sebszyller",
                "node_id": "MDQ6VXNlcjExOTg5OTkw",
                "organizations_url": "https://api.github.com/users/sebszyller/orgs",
                "received_events_url": "https://api.github.com/users/sebszyller/received_events",
                "repos_url": "https://api.github.com/users/sebszyller/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/sebszyller/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/sebszyller/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/sebszyller",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 2,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/20635/comments",
    "created_at": "2022-10-13T15:03:11Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/20635/events",
    "html_url": "https://github.com/neovim/neovim/issues/20635",
    "id": 1407965952,
    "labels": [
        {
            "color": "c5def5",
            "default": false,
            "description": "",
            "id": 113026979,
            "name": "ui",
            "node_id": "MDU6TGFiZWwxMTMwMjY5Nzk=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/ui"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/20635/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM5T69sA",
    "number": 20635,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 2,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 2,
        "url": "https://api.github.com/repos/neovim/neovim/issues/20635/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/20635/timeline",
    "title": "cmdheight=0 causes some side effect on vnoremap m :m '>+1<CR>gv",
    "type": {
        "color": "red",
        "created_at": "2024-01-25T10:10:19Z",
        "description": "An unexpected problem or behavior",
        "id": 597163,
        "is_enabled": true,
        "name": "Bug",
        "node_id": "IT_kwDOAGK_Pc4ACRyr",
        "updated_at": "2024-07-26T10:12:30Z"
    },
    "updated_at": "2025-07-02T08:36:21Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/20635",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/6012864?v=4",
        "events_url": "https://api.github.com/users/alanoliveira/events{/privacy}",
        "followers_url": "https://api.github.com/users/alanoliveira/followers",
        "following_url": "https://api.github.com/users/alanoliveira/following{/other_user}",
        "gists_url": "https://api.github.com/users/alanoliveira/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/alanoliveira",
        "id": 6012864,
        "login": "alanoliveira",
        "node_id": "MDQ6VXNlcjYwMTI4NjQ=",
        "organizations_url": "https://api.github.com/users/alanoliveira/orgs",
        "received_events_url": "https://api.github.com/users/alanoliveira/received_events",
        "repos_url": "https://api.github.com/users/alanoliveira/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/alanoliveira/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/alanoliveira/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/alanoliveira",
        "user_view_type": "public"
    }
}