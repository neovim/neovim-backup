{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\n\n1. Set up Copilot LSP as described in `lsp-copilot`\n2. Type something and wait for inline completion to appear:  \n\n<img width=\"334\" height=\"110\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/616dbaa4-0596-4f56-b527-090441b4aa04\" />\n\n3. Type the next character and immediately accept the completion\n4. The completion is inserted as if the character wasn't typed, and then the character is added after it:\n\n<img width=\"334\" height=\"110\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/a9002afd-236f-4532-859d-13cf88e35892\" />\n\n### Steps to reproduce using \"nvim -u minimal_init.lua\"\n\nminimal.lua:\n\n```lua\nvim.pack.add({ \"https://github.com/neovim/nvim-lspconfig\" })\nvim.lsp.enable('copilot')\nvim.lsp.inline_completion.enable()\nvim.keymap.set(\"i\", \"<A-f>\", vim.lsp.inline_completion.get)\n```\n\n### Expected behavior\n\nWhen typing a character and inline completion is shown:\n\n- If the character matches the beginning of the completion result, the result should be immediately updated to remove the leading characters from it, until the language server responds with new completion results\n- If the character doesn't match the beginning of the completion, completion should be cancelled and a new completion request to the server should be triggered\n\nThis way there will be no extra characters \n\n### Nvim version (nvim -v)\n\nNVIM v0.12.0-dev+1569-16c815222\n\n### Language server name/version\n\ncopilot-language-server 1.394.0\n\n### Operating system/version\n\nFedora 43\n\n### Log file\n\n_No response_",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "@flexagoon thank you for reporting this! ðŸ™Œ \n\nHowever in order for us to fix this ASAP we need a truly minimal config, and when copying your settings into `minimal.lua` and running `nvim --clean -u minimal.lua minimal.lua` I see the following error:\n```\nError in /Users/majosolano/Code/neovim/minimal.lua:\nE5113: Lua chunk: /Users/majosolano/.nvim/share/nvim/runtime/lua/vim/pack.lua:837: vim.pack:\n\n`nvim-lspconfig`:\n/Users/majosolano/.nvim/share/nvim/runtime/lua/vim/pack.lua:730: Vim:E919: Directory not found in 'packpath': \"pack/*/opt/nvim-lspconfig\"\nstack traceback:\n        [C]: in function 'error'\n        /Users/majosolano/.nvim/share/nvim/runtime/lua/vim/pack.lua:837: in function 'add'\n        /Users/majosolano/Code/neovim/minimal.lua:1: in main chunk\nPress ENTER or type command to continue\n```",
            "created_at": "2025-11-12T03:18:15Z",
            "html_url": "https://github.com/neovim/neovim/issues/36529#issuecomment-3519713292",
            "id": 3519713292,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36529",
            "node_id": "IC_kwDOAPphoM7RypAM",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3519713292/reactions"
            },
            "updated_at": "2025-11-12T03:18:15Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3519713292",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/62502207?v=4",
                "events_url": "https://api.github.com/users/MariaSolOs/events{/privacy}",
                "followers_url": "https://api.github.com/users/MariaSolOs/followers",
                "following_url": "https://api.github.com/users/MariaSolOs/following{/other_user}",
                "gists_url": "https://api.github.com/users/MariaSolOs/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/MariaSolOs",
                "id": 62502207,
                "login": "MariaSolOs",
                "node_id": "MDQ6VXNlcjYyNTAyMjA3",
                "organizations_url": "https://api.github.com/users/MariaSolOs/orgs",
                "received_events_url": "https://api.github.com/users/MariaSolOs/received_events",
                "repos_url": "https://api.github.com/users/MariaSolOs/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/MariaSolOs/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/MariaSolOs/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/MariaSolOs",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "@echasnovski perhaps you have some insights about troubleshooting this?",
            "created_at": "2025-11-12T03:23:22Z",
            "html_url": "https://github.com/neovim/neovim/issues/36529#issuecomment-3519721167",
            "id": 3519721167,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36529",
            "node_id": "IC_kwDOAPphoM7Ryq7P",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3519721167/reactions"
            },
            "updated_at": "2025-11-12T03:23:22Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3519721167",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/62502207?v=4",
                "events_url": "https://api.github.com/users/MariaSolOs/events{/privacy}",
                "followers_url": "https://api.github.com/users/MariaSolOs/followers",
                "following_url": "https://api.github.com/users/MariaSolOs/following{/other_user}",
                "gists_url": "https://api.github.com/users/MariaSolOs/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/MariaSolOs",
                "id": 62502207,
                "login": "MariaSolOs",
                "node_id": "MDQ6VXNlcjYyNTAyMjA3",
                "organizations_url": "https://api.github.com/users/MariaSolOs/orgs",
                "received_events_url": "https://api.github.com/users/MariaSolOs/received_events",
                "repos_url": "https://api.github.com/users/MariaSolOs/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/MariaSolOs/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/MariaSolOs/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/MariaSolOs",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "@MariaSolOs that seems to be an issue with `nvim --clean` not adding `~/.local/share/nvim/site` (which is where `vim.pack` installs plugins) to `packpath` for some reason. I don't know if that's intended or not.\n\nAdding this line in the beginning of minimal.lua makes it work fine:\n\n```lua\nvim.o.packpath = vim.o.packpath .. ',~/.local/share/nvim/site'\n```",
            "created_at": "2025-11-12T03:37:58Z",
            "html_url": "https://github.com/neovim/neovim/issues/36529#issuecomment-3519750501",
            "id": 3519750501,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36529",
            "node_id": "IC_kwDOAPphoM7RyyFl",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3519750501/reactions"
            },
            "updated_at": "2025-11-12T03:37:58Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3519750501",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/66178592?v=4",
                "events_url": "https://api.github.com/users/flexagoon/events{/privacy}",
                "followers_url": "https://api.github.com/users/flexagoon/followers",
                "following_url": "https://api.github.com/users/flexagoon/following{/other_user}",
                "gists_url": "https://api.github.com/users/flexagoon/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/flexagoon",
                "id": 66178592,
                "login": "flexagoon",
                "node_id": "MDQ6VXNlcjY2MTc4NTky",
                "organizations_url": "https://api.github.com/users/flexagoon/orgs",
                "received_events_url": "https://api.github.com/users/flexagoon/received_events",
                "repos_url": "https://api.github.com/users/flexagoon/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/flexagoon/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/flexagoon/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/flexagoon",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> Adding this line in the beginning of minimal.lua makes it work fine:\n> \n> vim.o.packpath = vim.o.packpath .. ',~/.local/share/nvim/site'\n\nThank you! Although I'm no longer getting the error from https://github.com/neovim/neovim/issues/36529#issuecomment-3519713292, I'm still unable to reproduce the bug.\n\nI'm using `lua_ls` for the repro. Are you experiencing the bug with all LSPs? From the description I guess that you're having problems with Python...?\n\n> [@MariaSolOs](https://github.com/MariaSolOs) that seems to be an issue with `nvim --clean` not adding `~/.local/share/nvim/site` (which is where `vim.pack` installs plugins) to `packpath` for some reason. I don't know if that's intended or not.\n\nI hate being _that person_ but just wanted to leave a friendly reminder that we do mention the need of minimal configs being compatible with `nvim --clean`.",
            "created_at": "2025-11-12T03:53:19Z",
            "html_url": "https://github.com/neovim/neovim/issues/36529#issuecomment-3519797802",
            "id": 3519797802,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36529",
            "node_id": "IC_kwDOAPphoM7Ry9oq",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3519797802/reactions"
            },
            "updated_at": "2025-11-12T03:53:19Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3519797802",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/62502207?v=4",
                "events_url": "https://api.github.com/users/MariaSolOs/events{/privacy}",
                "followers_url": "https://api.github.com/users/MariaSolOs/followers",
                "following_url": "https://api.github.com/users/MariaSolOs/following{/other_user}",
                "gists_url": "https://api.github.com/users/MariaSolOs/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/MariaSolOs",
                "id": 62502207,
                "login": "MariaSolOs",
                "node_id": "MDQ6VXNlcjYyNTAyMjA3",
                "organizations_url": "https://api.github.com/users/MariaSolOs/orgs",
                "received_events_url": "https://api.github.com/users/MariaSolOs/received_events",
                "repos_url": "https://api.github.com/users/MariaSolOs/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/MariaSolOs/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/MariaSolOs/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/MariaSolOs",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "@MariaSolOs no, the issue is with copilot-language-server and this feature which landed in nvim a few months ago: #33972 \n\nSee `:h lsp-copilot`\n\n> I hate being that person but just wanted to leave a friendly reminder that we do mention the need of minimal configs being compatible with nvim --clean.\n\nIn the regular bug report template, yes. The LSP bug report template just says `nvim -u minimal.lua` without mentioning `--clean`.",
            "created_at": "2025-11-12T03:58:04Z",
            "html_url": "https://github.com/neovim/neovim/issues/36529#issuecomment-3519810384",
            "id": 3519810384,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36529",
            "node_id": "IC_kwDOAPphoM7RzAtQ",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3519810384/reactions"
            },
            "updated_at": "2025-11-12T03:59:05Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3519810384",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/66178592?v=4",
                "events_url": "https://api.github.com/users/flexagoon/events{/privacy}",
                "followers_url": "https://api.github.com/users/flexagoon/followers",
                "following_url": "https://api.github.com/users/flexagoon/following{/other_user}",
                "gists_url": "https://api.github.com/users/flexagoon/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/flexagoon",
                "id": 66178592,
                "login": "flexagoon",
                "node_id": "MDQ6VXNlcjY2MTc4NTky",
                "organizations_url": "https://api.github.com/users/flexagoon/orgs",
                "received_events_url": "https://api.github.com/users/flexagoon/received_events",
                "repos_url": "https://api.github.com/users/flexagoon/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/flexagoon/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/flexagoon/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/flexagoon",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> [@echasnovski](https://github.com/echasnovski) perhaps you have some insights about troubleshooting this?\n\nYes. This one is correct:\n\n> [@MariaSolOs](https://github.com/MariaSolOs) that seems to be an issue with `nvim --clean` not adding `~/.local/share/nvim/site` (which is where `vim.pack` installs plugins) to `packpath` for some reason. I don't know if that's intended or not.\n\nYes, `nvim --clean` is intended to not include any user paths in 'packpath' and 'runtimepath'. It is also documented [here](https://github.com/neovim/neovim/blob/8bce9342d101eed4bb16fe03d36e7f89bac991ab/runtime/doc/pack.txt#L214-L216). More details are in #35105 (including suggested clean repro recipes) and #35220 (for motivation about why this is not autoadjusted by `vim.pack` itself).",
            "created_at": "2025-11-12T09:36:50Z",
            "html_url": "https://github.com/neovim/neovim/issues/36529#issuecomment-3520990143",
            "id": 3520990143,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/36529",
            "node_id": "IC_kwDOAPphoM7R3gu_",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3520990143/reactions"
            },
            "updated_at": "2025-11-12T09:36:50Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/3520990143",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/24854248?v=4",
                "events_url": "https://api.github.com/users/echasnovski/events{/privacy}",
                "followers_url": "https://api.github.com/users/echasnovski/followers",
                "following_url": "https://api.github.com/users/echasnovski/following{/other_user}",
                "gists_url": "https://api.github.com/users/echasnovski/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/echasnovski",
                "id": 24854248,
                "login": "echasnovski",
                "node_id": "MDQ6VXNlcjI0ODU0MjQ4",
                "organizations_url": "https://api.github.com/users/echasnovski/orgs",
                "received_events_url": "https://api.github.com/users/echasnovski/received_events",
                "repos_url": "https://api.github.com/users/echasnovski/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/echasnovski/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/echasnovski/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/echasnovski",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 6,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/36529/comments",
    "created_at": "2025-11-12T02:02:07Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/36529/events",
    "html_url": "https://github.com/neovim/neovim/issues/36529",
    "id": 3614561280,
    "issue_dependencies_summary": {
        "blocked_by": 0,
        "blocking": 0,
        "total_blocked_by": 0,
        "total_blocking": 0
    },
    "labels": [
        {
            "color": "c5def5",
            "default": false,
            "description": null,
            "id": 662566370,
            "name": "lsp",
            "node_id": "MDU6TGFiZWw2NjI1NjYzNzA=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/lsp"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/36529/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM7XcdQA",
    "number": 36529,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/36529/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/36529/timeline",
    "title": "LSP: Accepting an inline completion too fast causes extra characters",
    "type": {
        "color": "red",
        "created_at": "2024-01-25T10:10:19Z",
        "description": "An unexpected problem or behavior",
        "id": 597163,
        "is_enabled": true,
        "name": "Bug",
        "node_id": "IT_kwDOAGK_Pc4ACRyr",
        "updated_at": "2024-07-26T10:12:30Z"
    },
    "updated_at": "2025-11-12T09:36:50Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/36529",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/66178592?v=4",
        "events_url": "https://api.github.com/users/flexagoon/events{/privacy}",
        "followers_url": "https://api.github.com/users/flexagoon/followers",
        "following_url": "https://api.github.com/users/flexagoon/following{/other_user}",
        "gists_url": "https://api.github.com/users/flexagoon/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/flexagoon",
        "id": 66178592,
        "login": "flexagoon",
        "node_id": "MDQ6VXNlcjY2MTc4NTky",
        "organizations_url": "https://api.github.com/users/flexagoon/orgs",
        "received_events_url": "https://api.github.com/users/flexagoon/received_events",
        "repos_url": "https://api.github.com/users/flexagoon/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/flexagoon/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/flexagoon/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/flexagoon",
        "user_view_type": "public"
    }
}