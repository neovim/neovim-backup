{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "body": "### Problem\n\nNvim has a built-in LSP client, but it doesn't support these LSP methods `workspace/(did|will)(Create|Rename|Delete)Files`\n\n=> Some code actions don't work properly #26045 \n=> File management plugins have the same tens-of-line boilerplate to support it\n\nAlso related #20784, #14042, #26516\n\n\n### Expected behavior\n\nPossibly some commands/Lua functions that create/rename/delete files and and send the corresponding request to LSP servers before and after the operation? Possibly can extend `vim.lsp.util.rename()`?",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [
        {
            "author_association": "CONTRIBUTOR",
            "body": "@mfussenegger  It seems to me that you are the contributor who implement `vim.lsp.util.rename()`, so I would like to ask if it is ok to make that function also send `workspace/(did|will)RenameFiles` to LSP servers?",
            "created_at": "2025-02-14T01:17:19Z",
            "html_url": "https://github.com/neovim/neovim/issues/32363#issuecomment-2658044536",
            "id": 2658044536,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32363",
            "node_id": "IC_kwDOAPphoM6ebop4",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2658044536/reactions"
            },
            "updated_at": "2025-02-14T01:17:19Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2658044536",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/111893501?v=4",
                "events_url": "https://api.github.com/users/brianhuster/events{/privacy}",
                "followers_url": "https://api.github.com/users/brianhuster/followers",
                "following_url": "https://api.github.com/users/brianhuster/following{/other_user}",
                "gists_url": "https://api.github.com/users/brianhuster/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/brianhuster",
                "id": 111893501,
                "login": "brianhuster",
                "node_id": "U_kgDOBqtb_Q",
                "organizations_url": "https://api.github.com/users/brianhuster/orgs",
                "received_events_url": "https://api.github.com/users/brianhuster/received_events",
                "repos_url": "https://api.github.com/users/brianhuster/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/brianhuster/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/brianhuster/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/brianhuster",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "`vim.lsp.util` is a junk drawer, it's not intended to be a place where we add features. Based on the current patterns, I would expect `vim.lsp.buf.rename()`. \n\nBut this issue needs more elaboration/specification. Why would these features live in a LSP-specific namespace? I would instead expect:\n\n- \"create\": `:edit` and `:write` should work with LSP automatically.\n    - we may also need `:mkdir`, see https://github.com/tpope/vim-eunuch\n- \"rename\": maybe we need a `:rename` command, see https://github.com/tpope/vim-eunuch\n- \"delete\": let's add a `:<something>` command, see https://github.com/tpope/vim-eunuch",
            "created_at": "2025-02-14T12:26:03Z",
            "html_url": "https://github.com/neovim/neovim/issues/32363#issuecomment-2659208031",
            "id": 2659208031,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32363",
            "node_id": "IC_kwDOAPphoM6egEtf",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2659208031/reactions"
            },
            "updated_at": "2025-02-14T12:30:47Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2659208031",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> I would expect vim.lsp.buf.rename().\n\n`util.rename` is currently used by via `apply_workspace_edit` to implement application of rename calls from the server to the client. It's not something where we intended that end-users call it directly to initiate a rename - certainly not in a LSP specific way.\n\nSo yes - it doesn't need to be lsp specific and a `:rename` would be a better options than having it in lsp.util.\n(See also https://github.com/neovim/neovim/pull/26516#pullrequestreview-1775588352 - where we talked about this already to some degree)\n\nThat said - I'm not sure how `workspace/(did/will)Rename` is even supposed to interact with rename's the server initiated, or renames already detected via the filewatch mechanism. There's a bit of duplication. \nFor files currently opened in a buffer we could do the rename detection even implicitly via the change tracking mechanism. It is not clear if we even need lsp specifics in a `:rename`.\n\n",
            "created_at": "2025-02-14T12:42:17Z",
            "html_url": "https://github.com/neovim/neovim/issues/32363#issuecomment-2659242035",
            "id": 2659242035,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32363",
            "node_id": "IC_kwDOAPphoM6egNAz",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2659242035/reactions"
            },
            "updated_at": "2025-02-14T13:03:05Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2659242035",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/38700?v=4",
                "events_url": "https://api.github.com/users/mfussenegger/events{/privacy}",
                "followers_url": "https://api.github.com/users/mfussenegger/followers",
                "following_url": "https://api.github.com/users/mfussenegger/following{/other_user}",
                "gists_url": "https://api.github.com/users/mfussenegger/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mfussenegger",
                "id": 38700,
                "login": "mfussenegger",
                "node_id": "MDQ6VXNlcjM4NzAw",
                "organizations_url": "https://api.github.com/users/mfussenegger/orgs",
                "received_events_url": "https://api.github.com/users/mfussenegger/received_events",
                "repos_url": "https://api.github.com/users/mfussenegger/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mfussenegger/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mfussenegger/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mfussenegger",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> For files currently opened in a buffer we could do the rename detection even implicitly via the change tracking mechanism.\n\nJust to mention that Gitsigns does rename detection since git tracks file renames, similar to how an LSP server would. One feature a `:rename` could have is for it to advertise to consumers (git, lsp), to make their own version of the changes.",
            "created_at": "2025-02-14T15:56:12Z",
            "html_url": "https://github.com/neovim/neovim/issues/32363#issuecomment-2659698361",
            "id": 2659698361,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32363",
            "node_id": "IC_kwDOAPphoM6eh8a5",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2659698361/reactions"
            },
            "updated_at": "2025-02-14T15:56:12Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2659698361",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/7904185?v=4",
                "events_url": "https://api.github.com/users/lewis6991/events{/privacy}",
                "followers_url": "https://api.github.com/users/lewis6991/followers",
                "following_url": "https://api.github.com/users/lewis6991/following{/other_user}",
                "gists_url": "https://api.github.com/users/lewis6991/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/lewis6991",
                "id": 7904185,
                "login": "lewis6991",
                "node_id": "MDQ6VXNlcjc5MDQxODU=",
                "organizations_url": "https://api.github.com/users/lewis6991/orgs",
                "received_events_url": "https://api.github.com/users/lewis6991/received_events",
                "repos_url": "https://api.github.com/users/lewis6991/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/lewis6991/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lewis6991/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/lewis6991",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> > For files currently opened in a buffer we could do the rename detection even implicitly via the change tracking mechanism.\n> \n> Just to mention that Gitsigns does rename detection since git tracks file renames, similar to how an LSP server would. One feature a `:rename` could have is for it to advertise to consumers (git, lsp), to make their own version of the changes.\n\nIn https://github.com/neovim/neovim/pull/26516#pullrequestreview-1775588352 `FileRename` and `FileDeleted` autocmds were brought up as an option.",
            "created_at": "2025-02-14T16:05:05Z",
            "html_url": "https://github.com/neovim/neovim/issues/32363#issuecomment-2659717970",
            "id": 2659717970,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32363",
            "node_id": "IC_kwDOAPphoM6eiBNS",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2659717970/reactions"
            },
            "updated_at": "2025-02-14T16:05:05Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2659717970",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/38700?v=4",
                "events_url": "https://api.github.com/users/mfussenegger/events{/privacy}",
                "followers_url": "https://api.github.com/users/mfussenegger/followers",
                "following_url": "https://api.github.com/users/mfussenegger/following{/other_user}",
                "gists_url": "https://api.github.com/users/mfussenegger/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mfussenegger",
                "id": 38700,
                "login": "mfussenegger",
                "node_id": "MDQ6VXNlcjM4NzAw",
                "organizations_url": "https://api.github.com/users/mfussenegger/orgs",
                "received_events_url": "https://api.github.com/users/mfussenegger/received_events",
                "repos_url": "https://api.github.com/users/mfussenegger/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mfussenegger/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mfussenegger/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mfussenegger",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "In https://github.com/neovim/neovim/pull/26516#pullrequestreview-1775588352\n> E.g. Something like vim.fs.rename(old, new) and vim.fs.delete(path).\n> These would either invoke the lsp actions directly \n\nThat was similar what I thought when opening this issue. I only thought of `:rename` and other commands as wrapper of such functions",
            "created_at": "2025-02-14T16:34:54Z",
            "html_url": "https://github.com/neovim/neovim/issues/32363#issuecomment-2659785813",
            "id": 2659785813,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/32363",
            "node_id": "IC_kwDOAPphoM6eiRxV",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2659785813/reactions"
            },
            "updated_at": "2025-02-14T16:34:54Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2659785813",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/111893501?v=4",
                "events_url": "https://api.github.com/users/brianhuster/events{/privacy}",
                "followers_url": "https://api.github.com/users/brianhuster/followers",
                "following_url": "https://api.github.com/users/brianhuster/following{/other_user}",
                "gists_url": "https://api.github.com/users/brianhuster/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/brianhuster",
                "id": 111893501,
                "login": "brianhuster",
                "node_id": "U_kgDOBqtb_Q",
                "organizations_url": "https://api.github.com/users/brianhuster/orgs",
                "received_events_url": "https://api.github.com/users/brianhuster/received_events",
                "repos_url": "https://api.github.com/users/brianhuster/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/brianhuster/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/brianhuster/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/brianhuster",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 6,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/32363/comments",
    "created_at": "2025-02-07T12:50:30Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/32363/events",
    "html_url": "https://github.com/neovim/neovim/issues/32363",
    "id": 2838087717,
    "labels": [
        {
            "color": "c5def5",
            "default": false,
            "description": null,
            "id": 662566370,
            "name": "lsp",
            "node_id": "MDU6TGFiZWw2NjI1NjYzNzA=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/lsp"
        },
        {
            "color": "C5DEF5",
            "default": false,
            "description": "events, autocommands",
            "id": 3341085842,
            "name": "events",
            "node_id": "MDU6TGFiZWwzMzQxMDg1ODQy",
            "url": "https://api.github.com/repos/neovim/neovim/labels/events"
        },
        {
            "color": "C5DEF5",
            "default": false,
            "description": "file metadata/attributes, filenames, path manipulation",
            "id": 3386070083,
            "name": "filesystem",
            "node_id": "LA_kwDOAPphoM7J01RD",
            "url": "https://api.github.com/repos/neovim/neovim/labels/filesystem"
        },
        {
            "color": "C5DEF5",
            "default": false,
            "description": "",
            "id": 7421978602,
            "name": "editor",
            "node_id": "LA_kwDOAPphoM8AAAABumJn6g",
            "url": "https://api.github.com/repos/neovim/neovim/labels/editor"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/32363/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 696,
        "created_at": "2014-05-10T20:43:04Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
            "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
            "followers_url": "https://api.github.com/users/justinmk/followers",
            "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/justinmk",
            "id": 1359421,
            "login": "justinmk",
            "node_id": "MDQ6VXNlcjEzNTk0MjE=",
            "organizations_url": "https://api.github.com/users/justinmk/orgs",
            "received_events_url": "https://api.github.com/users/justinmk/received_events",
            "repos_url": "https://api.github.com/users/justinmk/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/justinmk",
            "user_view_type": "public"
        },
        "description": "Low priority items. We plan to work on this but don't have a target date.",
        "due_on": null,
        "html_url": "https://github.com/neovim/neovim/milestone/6",
        "id": 655037,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/6/labels",
        "node_id": "MDk6TWlsZXN0b25lNjU1MDM3",
        "number": 6,
        "open_issues": 635,
        "state": "open",
        "title": "backlog",
        "updated_at": "2025-02-17T18:55:16Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/6"
    },
    "node_id": "I_kwDOAPphoM6pKcgl",
    "number": 32363,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 4,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 4,
        "url": "https://api.github.com/repos/neovim/neovim/issues/32363/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/32363/timeline",
    "title": "Commands/Lua functions to create/rename/delete files with LSP integration",
    "updated_at": "2025-02-14T16:34:56Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/32363",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/111893501?v=4",
        "events_url": "https://api.github.com/users/brianhuster/events{/privacy}",
        "followers_url": "https://api.github.com/users/brianhuster/followers",
        "following_url": "https://api.github.com/users/brianhuster/following{/other_user}",
        "gists_url": "https://api.github.com/users/brianhuster/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/brianhuster",
        "id": 111893501,
        "login": "brianhuster",
        "node_id": "U_kgDOBqtb_Q",
        "organizations_url": "https://api.github.com/users/brianhuster/orgs",
        "received_events_url": "https://api.github.com/users/brianhuster/received_events",
        "repos_url": "https://api.github.com/users/brianhuster/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/brianhuster/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/brianhuster/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/brianhuster",
        "user_view_type": "public"
    }
}