{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "NVIM v0.5.0-dev+1178-gf0ace6d41, archlinux, xfce4-terminal\r\n\r\nUnfortunately, this issue appears to occur randomly (and rarely); I can't seem to get a reproduction with a minimal init.vim.\r\nNext time this issue occurs, I will try to carefuly reproduce the exact circumstances of the crash to see if it will reproduce and I will comment my results on this issue.\r\nRegardless, I thought I would go ahead and make an issue with just the backtrace in the edge case that someone could already figure out what's going on.\r\n```\r\n#0  0x00007f383320478c in __memmove_avx_unaligned_erms () from /usr/lib/libc.so.6\r\n#1  0x000055a34b7852d6 in memmove (__len=<optimized out>, __src=<optimized out>, __dest=<optimized out>, __dest=<optimized out>, __src=<optimized out>, __len=<optimized out>)\r\n    at /usr/include/bits/string_fortified.h:36\r\n#2  ml_flush_line (buf=buf@entry=0x55a34ea256e0) at /home/ryan/.cache/yay/neovim-git/src/neovim-git/src/nvim/memline.c:2802\r\n#3  0x000055a34b785b16 in ml_replace_buf (buf=0x55a34ea256e0, lnum=4, line=0x55a34e63b540 \" ~/d/items   master   gws\", copy=<optimized out>)\r\n    at /home/ryan/.cache/yay/neovim-git/src/neovim-git/src/nvim/memline.c:2453\r\n#4  0x000055a34b785b8d in ml_replace (lnum=<optimized out>, line=<optimized out>, copy=<optimized out>) at /home/ryan/.cache/yay/neovim-git/src/neovim-git/src/nvim/memline.c:2423\r\n#5  0x000055a34b85aa76 in refresh_screen (term=term@entry=0x55a34e9f7210, buf=buf@entry=0x55a34ea256e0) at /home/ryan/.cache/yay/neovim-git/src/neovim-git/src/nvim/terminal.c:1352\r\n#6  0x000055a34b85ab79 in refresh_terminal (term=0x55a34e9f7210) at /home/ryan/.cache/yay/neovim-git/src/neovim-git/src/nvim/terminal.c:1231\r\n#7  0x000055a34b85ad98 in refresh_timer_cb (watcher=<optimized out>, data=<optimized out>) at /home/ryan/.cache/yay/neovim-git/src/neovim-git/src/nvim/terminal.c:1248\r\n#8  0x000055a34b6fb3e9 in time_event (argv=<optimized out>) at /home/ryan/.cache/yay/neovim-git/src/neovim-git/src/nvim/event/time.c:50\r\n#9  0x000055a34b8404c8 in state_handle_k_event () at /home/ryan/.cache/yay/neovim-git/src/neovim-git/src/nvim/state.c:87\r\n#10 0x000055a34b7aa255 in nv_event (cap=0x7fffa6f6ce38) at /home/ryan/.cache/yay/neovim-git/src/neovim-git/src/nvim/normal.c:8106\r\n#11 0x000055a34b7a2b12 in normal_execute (state=0x7fffa6f6cdb0, key=<optimized out>) at /home/ryan/.cache/yay/neovim-git/src/neovim-git/src/nvim/normal.c:1142\r\n#12 0x000055a34b8403ac in state_enter (s=0x7fffa6f6cdb0) at /home/ryan/.cache/yay/neovim-git/src/neovim-git/src/nvim/state.c:69\r\n#13 0x000055a34b79de81 in normal_enter (cmdwin=<optimized out>, noexmode=<optimized out>) at /home/ryan/.cache/yay/neovim-git/src/neovim-git/src/nvim/normal.c:463\r\n#14 0x000055a34b77271e in main (argc=-1493774576, argv=<optimized out>) at /home/ryan/.cache/yay/neovim-git/src/neovim-git/src/nvim/main.c:562\r\n```",
    "closed_at": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": ">Next time this issue occurs, I will try to carefuly reproduce the exact circumstances of the crash to see if it will reproduce and I will comment my results on this issue.\r\n\r\nAnother thing you could try to do is run all your neovim instances under [rr](https://github.com/rr-debugger/rr). This will record the whole execution of neovim and let you replay it as many times as you need :).",
            "created_at": "2021-04-28T10:45:06Z",
            "html_url": "https://github.com/neovim/neovim/issues/14447#issuecomment-828354543",
            "id": 828354543,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/14447",
            "node_id": "MDEyOklzc3VlQ29tbWVudDgyODM1NDU0Mw==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/828354543/reactions"
            },
            "updated_at": "2021-04-28T10:45:06Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/828354543",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11534587?v=4",
                "events_url": "https://api.github.com/users/glacambre/events{/privacy}",
                "followers_url": "https://api.github.com/users/glacambre/followers",
                "following_url": "https://api.github.com/users/glacambre/following{/other_user}",
                "gists_url": "https://api.github.com/users/glacambre/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glacambre",
                "id": 11534587,
                "login": "glacambre",
                "node_id": "MDQ6VXNlcjExNTM0NTg3",
                "organizations_url": "https://api.github.com/users/glacambre/orgs",
                "received_events_url": "https://api.github.com/users/glacambre/received_events",
                "repos_url": "https://api.github.com/users/glacambre/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glacambre/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glacambre/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glacambre"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Running a build with ASAN enabled might also be helpful.",
            "created_at": "2021-04-28T15:03:19Z",
            "html_url": "https://github.com/neovim/neovim/issues/14447#issuecomment-828529924",
            "id": 828529924,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/14447",
            "node_id": "MDEyOklzc3VlQ29tbWVudDgyODUyOTkyNA==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/828529924/reactions"
            },
            "updated_at": "2021-04-28T15:03:19Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/828529924",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/112971?v=4",
                "events_url": "https://api.github.com/users/jamessan/events{/privacy}",
                "followers_url": "https://api.github.com/users/jamessan/followers",
                "following_url": "https://api.github.com/users/jamessan/following{/other_user}",
                "gists_url": "https://api.github.com/users/jamessan/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/jamessan",
                "id": 112971,
                "login": "jamessan",
                "node_id": "MDQ6VXNlcjExMjk3MQ==",
                "organizations_url": "https://api.github.com/users/jamessan/orgs",
                "received_events_url": "https://api.github.com/users/jamessan/received_events",
                "repos_url": "https://api.github.com/users/jamessan/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/jamessan/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jamessan/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/jamessan"
            }
        }
    ],
    "comments": 2,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/14447/comments",
    "created_at": "2021-04-27T03:39:03Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/14447/events",
    "html_url": "https://github.com/neovim/neovim/issues/14447",
    "id": 868423710,
    "labels": [
        {
            "color": "c5def5",
            "default": false,
            "description": "built-in :terminal or :shell",
            "id": 212696822,
            "name": "terminal",
            "node_id": "MDU6TGFiZWwyMTI2OTY4MjI=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/terminal"
        },
        {
            "color": "FBCA04",
            "default": false,
            "description": "We need minimal steps to reproduce the issue",
            "id": 298863445,
            "name": "needs:repro",
            "node_id": "MDU6TGFiZWwyOTg4NjM0NDU=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/needs:repro"
        },
        {
            "color": "0E8A16",
            "default": false,
            "description": "issue contains a stacktrace/ASAN log",
            "id": 435854079,
            "name": "has:backtrace",
            "node_id": "MDU6TGFiZWw0MzU4NTQwNzk=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/has:backtrace"
        },
        {
            "color": "F9D0C4",
            "default": false,
            "description": "issue reporting a crash or segfault",
            "id": 435854234,
            "name": "bug-crash",
            "node_id": "MDU6TGFiZWw0MzU4NTQyMzQ=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug-crash"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/14447/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWU4Njg0MjM3MTA=",
    "number": 14447,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/14447/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/14447/timeline",
    "title": "Occasional crash (segfault) when closing (and saving) with `nvr --remote-wait` in ml_replace_buf",
    "updated_at": "2024-02-04T04:41:16Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/14447",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/8813096?v=4",
        "events_url": "https://api.github.com/users/rgreenblatt/events{/privacy}",
        "followers_url": "https://api.github.com/users/rgreenblatt/followers",
        "following_url": "https://api.github.com/users/rgreenblatt/following{/other_user}",
        "gists_url": "https://api.github.com/users/rgreenblatt/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/rgreenblatt",
        "id": 8813096,
        "login": "rgreenblatt",
        "node_id": "MDQ6VXNlcjg4MTMwOTY=",
        "organizations_url": "https://api.github.com/users/rgreenblatt/orgs",
        "received_events_url": "https://api.github.com/users/rgreenblatt/received_events",
        "repos_url": "https://api.github.com/users/rgreenblatt/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/rgreenblatt/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/rgreenblatt/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/rgreenblatt"
    }
}