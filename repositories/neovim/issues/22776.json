{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\n\nI just came here from one of the vim.ui.select plugins, which, and fair enough, would rather not take on the burden of coming up with a good order for LSP code actions.\r\n\r\nLet's quickly delve into why one would care in the first place:\r\n1. as language servers have more to offer, there will be more options, having the first option be the correct one saves keystrokes, especially if you use code actions a lot. TypeScript and Rust are examples of languages where the LS offers a ton of useful functionality and accepting a code action is done all the time.\r\n2. because I use code actions a lot, I have a binding which picks the top action! I built myself a workaround where this function will smartly pick the best option out of the list, but that doesn't help 1. and wouldn't be necessary if sorting was smart or configurable.\r\n3. maybe the trend reverses and neovim users will start attaching fewer language servers but null-ls and efm-langserver are good examples of plugins which suggest users actually want to do more and more through smart coding supporting servers. \r\n\r\nHere's a screenshot to illustrate the problem, null-ls offering a couple options I practically never use, with tsserver offering the options I practically always use:\r\n\r\n<img width=\"1190\" alt=\"Screenshot 2023-03-24 at 10 06 46\" src=\"https://user-images.githubusercontent.com/2011351/227565417-adf62ade-329d-4d1c-94d5-3b5b6990efb4.png\">\r\n\r\nWould you agree this is something Neovim could offer natively or alternatively configurably? Perhaps you are of the opinion that this is more the domain of code action consuming plugins?\r\n\r\nI've also considered more what it would mean for code action consumers to implement this functionality. It seems the feature becomes much harder to implement if instead of the priority being settled between neovim and the servers it gets pushed to the action consumer. Something like Telescope or fzf-lua would have to try and detect every action provider and come up with its own priority.\n\n### Expected behavior\n\nSmarter ordering of code action, especially the first option. See Problem.\r\n\r\nThanks for an amazing editor experience ðŸ’›\r\n\r\nkeywords: lsp, language server, code actions, order, priority, sorting",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [
        {
            "author_association": "NONE",
            "body": "The author of fzf-lua just helpfully pointed out that one could try to simply change the attach order. Implicit functionality, not great, but works just fine ðŸ™ˆ ðŸ˜‚ . In light of this I think this issue can be closed. I don't know of any cases where one cannot change the attachment order as a simple solution.",
            "created_at": "2023-03-24T15:25:30Z",
            "html_url": "https://github.com/neovim/neovim/issues/22776#issuecomment-1482991192",
            "id": 1482991192,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/22776",
            "node_id": "IC_kwDOAPphoM5YZKZY",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1482991192/reactions"
            },
            "updated_at": "2023-03-24T15:25:30Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1482991192",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2011351?v=4",
                "events_url": "https://api.github.com/users/alextes/events{/privacy}",
                "followers_url": "https://api.github.com/users/alextes/followers",
                "following_url": "https://api.github.com/users/alextes/following{/other_user}",
                "gists_url": "https://api.github.com/users/alextes/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/alextes",
                "id": 2011351,
                "login": "alextes",
                "node_id": "MDQ6VXNlcjIwMTEzNTE=",
                "organizations_url": "https://api.github.com/users/alextes/orgs",
                "received_events_url": "https://api.github.com/users/alextes/received_events",
                "repos_url": "https://api.github.com/users/alextes/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/alextes/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/alextes/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/alextes",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "Hi, @alextes can you help with this? So that maybe others can benefit.\r\n\r\n[Here](https://github.com/thekaganugur/dot-nvim/blob/184c7d32c25f5ef0aeb3b3a1b406231b71383b6b/generic-neovim/.config/nvim/lua/config/lsp/handlers.lua#L10-L46) is the place I setup servers. I couldn't figure this out.",
            "created_at": "2023-04-22T17:57:55Z",
            "html_url": "https://github.com/neovim/neovim/issues/22776#issuecomment-1518717460",
            "id": 1518717460,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/22776",
            "node_id": "IC_kwDOAPphoM5ahcoU",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1518717460/reactions"
            },
            "updated_at": "2023-04-22T17:57:55Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1518717460",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/28161197?v=4",
                "events_url": "https://api.github.com/users/thekaganugur/events{/privacy}",
                "followers_url": "https://api.github.com/users/thekaganugur/followers",
                "following_url": "https://api.github.com/users/thekaganugur/following{/other_user}",
                "gists_url": "https://api.github.com/users/thekaganugur/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/thekaganugur",
                "id": 28161197,
                "login": "thekaganugur",
                "node_id": "MDQ6VXNlcjI4MTYxMTk3",
                "organizations_url": "https://api.github.com/users/thekaganugur/orgs",
                "received_events_url": "https://api.github.com/users/thekaganugur/received_events",
                "repos_url": "https://api.github.com/users/thekaganugur/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/thekaganugur/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/thekaganugur/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/thekaganugur",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "@thekaganugur your link 404s for me.\r\n\r\nThe idea is, in your `init.lua` somewhere you have:\r\n```lua\r\nlocal on_attach = function(client, bufnr)\r\n-- ...\r\nend\r\n```\r\n\r\nThen later:\r\n```lua\r\n-- Setup mason so it can manage external tooling\r\nrequire(\"mason\").setup()\r\n\r\n-- Ensure the servers above are installed\r\nlocal mason_lspconfig = require(\"mason-lspconfig\")\r\n\r\nmason_lspconfig.setup({\r\n\tensure_installed = vim.tbl_keys(servers),\r\n})\r\n\r\nmason_lspconfig.setup_handlers({\r\n\tfunction(server_name)\r\n\t\trequire(\"lspconfig\")[server_name].setup({\r\n\t\t\tcapabilities = capabilities,\r\n\t\t\ton_attach = on_attach,\r\n\t\t\tsettings = servers[server_name],\r\n\t\t})\r\n\tend,\r\n})\r\n```\r\n\r\nNote, the passing of `on_attach`,\r\n\r\nThen later:\r\n```lua\r\nlocal null_ls = require(\"null-ls\")\r\nnull_ls.setup({\r\n\tsources = {\r\n\t\t-- null_ls.builtins.formatting.rustfmt,\r\n\t\tnull_ls.builtins.code_actions.eslint_d,\r\n\t\tnull_ls.builtins.diagnostics.eslint_d,\r\n\t\tnull_ls.builtins.formatting.fnlfmt,\r\n\t\tnull_ls.builtins.formatting.gofmt,\r\n\t\tnull_ls.builtins.formatting.prettierd,\r\n\t\tnull_ls.builtins.formatting.rustywind,\r\n\t\tnull_ls.builtins.formatting.stylua,\r\n\t\tnull_ls.builtins.formatting.sqlfluff.with({\r\n\t\t\textra_args = { \"--dialect\", \"postgres\" },\r\n\t\t}),\r\n\t\tnull_ls.builtins.formatting.purs_tidy,\r\n\t},\r\n\ton_attach = on_attach,\r\n})\r\n```\r\n\r\nIf you want suggestions from the mason language servers to appear before the null_ls ones, you need to execute the call to mason, before the call to null_ls. That is all. The order in which these pieces of code appear in `init.lua` is what matters.\r\n\r\nSo yea _implicit functionality_. Not obvious and easy to miss ðŸ˜… .",
            "created_at": "2023-05-02T13:35:26Z",
            "html_url": "https://github.com/neovim/neovim/issues/22776#issuecomment-1531491423",
            "id": 1531491423,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/22776",
            "node_id": "IC_kwDOAPphoM5bSLRf",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 1,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1531491423/reactions"
            },
            "updated_at": "2023-05-02T13:35:26Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1531491423",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2011351?v=4",
                "events_url": "https://api.github.com/users/alextes/events{/privacy}",
                "followers_url": "https://api.github.com/users/alextes/followers",
                "following_url": "https://api.github.com/users/alextes/following{/other_user}",
                "gists_url": "https://api.github.com/users/alextes/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/alextes",
                "id": 2011351,
                "login": "alextes",
                "node_id": "MDQ6VXNlcjIwMTEzNTE=",
                "organizations_url": "https://api.github.com/users/alextes/orgs",
                "received_events_url": "https://api.github.com/users/alextes/received_events",
                "repos_url": "https://api.github.com/users/alextes/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/alextes/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/alextes/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/alextes",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "There is of course the case where you have the config for different plugins lazy loaded using Lazy.nvim (perhaps even across files different files).\n\nI thought I could get away with setting `priority` on those plugins... but that seems to only apply to non-lazy plugins.\nhttps://lazy.folke.io/spec#spec-loading\n\nIn my case I want none-ls actions way below regular LSP actions... but both are lazy loaded independently..",
            "created_at": "2024-12-16T07:50:31Z",
            "html_url": "https://github.com/neovim/neovim/issues/22776#issuecomment-2544834825",
            "id": 2544834825,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/22776",
            "node_id": "IC_kwDOAPphoM6XrxkJ",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2544834825/reactions"
            },
            "updated_at": "2024-12-16T07:50:31Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2544834825",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/15139826?v=4",
                "events_url": "https://api.github.com/users/jessevdp/events{/privacy}",
                "followers_url": "https://api.github.com/users/jessevdp/followers",
                "following_url": "https://api.github.com/users/jessevdp/following{/other_user}",
                "gists_url": "https://api.github.com/users/jessevdp/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/jessevdp",
                "id": 15139826,
                "login": "jessevdp",
                "node_id": "MDQ6VXNlcjE1MTM5ODI2",
                "organizations_url": "https://api.github.com/users/jessevdp/orgs",
                "received_events_url": "https://api.github.com/users/jessevdp/received_events",
                "repos_url": "https://api.github.com/users/jessevdp/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/jessevdp/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jessevdp/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/jessevdp",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 4,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/22776/comments",
    "created_at": "2023-03-24T15:20:56Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/22776/events",
    "html_url": "https://github.com/neovim/neovim/issues/22776",
    "id": 1639591483,
    "labels": [
        {
            "color": "c2e0c6",
            "default": true,
            "description": "feature request",
            "id": 77997476,
            "name": "enhancement",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3Ng==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/enhancement"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": null,
            "id": 662566370,
            "name": "lsp",
            "node_id": "MDU6TGFiZWw2NjI1NjYzNzA=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/lsp"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/22776/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM5hui47",
    "number": 22776,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 4,
        "-1": 0,
        "confused": 0,
        "eyes": 1,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 5,
        "url": "https://api.github.com/repos/neovim/neovim/issues/22776/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/22776/timeline",
    "title": "Better or configurable LSP code action sort order",
    "updated_at": "2024-12-16T07:50:32Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/22776",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/2011351?v=4",
        "events_url": "https://api.github.com/users/alextes/events{/privacy}",
        "followers_url": "https://api.github.com/users/alextes/followers",
        "following_url": "https://api.github.com/users/alextes/following{/other_user}",
        "gists_url": "https://api.github.com/users/alextes/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/alextes",
        "id": 2011351,
        "login": "alextes",
        "node_id": "MDQ6VXNlcjIwMTEzNTE=",
        "organizations_url": "https://api.github.com/users/alextes/orgs",
        "received_events_url": "https://api.github.com/users/alextes/received_events",
        "repos_url": "https://api.github.com/users/alextes/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/alextes/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/alextes/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/alextes",
        "user_view_type": "public"
    }
}