{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\n\nI just updated to NVIM v0.11.0 this morning and have not made any configuration changes to any plugins. Since upgrading I have noticed that I no longer receive the LSP diagnostics inline.\n\nIt appears to impact all Error and Warning notifications.\n\n- My full set up example (no error text from diagnostic on rel-line 36)\n![Image](https://github.com/user-attachments/assets/15aa2614-966c-485b-a395-85adabbbb934)\n- Minimal set up example with default configs\n![Image](https://github.com/user-attachments/assets/325aa2a9-3031-41d4-8e7e-dcea4a3ce528)\n\n### Steps to reproduce\n\n- Upgrade NVIM to v0.11.0\n- Create `minimal.lua` and `test.py`\n- Inside `test.py` can have any generic python test script\n- Purposely set a Value error or a malformed if/else statement\n- Run `nvim --clean -u minimal.lua test.py`\n- Inside `minimal.lua` is:\n```\nfor name, url in pairs {\n  lspconfig = 'https://github.com/neovim/nvim-lspconfig',\n  mason = 'https://github.com/williamboman/mason.nvim',\n  mason_lspconfig = 'https://github.com/williamboman/mason-lspconfig.nvim',\n  cmp_nvim_lsp = 'https://github.com/hrsh7th/cmp-nvim-lsp',\n} do\n  local install_path = vim.fn.fnamemodify('nvim_issue/' .. name, ':p')\n  if vim.fn.isdirectory(install_path) == 0 then\n    vim.fn.system({ 'git', 'clone', '--depth=1', url, install_path })\n  end\n  vim.opt.runtimepath:append(install_path)\nend\n\nvim.cmd([[set rtp+=nvim_issue/mason.nvim]])\n\n-- LSP setup mimicking your original config\nlocal lspconfig = require('lspconfig')\nlocal mason = require('mason')\nlocal mason_lspconfig = require('mason-lspconfig')\nlocal capabilities = require('cmp_nvim_lsp').default_capabilities()\n\nmason.setup()\n\nmason_lspconfig.setup({\n  ensure_installed = { \"pyright\" },\n})\n\nmason_lspconfig.setup_handlers({\n  function(server_name)\n    lspconfig[server_name].setup({\n      capabilities = capabilities,\n      settings = {\n        Lua = {\n          diagnostics = {\n            globals = { 'vim', 'Snacks' },\n          },\n        },\n      },\n    })\n  end,\n})\n\nvim.api.nvim_create_autocmd('LspAttach', {\n  callback = function(args)\n    local bufnr = args.buf\n    local opts = { buffer = bufnr }\n    vim.keymap.set('n', 'gd', vim.lsp.buf.definition, opts)\n    vim.keymap.set('n', 'K', vim.lsp.buf.hover, opts)\n  end,\n})\n```\n\n### Expected behavior\n\nThe diagnostic info should appear be inline.\nFor example:\n- \"Expected module name\" error should appear inline when no module is provided to an import statement\n![Image](https://github.com/user-attachments/assets/adab97ba-6e0e-4f0c-ba62-0eac220e6718)\n\n### Nvim version (nvim -v)\n\nv0.11.0\n\n### Vim (not Nvim) behaves the same?\n\nNo sure\n\n### Operating system/version\n\nMacOS 15.4\n\n### Terminal name/version\n\nTerminal, 2.14\n\n### $TERM environment variable\n\nxterm-256color\n\n### Installation\n\nhomebrew",
    "closed_at": "2025-04-09T00:43:08Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/143810377?v=4",
        "events_url": "https://api.github.com/users/lupes14/events{/privacy}",
        "followers_url": "https://api.github.com/users/lupes14/followers",
        "following_url": "https://api.github.com/users/lupes14/following{/other_user}",
        "gists_url": "https://api.github.com/users/lupes14/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/lupes14",
        "id": 143810377,
        "login": "lupes14",
        "node_id": "U_kgDOCJJfSQ",
        "organizations_url": "https://api.github.com/users/lupes14/orgs",
        "received_events_url": "https://api.github.com/users/lupes14/received_events",
        "repos_url": "https://api.github.com/users/lupes14/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/lupes14/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/lupes14/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/lupes14",
        "user_view_type": "public"
    },
    "comment_data": [
        {
            "author_association": "CONTRIBUTOR",
            "body": "I think that is intentional. Virtual text diagnostic is no longer enabled by default. Please read `news.txt` for details",
            "created_at": "2025-04-08T23:37:55Z",
            "html_url": "https://github.com/neovim/neovim/issues/33396#issuecomment-2787870720",
            "id": 2787870720,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33396",
            "node_id": "IC_kwDOAPphoM6mK4gA",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2787870720/reactions"
            },
            "updated_at": "2025-04-08T23:37:55Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2787870720",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/111893501?v=4",
                "events_url": "https://api.github.com/users/brianhuster/events{/privacy}",
                "followers_url": "https://api.github.com/users/brianhuster/followers",
                "following_url": "https://api.github.com/users/brianhuster/following{/other_user}",
                "gists_url": "https://api.github.com/users/brianhuster/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/brianhuster",
                "id": 111893501,
                "login": "brianhuster",
                "node_id": "U_kgDOBqtb_Q",
                "organizations_url": "https://api.github.com/users/brianhuster/orgs",
                "received_events_url": "https://api.github.com/users/brianhuster/received_events",
                "repos_url": "https://api.github.com/users/brianhuster/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/brianhuster/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/brianhuster/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/brianhuster",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "@brianhuster ahh you are correct, I missed that in the change notes my first read through :)",
            "created_at": "2025-04-09T00:43:01Z",
            "html_url": "https://github.com/neovim/neovim/issues/33396#issuecomment-2787951867",
            "id": 2787951867,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/33396",
            "node_id": "IC_kwDOAPphoM6mLMT7",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2787951867/reactions"
            },
            "updated_at": "2025-04-09T00:43:01Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2787951867",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/143810377?v=4",
                "events_url": "https://api.github.com/users/lupes14/events{/privacy}",
                "followers_url": "https://api.github.com/users/lupes14/followers",
                "following_url": "https://api.github.com/users/lupes14/following{/other_user}",
                "gists_url": "https://api.github.com/users/lupes14/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/lupes14",
                "id": 143810377,
                "login": "lupes14",
                "node_id": "U_kgDOCJJfSQ",
                "organizations_url": "https://api.github.com/users/lupes14/orgs",
                "received_events_url": "https://api.github.com/users/lupes14/received_events",
                "repos_url": "https://api.github.com/users/lupes14/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/lupes14/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lupes14/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/lupes14",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 2,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/33396/comments",
    "created_at": "2025-04-08T21:29:35Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/33396/events",
    "html_url": "https://github.com/neovim/neovim/issues/33396",
    "id": 2980991906,
    "labels": [
        {
            "color": "c5def5",
            "default": false,
            "description": null,
            "id": 662566370,
            "name": "lsp",
            "node_id": "MDU6TGFiZWw2NjI1NjYzNzA=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/lsp"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/33396/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM6xrlOi",
    "number": 33396,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/33396/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "completed",
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/33396/timeline",
    "title": "LSP: inline diagnostics no longer appearing after upgrading to NVIM v0.11.0",
    "type": {
        "color": "red",
        "created_at": "2024-01-25T10:10:19Z",
        "description": "An unexpected problem or behavior",
        "id": 597163,
        "is_enabled": true,
        "name": "Bug",
        "node_id": "IT_kwDOAGK_Pc4ACRyr",
        "updated_at": "2024-07-26T10:12:30Z"
    },
    "updated_at": "2025-04-09T00:43:08Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/33396",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/143810377?v=4",
        "events_url": "https://api.github.com/users/lupes14/events{/privacy}",
        "followers_url": "https://api.github.com/users/lupes14/followers",
        "following_url": "https://api.github.com/users/lupes14/following{/other_user}",
        "gists_url": "https://api.github.com/users/lupes14/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/lupes14",
        "id": 143810377,
        "login": "lupes14",
        "node_id": "U_kgDOCJJfSQ",
        "organizations_url": "https://api.github.com/users/lupes14/orgs",
        "received_events_url": "https://api.github.com/users/lupes14/received_events",
        "repos_url": "https://api.github.com/users/lupes14/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/lupes14/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/lupes14/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/lupes14",
        "user_view_type": "public"
    }
}