{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "body": "### Problem\n\ntesting with 0.10.4/0.11.1\n\nopen terminal inside nvim by :terminal \n\ncat a big patch file (which contains some binary diff by accident)\n\nnvim crash with following stacktrace:\n\n\n```\n#0  0x00007f6ed32969fc in pthread_kill () from /lib/x86_64-linux-gnu/libc.so.6\n(gdb) bt\n#0  0x00007f6ed32969fc in pthread_kill () from /lib/x86_64-linux-gnu/libc.so.6\n#1  0x00007f6ed3242476 in raise () from /lib/x86_64-linux-gnu/libc.so.6\n#2  0x00007f6ed32287f3 in abort () from /lib/x86_64-linux-gnu/libc.so.6\n#3  0x00007f6ed3289677 in ?? () from /lib/x86_64-linux-gnu/libc.so.6\n#4  0x00007f6ed32a0cfc in ?? () from /lib/x86_64-linux-gnu/libc.so.6\n#5  0x00007f6ed32a4c7c in ?? () from /lib/x86_64-linux-gnu/libc.so.6\n#6  0x00007f6ed32a5909 in realloc () from /lib/x86_64-linux-gnu/libc.so.6\n#7  0x000055766ce7a5cf in xrealloc (ptr=0x5576926913c0, size=0) at /home/xwang/project/neovim/src/nvim/memory.c:178\n#8  0x000055766cfc9e2e in term_settermprop (prop=VTERM_PROP_TITLE, val=0x7fff21498120, data=0x55769260c270) at /home/xwang/project/neovim/src/nvim/terminal.c:1309\n#9  0x000055766d034105 in settermprop (prop=VTERM_PROP_TITLE, val=0x7fff21498120, user=0x55769267c040) at /home/xwang/project/neovim/src/nvim/vterm/screen.c:439\n#10 0x000055766d0367c2 in vterm_state_set_termprop (state=0x557692f520d0, prop=VTERM_PROP_TITLE, val=0x7fff21498120) at /home/xwang/project/neovim/src/nvim/vterm/state.c:2375\n#11 0x000055766d03d3dc in settermprop_string (state=0x557692f520d0, prop=VTERM_PROP_TITLE, frag=...) at /home/xwang/project/neovim/src/nvim/vterm/state.c:545\n#12 0x000055766d03b141 in on_osc (command=0, frag=..., user=0x557692f520d0) at /home/xwang/project/neovim/src/nvim/vterm/state.c:1950\n#13 0x000055766d0306b7 in string_fragment (vt=0x557692ad7e70, str=0x55769445f9d7 \"\", len=0, final=false) at /home/xwang/project/neovim/src/nvim/vterm/parser.c:89\n#14 0x000055766d02fc4d in vterm_input_write (vt=0x557692ad7e70, bytes=0x55769445f240 \"\", len=4095) at /home/xwang/project/neovim/src/nvim/vterm/parser.c:165\n#15 0x000055766cfc7814 in terminal_receive (term=0x55769260c270, data=0x55769445f240 \"\", len=4095) at /home/xwang/project/neovim/src/nvim/terminal.c:1114\n#16 0x000055766ccc369e in on_channel_output (stream=0x55769266f418, chan=0x55769266f230, buf=0x55769445f240 \"\", count=4095, eof=false, reader=0x55769266f918) at /home/xwang/project/neovim/src/nvim/channel.c:681\n#17 0x000055766ccc2e21 in on_channel_data (stream=0x55769266f418, buf=0x55769445f240 \"\", count=4095, data=0x55769266f230, eof=false) at /home/xwang/project/neovim/src/nvim/channel.c:653\n#18 0x000055766cd797bf in read_event (argv=0x7fff21498468) at /home/xwang/project/neovim/src/nvim/event/rstream.c:180\n#19 0x000055766cd79715 in invoke_read_cb (stream=0x55769266f418, eof=false) at /home/xwang/project/neovim/src/nvim/event/rstream.c:233\n#20 0x000055766cd79173 in read_cb (uvstream=0x55769266f420, cnt=4095, buf=0x7fff21498570) at /home/xwang/project/neovim/src/nvim/event/rstream.c:135\n#21 0x000055766d13f22c in uv.read ()\n#22 0x000055766d13fb78 in uv.stream_io ()\n#23 0x000055766d148551 in uv.io_poll ()\n#24 0x000055766d1342af in uv_run ()\n#25 0x000055766cd765a2 in loop_uv_run (loop=0x55766d2ea358 <main_loop>, ms=0) at /home/xwang/project/neovim/src/nvim/event/loop.c:61\n#26 0x000055766cd764dd in loop_poll_events (loop=0x55766d2ea358 <main_loop>, ms=0) at /home/xwang/project/neovim/src/nvim/event/loop.c:82\n#27 0x000055766ceeace9 in os_breakcheck () at /home/xwang/project/neovim/src/nvim/os/input.c:207\n#28 0x000055766cf9d9bf in state_handle_k_event () at /home/xwang/project/neovim/src/nvim/state.c:131\n#29 0x000055766cfc8568 in terminal_execute (state=0x7fff2149c730, key=-26365) at /home/xwang/project/neovim/src/nvim/terminal.c:894\n#30 0x000055766cf9d919 in state_enter (s=0x7fff2149c730) at /home/xwang/project/neovim/src/nvim/state.c:102\n#31 0x000055766cfc7ea4 in terminal_enter () at /home/xwang/project/neovim/src/nvim/terminal.c:740\n#32 0x000055766ccfff23 in edit (cmdchar=105, startln=false, count=1) at /home/xwang/project/neovim/src/nvim/edit.c:1284\n#33 0x000055766ceaddfa in invoke_edit (cap=0x7fff2149c970, repl=0, cmd=105, startln=0) at /home/xwang/project/neovim/src/nvim/normal.c:6282\n#34 0x000055766cea8617 in nv_edit (cap=0x7fff2149c970) at /home/xwang/project/neovim/src/nvim/normal.c:6254\n#35 0x000055766cea5b84 in normal_execute (state=0x7fff2149c900, key=105) at /home/xwang/project/neovim/src/nvim/normal.c:1244\n#36 0x000055766cf9d919 in state_enter (s=0x7fff2149c900) at /home/xwang/project/neovim/src/nvim/state.c:102\n#37 0x000055766cea0fc4 in normal_enter (cmdwin=false, noexmode=false) at /home/xwang/project/neovim/src/nvim/normal.c:523\n#38 0x000055766ce3c8a9 in main (argc=2, argv=0x7fff2149cd58) at /home/xwang/project/neovim/src/nvim/main.c:651\n```\n\n### Steps to reproduce\n\ncat use following big patch, I got it 100 % reproducible \n\n[out.tar.xz.log](https://github.com/user-attachments/files/20220558/out.tar.xz.log)\n\n(note: unpack as tar.xz because github doesn't allow tar.xz attachment)\n\n### Expected behavior\n\nnot crash\n\n### Nvim version (nvim -v)\n\n0.11.1/0.10.4\n\n### Vim (not Nvim) behaves the same?\n\nnot tried\n\n### Operating system/version\n\nubuntu 22.04\n\n### Terminal name/version\n\nkitty/neovide remote\n\n### $TERM environment variable\n\nxterm-kitty\n\n### Installation\n\nbuild from repo",
    "closed_at": "2025-05-29T18:29:18Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/8965202?v=4",
        "events_url": "https://api.github.com/users/gpanders/events{/privacy}",
        "followers_url": "https://api.github.com/users/gpanders/followers",
        "following_url": "https://api.github.com/users/gpanders/following{/other_user}",
        "gists_url": "https://api.github.com/users/gpanders/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/gpanders",
        "id": 8965202,
        "login": "gpanders",
        "node_id": "MDQ6VXNlcjg5NjUyMDI=",
        "organizations_url": "https://api.github.com/users/gpanders/orgs",
        "received_events_url": "https://api.github.com/users/gpanders/received_events",
        "repos_url": "https://api.github.com/users/gpanders/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/gpanders/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/gpanders/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/gpanders",
        "user_view_type": "public"
    },
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "ASAN:\n```\n**/src/nvim/terminal.c:1312:24: runtime error: applying non-zero offset 76 to null pointer\n    #0 0x61340c30e50d in term_settermprop **/src/nvim/terminal.c:1312:24\n    #1 0x61340c598d1f in settermprop **/src/nvim/vterm/screen.c:439:12\n    #2 0x61340c5ac3e8 in vterm_state_set_termprop **/src/nvim/vterm/state.c:2373:10\n    #3 0x61340c5e2b52 in settermprop_string **/src/nvim/vterm/state.c:545:10\n    #4 0x61340c5d3bd2 in on_osc **/src/nvim/vterm/state.c:1950:5\n    #5 0x61340c57b7fc in string_fragment **/src/nvim/vterm/parser.c:89:7\n    #6 0x61340c574490 in vterm_input_write **/src/nvim/vterm/parser.c:193:9\n    #7 0x61340c2ff40a in terminal_receive **/src/nvim/terminal.c:1114:5\n    #8 0x61340b27a363 in on_channel_output **/src/nvim/channel.c:681:5\n    #9 0x61340b2776ab in on_channel_data **/src/nvim/channel.c:653:10\n    #10 0x61340b69592d in read_event **/src/nvim/event/rstream.c:180:23\n    #11 0x61340b695377 in invoke_read_cb **/src/nvim/event/rstream.c:233:3\n    #12 0x61340b6928cf in read_cb **/src/nvim/event/rstream.c:135:3\n    #13 0x61340c7e3bde in uv__read **/.deps/build/src/libuv/src/unix/stream.c:1148:7\n    #14 0x61340c7e1907 in uv__stream_io **/.deps/build/src/libuv/src/unix/stream.c:1208:5\n    #15 0x61340c7eca7c in uv__io_poll **/.deps/build/src/libuv/src/unix/linux.c:1565:11\n    #16 0x61340c7d0ad7 in uv_run **/.deps/build/src/libuv/src/unix/core.c:460:5\n    #17 0x61340b681337 in loop_uv_run **/src/nvim/event/loop.c:61:3\n    #18 0x61340b680fa4 in loop_poll_events **/src/nvim/event/loop.c:82:26\n    #19 0x61340be55815 in os_breakcheck **/src/nvim/os/input.c:207:3\n    #20 0x61340c20bc3d in state_handle_k_event **/src/nvim/state.c:131:5\n    #21 0x61340c304cc9 in terminal_execute **/src/nvim/terminal.c:894:5\n    #22 0x61340c20b9a5 in state_enter **/src/nvim/state.c:102:26\n    #23 0x61340c3024b1 in terminal_enter **/src/nvim/terminal.c:740:3\n    #24 0x61340b40282b in edit **/src/nvim/edit.c:1284:12\n    #25 0x61340bd12b29 in invoke_edit **/src/nvim/normal.c:6284:7\n    #26 0x61340bcecdf2 in nv_edit **/src/nvim/normal.c:6256:5\n    #27 0x61340bcd7faa in normal_execute **/src/nvim/normal.c:1246:3\n    #28 0x61340c20b9a5 in state_enter **/src/nvim/state.c:102:26\n    #29 0x61340bcbab31 in normal_enter **/src/nvim/normal.c:523:3\n    #30 0x61340ba3bcf2 in main **/src/nvim/main.c:654:3\n    #31 0x7dfa2a36d6b4 in __libc_start_call_main /usr/src/debug/glibc/glibc/csu/../sysdeps/nptl/libc_start_call_main.h:58:16\n    #32 0x7dfa2a36d768 in __libc_start_main /usr/src/debug/glibc/glibc/csu/../csu/libc-start.c:360:3\n    #33 0x61340ae8ad44 in _start (**/build/bin/nvim+0xc75d44) (BuildId: 4669fcdc20da4bbe3b1e1e3db64abdeb74a51870)\n\nSUMMARY: UndefinedBehaviorSanitizer: undefined-behavior **/src/nvim/terminal.c:1312:24 \n```",
            "created_at": "2025-05-15T06:28:21Z",
            "html_url": "https://github.com/neovim/neovim/issues/34028#issuecomment-2882707913",
            "id": 2882707913,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34028",
            "node_id": "IC_kwDOAPphoM6r0qHJ",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2882707913/reactions"
            },
            "updated_at": "2025-05-15T06:28:21Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2882707913",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I'm taking a look at this issue for my first issue so just wanted to note that I don't have 100% confidence in this assessment.\n\nSo i've been poking around in a debugger once it crashes and the issue is that `term_settermprop()` is being called to set the title property on the virtual terminal even though the title is null here:\n\nhttps://github.com/neovim/neovim/blob/a87aa68ed0e79389ba2e0b94a727f69303c62b71/src/nvim/terminal.c#L1312\n\nIt sounds like the reason the title is null is that virtual terminals don't have a title as is noted in `vterm_state_set_termprop()` here:\n\nhttps://github.com/neovim/neovim/blob/a87aa68ed0e79389ba2e0b94a727f69303c62b71/src/nvim/vterm/state.c#L2379-L2382\n\nI added a check for icons and titles in `settermprop()` here:\n\nhttps://github.com/neovim/neovim/commit/a43c7a7fa8f54dc47a1c718390c89f193fc20a7d\n\nThis fixes the issue but I worry there is a deeper issue further up the callstack, and I'm not 100% this doesn't have side effects in other places.\n\nDoes anyone with more context have any idea if this approach is a bad idea?",
            "created_at": "2025-05-18T21:30:20Z",
            "html_url": "https://github.com/neovim/neovim/issues/34028#issuecomment-2889221557",
            "id": 2889221557,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34028",
            "node_id": "IC_kwDOAPphoM6sNgW1",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2889221557/reactions"
            },
            "updated_at": "2025-05-18T21:32:39Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2889221557",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/86860060?v=4",
                "events_url": "https://api.github.com/users/The-Briel-Deal/events{/privacy}",
                "followers_url": "https://api.github.com/users/The-Briel-Deal/followers",
                "following_url": "https://api.github.com/users/The-Briel-Deal/following{/other_user}",
                "gists_url": "https://api.github.com/users/The-Briel-Deal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/The-Briel-Deal",
                "id": 86860060,
                "login": "The-Briel-Deal",
                "node_id": "MDQ6VXNlcjg2ODYwMDYw",
                "organizations_url": "https://api.github.com/users/The-Briel-Deal/orgs",
                "received_events_url": "https://api.github.com/users/The-Briel-Deal/received_events",
                "repos_url": "https://api.github.com/users/The-Briel-Deal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/The-Briel-Deal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/The-Briel-Deal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/The-Briel-Deal",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> I added a check for icons and titles in `settermprop()` here:\n> \n> [a43c7a7](https://github.com/neovim/neovim/commit/a43c7a7fa8f54dc47a1c718390c89f193fc20a7d)\n> \n> This fixes the issue but I worry there is a deeper issue further up the callstack, and I'm not 100% this doesn't have side effects in other places.\n> \n> Does anyone with more context have any idea if this approach is a bad idea?\n\nThis doesn't make sense. What does libvterm not storing the title have to do with Nvim do storing the title?",
            "created_at": "2025-05-18T23:52:58Z",
            "html_url": "https://github.com/neovim/neovim/issues/34028#issuecomment-2889284865",
            "id": 2889284865,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34028",
            "node_id": "IC_kwDOAPphoM6sNv0B",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2889284865/reactions"
            },
            "updated_at": "2025-05-18T23:52:58Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2889284865",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Ah I see, it seems like libvterm is just a library that we've vendored in tree with maybe some slight modifications. For some reason I thought that the code in the vterm dir was code dedicated to the embedded terminal emulator.\n\nThe core of the issue is that we pass libvterm our callback `term_settermprop()` with the corresponding `Terminal` state. And for whatever reason `term->title` is null when libvterm calls our callback, at which point we try to memcpy into our null title.\n\nIt also seems like the reason it's calling us back and asking us to set the title when that file is catted is because that file contains an OSC2 escape sequence.\n\nI need to look deeper into this tomorrow, we could just add a null check in our callback, but I'm really curious why it's null since I imagine us having the title serves some purpose?",
            "created_at": "2025-05-19T01:13:34Z",
            "html_url": "https://github.com/neovim/neovim/issues/34028#issuecomment-2889355734",
            "id": 2889355734,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34028",
            "node_id": "IC_kwDOAPphoM6sOBHW",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2889355734/reactions"
            },
            "updated_at": "2025-05-19T01:13:34Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2889355734",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/86860060?v=4",
                "events_url": "https://api.github.com/users/The-Briel-Deal/events{/privacy}",
                "followers_url": "https://api.github.com/users/The-Briel-Deal/followers",
                "following_url": "https://api.github.com/users/The-Briel-Deal/following{/other_user}",
                "gists_url": "https://api.github.com/users/The-Briel-Deal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/The-Briel-Deal",
                "id": 86860060,
                "login": "The-Briel-Deal",
                "node_id": "MDQ6VXNlcjg2ODYwMDYw",
                "organizations_url": "https://api.github.com/users/The-Briel-Deal/orgs",
                "received_events_url": "https://api.github.com/users/The-Briel-Deal/received_events",
                "repos_url": "https://api.github.com/users/The-Briel-Deal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/The-Briel-Deal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/The-Briel-Deal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/The-Briel-Deal",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Quick helper in case anyone figures out the cause before me. I've bisected the size of the file you need to cat to reproduce this down to 50 bytes in size. You can probably still chop a bit off each end but this should still be better than the original file to reproduce.\n\n[smallest.log](https://github.com/user-attachments/files/20401197/smallest.log)\n\nAnd as a single command:\n```sh\necho 'pobFiFnasKucG5FdHTChTcfLAcZuE9W1Yq+wCMAq/FAn5Ozd/V5NSYF/HtY85YBhDHc=' | base64 -d\n```",
            "created_at": "2025-05-22T22:01:34Z",
            "html_url": "https://github.com/neovim/neovim/issues/34028#issuecomment-2902674425",
            "id": 2902674425,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34028",
            "node_id": "IC_kwDOAPphoM6tA0v5",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2902674425/reactions"
            },
            "updated_at": "2025-05-22T22:13:15Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2902674425",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/86860060?v=4",
                "events_url": "https://api.github.com/users/The-Briel-Deal/events{/privacy}",
                "followers_url": "https://api.github.com/users/The-Briel-Deal/followers",
                "following_url": "https://api.github.com/users/The-Briel-Deal/following{/other_user}",
                "gists_url": "https://api.github.com/users/The-Briel-Deal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/The-Briel-Deal",
                "id": 86860060,
                "login": "The-Briel-Deal",
                "node_id": "MDQ6VXNlcjg2ODYwMDYw",
                "organizations_url": "https://api.github.com/users/The-Briel-Deal/orgs",
                "received_events_url": "https://api.github.com/users/The-Briel-Deal/received_events",
                "repos_url": "https://api.github.com/users/The-Briel-Deal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/The-Briel-Deal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/The-Briel-Deal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/The-Briel-Deal",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Quick update on this:\n\nI've got a pretty small functional test to reproduce this here (it's the second test, I also added two working ones for OSC-0 and OSC-2):\nhttps://github.com/neovim/neovim/commit/cd55832fb20e080a4bfdf1435b56ebd776136d9c\n\nThe issue from neovims perspective is that `term_settermprop()` is being called by libvterm multiple times with a string `frag` that has `frag.initial` and `frag.final` set to false, this causes `term_settermprop()` to never initialize `terminal.title_size` which is continually left at 0 since it only grows by factors of 2. So the length continues to grow but the size is never increased so `xrealloc` just keeps allocating 1 byte while the title's length continues to grow.\n\nOnce `term->title_len` is roughly 27 bytes over the actual allocated buffers length we start getting undefined behavior since bytes are being overwritten. With the test above we get an error from `realloc()` saying `realloc(): invalid next size`, but I also got the invalid offset on a null pointer earlier when catting out the entire file.\n\nIt would be super easy to just add a simple check here to prevent this overrun, but I feel like the better solution would be to actually fix the issue causing us to never get an initial frag from libvterm. So I'm going to spend some time trying to figure that out tomorrow.",
            "created_at": "2025-05-25T03:09:34Z",
            "html_url": "https://github.com/neovim/neovim/issues/34028#issuecomment-2907578243",
            "id": 2907578243,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34028",
            "node_id": "IC_kwDOAPphoM6tTh-D",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2907578243/reactions"
            },
            "updated_at": "2025-05-25T03:09:34Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2907578243",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/86860060?v=4",
                "events_url": "https://api.github.com/users/The-Briel-Deal/events{/privacy}",
                "followers_url": "https://api.github.com/users/The-Briel-Deal/followers",
                "following_url": "https://api.github.com/users/The-Briel-Deal/following{/other_user}",
                "gists_url": "https://api.github.com/users/The-Briel-Deal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/The-Briel-Deal",
                "id": 86860060,
                "login": "The-Briel-Deal",
                "node_id": "MDQ6VXNlcjg2ODYwMDYw",
                "organizations_url": "https://api.github.com/users/The-Briel-Deal/orgs",
                "received_events_url": "https://api.github.com/users/The-Briel-Deal/received_events",
                "repos_url": "https://api.github.com/users/The-Briel-Deal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/The-Briel-Deal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/The-Briel-Deal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/The-Briel-Deal",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "A shorter repro:\n```lua\nlocal chan = vim.api.nvim_open_term(0, {})\n-- for x = 0, 0xff do\n  -- vim.api.nvim_chan_send(chan, '\\x1b' .. string.char(x) .. ']\\x1d0aaaaaaaaaaaaaaaaaaaaaaaaaaa\\r\\n')\n  vim.api.nvim_chan_send(chan, '\\x1b' .. '\\0' .. ']\\x1d0aaaaaaaaaaaaaaaaaaaaaaaaaaa\\r\\n')\n-- end\n```",
            "created_at": "2025-05-26T01:23:40Z",
            "html_url": "https://github.com/neovim/neovim/issues/34028#issuecomment-2908257805",
            "id": 2908257805,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34028",
            "node_id": "IC_kwDOAPphoM6tWH4N",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2908257805/reactions"
            },
            "updated_at": "2025-05-26T01:28:12Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2908257805",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/154880267?v=4",
                "events_url": "https://api.github.com/users/nenahp/events{/privacy}",
                "followers_url": "https://api.github.com/users/nenahp/followers",
                "following_url": "https://api.github.com/users/nenahp/following{/other_user}",
                "gists_url": "https://api.github.com/users/nenahp/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/nenahp",
                "id": 154880267,
                "login": "nenahp",
                "node_id": "U_kgDOCTtJCw",
                "organizations_url": "https://api.github.com/users/nenahp/orgs",
                "received_events_url": "https://api.github.com/users/nenahp/received_events",
                "repos_url": "https://api.github.com/users/nenahp/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/nenahp/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/nenahp/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/nenahp",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Ty! I'll replace my repro test with that if thats alright @nenahp?",
            "created_at": "2025-05-26T13:40:01Z",
            "html_url": "https://github.com/neovim/neovim/issues/34028#issuecomment-2909799643",
            "id": 2909799643,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/34028",
            "node_id": "IC_kwDOAPphoM6tcATb",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2909799643/reactions"
            },
            "updated_at": "2025-05-26T13:40:01Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2909799643",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/86860060?v=4",
                "events_url": "https://api.github.com/users/The-Briel-Deal/events{/privacy}",
                "followers_url": "https://api.github.com/users/The-Briel-Deal/followers",
                "following_url": "https://api.github.com/users/The-Briel-Deal/following{/other_user}",
                "gists_url": "https://api.github.com/users/The-Briel-Deal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/The-Briel-Deal",
                "id": 86860060,
                "login": "The-Briel-Deal",
                "node_id": "MDQ6VXNlcjg2ODYwMDYw",
                "organizations_url": "https://api.github.com/users/The-Briel-Deal/orgs",
                "received_events_url": "https://api.github.com/users/The-Briel-Deal/received_events",
                "repos_url": "https://api.github.com/users/The-Briel-Deal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/The-Briel-Deal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/The-Briel-Deal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/The-Briel-Deal",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 8,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/34028/comments",
    "created_at": "2025-05-15T06:15:34Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/34028/events",
    "html_url": "https://github.com/neovim/neovim/issues/34028",
    "id": 3065083329,
    "labels": [
        {
            "color": "c5def5",
            "default": false,
            "description": "built-in :terminal or :shell",
            "id": 212696822,
            "name": "terminal",
            "node_id": "MDU6TGFiZWwyMTI2OTY4MjI=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/terminal"
        },
        {
            "color": "0E8A16",
            "default": false,
            "description": "issue contains a stacktrace/ASAN log",
            "id": 435854079,
            "name": "has:backtrace",
            "node_id": "MDU6TGFiZWw0MzU4NTQwNzk=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/has:backtrace"
        },
        {
            "color": "F9D0C4",
            "default": false,
            "description": "issue reporting a crash or segfault",
            "id": 435854234,
            "name": "bug-crash",
            "node_id": "MDU6TGFiZWw0MzU4NTQyMzQ=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug-crash"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/34028/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM62sXXB",
    "number": 34028,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/34028/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "completed",
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/34028/timeline",
    "title": "crash when cat big file inside terminal of nvim",
    "type": {
        "color": "red",
        "created_at": "2024-01-25T10:10:19Z",
        "description": "An unexpected problem or behavior",
        "id": 597163,
        "is_enabled": true,
        "name": "Bug",
        "node_id": "IT_kwDOAGK_Pc4ACRyr",
        "updated_at": "2024-07-26T10:12:30Z"
    },
    "updated_at": "2025-05-29T18:29:18Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/34028",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/4547108?v=4",
        "events_url": "https://api.github.com/users/comicfans/events{/privacy}",
        "followers_url": "https://api.github.com/users/comicfans/followers",
        "following_url": "https://api.github.com/users/comicfans/following{/other_user}",
        "gists_url": "https://api.github.com/users/comicfans/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/comicfans",
        "id": 4547108,
        "login": "comicfans",
        "node_id": "MDQ6VXNlcjQ1NDcxMDg=",
        "organizations_url": "https://api.github.com/users/comicfans/orgs",
        "received_events_url": "https://api.github.com/users/comicfans/received_events",
        "repos_url": "https://api.github.com/users/comicfans/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/comicfans/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/comicfans/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/comicfans",
        "user_view_type": "public"
    }
}