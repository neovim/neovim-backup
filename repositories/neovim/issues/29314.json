{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "MEMBER",
    "body": "Currently options can have the following scopes:\r\n\r\n- Buffer local. These options, despite the name, do still have a global value which is used as the default.\r\n- Window local: Despite the name, these options can be dependent on the buffer as well. You can set a window option for all buffers on that window, or for a single buffer, which means there is nested scoping at play.\r\n- Global-local options: These options have a global value and a value that is local to the buffer/window. When a local value doesn't exist, the global value is used instead.\r\n- There is also a much lesser known tab scope for options, which is currently only used for `cmdheight`.\r\n\r\nThese scopes are confusing even to veteran Vim/Neovim users, including Neovim developers. They do not follow a consistent or intuitive pattern and have all sorts of quirks, which can befuddle new and old users alike. The maintenance burden is also much higher for options because of this reason.\r\r\n\r\nI propose a complete revamp of the scoping method we use. Note that while this is a revamp, it aims to keep most of the behavior that makes sense, while removing the unintuitive behaviors of the current method. \r\n\r\nMy proposal is, instead of having different scoping schemes for different options, we instead have a set of scopes that follow a linear hierarchy. Which could look like:\r\nGlobal scope -> Tab scope -> Window scope -> Buffer scope.\r\n\r\nAn option could choose to support one or more (any number) of these scopes. So an option could just use the global scope, or the global and buffer scope, or the global, window and buffer scope.\r\n\r\nThe value of the innermost scope in the scope hierarchy will always be used. For example: If an option has global, window and buffer scopes, first it will check for a value in the buffer scope and use it if it exists, then check window scope if there is no value in the buffer scope, and then use the global value if window scope doesn't have a value either.\r\n\r\nThrough this method, the current scopes could be implemented like this:\r\n1. Buffer local and Global-local buffer options would use the Global and Buffer scopes.\r\n2. Window local options would use the Global, Window and Buffer scopes.\r\n3. Global-local window options would use the Global and Window scopes.\r\n4. Global-local tab options would use the Global and Tab scopes.\r\n\r\nThis _should_ keep most of the behavior that options currently have, whilst getting rid of the weird quirks and inconsistencies. Buffer-local and global-local options will have almost the same behavior as they do now. Window-local options will have a lot of breaking changes, but window-local options are already broken and unintuitive as they are currently, so we have to fix that one way or another anyway.\r\n\r\nThis approach also allows us the opportunity to do things like add an option that uses a new combination of scopes (e.g. tab and window) in the future, with zero additional complexity.\r\n\r\nKeeping almost complete backwards compatibility with `:set` and other Vim script option interfaces is also an explicit goal of this revamp. This is to ensure Vim plugins don't have to do anything special to continue supporting Neovim.\r\n\r\nLua interfaces for setting options and the Neovim API will have some changed behavior due to the change in scoping.\r\n\r\nCC: @bfredl, @justinmk, @zeertzjq, @lewis6991, @dundargoc ",
    "closed_at": null,
    "comment_data": [],
    "comments": 0,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/29314/comments",
    "created_at": "2024-06-13T10:20:06Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/29314/events",
    "html_url": "https://github.com/neovim/neovim/issues/29314",
    "id": 2350766501,
    "labels": [
        {
            "color": "C5DEF5",
            "default": false,
            "description": "changes that are not features or bugfixes",
            "id": 106949155,
            "name": "refactor",
            "node_id": "MDU6TGFiZWwxMDY5NDkxNTU=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/refactor"
        },
        {
            "color": "C5DEF5",
            "default": false,
            "description": "compatibility with Vim or older Neovim",
            "id": 109899712,
            "name": "compatibility",
            "node_id": "MDU6TGFiZWwxMDk4OTk3MTI=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/compatibility"
        },
        {
            "color": "C5DEF5",
            "default": false,
            "description": "configuration, settings",
            "id": 4242493821,
            "name": "options",
            "node_id": "LA_kwDOAPphoM7831F9",
            "url": "https://api.github.com/repos/neovim/neovim/labels/options"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/29314/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 224,
        "created_at": "2014-11-26T22:13:11Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
            "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
            "followers_url": "https://api.github.com/users/justinmk/followers",
            "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/justinmk",
            "id": 1359421,
            "login": "justinmk",
            "node_id": "MDQ6VXNlcjEzNTk0MjE=",
            "organizations_url": "https://api.github.com/users/justinmk/orgs",
            "received_events_url": "https://api.github.com/users/justinmk/received_events",
            "repos_url": "https://api.github.com/users/justinmk/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/justinmk"
        },
        "description": "Zero priority; no timeline. Promote an item from this state by taking ownership of it.",
        "due_on": null,
        "html_url": "https://github.com/neovim/neovim/milestone/9",
        "id": 881978,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/9/labels",
        "node_id": "MDk6TWlsZXN0b25lODgxOTc4",
        "number": 9,
        "open_issues": 260,
        "state": "open",
        "title": "unplanned",
        "updated_at": "2024-06-17T22:58:49Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/9"
    },
    "node_id": "I_kwDOAPphoM6MHdml",
    "number": 29314,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 8,
        "-1": 0,
        "confused": 0,
        "eyes": 1,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 9,
        "url": "https://api.github.com/repos/neovim/neovim/issues/29314/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/29314/timeline",
    "title": "Revamp option scopes",
    "updated_at": "2024-06-17T22:58:49Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/29314",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/29580810?v=4",
        "events_url": "https://api.github.com/users/famiu/events{/privacy}",
        "followers_url": "https://api.github.com/users/famiu/followers",
        "following_url": "https://api.github.com/users/famiu/following{/other_user}",
        "gists_url": "https://api.github.com/users/famiu/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/famiu",
        "id": 29580810,
        "login": "famiu",
        "node_id": "MDQ6VXNlcjI5NTgwODEw",
        "organizations_url": "https://api.github.com/users/famiu/orgs",
        "received_events_url": "https://api.github.com/users/famiu/received_events",
        "repos_url": "https://api.github.com/users/famiu/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/famiu/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/famiu/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/famiu"
    }
}