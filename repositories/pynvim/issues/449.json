{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "The [Buffer class](https://github.com/neovim/pynvim/blob/master/pynvim/api/buffer.py#L29) makes unexpected RPC calls.\r\n\r\nThis is due to the `__len__` method being called during boolean tests.\r\n\r\nFor example, the following code will print `2`.\r\n\r\n```python\r\nclass Example:\r\n    def __len__(self) -> int:\r\n        print(2)\r\n        return 0\r\n\r\n\r\nexample = Example()\r\n\r\nif example:\r\n    pass\r\n```\r\n\r\nThis is very surprising behaviour, and there is absoutely no way to fix it without breaking backwards compatibility.\r\n\r\nBut it should be documentated, because this will actually break your code if you are using `Buffer` class from another thread.\r\n\r\nIt took me a quite a bit of effort to figure out that an `or` statement was causing crashes in my plugin.",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [
        {
            "author_association": "CONTRIBUTOR",
            "body": "It could also implement `__bool__` itself (returning `True` always), couldn't it?  https://docs.python.org/3.8/reference/datamodel.html?highlight=__del__#object.__bool__",
            "created_at": "2020-07-13T11:37:33Z",
            "html_url": "https://github.com/neovim/pynvim/issues/449#issuecomment-657508483",
            "id": 657508483,
            "issue_url": "https://api.github.com/repos/neovim/pynvim/issues/449",
            "node_id": "MDEyOklzc3VlQ29tbWVudDY1NzUwODQ4Mw==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/pynvim/issues/comments/657508483/reactions"
            },
            "updated_at": "2020-07-13T11:37:33Z",
            "url": "https://api.github.com/repos/neovim/pynvim/issues/comments/657508483",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9766?v=4",
                "events_url": "https://api.github.com/users/blueyed/events{/privacy}",
                "followers_url": "https://api.github.com/users/blueyed/followers",
                "following_url": "https://api.github.com/users/blueyed/following{/other_user}",
                "gists_url": "https://api.github.com/users/blueyed/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/blueyed",
                "id": 9766,
                "login": "blueyed",
                "node_id": "MDQ6VXNlcjk3NjY=",
                "organizations_url": "https://api.github.com/users/blueyed/orgs",
                "received_events_url": "https://api.github.com/users/blueyed/received_events",
                "repos_url": "https://api.github.com/users/blueyed/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/blueyed/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/blueyed/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/blueyed",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "I think thats an excellent idea, even though it would be a breaking change.\r\n\r\nim not sure what our policy is on that though",
            "created_at": "2020-07-13T16:14:31Z",
            "html_url": "https://github.com/neovim/pynvim/issues/449#issuecomment-657653202",
            "id": 657653202,
            "issue_url": "https://api.github.com/repos/neovim/pynvim/issues/449",
            "node_id": "MDEyOklzc3VlQ29tbWVudDY1NzY1MzIwMg==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/pynvim/issues/comments/657653202/reactions"
            },
            "updated_at": "2020-07-13T16:14:31Z",
            "url": "https://api.github.com/repos/neovim/pynvim/issues/comments/657653202",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/50598611?v=4",
                "events_url": "https://api.github.com/users/ms-jpq/events{/privacy}",
                "followers_url": "https://api.github.com/users/ms-jpq/followers",
                "following_url": "https://api.github.com/users/ms-jpq/following{/other_user}",
                "gists_url": "https://api.github.com/users/ms-jpq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ms-jpq",
                "id": 50598611,
                "login": "ms-jpq",
                "node_id": "MDQ6VXNlcjUwNTk4NjEx",
                "organizations_url": "https://api.github.com/users/ms-jpq/orgs",
                "received_events_url": "https://api.github.com/users/ms-jpq/received_events",
                "repos_url": "https://api.github.com/users/ms-jpq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ms-jpq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ms-jpq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ms-jpq",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Are there any circumstances that you would the buffer to be `false-y`?\r\n\r\nI think it seems reasonable to override `__bool__`. It seems unlikely to break anything? Unless it returns `false` when there are no lines and people are relying on that.",
            "created_at": "2020-08-08T19:58:29Z",
            "html_url": "https://github.com/neovim/pynvim/issues/449#issuecomment-670968023",
            "id": 670968023,
            "issue_url": "https://api.github.com/repos/neovim/pynvim/issues/449",
            "node_id": "MDEyOklzc3VlQ29tbWVudDY3MDk2ODAyMw==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/pynvim/issues/comments/670968023/reactions"
            },
            "updated_at": "2020-08-08T19:58:29Z",
            "url": "https://api.github.com/repos/neovim/pynvim/issues/comments/670968023",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/4466899?v=4",
                "events_url": "https://api.github.com/users/tjdevries/events{/privacy}",
                "followers_url": "https://api.github.com/users/tjdevries/followers",
                "following_url": "https://api.github.com/users/tjdevries/following{/other_user}",
                "gists_url": "https://api.github.com/users/tjdevries/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/tjdevries",
                "id": 4466899,
                "login": "tjdevries",
                "node_id": "MDQ6VXNlcjQ0NjY4OTk=",
                "organizations_url": "https://api.github.com/users/tjdevries/orgs",
                "received_events_url": "https://api.github.com/users/tjdevries/received_events",
                "repos_url": "https://api.github.com/users/tjdevries/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/tjdevries/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/tjdevries/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/tjdevries",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "ya, thats the case.\r\n\r\na very minor breaking change, but then again i wouldn't be surprised if people actually relied on it.\r\n",
            "created_at": "2020-08-08T21:50:09Z",
            "html_url": "https://github.com/neovim/pynvim/issues/449#issuecomment-670977560",
            "id": 670977560,
            "issue_url": "https://api.github.com/repos/neovim/pynvim/issues/449",
            "node_id": "MDEyOklzc3VlQ29tbWVudDY3MDk3NzU2MA==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/pynvim/issues/comments/670977560/reactions"
            },
            "updated_at": "2020-08-08T21:50:09Z",
            "url": "https://api.github.com/repos/neovim/pynvim/issues/comments/670977560",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/50598611?v=4",
                "events_url": "https://api.github.com/users/ms-jpq/events{/privacy}",
                "followers_url": "https://api.github.com/users/ms-jpq/followers",
                "following_url": "https://api.github.com/users/ms-jpq/following{/other_user}",
                "gists_url": "https://api.github.com/users/ms-jpq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ms-jpq",
                "id": 50598611,
                "login": "ms-jpq",
                "node_id": "MDQ6VXNlcjUwNTk4NjEx",
                "organizations_url": "https://api.github.com/users/ms-jpq/orgs",
                "received_events_url": "https://api.github.com/users/ms-jpq/received_events",
                "repos_url": "https://api.github.com/users/ms-jpq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ms-jpq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ms-jpq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ms-jpq",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "PR welcome. We monkey-patch various things, this is more or less idiomatic in python land.",
            "created_at": "2020-08-30T19:22:40Z",
            "html_url": "https://github.com/neovim/pynvim/issues/449#issuecomment-683459730",
            "id": 683459730,
            "issue_url": "https://api.github.com/repos/neovim/pynvim/issues/449",
            "node_id": "MDEyOklzc3VlQ29tbWVudDY4MzQ1OTczMA==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/pynvim/issues/comments/683459730/reactions"
            },
            "updated_at": "2020-08-30T19:22:40Z",
            "url": "https://api.github.com/repos/neovim/pynvim/issues/comments/683459730",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 5,
    "comments_url": "https://api.github.com/repos/neovim/pynvim/issues/449/comments",
    "created_at": "2020-07-13T08:30:01Z",
    "events_url": "https://api.github.com/repos/neovim/pynvim/issues/449/events",
    "html_url": "https://github.com/neovim/pynvim/issues/449",
    "id": 655650839,
    "issue_dependencies_summary": {
        "blocked_by": 0,
        "blocking": 0,
        "total_blocked_by": 0,
        "total_blocking": 0
    },
    "labels": [],
    "labels_url": "https://api.github.com/repos/neovim/pynvim/issues/449/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWU2NTU2NTA4Mzk=",
    "number": 449,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/pynvim/issues/449/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/pynvim",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/pynvim/issues/449/timeline",
    "title": "Buffer class makes unexpected RPC calls",
    "type": {
        "color": "red",
        "created_at": "2024-01-25T10:10:19Z",
        "description": "An unexpected problem or behavior",
        "id": 597163,
        "is_enabled": true,
        "name": "Bug",
        "node_id": "IT_kwDOAGK_Pc4ACRyr",
        "updated_at": "2024-07-26T10:12:30Z"
    },
    "updated_at": "2025-09-22T19:35:56Z",
    "url": "https://api.github.com/repos/neovim/pynvim/issues/449",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/50598611?v=4",
        "events_url": "https://api.github.com/users/ms-jpq/events{/privacy}",
        "followers_url": "https://api.github.com/users/ms-jpq/followers",
        "following_url": "https://api.github.com/users/ms-jpq/following{/other_user}",
        "gists_url": "https://api.github.com/users/ms-jpq/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/ms-jpq",
        "id": 50598611,
        "login": "ms-jpq",
        "node_id": "MDQ6VXNlcjUwNTk4NjEx",
        "organizations_url": "https://api.github.com/users/ms-jpq/orgs",
        "received_events_url": "https://api.github.com/users/ms-jpq/received_events",
        "repos_url": "https://api.github.com/users/ms-jpq/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/ms-jpq/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/ms-jpq/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/ms-jpq",
        "user_view_type": "public"
    }
}