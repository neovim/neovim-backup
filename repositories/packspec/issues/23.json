{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "MEMBER",
    "body": "A somewhat common thing to do is having post-install hooks. Maybe it could be included in the spec?\r\n\r\nA couple of ideas for the syntax (not 100% sure about the name `make`):\r\n```lua\r\nmake = \"./configure && make\"\r\n\r\n-- multiline string, maybe should work just like makefiles?\r\nmake = [[\r\n  ./configure\r\n  make\r\n]]\r\n\r\n-- same, but as an array\r\nmake = {\r\n  \"./configure\",\r\n  \"make\",\r\n}\r\n\r\n-- platform specific\r\nmake = {\r\n  linux = \"./configure && make\",\r\n  win = \"...\",\r\n  [\"*\"] = \"...\", -- wildcard for all platforms?\r\n  [\"linux,mac\"] = \"...\", -- or just autocmd-like syntax\r\n}\r\n\r\n-- maybe vim commands too, but not sure about it being\r\n-- shared as the same field with shell commands\r\nmake = \":UpdateRemotePlugins\"\r\n```",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [
        {
            "author_association": "CONTRIBUTOR",
            "body": "Nitpick: I'd suggest \"build\" or \"run\" over \"make\", to reflect the more general possibilities for \"things I want to do after an install or update\".\n\nWe might also want to be able to say if a hook should run only after install, after install and update, etc ",
            "created_at": "2022-02-13T20:09:25Z",
            "html_url": "https://github.com/neovim/packspec/issues/23#issuecomment-1038396230",
            "id": 1038396230,
            "issue_url": "https://api.github.com/repos/neovim/packspec/issues/23",
            "node_id": "IC_kwDOGzG0uM495KtG",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/packspec/issues/comments/1038396230/reactions"
            },
            "updated_at": "2022-02-13T20:09:25Z",
            "url": "https://api.github.com/repos/neovim/packspec/issues/comments/1038396230",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3729908?v=4",
                "events_url": "https://api.github.com/users/wbthomason/events{/privacy}",
                "followers_url": "https://api.github.com/users/wbthomason/followers",
                "following_url": "https://api.github.com/users/wbthomason/following{/other_user}",
                "gists_url": "https://api.github.com/users/wbthomason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/wbthomason",
                "id": 3729908,
                "login": "wbthomason",
                "node_id": "MDQ6VXNlcjM3Mjk5MDg=",
                "organizations_url": "https://api.github.com/users/wbthomason/orgs",
                "received_events_url": "https://api.github.com/users/wbthomason/received_events",
                "repos_url": "https://api.github.com/users/wbthomason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/wbthomason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/wbthomason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/wbthomason",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "`build` is also what rockspec uses (not that we are tied to it), but I also agree with the naming. Should we specify it by platform? It might get a bit tricky, need to make assumptions if running in powershell, cmd, bash, etc.",
            "created_at": "2022-02-13T20:11:23Z",
            "html_url": "https://github.com/neovim/packspec/issues/23#issuecomment-1038397325",
            "id": 1038397325,
            "issue_url": "https://api.github.com/repos/neovim/packspec/issues/23",
            "node_id": "IC_kwDOGzG0uM495K-N",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/packspec/issues/comments/1038397325/reactions"
            },
            "updated_at": "2022-02-13T20:11:23Z",
            "url": "https://api.github.com/repos/neovim/packspec/issues/comments/1038397325",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/13316262?v=4",
                "events_url": "https://api.github.com/users/mjlbach/events{/privacy}",
                "followers_url": "https://api.github.com/users/mjlbach/followers",
                "following_url": "https://api.github.com/users/mjlbach/following{/other_user}",
                "gists_url": "https://api.github.com/users/mjlbach/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mjlbach",
                "id": 13316262,
                "login": "mjlbach",
                "node_id": "MDQ6VXNlcjEzMzE2MjYy",
                "organizations_url": "https://api.github.com/users/mjlbach/orgs",
                "received_events_url": "https://api.github.com/users/mjlbach/received_events",
                "repos_url": "https://api.github.com/users/mjlbach/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mjlbach/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mjlbach/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mjlbach",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "We could also call it `install_hook`, `update_hook`, `hook`, etc. ",
            "created_at": "2022-02-13T20:13:28Z",
            "html_url": "https://github.com/neovim/packspec/issues/23#issuecomment-1038398542",
            "id": 1038398542,
            "issue_url": "https://api.github.com/repos/neovim/packspec/issues/23",
            "node_id": "IC_kwDOGzG0uM495LRO",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/packspec/issues/comments/1038398542/reactions"
            },
            "updated_at": "2022-02-13T20:13:28Z",
            "url": "https://api.github.com/repos/neovim/packspec/issues/comments/1038398542",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3729908?v=4",
                "events_url": "https://api.github.com/users/wbthomason/events{/privacy}",
                "followers_url": "https://api.github.com/users/wbthomason/followers",
                "following_url": "https://api.github.com/users/wbthomason/following{/other_user}",
                "gists_url": "https://api.github.com/users/wbthomason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/wbthomason",
                "id": 3729908,
                "login": "wbthomason",
                "node_id": "MDQ6VXNlcjM3Mjk5MDg=",
                "organizations_url": "https://api.github.com/users/wbthomason/orgs",
                "received_events_url": "https://api.github.com/users/wbthomason/received_events",
                "repos_url": "https://api.github.com/users/wbthomason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/wbthomason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/wbthomason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/wbthomason",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Some sort of cleanup hook could be useful (to uninstall previous version for example), but is there actually any use case for having the update hook (I assume it's after `git pull/fetch`)?",
            "created_at": "2022-02-13T20:16:02Z",
            "html_url": "https://github.com/neovim/packspec/issues/23#issuecomment-1038400030",
            "id": 1038400030,
            "issue_url": "https://api.github.com/repos/neovim/packspec/issues/23",
            "node_id": "IC_kwDOGzG0uM495Loe",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/packspec/issues/comments/1038400030/reactions"
            },
            "updated_at": "2022-02-13T20:16:02Z",
            "url": "https://api.github.com/repos/neovim/packspec/issues/comments/1038400030",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59243201?v=4",
                "events_url": "https://api.github.com/users/ii14/events{/privacy}",
                "followers_url": "https://api.github.com/users/ii14/followers",
                "following_url": "https://api.github.com/users/ii14/following{/other_user}",
                "gists_url": "https://api.github.com/users/ii14/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ii14",
                "id": 59243201,
                "login": "ii14",
                "node_id": "MDQ6VXNlcjU5MjQzMjAx",
                "organizations_url": "https://api.github.com/users/ii14/orgs",
                "received_events_url": "https://api.github.com/users/ii14/received_events",
                "repos_url": "https://api.github.com/users/ii14/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ii14/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ii14/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ii14",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "```lua\r\nhooks = {\r\n  [\"linux,mac\"] = {\r\n    build = [[...]],\r\n    clean = [[...]],\r\n  },\r\n  [\"win\"] = {\r\n    build = [[...]],\r\n    clean = [[...]],\r\n  },\r\n}\r\n\r\nhooks = {\r\n  build = {\r\n    [\"linux,mac\"] = [[...]],\r\n    [\"win\"] = [[...]],\r\n  },\r\n  clean = {\r\n    [\"linux,mac\"] = [[...]],\r\n    [\"win\"] = [[...]],\r\n  },\r\n}\r\n```",
            "created_at": "2022-02-13T20:23:05Z",
            "html_url": "https://github.com/neovim/packspec/issues/23#issuecomment-1038404002",
            "id": 1038404002,
            "issue_url": "https://api.github.com/repos/neovim/packspec/issues/23",
            "node_id": "IC_kwDOGzG0uM495Mmi",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/packspec/issues/comments/1038404002/reactions"
            },
            "updated_at": "2022-02-13T20:23:29Z",
            "url": "https://api.github.com/repos/neovim/packspec/issues/comments/1038404002",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59243201?v=4",
                "events_url": "https://api.github.com/users/ii14/events{/privacy}",
                "followers_url": "https://api.github.com/users/ii14/followers",
                "following_url": "https://api.github.com/users/ii14/following{/other_user}",
                "gists_url": "https://api.github.com/users/ii14/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ii14",
                "id": 59243201,
                "login": "ii14",
                "node_id": "MDQ6VXNlcjU5MjQzMjAx",
                "organizations_url": "https://api.github.com/users/ii14/orgs",
                "received_events_url": "https://api.github.com/users/ii14/received_events",
                "repos_url": "https://api.github.com/users/ii14/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ii14/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ii14/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ii14",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Just a random thought. We could encourage people to use lua/neovim as the environment via which to run these commands:\r\n\r\n```lua\r\nbuild = {\r\n  install = \"require('lspconfig').install()\",\r\n  update = \"require('lspconfig').update()\"\r\n}\r\n```\r\n\r\nAnd instead ask users to call the build scripts via lua? Otherwise I'm a bit worried about the complexity of having to deal with powershell vs cmd on windows, fish vs. sh vs. zsh vs bash on unix, etc. Otherwise we are going to have to pick a blessed shell per platform and document how the package manager should deal with this (maybe not a big deal).",
            "created_at": "2022-02-19T16:57:39Z",
            "html_url": "https://github.com/neovim/packspec/issues/23#issuecomment-1046059826",
            "id": 1046059826,
            "issue_url": "https://api.github.com/repos/neovim/packspec/issues/23",
            "node_id": "IC_kwDOGzG0uM4-WZsy",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 4,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 4,
                "url": "https://api.github.com/repos/neovim/packspec/issues/comments/1046059826/reactions"
            },
            "updated_at": "2022-02-19T16:58:10Z",
            "url": "https://api.github.com/repos/neovim/packspec/issues/comments/1046059826",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/13316262?v=4",
                "events_url": "https://api.github.com/users/mjlbach/events{/privacy}",
                "followers_url": "https://api.github.com/users/mjlbach/followers",
                "following_url": "https://api.github.com/users/mjlbach/following{/other_user}",
                "gists_url": "https://api.github.com/users/mjlbach/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mjlbach",
                "id": 13316262,
                "login": "mjlbach",
                "node_id": "MDQ6VXNlcjEzMzE2MjYy",
                "organizations_url": "https://api.github.com/users/mjlbach/orgs",
                "received_events_url": "https://api.github.com/users/mjlbach/received_events",
                "repos_url": "https://api.github.com/users/mjlbach/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mjlbach/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mjlbach/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mjlbach",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "One thing to think about is whether this would be opt-in or opt-out.\r\n\r\nI think with the current set of package managers, they are all opt-in (do to the nature of things currently) and I think some security focused people might want it to stay opt-in, even at a potential lost in ergonomics.",
            "created_at": "2022-03-29T17:48:22Z",
            "html_url": "https://github.com/neovim/packspec/issues/23#issuecomment-1082193797",
            "id": 1082193797,
            "issue_url": "https://api.github.com/repos/neovim/packspec/issues/23",
            "node_id": "IC_kwDOGzG0uM5AgPeF",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/packspec/issues/comments/1082193797/reactions"
            },
            "updated_at": "2022-03-29T17:48:22Z",
            "url": "https://api.github.com/repos/neovim/packspec/issues/comments/1082193797",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/5523984?v=4",
                "events_url": "https://api.github.com/users/mhanberg/events{/privacy}",
                "followers_url": "https://api.github.com/users/mhanberg/followers",
                "following_url": "https://api.github.com/users/mhanberg/following{/other_user}",
                "gists_url": "https://api.github.com/users/mhanberg/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mhanberg",
                "id": 5523984,
                "login": "mhanberg",
                "node_id": "MDQ6VXNlcjU1MjM5ODQ=",
                "organizations_url": "https://api.github.com/users/mhanberg/orgs",
                "received_events_url": "https://api.github.com/users/mhanberg/received_events",
                "repos_url": "https://api.github.com/users/mhanberg/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mhanberg/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mhanberg/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mhanberg",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "@mhanberg I think how is it handled should just be implementation defined, and a package manager could let you audit what it is that it's about to run. And plugins can already screw you up if they wanted to, I don't see any particular reason why some malicious actor would prefer doing something nasty here instead of directly inside the plugin.",
            "created_at": "2022-03-29T17:59:27Z",
            "html_url": "https://github.com/neovim/packspec/issues/23#issuecomment-1082204481",
            "id": 1082204481,
            "issue_url": "https://api.github.com/repos/neovim/packspec/issues/23",
            "node_id": "IC_kwDOGzG0uM5AgSFB",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/packspec/issues/comments/1082204481/reactions"
            },
            "updated_at": "2022-03-29T17:59:27Z",
            "url": "https://api.github.com/repos/neovim/packspec/issues/comments/1082204481",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59243201?v=4",
                "events_url": "https://api.github.com/users/ii14/events{/privacy}",
                "followers_url": "https://api.github.com/users/ii14/followers",
                "following_url": "https://api.github.com/users/ii14/following{/other_user}",
                "gists_url": "https://api.github.com/users/ii14/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ii14",
                "id": 59243201,
                "login": "ii14",
                "node_id": "MDQ6VXNlcjU5MjQzMjAx",
                "organizations_url": "https://api.github.com/users/ii14/orgs",
                "received_events_url": "https://api.github.com/users/ii14/received_events",
                "repos_url": "https://api.github.com/users/ii14/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ii14/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ii14/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ii14",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 9,
    "comments_url": "https://api.github.com/repos/neovim/packspec/issues/23/comments",
    "created_at": "2022-02-12T08:34:10Z",
    "events_url": "https://api.github.com/repos/neovim/packspec/issues/23/events",
    "html_url": "https://github.com/neovim/packspec/issues/23",
    "id": 1133707033,
    "labels": [],
    "labels_url": "https://api.github.com/repos/neovim/packspec/issues/23/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOGzG0uM5Dkv8Z",
    "number": 23,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/packspec/issues/23/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/packspec",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/packspec/issues/23/timeline",
    "title": "Post-install hook",
    "type": null,
    "updated_at": "2025-04-10T07:10:25Z",
    "url": "https://api.github.com/repos/neovim/packspec/issues/23",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/59243201?v=4",
        "events_url": "https://api.github.com/users/ii14/events{/privacy}",
        "followers_url": "https://api.github.com/users/ii14/followers",
        "following_url": "https://api.github.com/users/ii14/following{/other_user}",
        "gists_url": "https://api.github.com/users/ii14/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/ii14",
        "id": 59243201,
        "login": "ii14",
        "node_id": "MDQ6VXNlcjU5MjQzMjAx",
        "organizations_url": "https://api.github.com/users/ii14/orgs",
        "received_events_url": "https://api.github.com/users/ii14/received_events",
        "repos_url": "https://api.github.com/users/ii14/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/ii14/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/ii14/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/ii14",
        "user_view_type": "public"
    }
}